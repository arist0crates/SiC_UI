(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"+dao":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("0kFh"),i=n("q1Ft"),o=n("0kFh"),a=function(){this.children={},this.childCount=0,this.value=null};e.TreeNode=a,e.Tree=function(){function t(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n=new a),this.name_=t,this.parent_=e,this.node_=n}return t.prototype.subTree=function(e){for(var n,r=e instanceof i.Path?e:new i.Path(e),s=this;null!==(n=r.getFront());)s=new t(n,s,o.safeGet(s.node_.children,n)||new a),r=r.popFront();return s},t.prototype.getValue=function(){return this.node_.value},t.prototype.setValue=function(t){r.assert(void 0!==t,"Cannot set value to undefined"),this.node_.value=t,this.updateParents_()},t.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},t.prototype.hasChildren=function(){return this.node_.childCount>0},t.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},t.prototype.forEachChild=function(e){var n=this;o.forEach(this.node_.children,function(r,i){e(new t(r,n,i))})},t.prototype.forEachDescendant=function(t,e,n){e&&!n&&t(this),this.forEachChild(function(e){e.forEachDescendant(t,!0,n)}),e&&n&&t(this)},t.prototype.forEachAncestor=function(t,e){for(var n=e?this:this.parent();null!==n;){if(t(n))return!0;n=n.parent()}return!1},t.prototype.forEachImmediateDescendantWithValue=function(t){this.forEachChild(function(e){null!==e.getValue()?t(e):e.forEachImmediateDescendantWithValue(t)})},t.prototype.path=function(){return new i.Path(null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)},t.prototype.name=function(){return this.name_},t.prototype.parent=function(){return this.parent_},t.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},t.prototype.updateChild_=function(t,e){var n=e.isEmpty(),r=o.contains(this.node_.children,t);n&&r?(delete this.node_.children[t],this.node_.childCount--,this.updateParents_()):n||r||(this.node_.children[t]=e.node_,this.node_.childCount++,this.updateParents_())},t}()},"+e0l":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NamedNode=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}()},"+tJ4":function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(t){return function(e){for(var n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.closed||e.complete()}}},"+umK":function(t,e,n){"use strict";function r(){}n.d(e,"a",function(){return r})},"/3xq":function(t,e,n){n("LOEa")},"/WYv":function(t,e,n){"use strict";function r(t){return t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}n.d(e,"a",function(){return r})},"0/uQ":function(t,e,n){"use strict";var r=n("6blF"),i=n("/WYv"),o=n("2ePl"),a=n("xTla"),s=n("En8+"),u=n("IUTb"),l=n("pugT"),c=n("S5XQ"),h=n("u67D"),d=n("JcRv"),p=n("Fxb1");function f(t,e){if(!e)return t instanceof r.a?t:new r.a(Object(p.a)(t));if(null!=t){if(function(t){return t&&"function"==typeof t[a.a]}(t))return function(t,e){return new r.a(e?function(n){var r=new l.a;return r.add(e.schedule(function(){var i=t[a.a]();r.add(i.subscribe({next:function(t){r.add(e.schedule(function(){return n.next(t)}))},error:function(t){r.add(e.schedule(function(){return n.error(t)}))},complete:function(){r.add(e.schedule(function(){return n.complete()}))}}))})),r}:Object(d.a)(t))}(t,e);if(Object(i.a)(t))return function(t,e){return new r.a(e?function(n){var r=new l.a;return r.add(e.schedule(function(){return t.then(function(t){r.add(e.schedule(function(){n.next(t),r.add(e.schedule(function(){return n.complete()}))}))},function(t){r.add(e.schedule(function(){return n.error(t)}))})})),r}:Object(c.a)(t))}(t,e);if(Object(o.a)(t))return Object(u.a)(t,e);if(function(t){return t&&"function"==typeof t[s.a]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new r.a(e?function(n){var r,i=new l.a;return i.add(function(){r&&"function"==typeof r.return&&r.return()}),i.add(e.schedule(function(){r=t[s.a](),i.add(e.schedule(function(){if(!n.closed){var t,e;try{var i=r.next();t=i.value,e=i.done}catch(t){return void n.error(t)}e?n.complete():(n.next(t),this.schedule())}}))})),i}:Object(h.a)(t))}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}n.d(e,"a",function(){return f})},"0fqx":function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(t){this.ChildProductId=t}},"0iAU":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("SoC1"),i=n("FKYu"),o=n("q1Ft"),a=n("rWOq"),s=n("UhcP"),u=n("P6tX"),l=n("0kFh"),c=n("W1I6"),h=n("0kFh"),d=n("pH6c"),p=n("8LTN"),f=n("58tC"),m=n("JD4d"),v=n("umuC"),g=n("QLcj"),y=n("viW3"),_=n("icDE");e.Repo=function(){function t(t,e,n){var r=this;this.repoInfo_=t,this.app=n,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new v.EventQueue,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new a.SparseSnapshotTree,this.persistentConnection_=null;var i=new d.AuthTokenProvider(n);if(this.stats_=p.StatsManager.getCollection(t),e||c.beingCrawled())this.server_=new y.ReadonlyRestClient(this.repoInfo_,this.onDataUpdate_.bind(this),i),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var o=n.options.databaseAuthVariableOverride;if(void 0!==o&&null!==o){if("object"!=typeof o)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{l.stringify(o)}catch(t){throw new Error("Invalid authOverride provided: "+t)}}this.persistentConnection_=new g.PersistentConnection(this.repoInfo_,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),i,o),this.server_=this.persistentConnection_}i.addTokenChangeListener(function(t){r.server_.refreshAuthToken(t)}),this.statsReporter_=p.StatsManager.getOrCreateReporter(t,function(){return new f.StatsReporter(r.stats_,r.server_)}),this.transactions_init_(),this.infoData_=new u.SnapshotHolder,this.infoSyncTree_=new s.SyncTree({startListening:function(t,e,n,i){var o=[],a=r.infoData_.getNode(t.path);return a.isEmpty()||(o=r.infoSyncTree_.applyServerOverwrite(t.path,a),setTimeout(function(){i("ok")},0)),o},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new s.SyncTree({startListening:function(t,e,n,i){return r.server_.listen(t,n,e,function(e,n){var o=i(e,n);r.eventQueue_.raiseEventsForChangedPath(t.path,o)}),[]},stopListening:function(t,e){r.server_.unlisten(t,e)}})}return t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t.prototype.name=function(){return this.repoInfo_.namespace},t.prototype.serverTime=function(){var t=this.infoData_.getNode(new o.Path(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t},t.prototype.generateServerValues=function(){return r.generateWithValues({timestamp:this.serverTime()})},t.prototype.onDataUpdate_=function(t,e,n,r){this.dataUpdateCount++;var a=new o.Path(t);e=this.interceptServerDataCallback_?this.interceptServerDataCallback_(t,e):e;var s=[];if(r)if(n){var u=h.map(e,function(t){return i.nodeFromJSON(t)});s=this.serverSyncTree_.applyTaggedQueryMerge(a,u,r)}else{var l=i.nodeFromJSON(e);s=this.serverSyncTree_.applyTaggedQueryOverwrite(a,l,r)}else if(n){var c=h.map(e,function(t){return i.nodeFromJSON(t)});s=this.serverSyncTree_.applyServerMerge(a,c)}else{var d=i.nodeFromJSON(e);s=this.serverSyncTree_.applyServerOverwrite(a,d)}var p=a;s.length>0&&(p=this.rerunTransactions_(a)),this.eventQueue_.raiseEventsForChangedPath(p,s)},t.prototype.interceptServerData_=function(t){this.interceptServerDataCallback_=t},t.prototype.onConnectStatus_=function(t){this.updateInfo_("connected",t),!1===t&&this.runOnDisconnectEvents_()},t.prototype.onServerInfoUpdate_=function(t){var e=this;c.each(t,function(t,n){e.updateInfo_(n,t)})},t.prototype.updateInfo_=function(t,e){var n=new o.Path("/.info/"+t),r=i.nodeFromJSON(e);this.infoData_.updateSnapshot(n,r);var a=this.infoSyncTree_.applyServerOverwrite(n,r);this.eventQueue_.raiseEventsForChangedPath(n,a)},t.prototype.getNextWriteId_=function(){return this.nextWriteId_++},t.prototype.setWithPriority=function(t,e,n,o){var a=this;this.log_("set",{path:t.toString(),value:e,priority:n});var s=this.generateServerValues(),u=i.nodeFromJSON(e,n),l=r.resolveDeferredValueSnapshot(u,s),h=this.getNextWriteId_(),d=this.serverSyncTree_.applyUserOverwrite(t,l,h,!0);this.eventQueue_.queueEvents(d),this.server_.put(t.toString(),u.val(!0),function(e,n){var r="ok"===e;r||c.warn("set at "+t+" failed: "+e);var i=a.serverSyncTree_.ackUserWrite(h,!r);a.eventQueue_.raiseEventsForChangedPath(t,i),a.callOnCompleteCallback(o,e,n)});var p=this.abortTransactions_(t);this.rerunTransactions_(p),this.eventQueue_.raiseEventsForChangedPath(p,[])},t.prototype.update=function(t,e,n){var o=this;this.log_("update",{path:t.toString(),value:e});var a=!0,s=this.generateServerValues(),u={};if(h.forEach(e,function(t,e){a=!1;var n=i.nodeFromJSON(e);u[t]=r.resolveDeferredValueSnapshot(n,s)}),a)c.log("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(n,"ok");else{var l=this.getNextWriteId_(),d=this.serverSyncTree_.applyUserMerge(t,u,l);this.eventQueue_.queueEvents(d),this.server_.merge(t.toString(),e,function(e,r){var i="ok"===e;i||c.warn("update at "+t+" failed: "+e);var a=o.serverSyncTree_.ackUserWrite(l,!i),s=a.length>0?o.rerunTransactions_(t):t;o.eventQueue_.raiseEventsForChangedPath(s,a),o.callOnCompleteCallback(n,e,r)}),h.forEach(e,function(e){var n=o.abortTransactions_(t.child(e));o.rerunTransactions_(n)}),this.eventQueue_.raiseEventsForChangedPath(t,[])}},t.prototype.runOnDisconnectEvents_=function(){var t=this;this.log_("onDisconnectEvents");var e=this.generateServerValues(),n=[];r.resolveDeferredValueTree(this.onDisconnect_,e).forEachTree(o.Path.Empty,function(e,r){n=n.concat(t.serverSyncTree_.applyServerOverwrite(e,r));var i=t.abortTransactions_(e);t.rerunTransactions_(i)}),this.onDisconnect_=new a.SparseSnapshotTree,this.eventQueue_.raiseEventsForChangedPath(o.Path.Empty,n)},t.prototype.onDisconnectCancel=function(t,e){var n=this;this.server_.onDisconnectCancel(t.toString(),function(r,i){"ok"===r&&n.onDisconnect_.forget(t),n.callOnCompleteCallback(e,r,i)})},t.prototype.onDisconnectSet=function(t,e,n){var r=this,o=i.nodeFromJSON(e);this.server_.onDisconnectPut(t.toString(),o.val(!0),function(e,i){"ok"===e&&r.onDisconnect_.remember(t,o),r.callOnCompleteCallback(n,e,i)})},t.prototype.onDisconnectSetWithPriority=function(t,e,n,r){var o=this,a=i.nodeFromJSON(e,n);this.server_.onDisconnectPut(t.toString(),a.val(!0),function(e,n){"ok"===e&&o.onDisconnect_.remember(t,a),o.callOnCompleteCallback(r,e,n)})},t.prototype.onDisconnectUpdate=function(t,e,n){var r=this;if(h.isEmpty(e))return c.log("onDisconnect().update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(n,"ok");this.server_.onDisconnectMerge(t.toString(),e,function(o,a){"ok"===o&&h.forEach(e,function(e,n){var o=i.nodeFromJSON(n);r.onDisconnect_.remember(t.child(e),o)}),r.callOnCompleteCallback(n,o,a)})},t.prototype.addEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.addEventRegistration(t,e):this.serverSyncTree_.addEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},t.prototype.removeEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.removeEventRegistration(t,e):this.serverSyncTree_.removeEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},t.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt("repo_interrupt")},t.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume("repo_interrupt")},t.prototype.stats=function(t){if(void 0===t&&(t=!1),"undefined"!=typeof console){var e;t?(this.statsListener_||(this.statsListener_=new m.StatsListener(this.stats_)),e=this.statsListener_.get()):e=this.stats_.get();var n=Object.keys(e).reduce(function(t,e){return Math.max(e.length,t)},0);h.forEach(e,function(t,e){for(var r=t.length;r<n+2;r++)t+=" ";console.log(t+e)})}},t.prototype.statsIncrementCounter=function(t){this.stats_.incrementCounter(t),this.statsReporter_.includeStat(t)},t.prototype.log_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="";this.persistentConnection_&&(n=this.persistentConnection_.id+":"),c.log.apply(void 0,[n].concat(t))},t.prototype.callOnCompleteCallback=function(t,e,n){t&&c.exceptionGuard(function(){if("ok"==e)t(null);else{var r=(e||"error").toUpperCase(),i=r;n&&(i+=": "+n);var o=new Error(i);o.code=r,t(o)}})},Object.defineProperty(t.prototype,"database",{get:function(){return this.__database||(this.__database=new _.Database(this))},enumerable:!0,configurable:!0}),t}()},"0kFh":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("z/SJ");e.assert=r.assert,e.assertionError=r.assertionError;var i=n("5Xge");e.base64=i.base64,e.base64Decode=i.base64Decode,e.base64Encode=i.base64Encode;var o=n("V9+g");e.CONSTANTS=o.CONSTANTS;var a=n("5nAg");e.deepCopy=a.deepCopy,e.deepExtend=a.deepExtend,e.patchProperty=a.patchProperty;var s=n("o07R");e.Deferred=s.Deferred;var u=n("2nbO");e.getUA=u.getUA,e.isMobileCordova=u.isMobileCordova,e.isNodeSdk=u.isNodeSdk,e.isReactNative=u.isReactNative;var l=n("dejr");e.ErrorFactory=l.ErrorFactory,e.FirebaseError=l.FirebaseError,e.patchCapture=l.patchCapture;var c=n("3qh3");e.jsonEval=c.jsonEval,e.stringify=c.stringify;var h=n("bFeb");e.decode=h.decode,e.isAdmin=h.isAdmin,e.issuedAtTime=h.issuedAtTime,e.isValidFormat=h.isValidFormat,e.isValidTimestamp=h.isValidTimestamp;var d=n("W2ca");e.clone=d.clone,e.contains=d.contains,e.every=d.every,e.extend=d.extend,e.findKey=d.findKey,e.findValue=d.findValue,e.forEach=d.forEach,e.getAnyKey=d.getAnyKey,e.getCount=d.getCount,e.getValues=d.getValues,e.isEmpty=d.isEmpty,e.isNonNullObject=d.isNonNullObject,e.map=d.map,e.safeGet=d.safeGet;var p=n("bhsf");e.querystring=p.querystring,e.querystringDecode=p.querystringDecode;var f=n("fneD");e.Sha1=f.Sha1;var m=n("NWFE");e.async=m.async,e.createSubscribe=m.createSubscribe;var v=n("XJaP");e.errorPrefix=v.errorPrefix,e.validateArgCount=v.validateArgCount,e.validateCallback=v.validateCallback,e.validateContextObject=v.validateContextObject,e.validateNamespace=v.validateNamespace;var g=n("68qo");e.stringLength=g.stringLength,e.stringToByteArray=g.stringToByteArray},2:function(t,e,n){t.exports=n("zUnb")},"26FU":function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("mrSG"),i=n("K9Ia"),o=n("8g8A"),a=function(t){function e(e){var n=t.call(this)||this;return n._value=e,n}return r.__extends(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),e.prototype._subscribe=function(e){var n=t.prototype._subscribe.call(this,e);return n&&!n.closed&&e.next(this._value),n},e.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new o.a;return this._value},e.prototype.next=function(e){t.prototype.next.call(this,this._value=e)},e}(i.a)},"2Bdj":function(t,e,n){"use strict";function r(t){return"function"==typeof t}n.d(e,"a",function(){return r})},"2ePl":function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(t){return t&&"number"==typeof t.length&&"function"!=typeof t}},"2nbO":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("V9+g");e.getUA=function(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""},e.isMobileCordova=function(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(e.getUA())},e.isReactNative=function(){return"object"==typeof navigator&&"ReactNative"===navigator.product},e.isNodeSdk=function(){return!0===r.CONSTANTS.NODE_CLIENT||!0===r.CONSTANTS.NODE_ADMIN}},"3RyD":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("0kFh"),i=n("SyT/"),o=n("q1Ft"),a=n("Mom/");e.DataSnapshot=function(){function t(t,e,n){this.node_=t,this.ref_=e,this.index_=n}return t.prototype.val=function(){return r.validateArgCount("DataSnapshot.val",0,0,arguments.length),this.node_.val()},t.prototype.exportVal=function(){return r.validateArgCount("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},t.prototype.toJSON=function(){return r.validateArgCount("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},t.prototype.exists=function(){return r.validateArgCount("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},t.prototype.child=function(e){r.validateArgCount("DataSnapshot.child",0,1,arguments.length),e=String(e),i.validatePathString("DataSnapshot.child",1,e,!1);var n=new o.Path(e),s=this.ref_.child(n);return new t(this.node_.getChild(n),s,a.PRIORITY_INDEX)},t.prototype.hasChild=function(t){r.validateArgCount("DataSnapshot.hasChild",1,1,arguments.length),i.validatePathString("DataSnapshot.hasChild",1,t,!1);var e=new o.Path(t);return!this.node_.getChild(e).isEmpty()},t.prototype.getPriority=function(){return r.validateArgCount("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},t.prototype.forEach=function(e){var n=this;return r.validateArgCount("DataSnapshot.forEach",1,1,arguments.length),r.validateCallback("DataSnapshot.forEach",1,e,!1),!this.node_.isLeafNode()&&!!this.node_.forEachChild(this.index_,function(r,i){return e(new t(i,n.ref_.child(r),a.PRIORITY_INDEX))})},t.prototype.hasChildren=function(){return r.validateArgCount("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(t.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!0,configurable:!0}),t.prototype.numChildren=function(){return r.validateArgCount("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},t.prototype.getRef=function(){return r.validateArgCount("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!0,configurable:!0}),t}()},"3U0i":function(t,e,n){"use strict";function r(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}n.r(e),n.d(e,"TimeoutError",function(){return i}),r.prototype=Object.create(Error.prototype);var i=r},"3V6w":function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(){function t(){this.isOpen=!1}return t.prototype.toggleOpen=function(){this.isOpen=!this.isOpen},t}()},"3fWJ":function(t,e,n){"use strict";function r(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}n.d(e,"a",function(){return i}),r.prototype=Object.create(Error.prototype);var i=r},"3qh3":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.jsonEval=function(t){return JSON.parse(t)},e.stringify=function(t){return JSON.stringify(t)}},"4oYI":function(t,e){String.prototype.startsWith||(String.prototype.startsWith=function(t,e){return this.substr(!e||e<0?0:+e,t.length)===t})},"58tC":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("0kFh"),i=n("W1I6"),o=n("JD4d"),a=1e4,s=3e4;e.StatsReporter=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new o.StatsListener(t);var n=a+(s-a)*Math.random();i.setTimeoutNonBlocking(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.includeStat=function(t){this.statsToReport_[t]=!0},t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},o=!1;r.forEach(e,function(e,i){i>0&&r.contains(t.statsToReport_,e)&&(n[e]=i,o=!0)}),o&&this.server_.reportStats(n),i.setTimeoutNonBlocking(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},t}()},"5Xge":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e};e.base64={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],a=i+1<t.length,s=a?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0,c=(15&s)<<2|l>>6,h=63&l;u||(h=64,a||(c=64)),r.push(n[o>>2],n[(3&o)<<4|s>>4],n[c],n[h])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(r(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var a=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(s=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(a>>10)),e[r++]=String.fromCharCode(56320+(1023&a))}else{o=t[n++];var s=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0,s=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==a||null==s||null==u)throw Error();r.push(o<<2|a>>4),64!=s&&(r.push(a<<4&240|s>>2),64!=u&&r.push(s<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},e.base64Encode=function(t){var n=r(t);return e.base64.encodeByteArray(n,!0)},e.base64Decode=function(t){try{return e.base64.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null}},"5nAg":function(t,e,n){"use strict";function r(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&(t[n]=r(t[n],e[n]));return t}Object.defineProperty(e,"__esModule",{value:!0}),e.deepCopy=function(t){return r(void 0,t)},e.deepExtend=r,e.patchProperty=function(t,e,n){t[e]=n}},"60iU":function(t,e,n){"use strict";n.r(e),n.d(e,"Notification",function(){return a});var r=n("G5J1"),i=n("F/XL"),o=n("XlPw"),a=function(){function t(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}return t.prototype.observe=function(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}},t.prototype.do=function(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}},t.prototype.accept=function(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)},t.prototype.toObservable=function(){switch(this.kind){case"N":return Object(i.a)(this.value);case"E":return Object(o.throwError)(this.error);case"C":return Object(r.b)()}throw new Error("unexpected notification kind value")},t.createNext=function(e){return void 0!==e?new t("N",e):t.undefinedValueNotification},t.createError=function(e){return new t("E",void 0,e)},t.createComplete=function(){return t.completeNotification},t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t}()},"67Y/":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("mrSG"),i=n("FFOo");function o(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new a(t,e))}}var a=function(){function t(t,e){this.project=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new s(t,this.project,this.thisArg))},t}(),s=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.project=n,i.count=0,i.thisArg=r||i,i}return r.__extends(e,t),e.prototype._next=function(t){var e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(i.a)},"68qo":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("z/SJ");e.stringToByteArray=function(t){for(var e=[],n=0,i=0;i<t.length;i++){var o=t.charCodeAt(i);if(o>=55296&&o<=56319){var a=o-55296;r.assert(++i<t.length,"Surrogate pair missing trail surrogate."),o=65536+(a<<10)+(t.charCodeAt(i)-56320)}o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=63&o|128):o<65536?(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=63&o|128):(e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=63&o|128)}return e},e.stringLength=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e}},"6PkL":function(t,e,n){"use strict";var r=setTimeout;function i(){}function o(t){if(!(this instanceof o))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],c(t,this)}function a(t,e){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,o._immediateFn(function(){var n=1===t._state?e.onFulfilled:e.onRejected;if(null!==n){var r;try{r=n(t._value)}catch(t){return void u(e.promise,t)}s(e.promise,r)}else(1===t._state?s:u)(e.promise,t._value)})):t._deferreds.push(e)}function s(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var n=e.then;if(e instanceof o)return t._state=3,t._value=e,void l(t);if("function"==typeof n)return void c((r=n,i=e,function(){r.apply(i,arguments)}),t)}t._state=1,t._value=e,l(t)}catch(e){u(t,e)}var r,i}function u(t,e){t._state=2,t._value=e,l(t)}function l(t){2===t._state&&0===t._deferreds.length&&o._immediateFn(function(){t._handled||o._unhandledRejectionFn(t._value)});for(var e=0,n=t._deferreds.length;e<n;e++)a(t,t._deferreds[e]);t._deferreds=null}function c(t,e){var n=!1;try{t(function(t){n||(n=!0,s(e,t))},function(t){n||(n=!0,u(e,t))})}catch(t){if(n)return;n=!0,u(e,t)}}o.prototype.catch=function(t){return this.then(null,t)},o.prototype.then=function(t,e){var n=new this.constructor(i);return a(this,new function(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}(t,e,n)),n},o.prototype.finally=function(t){var e=this.constructor;return this.then(function(n){return e.resolve(t()).then(function(){return n})},function(n){return e.resolve(t()).then(function(){return e.reject(n)})})},o.all=function(t){return new o(function(e,n){if(!t||void 0===t.length)throw new TypeError("Promise.all accepts an array");var r=Array.prototype.slice.call(t);if(0===r.length)return e([]);var i=r.length;function o(t,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var s=a.then;if("function"==typeof s)return void s.call(a,function(e){o(t,e)},n)}r[t]=a,0==--i&&e(r)}catch(t){n(t)}}for(var a=0;a<r.length;a++)o(a,r[a])})},o.resolve=function(t){return t&&"object"==typeof t&&t.constructor===o?t:new o(function(e){e(t)})},o.reject=function(t){return new o(function(e,n){n(t)})},o.race=function(t){return new o(function(e,n){for(var r=0,i=t.length;r<i;r++)t[r].then(e,n)})},o._immediateFn="function"==typeof setImmediate&&function(t){setImmediate(t)}||function(t){r(t,0)},o._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)},t.exports=o},"6ahw":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("iLxQ"),i=n("DKTb"),o={closed:!0,next:function(t){},error:function(t){if(r.a.useDeprecatedSynchronousErrorHandling)throw t;Object(i.a)(t)},complete:function(){}}},"6blF":function(t,e,n){"use strict";var r=n("FFOo"),i=n("L/V9"),o=n("6ahw"),a=n("xTla"),s=n("y3By"),u=n("iLxQ");n.d(e,"a",function(){return l});var l=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(t,e,n){var a=this.operator,s=function(t,e,n){if(t){if(t instanceof r.a)return t;if(t[i.a])return t[i.a]()}return t||e||n?new r.a(t,e,n):new r.a(o.a)}(t,e,n);if(a?a.call(s,this.source):s.add(this.source||u.a.useDeprecatedSynchronousErrorHandling&&!s.syncErrorThrowable?this._subscribe(s):this._trySubscribe(s)),u.a.useDeprecatedSynchronousErrorHandling&&s.syncErrorThrowable&&(s.syncErrorThrowable=!1,s.syncErrorThrown))throw s.syncErrorValue;return s},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){u.a.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){var e=t.destination;if(t.closed||t.isStopped)return!1;t=e&&e instanceof r.a?e:null}return!0}(t)?t.error(e):console.warn(e)}},t.prototype.forEach=function(t,e){var n=this;return new(e=c(e))(function(e,r){var i;i=n.subscribe(function(e){try{t(e)}catch(t){r(t),i&&i.unsubscribe()}},r,e)})},t.prototype._subscribe=function(t){var e=this.source;return e&&e.subscribe(t)},t.prototype[a.a]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 0===t.length?this:Object(s.b)(t)(this)},t.prototype.toPromise=function(t){var e=this;return new(t=c(t))(function(t,n){var r;e.subscribe(function(t){return r=t},function(t){return n(t)},function(){return t(r)})})},t.create=function(e){return new t(e)},t}();function c(t){if(t||(t=u.a.Promise||Promise),!t)throw new Error("no Promise impl found");return t}},"6xh3":function(t,e){t.exports=function(t){var e=function(e){t.MeshBasicMaterial.call(this),this.depthTest=!1,this.depthWrite=!1,this.side=t.FrontSide,this.transparent=!0,this.setValues(e),this.oldColor=this.color.clone(),this.oldOpacity=this.opacity,this.highlight=function(t){t?(this.color.setRGB(1,1,0),this.opacity=1):(this.color.copy(this.oldColor),this.opacity=this.oldOpacity)}};(e.prototype=Object.create(t.MeshBasicMaterial.prototype)).constructor=e;var n=function(e){t.LineBasicMaterial.call(this),this.depthTest=!1,this.depthWrite=!1,this.transparent=!0,this.linewidth=1,this.setValues(e),this.oldColor=this.color.clone(),this.oldOpacity=this.opacity,this.highlight=function(t){t?(this.color.setRGB(1,1,0),this.opacity=1):(this.color.copy(this.oldColor),this.opacity=this.oldOpacity)}};(n.prototype=Object.create(t.LineBasicMaterial.prototype)).constructor=n;var r=new e({visible:!1,transparent:!1});function i(e,n){t.Object3D.call(this),n=void 0!==n?n:document,this.object=void 0,this.visible=!1,this.translationSnap=null,this.rotationSnap=null,this.space="world",this.size=1,this.axis=null;var r=this,i="translate",o=!1,a={translate:new t.TransformGizmoTranslate,rotate:new t.TransformGizmoRotate,scale:new t.TransformGizmoScale};for(var s in a){var u=a[s];u.visible=s===i,this.add(u)}var l={type:"change"},c={type:"mouseDown"},h={type:"mouseUp",mode:i},d={type:"objectChange"},p=new t.Raycaster,f=new t.Vector2,m=new t.Vector3,v=new t.Vector3,g=new t.Vector3,y=new t.Vector3,_=1,b=new t.Matrix4,w=new t.Vector3,x=new t.Matrix4,E=new t.Vector3,S=new t.Quaternion,T=new t.Vector3(1,0,0),M=new t.Vector3(0,1,0),C=new t.Vector3(0,0,1),A=new t.Quaternion,P=new t.Quaternion,O=new t.Quaternion,R=new t.Quaternion,L=new t.Quaternion,I=new t.Vector3,N=new t.Vector3,D=new t.Matrix4,k=new t.Matrix4,F=new t.Vector3,j=new t.Vector3,U=new t.Euler,B=new t.Matrix4,G=new t.Vector3,V=new t.Euler;function z(t){if(void 0!==r.object&&!0!==o&&(void 0===t.button||0===t.button)){var e=X(t.changedTouches?t.changedTouches[0]:t,a[i].pickers.children),n=null;e&&(n=e.object.name,t.preventDefault()),r.axis!==n&&(r.axis=n,r.update(),r.dispatchEvent(l))}}function H(t){if(void 0!==r.object&&!0!==o&&(void 0===t.button||0===t.button)){var e=t.changedTouches?t.changedTouches[0]:t;if(0===e.button||void 0===e.button){var n=X(e,a[i].pickers.children);if(n){t.preventDefault(),t.stopPropagation(),r.dispatchEvent(c),r.axis=n.object.name,r.update(),w.copy(G).sub(j).normalize(),a[i].setActivePlane(r.axis,w);var s=X(e,[a[i].activePlane]);s&&(I.copy(r.object.position),N.copy(r.object.scale),D.extractRotation(r.object.matrix),B.extractRotation(r.object.matrixWorld),k.extractRotation(r.object.parent.matrixWorld),F.setFromMatrixScale(x.getInverse(r.object.parent.matrixWorld)),v.copy(s.point))}}o=!0}}function W(t){if(void 0!==r.object&&null!==r.axis&&!1!==o&&(void 0===t.button||0===t.button)){var e=X(t.changedTouches?t.changedTouches[0]:t,[a[i].activePlane]);!1!==e&&(t.preventDefault(),t.stopPropagation(),m.copy(e.point),"translate"===i?(m.sub(v),m.multiply(F),"local"===r.space&&(m.applyMatrix4(x.getInverse(B)),-1===r.axis.search("X")&&(m.x=0),-1===r.axis.search("Y")&&(m.y=0),-1===r.axis.search("Z")&&(m.z=0),m.applyMatrix4(D),r.object.position.copy(I),r.object.position.add(m)),"world"!==r.space&&-1===r.axis.search("XYZ")||(-1===r.axis.search("X")&&(m.x=0),-1===r.axis.search("Y")&&(m.y=0),-1===r.axis.search("Z")&&(m.z=0),m.applyMatrix4(x.getInverse(k)),r.object.position.copy(I),r.object.position.add(m)),null!==r.translationSnap&&("local"===r.space&&r.object.position.applyMatrix4(x.getInverse(B)),-1!==r.axis.search("X")&&(r.object.position.x=Math.round(r.object.position.x/r.translationSnap)*r.translationSnap),-1!==r.axis.search("Y")&&(r.object.position.y=Math.round(r.object.position.y/r.translationSnap)*r.translationSnap),-1!==r.axis.search("Z")&&(r.object.position.z=Math.round(r.object.position.z/r.translationSnap)*r.translationSnap),"local"===r.space&&r.object.position.applyMatrix4(B))):"scale"===i?(m.sub(v),m.multiply(F),"local"===r.space&&("XYZ"===r.axis?(_=1+m.y/Math.max(N.x,N.y,N.z),r.object.scale.x=N.x*_,r.object.scale.y=N.y*_,r.object.scale.z=N.z*_):(m.applyMatrix4(x.getInverse(B)),"X"===r.axis&&(r.object.scale.x=N.x*(1+m.x/N.x)),"Y"===r.axis&&(r.object.scale.y=N.y*(1+m.y/N.y)),"Z"===r.axis&&(r.object.scale.z=N.z*(1+m.z/N.z))))):"rotate"===i&&(m.sub(j),m.multiply(F),E.copy(v).sub(j),E.multiply(F),"E"===r.axis?(m.applyMatrix4(x.getInverse(b)),E.applyMatrix4(x.getInverse(b)),g.set(Math.atan2(m.z,m.y),Math.atan2(m.x,m.z),Math.atan2(m.y,m.x)),y.set(Math.atan2(E.z,E.y),Math.atan2(E.x,E.z),Math.atan2(E.y,E.x)),S.setFromRotationMatrix(x.getInverse(k)),L.setFromAxisAngle(w,g.z-y.z),A.setFromRotationMatrix(B),S.multiplyQuaternions(S,L),S.multiplyQuaternions(S,A),r.object.quaternion.copy(S)):"XYZE"===r.axis?(L.setFromEuler(m.clone().cross(E).normalize()),S.setFromRotationMatrix(x.getInverse(k)),P.setFromAxisAngle(L,-m.clone().angleTo(E)),A.setFromRotationMatrix(B),S.multiplyQuaternions(S,P),S.multiplyQuaternions(S,A),r.object.quaternion.copy(S)):"local"===r.space?(m.applyMatrix4(x.getInverse(B)),E.applyMatrix4(x.getInverse(B)),g.set(Math.atan2(m.z,m.y),Math.atan2(m.x,m.z),Math.atan2(m.y,m.x)),y.set(Math.atan2(E.z,E.y),Math.atan2(E.x,E.z),Math.atan2(E.y,E.x)),A.setFromRotationMatrix(D),null!==r.rotationSnap?(P.setFromAxisAngle(T,Math.round((g.x-y.x)/r.rotationSnap)*r.rotationSnap),O.setFromAxisAngle(M,Math.round((g.y-y.y)/r.rotationSnap)*r.rotationSnap),R.setFromAxisAngle(C,Math.round((g.z-y.z)/r.rotationSnap)*r.rotationSnap)):(P.setFromAxisAngle(T,g.x-y.x),O.setFromAxisAngle(M,g.y-y.y),R.setFromAxisAngle(C,g.z-y.z)),"X"===r.axis&&A.multiplyQuaternions(A,P),"Y"===r.axis&&A.multiplyQuaternions(A,O),"Z"===r.axis&&A.multiplyQuaternions(A,R),r.object.quaternion.copy(A)):"world"===r.space&&(g.set(Math.atan2(m.z,m.y),Math.atan2(m.x,m.z),Math.atan2(m.y,m.x)),y.set(Math.atan2(E.z,E.y),Math.atan2(E.x,E.z),Math.atan2(E.y,E.x)),S.setFromRotationMatrix(x.getInverse(k)),null!==r.rotationSnap?(P.setFromAxisAngle(T,Math.round((g.x-y.x)/r.rotationSnap)*r.rotationSnap),O.setFromAxisAngle(M,Math.round((g.y-y.y)/r.rotationSnap)*r.rotationSnap),R.setFromAxisAngle(C,Math.round((g.z-y.z)/r.rotationSnap)*r.rotationSnap)):(P.setFromAxisAngle(T,g.x-y.x),O.setFromAxisAngle(M,g.y-y.y),R.setFromAxisAngle(C,g.z-y.z)),A.setFromRotationMatrix(B),"X"===r.axis&&S.multiplyQuaternions(S,P),"Y"===r.axis&&S.multiplyQuaternions(S,O),"Z"===r.axis&&S.multiplyQuaternions(S,R),S.multiplyQuaternions(S,A),r.object.quaternion.copy(S))),r.update(),r.dispatchEvent(l),r.dispatchEvent(d))}}function q(t){t.preventDefault(),void 0!==t.button&&0!==t.button||(o&&null!==r.axis&&(h.mode=i,r.dispatchEvent(h)),o=!1,"TouchEvent"in window&&t instanceof TouchEvent?(r.axis=null,r.update(),r.dispatchEvent(l)):z(t))}function X(t,r){var i=n.getBoundingClientRect();f.set((t.clientX-i.left)/i.width*2-1,(t.clientY-i.top)/i.height*-2+1),p.setFromCamera(f,e);var o=p.intersectObjects(r,!0);return!!o[0]&&o[0]}n.addEventListener("mousedown",H,!1),n.addEventListener("touchstart",H,!1),n.addEventListener("mousemove",z,!1),n.addEventListener("touchmove",z,!1),n.addEventListener("mousemove",W,!1),n.addEventListener("touchmove",W,!1),n.addEventListener("mouseup",q,!1),n.addEventListener("mouseout",q,!1),n.addEventListener("touchend",q,!1),n.addEventListener("touchcancel",q,!1),n.addEventListener("touchleave",q,!1),this.dispose=function(){n.removeEventListener("mousedown",H),n.removeEventListener("touchstart",H),n.removeEventListener("mousemove",z),n.removeEventListener("touchmove",z),n.removeEventListener("mousemove",W),n.removeEventListener("touchmove",W),n.removeEventListener("mouseup",q),n.removeEventListener("mouseout",q),n.removeEventListener("touchend",q),n.removeEventListener("touchcancel",q),n.removeEventListener("touchleave",q)},this.attach=function(t){this.object=t,this.visible=!0,this.update()},this.detach=function(){this.object=void 0,this.visible=!1,this.axis=null},this.getMode=function(){return i},this.setMode=function(t){for(var e in"scale"===(i=t||i)&&(r.space="local"),a)a[e].visible=e===i;this.update(),r.dispatchEvent(l)},this.setTranslationSnap=function(t){r.translationSnap=t},this.setRotationSnap=function(t){r.rotationSnap=t},this.setSize=function(t){r.size=t,this.update(),r.dispatchEvent(l)},this.setSpace=function(t){r.space=t,this.update(),r.dispatchEvent(l)},this.update=function(){void 0!==r.object&&(r.object.updateMatrixWorld(),j.setFromMatrixPosition(r.object.matrixWorld),U.setFromRotationMatrix(x.extractRotation(r.object.matrixWorld)),e.updateMatrixWorld(),G.setFromMatrixPosition(e.matrixWorld),V.setFromRotationMatrix(x.extractRotation(e.matrixWorld)),_=j.distanceTo(G)/6*r.size,this.position.copy(j),this.scale.set(_,_,_),e instanceof t.PerspectiveCamera?w.copy(G).sub(j).normalize():e instanceof t.OrthographicCamera&&w.copy(G).normalize(),"local"===r.space?a[i].update(U,w):"world"===r.space&&a[i].update(new t.Euler,w),a[i].highlight(r.axis))}}return t.TransformGizmo=function(){this.init=function(){t.Object3D.call(this),this.handles=new t.Object3D,this.pickers=new t.Object3D,this.planes=new t.Object3D,this.add(this.handles),this.add(this.pickers),this.add(this.planes);var e=new t.PlaneBufferGeometry(50,50,2,2),n=new t.MeshBasicMaterial({visible:!1,side:t.DoubleSide}),r={XY:new t.Mesh(e,n),YZ:new t.Mesh(e,n),XZ:new t.Mesh(e,n),XYZE:new t.Mesh(e,n)};for(var i in this.activePlane=r.XYZE,r.YZ.rotation.set(0,Math.PI/2,0),r.XZ.rotation.set(-Math.PI/2,0,0),r)r[i].name=i,this.planes.add(r[i]),this.planes[i]=r[i];var o=function(t,e){for(var n in t)for(i=t[n].length;i--;){var r=t[n][i][0],o=t[n][i][1],a=t[n][i][2];r.name=n,o&&r.position.set(o[0],o[1],o[2]),a&&r.rotation.set(a[0],a[1],a[2]),e.add(r)}};o(this.handleGizmos,this.handles),o(this.pickerGizmos,this.pickers),this.traverse(function(e){if(e instanceof t.Mesh){e.updateMatrix();var n=e.geometry.clone();n.applyMatrix(e.matrix),e.geometry=n,e.position.set(0,0,0),e.rotation.set(0,0,0),e.scale.set(1,1,1)}})},this.highlight=function(t){this.traverse(function(e){e.material&&e.material.highlight&&e.material.highlight(e.name===t)})}},t.TransformGizmo.prototype=Object.create(t.Object3D.prototype),t.TransformGizmo.prototype.constructor=t.TransformGizmo,t.TransformGizmo.prototype.update=function(e,n){var r=new t.Vector3(0,0,0),i=new t.Vector3(0,1,0),o=new t.Matrix4;this.traverse(function(t){-1!==t.name.search("E")?t.quaternion.setFromRotationMatrix(o.lookAt(n,r,i)):-1===t.name.search("X")&&-1===t.name.search("Y")&&-1===t.name.search("Z")||t.quaternion.setFromEuler(e)})},t.TransformGizmoTranslate=function(){t.TransformGizmo.call(this);var i=new t.Geometry,o=new t.Mesh(new t.CylinderGeometry(0,.05,.2,12,1,!1));o.position.y=.5,o.updateMatrix(),i.merge(o.geometry,o.matrix);var a=new t.BufferGeometry;a.addAttribute("position",new t.Float32BufferAttribute([0,0,0,1,0,0],3));var s=new t.BufferGeometry;s.addAttribute("position",new t.Float32BufferAttribute([0,0,0,0,1,0],3));var u=new t.BufferGeometry;u.addAttribute("position",new t.Float32BufferAttribute([0,0,0,0,0,1],3)),this.handleGizmos={X:[[new t.Mesh(i,new e({color:16711680})),[.5,0,0],[0,0,-Math.PI/2]],[new t.Line(a,new n({color:16711680}))]],Y:[[new t.Mesh(i,new e({color:65280})),[0,.5,0]],[new t.Line(s,new n({color:65280}))]],Z:[[new t.Mesh(i,new e({color:255})),[0,0,.5],[Math.PI/2,0,0]],[new t.Line(u,new n({color:255}))]],XYZ:[[new t.Mesh(new t.OctahedronGeometry(.1,0),new e({color:16777215,opacity:.25})),[0,0,0],[0,0,0]]],XY:[[new t.Mesh(new t.PlaneBufferGeometry(.29,.29),new e({color:16776960,opacity:.25})),[.15,.15,0]]],YZ:[[new t.Mesh(new t.PlaneBufferGeometry(.29,.29),new e({color:65535,opacity:.25})),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new t.Mesh(new t.PlaneBufferGeometry(.29,.29),new e({color:16711935,opacity:.25})),[.15,0,.15],[-Math.PI/2,0,0]]]},this.pickerGizmos={X:[[new t.Mesh(new t.CylinderBufferGeometry(.2,0,1,4,1,!1),r),[.6,0,0],[0,0,-Math.PI/2]]],Y:[[new t.Mesh(new t.CylinderBufferGeometry(.2,0,1,4,1,!1),r),[0,.6,0]]],Z:[[new t.Mesh(new t.CylinderBufferGeometry(.2,0,1,4,1,!1),r),[0,0,.6],[Math.PI/2,0,0]]],XYZ:[[new t.Mesh(new t.OctahedronGeometry(.2,0),r)]],XY:[[new t.Mesh(new t.PlaneBufferGeometry(.4,.4),r),[.2,.2,0]]],YZ:[[new t.Mesh(new t.PlaneBufferGeometry(.4,.4),r),[0,.2,.2],[0,Math.PI/2,0]]],XZ:[[new t.Mesh(new t.PlaneBufferGeometry(.4,.4),r),[.2,0,.2],[-Math.PI/2,0,0]]]},this.setActivePlane=function(e,n){var r=new t.Matrix4;n.applyMatrix4(r.getInverse(r.extractRotation(this.planes.XY.matrixWorld))),"X"===e&&(this.activePlane=this.planes.XY,Math.abs(n.y)>Math.abs(n.z)&&(this.activePlane=this.planes.XZ)),"Y"===e&&(this.activePlane=this.planes.XY,Math.abs(n.x)>Math.abs(n.z)&&(this.activePlane=this.planes.YZ)),"Z"===e&&(this.activePlane=this.planes.XZ,Math.abs(n.x)>Math.abs(n.y)&&(this.activePlane=this.planes.YZ)),"XYZ"===e&&(this.activePlane=this.planes.XYZE),"XY"===e&&(this.activePlane=this.planes.XY),"YZ"===e&&(this.activePlane=this.planes.YZ),"XZ"===e&&(this.activePlane=this.planes.XZ)},this.init()},t.TransformGizmoTranslate.prototype=Object.create(t.TransformGizmo.prototype),t.TransformGizmoTranslate.prototype.constructor=t.TransformGizmoTranslate,t.TransformGizmoRotate=function(){t.TransformGizmo.call(this);var e=function(e,n,r){var i=new t.BufferGeometry,o=[];r=r||1;for(var a=0;a<=64*r;++a)"x"===n&&o.push(0,Math.cos(a/32*Math.PI)*e,Math.sin(a/32*Math.PI)*e),"y"===n&&o.push(Math.cos(a/32*Math.PI)*e,0,Math.sin(a/32*Math.PI)*e),"z"===n&&o.push(Math.sin(a/32*Math.PI)*e,Math.cos(a/32*Math.PI)*e,0);return i.addAttribute("position",new t.Float32BufferAttribute(o,3)),i};this.handleGizmos={X:[[new t.Line(new e(1,"x",.5),new n({color:16711680}))]],Y:[[new t.Line(new e(1,"y",.5),new n({color:65280}))]],Z:[[new t.Line(new e(1,"z",.5),new n({color:255}))]],E:[[new t.Line(new e(1.25,"z",1),new n({color:13421568}))]],XYZE:[[new t.Line(new e(1,"z",1),new n({color:7895160}))]]},this.pickerGizmos={X:[[new t.Mesh(new t.TorusBufferGeometry(1,.12,4,12,Math.PI),r),[0,0,0],[0,-Math.PI/2,-Math.PI/2]]],Y:[[new t.Mesh(new t.TorusBufferGeometry(1,.12,4,12,Math.PI),r),[0,0,0],[Math.PI/2,0,0]]],Z:[[new t.Mesh(new t.TorusBufferGeometry(1,.12,4,12,Math.PI),r),[0,0,0],[0,0,-Math.PI/2]]],E:[[new t.Mesh(new t.TorusBufferGeometry(1.25,.12,2,24),r)]],XYZE:[[new t.Mesh]]},this.setActivePlane=function(t){"E"===t&&(this.activePlane=this.planes.XYZE),"X"===t&&(this.activePlane=this.planes.YZ),"Y"===t&&(this.activePlane=this.planes.XZ),"Z"===t&&(this.activePlane=this.planes.XY)},this.update=function(e,n){t.TransformGizmo.prototype.update.apply(this,arguments);var r=new t.Matrix4,i=new t.Euler(0,0,1),o=new t.Quaternion,a=new t.Vector3(1,0,0),s=new t.Vector3(0,1,0),u=new t.Vector3(0,0,1),l=new t.Quaternion,c=new t.Quaternion,h=new t.Quaternion,d=n.clone();i.copy(this.planes.XY.rotation),o.setFromEuler(i),r.makeRotationFromQuaternion(o).getInverse(r),d.applyMatrix4(r),this.traverse(function(t){o.setFromEuler(i),"X"===t.name&&(l.setFromAxisAngle(a,Math.atan2(-d.y,d.z)),o.multiplyQuaternions(o,l),t.quaternion.copy(o)),"Y"===t.name&&(c.setFromAxisAngle(s,Math.atan2(d.x,d.z)),o.multiplyQuaternions(o,c),t.quaternion.copy(o)),"Z"===t.name&&(h.setFromAxisAngle(u,Math.atan2(d.y,d.x)),o.multiplyQuaternions(o,h),t.quaternion.copy(o))})},this.init()},t.TransformGizmoRotate.prototype=Object.create(t.TransformGizmo.prototype),t.TransformGizmoRotate.prototype.constructor=t.TransformGizmoRotate,t.TransformGizmoScale=function(){t.TransformGizmo.call(this);var i=new t.Geometry,o=new t.Mesh(new t.BoxGeometry(.125,.125,.125));o.position.y=.5,o.updateMatrix(),i.merge(o.geometry,o.matrix);var a=new t.BufferGeometry;a.addAttribute("position",new t.Float32BufferAttribute([0,0,0,1,0,0],3));var s=new t.BufferGeometry;s.addAttribute("position",new t.Float32BufferAttribute([0,0,0,0,1,0],3));var u=new t.BufferGeometry;u.addAttribute("position",new t.Float32BufferAttribute([0,0,0,0,0,1],3)),this.handleGizmos={X:[[new t.Mesh(i,new e({color:16711680})),[.5,0,0],[0,0,-Math.PI/2]],[new t.Line(a,new n({color:16711680}))]],Y:[[new t.Mesh(i,new e({color:65280})),[0,.5,0]],[new t.Line(s,new n({color:65280}))]],Z:[[new t.Mesh(i,new e({color:255})),[0,0,.5],[Math.PI/2,0,0]],[new t.Line(u,new n({color:255}))]],XYZ:[[new t.Mesh(new t.BoxBufferGeometry(.125,.125,.125),new e({color:16777215,opacity:.25}))]]},this.pickerGizmos={X:[[new t.Mesh(new t.CylinderBufferGeometry(.2,0,1,4,1,!1),r),[.6,0,0],[0,0,-Math.PI/2]]],Y:[[new t.Mesh(new t.CylinderBufferGeometry(.2,0,1,4,1,!1),r),[0,.6,0]]],Z:[[new t.Mesh(new t.CylinderBufferGeometry(.2,0,1,4,1,!1),r),[0,0,.6],[Math.PI/2,0,0]]],XYZ:[[new t.Mesh(new t.BoxBufferGeometry(.4,.4,.4),r)]]},this.setActivePlane=function(e,n){var r=new t.Matrix4;n.applyMatrix4(r.getInverse(r.extractRotation(this.planes.XY.matrixWorld))),"X"===e&&(this.activePlane=this.planes.XY,Math.abs(n.y)>Math.abs(n.z)&&(this.activePlane=this.planes.XZ)),"Y"===e&&(this.activePlane=this.planes.XY,Math.abs(n.x)>Math.abs(n.z)&&(this.activePlane=this.planes.YZ)),"Z"===e&&(this.activePlane=this.planes.XZ,Math.abs(n.x)>Math.abs(n.y)&&(this.activePlane=this.planes.YZ)),"XYZ"===e&&(this.activePlane=this.planes.XYZE)},this.init()},t.TransformGizmoScale.prototype=Object.create(t.TransformGizmo.prototype),t.TransformGizmoScale.prototype.constructor=t.TransformGizmoScale,(i.prototype=Object.create(t.Object3D.prototype)).constructor=i,i}},"73GG":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("0kFh"),i=n("0kFh"),o=n("xHNN"),a=n("N1zr");e.RepoInfo=function(){function t(t,e,n,r,i){void 0===i&&(i=""),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.persistenceKey=i,this.host=t.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=o.PersistentStorage.get("host:"+t)||this.host}return t.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()},t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isDemoHost=function(){return"firebaseio-demo.com"===this.domain},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this.domain&&"firebaseio-demo.com"!==this.domain},t.prototype.updateHost=function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&o.PersistentStorage.set("host:"+this.host,this.internalHost))},t.prototype.connectionURL=function(t,e){var n;if(r.assert("string"==typeof t,"typeof type must == string"),r.assert("object"==typeof e,"typeof params must == object"),t===a.WEBSOCKET)n=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else{if(t!==a.LONG_POLLING)throw new Error("Unknown connection type: "+t);n=(this.secure?"https://":"http://")+this.internalHost+"/.lp?"}this.needsQueryParam()&&(e.ns=this.namespace);var o=[];return i.forEach(e,function(t,e){o.push(t+"="+e)}),n+o.join("&")},t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host},t}()},"7Qw6":function(t,e,n){"use strict";n.r(e),n.d(e,"using",function(){return a});var r=n("6blF"),i=n("0/uQ"),o=n("G5J1");function a(t,e){return new r.a(function(n){var r,a;try{r=t()}catch(t){return void n.error(t)}try{a=e(r)}catch(t){return void n.error(t)}var s=(a?Object(i.a)(a):o.a).subscribe(n);return function(){s.unsubscribe(),r&&r.unsubscribe()}})}},"7WVx":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n("0kFh"),o=n("cbsn"),a=n("0kFh"),s=n("+e0l"),u=n("Mom/"),l=n("scCI"),c={};e.IndexMap=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return i.assert(c&&u.PRIORITY_INDEX,"ChildrenNode.ts has not been loaded"),r=r||new t({".priority":c},{".priority":u.PRIORITY_INDEX})},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var e=a.safeGet(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e===c?null:e},t.prototype.hasIndex=function(t){return a.contains(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){i.assert(e!==l.KEY_INDEX,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,u=[],h=!1,d=n.getIterator(s.NamedNode.Wrap),p=d.getNext();p;)h=h||e.isDefinedOn(p.node),u.push(p),p=d.getNext();r=h?o.buildChildSet(u,e.getCompare()):c;var f=e.toString(),m=a.clone(this.indexSet_);m[f]=e;var v=a.clone(this.indexes_);return v[f]=r,new t(v,m)},t.prototype.addToIndexes=function(e,n){var r=this;return new t(a.map(this.indexes_,function(t,u){var l=a.safeGet(r.indexSet_,u);if(i.assert(l,"Missing index implementation for "+u),t===c){if(l.isDefinedOn(e.node)){for(var h=[],d=n.getIterator(s.NamedNode.Wrap),p=d.getNext();p;)p.name!=e.name&&h.push(p),p=d.getNext();return h.push(e),o.buildChildSet(h,l.getCompare())}return c}var f=n.get(e.name),m=t;return f&&(m=m.remove(new s.NamedNode(e.name,f))),m.insert(e,e.node)}),this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){return new t(a.map(this.indexes_,function(t){if(t===c)return t;var r=n.get(e.name);return r?t.remove(new s.NamedNode(e.name,r)):t}),this.indexSet_)},t}()},"7eb7":function(t,e,n){"use strict";n.r(e);var r,i=n("mrSG"),o=n("0kFh"),a={AVAILABLE_IN_WINDOW:"only-available-in-window",AVAILABLE_IN_SW:"only-available-in-sw",SHOULD_BE_INHERITED:"should-be-overriden",BAD_SENDER_ID:"bad-sender-id",INCORRECT_GCM_SENDER_ID:"incorrect-gcm-sender-id",PERMISSION_DEFAULT:"permission-default",PERMISSION_BLOCKED:"permission-blocked",UNSUPPORTED_BROWSER:"unsupported-browser",NOTIFICATIONS_BLOCKED:"notifications-blocked",FAILED_DEFAULT_REGISTRATION:"failed-serviceworker-registration",SW_REGISTRATION_EXPECTED:"sw-registration-expected",GET_SUBSCRIPTION_FAILED:"get-subscription-failed",INVALID_SAVED_TOKEN:"invalid-saved-token",SW_REG_REDUNDANT:"sw-reg-redundant",TOKEN_SUBSCRIBE_FAILED:"token-subscribe-failed",TOKEN_SUBSCRIBE_NO_TOKEN:"token-subscribe-no-token",TOKEN_SUBSCRIBE_NO_PUSH_SET:"token-subscribe-no-push-set",TOKEN_UNSUBSCRIBE_FAILED:"token-unsubscribe-failed",TOKEN_UPDATE_FAILED:"token-update-failed",TOKEN_UPDATE_NO_TOKEN:"token-update-no-token",USE_SW_BEFORE_GET_TOKEN:"use-sw-before-get-token",INVALID_DELETE_TOKEN:"invalid-delete-token",DELETE_TOKEN_NOT_FOUND:"delete-token-not-found",DELETE_SCOPE_NOT_FOUND:"delete-scope-not-found",BG_HANDLER_FUNCTION_EXPECTED:"bg-handler-function-expected",NO_WINDOW_CLIENT_TO_MSG:"no-window-client-to-msg",UNABLE_TO_RESUBSCRIBE:"unable-to-resubscribe",NO_FCM_TOKEN_FOR_RESUBSCRIBE:"no-fcm-token-for-resubscribe",FAILED_TO_DELETE_TOKEN:"failed-to-delete-token",NO_SW_IN_REG:"no-sw-in-reg",BAD_SCOPE:"bad-scope",BAD_VAPID_KEY:"bad-vapid-key",BAD_SUBSCRIPTION:"bad-subscription",BAD_TOKEN:"bad-token",BAD_PUSH_SET:"bad-push-set",FAILED_DELETE_VAPID_KEY:"failed-delete-vapid-key",INVALID_PUBLIC_VAPID_KEY:"invalid-public-vapid-key",USE_PUBLIC_KEY_BEFORE_GET_TOKEN:"use-public-key-before-get-token",PUBLIC_KEY_DECRYPTION_FAILED:"public-vapid-key-decryption-failed"},s={codes:a,map:((r={})[a.AVAILABLE_IN_WINDOW]="This method is available in a Window context.",r[a.AVAILABLE_IN_SW]="This method is available in a service worker context.",r[a.SHOULD_BE_INHERITED]="This method should be overriden by extended classes.",r[a.BAD_SENDER_ID]="Please ensure that 'messagingSenderId' is set correctly in the options passed into firebase.initializeApp().",r[a.PERMISSION_DEFAULT]="The required permissions were not granted and dismissed instead.",r[a.PERMISSION_BLOCKED]="The required permissions were not granted and blocked instead.",r[a.UNSUPPORTED_BROWSER]="This browser doesn't support the API's required to use the firebase SDK.",r[a.NOTIFICATIONS_BLOCKED]="Notifications have been blocked.",r[a.FAILED_DEFAULT_REGISTRATION]="We are unable to register the default service worker. {$browserErrorMessage}",r[a.SW_REGISTRATION_EXPECTED]="A service worker registration was the expected input.",r[a.GET_SUBSCRIPTION_FAILED]="There was an error when trying to get any existing Push Subscriptions.",r[a.INVALID_SAVED_TOKEN]="Unable to access details of the saved token.",r[a.SW_REG_REDUNDANT]="The service worker being used for push was made redundant.",r[a.TOKEN_SUBSCRIBE_FAILED]="A problem occured while subscribing the user to FCM: {$message}",r[a.TOKEN_SUBSCRIBE_NO_TOKEN]="FCM returned no token when subscribing the user to push.",r[a.TOKEN_SUBSCRIBE_NO_PUSH_SET]="FCM returned an invalid response when getting an FCM token.",r[a.TOKEN_UNSUBSCRIBE_FAILED]="A problem occured while unsubscribing the user from FCM: {$message}",r[a.TOKEN_UPDATE_FAILED]="A problem occured while updating the user from FCM: {$message}",r[a.TOKEN_UPDATE_NO_TOKEN]="FCM returned no token when updating the user to push.",r[a.USE_SW_BEFORE_GET_TOKEN]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",r[a.INVALID_DELETE_TOKEN]="You must pass a valid token into deleteToken(), i.e. the token from getToken().",r[a.DELETE_TOKEN_NOT_FOUND]="The deletion attempt for token could not be performed as the token was not found.",r[a.DELETE_SCOPE_NOT_FOUND]="The deletion attempt for service worker scope could not be performed as the scope was not found.",r[a.BG_HANDLER_FUNCTION_EXPECTED]="The input to setBackgroundMessageHandler() must be a function.",r[a.NO_WINDOW_CLIENT_TO_MSG]="An attempt was made to message a non-existant window client.",r[a.UNABLE_TO_RESUBSCRIBE]="There was an error while re-subscribing the FCM token for push messaging. Will have to resubscribe the user on next visit. {$message}",r[a.NO_FCM_TOKEN_FOR_RESUBSCRIBE]="Could not find an FCM token and as a result, unable to resubscribe. Will have to resubscribe the user on next visit.",r[a.FAILED_TO_DELETE_TOKEN]="Unable to delete the currently saved token.",r[a.NO_SW_IN_REG]="Even though the service worker registration was successful, there was a problem accessing the service worker itself.",r[a.INCORRECT_GCM_SENDER_ID]="Please change your web app manifest's 'gcm_sender_id' value to '103953800507' to use Firebase messaging.",r[a.BAD_SCOPE]="The service worker scope must be a string with at least one character.",r[a.BAD_VAPID_KEY]="The public VAPID key is not a Uint8Array with 65 bytes.",r[a.BAD_SUBSCRIPTION]="The subscription must be a valid PushSubscription.",r[a.BAD_TOKEN]="The FCM Token used for storage / lookup was not a valid token string.",r[a.BAD_PUSH_SET]="The FCM push set used for storage / lookup was not not a valid push set string.",r[a.FAILED_DELETE_VAPID_KEY]="The VAPID key could not be deleted.",r[a.INVALID_PUBLIC_VAPID_KEY]="The public VAPID key must be a string.",r[a.PUBLIC_KEY_DECRYPTION_FAILED]="The public VAPID key did not equal 65 bytes when decrypted.",r)},u=function(){function t(t,e){this.errorFactory_=new o.ErrorFactory("messaging","Messaging",s.map),this.DB_NAME_=t,this.dbVersion_=e,this.openDbPromise_=null,this.TRANSACTION_READ_WRITE="readwrite"}return t.prototype.openDatabase=function(){var t=this;return this.openDbPromise_?this.openDbPromise_:(this.openDbPromise_=new Promise(function(e,n){var r=indexedDB.open(t.DB_NAME_,t.dbVersion_);r.onerror=function(t){n(t.target.error)},r.onsuccess=function(t){e(t.target.result)},r.onupgradeneeded=function(e){try{var r=e.target.result;t.onDBUpgrade(r,e)}catch(t){r.close(),n(t)}}}),this.openDbPromise_)},t.prototype.closeDatabase=function(){var t=this;return Promise.resolve().then(function(){if(t.openDbPromise_)return t.openDbPromise_.then(function(e){e.close(),t.openDbPromise_=null})})},t.prototype.onDBUpgrade=function(t,e){throw this.errorFactory_.create(s.codes.SHOULD_BE_INHERITED)},t}(),l=function(t){return function(t){var e=new Uint8Array(t);return window.btoa(String.fromCharCode.apply(null,e))}(t).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")},c=new Uint8Array([4,51,148,247,223,161,235,177,220,3,162,94,21,113,219,72,211,46,237,237,178,52,219,183,71,58,12,143,196,204,225,111,60,140,132,223,171,182,102,62,242,12,212,139,254,227,249,118,47,20,28,99,8,106,111,45,177,26,149,176,206,55,192,156,110]),h={DEFAULT_PUBLIC_VAPID_KEY:c,SUBSCRIPTION_DETAILS:{userVisibleOnly:!0,applicationServerKey:c},ENDPOINT:"https://fcm.googleapis.com"},d=function(){function t(){this.errorFactory_=new o.ErrorFactory("messaging","Messaging",s.map)}return t.prototype.getToken=function(t,e,n){var r=this,i=l(e.getKey("p256dh")),o=l(e.getKey("auth")),a="authorized_entity="+t+"&endpoint="+e.endpoint+"&encryption_key="+i+"&encryption_auth="+o;n!==h.DEFAULT_PUBLIC_VAPID_KEY&&(a+="&application_pub_key="+l(n));var u=new Headers;return u.append("Content-Type","application/x-www-form-urlencoded"),fetch(h.ENDPOINT+"/fcm/connect/subscribe",{method:"POST",headers:u,body:a}).then(function(t){return t.json()}).catch(function(){throw r.errorFactory_.create(s.codes.TOKEN_SUBSCRIBE_FAILED)}).then(function(t){var e=t;if(e.error)throw r.errorFactory_.create(s.codes.TOKEN_SUBSCRIBE_FAILED,{message:e.error.message});if(!e.token)throw r.errorFactory_.create(s.codes.TOKEN_SUBSCRIBE_NO_TOKEN);if(!e.pushSet)throw r.errorFactory_.create(s.codes.TOKEN_SUBSCRIBE_NO_PUSH_SET);return{token:e.token,pushSet:e.pushSet}})},t.prototype.updateToken=function(t,e,n,r,i){var o=this,a=l(r.getKey("p256dh")),u=l(r.getKey("auth")),c="push_set="+n+"&token="+e+"&authorized_entity="+t+"&endpoint="+r.endpoint+"&encryption_key="+a+"&encryption_auth="+u;i!==h.DEFAULT_PUBLIC_VAPID_KEY&&(c+="&application_pub_key="+l(i));var d,p=new Headers;return p.append("Content-Type","application/x-www-form-urlencoded"),fetch(h.ENDPOINT+"/fcm/connect/subscribe",{method:"POST",headers:p,body:c}).then(function(t){return d=t,t.json()}).catch(function(){throw o.errorFactory_.create(s.codes.TOKEN_UPDATE_FAILED)}).then(function(t){if(!d.ok)throw o.errorFactory_.create(s.codes.TOKEN_UPDATE_FAILED,{message:t.error.message});if(!t.token)throw o.errorFactory_.create(s.codes.TOKEN_UPDATE_NO_TOKEN);return t.token})},t.prototype.deleteToken=function(t,e,n){var r=this,i="authorized_entity="+t+"&token="+e+"&pushSet="+n,o=new Headers;return o.append("Content-Type","application/x-www-form-urlencoded"),fetch(h.ENDPOINT+"/fcm/connect/unsubscribe",{method:"POST",headers:o,body:i}).then(function(t){if(!t.ok)return t.json().then(function(t){if(t.error)throw r.errorFactory_.create(s.codes.TOKEN_UNSUBSCRIBE_FAILED,{message:t.error.message})},function(t){throw r.errorFactory_.create(s.codes.TOKEN_UNSUBSCRIBE_FAILED)})})},t}(),p="fcm_token_details_db",f=2,m=function(t){function e(){return t.call(this,p,f)||this}return i.__extends(e,t),e.prototype.onDBUpgrade=function(t,e){if(e.oldVersion<1){var n=t.createObjectStore("fcm_token_object_Store",{keyPath:"swScope"});n.createIndex("fcmSenderId","fcmSenderId",{unique:!1}),n.createIndex("fcmToken","fcmToken",{unique:!0})}var r;e.oldVersion<2&&((r=indexedDB.open("undefined")).onerror=function(t){},r.onsuccess=function(t){!function(t){if(t.objectStoreNames.contains("fcm_token_object_Store")){var e=t.transaction("fcm_token_object_Store").objectStore("fcm_token_object_Store"),n=new d,r=e.openCursor();r.onerror=function(t){console.warn("Unable to cleanup old IDB.",t)},r.onsuccess=function(){var e=r.result;if(e){var i=e.value;n.deleteToken(i.fcmSenderId,i.fcmToken,i.fcmPushSet),e.continue()}else t.close(),indexedDB.deleteDatabase("undefined")}}}(r.result)})},e.prototype.validateInputs_=function(t){return i.__awaiter(this,void 0,void 0,function(){return i.__generator(this,function(e){return!t.fcmToken||"string"==typeof t.fcmToken&&0!==t.fcmToken.length?!t.swScope||"string"==typeof t.swScope&&0!==t.swScope.length?!t.vapidKey||t.vapidKey instanceof Uint8Array&&65===t.vapidKey.length?!t.subscription||t.subscription instanceof PushSubscription?!t.fcmSenderId||"string"==typeof t.fcmSenderId&&0!==t.fcmSenderId.length?!t.fcmPushSet||"string"==typeof t.fcmPushSet&&0!==t.fcmPushSet.length?[2]:[2,Promise.reject(this.errorFactory_.create(s.codes.BAD_PUSH_SET))]:[2,Promise.reject(this.errorFactory_.create(s.codes.BAD_SENDER_ID))]:[2,Promise.reject(this.errorFactory_.create(s.codes.BAD_SUBSCRIPTION))]:[2,Promise.reject(this.errorFactory_.create(s.codes.BAD_VAPID_KEY))]:[2,Promise.reject(this.errorFactory_.create(s.codes.BAD_SCOPE))]:[2,Promise.reject(this.errorFactory_.create(s.codes.BAD_TOKEN))]})})},e.prototype.getTokenDetailsFromToken=function(t){var e=this;return t?this.validateInputs_({fcmToken:t}).then(function(){return e.openDatabase()}).then(function(e){return new Promise(function(n,r){var i=e.transaction(["fcm_token_object_Store"]).objectStore("fcm_token_object_Store").index("fcmToken").get(t);i.onerror=function(t){r(t.target.error)},i.onsuccess=function(t){n(t.target.result?t.target.result:null)}})}):Promise.reject(this.errorFactory_.create(s.codes.BAD_TOKEN))},e.prototype.getTokenDetailsFromSWScope=function(t){var e=this;return t?this.validateInputs_({swScope:t}).then(function(){return e.openDatabase()}).then(function(e){return new Promise(function(n,r){var i=e.transaction(["fcm_token_object_Store"]).objectStore("fcm_token_object_Store").get(t);i.onerror=function(t){r(t.target.error)},i.onsuccess=function(t){n(t.target.result?t.target.result:null)}})}):Promise.reject(this.errorFactory_.create(s.codes.BAD_SCOPE))},e.prototype.saveTokenDetails=function(t){var e=this,n=t.swScope,r=t.vapidKey,i=t.subscription,o=t.fcmSenderId,a=t.fcmToken,u=t.fcmPushSet;return n?r?i?o?a?u?this.validateInputs_({swScope:n,vapidKey:r,subscription:i,fcmSenderId:o,fcmToken:a,fcmPushSet:u}).then(function(){return e.openDatabase()}).then(function(t){var s={swScope:n,vapidKey:l(r),endpoint:i.endpoint,auth:l(i.getKey("auth")),p256dh:l(i.getKey("p256dh")),fcmSenderId:o,fcmToken:a,fcmPushSet:u,createTime:Date.now()};return new Promise(function(n,r){var i=t.transaction(["fcm_token_object_Store"],e.TRANSACTION_READ_WRITE).objectStore("fcm_token_object_Store").put(s);i.onerror=function(t){r(t.target.error)},i.onsuccess=function(t){n()}})}):Promise.reject(this.errorFactory_.create(s.codes.BAD_PUSH_SET)):Promise.reject(this.errorFactory_.create(s.codes.BAD_TOKEN)):Promise.reject(this.errorFactory_.create(s.codes.BAD_SENDER_ID)):Promise.reject(this.errorFactory_.create(s.codes.BAD_SUBSCRIPTION)):Promise.reject(this.errorFactory_.create(s.codes.BAD_VAPID_KEY)):Promise.reject(this.errorFactory_.create(s.codes.BAD_SCOPE))},e.prototype.deleteToken=function(t){var e=this;return"string"!=typeof t||0===t.length?Promise.reject(this.errorFactory_.create(s.codes.INVALID_DELETE_TOKEN)):this.getTokenDetailsFromToken(t).then(function(t){if(!t)throw e.errorFactory_.create(s.codes.DELETE_TOKEN_NOT_FOUND);return e.openDatabase().then(function(n){return new Promise(function(r,i){var o=n.transaction(["fcm_token_object_Store"],e.TRANSACTION_READ_WRITE).objectStore("fcm_token_object_Store").delete(t.swScope);o.onerror=function(t){i(t.target.error)},o.onsuccess=function(n){0!==n.target.result?r(t):i(e.errorFactory_.create(s.codes.FAILED_TO_DELETE_TOKEN))}})})})},e}(u),v="fcm_vapid_details_db",g=1,y=function(t){function e(){return t.call(this,v,g)||this}return i.__extends(e,t),e.prototype.onDBUpgrade=function(t){t.createObjectStore("fcm_vapid_object_Store",{keyPath:"swScope"})},e.prototype.getVapidFromSWScope=function(t){return"string"!=typeof t||0===t.length?Promise.reject(this.errorFactory_.create(s.codes.BAD_SCOPE)):this.openDatabase().then(function(e){return new Promise(function(n,r){var i=e.transaction(["fcm_vapid_object_Store"]).objectStore("fcm_vapid_object_Store").get(t);i.onerror=function(){r(i.error)},i.onsuccess=function(){var t=i.result,e=null;t&&(e=t.vapidKey),n(e)}})})},e.prototype.saveVapidDetails=function(t,e){var n=this;if("string"!=typeof t||0===t.length)return Promise.reject(this.errorFactory_.create(s.codes.BAD_SCOPE));if(null===e||65!==e.length)return Promise.reject(this.errorFactory_.create(s.codes.BAD_VAPID_KEY));var r={swScope:t,vapidKey:e};return this.openDatabase().then(function(t){return new Promise(function(e,i){var o=t.transaction(["fcm_vapid_object_Store"],n.TRANSACTION_READ_WRITE).objectStore("fcm_vapid_object_Store").put(r);o.onerror=function(){i(o.error)},o.onsuccess=function(){e()}})})},e.prototype.deleteVapidDetails=function(t){var e=this;return this.getVapidFromSWScope(t).then(function(n){if(!n)throw e.errorFactory_.create(s.codes.DELETE_SCOPE_NOT_FOUND);return e.openDatabase().then(function(r){return new Promise(function(i,o){var a=r.transaction(["fcm_vapid_object_Store"],e.TRANSACTION_READ_WRITE).objectStore("fcm_vapid_object_Store").delete(t);a.onerror=function(){o(a.error)},a.onsuccess=function(){0!==a.result?i(n):o(e.errorFactory_.create(s.codes.FAILED_DELETE_VAPID_KEY))}})})})},e}(u),_="messagingSenderId",b=function(){function t(t){var e=this;if(this.errorFactory_=new o.ErrorFactory("messaging","Messaging",s.map),!t.options[_]||"string"!=typeof t.options[_])throw this.errorFactory_.create(s.codes.BAD_SENDER_ID);this.messagingSenderId_=t.options[_],this.tokenDetailsModel_=new m,this.vapidDetailsModel_=new y,this.iidModel_=new d,this.app=t,this.INTERNAL={},this.INTERNAL.delete=function(){return e.delete()}}return t.prototype.getToken=function(){return i.__awaiter(this,void 0,void 0,function(){var t,e,n,r,o;return i.__generator(this,function(i){switch(i.label){case 0:return"granted"!==(t=this.getNotificationPermission_())?"denied"===t?[2,Promise.reject(this.errorFactory_.create(s.codes.NOTIFICATIONS_BLOCKED))]:[2,Promise.resolve(null)]:[4,this.getSWRegistration_()];case 1:return e=i.sent(),[4,this.getPublicVapidKey_()];case 2:return n=i.sent(),[4,this.getPushSubscription(e,n)];case 3:return r=i.sent(),[4,this.tokenDetailsModel_.getTokenDetailsFromSWScope(e.scope)];case 4:return(o=i.sent())?[2,this.manageExistingToken(e,r,n,o)]:[2,this.getNewToken(e,r,n)]}})})},t.prototype.manageExistingToken=function(t,e,n,r){return i.__awaiter(this,void 0,void 0,function(){return i.__generator(this,function(i){switch(i.label){case 0:return this.isTokenStillValid(e,n,r)?Date.now()<r.createTime+6048e5?[2,r.fcmToken]:[2,this.updateToken(t,e,n,r)]:[4,this.deleteToken(r.fcmToken)];case 1:return i.sent(),[2,this.getNewToken(t,e,n)]}})})},t.prototype.isTokenStillValid=function(t,e,n){return l(e)===n.vapidKey&&t.endpoint===n.endpoint&&l(t.getKey("auth"))===n.auth&&l(t.getKey("p256dh"))===n.p256dh},t.prototype.updateToken=function(t,e,n,r){return i.__awaiter(this,void 0,void 0,function(){var o,a;return i.__generator(this,function(i){switch(i.label){case 0:return i.trys.push([0,4,,6]),[4,this.iidModel_.updateToken(this.messagingSenderId_,r.fcmToken,r.fcmPushSet,e,n)];case 1:return o=i.sent(),[4,this.tokenDetailsModel_.saveTokenDetails({swScope:t.scope,vapidKey:n,subscription:e,fcmSenderId:this.messagingSenderId_,fcmToken:o,fcmPushSet:r.fcmPushSet})];case 2:return i.sent(),[4,this.vapidDetailsModel_.saveVapidDetails(t.scope,n)];case 3:return i.sent(),[2,o];case 4:return a=i.sent(),[4,this.deleteToken(r.fcmToken)];case 5:throw i.sent(),a;case 6:return[2]}})})},t.prototype.getNewToken=function(t,e,n){return i.__awaiter(this,void 0,void 0,function(){var r;return i.__generator(this,function(i){switch(i.label){case 0:return[4,this.iidModel_.getToken(this.messagingSenderId_,e,n)];case 1:return r=i.sent(),[4,this.tokenDetailsModel_.saveTokenDetails({swScope:t.scope,vapidKey:n,subscription:e,fcmSenderId:this.messagingSenderId_,fcmToken:r.token,fcmPushSet:r.pushSet})];case 2:return i.sent(),[4,this.vapidDetailsModel_.saveVapidDetails(t.scope,n)];case 3:return i.sent(),[2,r.token]}})})},t.prototype.deleteToken=function(t){var e=this;return this.tokenDetailsModel_.deleteToken(t).then(function(t){return e.iidModel_.deleteToken(t.fcmSenderId,t.fcmToken,t.fcmPushSet)}).then(function(){return e.getSWRegistration_().then(function(t){if(t)return t.pushManager.getSubscription()}).then(function(t){if(t)return t.unsubscribe()})})},t.prototype.getSWRegistration_=function(){throw this.errorFactory_.create(s.codes.SHOULD_BE_INHERITED)},t.prototype.getPublicVapidKey_=function(){throw this.errorFactory_.create(s.codes.SHOULD_BE_INHERITED)},t.prototype.requestPermission=function(){throw this.errorFactory_.create(s.codes.AVAILABLE_IN_WINDOW)},t.prototype.getPushSubscription=function(t,e){return t.pushManager.getSubscription().then(function(n){return n||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:e})})},t.prototype.useServiceWorker=function(t){throw this.errorFactory_.create(s.codes.AVAILABLE_IN_WINDOW)},t.prototype.usePublicVapidKey=function(t){throw this.errorFactory_.create(s.codes.AVAILABLE_IN_WINDOW)},t.prototype.onMessage=function(t,e,n){throw this.errorFactory_.create(s.codes.AVAILABLE_IN_WINDOW)},t.prototype.onTokenRefresh=function(t,e,n){throw this.errorFactory_.create(s.codes.AVAILABLE_IN_WINDOW)},t.prototype.setBackgroundMessageHandler=function(t){throw this.errorFactory_.create(s.codes.AVAILABLE_IN_SW)},t.prototype.delete=function(){return Promise.all([this.tokenDetailsModel_.closeDatabase(),this.vapidDetailsModel_.closeDatabase()])},t.prototype.getNotificationPermission_=function(){return Notification.permission},t.prototype.getTokenDetailsModel=function(){return this.tokenDetailsModel_},t.prototype.getVapidDetailsModel=function(){return this.vapidDetailsModel_},t.prototype.getIIDModel=function(){return this.iidModel_},t}(),w={TYPE_OF_MSG:"firebase-messaging-msg-type",DATA:"firebase-messaging-msg-data"},x=w,E=function(t,e){var n;return(n={})[w.TYPE_OF_MSG]=t,n[w.DATA]=e,n},S=function(t){function e(e){var n=t.call(this,e)||this;return n.messageObserver_=null,n.onMessage_=Object(o.createSubscribe)(function(t){n.messageObserver_=t}),n.tokenRefreshObserver_=null,n.onTokenRefresh_=Object(o.createSubscribe)(function(t){n.tokenRefreshObserver_=t}),n.messageObserver_=null,n.onMessage_=Object(o.createSubscribe)(function(t){n.messageObserver_=t}),n.tokenRefreshObserver_=null,n.onTokenRefresh_=Object(o.createSubscribe)(function(t){n.tokenRefreshObserver_=t}),n.setupSWMessageListener_(),n}return i.__extends(e,t),e.prototype.getToken=function(){var e=this;return this.isSupported_()?this.manifestCheck_().then(function(){return t.prototype.getToken.call(e)}):Promise.reject(this.errorFactory_.create(s.codes.UNSUPPORTED_BROWSER))},e.prototype.manifestCheck_=function(){var t=this;if(this.manifestCheckPromise_)return this.manifestCheckPromise_;var e=document.querySelector('link[rel="manifest"]');return this.manifestCheckPromise_=e?fetch(e.href).then(function(t){return t.json()}).catch(function(){}).then(function(e){if(e&&e.gcm_sender_id&&"103953800507"!==e.gcm_sender_id)throw t.errorFactory_.create(s.codes.INCORRECT_GCM_SENDER_ID)}):Promise.resolve(),this.manifestCheckPromise_},e.prototype.requestPermission=function(){return i.__awaiter(this,void 0,void 0,function(){var t=this;return i.__generator(this,function(e){return"granted"===Notification.permission?[2]:[2,new Promise(function(e,n){var r=function(r){return"granted"===r?e():n(t.errorFactory_.create("denied"===r?s.codes.PERMISSION_BLOCKED:s.codes.PERMISSION_DEFAULT))},i=Notification.requestPermission(r);i&&i.then(r)})]})})},e.prototype.useServiceWorker=function(t){if(!(t instanceof ServiceWorkerRegistration))throw this.errorFactory_.create(s.codes.SW_REGISTRATION_EXPECTED);if(void 0!==this.registrationToUse_)throw this.errorFactory_.create(s.codes.USE_SW_BEFORE_GET_TOKEN);this.registrationToUse_=t},e.prototype.usePublicVapidKey=function(t){if("string"!=typeof t)throw this.errorFactory_.create(s.codes.INVALID_PUBLIC_VAPID_KEY);if(void 0!==this.publicVapidKeyToUse_)throw this.errorFactory_.create(s.codes.USE_PUBLIC_KEY_BEFORE_GET_TOKEN);var e=function(e){for(var n=(t+"=".repeat((4-t.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),r=window.atob(n),i=new Uint8Array(r.length),o=0;o<r.length;++o)i[o]=r.charCodeAt(o);return i}();if(65!==e.length)throw this.errorFactory_.create(s.codes.PUBLIC_KEY_DECRYPTION_FAILED);this.publicVapidKeyToUse_=e},e.prototype.onMessage=function(t,e,n){return this.onMessage_(t,e,n)},e.prototype.onTokenRefresh=function(t,e,n){return this.onTokenRefresh_(t,e,n)},e.prototype.waitForRegistrationToActivate_=function(t){var e=this,n=t.installing||t.waiting||t.active;return new Promise(function(r,i){if(n)if("activated"!==n.state)if("redundant"!==n.state){var o=function(){if("activated"===n.state)r(t);else{if("redundant"!==n.state)return;i(e.errorFactory_.create(s.codes.SW_REG_REDUNDANT))}n.removeEventListener("statechange",o)};n.addEventListener("statechange",o)}else i(e.errorFactory_.create(s.codes.SW_REG_REDUNDANT));else r(t);else i(e.errorFactory_.create(s.codes.NO_SW_IN_REG))})},e.prototype.getSWRegistration_=function(){var t=this;return this.registrationToUse_?this.waitForRegistrationToActivate_(this.registrationToUse_):(this.registrationToUse_=null,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"}).catch(function(e){throw t.errorFactory_.create(s.codes.FAILED_DEFAULT_REGISTRATION,{browserErrorMessage:e.message})}).then(function(e){return t.waitForRegistrationToActivate_(e).then(function(){return t.registrationToUse_=e,e.update(),e})}))},e.prototype.getPublicVapidKey_=function(){return this.publicVapidKeyToUse_?Promise.resolve(this.publicVapidKeyToUse_):Promise.resolve(h.DEFAULT_PUBLIC_VAPID_KEY)},e.prototype.setupSWMessageListener_=function(){var t=this;"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("message",function(e){if(e.data&&e.data[x.TYPE_OF_MSG]){var n=e.data;switch(n[x.TYPE_OF_MSG]){case"push-msg-received":case"notification-clicked":t.messageObserver_&&t.messageObserver_.next(n[x.DATA])}}},!1)},e.prototype.isSupported_=function(){return"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")},e}(b),T=function(t){function e(e){var n=t.call(this,e)||this;return self.addEventListener("push",function(t){return n.onPush_(t)},!1),self.addEventListener("pushsubscriptionchange",function(t){return n.onSubChange_(t)},!1),self.addEventListener("notificationclick",function(t){return n.onNotificationClick_(t)},!1),n.bgMessageHandler_=null,n}return i.__extends(e,t),e.prototype.onPush_=function(t){var e,n=this;try{e=t.data.json()}catch(t){return}var r=this.hasVisibleClients_().then(function(t){if(t)return e.notification||n.bgMessageHandler_?n.sendMessageToWindowClients_(e):void 0;var r=n.getNotificationData_(e);if(r){var i=r.title||"";return n.getSWRegistration_().then(function(t){return t.showNotification(i,r)})}return n.bgMessageHandler_?n.bgMessageHandler_(e):void 0});t.waitUntil(r)},e.prototype.onSubChange_=function(t){var e=this,n=this.getSWRegistration_().then(function(t){return t.pushManager.getSubscription().then(function(t){}).catch(function(n){return e.getTokenDetailsModel().getTokenDetailsFromSWScope(t.scope).then(function(t){if(!t)throw n;return e.deleteToken(t.fcmToken).then(function(){throw n})})})}).catch(function(t){throw e.errorFactory_.create(s.codes.UNABLE_TO_RESUBSCRIBE,{message:t})});t.waitUntil(n)},e.prototype.onNotificationClick_=function(t){var e=this;if(t.notification&&t.notification.data&&t.notification.data.FCM_MSG){t.stopImmediatePropagation(),t.notification.close();var n=t.notification.data.FCM_MSG;if(n.notification){var r=n.notification.click_action;if(r){var i=this.getWindowClient_(r).then(function(t){return t?t.focus():self.clients.openWindow(r)}).then(function(t){if(t){delete n.notification;var r=E("notification-clicked",n);return e.attemptToMessageClient_(t,r)}});t.waitUntil(i)}}}},e.prototype.getNotificationData_=function(t){if(t&&"object"==typeof t.notification){var e,n=Object.assign({},t.notification);return n.data=((e={}).FCM_MSG=t,e),n}},e.prototype.setBackgroundMessageHandler=function(t){if(!t||"function"!=typeof t)throw this.errorFactory_.create(s.codes.BG_HANDLER_FUNCTION_EXPECTED);this.bgMessageHandler_=t},e.prototype.getWindowClient_=function(t){var e=new URL(t,self.location).href;return self.clients.matchAll({type:"window",includeUncontrolled:!0}).then(function(t){for(var n=null,r=0;r<t.length;r++)if(new URL(t[r].url,self.location).href===e){n=t[r];break}return n||null})},e.prototype.attemptToMessageClient_=function(t,e){return i.__awaiter(this,void 0,void 0,function(){return i.__generator(this,function(n){return t?(t.postMessage(e),[2]):[2,Promise.reject(this.errorFactory_.create(s.codes.NO_WINDOW_CLIENT_TO_MSG))]})})},e.prototype.hasVisibleClients_=function(){return self.clients.matchAll({type:"window",includeUncontrolled:!0}).then(function(t){return t.some(function(t){return"visible"===t.visibilityState})})},e.prototype.sendMessageToWindowClients_=function(t){var e=this;return self.clients.matchAll({type:"window",includeUncontrolled:!0}).then(function(n){var r=E("push-msg-received",t);return Promise.all(n.map(function(t){return e.attemptToMessageClient_(t,r)}))})},e.prototype.getSWRegistration_=function(){return Promise.resolve(self.registration)},e.prototype.getPublicVapidKey_=function(){var t=this;return this.getSWRegistration_().then(function(e){return t.getVapidDetailsModel().getVapidFromSWScope(e.scope)}).then(function(t){return null===t?h.DEFAULT_PUBLIC_VAPID_KEY:t})},e}(b),M=n("geFX");function C(t){t.INTERNAL.registerService("messaging",function(t){return self&&"ServiceWorkerGlobalScope"in self?new T(t):new S(t)},{Messaging:S})}n.d(e,"registerMessaging",function(){return C}),C(M.firebase)},"7jcd":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("h6Fy"),i=n("oUad");e.ViewCache=function(){function t(t,e){this.eventCache_=t,this.serverCache_=e}return t.prototype.updateEventSnap=function(e,n,r){return new t(new i.CacheNode(e,n,r),this.serverCache_)},t.prototype.updateServerSnap=function(e,n,r){return new t(this.eventCache_,new i.CacheNode(e,n,r))},t.prototype.getEventCache=function(){return this.eventCache_},t.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},t.prototype.getServerCache=function(){return this.serverCache_},t.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},t.Empty=new t(new i.CacheNode(r.ChildrenNode.EMPTY_NODE,!1,!1),new i.CacheNode(r.ChildrenNode.EMPTY_NODE,!1,!1)),t}()},"8LTN":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("tazP");e.StatsManager=function(){function t(){}return t.getCollection=function(t){var e=t.toString();return this.collections_[e]||(this.collections_[e]=new r.StatsCollection),this.collections_[e]},t.getOrCreateReporter=function(t,e){var n=t.toString();return this.reporters_[n]||(this.reporters_[n]=e()),this.reporters_[n]},t.collections_={},t.reporters_={},t}()},"8g8A":function(t,e,n){"use strict";function r(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}n.d(e,"a",function(){return i}),r.prototype=Object.create(Error.prototype);var i=r},"909l":function(t,e,n){"use strict";n.r(e),n.d(e,"zip",function(){return c}),n.d(e,"ZipOperator",function(){return h}),n.d(e,"ZipSubscriber",function(){return d});var r=n("mrSG"),i=n("IUTb"),o=n("isby"),a=n("FFOo"),s=n("MGBS"),u=n("zotm"),l=n("En8+");function c(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t[t.length-1];return"function"==typeof n&&t.pop(),Object(i.a)(t,void 0).lift(new h(n))}var h=function(){function t(t){this.resultSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new d(t,this.resultSelector))},t}(),d=function(t){function e(e,n,r){void 0===r&&(r=Object.create(null));var i=t.call(this,e)||this;return i.iterators=[],i.active=0,i.resultSelector="function"==typeof n?n:null,i.values=r,i}return r.__extends(e,t),e.prototype._next=function(t){var e=this.iterators;Object(o.a)(t)?e.push(new f(t)):e.push("function"==typeof t[l.a]?new p(t[l.a]()):new m(this.destination,this,t))},e.prototype._complete=function(){var t=this.iterators,e=t.length;if(this.unsubscribe(),0!==e){this.active=e;for(var n=0;n<e;n++){var r=t[n];r.stillUnsubscribed?this.destination.add(r.subscribe(r,n)):this.active--}}else this.destination.complete()},e.prototype.notifyInactive=function(){this.active--,0===this.active&&this.destination.complete()},e.prototype.checkIterators=function(){for(var t=this.iterators,e=t.length,n=this.destination,r=0;r<e;r++)if("function"==typeof(a=t[r]).hasValue&&!a.hasValue())return;var i=!1,o=[];for(r=0;r<e;r++){var a,s=(a=t[r]).next();if(a.hasCompleted()&&(i=!0),s.done)return void n.complete();o.push(s.value)}this.resultSelector?this._tryresultSelector(o):n.next(o),i&&n.complete()},e.prototype._tryresultSelector=function(t){var e;try{e=this.resultSelector.apply(this,t)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(a.a),p=function(){function t(t){this.iterator=t,this.nextResult=t.next()}return t.prototype.hasValue=function(){return!0},t.prototype.next=function(){var t=this.nextResult;return this.nextResult=this.iterator.next(),t},t.prototype.hasCompleted=function(){var t=this.nextResult;return t&&t.done},t}(),f=function(){function t(t){this.array=t,this.index=0,this.length=0,this.length=t.length}return t.prototype[l.a]=function(){return this},t.prototype.next=function(t){var e=this.index++;return e<this.length?{value:this.array[e],done:!1}:{value:null,done:!0}},t.prototype.hasValue=function(){return this.array.length>this.index},t.prototype.hasCompleted=function(){return this.array.length===this.index},t}(),m=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.parent=n,i.observable=r,i.stillUnsubscribed=!0,i.buffer=[],i.isComplete=!1,i}return r.__extends(e,t),e.prototype[l.a]=function(){return this},e.prototype.next=function(){var t=this.buffer;return 0===t.length&&this.isComplete?{value:null,done:!0}:{value:t.shift(),done:!1}},e.prototype.hasValue=function(){return this.buffer.length>0},e.prototype.hasCompleted=function(){return 0===this.buffer.length&&this.isComplete},e.prototype.notifyComplete=function(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},e.prototype.notifyNext=function(t,e,n,r,i){this.buffer.push(e),this.parent.checkIterators()},e.prototype.subscribe=function(t,e){return Object(u.a)(this,this.observable,this,e)},e}(s.a)},"9sPh":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("3RyD"),i=n("wtYO"),o=n("0kFh"),a=n("0kFh");e.ValueEventRegistration=function(){function t(t,e,n){this.callback_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e.getQueryParams().getIndex();return new i.DataEvent("value",this,new r.DataSnapshot(t.snapshotNode,e.getRef(),n))},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){a.assert(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callback_;return function(){r.call(e,t.snapshot)}},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new i.CancelEvent(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callback_||!this.callback_||e.callback_===this.callback_&&e.context_===this.context_)},t.prototype.hasAnyCallback=function(){return null!==this.callback_},t}(),e.ChildEventRegistration=function(){function t(t,e,n){this.callbacks_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return o.contains(this.callbacks_,e="children_removed"===e?"child_removed":e)},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new i.CancelEvent(this,t,e):null},t.prototype.createEvent=function(t,e){a.assert(null!=t.childName,"Child events should have a childName.");var n=e.getRef().child(t.childName),o=e.getQueryParams().getIndex();return new i.DataEvent(t.type,this,new r.DataSnapshot(t.snapshotNode,n,o),t.prevName)},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){a.assert(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callbacks_[t.eventType];return function(){r.call(e,t.snapshot,t.prevName)}},t.prototype.matches=function(e){if(e instanceof t){if(!this.callbacks_||!e.callbacks_)return!0;if(this.context_===e.context_){var n=o.getCount(e.callbacks_);if(n===o.getCount(this.callbacks_)){if(1===n){var r=o.getAnyKey(e.callbacks_),i=o.getAnyKey(this.callbacks_);return!(i!==r||e.callbacks_[r]&&this.callbacks_[i]&&e.callbacks_[r]!==this.callbacks_[i])}return o.every(this.callbacks_,function(t,n){return e.callbacks_[t]===n})}}}return!1},t.prototype.hasAnyCallback=function(){return null!==this.callbacks_},t}()},A1ZE:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("mrSG"),i=n("dsTq"),o=n("+e0l"),a=n("W1I6"),s=n("FKYu"),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.__extends(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?a.nameCompare(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return o.NamedNode.MIN},e.prototype.maxPost=function(){return o.NamedNode.MAX},e.prototype.makePost=function(t,e){var n=s.nodeFromJSON(t);return new o.NamedNode(e,n)},e.prototype.toString=function(){return".value"},e}(i.Index);e.ValueIndex=u,e.VALUE_INDEX=new u},BbUi:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i,o,a=n("0kFh");e.nextPushId=(r="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",i=0,o=[],function(t){var e,n=t===i;i=t;var s=new Array(8);for(e=7;e>=0;e--)s[e]=r.charAt(t%64),t=Math.floor(t/64);a.assert(0===t,"Cannot push at time == 0");var u=s.join("");if(n){for(e=11;e>=0&&63===o[e];e--)o[e]=0;o[e]++}else for(e=0;e<12;e++)o[e]=Math.floor(64*Math.random());for(e=0;e<12;e++)u+=r.charAt(o[e]);return a.assert(20===u.length,"nextPushId: Length should be 20."),u})},CcnG:function(t,e,n){"use strict";var r=n("mrSG"),i=n("p0ib"),o=n("6blF"),a=n("K9Ia"),s=n("pugT"),u=n("KhEm"),l=n("yGWI");function c(){return new a.a}function h(t){return{providedIn:t.providedIn||null,factory:t.factory,value:void 0}}n.d(e,"Ma",function(){return vn}),n.d(e,"Na",function(){return gn}),n.d(e,"Oa",function(){return yn}),n.d(e,"La",function(){return It}),n.d(e,"g",function(){return Ce}),n.d(e,"X",function(){return be}),n.d(e,"Ba",function(){return we}),n.d(e,"V",function(){return Ee}),n.d(e,"B",function(){return xe}),n.d(e,"c",function(){return Lt}),n.d(e,"F",function(){return Dt}),n.d(e,"E",function(){return kt}),n.d(e,"b",function(){return Ft}),n.d(e,"d",function(){return Ot}),n.d(e,"e",function(){return Rt}),n.d(e,"Z",function(){return We}),n.d(e,"Q",function(){return de}),n.d(e,"Da",function(){return fe}),n.d(e,"x",function(){return mn}),n.d(e,"f",function(){return _n}),n.d(e,"n",function(){return ie}),n.d(e,"m",function(){return vt}),n.d(e,"J",function(){return Wn}),n.d(e,"K",function(){return Hn}),n.d(e,"a",function(){return y}),n.d(e,"h",function(){return _}),n.d(e,"p",function(){return w}),n.d(e,"u",function(){return b}),n.d(e,"T",function(){return st}),n.d(e,"R",function(){return ut}),n.d(e,"W",function(){return h}),n.d(e,"Y",function(){return R}),n.d(e,"Aa",function(){return ot}),n.d(e,"q",function(){return G}),n.d(e,"t",function(){return z}),n.d(e,"s",function(){return d}),n.d(e,"r",function(){return I}),n.d(e,"D",function(){return N}),n.d(e,"L",function(){return D}),n.d(e,"M",function(){return k}),n.d(e,"o",function(){return F}),n.d(e,"C",function(){return oe}),n.d(e,"G",function(){return Re}),n.d(e,"H",function(){return Pe}),n.d(e,"I",function(){return Oe}),n.d(e,"j",function(){return Bt}),n.d(e,"k",function(){return Kt}),n.d(e,"l",function(){return Le}),n.d(e,"y",function(){return $t}),n.d(e,"A",function(){return Jt}),n.d(e,"z",function(){return Ie}),n.d(e,"N",function(){return Fe}),n.d(e,"O",function(){return De}),n.d(e,"P",function(){return Ue}),n.d(e,"S",function(){return Be}),n.d(e,"i",function(){return Ge}),n.d(e,"v",function(){return ln}),n.d(e,"w",function(){return cn}),n.d(e,"U",function(){return Ye}),n.d(e,"Ca",function(){return fn}),n.d(e,"Wa",function(){return Ze}),n.d(e,"Ga",function(){return jt}),n.d(e,"Ea",function(){return gt}),n.d(e,"Fa",function(){return Zt}),n.d(e,"Ha",function(){return Un}),n.d(e,"Ia",function(){return zn}),n.d(e,"Ja",function(){return En}),n.d(e,"Ua",function(){return S}),n.d(e,"Za",function(){return P}),n.d(e,"ib",function(){return O}),n.d(e,"Xa",function(){return Pt}),n.d(e,"Ya",function(){return At}),n.d(e,"Ka",function(){return jr}),n.d(e,"Pa",function(){return ii}),n.d(e,"Qa",function(){return ha}),n.d(e,"Ra",function(){return lr}),n.d(e,"Sa",function(){return Ai}),n.d(e,"Ta",function(){return Ur}),n.d(e,"Va",function(){return kr}),n.d(e,"ab",function(){return Kr}),n.d(e,"bb",function(){return Yr}),n.d(e,"cb",function(){return mi}),n.d(e,"eb",function(){return Pi}),n.d(e,"gb",function(){return Oi}),n.d(e,"db",function(){return Ji}),n.d(e,"fb",function(){return Qi}),n.d(e,"hb",function(){return Wi}),n.d(e,"jb",function(){return to}),n.d(e,"kb",function(){return ar}),n.d(e,"lb",function(){return ro});var d=function(){function t(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.ngInjectableDef=void 0!==e?h({providedIn:e.providedIn||"root",factory:e.factory}):void 0}return t.prototype.toString=function(){return"InjectionToken "+this._desc},t}(),p="__parameters__",f="__prop__metadata__";function m(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(t){var i=t.apply(void 0,Object(r.__spread)(e));for(var o in i)this[o]=i[o]}}}function v(t,e,n){var i=m(e);function o(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(this instanceof o)return i.apply(this,e),this;var a=new((t=o).bind.apply(t,Object(r.__spread)([void 0],e)));return s.annotation=a,s;function s(t,e,n){for(var r=t.hasOwnProperty(p)?t[p]:Object.defineProperty(t,p,{value:[]})[p];r.length<=n;)r.push(null);return(r[n]=r[n]||[]).push(a),t}}return n&&(o.prototype=Object.create(n.prototype)),o.prototype.ngMetadataName=t,o.annotationCls=o,o}function g(t,e,n){var i=m(e);function o(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(this instanceof o)return i.apply(this,e),this;var a=new((t=o).bind.apply(t,Object(r.__spread)([void 0],e)));return function(t,e){var n=t.constructor,r=n.hasOwnProperty(f)?n[f]:Object.defineProperty(n,f,{value:{}})[f];r[e]=r.hasOwnProperty(e)&&r[e]||[],r[e].unshift(a)}}return n&&(o.prototype=Object.create(n.prototype)),o.prototype.ngMetadataName=t,o.annotationCls=o,o}var y=new d("AnalyzeForEntryComponents"),_=v("Attribute",function(t){return{attributeName:t}}),b=g("Input",function(t){return{bindingPropertyName:t}}),w=g("HostBinding",function(t){return{hostPropertyName:t}});Function;var x="undefined"!=typeof window&&window,E="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,S="undefined"!=typeof global&&global||x||E,T=Promise.resolve(0),M=null;function C(){if(!M){var t=S.Symbol;if(t&&t.iterator)M=t.iterator;else for(var e=Object.getOwnPropertyNames(Map.prototype),n=0;n<e.length;++n){var r=e[n];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(M=r)}}return M}function A(t){"undefined"==typeof Zone?T.then(function(){t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}function P(t,e){return t===e||"number"==typeof t&&"number"==typeof e&&isNaN(t)&&isNaN(e)}function O(t){if("string"==typeof t)return t;if(t instanceof Array)return"["+t.map(O).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return""+t.overriddenName;if(t.name)return""+t.name;var e=t.toString();if(null==e)return""+e;var n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function R(t){return t.__forward_ref__=R,t.toString=function(){return O(this())},t}function L(t){return"function"==typeof t&&t.hasOwnProperty("__forward_ref__")&&t.__forward_ref__===R?t():t}var I=v("Inject",function(t){return{token:t}}),N=v("Optional"),D=v("Self"),k=v("SkipSelf"),F=v("Host"),j="__source",U=new Object,B=U,G=new d("INJECTOR"),V=function(){function t(){}return t.prototype.get=function(t,e){if(void 0===e&&(e=U),e===U)throw new Error("NullInjectorError: No provider for "+O(t)+"!");return e},t}(),z=function(){function t(){}return t.create=function(t,e){return Array.isArray(t)?new $(t,e):new $(t.providers,t.parent,t.name||null)},t.THROW_IF_NOT_FOUND=U,t.NULL=new V,t.ngInjectableDef=h({providedIn:"any",factory:function(){return ot(G)}}),t}(),H=function(t){return t},W=[],q=H,X=function(){return Array.prototype.slice.call(arguments)},Y={},K=function(t){for(var e in t)if(t[e]===Y)return e;throw Error("!prop")}({provide:String,useValue:Y}),Z=z.NULL,Q=/\n/gm,J="\u0275",$=function(){function t(t,e,n){void 0===e&&(e=Z),void 0===n&&(n=null),this.parent=e,this.source=n;var r=this._records=new Map;r.set(z,{token:z,fn:H,deps:W,value:this,useNew:!1}),r.set(G,{token:G,fn:H,deps:W,value:this,useNew:!1}),function t(e,n){if(n)if((n=L(n))instanceof Array)for(var r=0;r<n.length;r++)t(e,n[r]);else{if("function"==typeof n)throw nt("Function/Class not supported",n);if(!n||"object"!=typeof n||!n.provide)throw nt("Unexpected provider",n);var i=L(n.provide),o=function(t){var e=function(t){var e=W,n=t.deps;if(n&&n.length){e=[];for(var r=0;r<n.length;r++){var i=6;if((u=L(n[r]))instanceof Array)for(var o=0,a=u;o<a.length;o++){var s=a[o];s instanceof N||s==N?i|=1:s instanceof k||s==k?i&=-3:s instanceof D||s==D?i&=-5:u=s instanceof I?s.token:L(s)}e.push({token:u,options:i})}}else if(t.useExisting){var u;e=[{token:u=L(t.useExisting),options:6}]}else if(!(n||K in t))throw nt("'deps' required",t);return e}(t),n=H,r=W,i=!1,o=L(t.provide);if(K in t)r=t.useValue;else if(t.useFactory)n=t.useFactory;else if(t.useExisting);else if(t.useClass)i=!0,n=L(t.useClass);else{if("function"!=typeof o)throw nt("StaticProvider does not have [useValue|useFactory|useExisting|useClass] or [provide] is not newable",t);i=!0,n=o}return{deps:e,fn:n,useNew:i,value:r}}(n);if(!0===n.multi){var a=e.get(i);if(a){if(a.fn!==X)throw tt(i)}else e.set(i,a={token:n.provide,deps:[],useNew:!1,fn:X,value:W});a.deps.push({token:i=n,options:6})}var s=e.get(i);if(s&&s.fn==X)throw tt(i);e.set(i,o)}}(r,t)}return t.prototype.get=function(t,e,n){void 0===n&&(n=0);var i=this._records.get(t);try{return function t(e,n,i,o,a,s){try{return function(e,n,i,o,a,s){var u,l;if(!n||4&s)2&s||(l=o.get(e,a,0));else{if((l=n.value)==q)throw Error(J+"Circular dependency");if(l===W){n.value=q;var c=n.useNew,h=n.fn,d=n.deps,p=W;if(d.length){p=[];for(var f=0;f<d.length;f++){var m=d[f],v=m.options,g=2&v?i.get(m.token):void 0;p.push(t(m.token,g,i,g||4&v?o:Z,1&v?null:z.THROW_IF_NOT_FOUND,0))}}n.value=l=c?new((u=h).bind.apply(u,Object(r.__spread)([void 0],p))):h.apply(void 0,p)}}return l}(e,n,i,o,a,s)}catch(t){throw t instanceof Error||(t=new Error(t)),(t.ngTempTokenPath=t.ngTempTokenPath||[]).unshift(e),n&&n.value==q&&(n.value=W),t}}(t,i,this._records,this.parent,e,n)}catch(e){var o=e.ngTempTokenPath;throw t[j]&&o.unshift(t[j]),e.message=et("\n"+e.message,o,this.source),e.ngTokenPath=o,e.ngTempTokenPath=null,e}},t.prototype.toString=function(){var t=[];return this._records.forEach(function(e,n){return t.push(O(n))}),"StaticInjector["+t.join(", ")+"]"},t}();function tt(t){return nt("Cannot mix multi providers and regular providers",t)}function et(t,e,n){void 0===n&&(n=null),t=t&&"\n"===t.charAt(0)&&t.charAt(1)==J?t.substr(2):t;var r=O(e);if(e instanceof Array)r=e.map(O).join(" -> ");else if("object"==typeof e){var i=[];for(var o in e)if(e.hasOwnProperty(o)){var a=e[o];i.push(o+":"+("string"==typeof a?JSON.stringify(a):O(a)))}r="{"+i.join(", ")+"}"}return"StaticInjectorError"+(n?"("+n+")":"")+"["+r+"]: "+t.replace(Q,"\n  ")}function nt(t,e){return new Error(et(t,e))}var rt=void 0;function it(t){var e=rt;return rt=t,e}function ot(t,e){if(void 0===e&&(e=0),void 0===rt)throw new Error("inject() must be called from an injection context");if(null===rt){var n=t.ngInjectableDef;if(n&&"root"==n.providedIn)return void 0===n.value?n.value=n.factory():n.value;if(8&e)return null;throw new Error("Injector: NOT_FOUND ["+O(t)+"]")}return rt.get(t,8&e?null:void 0,e)}function at(t){for(var e=[],n=0;n<t.length;n++){var r=t[n];if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");for(var i=void 0,o=0,a=0;a<r.length;a++){var s=r[a];s instanceof N||"Optional"===s.ngMetadataName?o|=8:s instanceof k||"SkipSelf"===s.ngMetadataName?o|=4:s instanceof D||"Self"===s.ngMetadataName?o|=2:i=s instanceof I?s.token:s}e.push(ot(i,o))}else e.push(ot(r))}return e}String;var st=function(t){return t[t.Emulated=0]="Emulated",t[t.Native=1]="Native",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}({}),ut=function(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")},lt=new ut("6.1.10"),ct="ngDebugContext",ht="ngOriginalError",dt="ngErrorLogger";function pt(t){return t[ct]}function ft(t){return t[ht]}function mt(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t.error.apply(t,Object(r.__spread)(e))}var vt=function(){function t(){this._console=console}return t.prototype.handleError=function(t){var e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t[dt]||mt}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)},t.prototype._findContext=function(t){return t?pt(t)?pt(t):this._findContext(ft(t)):null},t.prototype._findOriginalError=function(t){for(var e=ft(t);e&&ft(e);)e=ft(e);return e},t}(),gt=new d("The presence of this token marks an injector as being the root injector."),yt={},_t={},bt=[],wt=void 0;function xt(){return void 0===wt&&(wt=new V),wt}var Et=function(){function t(t,e,n){var r=this;this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this.destroyed=!1,Mt([t],function(t){return r.processInjectorType(t,new Set)}),e&&Mt(e,function(t){return r.processProvider(t)}),this.records.set(G,Tt(void 0,this)),this.isRootInjector=this.records.has(gt),this.injectorDefTypes.forEach(function(t){return r.get(t)})}return t.prototype.destroy=function(){this.assertNotDestroyed(),this.destroyed=!0;try{this.onDestroy.forEach(function(t){return t.ngOnDestroy()})}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}},t.prototype.get=function(t,e,n){void 0===e&&(e=B),void 0===n&&(n=0),this.assertNotDestroyed();var r,i=it(this);try{if(!(4&n)){var o=this.records.get(t);if(void 0===o){var a=("function"==typeof(r=t)||"object"==typeof r&&r instanceof d)&&t.ngInjectableDef||void 0;void 0!==a&&this.injectableDefInScope(a)&&(o=St(t),this.records.set(t,o))}if(void 0!==o)return this.hydrate(t,o)}return 2&n&&xt(),this.parent.get(t,e)}finally{it(i)}},t.prototype.assertNotDestroyed=function(){if(this.destroyed)throw new Error("Injector has already been destroyed.")},t.prototype.processInjectorType=function(t,e){var n=this,r=(t=L(t)).ngInjectorDef,i=null==r&&t.ngModule||void 0,o=void 0===i?t:i,a=void 0!==i&&t.providers||bt;if(void 0!==i&&(r=i.ngInjectorDef),null!=r){if(e.has(o))throw new Error("Circular dependency: type "+O(o)+" ends up importing itself.");if(this.injectorDefTypes.add(o),this.records.set(o,Tt(r.factory)),null!=r.imports){e.add(o);try{Mt(r.imports,function(t){return n.processInjectorType(t,e)})}finally{e.delete(o)}}null!=r.providers&&Mt(r.providers,function(t){return n.processProvider(t)}),Mt(a,function(t){return n.processProvider(t)})}},t.prototype.processProvider=function(t){var e=Ct(t=L(t))?t:L(t.provide),n=function(t){var e=L(t),n=yt,i=void 0;if(Ct(t))return St(t);if(e=L(t.provide),K in t)n=t.useValue;else if(t.useExisting)i=function(){return ot(t.useExisting)};else if(t.useFactory)i=function(){return t.useFactory.apply(t,Object(r.__spread)(at(t.deps||[])))};else{var o=t.useClass||e;if(!t.deps)return St(o);i=function(){return new(o.bind.apply(o,Object(r.__spread)([void 0],at(t.deps))))}}return Tt(i,n)}(t);if(Ct(t)||!0!==t.multi){var i=this.records.get(e);if(i&&void 0!==i.multi)throw new Error("Mixed multi-provider for "+O(e))}else{var o=this.records.get(e);if(o){if(void 0===o.multi)throw new Error("Mixed multi-provider for "+e+".")}else(o=Tt(void 0,yt,!0)).factory=function(){return at(o.multi)},this.records.set(e,o);e=t,o.multi.push(t)}this.records.set(e,n)},t.prototype.hydrate=function(t,e){if(e.value===_t)throw new Error("Circular dep for "+O(t));var n;return e.value===yt&&(e.value=_t,e.value=e.factory()),"object"==typeof e.value&&e.value&&"object"==typeof(n=e.value)&&null!=n&&n.ngOnDestroy&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value},t.prototype.injectableDefInScope=function(t){return!!t.providedIn&&("string"==typeof t.providedIn?"any"===t.providedIn||"root"===t.providedIn&&this.isRootInjector:this.injectorDefTypes.has(t.providedIn))},t}();function St(t){var e=t.ngInjectableDef;if(void 0===e){if(t instanceof d)throw new Error("Token "+O(t)+" is missing an ngInjectableDef definition.");return Tt(function(){return new t})}return Tt(e.factory)}function Tt(t,e,n){return void 0===e&&(e=yt),void 0===n&&(n=!1),{factory:t,value:e,multi:n?[]:void 0}}function Mt(t,e){t.forEach(function(t){return Array.isArray(t)?Mt(t,e):e(t)})}function Ct(t){return"function"==typeof t}function At(t){return!!t&&"function"==typeof t.then}function Pt(t){return!!t&&"function"==typeof t.subscribe}var Ot=new d("Application Initializer"),Rt=function(){function t(t){var e=this;this.appInits=t,this.initialized=!1,this.done=!1,this.donePromise=new Promise(function(t,n){e.resolve=t,e.reject=n})}return t.prototype.runInitializers=function(){var t=this;if(!this.initialized){var e=[],n=function(){t.done=!0,t.resolve()};if(this.appInits)for(var r=0;r<this.appInits.length;r++){var i=this.appInits[r]();At(i)&&e.push(i)}Promise.all(e).then(function(){n()}).catch(function(e){t.reject(e)}),0===e.length&&n(),this.initialized=!0}},Object(r.__decorate)([Object(r.__param)(0,I(Ot)),Object(r.__param)(0,N())],t)}(),Lt=new d("AppId");function It(){return""+Nt()+Nt()+Nt()}function Nt(){return String.fromCharCode(97+Math.floor(25*Math.random()))}var Dt=new d("Platform Initializer"),kt=new d("Platform ID"),Ft=new d("appBootstrapListener"),jt=function(){function t(){}return t.prototype.log=function(t){console.log(t)},t.prototype.warn=function(t){console.warn(t)},t}();function Ut(){throw new Error("Runtime compiler is not loaded")}var Bt=function(){function t(){}return t.prototype.compileModuleSync=function(t){throw Ut()},t.prototype.compileModuleAsync=function(t){throw Ut()},t.prototype.compileModuleAndAllComponentsSync=function(t){throw Ut()},t.prototype.compileModuleAndAllComponentsAsync=function(t){throw Ut()},t.prototype.clearCache=function(){},t.prototype.clearCacheFor=function(t){},t.prototype.getModuleId=function(t){},t}(),Gt=function(){},Vt=function(){},zt=function(){};function Ht(t){var e=Error("No component factory found for "+O(t)+". Did you add it to @NgModule.entryComponents?");return e[Xt]=t,e}var Wt,qt,Xt="ngComponent",Yt=function(){function t(){}return t.prototype.resolveComponentFactory=function(t){throw Ht(t)},t}(),Kt=function(){function t(){}return t.NULL=new Yt,t}(),Zt=function(){function t(t,e,n){this._parent=e,this._ngModule=n,this._factories=new Map;for(var r=0;r<t.length;r++){var i=t[r];this._factories.set(i.componentType,i)}}return t.prototype.resolveComponentFactory=function(t){var e=this._factories.get(t);if(!e&&this._parent&&(e=this._parent.resolveComponentFactory(t)),!e)throw Ht(t);return new Qt(e,this._ngModule)},t}(),Qt=function(t){function e(e,n){var r=t.call(this)||this;return r.factory=e,r.ngModule=n,r.selector=e.selector,r.componentType=e.componentType,r.ngContentSelectors=e.ngContentSelectors,r.inputs=e.inputs,r.outputs=e.outputs,r}return Object(r.__extends)(e,t),e.prototype.create=function(t,e,n,r){return this.factory.create(t,e,n,r||this.ngModule)},e}(zt),Jt=function(){},$t=function(){},te=function(){var t=S.wtf;return!(!t||!(Wt=t.trace)||(qt=Wt.events,0))}();function ee(t,e){return null}var ne=te?function(t,e){return void 0===e&&(e=null),qt.createScope(t,e)}:function(t,e){return ee},re=te?function(t,e){return Wt.leaveScope(t,e),e}:function(t,e){return e},ie=function(t){function e(e){void 0===e&&(e=!1);var n=t.call(this)||this;return n.__isAsync=e,n}return Object(r.__extends)(e,t),e.prototype.emit=function(e){t.prototype.next.call(this,e)},e.prototype.subscribe=function(e,n,r){var i,o=function(t){return null},a=function(){return null};e&&"object"==typeof e?(i=this.__isAsync?function(t){setTimeout(function(){return e.next(t)})}:function(t){e.next(t)},e.error&&(o=this.__isAsync?function(t){setTimeout(function(){return e.error(t)})}:function(t){e.error(t)}),e.complete&&(a=this.__isAsync?function(){setTimeout(function(){return e.complete()})}:function(){e.complete()})):(i=this.__isAsync?function(t){setTimeout(function(){return e(t)})}:function(t){e(t)},n&&(o=this.__isAsync?function(t){setTimeout(function(){return n(t)})}:function(t){n(t)}),r&&(a=this.__isAsync?function(){setTimeout(function(){return r()})}:function(){r()}));var u=t.prototype.subscribe.call(this,i,o,a);return e instanceof s.a&&e.add(u),u},e}(a.a),oe=function(){function t(t){var e,n=t.enableLongStackTrace,r=void 0!==n&&n;if(this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ie(!1),this.onMicrotaskEmpty=new ie(!1),this.onStable=new ie(!1),this.onError=new ie(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.wtfZoneSpec&&(this._inner=this._inner.fork(Zone.wtfZoneSpec)),Zone.TaskTrackingZoneSpec&&(this._inner=this._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),(e=this)._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:function(t,n,r,i,o,a){try{return le(e),t.invokeTask(r,i,o,a)}finally{ce(e)}},onInvoke:function(t,n,r,i,o,a,s){try{return le(e),t.invoke(r,i,o,a,s)}finally{ce(e)}},onHasTask:function(t,n,r,i){t.hasTask(r,i),n===r&&("microTask"==i.change?(e.hasPendingMicrotasks=i.microTask,ue(e)):"macroTask"==i.change&&(e.hasPendingMacrotasks=i.macroTask))},onHandleError:function(t,n,r,i){return t.handleError(r,i),e.runOutsideAngular(function(){return e.onError.emit(i)}),!1}})}return t.isInAngularZone=function(){return!0===Zone.current.get("isAngularZone")},t.assertInAngularZone=function(){if(!t.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")},t.assertNotInAngularZone=function(){if(t.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")},t.prototype.run=function(t,e,n){return this._inner.run(t,e,n)},t.prototype.runTask=function(t,e,n,r){var i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,t,se,ae,ae);try{return i.runTask(o,e,n)}finally{i.cancelTask(o)}},t.prototype.runGuarded=function(t,e,n){return this._inner.runGuarded(t,e,n)},t.prototype.runOutsideAngular=function(t){return this._outer.run(t)},t}();function ae(){}var se={};function ue(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(function(){return t.onStable.emit(null)})}finally{t.isStable=!0}}}function le(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function ce(t){t._nesting--,ue(t)}var he=function(){function t(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ie,this.onMicrotaskEmpty=new ie,this.onStable=new ie,this.onError=new ie}return t.prototype.run=function(t){return t()},t.prototype.runGuarded=function(t){return t()},t.prototype.runOutsideAngular=function(t){return t()},t.prototype.runTask=function(t){return t()},t}(),de=function(){function t(t){var e=this;this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this._watchAngularEvents(),t.run(function(){e.taskTrackingZone=Zone.current.get("TaskTrackingZone")})}return t.prototype._watchAngularEvents=function(){var t=this;this._ngZone.onUnstable.subscribe({next:function(){t._didWork=!0,t._isZoneStable=!1}}),this._ngZone.runOutsideAngular(function(){t._ngZone.onStable.subscribe({next:function(){oe.assertNotInAngularZone(),A(function(){t._isZoneStable=!0,t._runCallbacksIfReady()})}})})},t.prototype.increasePendingRequestCount=function(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount},t.prototype.decreasePendingRequestCount=function(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount},t.prototype.isStable=function(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks},t.prototype._runCallbacksIfReady=function(){var t=this;if(this.isStable())A(function(){for(;0!==t._callbacks.length;){var e=t._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(t._didWork)}t._didWork=!1});else{var e=this.getPendingTasks();this._callbacks=this._callbacks.filter(function(t){return!t.updateCb||!t.updateCb(e)||(clearTimeout(t.timeoutId),!1)}),this._didWork=!0}},t.prototype.getPendingTasks=function(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(function(t){return{source:t.source,isPeriodic:t.data.isPeriodic,delay:t.data.delay,creationLocation:t.creationLocation,xhr:t.data.target}}):[]},t.prototype.addCallback=function(t,e,n){var r=this,i=-1;e&&e>0&&(i=setTimeout(function(){r._callbacks=r._callbacks.filter(function(t){return t.timeoutId!==i}),t(r._didWork,r.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:i,updateCb:n})},t.prototype.whenStable=function(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()},t.prototype.getPendingRequestCount=function(){return this._pendingCount},t.prototype.findProviders=function(t,e,n){return[]},t}(),pe=function(){function t(){this._applications=new Map,ve.addToWindow(this)}return t.prototype.registerApplication=function(t,e){this._applications.set(t,e)},t.prototype.unregisterApplication=function(t){this._applications.delete(t)},t.prototype.unregisterAllApplications=function(){this._applications.clear()},t.prototype.getTestability=function(t){return this._applications.get(t)||null},t.prototype.getAllTestabilities=function(){return Array.from(this._applications.values())},t.prototype.getAllRootElements=function(){return Array.from(this._applications.keys())},t.prototype.findTestabilityInTree=function(t,e){return void 0===e&&(e=!0),ve.findTestabilityInTree(this,t,e)},Object(r.__decorate)([Object(r.__metadata)("design:paramtypes",[])],t)}();function fe(t){ve=t}var me,ve=new(function(){function t(){}return t.prototype.addToWindow=function(t){},t.prototype.findTestabilityInTree=function(t,e,n){return null},t}()),ge=!0,ye=!1,_e=new d("AllowMultipleToken");function be(){if(ye)throw new Error("Cannot enable prod mode after platform setup.");ge=!1}function we(){return ye=!0,ge}var xe=function(t,e){this.name=t,this.token=e};function Ee(t,e,n){void 0===n&&(n=[]);var r="Platform: "+e,i=new d(r);return function(e){void 0===e&&(e=[]);var o=Se();if(!o||o.injector.get(_e,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{var a=n.concat(e).concat({provide:i,useValue:!0});!function(t){if(me&&!me.destroyed&&!me.injector.get(_e,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");me=t.get(Te);var e=t.get(Dt,null);e&&e.forEach(function(t){return t()})}(z.create({providers:a,name:r}))}return function(t){var e=Se();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function Se(){return me&&!me.destroyed?me:null}var Te=function(){function t(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}return t.prototype.bootstrapModuleFactory=function(t,e){var n,r=this,i="noop"===(n=e?e.ngZone:void 0)?new he:("zone.js"===n?void 0:n)||new oe({enableLongStackTrace:we()}),o=[{provide:oe,useValue:i}];return i.run(function(){var e=z.create({providers:o,parent:r.injector,name:t.moduleType.name}),n=t.create(e),a=n.injector.get(vt,null);if(!a)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.onDestroy(function(){return Ae(r._modules,n)}),i.runOutsideAngular(function(){return i.onError.subscribe({next:function(t){a.handleError(t)}})}),function(t,e,i){try{var o=((a=n.injector.get(Rt)).runInitializers(),a.donePromise.then(function(){return r._moduleDoBootstrap(n),n}));return At(o)?o.catch(function(n){throw e.runOutsideAngular(function(){return t.handleError(n)}),n}):o}catch(n){throw e.runOutsideAngular(function(){return t.handleError(n)}),n}var a}(a,i)})},t.prototype.bootstrapModule=function(t,e){var n=this;void 0===e&&(e=[]);var r=this.injector.get(Gt),i=Me({},e);return r.createCompiler([i]).compileModuleAsync(t).then(function(t){return n.bootstrapModuleFactory(t,i)})},t.prototype._moduleDoBootstrap=function(t){var e=t.injector.get(Ce);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(function(t){return e.bootstrap(t)});else{if(!t.instance.ngDoBootstrap)throw new Error("The module "+O(t.instance.constructor)+' was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.');t.instance.ngDoBootstrap(e)}this._modules.push(t)},t.prototype.onDestroy=function(t){this._destroyListeners.push(t)},Object.defineProperty(t.prototype,"injector",{get:function(){return this._injector},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(function(t){return t.destroy()}),this._destroyListeners.forEach(function(t){return t()}),this._destroyed=!0},Object.defineProperty(t.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!0,configurable:!0}),t}();function Me(t,e){return Array.isArray(e)?e.reduce(Me,t):Object(r.__assign)({},t,e)}var Ce=function(){function t(t,e,n,r,a,s){var h=this;this._zone=t,this._console=e,this._injector=n,this._exceptionHandler=r,this._componentFactoryResolver=a,this._initStatus=s,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=we(),this._zone.onMicrotaskEmpty.subscribe({next:function(){h._zone.run(function(){h.tick()})}});var d=new o.a(function(t){h._stable=h._zone.isStable&&!h._zone.hasPendingMacrotasks&&!h._zone.hasPendingMicrotasks,h._zone.runOutsideAngular(function(){t.next(h._stable),t.complete()})}),p=new o.a(function(t){var e;h._zone.runOutsideAngular(function(){e=h._zone.onStable.subscribe(function(){oe.assertNotInAngularZone(),A(function(){h._stable||h._zone.hasPendingMacrotasks||h._zone.hasPendingMicrotasks||(h._stable=!0,t.next(!0))})})});var n=h._zone.onUnstable.subscribe(function(){oe.assertInAngularZone(),h._stable&&(h._stable=!1,h._zone.runOutsideAngular(function(){t.next(!1)}))});return function(){e.unsubscribe(),n.unsubscribe()}});this.isStable=Object(i.a)(d,p.pipe(function(t){return Object(l.a)()((e=c,function(t){var n;n="function"==typeof e?e:function(){return e};var r=Object.create(t,u.a);return r.source=t,r.subjectFactory=n,r})(t));var e}))}var e;return e=t,t.prototype.bootstrap=function(t,e){var n,r=this;if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");n=t instanceof zt?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);var i=n instanceof Qt?null:this._injector.get(Jt),o=n.create(z.NULL,[],e||n.selector,i);o.onDestroy(function(){r._unloadComponent(o)});var a=o.injector.get(de,null);return a&&o.injector.get(pe).registerApplication(o.location.nativeElement,a),this._loadComponent(o),we()&&this._console.log("Angular is running in the development mode. Call enableProdMode() to enable the production mode."),o},t.prototype.tick=function(){var t=this;if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");var n=e._tickScope();try{this._runningTick=!0,this._views.forEach(function(t){return t.detectChanges()}),this._enforceNoNewChanges&&this._views.forEach(function(t){return t.checkNoChanges()})}catch(e){this._zone.runOutsideAngular(function(){return t._exceptionHandler.handleError(e)})}finally{this._runningTick=!1,re(n)}},t.prototype.attachView=function(t){var e=t;this._views.push(e),e.attachToAppRef(this)},t.prototype.detachView=function(t){var e=t;Ae(this._views,e),e.detachFromAppRef()},t.prototype._loadComponent=function(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Ft,[]).concat(this._bootstrapListeners).forEach(function(e){return e(t)})},t.prototype._unloadComponent=function(t){this.detachView(t.hostView),Ae(this.components,t)},t.prototype.ngOnDestroy=function(){this._views.slice().forEach(function(t){return t.destroy()})},Object.defineProperty(t.prototype,"viewCount",{get:function(){return this._views.length},enumerable:!0,configurable:!0}),t._tickScope=ne("ApplicationRef#tick()"),t}();function Ae(t,e){var n=t.indexOf(e);n>-1&&t.splice(n,1)}var Pe=function(){},Oe=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}({}),Re=function(){},Le=function(t){this.nativeElement=t},Ie=function(){},Ne=function(){function t(){this.dirty=!0,this._results=[],this.changes=new ie,this.length=0}return t.prototype.map=function(t){return this._results.map(t)},t.prototype.filter=function(t){return this._results.filter(t)},t.prototype.find=function(t){return this._results.find(t)},t.prototype.reduce=function(t,e){return this._results.reduce(t,e)},t.prototype.forEach=function(t){this._results.forEach(t)},t.prototype.some=function(t){return this._results.some(t)},t.prototype.toArray=function(){return this._results.slice()},t.prototype[C()]=function(){return this._results[C()]()},t.prototype.toString=function(){return this._results.toString()},t.prototype.reset=function(t){this._results=function t(e){return e.reduce(function(e,n){var r=Array.isArray(n)?t(n):n;return e.concat(r)},[])}(t),this.dirty=!1,this.length=this._results.length,this.last=this._results[this.length-1],this.first=this._results[0]},t.prototype.notifyOnChanges=function(){this.changes.emit(this)},t.prototype.setDirty=function(){this.dirty=!0},t.prototype.destroy=function(){this.changes.complete(),this.changes.unsubscribe()},t}(),De=function(){},ke={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"},Fe=function(){function t(t,e){this._compiler=t,this._config=e||ke}return t.prototype.load=function(t){return this._compiler instanceof Bt?this.loadFactory(t):this.loadAndCompile(t)},t.prototype.loadAndCompile=function(t){var e=this,i=Object(r.__read)(t.split("#"),2),o=i[0],a=i[1];return void 0===a&&(a="default"),n("crnd")(o).then(function(t){return t[a]}).then(function(t){return je(t,o,a)}).then(function(t){return e._compiler.compileModuleAsync(t)})},t.prototype.loadFactory=function(t){var e=Object(r.__read)(t.split("#"),2),i=e[0],o=e[1],a="NgFactory";return void 0===o&&(o="default",a=""),n("crnd")(this._config.factoryPathPrefix+i+this._config.factoryPathSuffix).then(function(t){return t[o+a]}).then(function(t){return je(t,i,o)})},Object(r.__decorate)([Object(r.__param)(1,N())],t)}();function je(t,e,n){if(!t)throw new Error("Cannot find '"+n+"' in '"+e+"'");return t}var Ue=function(){},Be=function(){},Ge=function(){},Ve=function(){function t(t,e,n){this._debugContext=n,this.nativeNode=t,e&&e instanceof ze?e.addChild(this):this.parent=null,this.listeners=[]}return Object.defineProperty(t.prototype,"injector",{get:function(){return this._debugContext.injector},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"componentInstance",{get:function(){return this._debugContext.component},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"context",{get:function(){return this._debugContext.context},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"references",{get:function(){return this._debugContext.references},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"providerTokens",{get:function(){return this._debugContext.providerTokens},enumerable:!0,configurable:!0}),t}(),ze=function(t){function e(e,n,r){var i=t.call(this,e,n,r)||this;return i.properties={},i.attributes={},i.classes={},i.styles={},i.childNodes=[],i.nativeElement=e,i}return Object(r.__extends)(e,t),e.prototype.addChild=function(t){t&&(this.childNodes.push(t),t.parent=this)},e.prototype.removeChild=function(t){var e=this.childNodes.indexOf(t);-1!==e&&(t.parent=null,this.childNodes.splice(e,1))},e.prototype.insertChildrenAfter=function(t,e){var n,i=this,o=this.childNodes.indexOf(t);-1!==o&&((n=this.childNodes).splice.apply(n,Object(r.__spread)([o+1,0],e)),e.forEach(function(t){t.parent&&t.parent.removeChild(t),t.parent=i}))},e.prototype.insertBefore=function(t,e){var n=this.childNodes.indexOf(t);-1===n?this.addChild(e):(e.parent&&e.parent.removeChild(e),e.parent=this,this.childNodes.splice(n,0,e))},e.prototype.query=function(t){return this.queryAll(t)[0]||null},e.prototype.queryAll=function(t){var e=[];return function t(e,n,r){e.childNodes.forEach(function(e){e instanceof ze&&(n(e)&&r.push(e),t(e,n,r))})}(this,t,e),e},e.prototype.queryAllNodes=function(t){var e=[];return function t(e,n,r){e instanceof ze&&e.childNodes.forEach(function(e){n(e)&&r.push(e),e instanceof ze&&t(e,n,r)})}(this,t,e),e},Object.defineProperty(e.prototype,"children",{get:function(){return this.childNodes.filter(function(t){return t instanceof e})},enumerable:!0,configurable:!0}),e.prototype.triggerEventHandler=function(t,e){this.listeners.forEach(function(n){n.name==t&&n.callback(e)})},e}(Ve),He=new Map;function We(t){return He.get(t)||null}function qe(t){He.set(t.nativeNode,t)}function Xe(t,e){var n=Ze(t),r=Ze(e);return n&&r?function(t,e,n){for(var r=t[C()](),i=e[C()]();;){var o=r.next(),a=i.next();if(o.done&&a.done)return!0;if(o.done||a.done)return!1;if(!n(o.value,a.value))return!1}}(t,e,Xe):!(n||!t||"object"!=typeof t&&"function"!=typeof t||r||!e||"object"!=typeof e&&"function"!=typeof e)||P(t,e)}var Ye=function(){function t(t){this.wrapped=t}return t.wrap=function(e){return new t(e)},t.unwrap=function(e){return t.isWrapped(e)?e.wrapped:e},t.isWrapped=function(e){return e instanceof t},t}(),Ke=function(){function t(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}return t.prototype.isFirstChange=function(){return this.firstChange},t}();function Ze(t){return!!Qe(t)&&(Array.isArray(t)||!(t instanceof Map)&&C()in t)}function Qe(t){return null!==t&&("function"==typeof t||"object"==typeof t)}var Je=function(){function t(){}return t.prototype.supports=function(t){return Ze(t)},t.prototype.create=function(t){return new tn(t)},t}(),$e=function(t,e){return e},tn=function(){function t(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||$e}return t.prototype.forEachItem=function(t){var e;for(e=this._itHead;null!==e;e=e._next)t(e)},t.prototype.forEachOperation=function(t){for(var e=this._itHead,n=this._removalsHead,r=0,i=null;e||n;){var o=!n||e&&e.currentIndex<on(n,r,i)?e:n,a=on(o,r,i),s=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{i||(i=[]);var u=a-r,l=s-r;if(u!=l){for(var c=0;c<u;c++){var h=c<i.length?i[c]:i[c]=0,d=h+c;l<=d&&d<u&&(i[c]=h+1)}i[o.previousIndex]=l-u}}a!==s&&t(o,a,s)}},t.prototype.forEachPreviousItem=function(t){var e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)},t.prototype.forEachAddedItem=function(t){var e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)},t.prototype.forEachMovedItem=function(t){var e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)},t.prototype.forEachRemovedItem=function(t){var e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)},t.prototype.forEachIdentityChange=function(t){var e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)},t.prototype.diff=function(t){if(null==t&&(t=[]),!Ze(t))throw new Error("Error trying to diff '"+O(t)+"'. Only arrays and iterables are allowed");return this.check(t)?this:null},t.prototype.onDestroy=function(){},t.prototype.check=function(t){var e=this;this._reset();var n,r,i,o=this._itHead,a=!1;if(Array.isArray(t)){this.length=t.length;for(var s=0;s<this.length;s++)i=this._trackByFn(s,r=t[s]),null!==o&&P(o.trackById,i)?(a&&(o=this._verifyReinsertion(o,r,i,s)),P(o.item,r)||this._addIdentityChange(o,r)):(o=this._mismatch(o,r,i,s),a=!0),o=o._next}else n=0,function(t,e){if(Array.isArray(t))for(var n=0;n<t.length;n++)e(t[n]);else for(var r=t[C()](),i=void 0;!(i=r.next()).done;)e(i.value)}(t,function(t){i=e._trackByFn(n,t),null!==o&&P(o.trackById,i)?(a&&(o=e._verifyReinsertion(o,t,i,n)),P(o.item,t)||e._addIdentityChange(o,t)):(o=e._mismatch(o,t,i,n),a=!0),o=o._next,n++}),this.length=n;return this._truncate(o),this.collection=t,this.isDirty},Object.defineProperty(t.prototype,"isDirty",{get:function(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead},enumerable:!0,configurable:!0}),t.prototype._reset=function(){if(this.isDirty){var t=void 0,e=void 0;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=e)t.previousIndex=t.currentIndex,e=t._nextMoved;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}},t.prototype._mismatch=function(t,e,n,r){var i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(P(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(P(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):t=this._addAfter(new en(e,n),i,r),t},t.prototype._verifyReinsertion=function(t,e,n,r){var i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t},t.prototype._truncate=function(t){for(;null!==t;){var e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)},t.prototype._reinsertAfter=function(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);var r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t},t.prototype._moveAfter=function(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t},t.prototype._addAfter=function(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t},t.prototype._insertAfter=function(t,e,n){var r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new rn),this._linkedRecords.put(t),t.currentIndex=n,t},t.prototype._remove=function(t){return this._addToRemovals(this._unlink(t))},t.prototype._unlink=function(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);var e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t},t.prototype._addToMoves=function(t,e){return t.previousIndex===e?t:(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t,t)},t.prototype._addToRemovals=function(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new rn),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t},t.prototype._addIdentityChange=function(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t},t}(),en=function(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null},nn=function(){function t(){this._head=null,this._tail=null}return t.prototype.add=function(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)},t.prototype.get=function(t,e){var n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&P(n.trackById,t))return n;return null},t.prototype.remove=function(t){var e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head},t}(),rn=function(){function t(){this.map=new Map}return t.prototype.put=function(t){var e=t.trackById,n=this.map.get(e);n||(n=new nn,this.map.set(e,n)),n.add(t)},t.prototype.get=function(t,e){var n=this.map.get(t);return n?n.get(t,e):null},t.prototype.remove=function(t){var e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t},Object.defineProperty(t.prototype,"isEmpty",{get:function(){return 0===this.map.size},enumerable:!0,configurable:!0}),t.prototype.clear=function(){this.map.clear()},t}();function on(t,e,n){var r=t.previousIndex;if(null===r)return r;var i=0;return n&&r<n.length&&(i=n[r]),r+e+i}var an=function(){function t(){}return t.prototype.supports=function(t){return t instanceof Map||Qe(t)},t.prototype.create=function(){return new sn},t}(),sn=function(){function t(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}return Object.defineProperty(t.prototype,"isDirty",{get:function(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead},enumerable:!0,configurable:!0}),t.prototype.forEachItem=function(t){var e;for(e=this._mapHead;null!==e;e=e._next)t(e)},t.prototype.forEachPreviousItem=function(t){var e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)},t.prototype.forEachChangedItem=function(t){var e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)},t.prototype.forEachAddedItem=function(t){var e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)},t.prototype.forEachRemovedItem=function(t){var e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)},t.prototype.diff=function(t){if(t){if(!(t instanceof Map||Qe(t)))throw new Error("Error trying to diff '"+O(t)+"'. Only maps and objects are allowed")}else t=new Map;return this.check(t)?this:null},t.prototype.onDestroy=function(){},t.prototype.check=function(t){var e=this;this._reset();var n=this._mapHead;if(this._appendAfter=null,this._forEach(t,function(t,r){if(n&&n.key===r)e._maybeAddToChanges(n,t),e._appendAfter=n,n=n._next;else{var i=e._getOrCreateRecordForKey(r,t);n=e._insertBeforeOrAppend(n,i)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(var r=n;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty},t.prototype._insertBeforeOrAppend=function(t,e){if(t){var n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null},t.prototype._getOrCreateRecordForKey=function(t,e){if(this._records.has(t)){var n=this._records.get(t);this._maybeAddToChanges(n,e);var r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}var o=new un(t);return this._records.set(t,o),o.currentValue=e,this._addToAdditions(o),o},t.prototype._reset=function(){if(this.isDirty){var t=void 0;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}},t.prototype._maybeAddToChanges=function(t,e){P(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))},t.prototype._addToAdditions=function(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)},t.prototype._addToChanges=function(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)},t.prototype._forEach=function(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(function(n){return e(t[n],n)})},t}(),un=function(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null},ln=function(){function t(t){this.factories=t}return t.create=function(e,n){if(null!=n){var r=n.factories.slice();e=e.concat(r)}return new t(e)},t.extend=function(e){return{provide:t,useFactory:function(n){if(!n)throw new Error("Cannot extend IterableDiffers without a parent injector");return t.create(e,n)},deps:[[t,new k,new N]]}},t.prototype.find=function(t){var e,n=this.factories.find(function(e){return e.supports(t)});if(null!=n)return n;throw new Error("Cannot find a differ supporting object '"+t+"' of type '"+((e=t).name||typeof e)+"'")},t.ngInjectableDef=h({providedIn:"root",factory:function(){return new t([new Je])}}),t}(),cn=function(){function t(t){this.factories=t}return t.create=function(e,n){if(n){var r=n.factories.slice();e=e.concat(r)}return new t(e)},t.extend=function(e){return{provide:t,useFactory:function(n){if(!n)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return t.create(e,n)},deps:[[t,new k,new N]]}},t.prototype.find=function(t){var e=this.factories.find(function(e){return e.supports(t)});if(e)return e;throw new Error("Cannot find a differ supporting object '"+t+"'")},t}(),hn=[new an],dn=new ln([new Je]),pn=new cn(hn),fn=Ee(null,"core",[{provide:kt,useValue:"unknown"},{provide:Te,deps:[z]},{provide:pe,deps:[]},{provide:jt,deps:[]}]),mn=new d("LocaleId");function vn(){return dn}function gn(){return pn}function yn(t){return t||"en-US"}var _n=function(t){},bn=function(){function t(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),this.inertBodyElement=this.inertDocument.body,null==this.inertBodyElement){var e=this.inertDocument.createElement("html");this.inertDocument.appendChild(e),this.inertBodyElement=this.inertDocument.createElement("body"),e.appendChild(this.inertBodyElement)}this.inertBodyElement.innerHTML='<svg><g onload="this.parentNode.remove()"></g></svg>',!this.inertBodyElement.querySelector||this.inertBodyElement.querySelector("svg")?(this.inertBodyElement.innerHTML='<svg><p><style><img src="</style><img src=x onerror=alert(1)//">',this.getInertBodyElement=this.inertBodyElement.querySelector&&this.inertBodyElement.querySelector("svg img")&&function(){try{return!!window.DOMParser}catch(t){return!1}}()?this.getInertBodyElement_DOMParser:this.getInertBodyElement_InertDocument):this.getInertBodyElement=this.getInertBodyElement_XHR}return t.prototype.getInertBodyElement_XHR=function(t){t="<body><remove></remove>"+t+"</body>";try{t=encodeURI(t)}catch(t){return null}var e=new XMLHttpRequest;e.responseType="document",e.open("GET","data:text/html;charset=utf-8,"+t,!1),e.send(null);var n=e.response.body;return n.removeChild(n.firstChild),n},t.prototype.getInertBodyElement_DOMParser=function(t){t="<body><remove></remove>"+t+"</body>";try{var e=(new window.DOMParser).parseFromString(t,"text/html").body;return e.removeChild(e.firstChild),e}catch(t){return null}},t.prototype.getInertBodyElement_InertDocument=function(t){var e=this.inertDocument.createElement("template");return"content"in e?(e.innerHTML=t,e):(this.inertBodyElement.innerHTML=t,this.defaultDoc.documentMode&&this.stripCustomNsAttrs(this.inertBodyElement),this.inertBodyElement)},t.prototype.stripCustomNsAttrs=function(t){for(var e=t.attributes,n=e.length-1;0<n;n--){var r=e.item(n).name;"xmlns:ns1"!==r&&0!==r.indexOf("ns1:")||t.removeAttribute(r)}for(var i=t.firstChild;i;)i.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(i),i=i.nextSibling},t}(),wn=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,xn=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function En(t){return(t=String(t)).match(wn)||t.match(xn)?t:(we()&&console.warn("WARNING: sanitizing unsafe URL value "+t+" (see http://g.co/ng/security#xss)"),"unsafe:"+t)}function Sn(t){var e,n,i={};try{for(var o=Object(r.__values)(t.split(",")),a=o.next();!a.done;a=o.next())i[a.value]=!0}catch(t){e={error:t}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return i}function Tn(){for(var t,e,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var o={};try{for(var a=Object(r.__values)(n),s=a.next();!s.done;s=a.next()){var u=s.value;for(var l in u)u.hasOwnProperty(l)&&(o[l]=!0)}}catch(e){t={error:e}}finally{try{s&&!s.done&&(e=a.return)&&e.call(a)}finally{if(t)throw t.error}}return o}var Mn,Cn=Sn("area,br,col,hr,img,wbr"),An=Sn("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Pn=Sn("rp,rt"),On=Tn(Pn,An),Rn=Tn(Cn,Tn(An,Sn("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Tn(Pn,Sn("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),On),Ln=Sn("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),In=Sn("srcset"),Nn=Tn(Ln,In,Sn("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width")),Dn=function(){function t(){this.sanitizedSomething=!1,this.buf=[]}return t.prototype.sanitizeChildren=function(t){for(var e=t.firstChild;e;)if(e.nodeType===Node.ELEMENT_NODE?this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);var n=this.checkClobberedElement(e,e.nextSibling);if(n){e=n;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")},t.prototype.startElement=function(t){var e=t.nodeName.toLowerCase();if(Rn.hasOwnProperty(e)){this.buf.push("<"),this.buf.push(e);for(var n,r=t.attributes,i=0;i<r.length;i++){var o=r.item(i),a=o.name,s=a.toLowerCase();if(Nn.hasOwnProperty(s)){var u=o.value;Ln[s]&&(u=En(u)),In[s]&&(n=u,u=(n=String(n)).split(",").map(function(t){return En(t.trim())}).join(", ")),this.buf.push(" ",a,'="',jn(u),'"')}else this.sanitizedSomething=!0}this.buf.push(">")}else this.sanitizedSomething=!0},t.prototype.endElement=function(t){var e=t.nodeName.toLowerCase();Rn.hasOwnProperty(e)&&!Cn.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))},t.prototype.chars=function(t){this.buf.push(jn(t))},t.prototype.checkClobberedElement=function(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error("Failed to sanitize html because the element is clobbered: "+t.outerHTML);return e},t}(),kn=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Fn=/([^\#-~ |!])/g;function jn(t){return t.replace(/&/g,"&amp;").replace(kn,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(Fn,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function Un(t,e){var n=null;try{Mn=Mn||new bn(t);var r=e?String(e):"";n=Mn.getInertBodyElement(r);var i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=Mn.getInertBodyElement(r)}while(r!==o);var a=new Dn,s=a.sanitizeChildren(Bn(n)||n);return we()&&a.sanitizedSomething&&console.warn("WARNING: sanitizing HTML stripped some content (see http://g.co/ng/security#xss)."),s}finally{if(n)for(var u=Bn(n)||n;u.firstChild;)u.removeChild(u.firstChild)}}function Bn(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var Gn=new RegExp("^([-,.\"'%_!# a-zA-Z0-9]+|(?:(?:matrix|translate|scale|rotate|skew|perspective)(?:X|Y|3d)?|(?:rgb|hsl)a?|(?:repeating-)?(?:linear|radial)-gradient|(?:calc|attr))\\([-0-9.%, #a-zA-Z]+\\))$","g"),Vn=/^url\(([^)]+)\)$/;function zn(t){if(!(t=String(t).trim()))return"";var e=t.match(Vn);return e&&En(e[1])===e[1]||t.match(Gn)&&function(t){for(var e=!0,n=!0,r=0;r<t.length;r++){var i=t.charAt(r);"'"===i&&n?e=!e:'"'===i&&e&&(n=!n)}return e&&n}(t)?t:(we()&&console.warn("WARNING: sanitizing unsafe style value "+t+" (see http://g.co/ng/security#xss)."),"unsafe")}var Hn=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}({}),Wn=function(){};function qn(t,e,n){var r=t.state,i=1792&r;return i===e?(t.state=-1793&r|n,t.initIndex=-1,!0):i===n}function Xn(t,e,n){return(1792&t.state)===e&&t.initIndex<=n&&(t.initIndex=n+1,!0)}function Yn(t,e){return t.nodes[e]}function Kn(t,e){return t.nodes[e]}function Zn(t,e){return t.nodes[e]}function Qn(t,e){return t.nodes[e]}function Jn(t,e){return t.nodes[e]}var $n={setCurrentNode:void 0,createRootView:void 0,createEmbeddedView:void 0,createComponentView:void 0,createNgModuleRef:void 0,overrideProvider:void 0,overrideComponentView:void 0,clearOverrides:void 0,checkAndUpdateView:void 0,checkNoChangesView:void 0,destroyView:void 0,resolveDep:void 0,createDebugContext:void 0,handleEvent:void 0,updateDirectives:void 0,updateRenderer:void 0,dirtyParentQueries:void 0};function tr(t,e,n,r){var i="ExpressionChangedAfterItHasBeenCheckedError: Expression has changed after it was checked. Previous value: '"+e+"'. Current value: '"+n+"'.";return r&&(i+=" It seems like the view has been created after its parent and its children have been dirty checked. Has it been created in a change detection hook ?"),function(t,e){var n=new Error(t);return er(n,e),n}(i,t)}function er(t,e){t[ct]=e,t[dt]=e.logError.bind(e)}function nr(t){return new Error("ViewDestroyedError: Attempt to use a destroyed view: "+t)}var rr=function(){},ir=new Map;function or(t){var e=ir.get(t);return e||(e=O(t)+"_"+ir.size,ir.set(t,e)),e}function ar(t,e,n,r){if(Ye.isWrapped(r)){r=Ye.unwrap(r);var i=t.def.nodes[e].bindingIndex+n,o=Ye.unwrap(t.oldValues[i]);t.oldValues[i]=new Ye(o)}return r}var sr="$$undefined",ur="$$empty";function lr(t){return{id:sr,styles:t.styles,encapsulation:t.encapsulation,data:t.data}}var cr=0;function hr(t,e,n,r){return!(!(2&t.state)&&P(t.oldValues[e.bindingIndex+n],r))}function dr(t,e,n,r){return!!hr(t,e,n,r)&&(t.oldValues[e.bindingIndex+n]=r,!0)}function pr(t,e,n,r){var i=t.oldValues[e.bindingIndex+n];if(1&t.state||!Xe(i,r)){var o=e.bindings[n].name;throw tr($n.createDebugContext(t,e.nodeIndex),o+": "+i,o+": "+r,0!=(1&t.state))}}function fr(t){for(var e=t;e;)2&e.def.flags&&(e.state|=8),e=e.viewContainerParent||e.parent}function mr(t,e){for(var n=t;n&&n!==e;)n.state|=64,n=n.viewContainerParent||n.parent}function vr(t,e,n,r){try{return fr(33554432&t.def.nodes[e].flags?Kn(t,e).componentView:t),$n.handleEvent(t,e,n,r)}catch(e){t.root.errorHandler.handleError(e)}}function gr(t){return t.parent?Kn(t.parent,t.parentNodeDef.nodeIndex):null}function yr(t){return t.parent?t.parentNodeDef.parent:null}function _r(t,e){switch(201347067&e.flags){case 1:return Kn(t,e.nodeIndex).renderElement;case 2:return Yn(t,e.nodeIndex).renderText}}function br(t){return!!t.parent&&!!(32768&t.parentNodeDef.flags)}function wr(t){return!(!t.parent||32768&t.parentNodeDef.flags)}function xr(t){return 1<<t%32}function Er(t){var e={},n=0,i={};return t&&t.forEach(function(t){var o=Object(r.__read)(t,2),a=o[0],s=o[1];"number"==typeof a?(e[a]=s,n|=xr(a)):i[a]=s}),{matchedQueries:e,references:i,matchedQueryIds:n}}function Sr(t,e){return t.map(function(t){var n,i,o;return Array.isArray(t)?(o=(n=Object(r.__read)(t,2))[0],i=n[1]):(o=0,i=t),i&&("function"==typeof i||"object"==typeof i)&&e&&Object.defineProperty(i,j,{value:e,configurable:!0}),{flags:o,token:i,tokenKey:or(i)}})}function Tr(t,e,n){var r=n.renderParent;return r?0==(1&r.flags)||0==(33554432&r.flags)||r.element.componentRendererType&&r.element.componentRendererType.encapsulation===st.Native?Kn(t,n.renderParent.nodeIndex).renderElement:void 0:e}var Mr=new WeakMap;function Cr(t){var e=Mr.get(t);return e||((e=t(function(){return rr})).factory=t,Mr.set(t,e)),e}function Ar(t,e,n,r,i){3===e&&(n=t.renderer.parentNode(_r(t,t.def.lastRenderRootNode))),Pr(t,e,0,t.def.nodes.length-1,n,r,i)}function Pr(t,e,n,r,i,o,a){for(var s=n;s<=r;s++){var u=t.def.nodes[s];11&u.flags&&Rr(t,u,e,i,o,a),s+=u.childCount}}function Or(t,e,n,r,i,o){for(var a=t;a&&!br(a);)a=a.parent;for(var s=a.parent,u=yr(a),l=u.nodeIndex+u.childCount,c=u.nodeIndex+1;c<=l;c++){var h=s.def.nodes[c];h.ngContentIndex===e&&Rr(s,h,n,r,i,o),c+=h.childCount}if(!s.parent){var d=t.root.projectableNodes[e];if(d)for(c=0;c<d.length;c++)Lr(t,d[c],n,r,i,o)}}function Rr(t,e,n,r,i,o){if(8&e.flags)Or(t,e.ngContent.index,n,r,i,o);else{var a=_r(t,e);if(3===n&&33554432&e.flags&&48&e.bindingFlags?(16&e.bindingFlags&&Lr(t,a,n,r,i,o),32&e.bindingFlags&&Lr(Kn(t,e.nodeIndex).componentView,a,n,r,i,o)):Lr(t,a,n,r,i,o),16777216&e.flags)for(var s=Kn(t,e.nodeIndex).viewContainer._embeddedViews,u=0;u<s.length;u++)Ar(s[u],n,r,i,o);1&e.flags&&!e.element.name&&Pr(t,n,e.nodeIndex+1,e.nodeIndex+e.childCount,r,i,o)}}function Lr(t,e,n,r,i,o){var a=t.renderer;switch(n){case 1:a.appendChild(r,e);break;case 2:a.insertBefore(r,e,i);break;case 3:a.removeChild(r,e);break;case 0:o.push(e)}}var Ir=/^:([^:]+):(.+)$/;function Nr(t){if(":"===t[0]){var e=t.match(Ir);return[e[1],e[2]]}return["",t]}function Dr(t){for(var e=0,n=0;n<t.length;n++)e|=t[n].flags;return e}function kr(t,e,n,r,i,o,a,s,u,l,c,h,d,p,f,m,v,g,y,_){switch(t){case 1:return e+Fr(n)+r;case 2:return e+Fr(n)+r+Fr(i)+o;case 3:return e+Fr(n)+r+Fr(i)+o+Fr(a)+s;case 4:return e+Fr(n)+r+Fr(i)+o+Fr(a)+s+Fr(u)+l;case 5:return e+Fr(n)+r+Fr(i)+o+Fr(a)+s+Fr(u)+l+Fr(c)+h;case 6:return e+Fr(n)+r+Fr(i)+o+Fr(a)+s+Fr(u)+l+Fr(c)+h+Fr(d)+p;case 7:return e+Fr(n)+r+Fr(i)+o+Fr(a)+s+Fr(u)+l+Fr(c)+h+Fr(d)+p+Fr(f)+m;case 8:return e+Fr(n)+r+Fr(i)+o+Fr(a)+s+Fr(u)+l+Fr(c)+h+Fr(d)+p+Fr(f)+m+Fr(v)+g;case 9:return e+Fr(n)+r+Fr(i)+o+Fr(a)+s+Fr(u)+l+Fr(c)+h+Fr(d)+p+Fr(f)+m+Fr(v)+g+Fr(y)+_;default:throw new Error("Does not support more than 9 expressions")}}function Fr(t){return null!=t?t.toString():""}function jr(t,e,n,r,i,o){t|=1;var a=Er(e);return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,flags:t,checkIndex:-1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:a.matchedQueries,matchedQueryIds:a.matchedQueryIds,references:a.references,ngContentIndex:n,childCount:r,bindings:[],bindingFlags:0,outputs:[],element:{ns:null,name:null,attrs:null,template:o?Cr(o):null,componentProvider:null,componentView:null,componentRendererType:null,publicProviders:null,allProviders:null,handleEvent:i||rr},provider:null,text:null,query:null,ngContent:null}}function Ur(t,e,n,i,o,a,s,u,l,c,h,d){var p;void 0===s&&(s=[]),c||(c=rr);var f=Er(n),m=f.matchedQueries,v=f.references,g=f.matchedQueryIds,y=null,_=null;a&&(y=(p=Object(r.__read)(Nr(a),2))[0],_=p[1]),u=u||[];for(var b=new Array(u.length),w=0;w<u.length;w++){var x=Object(r.__read)(u[w],3),E=x[0],S=x[1],T=x[2],M=Object(r.__read)(Nr(S),2),C=M[0],A=M[1],P=void 0,O=void 0;switch(15&E){case 4:O=T;break;case 1:case 8:P=T}b[w]={flags:E,ns:C,name:A,nonMinifiedName:A,securityContext:P,suffix:O}}l=l||[];var R=new Array(l.length);for(w=0;w<l.length;w++){var L=Object(r.__read)(l[w],2);R[w]={type:0,target:L[0],eventName:L[1],propName:null}}var I=(s=s||[]).map(function(t){var e=Object(r.__read)(t,2),n=e[0],i=e[1],o=Object(r.__read)(Nr(n),2);return[o[0],o[1],i]});return d=function(t){if(t&&t.id===sr){var e=null!=t.encapsulation&&t.encapsulation!==st.None||t.styles.length||Object.keys(t.data).length;t.id=e?"c"+cr++:ur}return t&&t.id===ur&&(t=null),t||null}(d),h&&(e|=33554432),{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:e|=1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:m,matchedQueryIds:g,references:v,ngContentIndex:i,childCount:o,bindings:b,bindingFlags:Dr(b),outputs:R,element:{ns:y,name:_,attrs:I,template:null,componentProvider:null,componentView:h||null,componentRendererType:d,publicProviders:null,allProviders:null,handleEvent:c||rr},provider:null,text:null,query:null,ngContent:null}}function Br(t,e,n){var i,o=n.element,a=t.root.selectorOrNode,s=t.renderer;if(t.parent||!a){i=o.name?s.createElement(o.name,o.ns):s.createComment("");var u=Tr(t,e,n);u&&s.appendChild(u,i)}else i=s.selectRootElement(a);if(o.attrs)for(var l=0;l<o.attrs.length;l++){var c=Object(r.__read)(o.attrs[l],3);s.setAttribute(i,c[1],c[2],c[0])}return i}function Gr(t,e,n,r){for(var i=0;i<n.outputs.length;i++){var o=n.outputs[i],a=Vr(t,n.nodeIndex,(h=o.eventName,(c=o.target)?c+":"+h:h)),s=o.target,u=t;"component"===o.target&&(s=null,u=e);var l=u.renderer.listen(s||r,o.eventName,a);t.disposables[n.outputIndex+i]=l}var c,h}function Vr(t,e,n){return function(r){return vr(t,e,n,r)}}function zr(t,e,n,r){if(!dr(t,e,n,r))return!1;var i=e.bindings[n],o=Kn(t,e.nodeIndex),a=o.renderElement,s=i.name;switch(15&i.flags){case 1:!function(t,e,n,r,i,o){var a=e.securityContext,s=a?t.root.sanitizer.sanitize(a,o):o;s=null!=s?s.toString():null;var u=t.renderer;null!=o?u.setAttribute(n,i,s,r):u.removeAttribute(n,i,r)}(t,i,a,i.ns,s,r);break;case 2:!function(t,e,n,r){var i=t.renderer;r?i.addClass(e,n):i.removeClass(e,n)}(t,a,s,r);break;case 4:!function(t,e,n,r,i){var o=t.root.sanitizer.sanitize(Hn.STYLE,i);if(null!=o){o=o.toString();var a=e.suffix;null!=a&&(o+=a)}else o=null;var s=t.renderer;null!=o?s.setStyle(n,r,o):s.removeStyle(n,r)}(t,i,a,s,r);break;case 8:!function(t,e,n,r,i){var o=e.securityContext,a=o?t.root.sanitizer.sanitize(o,i):i;t.renderer.setProperty(n,r,a)}(33554432&e.flags&&32&i.flags?o.componentView:t,i,a,s,r)}return!0}var Hr=new Object,Wr=or(z),qr=or(G),Xr=or(Jt);function Yr(t,e,n,r){return n=L(n),{index:-1,deps:Sr(r,O(e)),flags:t,token:e,value:n}}function Kr(t){for(var e={},n=[],r=!1,i=0;i<t.length;i++){var o=t[i];o.token===gt&&!0===o.value&&(r=!0),1073741824&o.flags&&n.push(o.token),o.index=i,e[or(o.token)]=o}return{factory:null,providersByKey:e,providers:t,modules:n,isRoot:r}}function Zr(t,e,n){void 0===n&&(n=z.THROW_IF_NOT_FOUND);var r,i,o=it(t);try{if(8&e.flags)return e.token;if(2&e.flags&&(n=null),1&e.flags)return t._parent.get(e.token,n);var a=e.tokenKey;switch(a){case Wr:case qr:case Xr:return t}var s=t._def.providersByKey[a];if(s){var u=t._providers[s.index];return void 0===u&&(u=t._providers[s.index]=Qr(t,s)),u===Hr?void 0:u}if(e.token.ngInjectableDef&&(r=t,null!=(i=e.token.ngInjectableDef).providedIn&&(function(t,e){return t._def.modules.indexOf(i.providedIn)>-1}(r)||"root"===i.providedIn&&r._def.isRoot))){var l=t._providers.length;return t._def.providersByKey[e.tokenKey]={flags:5120,value:e.token.ngInjectableDef.factory,deps:[],index:l,token:e.token},t._providers[l]=Hr,t._providers[l]=Qr(t,t._def.providersByKey[e.tokenKey])}return 4&e.flags?n:t._parent.get(e.token,n)}finally{it(o)}}function Qr(t,e){var n;switch(201347067&e.flags){case 512:n=function(t,e,n){var i=n.length;switch(i){case 0:return new e;case 1:return new e(Zr(t,n[0]));case 2:return new e(Zr(t,n[0]),Zr(t,n[1]));case 3:return new e(Zr(t,n[0]),Zr(t,n[1]),Zr(t,n[2]));default:for(var o=new Array(i),a=0;a<i;a++)o[a]=Zr(t,n[a]);return new(e.bind.apply(e,Object(r.__spread)([void 0],o)))}}(t,e.value,e.deps);break;case 1024:n=function(t,e,n){var i=n.length;switch(i){case 0:return e();case 1:return e(Zr(t,n[0]));case 2:return e(Zr(t,n[0]),Zr(t,n[1]));case 3:return e(Zr(t,n[0]),Zr(t,n[1]),Zr(t,n[2]));default:for(var o=Array(i),a=0;a<i;a++)o[a]=Zr(t,n[a]);return e.apply(void 0,Object(r.__spread)(o))}}(t,e.value,e.deps);break;case 2048:n=Zr(t,e.deps[0]);break;case 256:n=e.value}return n===Hr||null==n||"object"!=typeof n||131072&e.flags||"function"!=typeof n.ngOnDestroy||(e.flags|=131072),void 0===n?Hr:n}function Jr(t,e){var n=t.viewContainer._embeddedViews;if((null==e||e>=n.length)&&(e=n.length-1),e<0)return null;var r=n[e];return r.viewContainerParent=null,ni(n,e),$n.dirtyParentQueries(r),ti(r),r}function $r(t,e,n){var r=e?_r(e,e.def.lastRenderRootNode):t.renderElement;Ar(n,2,n.renderer.parentNode(r),n.renderer.nextSibling(r),void 0)}function ti(t){Ar(t,3,null,null,void 0)}function ei(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function ni(t,e){e>=t.length-1?t.pop():t.splice(e,1)}var ri=new Object;function ii(t,e,n,r,i,o){return new oi(t,e,n,r,i,o)}var oi=function(t){function e(e,n,r,i,o,a){var s=t.call(this)||this;return s.selector=e,s.componentType=n,s._inputs=i,s._outputs=o,s.ngContentSelectors=a,s.viewDefFactory=r,s}return Object(r.__extends)(e,t),Object.defineProperty(e.prototype,"inputs",{get:function(){var t=[],e=this._inputs;for(var n in e)t.push({propName:n,templateName:e[n]});return t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"outputs",{get:function(){var t=[];for(var e in this._outputs)t.push({propName:e,templateName:this._outputs[e]});return t},enumerable:!0,configurable:!0}),e.prototype.create=function(t,e,n,r){if(!r)throw new Error("ngModule should be provided");var i=Cr(this.viewDefFactory),o=i.nodes[0].element.componentProvider.nodeIndex,a=$n.createRootView(t,e||[],n,i,r,ri),s=Zn(a,o).instance;return n&&a.renderer.setAttribute(Kn(a,0).renderElement,"ng-version",lt.full),new ai(a,new ci(a),s)},e}(zt),ai=function(t){function e(e,n,r){var i=t.call(this)||this;return i._view=e,i._viewRef=n,i._component=r,i._elDef=i._view.def.nodes[0],i.hostView=n,i.changeDetectorRef=n,i.instance=r,i}return Object(r.__extends)(e,t),Object.defineProperty(e.prototype,"location",{get:function(){return new Le(Kn(this._view,this._elDef.nodeIndex).renderElement)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"injector",{get:function(){return new fi(this._view,this._elDef)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"componentType",{get:function(){return this._component.constructor},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){this._viewRef.destroy()},e.prototype.onDestroy=function(t){this._viewRef.onDestroy(t)},e}(Vt);function si(t,e,n){return new ui(t,e,n)}var ui=function(){function t(t,e,n){this._view=t,this._elDef=e,this._data=n,this._embeddedViews=[]}return Object.defineProperty(t.prototype,"element",{get:function(){return new Le(this._data.renderElement)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"injector",{get:function(){return new fi(this._view,this._elDef)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parentInjector",{get:function(){for(var t=this._view,e=this._elDef.parent;!e&&t;)e=yr(t),t=t.parent;return t?new fi(t,e):new fi(this._view,null)},enumerable:!0,configurable:!0}),t.prototype.clear=function(){for(var t=this._embeddedViews.length-1;t>=0;t--){var e=Jr(this._data,t);$n.destroyView(e)}},t.prototype.get=function(t){var e=this._embeddedViews[t];if(e){var n=new ci(e);return n.attachToViewContainerRef(this),n}return null},Object.defineProperty(t.prototype,"length",{get:function(){return this._embeddedViews.length},enumerable:!0,configurable:!0}),t.prototype.createEmbeddedView=function(t,e,n){var r=t.createEmbeddedView(e||{});return this.insert(r,n),r},t.prototype.createComponent=function(t,e,n,r,i){var o=n||this.parentInjector;i||t instanceof Qt||(i=o.get(Jt));var a=t.create(o,r,void 0,i);return this.insert(a.hostView,e),a},t.prototype.insert=function(t,e){if(t.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");var n,r,i,o,a=t;return i=a._view,o=(n=this._data).viewContainer._embeddedViews,null!==(r=e)&&void 0!==r||(r=o.length),i.viewContainerParent=this._view,ei(o,r,i),function(t,e){var n=gr(e);if(n&&n!==t&&!(16&e.state)){e.state|=16;var r=n.template._projectedViews;r||(r=n.template._projectedViews=[]),r.push(e),function(t,n){if(!(4&n.flags)){e.parent.def.nodeFlags|=4,n.flags|=4;for(var r=n.parent;r;)r.childFlags|=4,r=r.parent}}(0,e.parentNodeDef)}}(n,i),$n.dirtyParentQueries(i),$r(n,r>0?o[r-1]:null,i),a.attachToViewContainerRef(this),t},t.prototype.move=function(t,e){if(t.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");var n,r,i,o,a,s=this._embeddedViews.indexOf(t._view);return i=e,a=(o=(n=this._data).viewContainer._embeddedViews)[r=s],ni(o,r),null==i&&(i=o.length),ei(o,i,a),$n.dirtyParentQueries(a),ti(a),$r(n,i>0?o[i-1]:null,a),t},t.prototype.indexOf=function(t){return this._embeddedViews.indexOf(t._view)},t.prototype.remove=function(t){var e=Jr(this._data,t);e&&$n.destroyView(e)},t.prototype.detach=function(t){var e=Jr(this._data,t);return e?new ci(e):null},t}();function li(t){return new ci(t)}var ci=function(){function t(t){this._view=t,this._viewContainerRef=null,this._appRef=null}return Object.defineProperty(t.prototype,"rootNodes",{get:function(){return Ar(this._view,0,void 0,void 0,t=[]),t;var t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"context",{get:function(){return this._view.context},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"destroyed",{get:function(){return 0!=(128&this._view.state)},enumerable:!0,configurable:!0}),t.prototype.markForCheck=function(){fr(this._view)},t.prototype.detach=function(){this._view.state&=-5},t.prototype.detectChanges=function(){var t=this._view.root.rendererFactory;t.begin&&t.begin();try{$n.checkAndUpdateView(this._view)}finally{t.end&&t.end()}},t.prototype.checkNoChanges=function(){$n.checkNoChangesView(this._view)},t.prototype.reattach=function(){this._view.state|=4},t.prototype.onDestroy=function(t){this._view.disposables||(this._view.disposables=[]),this._view.disposables.push(t)},t.prototype.destroy=function(){this._appRef?this._appRef.detachView(this):this._viewContainerRef&&this._viewContainerRef.detach(this._viewContainerRef.indexOf(this)),$n.destroyView(this._view)},t.prototype.detachFromAppRef=function(){this._appRef=null,ti(this._view),$n.dirtyParentQueries(this._view)},t.prototype.attachToAppRef=function(t){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t},t.prototype.attachToViewContainerRef=function(t){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=t},t}();function hi(t,e){return new di(t,e)}var di=function(t){function e(e,n){var r=t.call(this)||this;return r._parentView=e,r._def=n,r}return Object(r.__extends)(e,t),e.prototype.createEmbeddedView=function(t){return new ci($n.createEmbeddedView(this._parentView,this._def,this._def.element.template,t))},Object.defineProperty(e.prototype,"elementRef",{get:function(){return new Le(Kn(this._parentView,this._def.nodeIndex).renderElement)},enumerable:!0,configurable:!0}),e}(Ue);function pi(t,e){return new fi(t,e)}var fi=function(){function t(t,e){this.view=t,this.elDef=e}return t.prototype.get=function(t,e){return void 0===e&&(e=z.THROW_IF_NOT_FOUND),$n.resolveDep(this.view,this.elDef,!!this.elDef&&0!=(33554432&this.elDef.flags),{flags:0,token:t,tokenKey:or(t)},e)},t}();function mi(t,e){var n=t.def.nodes[e];if(1&n.flags){var r=Kn(t,n.nodeIndex);return n.element.template?r.template:r.renderElement}if(2&n.flags)return Yn(t,n.nodeIndex).renderText;if(20240&n.flags)return Zn(t,n.nodeIndex).instance;throw new Error("Illegal state: read nodeValue for node index "+e)}function vi(t){return new gi(t.renderer)}var gi=function(){function t(t){this.delegate=t}return t.prototype.selectRootElement=function(t){return this.delegate.selectRootElement(t)},t.prototype.createElement=function(t,e){var n=Object(r.__read)(Nr(e),2),i=this.delegate.createElement(n[1],n[0]);return t&&this.delegate.appendChild(t,i),i},t.prototype.createViewRoot=function(t){return t},t.prototype.createTemplateAnchor=function(t){var e=this.delegate.createComment("");return t&&this.delegate.appendChild(t,e),e},t.prototype.createText=function(t,e){var n=this.delegate.createText(e);return t&&this.delegate.appendChild(t,n),n},t.prototype.projectNodes=function(t,e){for(var n=0;n<e.length;n++)this.delegate.appendChild(t,e[n])},t.prototype.attachViewAfter=function(t,e){for(var n=this.delegate.parentNode(t),r=this.delegate.nextSibling(t),i=0;i<e.length;i++)this.delegate.insertBefore(n,e[i],r)},t.prototype.detachView=function(t){for(var e=0;e<t.length;e++){var n=t[e],r=this.delegate.parentNode(n);this.delegate.removeChild(r,n)}},t.prototype.destroyView=function(t,e){for(var n=0;n<e.length;n++)this.delegate.destroyNode(e[n])},t.prototype.listen=function(t,e,n){return this.delegate.listen(t,e,n)},t.prototype.listenGlobal=function(t,e,n){return this.delegate.listen(t,e,n)},t.prototype.setElementProperty=function(t,e,n){this.delegate.setProperty(t,e,n)},t.prototype.setElementAttribute=function(t,e,n){var i=Object(r.__read)(Nr(e),2),o=i[0],a=i[1];null!=n?this.delegate.setAttribute(t,a,n,o):this.delegate.removeAttribute(t,a,o)},t.prototype.setBindingDebugInfo=function(t,e,n){},t.prototype.setElementClass=function(t,e,n){n?this.delegate.addClass(t,e):this.delegate.removeClass(t,e)},t.prototype.setElementStyle=function(t,e,n){null!=n?this.delegate.setStyle(t,e,n):this.delegate.removeStyle(t,e)},t.prototype.invokeElementMethod=function(t,e,n){t[e].apply(t,n)},t.prototype.setText=function(t,e){this.delegate.setValue(t,e)},t.prototype.animate=function(){throw new Error("Renderer.animate is no longer supported!")},t}();function yi(t,e,n,r){return new _i(t,e,n,r)}var _i=function(){function t(t,e,n,r){this._moduleType=t,this._parent=e,this._bootstrapComponents=n,this._def=r,this._destroyListeners=[],this._destroyed=!1,this.injector=this,function(t){for(var e=t._def,n=t._providers=new Array(e.providers.length),r=0;r<e.providers.length;r++){var i=e.providers[r];4096&i.flags||void 0===n[r]&&(n[r]=Qr(t,i))}}(this)}return t.prototype.get=function(t,e,n){void 0===e&&(e=z.THROW_IF_NOT_FOUND),void 0===n&&(n=0);var r=0;return 4&n?r|=1:2&n&&(r|=4),Zr(this,{token:t,tokenKey:or(t),flags:r},e)},Object.defineProperty(t.prototype,"instance",{get:function(){return this.get(this._moduleType)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"componentFactoryResolver",{get:function(){return this.get(Kt)},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){if(this._destroyed)throw new Error("The ng module "+O(this.instance.constructor)+" has already been destroyed.");this._destroyed=!0,function(t,e){for(var n=t._def,r=new Set,i=0;i<n.providers.length;i++)if(131072&n.providers[i].flags){var o=t._providers[i];if(o&&o!==Hr){var a=o.ngOnDestroy;"function"!=typeof a||r.has(o)||(a.apply(o),r.add(o))}}}(this),this._destroyListeners.forEach(function(t){return t()})},t.prototype.onDestroy=function(t){this._destroyListeners.push(t)},t}(),bi=or(function(){}),wi=or(Re),xi=or(Le),Ei=or(Be),Si=or(Ue),Ti=or(Ge),Mi=or(z),Ci=or(G);function Ai(t,e,n,i,o,a,s,u){var l=[];if(s)for(var c in s){var h=Object(r.__read)(s[c],2);l[h[0]]={flags:8,name:c,nonMinifiedName:h[1],ns:null,securityContext:null,suffix:null}}var d=[];if(u)for(var p in u)d.push({type:1,propName:p,target:null,eventName:u[p]});return Ri(t,e|=16384,n,i,o,o,a,l,d)}function Pi(t,e,n){return Ri(-1,t|=16,null,0,e,e,n)}function Oi(t,e,n,r,i){return Ri(-1,t,e,0,n,r,i)}function Ri(t,e,n,r,i,o,a,s,u){var l=Er(n),c=l.matchedQueries,h=l.references,d=l.matchedQueryIds;u||(u=[]),s||(s=[]),o=L(o);var p=Sr(a,O(i));return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:e,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:c,matchedQueryIds:d,references:h,ngContentIndex:-1,childCount:r,bindings:s,bindingFlags:Dr(s),outputs:u,element:null,provider:{token:i,value:o,deps:p},text:null,query:null,ngContent:null}}function Li(t,e){return ki(t,e)}function Ii(t,e){for(var n=t;n.parent&&!br(n);)n=n.parent;return Fi(n.parent,yr(n),!0,e.provider.value,e.provider.deps)}function Ni(t,e){var n=Fi(t,e.parent,(32768&e.flags)>0,e.provider.value,e.provider.deps);if(e.outputs.length)for(var r=0;r<e.outputs.length;r++){var i=e.outputs[r],o=n[i.propName].subscribe(Di(t,e.parent.nodeIndex,i.eventName));t.disposables[e.outputIndex+r]=o.unsubscribe.bind(o)}return n}function Di(t,e,n){return function(r){return vr(t,e,n,r)}}function ki(t,e){var n=(8192&e.flags)>0,i=e.provider;switch(201347067&e.flags){case 512:return Fi(t,e.parent,n,i.value,i.deps);case 1024:return function(t,e,n,i,o){var a=o.length;switch(a){case 0:return i();case 1:return i(Ui(t,e,n,o[0]));case 2:return i(Ui(t,e,n,o[0]),Ui(t,e,n,o[1]));case 3:return i(Ui(t,e,n,o[0]),Ui(t,e,n,o[1]),Ui(t,e,n,o[2]));default:for(var s=Array(a),u=0;u<a;u++)s[u]=Ui(t,e,n,o[u]);return i.apply(void 0,Object(r.__spread)(s))}}(t,e.parent,n,i.value,i.deps);case 2048:return Ui(t,e.parent,n,i.deps[0]);case 256:return i.value}}function Fi(t,e,n,i,o){var a=o.length;switch(a){case 0:return new i;case 1:return new i(Ui(t,e,n,o[0]));case 2:return new i(Ui(t,e,n,o[0]),Ui(t,e,n,o[1]));case 3:return new i(Ui(t,e,n,o[0]),Ui(t,e,n,o[1]),Ui(t,e,n,o[2]));default:for(var s=new Array(a),u=0;u<a;u++)s[u]=Ui(t,e,n,o[u]);return new(i.bind.apply(i,Object(r.__spread)([void 0],s)))}}var ji={};function Ui(t,e,n,r,i){if(void 0===i&&(i=z.THROW_IF_NOT_FOUND),8&r.flags)return r.token;var o=t;2&r.flags&&(i=null);var a=r.tokenKey;a===Ti&&(n=!(!e||!e.element.componentView)),e&&1&r.flags&&(n=!1,e=e.parent);for(var s=t;s;){if(e)switch(a){case bi:return vi(Bi(s,e,n));case wi:return Bi(s,e,n).renderer;case xi:return new Le(Kn(s,e.nodeIndex).renderElement);case Ei:return Kn(s,e.nodeIndex).viewContainer;case Si:if(e.element.template)return Kn(s,e.nodeIndex).template;break;case Ti:return li(Bi(s,e,n));case Mi:case Ci:return pi(s,e);default:var u=(n?e.element.allProviders:e.element.publicProviders)[a];if(u){var l=Zn(s,u.nodeIndex);return l||(l={instance:ki(s,u)},s.nodes[u.nodeIndex]=l),l.instance}}n=br(s),e=yr(s),s=s.parent,4&r.flags&&(s=null)}var c=o.root.injector.get(r.token,ji);return c!==ji||i===ji?c:o.root.ngModule.injector.get(r.token,i)}function Bi(t,e,n){var r;if(n)r=Kn(t,e.nodeIndex).componentView;else for(r=t;r.parent&&!br(r);)r=r.parent;return r}function Gi(t,e,n,r,i,o){if(32768&n.flags){var a=Kn(t,n.parent.nodeIndex).componentView;2&a.def.flags&&(a.state|=8)}if(e.instance[n.bindings[r].name]=i,524288&n.flags){o=o||{};var s=Ye.unwrap(t.oldValues[n.bindingIndex+r]);o[n.bindings[r].nonMinifiedName]=new Ke(s,i,0!=(2&t.state))}return t.oldValues[n.bindingIndex+r]=i,o}function Vi(t,e){if(t.def.nodeFlags&e)for(var n=t.def.nodes,r=0,i=0;i<n.length;i++){var o=n[i],a=o.parent;for(!a&&o.flags&e&&Hi(t,i,o.flags&e,r++),0==(o.childFlags&e)&&(i+=o.childCount);a&&1&a.flags&&i===a.nodeIndex+a.childCount;)a.directChildFlags&e&&(r=zi(t,a,e,r)),a=a.parent}}function zi(t,e,n,r){for(var i=e.nodeIndex+1;i<=e.nodeIndex+e.childCount;i++){var o=t.def.nodes[i];o.flags&n&&Hi(t,i,o.flags&n,r++),i+=o.childCount}return r}function Hi(t,e,n,r){var i=Zn(t,e);if(i){var o=i.instance;o&&($n.setCurrentNode(t,e),1048576&n&&Xn(t,512,r)&&o.ngAfterContentInit(),2097152&n&&o.ngAfterContentChecked(),4194304&n&&Xn(t,768,r)&&o.ngAfterViewInit(),8388608&n&&o.ngAfterViewChecked(),131072&n&&o.ngOnDestroy())}}function Wi(t,e,n){var r=[];for(var i in n)r.push({propName:i,bindingType:n[i]});return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:-1,flags:t,childFlags:0,directChildFlags:0,childMatchedQueries:0,ngContentIndex:-1,matchedQueries:{},matchedQueryIds:0,references:{},childCount:0,bindings:[],bindingFlags:0,outputs:[],element:null,provider:null,text:null,query:{id:e,filterId:xr(e),bindings:r},ngContent:null}}function qi(t){for(var e=t.def.nodeMatchedQueries;t.parent&&wr(t);){var n=t.parentNodeDef;t=t.parent;for(var r=n.nodeIndex+n.childCount,i=0;i<=r;i++)67108864&(o=t.def.nodes[i]).flags&&536870912&o.flags&&(o.query.filterId&e)===o.query.filterId&&Jn(t,i).setDirty(),!(1&o.flags&&i+o.childCount<n.nodeIndex)&&67108864&o.childFlags&&536870912&o.childFlags||(i+=o.childCount)}if(134217728&t.def.nodeFlags)for(i=0;i<t.def.nodes.length;i++){var o;134217728&(o=t.def.nodes[i]).flags&&536870912&o.flags&&Jn(t,i).setDirty(),i+=o.childCount}}function Xi(t,e){var n=Jn(t,e.nodeIndex);if(n.dirty){var r,i=void 0;if(67108864&e.flags){var o=e.parent.parent;i=Yi(t,o.nodeIndex,o.nodeIndex+o.childCount,e.query,[]),r=Zn(t,e.parent.nodeIndex).instance}else 134217728&e.flags&&(i=Yi(t,0,t.def.nodes.length-1,e.query,[]),r=t.component);n.reset(i);for(var a=e.query.bindings,s=!1,u=0;u<a.length;u++){var l=a[u],c=void 0;switch(l.bindingType){case 0:c=n.first;break;case 1:c=n,s=!0}r[l.propName]=c}s&&n.notifyOnChanges()}}function Yi(t,e,n,r,i){for(var o=e;o<=n;o++){var a=t.def.nodes[o],s=a.matchedQueries[r.id];if(null!=s&&i.push(Ki(t,a,s)),1&a.flags&&a.element.template&&(a.element.template.nodeMatchedQueries&r.filterId)===r.filterId){var u=Kn(t,o);if((a.childMatchedQueries&r.filterId)===r.filterId&&(Yi(t,o+1,o+a.childCount,r,i),o+=a.childCount),16777216&a.flags)for(var l=u.viewContainer._embeddedViews,c=0;c<l.length;c++){var h=l[c],d=gr(h);d&&d===u&&Yi(h,0,h.def.nodes.length-1,r,i)}var p=u.template._projectedViews;if(p)for(c=0;c<p.length;c++){var f=p[c];Yi(f,0,f.def.nodes.length-1,r,i)}}(a.childMatchedQueries&r.filterId)!==r.filterId&&(o+=a.childCount)}return i}function Ki(t,e,n){if(null!=n)switch(n){case 1:return Kn(t,e.nodeIndex).renderElement;case 0:return new Le(Kn(t,e.nodeIndex).renderElement);case 2:return Kn(t,e.nodeIndex).template;case 3:return Kn(t,e.nodeIndex).viewContainer;case 4:return Zn(t,e.nodeIndex).instance}}function Zi(t,e,n){var r=Tr(t,e,n);r&&Or(t,n.ngContent.index,1,r,null,void 0)}function Qi(t,e){return $i(128,t,new Array(e+1))}function Ji(t,e){return $i(32,t,new Array(e))}function $i(t,e,n){for(var r=new Array(n.length),i=0;i<n.length;i++){var o=n[i];r[i]={flags:8,name:o,ns:null,nonMinifiedName:o,securityContext:null,suffix:null}}return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:e,flags:t,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:-1,childCount:0,bindings:r,bindingFlags:Dr(r),outputs:[],element:null,provider:null,text:null,query:null,ngContent:null}}function to(t,e,n){for(var r=new Array(n.length-1),i=1;i<n.length;i++)r[i-1]={flags:8,name:null,ns:null,nonMinifiedName:null,securityContext:null,suffix:n[i]};return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:2,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:e,childCount:0,bindings:r,bindingFlags:8,outputs:[],element:null,provider:null,text:{prefix:n[0]},query:null,ngContent:null}}function eo(t,e,n){var r,i=t.renderer;r=i.createText(n.text.prefix);var o=Tr(t,e,n);return o&&i.appendChild(o,r),{renderText:r}}function no(t,e){return(null!=t?t.toString():"")+e.suffix}function ro(t,e,n,r){for(var i=0,o=0,a=0,s=0,u=0,l=null,c=null,h=!1,d=!1,p=null,f=0;f<e.length;f++){var m=e[f];if(m.nodeIndex=f,m.parent=l,m.bindingIndex=i,m.outputIndex=o,m.renderParent=c,a|=m.flags,u|=m.matchedQueryIds,m.element){var v=m.element;v.publicProviders=l?l.element.publicProviders:Object.create(null),v.allProviders=v.publicProviders,h=!1,d=!1,m.element.template&&(u|=m.element.template.nodeMatchedQueries)}if(oo(l,m,e.length),i+=m.bindings.length,o+=m.outputs.length,!c&&3&m.flags&&(p=m),20224&m.flags){h||(h=!0,l.element.publicProviders=Object.create(l.element.publicProviders),l.element.allProviders=l.element.publicProviders);var g=0!=(32768&m.flags);0==(8192&m.flags)||g?l.element.publicProviders[or(m.provider.token)]=m:(d||(d=!0,l.element.allProviders=Object.create(l.element.publicProviders)),l.element.allProviders[or(m.provider.token)]=m),g&&(l.element.componentProvider=m)}if(l?(l.childFlags|=m.flags,l.directChildFlags|=m.flags,l.childMatchedQueries|=m.matchedQueryIds,m.element&&m.element.template&&(l.childMatchedQueries|=m.element.template.nodeMatchedQueries)):s|=m.flags,m.childCount>0)l=m,io(m)||(c=m);else for(;l&&f===l.nodeIndex+l.childCount;){var y=l.parent;y&&(y.childFlags|=l.childFlags,y.childMatchedQueries|=l.childMatchedQueries),c=(l=y)&&io(l)?l.renderParent:l}}return{factory:null,nodeFlags:a,rootNodeFlags:s,nodeMatchedQueries:u,flags:t,nodes:e,updateDirectives:n||rr,updateRenderer:r||rr,handleEvent:function(t,n,r,i){return e[n].element.handleEvent(t,r,i)},bindingCount:i,outputCount:o,lastRenderRootNode:p}}function io(t){return 0!=(1&t.flags)&&null===t.element.name}function oo(t,e,n){var r=e.element&&e.element.template;if(r){if(!r.lastRenderRootNode)throw new Error("Illegal State: Embedded templates without nodes are not allowed!");if(r.lastRenderRootNode&&16777216&r.lastRenderRootNode.flags)throw new Error("Illegal State: Last root node of a template can't have embedded views, at index "+e.nodeIndex+"!")}if(20224&e.flags&&0==(1&(t?t.flags:0)))throw new Error("Illegal State: StaticProvider/Directive nodes need to be children of elements or anchors, at index "+e.nodeIndex+"!");if(e.query){if(67108864&e.flags&&(!t||0==(16384&t.flags)))throw new Error("Illegal State: Content Query nodes need to be children of directives, at index "+e.nodeIndex+"!");if(134217728&e.flags&&t)throw new Error("Illegal State: View Query nodes have to be top level nodes, at index "+e.nodeIndex+"!")}if(e.childCount){var i=t?t.nodeIndex+t.childCount:n-1;if(e.nodeIndex<=i&&e.nodeIndex+e.childCount>i)throw new Error("Illegal State: childCount of node leads outside of parent, at index "+e.nodeIndex+"!")}}function ao(t,e,n,r){var i=lo(t.root,t.renderer,t,e,n);return co(i,t.component,r),ho(i),i}function so(t,e,n){var r=lo(t,t.renderer,null,null,e);return co(r,n,n),ho(r),r}function uo(t,e,n,r){var i,o=e.element.componentRendererType;return i=o?t.root.rendererFactory.createRenderer(r,o):t.root.renderer,lo(t.root,i,t,e.element.componentProvider,n)}function lo(t,e,n,r,i){var o=new Array(i.nodes.length),a=i.outputCount?new Array(i.outputCount):null;return{def:i,parent:n,viewContainerParent:null,parentNodeDef:r,context:null,component:null,nodes:o,state:13,root:t,renderer:e,oldValues:new Array(i.bindingCount),disposables:a,initIndex:-1}}function co(t,e,n){t.component=e,t.context=n}function ho(t){var e;br(t)&&(e=Kn(t.parent,t.parentNodeDef.parent.nodeIndex).renderElement);for(var n=t.def,r=t.nodes,i=0;i<n.nodes.length;i++){var o=n.nodes[i];$n.setCurrentNode(t,i);var a=void 0;switch(201347067&o.flags){case 1:var s=Br(t,e,o),u=void 0;if(33554432&o.flags){var l=Cr(o.element.componentView);u=$n.createComponentView(t,o,l,s)}Gr(t,u,o,s),a={renderElement:s,componentView:u,viewContainer:null,template:o.element.template?hi(t,o):void 0},16777216&o.flags&&(a.viewContainer=si(t,o,a));break;case 2:a=eo(t,e,o);break;case 512:case 1024:case 2048:case 256:(a=r[i])||4096&o.flags||(a={instance:Li(t,o)});break;case 16:a={instance:Ii(t,o)};break;case 16384:(a=r[i])||(a={instance:Ni(t,o)}),32768&o.flags&&co(Kn(t,o.parent.nodeIndex).componentView,a.instance,a.instance);break;case 32:case 64:case 128:a={value:void 0};break;case 67108864:case 134217728:a=new Ne;break;case 8:Zi(t,e,o),a=void 0}r[i]=a}wo(t,bo.CreateViewNodes),To(t,201326592,268435456,0)}function po(t){vo(t),$n.updateDirectives(t,1),xo(t,bo.CheckNoChanges),$n.updateRenderer(t,1),wo(t,bo.CheckNoChanges),t.state&=-97}function fo(t){1&t.state?(t.state&=-2,t.state|=2):t.state&=-3,qn(t,0,256),vo(t),$n.updateDirectives(t,0),xo(t,bo.CheckAndUpdate),To(t,67108864,536870912,0);var e=qn(t,256,512);Vi(t,2097152|(e?1048576:0)),$n.updateRenderer(t,0),wo(t,bo.CheckAndUpdate),To(t,134217728,536870912,0),Vi(t,8388608|((e=qn(t,512,768))?4194304:0)),2&t.def.flags&&(t.state&=-9),t.state&=-97,qn(t,768,1024)}function mo(t,e,n,i,o,a,s,u,l,c,h,d,p){return 0===n?function(t,e,n,r,i,o,a,s,u,l,c,h){switch(201347067&e.flags){case 1:return function(t,e,n,r,i,o,a,s,u,l,c,h){var d=e.bindings.length,p=!1;return d>0&&zr(t,e,0,n)&&(p=!0),d>1&&zr(t,e,1,r)&&(p=!0),d>2&&zr(t,e,2,i)&&(p=!0),d>3&&zr(t,e,3,o)&&(p=!0),d>4&&zr(t,e,4,a)&&(p=!0),d>5&&zr(t,e,5,s)&&(p=!0),d>6&&zr(t,e,6,u)&&(p=!0),d>7&&zr(t,e,7,l)&&(p=!0),d>8&&zr(t,e,8,c)&&(p=!0),d>9&&zr(t,e,9,h)&&(p=!0),p}(t,e,n,r,i,o,a,s,u,l,c,h);case 2:return function(t,e,n,r,i,o,a,s,u,l,c,h){var d=!1,p=e.bindings,f=p.length;if(f>0&&dr(t,e,0,n)&&(d=!0),f>1&&dr(t,e,1,r)&&(d=!0),f>2&&dr(t,e,2,i)&&(d=!0),f>3&&dr(t,e,3,o)&&(d=!0),f>4&&dr(t,e,4,a)&&(d=!0),f>5&&dr(t,e,5,s)&&(d=!0),f>6&&dr(t,e,6,u)&&(d=!0),f>7&&dr(t,e,7,l)&&(d=!0),f>8&&dr(t,e,8,c)&&(d=!0),f>9&&dr(t,e,9,h)&&(d=!0),d){var m=e.text.prefix;f>0&&(m+=no(n,p[0])),f>1&&(m+=no(r,p[1])),f>2&&(m+=no(i,p[2])),f>3&&(m+=no(o,p[3])),f>4&&(m+=no(a,p[4])),f>5&&(m+=no(s,p[5])),f>6&&(m+=no(u,p[6])),f>7&&(m+=no(l,p[7])),f>8&&(m+=no(c,p[8])),f>9&&(m+=no(h,p[9]));var v=Yn(t,e.nodeIndex).renderText;t.renderer.setValue(v,m)}return d}(t,e,n,r,i,o,a,s,u,l,c,h);case 16384:return function(t,e,n,r,i,o,a,s,u,l,c,h){var d=Zn(t,e.nodeIndex),p=d.instance,f=!1,m=void 0,v=e.bindings.length;return v>0&&hr(t,e,0,n)&&(f=!0,m=Gi(t,d,e,0,n,m)),v>1&&hr(t,e,1,r)&&(f=!0,m=Gi(t,d,e,1,r,m)),v>2&&hr(t,e,2,i)&&(f=!0,m=Gi(t,d,e,2,i,m)),v>3&&hr(t,e,3,o)&&(f=!0,m=Gi(t,d,e,3,o,m)),v>4&&hr(t,e,4,a)&&(f=!0,m=Gi(t,d,e,4,a,m)),v>5&&hr(t,e,5,s)&&(f=!0,m=Gi(t,d,e,5,s,m)),v>6&&hr(t,e,6,u)&&(f=!0,m=Gi(t,d,e,6,u,m)),v>7&&hr(t,e,7,l)&&(f=!0,m=Gi(t,d,e,7,l,m)),v>8&&hr(t,e,8,c)&&(f=!0,m=Gi(t,d,e,8,c,m)),v>9&&hr(t,e,9,h)&&(f=!0,m=Gi(t,d,e,9,h,m)),m&&p.ngOnChanges(m),65536&e.flags&&Xn(t,256,e.nodeIndex)&&p.ngOnInit(),262144&e.flags&&p.ngDoCheck(),f}(t,e,n,r,i,o,a,s,u,l,c,h);case 32:case 64:case 128:return function(t,e,n,r,i,o,a,s,u,l,c,h){var d=e.bindings,p=!1,f=d.length;if(f>0&&dr(t,e,0,n)&&(p=!0),f>1&&dr(t,e,1,r)&&(p=!0),f>2&&dr(t,e,2,i)&&(p=!0),f>3&&dr(t,e,3,o)&&(p=!0),f>4&&dr(t,e,4,a)&&(p=!0),f>5&&dr(t,e,5,s)&&(p=!0),f>6&&dr(t,e,6,u)&&(p=!0),f>7&&dr(t,e,7,l)&&(p=!0),f>8&&dr(t,e,8,c)&&(p=!0),f>9&&dr(t,e,9,h)&&(p=!0),p){var m=Qn(t,e.nodeIndex),v=void 0;switch(201347067&e.flags){case 32:v=new Array(d.length),f>0&&(v[0]=n),f>1&&(v[1]=r),f>2&&(v[2]=i),f>3&&(v[3]=o),f>4&&(v[4]=a),f>5&&(v[5]=s),f>6&&(v[6]=u),f>7&&(v[7]=l),f>8&&(v[8]=c),f>9&&(v[9]=h);break;case 64:v={},f>0&&(v[d[0].name]=n),f>1&&(v[d[1].name]=r),f>2&&(v[d[2].name]=i),f>3&&(v[d[3].name]=o),f>4&&(v[d[4].name]=a),f>5&&(v[d[5].name]=s),f>6&&(v[d[6].name]=u),f>7&&(v[d[7].name]=l),f>8&&(v[d[8].name]=c),f>9&&(v[d[9].name]=h);break;case 128:var g=n;switch(f){case 1:v=g.transform(n);break;case 2:v=g.transform(r);break;case 3:v=g.transform(r,i);break;case 4:v=g.transform(r,i,o);break;case 5:v=g.transform(r,i,o,a);break;case 6:v=g.transform(r,i,o,a,s);break;case 7:v=g.transform(r,i,o,a,s,u);break;case 8:v=g.transform(r,i,o,a,s,u,l);break;case 9:v=g.transform(r,i,o,a,s,u,l,c);break;case 10:v=g.transform(r,i,o,a,s,u,l,c,h)}}m.value=v}return p}(t,e,n,r,i,o,a,s,u,l,c,h);default:throw"unreachable"}}(t,e,i,o,a,s,u,l,c,h,d,p):function(t,e,n){switch(201347067&e.flags){case 1:return function(t,e,n){for(var r=!1,i=0;i<n.length;i++)zr(t,e,i,n[i])&&(r=!0);return r}(t,e,n);case 2:return function(t,e,n){for(var r=e.bindings,i=!1,o=0;o<n.length;o++)dr(t,e,o,n[o])&&(i=!0);if(i){var a="";for(o=0;o<n.length;o++)a+=no(n[o],r[o]);a=e.text.prefix+a;var s=Yn(t,e.nodeIndex).renderText;t.renderer.setValue(s,a)}return i}(t,e,n);case 16384:return function(t,e,n){for(var r=Zn(t,e.nodeIndex),i=r.instance,o=!1,a=void 0,s=0;s<n.length;s++)hr(t,e,s,n[s])&&(o=!0,a=Gi(t,r,e,s,n[s],a));return a&&i.ngOnChanges(a),65536&e.flags&&Xn(t,256,e.nodeIndex)&&i.ngOnInit(),262144&e.flags&&i.ngDoCheck(),o}(t,e,n);case 32:case 64:case 128:return function(t,e,n){for(var i=e.bindings,o=!1,a=0;a<n.length;a++)dr(t,e,a,n[a])&&(o=!0);if(o){var s=Qn(t,e.nodeIndex),u=void 0;switch(201347067&e.flags){case 32:u=n;break;case 64:for(u={},a=0;a<n.length;a++)u[i[a].name]=n[a];break;case 128:var l=n[0],c=n.slice(1);u=l.transform.apply(l,Object(r.__spread)(c))}s.value=u}return o}(t,e,n);default:throw"unreachable"}}(t,e,i)}function vo(t){var e=t.def;if(4&e.nodeFlags)for(var n=0;n<e.nodes.length;n++){var r=e.nodes[n];if(4&r.flags){var i=Kn(t,n).template._projectedViews;if(i)for(var o=0;o<i.length;o++){var a=i[o];a.state|=32,mr(a,t)}}else 0==(4&r.childFlags)&&(n+=r.childCount)}}function go(t,e,n,r,i,o,a,s,u,l,c,h,d){return 0===n?function(t,e,n,r,i,o,a,s,u,l,c,h){var d=e.bindings.length;d>0&&pr(t,e,0,n),d>1&&pr(t,e,1,r),d>2&&pr(t,e,2,i),d>3&&pr(t,e,3,o),d>4&&pr(t,e,4,a),d>5&&pr(t,e,5,s),d>6&&pr(t,e,6,u),d>7&&pr(t,e,7,l),d>8&&pr(t,e,8,c),d>9&&pr(t,e,9,h)}(t,e,r,i,o,a,s,u,l,c,h,d):function(t,e,n){for(var r=0;r<n.length;r++)pr(t,e,r,n[r])}(t,e,r),!1}function yo(t,e){if(Jn(t,e.nodeIndex).dirty)throw tr($n.createDebugContext(t,e.nodeIndex),"Query "+e.query.id+" not dirty","Query "+e.query.id+" dirty",0!=(1&t.state))}function _o(t){if(!(128&t.state)){if(xo(t,bo.Destroy),wo(t,bo.Destroy),Vi(t,131072),t.disposables)for(var e=0;e<t.disposables.length;e++)t.disposables[e]();!function(t){if(16&t.state){var e=gr(t);if(e){var n=e.template._projectedViews;n&&(ni(n,n.indexOf(t)),$n.dirtyParentQueries(t))}}}(t),t.renderer.destroyNode&&function(t){for(var e=t.def.nodes.length,n=0;n<e;n++){var r=t.def.nodes[n];1&r.flags?t.renderer.destroyNode(Kn(t,n).renderElement):2&r.flags?t.renderer.destroyNode(Yn(t,n).renderText):(67108864&r.flags||134217728&r.flags)&&Jn(t,n).destroy()}}(t),br(t)&&t.renderer.destroy(),t.state|=128}}var bo=function(t){return t[t.CreateViewNodes=0]="CreateViewNodes",t[t.CheckNoChanges=1]="CheckNoChanges",t[t.CheckNoChangesProjectedViews=2]="CheckNoChangesProjectedViews",t[t.CheckAndUpdate=3]="CheckAndUpdate",t[t.CheckAndUpdateProjectedViews=4]="CheckAndUpdateProjectedViews",t[t.Destroy=5]="Destroy",t}({});function wo(t,e){var n=t.def;if(33554432&n.nodeFlags)for(var r=0;r<n.nodes.length;r++){var i=n.nodes[r];33554432&i.flags?Eo(Kn(t,r).componentView,e):0==(33554432&i.childFlags)&&(r+=i.childCount)}}function xo(t,e){var n=t.def;if(16777216&n.nodeFlags)for(var r=0;r<n.nodes.length;r++){var i=n.nodes[r];if(16777216&i.flags)for(var o=Kn(t,r).viewContainer._embeddedViews,a=0;a<o.length;a++)Eo(o[a],e);else 0==(16777216&i.childFlags)&&(r+=i.childCount)}}function Eo(t,e){var n=t.state;switch(e){case bo.CheckNoChanges:0==(128&n)&&(12==(12&n)?po(t):64&n&&So(t,bo.CheckNoChangesProjectedViews));break;case bo.CheckNoChangesProjectedViews:0==(128&n)&&(32&n?po(t):64&n&&So(t,e));break;case bo.CheckAndUpdate:0==(128&n)&&(12==(12&n)?fo(t):64&n&&So(t,bo.CheckAndUpdateProjectedViews));break;case bo.CheckAndUpdateProjectedViews:0==(128&n)&&(32&n?fo(t):64&n&&So(t,e));break;case bo.Destroy:_o(t);break;case bo.CreateViewNodes:ho(t)}}function So(t,e){xo(t,e),wo(t,e)}function To(t,e,n,r){if(t.def.nodeFlags&e&&t.def.nodeFlags&n)for(var i=t.def.nodes.length,o=0;o<i;o++){var a=t.def.nodes[o];if(a.flags&e&&a.flags&n)switch($n.setCurrentNode(t,a.nodeIndex),r){case 0:Xi(t,a);break;case 1:yo(t,a)}a.childFlags&e&&a.childFlags&n||(o+=a.childCount)}}var Mo=!1;function Co(t,e,n,r,i,o){return so(Po(t,i,i.injector.get(Pe),e,n),r,o)}function Ao(t,e,n,r,i,o){var a=i.injector.get(Pe),s=Po(t,i,new la(a),e,n),u=Uo(r);return sa(Yo.create,so,null,[s,u,o])}function Po(t,e,n,r,i){var o=e.injector.get(Wn),a=e.injector.get(vt);return{ngModule:e,injector:t,projectableNodes:r,selectorOrNode:i,sanitizer:o,rendererFactory:n,renderer:n.createRenderer(null,null),errorHandler:a}}function Oo(t,e,n,r){var i=Uo(n);return sa(Yo.create,ao,null,[t,e,i,r])}function Ro(t,e,n,r){return n=Do.get(e.element.componentProvider.provider.token)||Uo(n),sa(Yo.create,uo,null,[t,e,n,r])}function Lo(t,e,n,r){return yi(t,e,n,function(t){var e=function(t){var e=!1,n=!1;return 0===Io.size?{hasOverrides:e,hasDeprecatedOverrides:n}:(t.providers.forEach(function(t){var r=Io.get(t.token);3840&t.flags&&r&&(e=!0,n=n||r.deprecatedBehavior)}),t.modules.forEach(function(t){No.forEach(function(r,i){i.ngInjectableDef.providedIn===t&&(e=!0,n=n||r.deprecatedBehavior)})}),{hasOverrides:e,hasDeprecatedOverrides:n})}(t),n=e.hasDeprecatedOverrides;return e.hasOverrides?(function(t){for(var e=0;e<t.providers.length;e++){var r=t.providers[e];n&&(r.flags|=4096);var i=Io.get(r.token);i&&(r.flags=-3841&r.flags|i.flags,r.deps=Sr(i.deps),r.value=i.value)}if(No.size>0){var o=new Set(t.modules);No.forEach(function(e,r){if(o.has(r.ngInjectableDef.providedIn)){var i={token:r,flags:e.flags|(n?4096:0),deps:Sr(e.deps),value:e.value,index:t.providers.length};t.providers.push(i),t.providersByKey[or(r)]=i}})}}(t=t.factory(function(){return rr})),t):t}(r))}var Io=new Map,No=new Map,Do=new Map;function ko(t){Io.set(t.token,t),"function"==typeof t.token&&t.token.ngInjectableDef&&"function"==typeof t.token.ngInjectableDef.providedIn&&No.set(t.token,t)}function Fo(t,e){var n=Cr(Cr(e.viewDefFactory).nodes[0].element.componentView);Do.set(t,n)}function jo(){Io.clear(),No.clear(),Do.clear()}function Uo(t){if(0===Io.size)return t;var e=function(t){for(var e=[],n=null,r=0;r<t.nodes.length;r++){var i=t.nodes[r];1&i.flags&&(n=i),n&&3840&i.flags&&Io.has(i.provider.token)&&(e.push(n.nodeIndex),n=null)}return e}(t);if(0===e.length)return t;t=t.factory(function(){return rr});for(var n=0;n<e.length;n++)r(t,e[n]);return t;function r(t,e){for(var n=e+1;n<t.nodes.length;n++){var r=t.nodes[n];if(1&r.flags)return;if(3840&r.flags){var i=r.provider,o=Io.get(i.token);o&&(r.flags=-3841&r.flags|o.flags,i.deps=Sr(o.deps),i.value=o.value)}}}}function Bo(t,e,n,r,i,o,a,s,u,l,c,h,d){var p=t.def.nodes[e];return mo(t,p,n,r,i,o,a,s,u,l,c,h,d),224&p.flags?Qn(t,e).value:void 0}function Go(t,e,n,r,i,o,a,s,u,l,c,h,d){var p=t.def.nodes[e];return go(t,p,n,r,i,o,a,s,u,l,c,h,d),224&p.flags?Qn(t,e).value:void 0}function Vo(t){return sa(Yo.detectChanges,fo,null,[t])}function zo(t){return sa(Yo.checkNoChanges,po,null,[t])}function Ho(t){return sa(Yo.destroy,_o,null,[t])}var Wo,qo,Xo,Yo=function(t){return t[t.create=0]="create",t[t.detectChanges=1]="detectChanges",t[t.checkNoChanges=2]="checkNoChanges",t[t.destroy=3]="destroy",t[t.handleEvent=4]="handleEvent",t}({});function Ko(t,e){qo=t,Xo=e}function Zo(t,e,n,r){return Ko(t,e),sa(Yo.handleEvent,t.def.handleEvent,null,[t,e,n,r])}function Qo(t,e){if(128&t.state)throw nr(Yo[Wo]);return Ko(t,ra(t,0)),t.def.updateDirectives(function(t,n,r){for(var i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var a=t.def.nodes[n];return 0===e?$o(t,a,r,i):ta(t,a,r,i),16384&a.flags&&Ko(t,ra(t,n)),224&a.flags?Qn(t,a.nodeIndex).value:void 0},t)}function Jo(t,e){if(128&t.state)throw nr(Yo[Wo]);return Ko(t,ia(t,0)),t.def.updateRenderer(function(t,n,r){for(var i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var a=t.def.nodes[n];return 0===e?$o(t,a,r,i):ta(t,a,r,i),3&a.flags&&Ko(t,ia(t,n)),224&a.flags?Qn(t,a.nodeIndex).value:void 0},t)}function $o(t,e,n,i){if(mo.apply(void 0,Object(r.__spread)([t,e,n],i))){var o=1===n?i[0]:i;if(16384&e.flags){for(var a={},s=0;s<e.bindings.length;s++){var u=e.bindings[s],l=o[s];8&u.flags&&(a[(p=u.nonMinifiedName,"ng-reflect-"+(p=p.replace(/[$@]/g,"_").replace(ea,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"-"+t[1].toLowerCase()})))]=na(l))}var c=e.parent,h=Kn(t,c.nodeIndex).renderElement;if(c.element.name)for(var d in a)null!=(l=a[d])?t.renderer.setAttribute(h,d,l):t.renderer.removeAttribute(h,d);else t.renderer.setValue(h,"bindings="+JSON.stringify(a,null,2))}}var p}function ta(t,e,n,i){go.apply(void 0,Object(r.__spread)([t,e,n],i))}var ea=/([A-Z])/g;function na(t){try{return null!=t?t.toString().slice(0,30):t}catch(t){return"[ERROR] Exception while trying to serialize the value"}}function ra(t,e){for(var n=e;n<t.def.nodes.length;n++){var r=t.def.nodes[n];if(16384&r.flags&&r.bindings&&r.bindings.length)return n}return null}function ia(t,e){for(var n=e;n<t.def.nodes.length;n++){var r=t.def.nodes[n];if(3&r.flags&&r.bindings&&r.bindings.length)return n}return null}var oa=function(){function t(t,e){this.view=t,this.nodeIndex=e,null==e&&(this.nodeIndex=e=0),this.nodeDef=t.def.nodes[e];for(var n=this.nodeDef,r=t;n&&0==(1&n.flags);)n=n.parent;if(!n)for(;!n&&r;)n=yr(r),r=r.parent;this.elDef=n,this.elView=r}return Object.defineProperty(t.prototype,"elOrCompView",{get:function(){return Kn(this.elView,this.elDef.nodeIndex).componentView||this.view},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"injector",{get:function(){return pi(this.elView,this.elDef)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"component",{get:function(){return this.elOrCompView.component},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"context",{get:function(){return this.elOrCompView.context},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"providerTokens",{get:function(){var t=[];if(this.elDef)for(var e=this.elDef.nodeIndex+1;e<=this.elDef.nodeIndex+this.elDef.childCount;e++){var n=this.elView.def.nodes[e];20224&n.flags&&t.push(n.provider.token),e+=n.childCount}return t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"references",{get:function(){var t={};if(this.elDef){aa(this.elView,this.elDef,t);for(var e=this.elDef.nodeIndex+1;e<=this.elDef.nodeIndex+this.elDef.childCount;e++){var n=this.elView.def.nodes[e];20224&n.flags&&aa(this.elView,n,t),e+=n.childCount}}return t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"componentRenderElement",{get:function(){var t=function(t){for(;t&&!br(t);)t=t.parent;return t.parent?Kn(t.parent,yr(t).nodeIndex):null}(this.elOrCompView);return t?t.renderElement:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"renderNode",{get:function(){return 2&this.nodeDef.flags?_r(this.view,this.nodeDef):_r(this.elView,this.elDef)},enumerable:!0,configurable:!0}),t.prototype.logError=function(t){for(var e,n,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];2&this.nodeDef.flags?(e=this.view.def,n=this.nodeDef.nodeIndex):(e=this.elView.def,n=this.elDef.nodeIndex);var a=function(t,e){for(var n=-1,r=0;r<=e;r++)3&t.nodes[r].flags&&n++;return n}(e,n),s=-1;e.factory(function(){var e;return++s===a?(e=t.error).bind.apply(e,Object(r.__spread)([t],i)):rr}),s<a&&(t.error("Illegal state: the ViewDefinitionFactory did not call the logger!"),t.error.apply(t,Object(r.__spread)(i)))},t}();function aa(t,e,n){for(var r in e.references)n[r]=Ki(t,e,e.references[r])}function sa(t,e,n,r){var i=Wo,o=qo,a=Xo;try{Wo=t;var s=e.apply(n,r);return qo=o,Xo=a,Wo=i,s}catch(t){if(pt(t)||!qo)throw t;throw function(t,e){return t instanceof Error||(t=new Error(t.toString())),er(t,e),t}(t,ua())}}function ua(){return qo?new oa(qo,Xo):null}var la=function(){function t(t){this.delegate=t}return t.prototype.createRenderer=function(t,e){return new ca(this.delegate.createRenderer(t,e))},t.prototype.begin=function(){this.delegate.begin&&this.delegate.begin()},t.prototype.end=function(){this.delegate.end&&this.delegate.end()},t.prototype.whenRenderingDone=function(){return this.delegate.whenRenderingDone?this.delegate.whenRenderingDone():Promise.resolve(null)},t}(),ca=function(){function t(t){this.delegate=t,this.data=this.delegate.data}return t.prototype.destroyNode=function(t){!function(t){He.delete(t.nativeNode)}(We(t)),this.delegate.destroyNode&&this.delegate.destroyNode(t)},t.prototype.destroy=function(){this.delegate.destroy()},t.prototype.createElement=function(t,e){var n=this.delegate.createElement(t,e),r=ua();if(r){var i=new ze(n,null,r);i.name=t,qe(i)}return n},t.prototype.createComment=function(t){var e=this.delegate.createComment(t),n=ua();return n&&qe(new Ve(e,null,n)),e},t.prototype.createText=function(t){var e=this.delegate.createText(t),n=ua();return n&&qe(new Ve(e,null,n)),e},t.prototype.appendChild=function(t,e){var n=We(t),r=We(e);n&&r&&n instanceof ze&&n.addChild(r),this.delegate.appendChild(t,e)},t.prototype.insertBefore=function(t,e,n){var r=We(t),i=We(e),o=We(n);r&&i&&r instanceof ze&&r.insertBefore(o,i),this.delegate.insertBefore(t,e,n)},t.prototype.removeChild=function(t,e){var n=We(t),r=We(e);n&&r&&n instanceof ze&&n.removeChild(r),this.delegate.removeChild(t,e)},t.prototype.selectRootElement=function(t){var e=this.delegate.selectRootElement(t),n=ua();return n&&qe(new ze(e,null,n)),e},t.prototype.setAttribute=function(t,e,n,r){var i=We(t);i&&i instanceof ze&&(i.attributes[r?r+":"+e:e]=n),this.delegate.setAttribute(t,e,n,r)},t.prototype.removeAttribute=function(t,e,n){var r=We(t);r&&r instanceof ze&&(r.attributes[n?n+":"+e:e]=null),this.delegate.removeAttribute(t,e,n)},t.prototype.addClass=function(t,e){var n=We(t);n&&n instanceof ze&&(n.classes[e]=!0),this.delegate.addClass(t,e)},t.prototype.removeClass=function(t,e){var n=We(t);n&&n instanceof ze&&(n.classes[e]=!1),this.delegate.removeClass(t,e)},t.prototype.setStyle=function(t,e,n,r){var i=We(t);i&&i instanceof ze&&(i.styles[e]=n),this.delegate.setStyle(t,e,n,r)},t.prototype.removeStyle=function(t,e,n){var r=We(t);r&&r instanceof ze&&(r.styles[e]=null),this.delegate.removeStyle(t,e,n)},t.prototype.setProperty=function(t,e,n){var r=We(t);r&&r instanceof ze&&(r.properties[e]=n),this.delegate.setProperty(t,e,n)},t.prototype.listen=function(t,e,n){if("string"!=typeof t){var r=We(t);r&&r.listeners.push(new function(t,e){this.name=t,this.callback=e}(e,n))}return this.delegate.listen(t,e,n)},t.prototype.parentNode=function(t){return this.delegate.parentNode(t)},t.prototype.nextSibling=function(t){return this.delegate.nextSibling(t)},t.prototype.setValue=function(t,e){return this.delegate.setValue(t,e)},t}();function ha(t,e,n){return new da(t,e,n)}var da=function(t){function e(e,n,r){var i=t.call(this)||this;return i.moduleType=e,i._bootstrapComponents=n,i._ngModuleDefFactory=r,i}return Object(r.__extends)(e,t),e.prototype.create=function(t){!function(){if(!Mo){Mo=!0;var t=we()?{setCurrentNode:Ko,createRootView:Ao,createEmbeddedView:Oo,createComponentView:Ro,createNgModuleRef:Lo,overrideProvider:ko,overrideComponentView:Fo,clearOverrides:jo,checkAndUpdateView:Vo,checkNoChangesView:zo,destroyView:Ho,createDebugContext:function(t,e){return new oa(t,e)},handleEvent:Zo,updateDirectives:Qo,updateRenderer:Jo}:{setCurrentNode:function(){},createRootView:Co,createEmbeddedView:ao,createComponentView:uo,createNgModuleRef:yi,overrideProvider:rr,overrideComponentView:rr,clearOverrides:rr,checkAndUpdateView:fo,checkNoChangesView:po,destroyView:_o,createDebugContext:function(t,e){return new oa(t,e)},handleEvent:function(t,e,n,r){return t.def.handleEvent(t,e,n,r)},updateDirectives:function(t,e){return t.def.updateDirectives(0===e?Bo:Go,t)},updateRenderer:function(t,e){return t.def.updateRenderer(0===e?Bo:Go,t)}};$n.setCurrentNode=t.setCurrentNode,$n.createRootView=t.createRootView,$n.createEmbeddedView=t.createEmbeddedView,$n.createComponentView=t.createComponentView,$n.createNgModuleRef=t.createNgModuleRef,$n.overrideProvider=t.overrideProvider,$n.overrideComponentView=t.overrideComponentView,$n.clearOverrides=t.clearOverrides,$n.checkAndUpdateView=t.checkAndUpdateView,$n.checkNoChangesView=t.checkNoChangesView,$n.destroyView=t.destroyView,$n.resolveDep=Ui,$n.createDebugContext=t.createDebugContext,$n.handleEvent=t.handleEvent,$n.updateDirectives=t.updateDirectives,$n.updateRenderer=t.updateRenderer,$n.dirtyParentQueries=qi}}();var e=function(t){var e=Array.from(t.providers),n=Array.from(t.modules),r={};for(var i in t.providersByKey)r[i]=t.providersByKey[i];return{factory:t.factory,isRoot:t.isRoot,providers:e,modules:n,providersByKey:r}}(Cr(this._ngModuleDefFactory));return $n.createNgModuleRef(this.moduleType,t||z.NULL,this._bootstrapComponents,e)},e}($t);function pa(t,e,n){t!=e&&ma(n)}function fa(t,e){null==t&&ma(e)}function ma(t){throw new Error("ASSERTION ERROR: "+t)}var va=16,ga=0,ya=1,_a=2,ba=3,wa=4,xa=5,Ea=6,Sa=7,Ta=8,Ma=9,Ca=10,Aa=11,Pa=14;function Oa(t,e,n){t.afterContentInit&&(e.contentHooks||(e.contentHooks=[])).push(n,t.afterContentInit),t.afterContentChecked&&((e.contentHooks||(e.contentHooks=[])).push(n,t.afterContentChecked),(e.contentCheckHooks||(e.contentCheckHooks=[])).push(n,t.afterContentChecked))}function Ra(t,e,n){t.afterViewInit&&(e.viewHooks||(e.viewHooks=[])).push(n,t.afterViewInit),t.afterViewChecked&&((e.viewHooks||(e.viewHooks=[])).push(n,t.afterViewChecked),(e.viewCheckHooks||(e.viewCheckHooks=[])).push(n,t.afterViewChecked))}function La(t,e,n){null!=t.onDestroy&&(e.destroyHooks||(e.destroyHooks=[])).push(n,t.onDestroy)}function Ia(t,e,n){16&t[wa]&&(Na(t[Sa],e.initHooks,e.checkHooks,n),t[wa]&=-17)}function Na(t,e,n,r){var i=r?e:n;i&&Da(t,i)}function Da(t,e){for(var n=0;n<e.length;n+=2)e[n+1].call(t[e[n]])}"undefined"==typeof ngDevMode||ngDevMode;var ka=0,Fa=4,ja="ngProjectAs";function Ua(t){return!!t.listen}var Ba={createRenderer:function(t,e){return document}};function Ga(t,e){fa(t,"should be called with a node"),pa(t.tNode.type,e,"should be a "+function(t){return 1==t?"Projection":0==t?"Container":2==t?"View":3==t?"Element":"<unknown>"}(e))}function Va(t){return Array.isArray(t)?t[0]:t}function za(t){if(2===t.tNode.type){var e=t.data;return e[_a]?e[_a][xa]:null}return t.tNode.next?t.view[t.tNode.next.index]:null}function Ha(t){return t.tNode.child?Va((2===t.tNode.type?t.data:t.view)[t.tNode.child.index]):null}function Wa(t){if(-1===t.tNode.index&&2===t.tNode.type){var e=t.data[Pa];return-1===e?null:t.view[e].dynamicLContainerNode}var n=t.tNode.parent;return Va(n?t.view[n.index]:t.view[xa])}var qa=[];function Xa(t){for(var e=t[xa];2===e.tNode.type;)ngDevMode&&fa(t[ya],"lViewData.parent"),e=(t=t[ya])[xa];return ngDevMode&&Ga(e,3),ngDevMode&&fa(e.data,"node.data"),e}function Ya(t,e,n,r,i){0===t?Ua(e)?e.insertBefore(n,r,i):n.insertBefore(r,i,!0):1===t?Ua(e)?e.removeChild(n,r):n.removeChild(r):2===t&&(ngDevMode&&ngDevMode.rendererDestroyNode++,e.destroyNode(r))}function Ka(t){if(-1===t[ga].childIndex)return null;var e=t[t[ga].childIndex];return e.data?e.data:e.dynamicLContainerNode.data}function Za(t,e){var n;return(n=t[xa])&&2===n.tNode.type?Wa(n).data:t[ya]===e?null:t[ya]}function Qa(t){if(t[ga]){var e=t;!function(t){var e=t[ga].cleanup;if(null!=e){for(var n=0;n<e.length-1;n+=2)"string"==typeof e[n]?(Va(t[e[n+1]]).native.removeEventListener(e[n],t[Ta][e[n+2]],e[n+3]),n+=2):"number"==typeof e[n]?(0,t[Ta][e[n]])():e[n].call(t[Ta][e[n+1]]);t[Ta]=null}}(e),function(t){var e,n=t[ga];null!=n&&null!=(e=n.destroyHooks)&&Da(t[Sa],e)}(e),(r=(n=e)[ga]&&n[ga].pipeDestroyHooks)&&Da(n,r),-1===e[ga].id&&Ua(e[Aa])&&(ngDevMode&&ngDevMode.rendererDestroy++,e[Aa].destroy())}var n,r}var Ja,$a,ts,es,ns,rs,is,os,as,ss="__ngHostLNode__",us=Promise.resolve(null),ls=[0,0],cs=new Array(va).fill(null),hs=!1,ds=!0;function ps(t,e){var n=os;return as=t&&t[Sa],ns=t&&t[ga],is=t&&1==(1&t[wa]),ds=t&&ns.firstTemplatePass,Ja=t&&t[Aa],null!=e&&(ts=e,es=!0),os=t,rs=t&&t[ba],n}function fs(t,e){e||(hs||Na(as,ns.viewHooks,ns.viewCheckHooks,is),os[wa]&=-6),os[wa]|=16,os[Ea]=-1,ps(t,null)}function ms(){hs||Ia(os,ns,is),function(t){for(var e=Ka(os);null!==e;e=e[_a])if(e.length<va&&null===e[ka])for(var n=e,r=0;r<n[Fa].length;r++){var i=n[Fa][r],o=i.data;ngDevMode&&fa(o[ga],"TView must be allocated"),_s(i,o[ga],o[Ma],2)}}(),hs||Na(as,ns.contentHooks,ns.contentCheckHooks,is),ns.firstTemplatePass=ds=!1,vs(ns.hostBindings),function(t){if(null!=t.contentQueries)for(var e=0;e<t.contentQueries.length;e+=2){var n=t.contentQueries[e];t.directives[n].contentQueriesRefresh(n,t.contentQueries[e+1])}}(ns),function(t){if(null!=t)for(var e=0;e<t.length;e+=2)Cs(t[e],t[e+1])}(ns.components)}function vs(t){if(null!=t)for(var e=ns.directives,n=0;n<t.length;n+=2){var r=t[n],i=e[r];i.hostBindings&&i.hostBindings(r,t[n+1])}}function gs(t,e,n,r,i){return[e,os,null,null,25|r,null,-1,null,null,n,os&&os[Ca],t,i||null,null,-1,null]}function ys(t,e,n,r,i,o){var a=es?ts:ts&&Wa(ts),s=a&&a.view===os?a.tNode:null,u=(es?rs:ts&&ts.queries)||a&&a.queries&&a.queries.child(),l=null!=o,c=function(t,e,n,r,i,o){return{native:r,view:os,nodeInjector:n?n.nodeInjector:null,data:i,queries:o,tNode:null,dynamicLContainerNode:null}}(0,0,a,n,l?o:null,u);if(-1===t||2===e)c.tNode=(o?o[ga].node:null)||Ms(e,t,null,null,s,null);else{var h=t+va;ngDevMode&&Ns(h);var d=ns.data;if(os[h]=c,h>=d.length){var p=d[h]=Ms(e,h,r,i,s,null);if(!es&&ts){var f=ts.tNode;f.next=p,f.dynamicContainerNode&&(f.dynamicContainerNode.next=p)}}c.tNode=d[h],es&&(rs=null,(null==ts.tNode.child&&ts.view===os||2===ts.tNode.type)&&(ts.tNode.child=c.tNode))}if(2==(2&e)&&l){var m=o;ngDevMode&&null!=m[xa]&&ma("lViewData[HOST_NODE] should not have been initialized"),m[xa]=c,ds&&(m[ga].node=c.tNode)}return ts=c,es=!0,c}function _s(t,e,n,r){var i,o=es,a=ts;if(null==t.data[ya]&&t.data[Ma]&&!e.template)Ps(t.data[Ma]);else try{es=!0,ts=null,i=ps(t.data,t),Es(),e.template(r,n),2&r?ms():t.data[ga].firstTemplatePass=ds=!1}finally{fs(i,1==(1&r)),es=o,ts=a}return t}function bs(t,e,n,r){var i=ps(e,t);try{$a.begin&&$a.begin(),r?(Es(),r(ws(e),n),ms()):(hs||(Ia(os,ns,is),Na(as,ns.contentHooks,ns.contentCheckHooks,is)),vs(ls),Cs(0,va))}finally{$a.end&&$a.end(),fs(i)}}function ws(t){return 1&t[wa]?3:2}var xs=null;function Es(){xs=null}function Ss(t,e,n,r,i){return ngDevMode&&ngDevMode.tView++,{id:t,template:e,viewQuery:i,node:null,data:cs.slice(),childIndex:-1,bindingStartIndex:-1,directives:null,firstTemplatePass:!0,initHooks:null,checkHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,pipeDestroyHooks:null,cleanup:null,hostBindings:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof n?n():n,pipeRegistry:"function"==typeof r?r():r,currentMatches:null}}function Ts(t,e){ngDevMode&&Is(-1),$a=t;var n,r=t.createRenderer(null,null),i="string"==typeof e?Ua(r)?r.selectRootElement(e):r.querySelector(e):e;if(ngDevMode&&!i)throw new Error("Renderer: "+("string"==typeof e?"Host node with selector not found:":"Host node is required:")+" ["+("function"==typeof(n=e)?n.name||n:"string"==typeof n?n:null==n?"":""+n)+"]");return i}function Ms(t,e,n,r,i,o){return ngDevMode&&ngDevMode.tNode++,{type:t,index:e,flags:0,tagName:n,attrs:r,localNames:null,initialInputs:void 0,inputs:void 0,outputs:void 0,tViews:o,next:null,child:null,parent:i,dynamicContainerNode:null,detached:null,stylingTemplate:null,projection:null}}function Cs(t,e){ngDevMode&&Is(e);var n=os[e];ngDevMode&&Ga(n,3),ngDevMode&&fa(n.data,"Component's host node should have an LViewData attached.");var r=n.data;As(r)&&6&r[wa]&&(ngDevMode&&Is(t,as),Ls(r,n,as[t]))}function As(t){return 8==(8&t[wa])}function Ps(t){for(var e=0;e<t.components.length;e++){var n=t.components[e],r=Ds(n);ngDevMode&&fa(r.data,"Component host node should be attached to an LView"),bs(r,Os(n),n)}}function Os(t){ngDevMode&&fa(t,"component");for(var e=Ds(t).view;e[ya];)e=e[ya];return e}function Rs(t){var e=Ds(t);ngDevMode&&fa(e.data,"Component host node should be attached to an LViewData instance."),Ls(e.data,e,t)}function Ls(t,e,n){var r=ps(t,e),i=t[ga],o=i.template,a=i.viewQuery;try{Es(),function(e,n,r){e&&1&t[wa]&&e(1,r)}(a,0,n),o(ws(t),n),ms(),function(t,e){t&&t(2,e)}(a,n)}finally{fs(r)}}function Is(t,e){null==e&&(e=os),function(t,e){t>=(e?e.length:0)&&ma("index expected to be a valid data index")}(t,e||os)}function Ns(t,e){null==e&&(e=os),pa(e.length,t,"index "+t+" expected to be at the end of arr (length "+e.length+")")}function Ds(t){ngDevMode&&fa(t,"expecting component got null");var e=t[ss];return ngDevMode&&fa(t,"object is not a component"),e}var ks=us;function Fs(t){return{components:[],scheduler:t,clean:ks}}var js=function(){function t(t,e){this._view=t,this._appRef=null,this._viewContainerRef=null,this._lViewNode=null,this.context=e}return t.prototype._setComponentContext=function(t,e){this._view=t,this.context=e},Object.defineProperty(t.prototype,"destroyed",{get:function(){return 32==(32&this._view[wa])},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){var t,e;this._viewContainerRef&&As(this._view)&&(this._viewContainerRef.detach(this._viewContainerRef.indexOf(this)),this._viewContainerRef=null),Ua(e=(t=this._view)[Aa])&&e.destroyNode&&function(e,n,r,i,o,a){for(var s=t[xa],u=-1;s;){var l=null,c=s.tNode.type;if(3===c)Ya(2,i,null,s.native,a),s.dynamicLContainerNode&&Ya(2,i,null,s.dynamicLContainerNode.native,a);else if(0===c){Ya(2,i,null,s.native,a);var h=s,d=h.dynamicLContainerNode?h.dynamicLContainerNode.data:h.data;(l=d[Fa].length?Ha(d[Fa][0]):null)&&(a=h.dynamicLContainerNode?h.dynamicLContainerNode.native:h.native)}else if(1===c){var p=Xa(s.view),f=p.tNode.projection[s.tNode.projection];qa[++u]=s,l=f?p.data[ya][f.index]:null}else l=Ha(s);if(null===l)for(null===(l=za(s))&&8192&s.tNode.flags&&(l=za(qa[u--]));s&&!l;){if(null===(s=Wa(s))||s===n)return null;s.tNode.next||0!==c||(a=s.native),l=za(s)}s=l}}(0,t[xa],0,e),function(t){if(-1===t[ga].childIndex)return Qa(t);for(var e=Ka(t);e;){var n=null;if(e.length>=va?e[ga].childIndex>-1&&(n=Ka(e)):e[Fa].length&&(n=e[Fa][0].data),null==n){for(;e&&!e[_a]&&e!==t;)Qa(e),e=Za(e,t);Qa(e||t),n=e&&e[_a]}e=n}}(t),t[wa]|=32},t.prototype.onDestroy=function(t){var e,n;n=t,function(t){return t[Ta]||(t[Ta]=[])}(e=this._view).push(n),e[ga].firstTemplatePass&&function(t){return t[ga].cleanup||(t[ga].cleanup=[])}(e).push(e[Ta].length-1,null)},t.prototype.markForCheck=function(){!function(t){for(var e=t;null!=e[ya];)e[wa]|=4,e=e[ya];var n,r;e[wa]|=4,ngDevMode&&fa(e[Ma],"rootContext"),(n=e[Ma]).clean==us&&(n.clean=new Promise(function(t){return r=t}),n.scheduler(function(){Ps(n),r(null),n.clean=us}))}(this._view)},t.prototype.detach=function(){this._view[wa]&=-9},t.prototype.reattach=function(){this._view[wa]|=8},t.prototype.detectChanges=function(){Rs(this.context)},t.prototype.checkNoChanges=function(){!function(t){hs=!0;try{Rs(t)}finally{hs=!1}}(this.context)},t.prototype.attachToViewContainerRef=function(t){this._viewContainerRef=t},t.prototype.detachFromAppRef=function(){this._appRef=null},t.prototype.attachToAppRef=function(t){this._appRef=t},t}(),Us=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.__extends)(e,t),e.prototype.resolveComponentFactory=function(t){return ngDevMode&&(void 0===e&&(e="Type passed in is not ComponentType, it does not have 'ngComponentDef' property."),t.ngComponentDef||ma(e)),new zs(t.ngComponentDef);var e},e}(Kt);function Bs(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}var Gs=new d("ROOT_CONTEXT_TOKEN",{providedIn:"root",factory:function(){return Fs(ot(Vs))}}),Vs=new d("SCHEDULER_TOKEN",{providedIn:"root",factory:function(){return requestAnimationFrame.bind(window)}}),zs=function(t){function e(e){var n=t.call(this)||this;return n.componentDef=e,n.componentType=e.type,n.selector=e.selectors[0][0],n.ngContentSelectors=[],n}return Object(r.__extends)(e,t),Object.defineProperty(e.prototype,"inputs",{get:function(){return Bs(this.componentDef.inputs)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"outputs",{get:function(){return Bs(this.componentDef.outputs)},enumerable:!0,configurable:!0}),e.prototype.create=function(t,e,n,r){var i,o,a=void 0===n,s=r?r.injector.get(Pe):Ba,u=a?(i=this.selector,Ua(o=s.createRenderer(null,this.componentDef.rendererType)||Ja)?o.createElement(i,xs):null===xs?o.createElement(i):o.createElementNS(xs,i)):Ts(s,n),l=r&&!a?r.injector.get(Gs):Fs(requestAnimationFrame.bind(window)),c=gs(s.createRenderer(u,this.componentDef.rendererType),Ss(-1,null,null,null,null),l,this.componentDef.onPush?4:2);c[Ca]=r&&r.injector||null;var h,d,p=ps(c,null);try{if(s.begin&&s.begin(),d=function(t,e,n,r){es=!1,ts=null;var i,o=ys(0,3,e,null,null,gs(Ja,(i=n.template).ngPrivateData||(i.ngPrivateData=Ss(-1,i,n.directiveDefs,n.pipeDefs,n.viewQuery)),null,n.onPush?4:2,r));return ds&&(o.tNode.flags=4096,n.diPublic&&n.diPublic(n),ns.directives=[n]),o}(0,u,this.componentDef),l.components.push(h=function(t,e,n){if(ngDevMode&&pa(os[Ea],-1,"directives should be created before any bindings"),ngDevMode&&pa(es,!0,"previousOrParentNode should be a parent"),Object.defineProperty(e,ss,{enumerable:!1,value:ts}),null==as&&(os[Sa]=as=[]),ngDevMode&&Ns(t,as),as[t]=e,ds){var r=ts.tNode.flags;0==(4095&r)?ts.tNode.flags=t<<14|4096&r|1:(ngDevMode&&4095==(4095&r)&&ma("Reached the max number of directives"),ts.tNode.flags++)}else{var i=n.diPublic;i&&i(n)}return null!=n.attributes&&3==ts.tNode.type&&function(t,e){for(var n=Ua(Ja),r=0;r<e.length;){var i=e[r];if(1===i)break;if(i===ja)r+=2;else if(ngDevMode&&ngDevMode.rendererSetAttribute++,0===i){var o=e[r+1],a=e[r+2],s=e[r+3];n?Ja.setAttribute(t,a,s,o):t.setAttributeNS(o,a,s),r+=4}else s=e[r+1],n?Ja.setAttribute(t,i,s):t.setAttribute(i,s),r+=2}}(ts.native,n.attributes),e}(0,this.componentDef.factory(),this.componentDef)),function(t,e,n){t&&null!=t.changeDetectorRef&&t.changeDetectorRef._setComponentContext(d.data,h)}(d.nodeInjector),function(t,e){var n=Ds(t),r=n.view[ga];(function(t,e,n,r){ngDevMode&&pa(r.firstTemplatePass,!0,"Should only be called on first template pass"),e&&(r.initHooks||(r.initHooks=[])).push(0,e),n&&((r.initHooks||(r.initHooks=[])).push(0,n),(r.checkHooks||(r.checkHooks=[])).push(0,n))})(0,e.onInit,e.doCheck,r),function(t,e){if(e.firstTemplatePass)for(var n=t>>14,r=n+(4095&t),i=n;i<r;i++){var o=e.directives[i];Oa(o,e,i),Ra(o,e,i),La(o,e,i)}}(n.tNode.flags,r)}(h,this.componentDef),e)for(var f=0,m=d.tNode.projection=[],v=0;v<e.length;v++){for(var g=e[v],y=null,_=null,b=0;b<g.length;b++){var w=ys(++f,3,g[b],null,null);_?_.next=w.tNode:y=w.tNode,_=w.tNode}m.push(y)}_s(d,d.data[ga],h,1),d.data[wa]&=-2}finally{ps(p,null),s.end&&s.end()}var x=new Hs(this.componentType,h,c,t,u);return a&&(x.hostView._lViewNode.tNode.child=d.tNode),x},e}(zt),Hs=function(t){function e(e,n,r,i,o){var a=t.call(this)||this;return a.destroyCbs=[],a.instance=n,a.hostView=a.changeDetectorRef=new js(r,n),a.hostView._lViewNode=ys(-1,2,null,null,null,r),a.injector=i,a.location=new Le(o),a.componentType=e,a}return Object(r.__extends)(e,t),e.prototype.destroy=function(){ngDevMode&&fa(this.destroyCbs,"NgModule already destroyed"),this.destroyCbs.forEach(function(t){return t()}),this.destroyCbs=null},e.prototype.onDestroy=function(t){ngDevMode&&fa(this.destroyCbs,"NgModule already destroyed"),this.destroyCbs.push(t)},e}(Vt),Ws={provide:Kt,useFactory:function(){return new Us},deps:[]},qs=function(t){function e(e,n){var r=t.call(this)||this;r._bootstrapComponents=[],r.destroyCbs=[];var i=e.ngModuleDef;return ngDevMode&&fa(i,"NgModule '"+O(e)+"' is not a subtype of 'NgModuleType'."),r._bootstrapComponents=i.bootstrap,r.injector=function(t,e,n){return void 0===e&&(e=null),void 0===n&&(n=null),e=e||xt(),new Et(t,n,e)}(e,n,[Ws,{provide:Jt,useValue:r}]),r.instance=r.injector.get(e),r.componentFactoryResolver=new Us,r}return Object(r.__extends)(e,t),e.prototype.destroy=function(){ngDevMode&&fa(this.destroyCbs,"NgModule already destroyed"),this.destroyCbs.forEach(function(t){return t()}),this.destroyCbs=null},e.prototype.onDestroy=function(t){ngDevMode&&fa(this.destroyCbs,"NgModule already destroyed"),this.destroyCbs.push(t)},e}(Jt);!function(t){function e(e){var n=t.call(this)||this;return n.moduleType=e,n}Object(r.__extends)(e,t),e.prototype.create=function(t){return new qs(this.moduleType,t)}}($t)},DKTb:function(t,e,n){"use strict";function r(t){setTimeout(function(){throw t})}n.d(e,"a",function(){return r})},DwtJ:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("0kFh"),i=n("q1Ft"),o=n("RzhA");e.AckUserWrite=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=o.OperationType.ACK_USER_WRITE,this.source=o.OperationSource.User}return t.prototype.operationForChild=function(e){if(this.path.isEmpty()){if(null!=this.affectedTree.value)return r.assert(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new i.Path(e));return new t(i.Path.Empty,n,this.revert)}return r.assert(this.path.getFront()===e,"operationForChild called for unrelated child."),new t(this.path.popFront(),this.affectedTree,this.revert)},t}()},ELzr:function(t,e,n){"use strict";n.r(e),n.d(e,"onErrorResumeNext",function(){return s});var r=n("6blF"),i=n("0/uQ"),o=n("isby"),a=n("G5J1");function s(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(0===t.length)return a.a;var n=t[0],u=t.slice(1);return 1===t.length&&Object(o.a)(n)?s.apply(void 0,n):new r.a(function(t){var e=function(){return t.add(s.apply(void 0,u).subscribe(t))};return Object(i.a)(n).subscribe({next:function(e){t.next(e)},error:e,complete:e})})}},EWOM:function(t,e,n){"use strict";n.r(e),n.d(e,"pairs",function(){return o}),n.d(e,"dispatch",function(){return a});var r=n("6blF"),i=n("pugT");function o(t,e){return new r.a(e?function(n){var r=Object.keys(t),o=new i.a;return o.add(e.schedule(a,0,{keys:r,index:0,subscriber:n,subscription:o,obj:t})),o}:function(e){for(var n=Object.keys(t),r=0;r<n.length&&!e.closed;r++){var i=n[r];t.hasOwnProperty(i)&&e.next([i,t[i]])}e.complete()})}function a(t){var e=t.keys,n=t.index,r=t.subscriber,i=t.subscription,o=t.obj;if(!r.closed)if(n<e.length){var a=e[n];r.next([a,o[a]]),i.add(this.schedule({keys:e,index:n+1,subscriber:r,subscription:i,obj:o}))}else r.complete()}},"En8+":function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},"F/XL":function(t,e,n){"use strict";var r=n("nkY7"),i=n("IUTb"),o=n("G5J1"),a=n("6blF");function s(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n,s,u=t[t.length-1];switch(Object(r.a)(u)?t.pop():u=void 0,t.length){case 0:return Object(o.b)(u);case 1:return u?Object(i.a)(t,u):(n=t[0],(s=new a.a(function(t){t.next(n),t.complete()}))._isScalar=!0,s.value=n,s);default:return Object(i.a)(t,u)}}n.d(e,"a",function(){return s})},FFOo:function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("mrSG"),i=n("2Bdj"),o=n("6ahw"),a=n("pugT"),s=n("L/V9"),u=n("iLxQ"),l=n("DKTb"),c=function(t){function e(n,r,i){var a=t.call(this)||this;switch(a.syncErrorValue=null,a.syncErrorThrown=!1,a.syncErrorThrowable=!1,a.isStopped=!1,a._parentSubscription=null,arguments.length){case 0:a.destination=o.a;break;case 1:if(!n){a.destination=o.a;break}if("object"==typeof n){n instanceof e?(a.syncErrorThrowable=n.syncErrorThrowable,a.destination=n,n.add(a)):(a.syncErrorThrowable=!0,a.destination=new h(a,n));break}default:a.syncErrorThrowable=!0,a.destination=new h(a,n,r,i)}return a}return r.__extends(e,t),e.prototype[s.a]=function(){return this},e.create=function(t,n,r){var i=new e(t,n,r);return i.syncErrorThrowable=!1,i},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this._parent,e=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=t,this._parents=e,this._parentSubscription=null,this},e}(a.a),h=function(t){function e(e,n,r,a){var s,u=t.call(this)||this;u._parentSubscriber=e;var l=u;return Object(i.a)(n)?s=n:n&&(s=n.next,r=n.error,a=n.complete,n!==o.a&&(l=Object.create(n),Object(i.a)(l.unsubscribe)&&u.add(l.unsubscribe.bind(l)),l.unsubscribe=u.unsubscribe.bind(u))),u._context=l,u._next=s,u._error=r,u._complete=a,u}return r.__extends(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;u.a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber,n=u.a.useDeprecatedSynchronousErrorHandling;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):Object(l.a)(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;Object(l.a)(t)}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var n=function(){return t._complete.call(t._context)};u.a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(t){if(this.unsubscribe(),u.a.useDeprecatedSynchronousErrorHandling)throw t;Object(l.a)(t)}},e.prototype.__tryOrSetError=function(t,e,n){if(!u.a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(e){return u.a.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=e,t.syncErrorThrown=!0,!0):(Object(l.a)(e),!0)}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(c)},FKYu:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("h6Fy"),i=n("Ix30"),o=n("+e0l"),a=n("0kFh"),s=n("0kFh"),u=n("cbsn"),l=n("Twyb"),c=n("7WVx"),h=n("Mom/"),d=!0;function p(t,e){if(void 0===e&&(e=null),null===t)return r.ChildrenNode.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),s.assert(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new i.LeafNode(t,p(e));if(t instanceof Array||!d){var n=r.ChildrenNode.EMPTY_NODE,f=t;return a.forEach(f,function(t,e){if(a.contains(f,t)&&"."!==t.substring(0,1)){var r=p(e);!r.isLeafNode()&&r.isEmpty()||(n=n.updateImmediateChild(t,r))}}),n.updatePriority(p(e))}var m=[],v=!1,g=t;if(a.forEach(g,function(t,e){if("string"!=typeof t||"."!==t.substring(0,1)){var n=p(g[t]);n.isEmpty()||(v=v||!n.getPriority().isEmpty(),m.push(new o.NamedNode(t,n)))}}),0==m.length)return r.ChildrenNode.EMPTY_NODE;var y=u.buildChildSet(m,l.NAME_ONLY_COMPARATOR,function(t){return t.name},l.NAME_COMPARATOR);if(v){var _=u.buildChildSet(m,h.PRIORITY_INDEX.getCompare());return new r.ChildrenNode(y,p(e),new c.IndexMap({".priority":_},{".priority":h.PRIORITY_INDEX}))}return new r.ChildrenNode(y,p(e),c.IndexMap.Default)}e.nodeFromJSON=p,h.setNodeFromJSON(p)},FcJQ:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("0kFh"),i=n("G6nc"),o=n("h6Fy"),a=n("Mom/");e.IndexedFilter=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,o,a,s){r.assert(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var u=t.getImmediateChild(e);return u.getChild(o).equals(n.getChild(o))&&u.isEmpty()==n.isEmpty()?t:(null!=s&&(n.isEmpty()?t.hasChild(e)?s.trackChildChange(i.Change.childRemovedChange(e,u)):r.assert(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):u.isEmpty()?s.trackChildChange(i.Change.childAddedChange(e,n)):s.trackChildChange(i.Change.childChangedChange(e,n,u))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(a.PRIORITY_INDEX,function(t,r){e.hasChild(t)||n.trackChildChange(i.Change.childRemovedChange(t,r))}),e.isLeafNode()||e.forEachChild(a.PRIORITY_INDEX,function(e,r){if(t.hasChild(e)){var o=t.getImmediateChild(e);o.equals(r)||n.trackChildChange(i.Change.childChangedChange(e,r,o))}else n.trackChildChange(i.Change.childAddedChange(e,r))})),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?o.ChildrenNode.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}()},Fxb1:function(t,e,n){"use strict";n.d(e,"a",function(){return p});var r=n("6blF"),i=n("+tJ4"),o=n("S5XQ"),a=n("u67D"),s=n("JcRv"),u=n("2ePl"),l=n("/WYv"),c=n("McSo"),h=n("En8+"),d=n("xTla"),p=function(t){if(t instanceof r.a)return function(e){return t._isScalar?(e.next(t.value),void e.complete()):t.subscribe(e)};if(t&&"function"==typeof t[d.a])return Object(s.a)(t);if(Object(u.a)(t))return Object(i.a)(t);if(Object(l.a)(t))return Object(o.a)(t);if(t&&"function"==typeof t[h.a])return Object(a.a)(t);var e=Object(c.a)(t)?"an invalid object":"'"+t+"'";throw new TypeError("You provided "+e+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")}},G5J1:function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o});var r=n("6blF"),i=new r.a(function(t){return t.complete()});function o(t){return t?function(t){return new r.a(function(e){return t.schedule(function(){return e.complete()})})}(t):i}},G6nc:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Change=function(){function t(t,e,n,r,i){this.type=t,this.snapshotNode=e,this.childName=n,this.oldSnap=r,this.prevName=i}return t.valueChange=function(e){return new t(t.VALUE,e)},t.childAddedChange=function(e,n){return new t(t.CHILD_ADDED,n,e)},t.childRemovedChange=function(e,n){return new t(t.CHILD_REMOVED,n,e)},t.childChangedChange=function(e,n,r){return new t(t.CHILD_CHANGED,n,e,r)},t.childMovedChange=function(e,n){return new t(t.CHILD_MOVED,n,e)},t.CHILD_ADDED="child_added",t.CHILD_REMOVED="child_removed",t.CHILD_CHANGED="child_changed",t.CHILD_MOVED="child_moved",t.VALUE="value",t}()},GDxn:function(t,e,n){"use strict";n.r(e),n.d(e,"NEVER",function(){return o}),n.d(e,"never",function(){return a});var r=n("6blF"),i=n("+umK"),o=new r.a(i.a);function a(){return o}},GFAS:function(t,e,n){"use strict";n.r(e),n("ULIu"),n("Iuvc"),n("4oYI")},GFlT:function(t,e,n){"use strict";n.r(e),n.d(e,"generate",function(){return a});var r=n("6blF"),i=n("mChF"),o=n("nkY7");function a(t,e,n,a,u){var l,c;return 1==arguments.length?(c=t.initialState,e=t.condition,n=t.iterate,l=t.resultSelector||i.a,u=t.scheduler):void 0===a||Object(o.a)(a)?(c=t,l=i.a,u=a):(c=t,l=a),new r.a(function(t){var r=c;if(u)return u.schedule(s,0,{subscriber:t,iterate:n,condition:e,resultSelector:l,state:r});for(;;){if(e){var i=void 0;try{i=e(r)}catch(e){return void t.error(e)}if(!i){t.complete();break}}var o=void 0;try{o=l(r)}catch(e){return void t.error(e)}if(t.next(o),t.closed)break;try{r=n(r)}catch(e){return void t.error(e)}}})}function s(t){var e=t.subscriber,n=t.condition;if(!e.closed){if(t.needIterate)try{t.state=t.iterate(t.state)}catch(t){return void e.error(t)}else t.needIterate=!0;if(n){var r=void 0;try{r=n(t.state)}catch(t){return void e.error(t)}if(!r)return void e.complete();if(e.closed)return}var i;try{i=t.resultSelector(t.state)}catch(t){return void e.error(t)}if(!e.closed&&(e.next(i),!e.closed))return this.schedule(t)}}},HThc:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("0kFh");e.TransactionResult=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return r.validateArgCount("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}()},IA05:function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"b",function(){return i});var r=function(t,e,n,r,i,o){this.name=t,this.productId=e,this.possibleMaterialFinishes=n,this.products=r,this.dimensions=i,this.category=o},i=function(t,e,n,r,i){this.name=t,this.possibleMaterialFinishes=e,this.products=n,this.dimensions=r,this.category=i}},IUTb:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("6blF"),i=n("pugT"),o=n("+tJ4");function a(t,e){return new r.a(e?function(n){var r=new i.a,o=0;return r.add(e.schedule(function(){o!==t.length?(n.next(t[o++]),n.closed||r.add(this.schedule())):n.complete()})),r}:Object(o.a)(t))}},Ip0R:function(t,e,n){"use strict";n.d(e,"r",function(){return g}),n.d(e,"j",function(){return _}),n.d(e,"k",function(){return y}),n.d(e,"s",function(){return b}),n.d(e,"b",function(){return A}),n.d(e,"h",function(){return x}),n.d(e,"i",function(){return S}),n.d(e,"c",function(){return P}),n.d(e,"n",function(){return C}),n.d(e,"q",function(){return O}),n.d(e,"p",function(){return L}),n.d(e,"o",function(){return I}),n.d(e,"m",function(){return o}),n.d(e,"e",function(){return a}),n.d(e,"g",function(){return s}),n.d(e,"a",function(){return u}),n.d(e,"d",function(){return h}),n.d(e,"l",function(){return d}),n.d(e,"f",function(){return l});var r=n("CcnG"),i=n("mrSG"),o=function(){},a=new r.s("Location Initialized"),s=function(){},u=new r.s("appBaseHref"),l=function(){function t(t){var n=this;this._subject=new r.n,this._platformStrategy=t;var i=this._platformStrategy.getBaseHref();this._baseHref=e.stripTrailingSlash(c(i)),this._platformStrategy.onPopState(function(t){n._subject.emit({url:n.path(!0),pop:!0,state:t.state,type:t.type})})}var e;return e=t,t.prototype.path=function(t){return void 0===t&&(t=!1),this.normalize(this._platformStrategy.path(t))},t.prototype.isCurrentPathEqualTo=function(t,n){return void 0===n&&(n=""),this.path()==this.normalize(t+e.normalizeQueryParams(n))},t.prototype.normalize=function(t){return e.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,c(t)))},t.prototype.prepareExternalUrl=function(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)},t.prototype.go=function(t,e,n){void 0===e&&(e=""),void 0===n&&(n=null),this._platformStrategy.pushState(n,"",t,e)},t.prototype.replaceState=function(t,e,n){void 0===e&&(e=""),void 0===n&&(n=null),this._platformStrategy.replaceState(n,"",t,e)},t.prototype.forward=function(){this._platformStrategy.forward()},t.prototype.back=function(){this._platformStrategy.back()},t.prototype.subscribe=function(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})},t.normalizeQueryParams=function(t){return t&&"?"!==t[0]?"?"+t:t},t.joinWithSlash=function(t,e){if(0==t.length)return e;if(0==e.length)return t;var n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e},t.stripTrailingSlash=function(t){var e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)},t}();function c(t){return t.replace(/\/index.html$/,"")}var h=function(t){function e(e,n){var r=t.call(this)||this;return r._platformLocation=e,r._baseHref="",null!=n&&(r._baseHref=n),r}return Object(i.__extends)(e,t),e.prototype.onPopState=function(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)},e.prototype.getBaseHref=function(){return this._baseHref},e.prototype.path=function(t){void 0===t&&(t=!1);var e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e},e.prototype.prepareExternalUrl=function(t){var e=l.joinWithSlash(this._baseHref,t);return e.length>0?"#"+e:e},e.prototype.pushState=function(t,e,n,r){var i=this.prepareExternalUrl(n+l.normalizeQueryParams(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)},e.prototype.replaceState=function(t,e,n,r){var i=this.prepareExternalUrl(n+l.normalizeQueryParams(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)},e.prototype.forward=function(){this._platformLocation.forward()},e.prototype.back=function(){this._platformLocation.back()},Object(i.__decorate)([Object(i.__param)(1,Object(r.D)()),Object(i.__param)(1,Object(r.r)(u))],e)}(s),d=function(t){function e(e,n){var r=t.call(this)||this;if(r._platformLocation=e,null==n&&(n=r._platformLocation.getBaseHrefFromDOM()),null==n)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");return r._baseHref=n,r}return Object(i.__extends)(e,t),e.prototype.onPopState=function(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)},e.prototype.getBaseHref=function(){return this._baseHref},e.prototype.prepareExternalUrl=function(t){return l.joinWithSlash(this._baseHref,t)},e.prototype.path=function(t){void 0===t&&(t=!1);var e=this._platformLocation.pathname+l.normalizeQueryParams(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?""+e+n:e},e.prototype.pushState=function(t,e,n,r){var i=this.prepareExternalUrl(n+l.normalizeQueryParams(r));this._platformLocation.pushState(t,e,i)},e.prototype.replaceState=function(t,e,n,r){var i=this.prepareExternalUrl(n+l.normalizeQueryParams(r));this._platformLocation.replaceState(t,e,i)},e.prototype.forward=function(){this._platformLocation.forward()},e.prototype.back=function(){this._platformLocation.back()},Object(i.__decorate)([Object(i.__param)(1,Object(r.D)()),Object(i.__param)(1,Object(r.r)(u))],e)}(s),p=void 0,f=["en",[["a","p"],["AM","PM"],p],[["AM","PM"],p,p],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],p,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],p,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",p,"{1} 'at' {0}",p],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"$","US Dollar",{},function(t){var e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}],m={},v=function(t){return t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Few=3]="Few",t[t.Many=4]="Many",t[t.Other=5]="Other",t}({}),g=new r.s("UseV4Plurals"),y=function(){},_=function(t){function e(e,n){var r=t.call(this)||this;return r.locale=e,r.deprecatedPluralFn=n,r}return Object(i.__extends)(e,t),e.prototype.getPluralCategory=function(t,e){switch(this.deprecatedPluralFn?this.deprecatedPluralFn(e||this.locale,t):function(t){return function(t){var e=t.toLowerCase().replace(/_/g,"-"),n=m[e];if(n)return n;var r=e.split("-")[0];if(n=m[r])return n;if("en"===r)return f;throw new Error('Missing locale data for the locale "'+t+'".')}(t)[18]}(e||this.locale)(t)){case v.Zero:return"zero";case v.One:return"one";case v.Two:return"two";case v.Few:return"few";case v.Many:return"many";default:return"other"}},Object(i.__decorate)([Object(i.__param)(0,Object(r.r)(r.x)),Object(i.__param)(1,Object(r.D)()),Object(i.__param)(1,Object(r.r)(g))],e)}(y);function b(t,e){var n,r;e=encodeURIComponent(e);try{for(var o=Object(i.__values)(t.split(";")),a=o.next();!a.done;a=o.next()){var s=a.value,u=s.indexOf("="),l=Object(i.__read)(-1==u?[s,""]:[s.slice(0,u),s.slice(u+1)],2),c=l[1];if(l[0].trim()===e)return decodeURIComponent(c)}}catch(t){n={error:t}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return null}var w=function(){function t(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}return Object.defineProperty(t.prototype,"first",{get:function(){return 0===this.index},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"last",{get:function(){return this.index===this.count-1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"even",{get:function(){return this.index%2==0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"odd",{get:function(){return!this.even},enumerable:!0,configurable:!0}),t}(),x=function(){function t(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOfDirty=!0,this._differ=null}return Object.defineProperty(t.prototype,"ngForOf",{set:function(t){this._ngForOf=t,this._ngForOfDirty=!0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ngForTrackBy",{get:function(){return this._trackByFn},set:function(t){Object(r.Ba)()&&null!=t&&"function"!=typeof t&&console&&console.warn&&console.warn("trackBy must be a function, but received "+JSON.stringify(t)+". See https://angular.io/docs/ts/latest/api/common/index/NgFor-directive.html#!#change-propagation for more information."),this._trackByFn=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ngForTemplate",{set:function(t){t&&(this._template=t)},enumerable:!0,configurable:!0}),t.prototype.ngDoCheck=function(){if(this._ngForOfDirty){this._ngForOfDirty=!1;var t=this._ngForOf;if(!this._differ&&t)try{this._differ=this._differs.find(t).create(this.ngForTrackBy)}catch(n){throw new Error("Cannot find a differ supporting object '"+t+"' of type '"+((e=t).name||typeof e)+"'. NgFor only supports binding to Iterables such as Arrays.")}}var e;if(this._differ){var n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}},t.prototype._applyChanges=function(t){var e=this,n=[];t.forEachOperation(function(t,r,i){if(null==t.previousIndex){var o=e._viewContainer.createEmbeddedView(e._template,new w(null,e._ngForOf,-1,-1),i),a=new E(t,o);n.push(a)}else null==i?e._viewContainer.remove(r):(o=e._viewContainer.get(r),e._viewContainer.move(o,i),a=new E(t,o),n.push(a))});for(var r=0;r<n.length;r++)this._perViewChange(n[r].view,n[r].record);r=0;for(var i=this._viewContainer.length;r<i;r++){var o=this._viewContainer.get(r);o.context.index=r,o.context.count=i,o.context.ngForOf=this._ngForOf}t.forEachIdentityChange(function(t){e._viewContainer.get(t.currentIndex).context.$implicit=t.item})},t.prototype._perViewChange=function(t,e){t.context.$implicit=e.item},t}(),E=function(t,e){this.record=t,this.view=e},S=function(){function t(t,e){this._viewContainer=t,this._context=new T,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}return Object.defineProperty(t.prototype,"ngIf",{set:function(t){this._context.$implicit=this._context.ngIf=t,this._updateView()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ngIfThen",{set:function(t){M("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ngIfElse",{set:function(t){M("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()},enumerable:!0,configurable:!0}),t.prototype._updateView=function(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))},t}(),T=function(){this.$implicit=null,this.ngIf=null};function M(t,e){if(e&&!e.createEmbeddedView)throw new Error(t+" must be a TemplateRef, but received '"+Object(r.ib)(e)+"'.")}var C=function(){function t(){}var e;return e=t,t.prototype.transform=function(t){if(!t)return t;if("string"!=typeof t)throw function(t,e){return Error("InvalidPipeArgument: '"+e+"' for pipe '"+Object(r.ib)(t)+"'")}(e,t);return t.toUpperCase()},t}(),A=function(){},P=new r.s("DocumentToken"),O="browser",R="server";function L(t){return t===R}var I=function(){function t(){}return t.ngInjectableDef=Object(r.W)({providedIn:"root",factory:function(){return new N(Object(r.Aa)(P),window)}}),t}(),N=function(){function t(t,e){this.document=t,this.window=e,this.offset=function(){return[0,0]}}return t.prototype.setOffset=function(t){this.offset=Array.isArray(t)?function(){return t}:t},t.prototype.getScrollPosition=function(){return this.supportScrollRestoration()?[this.window.scrollX,this.window.scrollY]:[0,0]},t.prototype.scrollToPosition=function(t){this.supportScrollRestoration()&&this.window.scrollTo(t[0],t[1])},t.prototype.scrollToAnchor=function(t){if(this.supportScrollRestoration()){var e=this.document.querySelector("#"+t);if(e)return void this.scrollToElement(e);var n=this.document.querySelector("[name='"+t+"']");if(n)return void this.scrollToElement(n)}},t.prototype.setHistoryScrollRestoration=function(t){if(this.supportScrollRestoration()){var e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}},t.prototype.scrollToElement=function(t){var e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])},t.prototype.supportScrollRestoration=function(){try{return!!this.window&&!!this.window.scrollTo}catch(t){return!1}},t}()},Iuvc:function(t,e){Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(t){if(null==this)throw new TypeError('"this" is null or not defined');var e=Object(this),n=e.length>>>0;if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var r=arguments[1],i=0;i<n;){var o=e[i];if(t.call(r,o,i,e))return o;i++}}}),Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(t){if(null==this)throw new TypeError('"this" is null or not defined');var e=Object(this),n=e.length>>>0;if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var r=arguments[1],i=0;i<n;){if(t.call(r,e[i],i,e))return i;i++}return-1}})},Ix30:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n("0kFh"),o=n("W1I6"),a=n("mZUT");e.LeafNode=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,i.assert(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),a.validatePriorityNode(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return r},set:function(t){r=t},enumerable:!0,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return e.isEmpty()?this:".priority"===e.getFront()?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var r=e.getFront();return null===r?n:n.isEmpty()&&".priority"!==r?this:(i.assert(".priority"!==r||1===e.getLength(),".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(e.popFront(),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+a.priorityHashText(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?o.doubleToIEEE754String(this.value_):this.value_,this.lazyHash_=o.sha1(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:(i.assert(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,r=typeof this.value_,o=t.VALUE_TYPE_ORDER.indexOf(n),a=t.VALUE_TYPE_ORDER.indexOf(r);return i.assert(o>=0,"Unknown leaf type: "+n),i.assert(a>=0,"Unknown leaf type: "+r),o===a?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:a-o},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){return t===this||!!t.isLeafNode()&&this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}()},IxPp:function(t,e,n){"use strict";n.r(e),n.d(e,"groupBy",function(){return u}),n.d(e,"GroupedObservable",function(){return d});var r=n("mrSG"),i=n("FFOo"),o=n("pugT"),a=n("6blF"),s=n("K9Ia");function u(t,e,n,r){return function(i){return i.lift(new l(t,e,n,r))}}var l=function(){function t(t,e,n,r){this.keySelector=t,this.elementSelector=e,this.durationSelector=n,this.subjectSelector=r}return t.prototype.call=function(t,e){return e.subscribe(new c(t,this.keySelector,this.elementSelector,this.durationSelector,this.subjectSelector))},t}(),c=function(t){function e(e,n,r,i,o){var a=t.call(this,e)||this;return a.keySelector=n,a.elementSelector=r,a.durationSelector=i,a.subjectSelector=o,a.groups=null,a.attemptedToUnsubscribe=!1,a.count=0,a}return r.__extends(e,t),e.prototype._next=function(t){var e;try{e=this.keySelector(t)}catch(t){return void this.error(t)}this._group(t,e)},e.prototype._group=function(t,e){var n=this.groups;n||(n=this.groups=new Map);var r,i=n.get(e);if(this.elementSelector)try{r=this.elementSelector(t)}catch(t){this.error(t)}else r=t;if(!i){i=this.subjectSelector?this.subjectSelector():new s.a,n.set(e,i);var o=new d(e,i,this);if(this.destination.next(o),this.durationSelector){var a=void 0;try{a=this.durationSelector(new d(e,i))}catch(t){return void this.error(t)}this.add(a.subscribe(new h(e,i,this)))}}i.closed||i.next(r)},e.prototype._error=function(t){var e=this.groups;e&&(e.forEach(function(e,n){e.error(t)}),e.clear()),this.destination.error(t)},e.prototype._complete=function(){var t=this.groups;t&&(t.forEach(function(t,e){t.complete()}),t.clear()),this.destination.complete()},e.prototype.removeGroup=function(t){this.groups.delete(t)},e.prototype.unsubscribe=function(){this.closed||(this.attemptedToUnsubscribe=!0,0===this.count&&t.prototype.unsubscribe.call(this))},e}(i.a),h=function(t){function e(e,n,r){var i=t.call(this,n)||this;return i.key=e,i.group=n,i.parent=r,i}return r.__extends(e,t),e.prototype._next=function(t){this.complete()},e.prototype._unsubscribe=function(){var t=this.parent,e=this.key;this.key=this.parent=null,t&&t.removeGroup(e)},e}(i.a),d=function(t){function e(e,n,r){var i=t.call(this)||this;return i.key=e,i.groupSubject=n,i.refCountSubscription=r,i}return r.__extends(e,t),e.prototype._subscribe=function(t){var e=new o.a,n=this.refCountSubscription,r=this.groupSubject;return n&&!n.closed&&e.add(new p(n)),e.add(r.subscribe(t)),e},e}(a.a),p=function(t){function e(e){var n=t.call(this)||this;return n.parent=e,e.count++,n}return r.__extends(e,t),e.prototype.unsubscribe=function(){var e=this.parent;e.closed||this.closed||(t.prototype.unsubscribe.call(this),e.count-=1,0===e.count&&e.attemptedToUnsubscribe&&e.unsubscribe())},e}(o.a)},J686:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("JyJq"),i=n("h6Fy"),o=n("+e0l"),a=n("0kFh"),s=n("G6nc");e.LimitedFilter=function(){function t(t){this.rangedFilter_=new r.RangedFilter(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,r,a,s){return this.rangedFilter_.matches(new o.NamedNode(e,n))||(n=i.ChildrenNode.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,a,s):this.fullLimitUpdateChild_(t,e,n,a,s)},t.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=i.ChildrenNode.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=i.ChildrenNode.EMPTY_NODE.withIndex(this.index_);var o=void 0;o=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var a=0;o.hasNext()&&a<this.limit_;){var s=o.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(s.name,s.node),a++}}else{r=(r=e.withIndex(this.index_)).updatePriority(i.ChildrenNode.EMPTY_NODE);var u=void 0,l=void 0,c=void 0;if(o=void 0,this.reverse_){o=r.getReverseIterator(this.index_),u=this.rangedFilter_.getEndPost(),l=this.rangedFilter_.getStartPost();var h=this.index_.getCompare();c=function(t,e){return h(e,t)}}else o=r.getIterator(this.index_),u=this.rangedFilter_.getStartPost(),l=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();a=0;for(var d=!1;o.hasNext();)s=o.getNext(),!d&&c(u,s)<=0&&(d=!0),d&&a<this.limit_&&c(s,l)<=0?a++:r=r.updateImmediateChild(s.name,i.ChildrenNode.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,r,u){var l;if(this.reverse_){var c=this.index_.getCompare();l=function(t,e){return c(e,t)}}else l=this.index_.getCompare();var h=t;a.assert(h.numChildren()==this.limit_,"");var d=new o.NamedNode(e,n),p=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),f=this.rangedFilter_.matches(d);if(h.hasChild(e)){for(var m=h.getImmediateChild(e),v=r.getChildAfterChild(this.index_,p,this.reverse_);null!=v&&(v.name==e||h.hasChild(v.name));)v=r.getChildAfterChild(this.index_,v,this.reverse_);var g=null==v?1:l(v,d);if(f&&!n.isEmpty()&&g>=0)return null!=u&&u.trackChildChange(s.Change.childChangedChange(e,n,m)),h.updateImmediateChild(e,n);null!=u&&u.trackChildChange(s.Change.childRemovedChange(e,m));var y=h.updateImmediateChild(e,i.ChildrenNode.EMPTY_NODE);return null!=v&&this.rangedFilter_.matches(v)?(null!=u&&u.trackChildChange(s.Change.childAddedChange(v.name,v.node)),y.updateImmediateChild(v.name,v.node)):y}return n.isEmpty()?t:f&&l(p,d)>=0?(null!=u&&(u.trackChildChange(s.Change.childRemovedChange(p.name,p.node)),u.trackChildChange(s.Change.childAddedChange(e,n))),h.updateImmediateChild(e,n).updateImmediateChild(p.name,i.ChildrenNode.EMPTY_NODE)):t},t}()},JD4d:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("0kFh");e.StatsListener=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=r.clone(t);return this.last_&&r.forEach(this.last_,function(t,n){e[t]=e[t]-n}),this.last_=t,e},t}()},JR7u:function(t,e,n){var r=n("M+4L");n("/3xq"),n("Xdxe"),n("YNF/"),n("Nhk1"),t.exports=r},JcRv:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("xTla"),i=function(t){return function(e){var n=t[r.a]();if("function"!=typeof n.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(e)}}},JyJq:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("FcJQ"),i=n("Mom/"),o=n("+e0l"),a=n("h6Fy");e.RangedFilter=function(){function t(e){this.indexedFilter_=new r.IndexedFilter(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,r,i,s){return this.matches(new o.NamedNode(e,n))||(n=a.ChildrenNode.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,s)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=a.ChildrenNode.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(a.ChildrenNode.EMPTY_NODE);var s=this;return e.forEachChild(i.PRIORITY_INDEX,function(t,e){s.matches(new o.NamedNode(t,e))||(r=r.updateImmediateChild(t,a.ChildrenNode.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}()},K9Ia:function(t,e,n){"use strict";var r=n("mrSG"),i=n("6blF"),o=n("FFOo"),a=n("pugT"),s=n("8g8A"),u=function(t){function e(e,n){var r=t.call(this)||this;return r.subject=e,r.subscriber=n,r.closed=!1,r}return r.__extends(e,t),e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},e}(a.a),l=n("L/V9");n.d(e,"b",function(){return c}),n.d(e,"a",function(){return h});var c=function(t){function e(e){var n=t.call(this,e)||this;return n.destination=e,n}return r.__extends(e,t),e}(o.a),h=function(t){function e(){var e=t.call(this)||this;return e.observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return r.__extends(e,t),e.prototype[l.a]=function(){return new c(this)},e.prototype.lift=function(t){var e=new d(this,this);return e.operator=t,e},e.prototype.next=function(t){if(this.closed)throw new s.a;if(!this.isStopped)for(var e=this.observers,n=e.length,r=e.slice(),i=0;i<n;i++)r[i].next(t)},e.prototype.error=function(t){if(this.closed)throw new s.a;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,n=e.length,r=e.slice(),i=0;i<n;i++)r[i].error(t);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new s.a;this.isStopped=!0;for(var t=this.observers,e=t.length,n=t.slice(),r=0;r<e;r++)n[r].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(e){if(this.closed)throw new s.a;return t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(t){if(this.closed)throw new s.a;return this.hasError?(t.error(this.thrownError),a.a.EMPTY):this.isStopped?(t.complete(),a.a.EMPTY):(this.observers.push(t),new u(this,t))},e.prototype.asObservable=function(){var t=new i.a;return t.source=this,t},e.create=function(t,e){return new d(t,e)},e}(i.a),d=function(t){function e(e,n){var r=t.call(this)||this;return r.destination=e,r.source=n,r}return r.__extends(e,t),e.prototype.next=function(t){var e=this.destination;e&&e.next&&e.next(t)},e.prototype.error=function(t){var e=this.destination;e&&e.error&&this.destination.error(t)},e.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},e.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):a.a.EMPTY},e}(h)},KQya:function(t,e,n){"use strict";var r=n("mrSG"),i=1,o={},a=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r}return r.__extends(e,t),e.prototype.requestAsyncId=function(e,n,r){return void 0===r&&(r=0),null!==r&&r>0?t.prototype.requestAsyncId.call(this,e,n,r):(e.actions.push(this),e.scheduled||(e.scheduled=(a=e.flush.bind(e,null),s=i++,o[s]=a,Promise.resolve().then(function(){return function(t){var e=o[t];e&&e()}(s)}),s)));var a,s},e.prototype.recycleAsyncId=function(e,n,r){if(void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0)return t.prototype.recycleAsyncId.call(this,e,n,r);0===e.actions.length&&(delete o[n],e.scheduled=void 0)},e}(function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r.pending=!1,r}return r.__extends(e,t),e.prototype.schedule=function(t,e){if(void 0===e&&(e=0),this.closed)return this;this.state=t;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this},e.prototype.requestAsyncId=function(t,e,n){return void 0===n&&(n=0),setInterval(t.flush.bind(t,this),n)},e.prototype.recycleAsyncId=function(t,e,n){if(void 0===n&&(n=0),null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)},e.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,e){var n=!1,r=void 0;try{this.work(t)}catch(t){n=!0,r=!!t&&t||new Error(t)}if(n)return this.unsubscribe(),r},e.prototype._unsubscribe=function(){var t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null},e}(function(t){function e(e,n){return t.call(this)||this}return r.__extends(e,t),e.prototype.schedule=function(t,e){return void 0===e&&(e=0),this},e}(n("pugT").a))),s=n("siIJ"),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.__extends(e,t),e.prototype.flush=function(t){this.active=!0,this.scheduled=void 0;var e,n=this.actions,r=-1,i=n.length;t=t||n.shift();do{if(e=t.execute(t.state,t.delay))break}while(++r<i&&(t=n.shift()));if(this.active=!1,e){for(;++r<i&&(t=n.shift());)t.unsubscribe();throw e}},e}(function(t){function e(n,r){void 0===r&&(r=s.Scheduler.now);var i=t.call(this,n,function(){return e.delegate&&e.delegate!==i?e.delegate.now():r()})||this;return i.actions=[],i.active=!1,i.scheduled=void 0,i}return r.__extends(e,t),e.prototype.schedule=function(n,r,i){return void 0===r&&(r=0),e.delegate&&e.delegate!==this?e.delegate.schedule(n,r,i):t.prototype.schedule.call(this,n,r,i)},e.prototype.flush=function(t){var e=this.actions;if(this.active)e.push(t);else{var n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}},e}(s.Scheduler));n.d(e,"asap",function(){return l});var l=new u(a)},KcsV:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n("oUad"),o=n("h6Fy"),a=n("0kFh"),s=n("0kFh"),u=n("7jcd"),l=n("Wb6W");e.SyncPoint=function(){function t(){this.views_={}}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return a.assert(r,"Reference.ts has not been loaded"),r},set:function(t){a.assert(!r,"__referenceConstructor has already been defined"),r=t},enumerable:!0,configurable:!0}),t.prototype.isEmpty=function(){return s.isEmpty(this.views_)},t.prototype.applyOperation=function(t,e,n){var r=t.source.queryId;if(null!==r){var i=s.safeGet(this.views_,r);return a.assert(null!=i,"SyncTree gave us an op for an invalid query."),i.applyOperation(t,e,n)}var o=[];return s.forEach(this.views_,function(r,i){o=o.concat(i.applyOperation(t,e,n))}),o},t.prototype.addEventRegistration=function(t,e,n,r,a){var c=t.queryIdentifier(),h=s.safeGet(this.views_,c);if(!h){var d=n.calcCompleteEventCache(a?r:null),p=!1;d?p=!0:r instanceof o.ChildrenNode?(d=n.calcCompleteEventChildren(r),p=!1):(d=o.ChildrenNode.EMPTY_NODE,p=!1);var f=new u.ViewCache(new i.CacheNode(d,p,!1),new i.CacheNode(r,a,!1));h=new l.View(t,f),this.views_[c]=h}return h.addEventRegistration(e),h.getInitialEvents(e)},t.prototype.removeEventRegistration=function(e,n,r){var i=e.queryIdentifier(),o=[],a=[],u=this.hasCompleteView();if("default"===i){var l=this;s.forEach(this.views_,function(t,e){a=a.concat(e.removeEventRegistration(n,r)),e.isEmpty()&&(delete l.views_[t],e.getQuery().getQueryParams().loadsAllData()||o.push(e.getQuery()))})}else{var c=s.safeGet(this.views_,i);c&&(a=a.concat(c.removeEventRegistration(n,r)),c.isEmpty()&&(delete this.views_[i],c.getQuery().getQueryParams().loadsAllData()||o.push(c.getQuery())))}return u&&!this.hasCompleteView()&&o.push(new t.__referenceConstructor(e.repo,e.path)),{removed:o,events:a}},t.prototype.getQueryViews=function(){var t=this;return Object.keys(this.views_).map(function(e){return t.views_[e]}).filter(function(t){return!t.getQuery().getQueryParams().loadsAllData()})},t.prototype.getCompleteServerCache=function(t){var e=null;return s.forEach(this.views_,function(n,r){e=e||r.getCompleteServerCache(t)}),e},t.prototype.viewForQuery=function(t){if(t.getQueryParams().loadsAllData())return this.getCompleteView();var e=t.queryIdentifier();return s.safeGet(this.views_,e)},t.prototype.viewExistsForQuery=function(t){return null!=this.viewForQuery(t)},t.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},t.prototype.getCompleteView=function(){return s.findValue(this.views_,function(t){return t.getQuery().getQueryParams().loadsAllData()})||null},t}()},KhEm:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n("mrSG"),i=n("K9Ia"),o=n("6blF"),a=(n("FFOo"),n("pugT")),s=n("yGWI"),u=function(t){function e(e,n){var r=t.call(this)||this;return r.source=e,r.subjectFactory=n,r._refCount=0,r._isComplete=!1,r}return r.__extends(e,t),e.prototype._subscribe=function(t){return this.getSubject().subscribe(t)},e.prototype.getSubject=function(){var t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject},e.prototype.connect=function(){var t=this._connection;return t||(this._isComplete=!1,(t=this._connection=new a.a).add(this.source.subscribe(new c(this.getSubject(),this))),t.closed?(this._connection=null,t=a.a.EMPTY):this._connection=t),t},e.prototype.refCount=function(){return Object(s.a)()(this)},e}(o.a).prototype,l={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:u._subscribe},_isComplete:{value:u._isComplete,writable:!0},getSubject:{value:u.getSubject},connect:{value:u.connect},refCount:{value:u.refCount}},c=function(t){function e(e,n){var r=t.call(this,e)||this;return r.connectable=n,r}return r.__extends(e,t),e.prototype._error=function(e){this._unsubscribe(),t.prototype._error.call(this,e)},e.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}},e}(i.b)},"L/V9":function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},LOEa:function(t,e,n){(function(){var t,e=n("geFX").default,r=r||{},i=this;function o(t){return"string"==typeof t}function a(t){return"boolean"==typeof t}function s(){}function u(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e}function l(t){return null===t}function c(t){return"array"==u(t)}function h(t){var e=u(t);return"array"==e||"object"==e&&"number"==typeof t.length}function d(t){return"function"==u(t)}function p(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var f="closure_uid_"+(1e9*Math.random()>>>0),m=0;function v(t,e,n){return t.call.apply(t.bind,arguments)}function g(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function y(t,e,n){return(y=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?v:g).apply(null,arguments)}function _(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var b=Date.now||function(){return+new Date};function w(t,e){function n(){}n.prototype=e.prototype,t.lb=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.$c=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function x(t){t.prototype.then=t.prototype.then,t.prototype.$goog_Thenable=!0}function E(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(t){return!1}}function S(t){if(Error.captureStackTrace)Error.captureStackTrace(this,S);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function T(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");S.call(this,n+t[r])}function M(t,e){throw new T("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function C(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function A(t,e){t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}function P(){this.b=this.a=null}w(S,Error),S.prototype.name="CustomError",w(T,S),T.prototype.name="AssertionError",C.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var O=new C(function(){return new L},function(t){t.reset()});function R(){var t=ft,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function L(){this.next=this.b=this.a=null}P.prototype.add=function(t,e){var n=O.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},L.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},L.prototype.reset=function(){this.next=this.b=this.a=null};var I=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(o(t))return o(e)&&1==e.length?t.indexOf(e,0):-1;for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},N=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i=o(t)?t.split(""):t,a=0;a<r;a++)a in i&&e.call(n,i[a],a,t)},D=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i=o(t)?t.split(""):t,a=0;a<n;a++)a in i&&(r[a]=e.call(void 0,i[a],a,t));return r},k=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=o(t)?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function F(t,e){return 0<=I(t,e)}function j(t,e){var n;return(n=0<=(e=I(t,e)))&&Array.prototype.splice.call(t,e,1),n}function U(t,e){!function(t,e){var n=t.length,r=o(t)?t.split(""):t;for(--n;0<=n;--n)n in r&&e.call(void 0,r[n],n,t)}(t,function(n,r){e.call(void 0,n,r,t)&&Array.prototype.splice.call(t,r,1)})}function B(t){return Array.prototype.concat.apply([],arguments)}function G(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function V(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}var z=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function H(t){return J.test(t)?(-1!=t.indexOf("&")&&(t=t.replace(q,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(X,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(Y,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(K,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(Z,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(Q,"&#0;")),t):t}var W,q=/&/g,X=/</g,Y=/>/g,K=/"/g,Z=/'/g,Q=/\x00/g,J=/[\x00&<>"']/;function $(t,e){return-1!=t.indexOf(e)}function tt(t,e){return t<e?-1:t>e?1:0}t:{var et=i.navigator;if(et){var nt=et.userAgent;if(nt){W=nt;break t}}W=""}function rt(t){return $(W,t)}function it(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function ot(t){for(var e in t)return!1;return!0}function at(t){var e,n={};for(e in t)n[e]=t[e];return n}var st,ut,lt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ct(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<lt.length;o++)n=lt[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function ht(t){i.setTimeout(function(){throw t},0)}function dt(t,e){ut||function(){if(-1!=String(i.Promise).indexOf("[native code]")){var t=i.Promise.resolve(void 0);ut=function(){t.then(mt)}}else ut=function(){var t=mt;!d(i.setImmediate)||i.Window&&i.Window.prototype&&!rt("Edge")&&i.Window.prototype.setImmediate==i.setImmediate?(st||(st=function(){var t=i.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!rt("Presto")&&(t=function(){var t=document.createElement("IFRAME");t.style.display="none",t.src="",document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.write(""),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=y(function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()},this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),void 0!==t&&!rt("Trident")&&!rt("MSIE")){var e=new t,n={},r=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).rb;n.rb=null,t()}},function(t){r.next={rb:t},r=r.next,e.port2.postMessage(0)}}return"undefined"!=typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(t){var e=document.createElement("SCRIPT");e.onreadystatechange=function(){e.onreadystatechange=null,e.parentNode.removeChild(e),e=null,t(),t=null},document.documentElement.appendChild(e)}:function(t){i.setTimeout(t,0)}}()),st(t)):i.setImmediate(t)}}(),pt||(ut(),pt=!0),ft.add(t,e)}var pt=!1,ft=new P;function mt(){for(var t;t=R();){try{t.a.call(t.b)}catch(t){ht(t)}A(O,t)}pt=!1}function vt(t,e){if(this.a=gt,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=s)try{var n=this;t.call(e,function(t){At(n,yt,t)},function(t){if(!(t instanceof Dt))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(t){}At(n,_t,t)})}catch(t){At(this,_t,t)}}var gt=0,yt=2,_t=3;function bt(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}bt.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var wt=new C(function(){return new bt},function(t){t.reset()});function xt(t,e,n){var r=wt.get();return r.g=t,r.b=e,r.f=n,r}function Et(t){if(t instanceof vt)return t;var e=new vt(s);return At(e,yt,t),e}function St(t){return new vt(function(e,n){n(t)})}function Tt(t,e,n){Pt(t,e,n,null)||dt(_(e,t))}function Mt(t,e){t.b||t.a!=yt&&t.a!=_t||Ot(t),t.f?t.f.next=e:t.b=e,t.f=e}function Ct(t,e,n,r){var i=xt(null,null,null);return i.a=new vt(function(t,o){i.g=e?function(n){try{var i=e.call(r,n);t(i)}catch(t){o(t)}}:t,i.b=n?function(e){try{var i=n.call(r,e);void 0===i&&e instanceof Dt?o(e):t(i)}catch(t){o(t)}}:o}),i.a.c=t,Mt(t,i),i.a}function At(t,e,n){t.a==gt&&(t===n&&(e=_t,n=new TypeError("Promise cannot resolve to itself")),t.a=1,Pt(n,t.Jc,t.Kc,t)||(t.i=n,t.a=e,t.c=null,Ot(t),e!=_t||n instanceof Dt||function(t,e){t.g=!0,dt(function(){t.g&&Nt.call(null,e)})}(t,n)))}function Pt(t,e,n,r){if(t instanceof vt)return Mt(t,xt(e||s,n||null,r)),!0;if(E(t))return t.then(e,n,r),!0;if(p(t))try{var i=t.then;if(d(i))return function(t,e,n,r,i){function o(t){a||(a=!0,r.call(i,t))}var a=!1;try{e.call(t,function(t){a||(a=!0,n.call(i,t))},o)}catch(t){o(t)}}(t,i,e,n,r),!0}catch(t){return n.call(r,t),!0}return!1}function Ot(t){t.h||(t.h=!0,dt(t.Ub,t))}function Rt(t){var e=null;return t.b&&(t.b=(e=t.b).next,e.next=null),t.b||(t.f=null),e}function Lt(t,e,n,r){if(n==_t&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,It(e,n,r);else try{e.c?e.g.call(e.f):It(e,n,r)}catch(t){Nt.call(null,t)}A(wt,e)}function It(t,e,n){e==yt?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}vt.prototype.then=function(t,e,n){return Ct(this,d(t)?t:null,d(e)?e:null,n)},x(vt),(t=vt.prototype).ga=function(t,e){return(t=xt(t,t,e)).c=!0,Mt(this,t),this},t.o=function(t,e){return Ct(this,null,t,e)},t.cancel=function(t){this.a==gt&&dt(function(){!function t(e,n){if(e.a==gt)if(e.c){var r=e.c;if(r.b){for(var i=0,o=null,a=null,s=r.b;s&&(s.c||(i++,s.a==e&&(o=s),!(o&&1<i)));s=s.next)o||(a=s);o&&(r.a==gt&&1==i?t(r,n):(a?((i=a).next==r.f&&(r.f=i),i.next=i.next.next):Rt(r),Lt(r,o,_t,n)))}e.c=null}else At(e,_t,n)}(this,new Dt(t))},this)},t.Jc=function(t){this.a=gt,At(this,yt,t)},t.Kc=function(t){this.a=gt,At(this,_t,t)},t.Ub=function(){for(var t;t=Rt(this);)Lt(this,t,this.a,this.i);this.h=!1};var Nt=ht;function Dt(t){S.call(this,t)}function kt(){0!=Ft&&(jt[this[f]||(this[f]=++m)]=this),this.pa=this.pa,this.oa=this.oa}w(Dt,S),Dt.prototype.name="cancel";var Ft=0,jt={};function Ut(t){if(!t.pa&&(t.pa=!0,t.ua(),0!=Ft)){var e=t[f]||(t[f]=++m);if(0!=Ft&&t.oa&&0<t.oa.length)throw Error(t+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete jt[e]}}function Bt(t){return Bt[" "](t),t}kt.prototype.pa=!1,kt.prototype.ua=function(){if(this.oa)for(;this.oa.length;)this.oa.shift()()},Bt[" "]=s;var Gt,Vt,zt=rt("Opera"),Ht=rt("Trident")||rt("MSIE"),Wt=rt("Edge"),qt=Wt||Ht,Xt=rt("Gecko")&&!($(W.toLowerCase(),"webkit")&&!rt("Edge"))&&!(rt("Trident")||rt("MSIE"))&&!rt("Edge"),Yt=$(W.toLowerCase(),"webkit")&&!rt("Edge");function Kt(){var t=i.document;return t?t.documentMode:void 0}t:{var Zt="",Qt=(Vt=W,Xt?/rv:([^\);]+)(\)|;)/.exec(Vt):Wt?/Edge\/([\d\.]+)/.exec(Vt):Ht?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Vt):Yt?/WebKit\/(\S+)/.exec(Vt):zt?/(?:Version)[ \/]?(\S+)/.exec(Vt):void 0);if(Qt&&(Zt=Qt?Qt[1]:""),Ht){var Jt=Kt();if(null!=Jt&&Jt>parseFloat(Zt)){Gt=String(Jt);break t}}Gt=Zt}var $t,te={};function ee(t){return function(t,e){var n=te;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,function(){for(var e=0,n=z(String(Gt)).split("."),r=z(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;e=tt(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||tt(0==a[2].length,0==s[2].length)||tt(a[2],s[2]),a=a[3],s=s[3]}while(0==e)}return 0<=e})}var ne=i.document;$t=ne&&Ht?Kt()||("CSS1Compat"==ne.compatMode?parseInt(Gt,10):5):void 0;var re=Object.freeze||function(t){return t},ie=!Ht||9<=Number($t),oe=Ht&&!ee("9"),ae=function(){if(!i.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});return i.addEventListener("test",s,e),i.removeEventListener("test",s,e),t}();function se(t,e){this.type=t,this.b=this.target=e,this.Eb=!0}function ue(t,e){if(se.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(Xt){t:{try{Bt(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,null===r?(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0):(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=o(t.pointerType)?t.pointerType:le[t.pointerType]||"",this.a=t,t.defaultPrevented&&this.c()}}se.prototype.c=function(){this.Eb=!1},w(ue,se);var le=re({2:"touch",3:"pen",4:"mouse"});ue.prototype.c=function(){ue.lb.c.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,oe)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}},ue.prototype.g=function(){return this.a};var ce="closure_listenable_"+(1e6*Math.random()|0),he=0;function de(t){t.ma=!0,t.listener=null,t.proxy=null,t.src=null,t.La=null}function pe(t){this.src=t,this.a={},this.b=0}function fe(t,e){var n=e.type;n in t.a&&j(t.a[n],e)&&(de(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function me(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.ma&&o.listener==e&&o.capture==!!n&&o.La==r)return i}return-1}pe.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var a=me(t,e,r,i);return-1<a?(e=t[a],n||(e.Ha=!1)):((e=new function(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.La=i,this.key=++he,this.ma=this.Ha=!1}(e,this.src,o,!!r,i)).Ha=n,t.push(e)),e};var ve="closure_lm_"+(1e6*Math.random()|0),ge={};function ye(t,e,n,r,i){if(r&&r.once)be(t,e,n,r,i);else if(c(e))for(var o=0;o<e.length;o++)ye(t,e[o],n,r,i);else n=Pe(n),t&&t[ce]?Re(t,e,n,p(r)?!!r.capture:!!r,i):_e(t,e,n,!1,r,i)}function _e(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=p(i)?!!i.capture:!!i,s=Ce(t);if(s||(t[ve]=s=new pe(t)),!(n=s.add(e,n,r,a,o)).proxy)if(r=function(){var t=Me,e=ie?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)ae||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Ee(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}}function be(t,e,n,r,i){if(c(e))for(var o=0;o<e.length;o++)be(t,e[o],n,r,i);else n=Pe(n),t&&t[ce]?Le(t,e,n,p(r)?!!r.capture:!!r,i):_e(t,e,n,!0,r,i)}function we(t,e,n,r,i){if(c(e))for(var o=0;o<e.length;o++)we(t,e[o],n,r,i);else r=p(r)?!!r.capture:!!r,n=Pe(n),t&&t[ce]?(t=t.u,(e=String(e).toString())in t.a&&-1<(n=me(o=t.a[e],n,r,i))&&(de(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=Ce(t))&&(e=t.a[e.toString()],t=-1,e&&(t=me(e,n,r,i)),(n=-1<t?e[t]:null)&&xe(n))}function xe(t){if("number"!=typeof t&&t&&!t.ma){var e=t.src;if(e&&e[ce])fe(e.u,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Ee(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Ce(e))?(fe(n,t),0==n.b&&(n.src=null,e[ve]=null)):de(t)}}}function Ee(t){return t in ge?ge[t]:ge[t]="on"+t}function Se(t,e,n,r){var i=!0;if((t=Ce(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.ma&&(o=Te(o,r),i=i&&!1!==o)}return i}function Te(t,e){var n=t.listener,r=t.La||t.src;return t.Ha&&xe(t),n.call(r,e)}function Me(t,e){if(t.ma)return!0;if(!ie){if(!e)t:{e=["window","event"];for(var n=i,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new ue(r=e,this),n=!0,!(0>r.keyCode||void 0!=r.returnValue)){t:{var o=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(t){o=!0}(o||void 0==r.returnValue)&&(r.returnValue=!0)}for(r=[],o=e.b;o;o=o.parentNode)r.push(o);for(t=t.type,o=r.length-1;0<=o;o--){e.b=r[o];var a=Se(r[o],t,!0,e);n=n&&a}for(o=0;o<r.length;o++)e.b=r[o],a=Se(r[o],t,!1,e),n=n&&a}return n}return Te(t,new ue(e,this))}function Ce(t){return(t=t[ve])instanceof pe?t:null}var Ae="__closure_events_fn_"+(1e9*Math.random()>>>0);function Pe(t){return d(t)?t:(t[Ae]||(t[Ae]=function(e){return t.handleEvent(e)}),t[Ae])}function Oe(){kt.call(this),this.u=new pe(this),this.Mb=this,this.Ta=null}function Re(t,e,n,r,i){t.u.add(String(e),n,!1,r,i)}function Le(t,e,n,r,i){t.u.add(String(e),n,!0,r,i)}function Ie(t,e,n,r){if(!(e=t.u.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.ma&&a.capture==n){var s=a.listener,u=a.La||a.src;a.Ha&&fe(t.u,a),i=!1!==s.call(u,r)&&i}}return i&&0!=r.Eb}function Ne(t,e,n){if(d(t))n&&(t=y(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=y(t.handleEvent,t)}return 2147483647<Number(e)?-1:i.setTimeout(t,e||0)}function De(t){var e=null;return new vt(function(n,r){-1==(e=Ne(function(){n(void 0)},t))&&r(Error("Failed to schedule timer."))}).o(function(t){throw i.clearTimeout(e),t})}function ke(t){if(t.R&&"function"==typeof t.R)return t.R();if(o(t))return t.split("");if(h(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function Fe(t){if(t.T&&"function"==typeof t.T)return t.T();if(!t.R||"function"!=typeof t.R){if(h(t)||o(t)){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function je(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof je)for(n=t.T(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Ue(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Be(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Be(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Be(t,e){return Object.prototype.hasOwnProperty.call(t,e)}w(Oe,kt),Oe.prototype[ce]=!0,Oe.prototype.addEventListener=function(t,e,n,r){ye(this,t,e,n,r)},Oe.prototype.removeEventListener=function(t,e,n,r){we(this,t,e,n,r)},Oe.prototype.dispatchEvent=function(t){var e,n=this.Ta;if(n)for(e=[];n;n=n.Ta)e.push(n);n=this.Mb;var r=t.type||t;if(o(t))t=new se(t,n);else if(t instanceof se)t.target=t.target||n;else{var i=t;ct(t=new se(r,n),i)}if(i=!0,e)for(var a=e.length-1;0<=a;a--){var s=t.b=e[a];i=Ie(s,r,!0,t)&&i}if(i=Ie(s=t.b=n,r,!0,t)&&i,i=Ie(s,r,!1,t)&&i,e)for(a=0;a<e.length;a++)i=Ie(s=t.b=e[a],r,!1,t)&&i;return i},Oe.prototype.ua=function(){if(Oe.lb.ua.call(this),this.u){var t,e=this.u;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)de(n[r]);delete e.a[t],e.b--}}this.Ta=null},(t=je.prototype).R=function(){Ue(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.T=function(){return Ue(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return Be(this.b,t)?this.b[t]:e},t.set=function(t,e){Be(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Ge=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ve(t,e){if(this.b=this.l=this.c="",this.i=null,this.h=this.g="",this.f=!1,t instanceof Ve){this.f=void 0!==e?e:t.f,ze(this,t.c),this.l=t.l,this.b=t.b,He(this,t.i),this.g=t.g,e=t.a;var n=new on;n.c=e.c,e.a&&(n.a=new je(e.a),n.b=e.b),We(this,n),this.h=t.h}else t&&(n=String(t).match(Ge))?(this.f=!!e,ze(this,n[1]||"",!0),this.l=Ze(n[2]||""),this.b=Ze(n[3]||"",!0),He(this,n[4]),this.g=Ze(n[5]||"",!0),We(this,n[6]||"",!0),this.h=Ze(n[7]||"")):(this.f=!!e,this.a=new on(null,this.f))}function ze(t,e,n){t.c=n?Ze(e,!0):e,t.c&&(t.c=t.c.replace(/:$/,""))}function He(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.i=e}else t.i=null}function We(t,e,n){e instanceof on?(t.a=e,function(t,e){e&&!t.f&&(an(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(un(this,e),cn(this,n,t))},t)),t.f=e}(t.a,t.f)):(n||(e=Qe(e,nn)),t.a=new on(e,t.f))}function qe(t,e,n){t.a.set(e,n)}function Xe(t,e){return t.a.get(e)}function Ye(t){return t instanceof Ve?new Ve(t):new Ve(t,void 0)}function Ke(t,e){var n=new Ve(null,void 0);return ze(n,"https"),t&&(n.b=t),e&&(n.g=e),n}function Ze(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Qe(t,e,n){return o(t)?(t=encodeURI(t).replace(e,Je),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Je(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Ve.prototype.toString=function(){var t=[],e=this.c;e&&t.push(Qe(e,$e,!0),":");var n=this.b;return(n||"file"==e)&&(t.push("//"),(e=this.l)&&t.push(Qe(e,$e,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.i)&&t.push(":",String(n))),(n=this.g)&&(this.b&&"/"!=n.charAt(0)&&t.push("/"),t.push(Qe(n,"/"==n.charAt(0)?en:tn,!0))),(n=this.a.toString())&&t.push("?",n),(n=this.h)&&t.push("#",Qe(n,rn)),t.join("")};var $e=/[#\/\?@]/g,tn=/[#\?:]/g,en=/[#\?]/g,nn=/[#\?@]/g,rn=/#/g;function on(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function an(t){t.a||(t.a=new je,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function sn(t){var e=Fe(t);if(void 0===e)throw Error("Keys are undefined");var n=new on(null,void 0);t=ke(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];c(o)?cn(n,i,o):n.add(i,o)}return n}function un(t,e){an(t),e=hn(t,e),Be(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Be((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Ue(t)))}function ln(t,e){return an(t),e=hn(t,e),Be(t.a.b,e)}function cn(t,e,n){un(t,e),0<n.length&&(t.c=null,t.a.set(hn(t,e),G(n)),t.b+=n.length)}function hn(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(t=on.prototype).add=function(t,e){an(this),this.c=null,t=hn(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(t,e){an(this),this.a.forEach(function(n,r){N(n,function(n){t.call(e,n,r,this)},this)},this)},t.T=function(){an(this);for(var t=this.a.R(),e=this.a.T(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.R=function(t){an(this);var e=[];if(o(t))ln(this,t)&&(e=B(e,this.a.get(hn(this,t))));else{t=this.a.R();for(var n=0;n<t.length;n++)e=B(e,t[n])}return e},t.set=function(t,e){return an(this),this.c=null,ln(this,t=hn(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return 0<(t=t?this.R(t):[]).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.T(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.R(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.c=t.join("&")};var dn=!Ht||9<=Number($t);function pn(){this.a="",this.b=mn}function fn(t){return t instanceof pn&&t.constructor===pn&&t.b===mn?t.a:(M("expected object of type Const, got '"+t+"'"),"type_error:Const")}pn.prototype.la=!0,pn.prototype.ja=function(){return this.a},pn.prototype.toString=function(){return"Const{"+this.a+"}"};var mn={};function vn(t){var e=new pn;return e.a=t,e}function gn(){this.a="",this.b=xn}function yn(t){return t instanceof gn&&t.constructor===gn&&t.b===xn?t.a:(M("expected object of type TrustedResourceUrl, got '"+t+"' of type "+u(t)),"type_error:TrustedResourceUrl")}function _n(t,e){var n=fn(t);if(!wn.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return function(t){var e=new gn;return e.a=t,e}(t=n.replace(bn,function(t,r){if(!Object.prototype.hasOwnProperty.call(e,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(e));return(t=e[r])instanceof pn?fn(t):encodeURIComponent(String(t))}))}vn(""),gn.prototype.la=!0,gn.prototype.ja=function(){return this.a},gn.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var bn=/%{(\w+)}/g,wn=/^(?:https:)?\/\/[0-9a-z.:[\]-]+\/|^\/[^\/\\]|^about:blank#/i,xn={};function En(){this.a="",this.b=Cn}function Sn(t){return t instanceof En&&t.constructor===En&&t.b===Cn?t.a:(M("expected object of type SafeUrl, got '"+t+"' of type "+u(t)),"type_error:SafeUrl")}En.prototype.la=!0,En.prototype.ja=function(){return this.a},En.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Tn=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Mn(t){return t instanceof En?t:(t=t.la?t.ja():String(t),Tn.test(t)||(t="about:invalid#zClosurez"),An(t))}var Cn={};function An(t){var e=new En;return e.a=t,e}function Pn(){this.a="",this.b=On}An("about:blank"),Pn.prototype.la=!0,Pn.prototype.ja=function(){return this.a},Pn.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var On={};function Rn(t){var e=new Pn;return e.a=t,e}function Ln(t){var e=document;return o(t)?e.getElementById(t):t}function In(t,e){it(e,function(e,n){e&&e.la&&(e=e.ja()),"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:Nn.hasOwnProperty(n)?t.setAttribute(Nn[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e})}Rn("<!DOCTYPE html>"),Rn(""),Rn("<br>");var Nn={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function Dn(t){if(t&&"number"==typeof t.length){if(p(t))return"function"==typeof t.item||"string"==typeof t.item;if(d(t))return"function"==typeof t.item}return!1}function kn(t){var e=[];return function t(e,n,r){if(null==n)r.push("null");else{if("object"==typeof n){if(c(n)){var i=n;n=i.length,r.push("[");for(var o="",a=0;a<n;a++)r.push(o),t(e,i[a],r),o=",";return void r.push("]")}if(!(n instanceof String||n instanceof Number||n instanceof Boolean)){for(i in r.push("{"),o="",n)Object.prototype.hasOwnProperty.call(n,i)&&"function"!=typeof(a=n[i])&&(r.push(o),Un(i,r),r.push(":"),t(e,a,r),o=",");return void r.push("}")}n=n.valueOf()}switch(typeof n){case"string":Un(n,r);break;case"number":r.push(isFinite(n)&&!isNaN(n)?String(n):"null");break;case"boolean":r.push(String(n));break;case"function":r.push("null");break;default:throw Error("Unknown type: "+typeof n)}}}(new function(){},t,e),e.join("")}var Fn={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},jn=/\uffff/.test("\uffff")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function Un(t,e){e.push('"',t.replace(jn,function(t){var e=Fn[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),Fn[t]=e),e}),'"')}function Bn(){var t=ir();return Ht&&!!$t&&11==$t||/Edge\/\d+/.test(t)}function Gn(){return i.window&&i.window.location.href||self&&self.location&&self.location.href||""}function Vn(t,e){e=e||i.window;var n="about:blank";t&&(n=Sn(Mn(t))),e.location.href=n}function zn(t){return!!((t=(t||ir()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function Hn(t){t=t||i.window;try{t.close()}catch(t){}}function Wn(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(a in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=ir().toLowerCase(),r&&(e.target=r,$(n,"crios/")&&(e.target="_blank")),er(ir())==$n&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof En?n:Mn(void 0!==n.href?n.href:String(n)),n=t.target||n.target,i=[],t)switch(a){case"width":case"height":case"top":case"left":i.push(a+"="+t[a]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(a+"="+(t[a]?1:0))}var a=i.join(",");if((rt("iPhone")&&!rt("iPod")&&!rt("iPad")||rt("iPad")||rt("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(a=r.document.createElement("A"),e instanceof En||e instanceof En||(e=e.la?e.ja():String(e),Tn.test(e)||(e="about:invalid#zClosurez"),e=An(e)),a.href=Sn(e),a.setAttribute("target",n),t.noreferrer&&a.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),a.dispatchEvent(t),a={}):t.noreferrer?(a=r.open("",n,a),t=Sn(e),a&&(qt&&$(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),a.opener=null,vn("b/12014412, meta tag with sanitized URL"),t=Rn(t='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+H(t)+'">'),a.document.write(function(t){return t instanceof Pn&&t.constructor===Pn&&t.b===On?t.a:(M("expected object of type SafeHtml, got '"+t+"' of type "+u(t)),"type_error:SafeHtml")}(t)),a.document.close())):(a=r.open(Sn(e),n,a))&&t.noopener&&(a.opener=null),a)try{a.focus()}catch(t){}return a}var qn=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/;function Xn(){var t=null;return new vt(function(e){"complete"==i.document.readyState?e():(t=function(){e()},be(window,"load",t))}).o(function(e){throw we(window,"load",t),e})}function Yn(t){return t=t||ir(),!("file:"!==lr()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function Kn(){var t=i.window;try{return!(!t||t==t.top)}catch(t){return!1}}function Zn(){return"object"!=typeof i.window&&"function"==typeof i.importScripts}function Qn(){return e.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":e.INTERNAL.hasOwnProperty("node")?"Node":Zn()?"Worker":"Browser"}function Jn(){var t=Qn();return"ReactNative"===t||"Node"===t}var $n="Firefox",tr="Chrome";function er(t){var e=t.toLowerCase();return $(e,"opera/")||$(e,"opr/")||$(e,"opios/")?"Opera":$(e,"iemobile")?"IEMobile":$(e,"msie")||$(e,"trident/")?"IE":$(e,"edge/")?"Edge":$(e,"firefox/")?$n:$(e,"silk/")?"Silk":$(e,"blackberry")?"Blackberry":$(e,"webos")?"Webos":!$(e,"safari/")||$(e,"chrome/")||$(e,"crios/")||$(e,"android")?!$(e,"chrome/")&&!$(e,"crios/")||$(e,"edge/")?$(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":tr:"Safari"}var nr={Pc:"FirebaseCore-web",Rc:"FirebaseUI-web"};function rr(t,e){e=e||[];var n,r=[],i={};for(n in nr)i[nr[n]]=!0;for(n=0;n<e.length;n++)void 0!==i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=Qn())?r=er(i=ir()):"Worker"===r&&(r=er(i=ir())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function ir(){return i.navigator&&i.navigator.userAgent||""}function or(t,e){t=t.split("."),e=e||i;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function ar(){try{var t=i.localStorage,e=fr();if(t)return t.setItem(e,"1"),t.removeItem(e),!Bn()||!!i.indexedDB}catch(t){return Zn()&&!!i.indexedDB}return!1}function sr(){return(ur()||"chrome-extension:"===lr()||Yn())&&!Jn()&&ar()&&!Zn()}function ur(){return"http:"===lr()||"https:"===lr()}function lr(){return i.location&&i.location.protocol||null}function cr(t){return!zn(t=t||ir())&&er(t)!=$n}function hr(t){return void 0===t?null:kn(t)}function dr(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!==t[e]&&void 0!==t[e]&&(n[e]=t[e]);return n}function pr(t){if(null!==t)return JSON.parse(t)}function fr(t){return t||Math.floor(1e9*Math.random()).toString()}function mr(t){return"Safari"!=er(t=t||ir())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function vr(){var t=i.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function gr(){var t=i.navigator;return!t||"boolean"!=typeof t.onLine||!ur()&&"chrome-extension:"!==lr()&&void 0===t.connection||t.onLine}function yr(t,e){if(t>e)throw Error("Short delay should be less than long delay!");this.c=t,this.b=e,t=ir(),e=Qn(),this.a=zn(t)||"ReactNative"===e}function _r(){var t=i.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function br(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(t){}return null}function wr(){return!(!or("fireauth.oauthhelper",i)&&!or("fireauth.iframe",i))}yr.prototype.get=function(){return this.a?this.b:this.c};var xr,Er={};try{var Sr={};Object.defineProperty(Sr,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Sr,"abcd",{configurable:!0,enumerable:!0,value:2}),xr=2==Sr.abcd}catch(Vt){xr=!1}function Tr(t,e,n){xr?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function Mr(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&Tr(t,n,e[n])}function Cr(t){var e={};return Mr(e,t),e}function Ar(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)Tr(e,n,Ar(t[n]));return e}function Pr(t,e){this.code=Rr+t,this.message=e||Lr[t]||""}function Or(t){var e=t&&t.code;return e?new Pr(e.substring(Rr.length),t.message):null}w(Pr,Error),Pr.prototype.C=function(){return{code:this.code,message:this.message}},Pr.prototype.toJSON=function(){return this.C()};var Rr="auth/",Lr={"argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","user-cancelled":"User did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."};function Ir(t){var e=t[Fr];if(void 0===e)throw new Pr("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new Pr("invalid-continue-uri");this.h=e,this.b=this.a=null,this.g=!1;var n=t[Nr];if(n&&"object"==typeof n){e=n[Br];var r=n[jr];if(n=n[Ur],"string"==typeof e&&e.length){if(this.a=e,void 0!==r&&"boolean"!=typeof r)throw new Pr("argument-error",jr+" property must be a boolean when specified.");if(this.g=!!r,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new Pr("argument-error",Ur+" property must be a non empty string when specified.");this.b=n||null}else{if(void 0!==e)throw new Pr("argument-error",Br+" property must be a non empty string when specified.");if(void 0!==r||void 0!==n)throw new Pr("missing-android-pkg-name")}}else if(void 0!==n)throw new Pr("argument-error",Nr+" property must be a non null object when specified.");if(this.f=null,(e=t[kr])&&"object"==typeof e){if("string"==typeof(e=e[Gr])&&e.length)this.f=e;else if(void 0!==e)throw new Pr("argument-error",Gr+" property must be a non empty string when specified.")}else if(void 0!==e)throw new Pr("argument-error",kr+" property must be a non null object when specified.");if(void 0!==(t=t[Dr])&&"boolean"!=typeof t)throw new Pr("argument-error",Dr+" property must be a boolean when specified.");this.c=!!t}var Nr="android",Dr="handleCodeInApp",kr="iOS",Fr="url",jr="installApp",Ur="minimumVersion",Br="packageName",Gr="bundleId";function Vr(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e)null===e[n]&&delete e[n];return e}var zr=null,Hr=null;function Wr(t){this.c=t.sub,b(),this.a=t.provider_id||t.firebase&&t.firebase.sign_in_provider||null,this.b=!!t.is_anonymous||"anonymous"==this.a}function qr(t){if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{var r=JSON.parse(function(t){var e="";return function(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=Hr[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}!function(){if(!zr){zr={},Hr={};for(var t=0;65>t;t++)zr[t]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(t),Hr[zr[t]]=t,62<=t&&(Hr["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.".charAt(t)]=t)}}();for(var r=0;;){var i=n(-1),o=n(0),a=n(64),s=n(64);if(64===s&&-1===i)break;e(i<<2|o>>4),64!=a&&(e(o<<4&240|a>>2),64!=s&&e(a<<6&192|s))}}(t,function(t){e+=String.fromCharCode(t)}),e}(t));if(r.sub&&r.iss&&r.aud&&r.exp)return new Wr(r)}catch(t){}return null}Wr.prototype.f=function(){return this.b};var Xr="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Yr=["client_id","response_type","scope","redirect_uri","state"],Kr={Qc:{Ma:"locale",Aa:500,za:600,Na:"facebook.com",cb:Yr},Sc:{Ma:null,Aa:500,za:620,Na:"github.com",cb:Yr},Tc:{Ma:"hl",Aa:515,za:680,Na:"google.com",cb:Yr},Zc:{Ma:"lang",Aa:485,za:705,Na:"twitter.com",cb:Xr}};function Zr(t){for(var e in Kr)if(Kr[e].Na==t)return Kr[e];return null}function Qr(t){var e={};e["facebook.com"]=ni,e["google.com"]=ii,e["github.com"]=ri,e["twitter.com"]=oi;var n=t&&t[$r];try{if(n)return e[n]?new e[n](t):new ei(t);if(void 0!==t[Jr])return new ti(t)}catch(t){}return null}var Jr="idToken",$r="providerId";function ti(t){var e=t[$r];if(!e&&t[Jr]){var n=qr(t[Jr]);n&&n.a&&(e=n.a)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,void 0!==t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),Tr(this,"providerId",e),Tr(this,"isNewUser",n)}function ei(t){ti.call(this,t),Tr(this,"profile",Ar((t=pr(t.rawUserInfo||"{}"))||{}))}function ni(t){if(ei.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function ri(t){if(ei.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Tr(this,"username",this.profile&&this.profile.login||null)}function ii(t){if(ei.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function oi(t){if(ei.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Tr(this,"username",t.screenName||null)}function ai(t){var e=Ye(t),n=Xe(e,"link"),r=Xe(Ye(n),"link");return Xe(Ye(e=Xe(e,"deep_link_id")),"link")||e||r||n||t}function si(t,e){return t.then(function(t){if(t[Uo]){var n=qr(t[Uo]);if(!n||e!=n.c)throw new Pr("user-mismatch");return t}throw new Pr("user-mismatch")}).o(function(t){throw t&&t.code&&t.code==Rr+"user-not-found"?new Pr("user-mismatch"):t})}function ui(t,e,n){if(e.idToken||e.accessToken)e.idToken&&Tr(this,"idToken",e.idToken),e.accessToken&&Tr(this,"accessToken",e.accessToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new Pr("internal-error","failed to construct a credential");Tr(this,"accessToken",e.oauthToken),Tr(this,"secret",e.oauthTokenSecret)}Tr(this,"providerId",t),Tr(this,"signInMethod",n)}function li(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,{postBody:sn(e).toString(),requestUri:"http://localhost"}}function ci(t,e){this.zc=e||[],Mr(this,{providerId:t,isOAuthProvider:!0}),this.tb={},this.Za=(Zr(t)||{}).Ma||null,this.Xa=null}function hi(t){ci.call(this,t,Yr),this.a=[]}function di(){hi.call(this,"facebook.com")}function pi(t){if(!t)throw new Pr("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return p(t)&&(e=t.accessToken),(new di).credential(null,e)}function fi(){hi.call(this,"github.com")}function mi(t){if(!t)throw new Pr("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return p(t)&&(e=t.accessToken),(new fi).credential(null,e)}function vi(){hi.call(this,"google.com"),this.ta("profile")}function gi(t,e){var n=t;return p(t)&&(n=t.idToken,e=t.accessToken),(new vi).credential(n,e)}function yi(){ci.call(this,"twitter.com",Xr)}function _i(t,e){var n=t;if(p(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new Pr("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new ui("twitter.com",n,"twitter.com")}function bi(t,e,n){this.a=t,this.b=e,Tr(this,"providerId","password"),Tr(this,"signInMethod",n===wi.EMAIL_LINK_SIGN_IN_METHOD?wi.EMAIL_LINK_SIGN_IN_METHOD:wi.EMAIL_PASSWORD_SIGN_IN_METHOD)}function wi(){Mr(this,{providerId:"password",isOAuthProvider:!1})}function xi(t,e){if(!(e=Ei(e)))throw new Pr("argument-error","Invalid email link!");return new bi(t,e,wi.EMAIL_LINK_SIGN_IN_METHOD)}function Ei(t){var e=Xe((t=new function(t){this.a=Ye(t)}(t=ai(t))).a,"oobCode")||null;return"signIn"===(Xe(t.a,"mode")||null)&&e?e:null}function Si(t){if(!(t.Ra&&t.Qa||t.Ea&&t.Y))throw new Pr("internal-error");this.a=t,Tr(this,"providerId","phone"),Tr(this,"signInMethod","phone")}function Ti(t){return t.a.Ea&&t.a.Y?{temporaryProof:t.a.Ea,phoneNumber:t.a.Y}:{sessionInfo:t.a.Ra,code:t.a.Qa}}function Mi(t){try{this.a=t||e.auth()}catch(t){throw new Pr("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Mr(this,{providerId:"phone",isOAuthProvider:!1})}function Ci(t,e){if(!t)throw new Pr("missing-verification-id");if(!e)throw new Pr("missing-verification-code");return new Si({Ra:t,Qa:e})}function Ai(t){if(t.temporaryProof&&t.phoneNumber)return new Si({Ea:t.temporaryProof,Y:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret;t=t&&t.oauthIdToken;try{switch(e){case"google.com":return gi(t,n);case"facebook.com":return pi(n);case"github.com":return mi(n);case"twitter.com":return _i(n,r);default:return new hi(e).credential(t,n)}}catch(t){return null}}function Pi(t){if(!t.isOAuthProvider)throw new Pr("invalid-oauth-provider")}function Oi(t,e,n,r,i){if(this.b=t,this.c=e||null,this.f=n||null,this.g=r||null,this.a=i||null,!this.f&&!this.a)throw new Pr("invalid-auth-event");if(this.f&&this.a)throw new Pr("invalid-auth-event");if(this.f&&!this.g)throw new Pr("invalid-auth-event")}function Ri(t){return(t=t||{}).type?new Oi(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&Or(t.error)):null}function Li(){this.b=null,this.a=[]}w(ei,ti),w(ni,ei),w(ri,ei),w(ii,ei),w(oi,ei),ui.prototype.xa=function(t){return na(t,li(this))},ui.prototype.c=function(t,e){var n=li(this);return n.idToken=e,ra(t,n)},ui.prototype.f=function(t,e){return si(ia(t,li(this)),e)},ui.prototype.C=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),t},ci.prototype.Ca=function(t){return this.tb=at(t),this},w(hi,ci),hi.prototype.ta=function(t){return F(this.a,t)||this.a.push(t),this},hi.prototype.yb=function(){return G(this.a)},hi.prototype.credential=function(t,e){if(!t&&!e)throw new Pr("argument-error","credential failed: must provide the ID token and/or the access token.");return new ui(this.providerId,{idToken:t||null,accessToken:e||null},this.providerId)},w(di,hi),Tr(di,"PROVIDER_ID","facebook.com"),Tr(di,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),w(fi,hi),Tr(fi,"PROVIDER_ID","github.com"),Tr(fi,"GITHUB_SIGN_IN_METHOD","github.com"),w(vi,hi),Tr(vi,"PROVIDER_ID","google.com"),Tr(vi,"GOOGLE_SIGN_IN_METHOD","google.com"),w(yi,ci),Tr(yi,"PROVIDER_ID","twitter.com"),Tr(yi,"TWITTER_SIGN_IN_METHOD","twitter.com"),bi.prototype.xa=function(t){return this.signInMethod==wi.EMAIL_LINK_SIGN_IN_METHOD?Ia(t,da,{email:this.a,oobCode:this.b}):Ia(t,Pa,{email:this.a,password:this.b})},bi.prototype.c=function(t,e){return this.signInMethod==wi.EMAIL_LINK_SIGN_IN_METHOD?Ia(t,pa,{idToken:e,email:this.a,oobCode:this.b}):Ia(t,Ea,{idToken:e,email:this.a,password:this.b})},bi.prototype.f=function(t,e){return si(this.xa(t),e)},bi.prototype.C=function(){return{email:this.a,password:this.b,signInMethod:this.signInMethod}},Mr(wi,{PROVIDER_ID:"password"}),Mr(wi,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Mr(wi,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),Si.prototype.xa=function(t){return t.Sa(Ti(this))},Si.prototype.c=function(t,e){var n=Ti(this);return n.idToken=e,Ia(t,Ra,n)},Si.prototype.f=function(t,e){var n=Ti(this);return n.operation="REAUTH",si(t=Ia(t,La,n),e)},Si.prototype.C=function(){var t={providerId:"phone"};return this.a.Ra&&(t.verificationId=this.a.Ra),this.a.Qa&&(t.verificationCode=this.a.Qa),this.a.Ea&&(t.temporaryProof=this.a.Ea),this.a.Y&&(t.phoneNumber=this.a.Y),t},Mi.prototype.Sa=function(t,e){var n=this.a.b;return Et(e.verify()).then(function(r){if(!o(r))throw new Pr("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(e.type){case"recaptcha":return function(t,e){return Ia(n,wa,e)}(0,{phoneNumber:t,recaptchaToken:r}).then(function(t){return"function"==typeof e.reset&&e.reset(),t},function(t){throw"function"==typeof e.reset&&e.reset(),t});default:throw new Pr("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}})},Mr(Mi,{PROVIDER_ID:"phone"}),Mr(Mi,{PHONE_SIGN_IN_METHOD:"phone"}),Oi.prototype.C=function(){return{type:this.b,eventId:this.c,urlResponse:this.f,sessionId:this.g,error:this.a&&this.a.C()}};var Ii=null;function Ni(t){var e="unauthorized-domain",n=void 0,r=Ye(t);t=r.b,"chrome-extension"==(r=r.c)?n=V("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=V("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",Pr.call(this,e,n)}function Di(t,e,n){Pr.call(this,t,n),(t=e||{}).ub&&Tr(this,"email",t.ub),t.Y&&Tr(this,"phoneNumber",t.Y),t.credential&&Tr(this,"credential",t.credential)}function ki(t){if(t.code){var e=t.code||"";0==e.indexOf(Rr)&&(e=e.substring(Rr.length));var n={credential:Ai(t)};if(t.email)n.ub=t.email;else{if(!t.phoneNumber)return new Pr(e,t.message||void 0);n.Y=t.phoneNumber}return new Di(e,n,t.message)}return null}Li.prototype.subscribe=function(t){var e=this;this.a.push(t),this.b||(this.b=function(t){for(var n=0;n<e.a.length;n++)e.a[n](t)},"function"==typeof(t=or("universalLinks.subscribe",i))&&t(null,this.b))},Li.prototype.unsubscribe=function(t){U(this.a,function(e){return e==t})},w(Ni,Pr),w(Di,Pr),Di.prototype.C=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber);var e=this.credential&&this.credential.C();return e&&ct(t,e),t},Di.prototype.toJSON=function(){return this.C()};var Fi,ji=/^[+a-zA-Z0-9_.!#$%&'*\/=?^`{|}~-]+@([a-zA-Z0-9-]+\.)+[a-zA-Z0-9]{2,63}$/;function Ui(){}function Bi(){}function Gi(t){if(!t.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(t){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return t.f}function Vi(){}function zi(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseText="",this.status=-1,this.statusText="",this.a.onload=y(this.ac,this),this.a.onerror=y(this.zb,this),this.a.onprogress=y(this.bc,this),this.a.ontimeout=y(this.ec,this)}function Hi(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function Wi(t,e,n){this.reset(t,e,n,void 0,void 0)}function qi(t){this.f=t,this.b=this.c=this.a=null}function Xi(t,e){this.name=t,this.value=e}Ui.prototype.c=null,w(Bi,Ui),Bi.prototype.a=function(){var t=Gi(this);return t?new ActiveXObject(t):new XMLHttpRequest},Bi.prototype.b=function(){var t={};return Gi(this)&&(t[0]=!0,t[1]=!0),t},Fi=new Bi,w(Vi,Ui),Vi.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new zi;throw Error("Unsupported browser")},Vi.prototype.b=function(){return{}},(t=zi.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.ac=function(){this.status=200,this.responseText=this.a.responseText,Hi(this,4)},t.zb=function(){this.status=500,this.responseText="",Hi(this,4)},t.ec=function(){this.zb()},t.bc=function(){this.status=200,Hi(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},Wi.prototype.a=null,Wi.prototype.reset=function(t,e,n,r,i){r||b(),delete this.a},Xi.prototype.toString=function(){return this.name};var Yi=new Xi("SEVERE",1e3),Ki=new Xi("WARNING",900),Zi=new Xi("CONFIG",700),Qi=new Xi("FINE",500);qi.prototype.log=function(t,e,n){if(t.value>=function t(e){return e.c?e.c:e.a?t(e.a):(M("Root logger has no level set."),null)}(this).value)for(d(e)&&(e=e()),t=new Wi(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var Ji={},$i=null;function to(t){var e;if($i||($i=new qi(""),Ji[""]=$i,$i.c=Zi),!(e=Ji[t])){e=new qi(t);var n=t.lastIndexOf("."),r=t.substr(n+1);(n=to(t.substr(0,n))).b||(n.b={}),n.b[r]=e,e.a=n,Ji[t]=e}return e}function eo(t,e){t&&t.log(Qi,e,void 0)}function no(t){this.f=t}function ro(t){Oe.call(this),this.i=t,this.readyState=io,this.status=0,this.responseText=this.statusText="",this.onreadystatechange=null,this.g=new Headers,this.b=null,this.h="GET",this.c="",this.a=!1,this.f=to("goog.net.FetchXmlHttp")}w(no,Ui),no.prototype.a=function(){return new ro(this.f)},no.prototype.b=function(t){return function(){return t}}({}),w(ro,Oe);var io=0;function oo(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function ao(t){Oe.call(this),this.headers=new je,this.D=t||null,this.c=!1,this.A=this.a=null,this.h=this.N=this.l="",this.f=this.I=this.i=this.G=!1,this.g=0,this.s=null,this.m=so,this.v=this.O=!1}(t=ro.prototype).open=function(t,e){if(this.readyState!=io)throw this.abort(),Error("Error reopening a connection");this.h=t,this.c=e,this.readyState=1,oo(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.g,method:this.h,credentials:void 0,cache:void 0};t&&(e.body=t),this.i.fetch(new Request(this.c,e)).then(this.dc.bind(this),this.Ab.bind(this))},t.abort=function(){this.responseText="",this.g=new Headers,this.status=0,1<=this.readyState&&this.a&&4!=this.readyState&&(this.readyState=4,this.a=!1,oo(this)),this.readyState=io},t.dc=function(t){this.a&&(this.b||(this.b=t.headers,this.readyState=2,oo(this)),this.a&&(this.readyState=3,oo(this),this.a&&t.text().then(this.cc.bind(this,t),this.Ab.bind(this))))},t.cc=function(t,e){this.a&&(this.status=t.status,this.statusText=t.statusText,this.responseText=e,this.readyState=4,oo(this))},t.Ab=function(t){var e=this.f;e&&e.log(Ki,"Failed to fetch url "+this.c,t instanceof Error?t:Error(t)),this.a&&(this.readyState=4,oo(this))},t.setRequestHeader=function(t,e){this.g.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.f)&&t.log(Ki,"Attempting to get response header but no headers have been received for url: "+this.c,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.f;return t&&t.log(Ki,"Attempting to get all response headers but no headers have been received for url: "+this.c,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)t.push((n=n.value)[0]+": "+n[1]),n=e.next();return t.join("\r\n")},w(ao,Oe);var so="";ao.prototype.b=to("goog.net.XhrIo");var uo=/^https?$/i,lo=["POST","PUT"];function co(t){return"content-type"==t.toLowerCase()}function ho(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,po(t),mo(t)}function po(t){t.G||(t.G=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function fo(t){if(t.c&&void 0!==r)if(t.A[1]&&4==go(t)&&2==yo(t))eo(t.b,_o(t,"Local request error detected and ignored"));else if(t.i&&4==go(t))Ne(t.Db,0,t);else if(t.dispatchEvent("readystatechange"),4==go(t)){eo(t.b,_o(t,"Request complete")),t.c=!1;try{var e,n=yo(t);t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var o=!0;break t;default:o=!1}if(!(e=o)){var a;if(a=0===n){var s=String(t.l).match(Ge)[1]||null;if(!s&&i.self&&i.self.location){var u=i.self.location.protocol;s=u.substr(0,u.length-1)}a=!uo.test(s?s.toLowerCase():"")}e=a}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var l=2<go(t)?t.a.statusText:""}catch(e){eo(t.b,"Can not get status: "+e.message),l=""}t.h=l+" ["+yo(t)+"]",po(t)}}finally{mo(t)}}}function mo(t,e){if(t.a){vo(t);var n=t.a,r=t.A[0]?s:null;t.a=null,t.A=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(e){(t=t.b)&&t.log(Yi,"Problem encountered resetting onreadystatechange: "+e.message,void 0)}}}function vo(t){t.a&&t.v&&(t.a.ontimeout=null),t.s&&(i.clearTimeout(t.s),t.s=null)}function go(t){return t.a?t.a.readyState:0}function yo(t){try{return 2<go(t)?t.a.status:-1}catch(t){return-1}}function _o(t,e){return e+" ["+t.N+" "+t.l+" "+yo(t)+"]"}function bo(t,e){this.g=[],this.v=t,this.s=e||null,this.f=this.a=!1,this.c=void 0,this.u=this.A=this.i=!1,this.h=0,this.b=null,this.l=0}function wo(t,e,n){t.a=!0,t.c=n,t.f=!e,To(t)}function xo(t){if(t.a){if(!t.u)throw new Mo(t);t.u=!1}}function Eo(t,e,n,r){t.g.push([e,n,r]),t.a&&To(t)}function So(t){return k(t.g,function(t){return d(t[1])})}function To(t){if(t.h&&t.a&&So(t)){var e=t.h,n=Po[e];n&&(i.clearTimeout(n.a),delete Po[e]),t.h=0}t.b&&(t.b.l--,delete t.b),e=t.c;for(var r=n=!1;t.g.length&&!t.i;){var o=t.g.shift(),a=o[0],s=o[1];if(o=o[2],a=t.f?s:a)try{var u=a.call(o||t.s,e);void 0!==u&&(t.f=t.f&&(u==e||u instanceof Error),t.c=e=u),(E(e)||"function"==typeof i.Promise&&e instanceof i.Promise)&&(r=!0,t.i=!0)}catch(r){e=r,t.f=!0,So(t)||(n=!0)}}t.c=e,r&&(u=y(t.m,t,!0),r=y(t.m,t,!1),e instanceof bo?(Eo(e,u,r),e.A=!0):e.then(u,r)),n&&(e=new Ao(e),Po[e.a]=e,t.h=e.a)}function Mo(){S.call(this)}function Co(){S.call(this)}function Ao(t){this.a=i.setTimeout(y(this.c,this),0),this.b=t}(t=ao.prototype).Fa=function(){void 0!==r&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",eo(this.b,_o(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(eo(this.b,_o(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),mo(this))},t.ua=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),mo(this,!0)),ao.lb.ua.call(this)},t.Db=function(){this.pa||(this.I||this.i||this.f?fo(this):this.sc())},t.sc=function(){fo(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case so:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(Yi,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(t){return eo(this.b,"Can not get response: "+t.message),null}},bo.prototype.cancel=function(t){if(this.a)this.c instanceof bo&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.l--,0>=e.l&&e.cancel())}this.v?this.v.call(this.s,this):this.u=!0,this.a||(t=new Co(this),xo(this),wo(this,!1,t))}},bo.prototype.m=function(t,e){this.i=!1,wo(this,t,e)},bo.prototype.D=function(){xo(this),wo(this,!0,null)},bo.prototype.then=function(t,e,n){var r,i,o=new vt(function(t,e){r=t,i=e});return Eo(this,r,function(t){t instanceof Co?o.cancel():i(t)}),o.then(t,e,n)},x(bo),w(Mo,S),Mo.prototype.message="Deferred has already fired",Mo.prototype.name="AlreadyCalledError",w(Co,S),Co.prototype.message="Deferred was canceled",Co.prototype.name="CanceledError",Ao.prototype.c=function(){throw delete Po[this.a],this.b};var Po={};function Oo(t){var e={},n=e.document||document,r=yn(t),i=document.createElement("SCRIPT"),o={Fb:i,Fa:void 0},a=new bo(Ro,o),s=null,u=null!=e.timeout?e.timeout:5e3;return 0<u&&(s=window.setTimeout(function(){Lo(i,!0);var t=new Do(No,"Timeout reached for loading script "+r);xo(a),wo(a,!1,t)},u),o.Fa=s),i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(Lo(i,e.ad||!1,s),a.D())},i.onerror=function(){Lo(i,!0,s);var t=new Do(Io,"Error while loading script "+r);xo(a),wo(a,!1,t)},ct(o=e.attributes||{},{type:"text/javascript",charset:"UTF-8"}),In(i,o),i.src=yn(t),function(t){var e;return(e=(t||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:t.documentElement}(n).appendChild(i),a}function Ro(){if(this&&this.Fb){var t=this.Fb;t&&"SCRIPT"==t.tagName&&Lo(t,!0,this.Fa)}}function Lo(t,e,n){null!=n&&i.clearTimeout(n),t.onload=s,t.onerror=s,t.onreadystatechange=s,e&&window.setTimeout(function(){t&&t.parentNode&&t.parentNode.removeChild(t)},0)}var Io=0,No=1;function Do(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),S.call(this,n),this.code=t}function ko(t){this.f=t}function Fo(t,n,r){if(this.b=t,this.i=(t=n||{}).secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.l=t.secureTokenTimeout||Bo,this.f=at(t.secureTokenHeaders||Go),this.g=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.h=t.firebaseTimeout||Vo,this.a=at(t.firebaseHeaders||zo),r&&(this.a["X-Client-Version"]=r,this.f["X-Client-Version"]=r),r="Node"==Qn(),!(r=i.XMLHttpRequest||r&&e.INTERNAL.node&&e.INTERNAL.node.XMLHttpRequest)&&!Zn())throw new Pr("internal-error","The XMLHttpRequest compatibility library was not found.");this.c=void 0,this.c=Zn()?new no(self):Jn()?new ko(r):new Vi}w(Do,S),w(ko,Ui),ko.prototype.a=function(){return new this.f},ko.prototype.b=function(){return{}};var jo,Uo="idToken",Bo=new yr(3e4,6e4),Go={"Content-Type":"application/x-www-form-urlencoded"},Vo=new yr(3e4,6e4),zo={"Content-Type":"application/json"};function Ho(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function Wo(t,e){e?(t.a["X-Client-Version"]=e,t.f["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.f["X-Client-Version"])}function qo(t,e,n,r,o,a,s){gr()?(function(){var t=ir();return!((t=er(t)!=tr?null:(t=t.match(/\sChrome\/(\d+)/i))&&2==t.length?parseInt(t[1],10):null)&&30>t||Ht&&$t&&!(9<$t))}()||Zn()?t=y(t.m,t):(jo||(jo=new vt(function(t,e){!function(t,e){if(((window.gapi||{}).client||{}).request)t();else{i[Yo]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))};var n=_n(Xo,{onload:Yo});!function(t,e){Eo(Oo(n),null,e,void 0)}(0,function(){e(Error("CORS_UNSUPPORTED"))})}}(t,e)})),t=y(t.u,t)),t(e,n,r,o,a,s)):n&&n(null)}Fo.prototype.m=function(t,e,n,r,a,s){if(Zn()&&(void 0===i.fetch||void 0===i.Headers||void 0===i.Request))throw new Pr("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var u=new ao(this.c);if(s){u.g=Math.max(0,s);var l=setTimeout(function(){u.dispatchEvent("timeout")},s)}Re(u,"complete",function(){l&&clearTimeout(l);var t=null;try{t=JSON.parse(function(t){try{return t.a?t.a.responseText:""}catch(e){return eo(t.b,"Can not get responseText: "+e.message),""}}(this))||null}catch(e){t=null}e&&e(t)}),Le(u,"ready",function(){l&&clearTimeout(l),Ut(this)}),Le(u,"timeout",function(){l&&clearTimeout(l),Ut(this),e&&e(null)}),function(t,e,n,r,a){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);n=n?n.toUpperCase():"GET",t.l=e,t.h="",t.N=n,t.G=!1,t.c=!0,t.a=t.D?t.D.a():Fi.a(),t.A=function(t){return t.c||(t.c=t.b())}(t.D?t.D:Fi),t.a.onreadystatechange=y(t.Db,t);try{eo(t.b,_o(t,"Opening Xhr")),t.I=!0,t.a.open(n,String(e),!0),t.I=!1}catch(e){return eo(t.b,_o(t,"Error opening Xhr: "+e.message)),void ho(t,e)}e=r||"";var s=new je(t.headers);a&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(h(t)||o(t))N(t,e,void 0);else for(var n=Fe(t),r=ke(t),i=r.length,a=0;a<i;a++)e.call(void 0,r[a],n&&n[a],t)}(a,function(t,e){s.set(e,t)}),a=function(t){t:{for(var e=co,n=t.length,r=o(t)?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:o(t)?t.charAt(e):t[e]}(s.T()),r=i.FormData&&e instanceof i.FormData,!F(lo,n)||a||r||s.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),s.forEach(function(t,e){this.a.setRequestHeader(e,t)},t),t.m&&(t.a.responseType=t.m),"withCredentials"in t.a&&t.a.withCredentials!==t.O&&(t.a.withCredentials=t.O);try{vo(t),0<t.g&&(t.v=function(t){return Ht&&ee(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(t.a),eo(t.b,_o(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.v)),t.v?(t.a.timeout=t.g,t.a.ontimeout=y(t.Fa,t)):t.s=Ne(t.Fa,t.g,t)),eo(t.b,_o(t,"Sending request")),t.i=!0,t.a.send(e),t.i=!1}catch(e){eo(t.b,_o(t,"Send error: "+e.message)),ho(t,e)}}(u,t,n,r,a)};var Xo=vn("https://apis.google.com/js/client.js?onload=%{onload}"),Yo="__fcb"+Math.floor(1e6*Math.random()).toString();function Ko(t){if(!ji.test(t.email))throw new Pr("invalid-email")}function Zo(t){"email"in t&&Ko(t)}function Qo(t){if(!t[Uo])throw new Pr("internal-error")}function Jo(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new Pr("internal-error")}else{if(!t.sessionInfo)throw new Pr("missing-verification-id");if(!t.code)throw new Pr("missing-verification-code")}}Fo.prototype.u=function(t,e,n,r,i){var o=this;jo.then(function(){window.gapi.client.setApiKey(o.b);var a=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:n,body:r,headers:i,authType:"none",callback:function(t){window.gapi.auth.setToken(a),e&&e(t)}})}).o(function(t){e&&e({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})})},Fo.prototype.jb=function(){return Ia(this,Sa,{})},Fo.prototype.mb=function(t,e){return Ia(this,xa,{idToken:t,email:e})},Fo.prototype.nb=function(t,e){return Ia(this,Ea,{idToken:t,password:e})};var $o={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function ta(t){if(!t.requestUri||!t.sessionId&&!t.postBody)throw new Pr("internal-error")}function ea(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=ki(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=ki(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=ki(t)):t.errorMessage&&(e=Na(t.errorMessage)),e)throw e;if(!t[Uo])throw new Pr("internal-error")}function na(t,e){return e.returnIdpCredential=!0,Ia(t,Ta,e)}function ra(t,e){return e.returnIdpCredential=!0,Ia(t,Ca,e)}function ia(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,Ia(t,Ma,e)}function oa(t){if(!t.oobCode)throw new Pr("invalid-action-code")}(t=Fo.prototype).ob=function(t,e){var n={idToken:t},r=[];return it($o,function(t,i){var o=e[i];null===o?r.push(t):i in e&&(n[i]=o)}),r.length&&(n.deleteAttribute=r),Ia(this,xa,n)},t.gb=function(t,e){return ct(t={requestType:"PASSWORD_RESET",email:t},e),Ia(this,ga,t)},t.hb=function(t,e){return ct(t={requestType:"EMAIL_SIGNIN",email:t},e),Ia(this,ma,t)},t.fb=function(t,e){return ct(t={requestType:"VERIFY_EMAIL",idToken:t},e),Ia(this,va,t)},t.Sa=function(t){return Ia(this,Oa,t)},t.Wa=function(t,e){return Ia(this,ba,{oobCode:t,newPassword:e})},t.Ia=function(t){return Ia(this,sa,{oobCode:t})},t.Ua=function(t){return Ia(this,aa,{oobCode:t})};var aa={endpoint:"setAccountInfo",w:oa,$:"email"},sa={endpoint:"resetPassword",w:oa,J:function(t){if(!t.email||!t.requestType)throw new Pr("internal-error")}},ua={endpoint:"signupNewUser",w:function(t){if(Ko(t),!t.password)throw new Pr("weak-password")},J:Qo,P:!0},la={endpoint:"createAuthUri"},ca={endpoint:"deleteAccount",S:["idToken"]},ha={endpoint:"setAccountInfo",S:["idToken","deleteProvider"],w:function(t){if(!c(t.deleteProvider))throw new Pr("internal-error")}},da={endpoint:"emailLinkSignin",S:["email","oobCode"],w:Ko,J:Qo,P:!0},pa={endpoint:"emailLinkSignin",S:["idToken","email","oobCode"],w:Ko,J:Qo,P:!0},fa={endpoint:"getAccountInfo"},ma={endpoint:"getOobConfirmationCode",S:["requestType"],w:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new Pr("internal-error");Ko(t)},$:"email"},va={endpoint:"getOobConfirmationCode",S:["idToken","requestType"],w:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new Pr("internal-error")},$:"email"},ga={endpoint:"getOobConfirmationCode",S:["requestType"],w:function(t){if("PASSWORD_RESET"!=t.requestType)throw new Pr("internal-error");Ko(t)},$:"email"},ya={pb:!0,endpoint:"getProjectConfig",Cb:"GET"},_a={pb:!0,endpoint:"getRecaptchaParam",Cb:"GET",J:function(t){if(!t.recaptchaSiteKey)throw new Pr("internal-error")}},ba={endpoint:"resetPassword",w:oa,$:"email"},wa={endpoint:"sendVerificationCode",S:["phoneNumber","recaptchaToken"],$:"sessionInfo"},xa={endpoint:"setAccountInfo",S:["idToken"],w:Zo,P:!0},Ea={endpoint:"setAccountInfo",S:["idToken"],w:function(t){if(Zo(t),!t.password)throw new Pr("weak-password")},J:Qo,P:!0},Sa={endpoint:"signupNewUser",J:Qo,P:!0},Ta={endpoint:"verifyAssertion",w:ta,J:ea,P:!0},Ma={endpoint:"verifyAssertion",w:ta,J:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new Pr("user-not-found");if(t.errorMessage)throw Na(t.errorMessage);if(!t[Uo])throw new Pr("internal-error")},P:!0},Ca={endpoint:"verifyAssertion",w:function(t){if(ta(t),!t.idToken)throw new Pr("internal-error")},J:ea,P:!0},Aa={endpoint:"verifyCustomToken",w:function(t){if(!t.token)throw new Pr("invalid-custom-token")},J:Qo,P:!0},Pa={endpoint:"verifyPassword",w:function(t){if(Ko(t),!t.password)throw new Pr("wrong-password")},J:Qo,P:!0},Oa={endpoint:"verifyPhoneNumber",w:Jo,J:Qo},Ra={endpoint:"verifyPhoneNumber",w:function(t){if(!t.idToken)throw new Pr("internal-error");Jo(t)},J:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",ki(t);Qo(t)}},La={Tb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",w:Jo,J:Qo};function Ia(t,e,n){if(!function(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var r=t[e[n]];if(void 0===r||null===r||""===r)return!1}return!0}(n,e.S))return St(new Pr("internal-error"));var r,i=e.Cb||"POST";return Et(n).then(e.w).then(function(){return e.P&&(n.returnSecureToken=!0),function(t,e,n,r,i,o){var a=Ye(t.g+e);qe(a,"key",t.b),o&&qe(a,"cb",b().toString());var s="GET"==n;if(s)for(var u in r)r.hasOwnProperty(u)&&qe(a,u,r[u]);return new vt(function(e,o){qo(t,a.toString(),function(t){t?t.error?o(Da(t,i||{})):e(t):o(new Pr("network-request-failed"))},n,s?void 0:kn(dr(r)),t.a,t.h.get())})}(t,e.endpoint,i,n,e.Tb,e.pb||!1)}).then(function(t){return r=t}).then(e.J).then(function(){if(!e.$)return r;if(!(e.$ in r))throw new Pr("internal-error");return r[e.$]})}function Na(t){return Da({error:{errors:[{message:t}],code:400,message:t}})}function Da(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new Pr(r[n]):null)return n;for(var i in n=t.error&&t.error.message||"",ct(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash"},e||{}),e=(e=n.match(/^[^\s]+\s*:\s*(.*)$/))&&1<e.length?e[1]:void 0,r)if(0===n.indexOf(i))return new Pr(r[i],e);return!e&&t&&(e=hr(t)),new Pr("internal-error",e)}var ka,Fa={Vc:{Ya:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",eb:"https://securetoken.googleapis.com/v1/token",id:"p"},Xc:{Ya:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",eb:"https://staging-securetoken.sandbox.googleapis.com/v1/token",id:"s"},Yc:{Ya:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",eb:"https://test-securetoken.sandbox.googleapis.com/v1/token",id:"t"}};function ja(t){for(var e in Fa)if(Fa[e].id===t)return{firebaseEndpoint:(t=Fa[e]).Ya,secureTokenEndpoint:t.eb};return null}ka=ja("__EID__")?"__EID__":void 0;var Ua,Ba=vn("https://apis.google.com/js/api.js?onload=%{onload}"),Ga=new yr(3e4,6e4),Va=new yr(5e3,15e3),za=null;function Ha(t,e,n){this.i=t,this.g=e,this.h=n,this.f=null,this.a=Ke(this.i,"/__/auth/iframe"),qe(this.a,"apiKey",this.g),qe(this.a,"appName",this.h),this.b=null,this.c=[]}function Wa(t,e,n,r,i){this.m=t,this.u=e,this.c=n,this.l=r,this.h=this.g=this.i=null,this.a=i,this.f=null}function qa(t){try{return e.app(t).auth().Ka()}catch(t){return[]}}function Xa(t,e,n,r,i){this.u=t,this.f=e,this.b=n,this.c=r||null,this.h=i||null,this.m=this.s=this.v=null,this.g=[],this.l=this.a=null}function Ya(t){var e=Gn();return function(t){return Ia(t,ya,{}).then(function(t){return t.authorizedDomains||[]})}(t).then(function(t){t:{var n=Ye(e),r=n.c;n=n.b;for(var i=0;i<t.length;i++){var o=t[i],a=n,s=r;if(0==o.indexOf("chrome-extension://")?a=Ye(o).b==a&&"chrome-extension"==s:"http"!=s&&"https"!=s?a=!1:qn.test(o)?a=a==o:(o=o.split(".").join("\\."),a=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(a)),a){t=!0;break t}}t=!1}if(!t)throw new Ni(Gn())})}function Ka(t){return t.l?t.l:(t.l=Xn().then(function(){if(!t.s){var e=t.c,n=t.h,r=qa(t.b),o=new Ha(t.u,t.f,t.b);o.f=e,o.b=n,o.c=G(r||[]),t.s=o.toString()}t.i=new function(t){this.b=t,this.a=null,this.ab=function(t){return(za||(za=new vt(function(t,e){if(gr()){var n=function(){vr(),or("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){vr(),e(Error("Network Error"))},timeout:Ga.get()})};if(or("gapi.iframes.Iframe"))t();else if(or("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();i[r]=function(){or("gapi.load")?n():e(Error("Network Error"))},Et(Oo(r=_n(Ba,{onload:r}))).o(function(){e(Error("Network Error"))})}}else e(Error("Network Error"))}).o(function(t){throw za=null,t}))).then(function(){return new vt(function(e,n){or("gapi.iframes.getContext")().open({where:document.body,url:t.b,messageHandlersFilter:or("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},function(r){function i(){clearTimeout(o),e()}t.a=r,t.a.restyle({setHideOnLeave:!1});var o=setTimeout(function(){n(Error("Network Error"))},Va.get());r.ping(i).then(i,function(){n(Error("Network Error"))})})})})}(this)}(t.s),function(t){if(!t.i)throw Error("IfcHandler must be initialized!");!function(t,e){t.ab.then(function(){t.a.register("authEvent",e,or("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})}(t.i,function(e){var n={};if(e&&e.authEvent){var r=!1;for(e=Ri(e.authEvent),n=0;n<t.g.length;n++)r=t.g[n](e)||r;return(n={}).status=r?"ACK":"ERROR",Et(n)}return n.status="ERROR",Et(n)})}(t)}),t.l)}function Za(t){return t.m||(t.v=t.c?rr(t.c,qa(t.b)):null,t.m=new Fo(t.f,ja(t.h),t.v)),t.m}function Qa(t,e,n,r,i,o,a,s,u,l){return(t=new Wa(t,e,n,r,i)).i=o,t.g=a,t.h=s,t.b=at(u||null),t.f=l,t.toString()}function Ja(t){if(this.a=t||e.INTERNAL.reactNative&&e.INTERNAL.reactNative.AsyncStorage,!this.a)throw new Pr("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function $a(){this.a={},this.type="inMemory"}function ts(){try{var t=!!i.indexedDB}catch(e){t=!1}if(!t)throw new Pr("web-storage-unsupported");this.f={},this.c=[],this.a=0,this.h=i.indexedDB,this.type="indexedDB"}function es(t){return t.g||(t.g=function(t){return new vt(function(e,n){var r=t.h.open("firebaseLocalStorageDb",1);r.onerror=function(t){n(Error(t.target.errorCode))},r.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(t){n(t)}},r.onsuccess=function(t){e(t.target.result)}})}(t)),t.g}function ns(t){return t.objectStore("firebaseLocalStorage")}function rs(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function is(t){return new vt(function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(Error(t.target.errorCode))}})}function os(){if(!function(){var t="Node"==Qn();if(!(t=as()||t&&e.INTERNAL.node&&e.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==Qn())throw new Pr("internal-error","The LocalStorage compatibility library was not found.");throw new Pr("web-storage-unsupported")}this.a=as()||e.INTERNAL.node.localStorage,this.type="localStorage"}function as(){try{var t=i.localStorage,e=fr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function ss(){this.type="nullStorage"}function us(){if(!function(){var t="Node"==Qn();if(!(t=ls()||t&&e.INTERNAL.node&&e.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==Qn())throw new Pr("internal-error","The SessionStorage compatibility library was not found.");throw new Pr("web-storage-unsupported")}this.a=ls()||e.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function ls(){try{var t=i.sessionStorage,e=fr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}Ha.prototype.toString=function(){return this.f?qe(this.a,"v",this.f):un(this.a.a,"v"),this.b?qe(this.a,"eid",this.b):un(this.a.a,"eid"),this.c.length?qe(this.a,"fw",this.c.join(",")):un(this.a.a,"fw"),this.a.toString()},Wa.prototype.toString=function(){var t=Ke(this.m,"/__/auth/handler");if(qe(t,"apiKey",this.u),qe(t,"appName",this.c),qe(t,"authType",this.l),this.a.isOAuthProvider){var n=this.a;try{var r=e.app(this.c).auth().aa()}catch(t){r=null}for(var i in n.Xa=r,qe(t,"providerId",this.a.providerId),r=dr((n=this.a).tb))r[i]=r[i].toString();i=n.zc,r=at(r);for(var o=0;o<i.length;o++){var a=i[o];a in r&&delete r[a]}n.Za&&n.Xa&&!r[n.Za]&&(r[n.Za]=n.Xa),ot(r)||qe(t,"customParameters",hr(r))}if("function"==typeof this.a.yb&&(n=this.a.yb()).length&&qe(t,"scopes",n.join(",")),this.i?qe(t,"redirectUrl",this.i):un(t.a,"redirectUrl"),this.g?qe(t,"eventId",this.g):un(t.a,"eventId"),this.h?qe(t,"v",this.h):un(t.a,"v"),this.b)for(var s in this.b)this.b.hasOwnProperty(s)&&!Xe(t,s)&&qe(t,s,this.b[s]);return this.f?qe(t,"eid",this.f):un(t.a,"eid"),(s=qa(this.c)).length&&qe(t,"fw",s.join(",")),t.toString()},(t=Xa.prototype).Da=function(t,e,n){var r=new Pr("popup-closed-by-user"),i=new Pr("web-storage-unsupported"),o=this,a=!1;return this.ca().then(function(){(function(t){var e={type:"webStorageSupport"};return Ka(t).then(function(){return function(t,e){return t.ab.then(function(){return new vt(function(n){t.a.send(e.type,e,n,or("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})})}(t.i,e)}).then(function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()})})(o).then(function(n){n||(t&&Hn(t),e(i),a=!0)})}).o(function(){}).then(function(){if(!a)return function(t){return new vt(function(e){return function n(){De(2e3).then(function(){if(t&&!t.closed)return n();e()})}()})}(t)}).then(function(){if(!a)return De(n).then(function(){e(r)})})},t.Gb=function(){var t=ir();return!cr(t)&&!mr(t)},t.Bb=function(){return!1},t.xb=function(t,e,n,r,i,o,a){if(!t)return St(new Pr("popup-blocked"));if(a&&!cr())return this.ca().o(function(e){Hn(t),i(e)}),r(),Et();this.a||(this.a=Ya(Za(this)));var s=this;return this.a.then(function(){var e=s.ca().o(function(e){throw Hn(t),i(e),e});return r(),e}).then(function(){Pi(n),a||Vn(Qa(s.u,s.f,s.b,e,n,null,o,s.c,void 0,s.h),t)}).o(function(t){throw"auth/network-request-failed"==t.code&&(s.a=null),t})},t.Ba=function(t,e,n){this.a||(this.a=Ya(Za(this)));var r=this;return this.a.then(function(){Pi(e),Vn(Qa(r.u,r.f,r.b,t,e,Gn(),n,r.c,void 0,r.h))}).o(function(t){throw"auth/network-request-failed"==t.code&&(r.a=null),t})},t.ca=function(){var t=this;return Ka(this).then(function(){return t.i.ab}).o(function(){throw t.a=null,new Pr("network-request-failed")})},t.Lb=function(){return!0},t.va=function(t){this.g.push(t)},t.Ja=function(t){U(this.g,function(e){return e==t})},(t=Ja.prototype).get=function(t){return Et(this.a.getItem(t)).then(function(t){return t&&pr(t)})},t.set=function(t,e){return Et(this.a.setItem(t,hr(e)))},t.X=function(t){return Et(this.a.removeItem(t))},t.ia=function(){},t.ea=function(){},(t=$a.prototype).get=function(t){return Et(this.a[t])},t.set=function(t,e){return this.a[t]=e,Et()},t.X=function(t){return delete this.a[t],Et()},t.ia=function(){},t.ea=function(){},(t=ts.prototype).set=function(t,e){var n,r=!1,i=this;return es(this).then(function(e){return is((e=ns(rs(n=e,!0))).get(t))}).then(function(o){var a=ns(rs(n,!0));return o?(o.value=e,is(a.put(o))):(i.a++,r=!0,(o={}).fbase_key=t,o.value=e,is(a.add(o)))}).then(function(){i.f[t]=e}).ga(function(){r&&i.a--})},t.get=function(t){return es(this).then(function(e){return is(ns(rs(e,!1)).get(t))}).then(function(t){return t&&t.value})},t.X=function(t){var e=!1,n=this;return es(this).then(function(r){return e=!0,n.a++,is(ns(rs(r,!0)).delete(t))}).then(function(){delete n.f[t]}).ga(function(){e&&n.a--})},t.Ic=function(){var t=this;return es(this).then(function(t){var e=ns(rs(t,!1));return e.getAll?is(e.getAll()):new vt(function(t,n){var r=[],i=e.openCursor();i.onsuccess=function(e){(e=e.target.result)?(r.push(e.value),e.continue()):t(r)},i.onerror=function(t){n(Error(t.target.errorCode))}})}).then(function(e){var n={},r=[];if(0==t.a){for(r=0;r<e.length;r++)n[e[r].fbase_key]=e[r].value;r=function t(e,n){var r,i=[];for(r in e)if(r in n)if(typeof e[r]!=typeof n[r])i.push(r);else if(c(e[r])){t:{var o=void 0,a=e[r],s=n[r];for(o in a)if(!(o in s)||a[o]!==s[o]){o=!1;break t}for(o in s)if(!(o in a)){o=!1;break t}o=!0}o||i.push(r)}else"object"==typeof e[r]&&null!=e[r]&&null!=n[r]?0<t(e[r],n[r]).length&&i.push(r):e[r]!==n[r]&&i.push(r);else i.push(r);for(r in n)r in e||i.push(r);return i}(t.f,n),t.f=n}return r})},t.ia=function(t){0==this.c.length&&function(t){t.b&&t.b.cancel("STOP_EVENT"),function e(){return t.b=De(800).then(y(t.Ic,t)).then(function(e){0<e.length&&N(t.c,function(t){t(e)})}).then(e).o(function(t){"STOP_EVENT"!=t.message&&e()}),t.b}()}(this),this.c.push(t)},t.ea=function(t){U(this.c,function(e){return e==t}),0==this.c.length&&this.b&&this.b.cancel("STOP_EVENT")},(t=os.prototype).get=function(t){var e=this;return Et().then(function(){return pr(e.a.getItem(t))})},t.set=function(t,e){var n=this;return Et().then(function(){var r=hr(e);null===r?n.X(t):n.a.setItem(t,r)})},t.X=function(t){var e=this;return Et().then(function(){e.a.removeItem(t)})},t.ia=function(t){i.window&&ye(i.window,"storage",t)},t.ea=function(t){i.window&&we(i.window,"storage",t)},(t=ss.prototype).get=function(){return Et(null)},t.set=function(){return Et()},t.X=function(){return Et()},t.ia=function(){},t.ea=function(){},(t=us.prototype).get=function(t){var e=this;return Et().then(function(){return pr(e.a.getItem(t))})},t.set=function(t,e){var n=this;return Et().then(function(){var r=hr(e);null===r?n.X(t):n.a.setItem(t,r)})},t.X=function(t){var e=this;return Et().then(function(){e.a.removeItem(t)})},t.ia=function(){},t.ea=function(){};var cs,hs,ds={B:os,Pa:us},ps={B:os,Pa:us},fs={B:Ja,Pa:ss},ms={B:os,Pa:ss},vs={Uc:"local",NONE:"none",Wc:"session"};function gs(){var t=!(mr(ir())||!Kn()),e=cr(),n=ar();this.m=t,this.h=e,this.l=n,this.a={},cs||(cs=new function(){var t={};t.Browser=ds,t.Node=ps,t.ReactNative=fs,t.Worker=ms,this.a=t[Qn()]}),t=cs;try{if(!Bn()&&wr()||!i.indexedDB)var r=new t.a.B;else Ua||(Ua=new ts),r=Ua;this.g=r}catch(t){this.g=new $a,this.h=!0}try{this.i=new t.a.Pa}catch(t){this.i=new $a}this.u=new $a,this.f=y(this.Kb,this),this.b={}}function ys(){return hs||(hs=new gs),hs}function _s(t,e){switch(e){case"session":return t.i;case"none":return t.u;default:return t.g}}function bs(t,e){return"firebase:"+t.name+(e?":"+e:"")}function ws(t,e,n){return n=bs(e,n),"local"==e.B&&(t.b[n]=null),_s(t,e.B).X(n)}function xs(t){t.c&&(clearInterval(t.c),t.c=null)}(t=gs.prototype).get=function(t,e){return _s(this,t.B).get(bs(t,e))},t.set=function(t,e,n){var r=bs(t,n),i=this,o=_s(this,t.B);return o.set(r,e).then(function(){return o.get(r)}).then(function(e){"local"==t.B&&(i.b[r]=e)})},t.addListener=function(t,e,n){t=bs(t,e),this.l&&(this.b[t]=i.localStorage.getItem(t)),ot(this.a)&&(_s(this,"local").ia(this.f),this.h||(Bn()||!wr())&&i.indexedDB||!this.l||function(t){xs(t),t.c=setInterval(function(){for(var e in t.a){var n=i.localStorage.getItem(e),r=t.b[e];n!=r&&(t.b[e]=n,n=new ue({type:"storage",key:e,target:window,oldValue:r,newValue:n,a:!0}),t.Kb(n))}},1e3)}(this)),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=bs(t,e),this.a[t]&&(U(this.a[t],function(t){return t==n}),0==this.a[t].length&&delete this.a[t]),ot(this.a)&&(_s(this,"local").ea(this.f),xs(this))},t.Kb=function(t){if(t&&t.g){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var o=i.localStorage.getItem(n);o!==r&&(this.b[n]=o,this.Va(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?_s(this,"local").ea(this.f):xs(this),this.m)if(n=i.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?i.localStorage.setItem(e,r):i.localStorage.removeItem(e);else if(this.b[e]===r&&void 0===t.a.a)return;var a=this;n=function(){void 0===t.a.a&&a.b[e]===i.localStorage.getItem(e)||(a.b[e]=i.localStorage.getItem(e),a.Va(e))},Ht&&$t&&10==$t&&i.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else N(t,y(this.Va,this))},t.Va=function(t){this.a[t]&&N(this.a[t],function(t){t()})};var Es,Ss={name:"authEvent",B:"local"};function Ts(t,e){this.b=-1,this.b=Ms,this.f=i.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=i.Int32Array?new Int32Array(64):Array(64),void 0!==Es||(Es=i.Int32Array?new Int32Array(Is):Is),this.reset()}w(Ts,function(){this.b=-1});for(var Ms=64,Cs=Ms-1,As=[],Ps=0;Ps<Cs;Ps++)As[Ps]=0;var Os=B(128,As);function Rs(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;64>e;e++){var o=(0|n[e-16])+(((i=0|n[e-15])>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,a=(0|n[e-7])+(((r=0|n[e-2])>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+a|0}r=0|t.a[0],i=0|t.a[1];var s=0|t.a[2],u=0|t.a[3],l=0|t.a[4],c=0|t.a[5],h=0|t.a[6];for(o=0|t.a[7],e=0;64>e;e++){var d=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&s^i&s)|0;a=(o=o+((l>>>6|l<<26)^(l>>>11|l<<21)^(l>>>25|l<<7))|0)+((a=(a=l&c^~l&h)+(0|Es[e])|0)+(0|n[e])|0)|0,o=h,h=c,c=l,l=u+a|0,u=s,s=i,i=r,r=a+d|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+s|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+l|0,t.a[5]=t.a[5]+c|0,t.a[6]=t.a[6]+h|0,t.a[7]=t.a[7]+o|0}function Ls(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if(o(e))for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(Rs(t),i=0);else{if(!h(e))throw Error("message must be string or array");for(;r<n;){var a=e[r++];if(!("number"==typeof a&&0<=a&&255>=a&&a==(0|a)))throw Error("message must be a byte array");t.f[i++]=a,i==t.b&&(Rs(t),i=0)}}t.c=i,t.g+=n}Ts.prototype.reset=function(){this.g=this.c=0,this.a=i.Int32Array?new Int32Array(this.h):G(this.h)};var Is=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function Ns(){Ts.call(this,8,Ds)}w(Ns,Ts);var Ds=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function ks(t,e,n,r,i){this.u=t,this.i=e,this.l=n,this.m=r||null,this.s=i||null,this.h=e+":"+n,this.v=new function(){this.a=ys()},this.g=new function(t){this.a=t,this.b=ys()}(this.h),this.f=null,this.b=[],this.a=this.c=null}function Fs(t){return new Pr("invalid-cordova-configuration",t)}function js(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(t){}}function Us(t){return t.f||(t.f=t.ca().then(function(){return new vt(function(e){t.va(function n(r){return e(r),t.Ja(n),!1}),function(t){function e(e){r=!0,o&&o.cancel(),Bs(t).then(function(r){var i=n;if(r&&e&&e.url){var o=null;-1!=(i=ai(e.url)).indexOf("/__/auth/callback")&&(o=(o="object"==typeof(o=pr(Xe(o=Ye(i),"firebaseError")||null))?Or(o):null)?new Oi(r.b,r.c,null,null,o):new Oi(r.b,r.c,i,r.g)),i=o||n}js(t,i)})}var n=new Oi("unknown",null,null,null,new Pr("no-auth-event")),r=!1,o=De(500).then(function(){return Bs(t).then(function(){r||js(t,n)})}),a=i.handleOpenURL;i.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(or("BuildInfo.packageName",i).toLowerCase()+"://")&&e({url:t}),"function"==typeof a)try{a(t)}catch(t){console.error(t)}},Ii||(Ii=new Li),Ii.subscribe(e)}(t)})})),t.f}function Bs(t){var e=null;return function(t){return t.b.get(Ss,t.a).then(function(t){return Ri(t)})}(t.g).then(function(n){return e=n,ws((n=t.g).b,Ss,n.a)}).then(function(){return e})}(t=ks.prototype).ca=function(){return this.ya?this.ya:this.ya=(Yn(void 0)?Xn().then(function(){return new vt(function(t,e){var n=i.document,r=setTimeout(function(){e(Error("Cordova framework is not ready."))},1e3);n.addEventListener("deviceready",function(){clearTimeout(r),t()},!1)})}):St(Error("Cordova must run in an Android or iOS file scheme."))).then(function(){if("function"!=typeof or("universalLinks.subscribe",i))throw Fs("cordova-universal-links-plugin is not installed");if(void 0===or("BuildInfo.packageName",i))throw Fs("cordova-plugin-buildinfo is not installed");if("function"!=typeof or("cordova.plugins.browsertab.openUrl",i))throw Fs("cordova-plugin-browsertab is not installed");if("function"!=typeof or("cordova.InAppBrowser.open",i))throw Fs("cordova-plugin-inappbrowser is not installed")},function(){throw new Pr("cordova-not-ready")})},t.Da=function(t,e){return e(new Pr("operation-not-supported-in-this-environment")),Et()},t.xb=function(){return St(new Pr("operation-not-supported-in-this-environment"))},t.Lb=function(){return!1},t.Gb=function(){return!0},t.Bb=function(){return!0},t.Ba=function(t,e,n){if(this.c)return St(new Pr("redirect-operation-pending"));var r=this,o=i.document,a=null,s=null,u=null,l=null;return this.c=Et().then(function(){return Pi(e),Us(r)}).then(function(){return function(t,e,n,r){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),a=new Oi(e,r,null,o,new Pr("no-auth-event")),s=or("BuildInfo.packageName",i);if("string"!=typeof s)throw new Pr("invalid-cordova-configuration");var u=or("BuildInfo.displayName",i),l={};if(ir().toLowerCase().match(/iphone|ipad|ipod/))l.ibi=s;else{if(!ir().toLowerCase().match(/android/))return St(new Pr("operation-not-supported-in-this-environment"));l.apn=s}u&&(l.appDisplayName=u),o=function(t){var e=new Ns;Ls(e,t),t=[];var n=8*e.g;Ls(e,Os,56>e.c?56-e.c:e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(Rs(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return function(t){return D(t,function(t){return 1<(t=t.toString(16)).length?t:"0"+t}).join("")}(t)}(o),l.sessionId=o;var c=Qa(t.u,t.i,t.l,e,n,null,r,t.m,l,t.s);return t.ca().then(function(){var e=t.h;return t.v.a.set(Ss,a.C(),e)}).then(function(){var e=or("cordova.plugins.browsertab.isAvailable",i);if("function"!=typeof e)throw new Pr("invalid-cordova-configuration");var n=null;e(function(e){if(e){if("function"!=typeof(n=or("cordova.plugins.browsertab.openUrl",i)))throw new Pr("invalid-cordova-configuration");n(c)}else{if("function"!=typeof(n=or("cordova.InAppBrowser.open",i)))throw new Pr("invalid-cordova-configuration");e=!(!(e=ir()).match(/(iPad|iPhone|iPod).*OS 7_\d/i)&&!e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)),t.a=n(c,e?"_blank":"_system","location=yes")}})})}(r,t,e,n)}).then(function(){return new vt(function(t,e){s=function(){var e=or("cordova.plugins.browsertab.close",i);return t(),"function"==typeof e&&e(),r.a&&"function"==typeof r.a.close&&(r.a.close(),r.a=null),!1},r.va(s),l=function(){_r()&&u()},o.addEventListener("resume",u=function(){a||(a=De(2e3).then(function(){e(new Pr("redirect-cancelled-by-user"))}))},!1),ir().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",l,!1)}).o(function(t){return Bs(r).then(function(){throw t})})}).ga(function(){u&&o.removeEventListener("resume",u,!1),l&&o.removeEventListener("visibilitychange",l,!1),a&&a.cancel(),s&&r.Ja(s),r.c=null})},t.va=function(t){this.b.push(t),Us(this).o(function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new Oi("unknown",null,null,null,new Pr("no-auth-event")),t(e))})},t.Ja=function(t){U(this.b,function(e){return e==t})};var Gs={name:"pendingRedirect",B:"session"};function Vs(t){return ws(t.b,Gs,t.a)}function zs(t,e,n){this.v=t,this.l=e,this.u=n,this.h=[],this.f=!1,this.i=y(this.m,this),this.c=new $s,this.s=new ru,this.g=new function(t){this.a=t,this.b=ys()}(this.l+":"+this.u),this.b={},this.b.unknown=this.c,this.b.signInViaRedirect=this.c,this.b.linkViaRedirect=this.c,this.b.reauthViaRedirect=this.c,this.b.signInViaPopup=this.s,this.b.linkViaPopup=this.s,this.b.reauthViaPopup=this.s,this.a=Hs(this.v,this.l,this.u,ka)}function Hs(t,n,r,i){var o=e.SDK_VERSION||null;return Yn()?new ks(t,n,r,o,i):new Xa(t,n,r,o,i)}function Ws(t){t.f||(t.f=!0,t.a.va(t.i));var e=t.a;return t.a.ca().o(function(n){throw t.a==e&&t.reset(),n})}function qs(t){t.a.Gb()&&Ws(t).o(function(e){var n=new Oi("unknown",null,null,null,new Pr("operation-not-supported-in-this-environment"));Zs(e)&&t.m(n)}),t.a.Bb()||tu(t.c)}zs.prototype.reset=function(){this.f=!1,this.a.Ja(this.i),this.a=Hs(this.v,this.l,this.u)},zs.prototype.subscribe=function(t){if(F(this.h,t)||this.h.push(t),!this.f){var e=this;(function(t){return t.b.get(Gs,t.a).then(function(t){return"pending"==t})})(this.g).then(function(t){t?Vs(e.g).then(function(){Ws(e).o(function(t){var n=new Oi("unknown",null,null,null,new Pr("operation-not-supported-in-this-environment"));Zs(t)&&e.m(n)})}):qs(e)}).o(function(){qs(e)})}},zs.prototype.unsubscribe=function(t){U(this.h,function(e){return e==t})},zs.prototype.m=function(t){if(!t)throw new Pr("invalid-auth-event");for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.qb(t.b,t.c)){(e=this.b[t.b])&&e.h(t,r),e=!0;break}}return tu(this.c),e};var Xs=new yr(2e3,1e4),Ys=new yr(3e4,6e4);function Ks(t,e,n,r,i,o){return t.a.xb(e,n,r,function(){t.f||(t.f=!0,t.a.va(t.i))},function(){t.reset()},i,o)}function Zs(t){return!(!t||"auth/cordova-not-ready"!=t.code)}zs.prototype.ba=function(){return this.c.ba()},zs.prototype.Ba=function(t,e,n){var r,i=this;return function(t){return t.b.set(Gs,"pending",t.a)}(this.g).then(function(){return i.a.Ba(t,e,n).o(function(t){if(Zs(t))throw new Pr("operation-not-supported-in-this-environment");return r=t,Vs(i.g).then(function(){throw r})}).then(function(){return i.a.Lb()?new vt(function(){}):Vs(i.g).then(function(){return i.ba()}).then(function(){}).o(function(){})})})},zs.prototype.Da=function(t,e,n,r){return this.a.Da(n,function(n){t.fa(e,null,n,r)},Xs.get())};var Qs={};function Js(t,e,n){var r=e+":"+n;return Qs[r]||(Qs[r]=new zs(t,e,n)),Qs[r]}function $s(){this.b=null,this.f=[],this.c=[],this.a=null,this.g=!1}function tu(t){t.g||(t.g=!0,nu(t,!1,null,null))}function eu(t,e){if(t.b=function(){return Et(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function nu(t,e,n,r){e?r?function(t,e){if(t.b=function(){return St(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):eu(t,n):eu(t,{user:null}),t.f=[],t.c=[]}function ru(){}function iu(t,e){this.a=e,Tr(this,"verificationId",t)}function ou(t,e,n,r){return new Mi(t).Sa(e,n).then(function(t){return new iu(t,r)})}function au(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function su(t){this.f=t,this.b=this.a=null,this.c=0}function uu(t,e){var n=e[Uo],r=e.refreshToken;e=lu(e.expiresIn),t.b=n,t.c=e,t.a=r}function lu(t){return b()+1e3*parseInt(t,10)}function cu(t,e){this.a=t||null,this.b=e||null,Mr(this,{lastSignInTime:br(e||null),creationTime:br(t||null)})}function hu(t,e){for(var n in se.call(this,t),e)this[n]=e[n]}function du(t,n,r){this.D=[],this.G=t.apiKey,this.s=t.appName,this.A=t.authDomain||null,t=e.SDK_VERSION?rr(e.SDK_VERSION):null,this.b=new Fo(this.G,ja(ka),t),this.h=new su(this.b),_u(this,n[Uo]),uu(this.h,n),Tr(this,"refreshToken",this.h.a),xu(this,r||{}),Oe.call(this),this.I=!1,this.A&&sr()&&(this.a=Js(this.A,this.G,this.s)),this.N=[],this.i=null,this.l=function(t){return new au(function(){return t.F(!0)},function(t){return!(!t||"auth/network-request-failed"!=t.code)},function(){var e=t.h.c-b()-3e5;return 0<e?e:0})}(this),this.U=y(this.Ga,this);var i=this;this.ha=null,this.sa=function(t){i.na(t.h)},this.W=null,this.O=[],this.ra=function(t){fu(i,t.f)},this.V=null}function pu(t,e){t.W&&we(t.W,"languageCodeChanged",t.sa),(t.W=e)&&ye(e,"languageCodeChanged",t.sa)}function fu(t,n){t.O=n,Wo(t.b,e.SDK_VERSION?rr(e.SDK_VERSION,t.O):null)}function mu(t,e){t.V&&we(t.V,"frameworkChanged",t.ra),(t.V=e)&&ye(e,"frameworkChanged",t.ra)}function vu(t){try{return e.app(t.s).auth()}catch(e){throw new Pr("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+t.s+"'!")}}function gu(t){t.m||t.l.b||(t.l.start(),we(t,"tokenChanged",t.U),ye(t,"tokenChanged",t.U))}function yu(t){we(t,"tokenChanged",t.U),t.l.stop()}function _u(t,e){t.qa=e,Tr(t,"_lat",e)}function bu(t){for(var e=[],n=0;n<t.N.length;n++)e.push(t.N[n](t));return function(t){return new vt(function(e){var n=t.length,r=[];if(n)for(var i=function(t,i,o){n--,r[t]=i?{Zb:!0,value:o}:{Zb:!1,reason:o},0==n&&e(r)},o=0;o<t.length;o++)Tt(t[o],_(i,o,!0),_(i,o,!1));else e(r)})}(e).then(function(){return t})}function wu(t){t.a&&!t.I&&(t.I=!0,t.a.subscribe(t))}function xu(t,e){Mr(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,metadata:new cu(e.createdAt,e.lastLoginAt),providerData:[]})}function Eu(){}function Su(t){return Et().then(function(){if(t.m)throw new Pr("app-deleted")})}function Tu(t){return D(t.providerData,function(t){return t.providerId})}function Mu(t,e){e&&(Cu(t,e.providerId),t.providerData.push(e))}function Cu(t,e){U(t.providerData,function(t){return t.providerId==e})}function Au(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&Tr(t,e,n)}function Pu(t,e){t!=e&&(Mr(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,providerData:[]}),Tr(t,"metadata",e.metadata?function(t){return new cu(t.a,t.b)}(e.metadata):new cu),N(e.providerData,function(e){Mu(t,e)}),t.h=e.h,Tr(t,"refreshToken",t.h.a))}function Ou(t){return t.F().then(function(e){var n=t.isAnonymous;return function(t,e){return Ia(t.b,fa,{idToken:e}).then(y(t.tc,t))}(t,e).then(function(){return n||Au(t,"isAnonymous",!1),e})})}function Ru(t,e){e[Uo]&&t.qa!=e[Uo]&&(uu(t.h,e),t.dispatchEvent(new hu("tokenChanged")),_u(t,e[Uo]),Au(t,"refreshToken",t.h.a))}function Lu(t,e){return Ou(t).then(function(){if(F(Tu(t),e))return bu(t).then(function(){throw new Pr("provider-already-linked")})})}function Iu(t,e,n){return Cr({user:t,credential:Ai(e),additionalUserInfo:e=Qr(e),operationType:n})}function Nu(t,e){return Ru(t,e),t.reload().then(function(){return t})}function Du(t,n,r,i,o){if(!sr())return St(new Pr("operation-not-supported-in-this-environment"));if(t.i&&!o)return St(t.i);var a=Zr(r.providerId),s=fr(t.uid+":::"),u=null;(!cr()||Kn())&&t.A&&r.isOAuthProvider&&(u=Qa(t.A,t.G,t.s,n,r,null,s,e.SDK_VERSION||null));var l=Wn(u,a&&a.Aa,a&&a.za);return i=i().then(function(){if(Fu(t),!o)return t.F().then(function(){})}).then(function(){return Ks(t.a,l,n,r,s,!!u)}).then(function(){return new vt(function(e,r){t.fa(n,null,new Pr("cancelled-popup-request"),t.g||null),t.f=e,t.v=r,t.g=s,t.c=t.a.Da(t,n,l,s)})}).then(function(t){return l&&Hn(l),t?Cr(t):null}).o(function(t){throw l&&Hn(l),t}),ju(t,i,o)}function ku(t,e,n,r,i){if(!sr())return St(new Pr("operation-not-supported-in-this-environment"));if(t.i&&!i)return St(t.i);var o=null,a=fr(t.uid+":::");return r=r().then(function(){if(Fu(t),!i)return t.F().then(function(){})}).then(function(){return t.Z=a,bu(t)}).then(function(e){return t.da&&(e=(e=t.da).b.set(Bu,t.C(),e.a)),e}).then(function(){return t.a.Ba(e,n,a)}).o(function(e){if(o=e,t.da)return Gu(t.da);throw o}).then(function(){if(o)throw o}),ju(t,r,i)}function Fu(t){if(!t.a||!t.I){if(t.a&&!t.I)throw new Pr("internal-error");throw new Pr("auth-domain-config-required")}}function ju(t,e,n){var r=function(t,e,n){return t.i&&!n?(e.cancel(),St(t.i)):e.o(function(e){throw!e||"auth/user-disabled"!=e.code&&"auth/user-token-expired"!=e.code||(t.i||t.dispatchEvent(new hu("userInvalidated")),t.i=e),e})}(t,e,n);return t.D.push(r),r.ga(function(){j(t.D,r)}),r}function Uu(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName},n={};if(!(t.stsTokenManager&&t.stsTokenManager.accessToken&&t.stsTokenManager.expirationTime))return null;n[Uo]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null,n.expiresIn=(t.stsTokenManager.expirationTime-b())/1e3;var r=new du(e,n,t);return t.providerData&&N(t.providerData,function(t){t&&Mu(r,Cr(t))}),t.redirectEventId&&(r.Z=t.redirectEventId),r}$s.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},$s.prototype.h=function(t,e){if(t){this.reset(),this.g=!0;var n=t.b,r=t.c;"unknown"!=n||t.a&&"auth/web-storage-unsupported"==t.a.code||t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code?t.a?(nu(this,!0,null,t.a),Et()):e.wa(n,r)?function(t,e,n){n=n.wa(e.b,e.c);var r=e.f,i=e.g,o=!!e.b.match(/Redirect$/);n(r,i).then(function(e){nu(t,o,e,null)}).o(function(e){nu(t,o,null,e)})}(this,t,e):St(new Pr("invalid-auth-event")):(nu(this,!1,null,null),Et())}else St(new Pr("invalid-auth-event"))},$s.prototype.ba=function(){var t=this;return new vt(function(e,n){t.b?t.b().then(e,n):(t.f.push(e),t.c.push(n),function(t){var e=new Pr("timeout");t.a&&t.a.cancel(),t.a=De(Ys.get()).then(function(){t.b||nu(t,!0,null,e)})}(t))})},ru.prototype.h=function(t,e){if(t){var n=t.b,r=t.c;t.a?(e.fa(t.b,null,t.a,t.c),Et()):e.wa(n,r)?function(t,e){var n=t.c,r=t.b;e.wa(r,n)(t.f,t.g).then(function(t){e.fa(r,t,null,n)}).o(function(t){e.fa(r,null,t,n)})}(t,e):St(new Pr("invalid-auth-event"))}else St(new Pr("invalid-auth-event"))},iu.prototype.confirm=function(t){return t=Ci(this.verificationId,t),this.a(t)},au.prototype.start=function(){this.a=this.c,function t(e,n){e.stop(),e.b=De(function(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}(e,n)).then(function(){return t=i.document,e=null,_r()||!t?Et():new vt(function(n){t.addEventListener("visibilitychange",e=function(){_r()&&(t.removeEventListener("visibilitychange",e,!1),n())},!1)}).o(function(n){throw t.removeEventListener("visibilitychange",e,!1),n});var t,e}).then(function(){return e.h()}).then(function(){t(e,!0)}).o(function(n){e.i(n)&&t(e,!1)})}(this,!0)},au.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},su.prototype.C=function(){return{apiKey:this.f.b,refreshToken:this.a,accessToken:this.b,expirationTime:this.c}},su.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?St(new Pr("user-token-expired")):t||!this.b||b()>this.c-3e4?this.a?function(t,e){return function(t,e){return new vt(function(n,r){"refresh_token"==e.grant_type&&e.refresh_token||"authorization_code"==e.grant_type&&e.code?qo(t,t.i+"?key="+encodeURIComponent(t.b),function(t){t?t.error?r(Da(t)):t.access_token&&t.refresh_token?n(t):r(new Pr("internal-error")):r(new Pr("network-request-failed"))},"POST",sn(e).toString(),t.f,t.l.get()):r(new Pr("internal-error"))})}(t.f,e).then(function(e){return t.b=e.access_token,t.c=lu(e.expires_in),t.a=e.refresh_token,{accessToken:t.b,expirationTime:t.c,refreshToken:t.a}}).o(function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e})}(this,{grant_type:"refresh_token",refresh_token:this.a}):Et(null):Et({accessToken:this.b,expirationTime:this.c,refreshToken:this.a})},cu.prototype.C=function(){return{lastLoginAt:this.b,createdAt:this.a}},w(hu,se),w(du,Oe),du.prototype.na=function(t){this.ha=t,Ho(this.b,t)},du.prototype.aa=function(){return this.ha},du.prototype.Ka=function(){return G(this.O)},du.prototype.Ga=function(){this.l.b&&(this.l.stop(),this.l.start())},Tr(du.prototype,"providerId","firebase"),(t=du.prototype).reload=function(){var t=this;return ju(this,Su(this).then(function(){return Ou(t).then(function(){return bu(t)}).then(Eu)}))},t.F=function(t){var e=this;return ju(this,Su(this).then(function(){return e.h.getToken(t)}).then(function(t){if(!t)throw new Pr("internal-error");return t.accessToken!=e.qa&&(_u(e,t.accessToken),e.dispatchEvent(new hu("tokenChanged"))),Au(e,"refreshToken",t.refreshToken),t.accessToken}))},t.getToken=function(t){return Er["firebase.User.prototype.getToken is deprecated. Please use firebase.User.prototype.getIdToken instead."]||(Er["firebase.User.prototype.getToken is deprecated. Please use firebase.User.prototype.getIdToken instead."]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn("firebase.User.prototype.getToken is deprecated. Please use firebase.User.prototype.getIdToken instead.")),this.F(t)},t.tc=function(t){if(!(t=t.users)||!t.length)throw new Pr("internal-error");xu(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt});for(var e=function(t){return(t=t.providerUserInfo)&&t.length?D(t,function(t){return new function(t,e,n,r,i,o){Mr(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)}):[]}(t),n=0;n<e.length;n++)Mu(this,e[n]);Au(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length))},t.bb=function(t){var e=this,n=null;return ju(this,t.f(this.b,this.uid).then(function(t){return Ru(e,t),n=Iu(e,t,"reauthenticate"),e.i=null,e.reload()}).then(function(){return n}),!0)},t.uc=function(t){return this.bb(t).then(function(){})},t.$a=function(t){var e=this,n=null;return ju(this,Lu(this,t.providerId).then(function(){return e.F()}).then(function(n){return t.c(e.b,n)}).then(function(t){return n=Iu(e,t,"link"),Nu(e,t)}).then(function(){return n}))},t.kc=function(t){return this.$a(t).then(function(t){return t.user})},t.mc=function(t,e){var n=this;return ju(this,Lu(this,"phone").then(function(){return ou(vu(n),t,e,y(n.$a,n))}))},t.vc=function(t,e){var n=this;return ju(this,Et().then(function(){return ou(vu(n),t,e,y(n.bb,n))}),!0)},t.mb=function(t){var e=this;return ju(this,this.F().then(function(n){return e.b.mb(n,t)}).then(function(t){return Ru(e,t),e.reload()}))},t.Mc=function(t){var e=this;return ju(this,this.F().then(function(n){return t.c(e.b,n)}).then(function(t){return Ru(e,t),e.reload()}))},t.nb=function(t){var e=this;return ju(this,this.F().then(function(n){return e.b.nb(n,t)}).then(function(t){return Ru(e,t),e.reload()}))},t.ob=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return Su(this);var e=this;return ju(this,this.F().then(function(n){return e.b.ob(n,{displayName:t.displayName,photoUrl:t.photoURL})}).then(function(t){return Ru(e,t),Au(e,"displayName",t.displayName||null),Au(e,"photoURL",t.photoUrl||null),N(e.providerData,function(t){"password"===t.providerId&&(Tr(t,"displayName",e.displayName),Tr(t,"photoURL",e.photoURL))}),bu(e)}).then(Eu))},t.Lc=function(t){var e=this;return ju(this,Ou(this).then(function(n){return F(Tu(e),t)?function(t,e,n){return Ia(t,ha,{idToken:e,deleteProvider:n})}(e.b,n,[t]).then(function(t){var n={};return N(t.providerUserInfo||[],function(t){n[t.providerId]=!0}),N(Tu(e),function(t){n[t]||Cu(e,t)}),n[Mi.PROVIDER_ID]||Tr(e,"phoneNumber",null),bu(e)}):bu(e).then(function(){throw new Pr("no-such-provider")})}))},t.delete=function(){var t=this;return ju(this,this.F().then(function(e){return Ia(t.b,ca,{idToken:e})}).then(function(){t.dispatchEvent(new hu("userDeleted"))})).then(function(){for(var e=0;e<t.D.length;e++)t.D[e].cancel("app-deleted");pu(t,null),mu(t,null),t.D=[],t.m=!0,yu(t),Tr(t,"refreshToken",null),t.a&&t.a.unsubscribe(t)})},t.qb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.Z||null)==e||"reauthViaRedirect"==t&&(this.Z||null)==e)},t.fa=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.g||null)||(n&&this.v?this.v(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.v)},t.wa=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?y(this.vb,this):"reauthViaPopup"==t&&e==(this.g||null)?y(this.wb,this):"linkViaRedirect"==t&&(this.Z||null)==e?y(this.vb,this):"reauthViaRedirect"==t&&(this.Z||null)==e?y(this.wb,this):null},t.nc=function(t){var e=this;return Du(this,"linkViaPopup",t,function(){return Lu(e,t.providerId).then(function(){return bu(e)})},!1)},t.wc=function(t){return Du(this,"reauthViaPopup",t,function(){return Et()},!0)},t.oc=function(t){var e=this;return ku(this,"linkViaRedirect",t,function(){return Lu(e,t.providerId)},!1)},t.xc=function(t){return ku(this,"reauthViaRedirect",t,function(){return Et()},!0)},t.vb=function(t,e){var n=this;this.c&&(this.c.cancel(),this.c=null);var r=null;return ju(this,this.F().then(function(r){return ra(n.b,{requestUri:t,sessionId:e,idToken:r})}).then(function(t){return r=Iu(n,t,"link"),Nu(n,t)}).then(function(){return r}))},t.wb=function(t,e){var n=this;this.c&&(this.c.cancel(),this.c=null);var r=null;return ju(this,Et().then(function(){return si(ia(n.b,{requestUri:t,sessionId:e}),n.uid)}).then(function(t){return r=Iu(n,t,"reauthenticate"),Ru(n,t),n.i=null,n.reload()}).then(function(){return r}),!0)},t.fb=function(t){var e=this,n=null;return ju(this,this.F().then(function(e){return n=e,void 0===t||ot(t)?{}:Vr(new Ir(t))}).then(function(t){return e.b.fb(n,t)}).then(function(t){if(e.email!=t)return e.reload()}).then(function(){}))},t.toJSON=function(){return this.C()},t.C=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,providerData:[],apiKey:this.G,appName:this.s,authDomain:this.A,stsTokenManager:this.h.C(),redirectEventId:this.Z||null};return this.metadata&&ct(t,this.metadata.C()),N(this.providerData,function(e){t.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(e))}),t};var Bu={name:"redirectUser",B:"session"};function Gu(t){return ws(t.b,Bu,t.a)}function Vu(t){this.a=t,this.b=ys(),this.c=null,this.f=function(t){var e=Wu("local"),n=Wu("session"),r=Wu("none");return function(t,e,n){var r=bs(e,n),o=_s(t,e.B);return t.get(e,n).then(function(a){var s=null;try{s=pr(i.localStorage.getItem(r))}catch(t){}if(s&&!a)return i.localStorage.removeItem(r),t.set(e,s,n);s&&a&&"localStorage"!=o.type&&i.localStorage.removeItem(r)})}(t.b,e,t.a).then(function(){return t.b.get(n,t.a)}).then(function(i){return i?n:t.b.get(r,t.a).then(function(n){return n?r:t.b.get(e,t.a).then(function(n){return n?e:t.b.get(Hu,t.a).then(function(t){return t?Wu(t):e})})})}).then(function(e){return t.c=e,zu(t,e.B)}).o(function(){t.c||(t.c=e)})}(this),this.b.addListener(Wu("local"),this.a,y(this.g,this))}function zu(t,e){var n,r=[];for(n in vs)vs[n]!==e&&r.push(ws(t.b,Wu(vs[n]),t.a));return r.push(ws(t.b,Hu,t.a)),function(t){return new vt(function(e,n){var r=t.length,i=[];if(r)for(var o=function(t,n){r--,i[t]=n,0==r&&e(i)},a=function(t){n(t)},s=0;s<t.length;s++)Tt(t[s],_(o,s),a);else e(i)})}(r)}Vu.prototype.g=function(){var t=this,e=Wu("local");Ku(this,function(){return Et().then(function(){return t.c&&"local"!=t.c.B?t.b.get(e,t.a):null}).then(function(n){if(n)return zu(t,"local").then(function(){t.c=e})})})};var Hu={name:"persistence",B:"session"};function Wu(t){return{name:"authUser",B:t}}function qu(t,e){return Ku(t,function(){return t.b.set(t.c,e.C(),t.a)})}function Xu(t){return Ku(t,function(){return ws(t.b,t.c,t.a)})}function Yu(t,e){return Ku(t,function(){return t.b.get(t.c,t.a).then(function(t){return t&&e&&(t.authDomain=e),Uu(t||{})})})}function Ku(t,e){return t.f=t.f.then(e,e),t.f}function Zu(t){if(this.l=!1,Tr(this,"app",t),!rl(this).options||!rl(this).options.apiKey)throw new Pr("invalid-api-key");t=e.SDK_VERSION?rr(e.SDK_VERSION):null,this.b=new Fo(rl(this).options&&rl(this).options.apiKey,ja(ka),t),this.N=[],this.m=[],this.I=[],this.Ob=e.INTERNAL.createSubscribe(y(this.hc,this)),this.O=void 0,this.Pb=e.INTERNAL.createSubscribe(y(this.ic,this)),el(this,null),this.h=new Vu(rl(this).options.apiKey+":"+rl(this).name),this.G=new function(t){this.a=t,this.b=ys()}(rl(this).options.apiKey+":"+rl(this).name),this.U=sl(this,function(t){var e=rl(t).options.authDomain,n=function(t){var e=function(t,e){return t.b.get(Bu,t.a).then(function(t){return t&&e&&(t.authDomain=e),Uu(t||{})})}(t.G,rl(t).options.authDomain).then(function(e){return(t.A=e)&&(e.da=t.G),Gu(t.G)});return sl(t,e)}(t).then(function(){return Yu(t.h,e)}).then(function(e){return e?(e.da=t.G,t.A&&(t.A.Z||null)==(e.Z||null)?e:e.reload().then(function(){return qu(t.h,e).then(function(){return e})}).o(function(n){return"auth/network-request-failed"==n.code?e:Xu(t.h)})):null}).then(function(e){el(t,e||null)});return sl(t,n)}(this)),this.i=sl(this,function(t){return t.U.then(function(){return t.ba()}).o(function(){}).then(function(){if(!t.l)return t.ha()}).o(function(){}).then(function(){if(!t.l){t.W=!0;var e=t.h;e.b.addListener(Wu("local"),e.a,t.ha)}})}(this)),this.W=!1,this.ha=y(this.Hc,this),this.Ga=y(this.ka,this),this.qa=y(this.Yb,this),this.ra=y(this.fc,this),this.sa=y(this.gc,this),function(t){var e=rl(t).options.authDomain,n=rl(t).options.apiKey;e&&sr()&&(t.Nb=t.U.then(function(){if(!t.l){if(t.a=Js(e,n,rl(t).name),t.a.subscribe(t),il(t)&&wu(il(t)),t.A){wu(t.A);var r=t.A;r.na(t.aa()),pu(r,t),fu(r=t.A,t.D),mu(r,t),t.A=null}return t.a}}))}(this),this.INTERNAL={},this.INTERNAL.delete=y(this.delete,this),this.INTERNAL.logFramework=y(this.pc,this),this.s=0,Oe.call(this),function(t){Object.defineProperty(t,"lc",{get:function(){return this.aa()},set:function(t){this.na(t)},enumerable:!1}),t.V=null}(this),this.D=[]}function Qu(t){se.call(this,"languageCodeChanged"),this.h=t}function Ju(t){se.call(this,"frameworkChanged"),this.f=t}function $u(t){return t.Nb||St(new Pr("auth-domain-config-required"))}function tl(t,e){var n={};return n.apiKey=rl(t).options.apiKey,n.authDomain=rl(t).options.authDomain,n.appName=rl(t).name,t.U.then(function(){return function(t,e,n,r){var i=new du(t,e);return n&&(i.da=n),r&&fu(i,r),i.reload().then(function(){return i})}(n,e,t.G,t.Ka())}).then(function(e){return il(t)&&e.uid==il(t).uid?(Pu(il(t),e),t.ka(e)):(el(t,e),wu(e),t.ka(e))}).then(function(){al(t)})}function el(t,e){il(t)&&(function(t,e){U(t.N,function(t){return t==e})}(il(t),t.Ga),we(il(t),"tokenChanged",t.qa),we(il(t),"userDeleted",t.ra),we(il(t),"userInvalidated",t.sa),yu(il(t))),e&&(e.N.push(t.Ga),ye(e,"tokenChanged",t.qa),ye(e,"userDeleted",t.ra),ye(e,"userInvalidated",t.sa),0<t.s&&gu(e)),Tr(t,"currentUser",e),e&&(e.na(t.aa()),pu(e,t),fu(e,t.D),mu(e,t))}function nl(t,e){var n=null,r=null;return sl(t,e.then(function(e){return n=Ai(e),r=Qr(e),tl(t,e)}).then(function(){return Cr({user:il(t),credential:n,additionalUserInfo:r,operationType:"signIn"})}))}function rl(t){return t.app}function il(t){return t.currentUser}function ol(t){return il(t)&&il(t)._lat||null}function al(t){if(t.W){for(var e=0;e<t.m.length;e++)t.m[e]&&t.m[e](ol(t));if(t.O!==t.getUid()&&t.I.length)for(t.O=t.getUid(),e=0;e<t.I.length;e++)t.I[e]&&t.I[e](ol(t))}}function sl(t,e){return t.N.push(e),e.ga(function(){j(t.N,e)}),e}function ul(t,e,n,r,o,a){if(Tr(this,"type","recaptcha"),this.b=this.c=null,this.m=!1,this.l=e,this.a=n||{theme:"light",type:"image"},this.g=[],this.a[hl])throw new Pr("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.h="invisible"===this.a[dl],!i.document)throw new Pr("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!Ln(e)||!this.h&&Ln(e).hasChildNodes())throw new Pr("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.u=new Fo(t,a||null,o||null),this.s=r||function(){return null};var s=this;this.i=[];var u=this.a[ll];this.a[ll]=function(t){if(pl(s,t),"function"==typeof u)u(t);else if("string"==typeof u){var e=or(u,i);"function"==typeof e&&e(t)}};var l=this.a[cl];this.a[cl]=function(){if(pl(s,null),"function"==typeof l)l();else if("string"==typeof l){var t=or(l,i);"function"==typeof t&&t()}}}Vu.prototype.ib=function(t){var e=null,n=this;return function(t){var e=new Pr("invalid-persistence-type"),n=new Pr("unsupported-persistence-type");t:{for(r in vs)if(vs[r]==t){var r=!0;break t}r=!1}if(!r||"string"!=typeof t)throw e;switch(Qn()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;default:if(!ar()&&"none"!==t)throw n}}(t),Ku(this,function(){return t!=n.c.B?n.b.get(n.c,n.a).then(function(r){return e=r,zu(n,t)}).then(function(){if(n.c=Wu(t),e)return n.b.set(n.c,e,n.a)}):Et()})},w(Zu,Oe),w(Qu,se),w(Ju,se),(t=Zu.prototype).ib=function(t){return sl(this,t=this.h.ib(t))},t.na=function(t){this.V===t||this.l||(this.V=t,Ho(this.b,this.V),this.dispatchEvent(new Qu(this.aa())))},t.aa=function(){return this.V},t.Nc=function(){var t=i.navigator;this.na(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.pc=function(t){this.D.push(t),Wo(this.b,e.SDK_VERSION?rr(e.SDK_VERSION,this.D):null),this.dispatchEvent(new Ju(this.D))},t.Ka=function(){return G(this.D)},t.toJSON=function(){return{apiKey:rl(this).options.apiKey,authDomain:rl(this).options.authDomain,appName:rl(this).name,currentUser:il(this)&&il(this).C()}},t.qb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},t.fa=function(t,e,n,r){"signInViaPopup"==t&&this.g==r&&(n&&this.v?this.v(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.v)},t.wa=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?y(this.Xb,this):null},t.Xb=function(t,e){var n=this;t={requestUri:t,sessionId:e},this.c&&(this.c.cancel(),this.c=null);var r=null,i=null,o=na(n.b,t).then(function(t){return r=Ai(t),i=Qr(t),t});return sl(this,t=n.U.then(function(){return o}).then(function(t){return tl(n,t)}).then(function(){return Cr({user:il(n),credential:r,additionalUserInfo:i,operationType:"signIn"})}))},t.Fc=function(t){if(!sr())return St(new Pr("operation-not-supported-in-this-environment"));var n=this,r=Zr(t.providerId),i=fr(),o=null;(!cr()||Kn())&&rl(this).options.authDomain&&t.isOAuthProvider&&(o=Qa(rl(this).options.authDomain,rl(this).options.apiKey,rl(this).name,"signInViaPopup",t,null,i,e.SDK_VERSION||null));var a=Wn(o,r&&r.Aa,r&&r.za);return sl(this,r=$u(this).then(function(e){return Ks(e,a,"signInViaPopup",t,i,!!o)}).then(function(){return new vt(function(t,e){n.fa("signInViaPopup",null,new Pr("cancelled-popup-request"),n.g),n.f=t,n.v=e,n.g=i,n.c=n.a.Da(n,"signInViaPopup",a,i)})}).then(function(t){return a&&Hn(a),t?Cr(t):null}).o(function(t){throw a&&Hn(a),t}))},t.Gc=function(t){if(!sr())return St(new Pr("operation-not-supported-in-this-environment"));var e=this;return sl(this,$u(this).then(function(){return Ku(t=e.h,function(){return t.b.set(Hu,t.c.B,t.a)});var t}).then(function(){return e.a.Ba("signInViaRedirect",t)}))},t.ba=function(){if(!sr())return St(new Pr("operation-not-supported-in-this-environment"));var t=this;return sl(this,$u(this).then(function(){return t.a.ba()}).then(function(t){return t?Cr(t):null}))},t.kb=function(){var t=this;return sl(this,this.i.then(function(){return il(t)?(el(t,null),Xu(t.h).then(function(){al(t)})):Et()}))},t.Hc=function(){var t=this;return Yu(this.h,rl(this).options.authDomain).then(function(e){if(!t.l){var n;if(n=il(t)&&e){n=il(t).uid;var r=e.uid;n=void 0!==n&&null!==n&&""!==n&&void 0!==r&&null!==r&&""!==r&&n==r}if(n)return Pu(il(t),e),il(t).F();(il(t)||e)&&(el(t,e),e&&(wu(e),e.da=t.G),t.a&&t.a.subscribe(t),al(t))}})},t.ka=function(t){return qu(this.h,t)},t.Yb=function(){al(this),this.ka(il(this))},t.fc=function(){this.kb()},t.gc=function(){this.kb()},t.hc=function(t){var e=this;this.addAuthTokenListener(function(){t.next(il(e))})},t.ic=function(t){var e=this;!function(t,e){t.I.push(e),sl(t,t.i.then(function(){!t.l&&F(t.I,e)&&t.O!==t.getUid()&&(t.O=t.getUid(),e(ol(t)))}))}(this,function(){t.next(il(e))})},t.rc=function(t,n,r){var i=this;return this.W&&e.Promise.resolve().then(function(){d(t)?t(il(i)):d(t.next)&&t.next(il(i))}),this.Ob(t,n,r)},t.qc=function(t,n,r){var i=this;return this.W&&e.Promise.resolve().then(function(){i.O=i.getUid(),d(t)?t(il(i)):d(t.next)&&t.next(il(i))}),this.Pb(t,n,r)},t.$b=function(t){var e=this;return sl(this,this.i.then(function(){return il(e)?il(e).F(t).then(function(t){return{accessToken:t}}):null}))},t.Bc=function(t){return this.Hb(t).then(function(t){return t.user})},t.Hb=function(t){var e=this;return this.i.then(function(){return nl(e,Ia(e.b,Aa,{token:t}))}).then(function(t){var n=t.user;return Au(n,"isAnonymous",!1),e.ka(n),t})},t.Ib=function(t,e){var n=this;return this.i.then(function(){return nl(n,Ia(n.b,Pa,{email:t,password:e}))})},t.Cc=function(t,e){return this.Ib(t,e).then(function(t){return t.user})},t.Sb=function(t,e){return this.sb(t,e).then(function(t){return t.user})},t.sb=function(t,e){var n=this;return this.i.then(function(){return nl(n,Ia(n.b,ua,{email:t,password:e}))})},t.Ac=function(t){return this.Oa(t).then(function(t){return t.user})},t.Oa=function(t){var e=this;return this.i.then(function(){return nl(e,t.xa(e.b))})},t.jb=function(){return this.Jb().then(function(t){return t.user})},t.Jb=function(){var t=this;return this.i.then(function(){var e=il(t);return e&&e.isAnonymous?Cr({user:e,credential:null,additionalUserInfo:Cr({providerId:null,isNewUser:!1}),operationType:"signIn"}):nl(t,t.b.jb()).then(function(e){var n=e.user;return Au(n,"isAnonymous",!0),t.ka(n),e})})},t.getUid=function(){return il(this)&&il(this).uid||null},t.Qb=function(t){this.addAuthTokenListener(t),this.s++,0<this.s&&il(this)&&gu(il(this))},t.yc=function(t){var e=this;N(this.m,function(n){n==t&&e.s--}),0>this.s&&(this.s=0),0==this.s&&il(this)&&yu(il(this)),this.removeAuthTokenListener(t)},t.addAuthTokenListener=function(t){var e=this;this.m.push(t),sl(this,this.i.then(function(){e.l||F(e.m,t)&&t(ol(e))}))},t.removeAuthTokenListener=function(t){U(this.m,function(e){return e==t})},t.delete=function(){this.l=!0;for(var t=0;t<this.N.length;t++)this.N[t].cancel("app-deleted");return this.N=[],this.h&&(t=this.h).b.removeListener(Wu("local"),t.a,this.ha),this.a&&this.a.unsubscribe(this),e.Promise.resolve()},t.Vb=function(t){return sl(this,function(t,e){return Ia(t,la,{identifier:e,continueUri:ur()?Gn():"http://localhost"}).then(function(t){return t.allProviders||[]})}(this.b,t))},t.Wb=function(t){return sl(this,function(t,e){return Ia(t,la,{identifier:e,continueUri:ur()?Gn():"http://localhost"}).then(function(t){return t.signinMethods||[]})}(this.b,t))},t.jc=function(t){return!!Ei(t)},t.hb=function(t,e){var n=this;return sl(this,Et().then(function(){var t=new Ir(e);if(!t.c)throw new Pr("argument-error",Dr+" must be true when sending sign in link to email");return Vr(t)}).then(function(e){return n.b.hb(t,e)}).then(function(){}))},t.Oc=function(t){return this.Ia(t).then(function(t){return t.data.email})},t.Wa=function(t,e){return sl(this,this.b.Wa(t,e).then(function(){}))},t.Ia=function(t){return sl(this,this.b.Ia(t).then(function(t){return new function(t){var e={},n=t.email,r=t.newEmail;if(!(t=t.requestType)||"EMAIL_SIGNIN"!=t&&!n)throw Error("Invalid provider user info!");e.fromEmail=r||null,e.email=n||null,Tr(this,"operation",t),Tr(this,"data",Ar(e))}(t)}))},t.Ua=function(t){return sl(this,this.b.Ua(t).then(function(){}))},t.gb=function(t,e){var n=this;return sl(this,Et().then(function(){return void 0===e||ot(e)?{}:Vr(new Ir(e))}).then(function(e){return n.b.gb(t,e)}).then(function(){}))},t.Ec=function(t,e){return sl(this,ou(this,t,e,y(this.Oa,this)))},t.Dc=function(t,e){var n=this;return sl(this,Et().then(function(){var r=xi(t,e||Gn());return n.Oa(r)}))};var ll="callback",cl="expired-callback",hl="sitekey",dl="size";function pl(t,e){for(var n=0;n<t.i.length;n++)try{t.i[n](e)}catch(t){}}function fl(t,e){return t.g.push(e),e.ga(function(){j(t.g,e)}),e}function ml(t){if(t.m)throw new Pr("internal-error","RecaptchaVerifier instance has been destroyed.")}(t=ul.prototype).ya=function(){var t=this;return this.c?this.c:this.c=fl(this,Et().then(function(){if(ur()&&!Zn())return Xn();throw new Pr("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")}).then(function(){return function(t,e){return new vt(function(n,r){gr()?!i.grecaptcha||e!==t.c&&!t.b?(i[t.a]=function(){if(i.grecaptcha){t.c=e;var o=i.grecaptcha.render;i.grecaptcha.render=function(e,n){return e=o(e,n),t.b++,e},n()}else r(new Pr("internal-error"));delete i[t.a]},Et(Oo(_n(vl,{onload:t.a,hl:e||""}))).o(function(){r(new Pr("internal-error","Unable to load external reCAPTCHA dependencies!"))})):n():r(new Pr("network-request-failed"))})}(yl(),t.s())}).then(function(){return Ia(t.u,_a,{})}).then(function(e){t.a[hl]=e.recaptchaSiteKey}).o(function(e){throw t.c=null,e}))},t.render=function(){ml(this);var t=this;return fl(this,this.ya().then(function(){if(null===t.b){var e=t.l;if(!t.h){var n=Ln(e);e=function(t,e,n){var r=arguments,i=document,a=String(r[0]),s=r[1];if(!dn&&s&&(s.name||s.type)){if(a=["<",a],s.name&&a.push(' name="',H(s.name),'"'),s.type){a.push(' type="',H(s.type),'"');var u={};ct(u,s),delete u.type,s=u}a.push(">"),a=a.join("")}return a=i.createElement(a),s&&(o(s)?a.className=s:c(s)?a.className=s.join(" "):In(a,s)),2<r.length&&function(t,e,n){function r(n){n&&e.appendChild(o(n)?t.createTextNode(n):n)}for(var i=2;i<n.length;i++){var a=n[i];!h(a)||p(a)&&0<a.nodeType?r(a):N(Dn(a)?G(a):a,r)}}(i,a,r),a}("DIV"),n.appendChild(e)}t.b=grecaptcha.render(e,t.a)}return t.b}))},t.verify=function(){ml(this);var t=this;return fl(this,this.render().then(function(e){return new vt(function(n){var r=grecaptcha.getResponse(e);if(r)n(r);else{var i=function(e){e&&(function(t,e){U(t.i,function(t){return t==e})}(t,i),n(e))};t.i.push(i),t.h&&grecaptcha.execute(t.b)}})}))},t.reset=function(){ml(this),null!==this.b&&grecaptcha.reset(this.b)},t.clear=function(){ml(this),this.m=!0,yl().b--;for(var t=0;t<this.g.length;t++)this.g[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.h){t=Ln(this.l);for(var e;e=t.firstChild;)t.removeChild(e)}};var vl=vn("https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),gl=null;function yl(){return gl||(gl=new function(){this.b=i.grecaptcha?1/0:0,this.c=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}),gl}function _l(t,n,r){try{this.f=r||e.app()}catch(t){throw new Pr("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.f.options||!this.f.options.apiKey)throw new Pr("invalid-api-key");r=this.f.options.apiKey;var i=this,o=null;try{o=this.f.auth().Ka()}catch(t){}o=e.SDK_VERSION?rr(e.SDK_VERSION,o):null,ul.call(this,r,t,n,function(){try{var t=i.f.auth().aa()}catch(e){t=null}return t},o,ja(ka))}function bl(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,a=0;a<e.length;a++)if(e[a].optional)o=!0;else{if(o)throw new Pr("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].M(n[i])&&!o){if(e=e[i],0>i||i>=wl.length)throw new Pr("internal-error","Argument validator received an unsupported number of arguments.");n=wl[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.K+".";break t}r=null}}if(r)throw new Pr("argument-error",t+" failed: "+r)}w(_l,ul);var wl="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function xl(t,e){return{name:t||"",K:"a valid string",optional:!!e,M:o}}function El(){return{name:"opt_forceRefresh",K:"a boolean",optional:!0,M:a}}function Sl(t,e){return{name:t||"",K:"a valid object",optional:!!e,M:p}}function Tl(t,e){return{name:t||"",K:"a function",optional:!!e,M:d}}function Ml(t,e){return{name:t||"",K:"null",optional:!!e,M:l}}function Cl(t){return{name:t?t+"Credential":"credential",K:t?"a valid "+t+" credential":"a valid credential",optional:!1,M:function(e){return!!e&&!(!e.xa||t&&e.providerId!==t)}}}function Al(){return{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!!(t&&o(t.type)&&d(t.verify))}}}function Pl(t,e,n,r){return{name:n||"",K:t.K+" or "+e.K,optional:!!r,M:function(n){return t.M(n)||e.M(n)}}}function Ol(t,e){for(var n in e){var r=e[n].name;t[r]=Ll(r,t[n],e[n].j)}}function Rl(t,e,n,r){t[e]=Ll(e,n,r)}function Ll(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return bl(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=function(t){return(t=t.split("."))[t.length-1]}(t);for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}Ol(Zu.prototype,{Ua:{name:"applyActionCode",j:[xl("code")]},Ia:{name:"checkActionCode",j:[xl("code")]},Wa:{name:"confirmPasswordReset",j:[xl("code"),xl("newPassword")]},Sb:{name:"createUserWithEmailAndPassword",j:[xl("email"),xl("password")]},sb:{name:"createUserAndRetrieveDataWithEmailAndPassword",j:[xl("email"),xl("password")]},Vb:{name:"fetchProvidersForEmail",j:[xl("email")]},Wb:{name:"fetchSignInMethodsForEmail",j:[xl("email")]},ba:{name:"getRedirectResult",j:[]},jc:{name:"isSignInWithEmailLink",j:[xl("emailLink")]},qc:{name:"onAuthStateChanged",j:[Pl(Sl(),Tl(),"nextOrObserver"),Tl("opt_error",!0),Tl("opt_completed",!0)]},rc:{name:"onIdTokenChanged",j:[Pl(Sl(),Tl(),"nextOrObserver"),Tl("opt_error",!0),Tl("opt_completed",!0)]},gb:{name:"sendPasswordResetEmail",j:[xl("email"),Pl(Sl("opt_actionCodeSettings",!0),Ml(null,!0),"opt_actionCodeSettings",!0)]},hb:{name:"sendSignInLinkToEmail",j:[xl("email"),Sl("actionCodeSettings")]},ib:{name:"setPersistence",j:[xl("persistence")]},Oa:{name:"signInAndRetrieveDataWithCredential",j:[Cl()]},jb:{name:"signInAnonymously",j:[]},Jb:{name:"signInAnonymouslyAndRetrieveData",j:[]},Ac:{name:"signInWithCredential",j:[Cl()]},Bc:{name:"signInWithCustomToken",j:[xl("token")]},Hb:{name:"signInAndRetrieveDataWithCustomToken",j:[xl("token")]},Cc:{name:"signInWithEmailAndPassword",j:[xl("email"),xl("password")]},Dc:{name:"signInWithEmailLink",j:[xl("email"),xl("emailLink",!0)]},Ib:{name:"signInAndRetrieveDataWithEmailAndPassword",j:[xl("email"),xl("password")]},Ec:{name:"signInWithPhoneNumber",j:[xl("phoneNumber"),Al()]},Fc:{name:"signInWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Gc:{name:"signInWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},kb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[xl(null,!0)]},Nc:{name:"useDeviceLanguage",j:[]},Oc:{name:"verifyPasswordResetCode",j:[xl("code")]}}),function(t,e){for(var n in e){var r=e[n].name;if(r!==n){var i=e[n].Rb;Object.defineProperty(t,r,{get:function(){return this[n]},set:function(t){bl(r,[i],[t],!0),this[n]=t},enumerable:!0})}}}(Zu.prototype,{lc:{name:"languageCode",Rb:Pl(xl(),Ml(),"languageCode")}}),(Zu.Persistence=vs).LOCAL="local",Zu.Persistence.SESSION="session",Zu.Persistence.NONE="none",Ol(du.prototype,{delete:{name:"delete",j:[]},F:{name:"getIdToken",j:[El()]},getToken:{name:"getToken",j:[El()]},$a:{name:"linkAndRetrieveDataWithCredential",j:[Cl()]},kc:{name:"linkWithCredential",j:[Cl()]},mc:{name:"linkWithPhoneNumber",j:[xl("phoneNumber"),Al()]},nc:{name:"linkWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},oc:{name:"linkWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},bb:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Cl()]},uc:{name:"reauthenticateWithCredential",j:[Cl()]},vc:{name:"reauthenticateWithPhoneNumber",j:[xl("phoneNumber"),Al()]},wc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},xc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},fb:{name:"sendEmailVerification",j:[Pl(Sl("opt_actionCodeSettings",!0),Ml(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[xl(null,!0)]},Lc:{name:"unlink",j:[xl("provider")]},mb:{name:"updateEmail",j:[xl("email")]},nb:{name:"updatePassword",j:[xl("password")]},Mc:{name:"updatePhoneNumber",j:[Cl("phone")]},ob:{name:"updateProfile",j:[Sl("profile")]}}),Ol(vt.prototype,{ga:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),Ol(iu.prototype,{confirm:{name:"confirm",j:[xl("verificationCode")]}}),Rl(wi,"credential",function(t,e){return new bi(t,e)},[xl("email"),xl("password")]),Ol(di.prototype,{ta:{name:"addScope",j:[xl("scope")]},Ca:{name:"setCustomParameters",j:[Sl("customOAuthParameters")]}}),Rl(di,"credential",pi,[Pl(xl(),Sl(),"token")]),Rl(wi,"credentialWithLink",xi,[xl("email"),xl("emailLink")]),Ol(fi.prototype,{ta:{name:"addScope",j:[xl("scope")]},Ca:{name:"setCustomParameters",j:[Sl("customOAuthParameters")]}}),Rl(fi,"credential",mi,[Pl(xl(),Sl(),"token")]),Ol(vi.prototype,{ta:{name:"addScope",j:[xl("scope")]},Ca:{name:"setCustomParameters",j:[Sl("customOAuthParameters")]}}),Rl(vi,"credential",gi,[Pl(xl(),Pl(Sl(),Ml()),"idToken"),Pl(xl(),Ml(),"accessToken",!0)]),Ol(yi.prototype,{Ca:{name:"setCustomParameters",j:[Sl("customOAuthParameters")]}}),Rl(yi,"credential",_i,[Pl(xl(),Sl(),"token"),xl("secret",!0)]),Ol(hi.prototype,{ta:{name:"addScope",j:[xl("scope")]},credential:{name:"credential",j:[Pl(xl(),Ml(),"idToken",!0),Pl(xl(),Ml(),"accessToken",!0)]},Ca:{name:"setCustomParameters",j:[Sl("customOAuthParameters")]}}),Rl(Mi,"credential",Ci,[xl("verificationId"),xl("verificationCode")]),Ol(Mi.prototype,{Sa:{name:"verifyPhoneNumber",j:[xl("phoneNumber"),Al()]}}),Ol(Pr.prototype,{toJSON:{name:"toJSON",j:[xl(null,!0)]}}),Ol(Di.prototype,{toJSON:{name:"toJSON",j:[xl(null,!0)]}}),Ol(Ni.prototype,{toJSON:{name:"toJSON",j:[xl(null,!0)]}}),Ol(_l.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),function(){if(void 0===e||!e.INTERNAL||!e.INTERNAL.registerService)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={Auth:Zu,Error:Pr};Rl(t,"EmailAuthProvider",wi,[]),Rl(t,"FacebookAuthProvider",di,[]),Rl(t,"GithubAuthProvider",fi,[]),Rl(t,"GoogleAuthProvider",vi,[]),Rl(t,"TwitterAuthProvider",yi,[]),Rl(t,"OAuthProvider",hi,[xl("providerId")]),Rl(t,"PhoneAuthProvider",Mi,[{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(t){return!!(t&&t instanceof Zu)}}]),Rl(t,"RecaptchaVerifier",_l,[Pl(xl(),{name:"",K:"an HTML element",optional:!1,M:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),Sl("recaptchaParameters",!0),{name:"app",K:"an instance of Firebase App",optional:!0,M:function(t){return!!(t&&t instanceof e.app.App)}}]),e.INTERNAL.registerService("auth",function(t,e){return e({INTERNAL:{getUid:y((t=new Zu(t)).getUid,t),getToken:y(t.$b,t),addAuthTokenListener:y(t.Qb,t),removeAuthTokenListener:y(t.yc,t)}}),t},t,function(t,e){if("create"===t)try{e.auth()}catch(t){}}),e.INTERNAL.extendNamespace({User:du})}()}).call("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},LlK3:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("W1I6"),i=n("xHNN"),o=n("N1zr"),a=n("lQFt");e.Connection=function(){function t(t,e,n,i,o,s,u){this.id=t,this.repoInfo_=e,this.onMessage_=n,this.onReady_=i,this.onDisconnect_=o,this.onKill_=s,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=r.logWrapper("c:"+this.id+":"),this.transportManager_=new a.TransportManager(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,void 0,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){t.conn_&&t.conn_.open(n,i)},Math.floor(0));var o=e.healthyTimeout||0;o>0&&(this.healthyTimeout_=r.setTimeoutNonBlocking(function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>102400?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>10240?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))},Math.floor(o)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!=e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){this.sendData_({t:"d",d:t})},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=r.requireKey("t",t),n=r.requireKey("d",t);if("c"==e)this.onSecondaryControl_(n);else{if("d"!=e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=r.requireKey("t",t),n=r.requireKey("d",t);"c"==e?this.onControl_(n):"d"==e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=r.requireKey("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?r.error("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):r.error("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,i=t.h;this.sessionId=t.s,this.repoInfo_.updateHost(i),0==this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),o.PROTOCOL_VERSION!==n&&r.warn("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,i),r.setTimeoutNonBlocking(function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())},Math.floor(6e4))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.updateHost(t),1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):r.setTimeoutNonBlocking(function(){n.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(i.PersistentStorage.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}()},"M+4L":function(t,e,n){n("GFAS"),t.exports=n("geFX").default},MGBS:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("mrSG"),i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.__extends(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.destination.next(e)},e.prototype.notifyError=function(t,e){this.destination.error(t)},e.prototype.notifyComplete=function(t){this.destination.complete()},e}(n("FFOo").a)},McSo:function(t,e,n){"use strict";function r(t){return null!=t&&"object"==typeof t}n.d(e,"a",function(){return r})},"Mom/":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i,o=n("mrSG"),a=n("dsTq"),s=n("W1I6"),u=n("+e0l"),l=n("Ix30");e.setNodeFromJSON=function(t){r=t},e.setMaxNode=function(t){i=t};var c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o.__extends(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?s.nameCompare(t.name,e.name):i},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return u.NamedNode.MIN},e.prototype.maxPost=function(){return new u.NamedNode(s.MAX_NAME,new l.LeafNode("[PRIORITY-POST]",i))},e.prototype.makePost=function(t,e){var n=r(t);return new u.NamedNode(e,new l.LeafNode("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(a.Index);e.PriorityIndex=c,e.PRIORITY_INDEX=new c},N1zr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PROTOCOL_VERSION="5",e.VERSION_PARAM="v",e.TRANSPORT_SESSION_PARAM="s",e.REFERER_PARAM="r",e.FORGE_REF="f",e.FORGE_DOMAIN="firebaseio.com",e.LAST_SESSION_PARAM="ls",e.WEBSOCKET="websocket",e.LONG_POLLING="long_polling"},NWFE:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createSubscribe=function(t,e){var n=new r(t,e);return n.subscribe.bind(n)};var r=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}return t.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},t.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,n){var r,o=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=i),void 0===r.error&&(r.error=i),void 0===r.complete&&(r.complete=i);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{o.finalError?r.error(o.finalError):r.complete()}catch(t){}}),this.observers.push(r),a},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}();function i(){}e.async=function(t,e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];Promise.resolve(!0).then(function(){t.apply(void 0,n)}).catch(function(t){e&&e(t)})}}},Nhk1:function(t,e,n){n("wXUz")},OTVi:function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n("qXBG");var r=function(){function t(t){this.authService=t}return t.prototype.canActivate=function(t,e){return this.authService.isAuthenticated()},t}()},P6tX:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("h6Fy");e.SnapshotHolder=function(){function t(){this.rootNode_=r.ChildrenNode.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}()},PCNd:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(){}},POCr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("W1I6"),i=n("ma/Z"),o=n("8LTN"),a=n("e5ZR"),s=n("N1zr"),u=n("0kFh"),l=n("0kFh");e.FIREBASE_LONGPOLL_START_PARAM="start",e.FIREBASE_LONGPOLL_CLOSE_COMMAND="close",e.FIREBASE_LONGPOLL_COMMAND_CB_NAME="pLPCommand",e.FIREBASE_LONGPOLL_DATA_CB_NAME="pRTLPCB",e.FIREBASE_LONGPOLL_ID_PARAM="id",e.FIREBASE_LONGPOLL_PW_PARAM="pw",e.FIREBASE_LONGPOLL_SERIAL_PARAM="ser",e.FIREBASE_LONGPOLL_CALLBACK_ID_PARAM="cb",e.FIREBASE_LONGPOLL_SEGMENT_NUM_PARAM="seg",e.FIREBASE_LONGPOLL_SEGMENTS_IN_PACKET="ts",e.FIREBASE_LONGPOLL_DATA_PARAM="d",e.FIREBASE_LONGPOLL_DISCONN_FRAME_PARAM="disconn",e.FIREBASE_LONGPOLL_DISCONN_FRAME_REQUEST_PARAM="dframe",e.BrowserPollConnection=function(){function t(t,e,n,i){this.connId=t,this.repoInfo=e,this.transportSessionId=n,this.lastSessionId=i,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=r.logWrapper(t),this.stats_=o.StatsManager.getCollection(e),this.urlFn=function(t){return e.connectionURL(s.LONG_POLLING,t)}}return t.prototype.open=function(t,n){var i=this;this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new a.PacketReceiver(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){i.log_("Timed out trying to connect."),i.onClosed_(),i.connectTimeoutTimer_=null},Math.floor(3e4)),r.executeWhenDOMReady(function(){if(!i.isClosed_){i.scriptTagHolder=new c(function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=t[0],o=t[1],a=t[2];if(i.incrementIncomingBytes_(t),i.scriptTagHolder)if(i.connectTimeoutTimer_&&(clearTimeout(i.connectTimeoutTimer_),i.connectTimeoutTimer_=null),i.everConnected_=!0,r==e.FIREBASE_LONGPOLL_START_PARAM)i.id=o,i.password=a;else{if(r!==e.FIREBASE_LONGPOLL_CLOSE_COMMAND)throw new Error("Unrecognized command received: "+r);o?(i.scriptTagHolder.sendNewPolls=!1,i.myPacketOrderer.closeAfter(o,function(){i.onClosed_()})):i.onClosed_()}},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t[0],r=t[1];i.incrementIncomingBytes_(t),i.myPacketOrderer.handleResponse(n,r)},function(){i.onClosed_()},i.urlFn);var t={};t[e.FIREBASE_LONGPOLL_START_PARAM]="t",t[e.FIREBASE_LONGPOLL_SERIAL_PARAM]=Math.floor(1e8*Math.random()),i.scriptTagHolder.uniqueCallbackIdentifier&&(t[e.FIREBASE_LONGPOLL_CALLBACK_ID_PARAM]=i.scriptTagHolder.uniqueCallbackIdentifier),t[s.VERSION_PARAM]=s.PROTOCOL_VERSION,i.transportSessionId&&(t[s.TRANSPORT_SESSION_PARAM]=i.transportSessionId),i.lastSessionId&&(t[s.LAST_SESSION_PARAM]=i.lastSessionId),!l.isNodeSdk()&&"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf(s.FORGE_DOMAIN)&&(t[s.REFERER_PARAM]=s.FORGE_REF);var n=i.urlFn(t);i.log_("Connecting via long-poll to "+n),i.scriptTagHolder.addTag(n,function(){})}})},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return t.forceAllow_||!t.forceDisallow_&&"undefined"!=typeof document&&null!=document.createElement&&!r.isChromeExtensionContentScript()&&!r.isWindowsStoreApp()&&!l.isNodeSdk()},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=u.stringify(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n=u.base64Encode(e),i=r.splitStringBySize(n,1840),o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,n){if(!l.isNodeSdk()){this.myDisconnFrame=document.createElement("iframe");var r={};r[e.FIREBASE_LONGPOLL_DISCONN_FRAME_REQUEST_PARAM]="t",r[e.FIREBASE_LONGPOLL_ID_PARAM]=t,r[e.FIREBASE_LONGPOLL_PW_PARAM]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},t.prototype.incrementIncomingBytes_=function(t){var e=u.stringify(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}();var c=function(){function t(n,o,a,s){if(this.onDisconnect=a,this.urlFn=s,this.outstandingRequests=new i.CountedSet,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,l.isNodeSdk())this.commandCB=n,this.onMessageCB=o;else{this.uniqueCallbackIdentifier=r.LUIDGenerator(),window[e.FIREBASE_LONGPOLL_COMMAND_CB_NAME+this.uniqueCallbackIdentifier]=n,window[e.FIREBASE_LONGPOLL_DATA_CB_NAME+this.uniqueCallbackIdentifier]=o,this.myIFrame=t.createIFrame_();var u="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(u='<script>document.domain="'+document.domain+'";<\/script>');var c="<html><body>"+u+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(t){r.log("frame writing exception"),t.stack&&r.log(t.stack),r.log(t)}}}return t.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||r.log("No IE domain setting required")}catch(n){var e=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+e+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var n=this;if(this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==n.myIFrame&&(document.body.removeChild(n.myIFrame),n.myIFrame=null)},Math.floor(0))),l.isNodeSdk()&&this.myID){var r={};r[e.FIREBASE_LONGPOLL_DISCONN_FRAME_PARAM]="t",r[e.FIREBASE_LONGPOLL_ID_PARAM]=this.myID,r[e.FIREBASE_LONGPOLL_PW_PARAM]=this.myPW;var i=this.urlFn(r);t.nodeRestRequest(i)}var o=this.onDisconnect;o&&(this.onDisconnect=null,o())},t.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.count()<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t[e.FIREBASE_LONGPOLL_ID_PARAM]=this.myID,t[e.FIREBASE_LONGPOLL_PW_PARAM]=this.myPW,t[e.FIREBASE_LONGPOLL_SERIAL_PARAM]=this.currentSerial;for(var n=this.urlFn(t),r="",i=0;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){var o=this.pendingSegs.shift();r=r+"&"+e.FIREBASE_LONGPOLL_SEGMENT_NUM_PARAM+i+"="+o.seg+"&"+e.FIREBASE_LONGPOLL_SEGMENTS_IN_PACKET+i+"="+o.ts+"&"+e.FIREBASE_LONGPOLL_DATA_PARAM+i+"="+o.d,i++}return this.addLongPollTag_(n+=r,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e,1);var r=function(){n.outstandingRequests.remove(e),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,function(){clearTimeout(i),r()})},t.prototype.addTag=function(t,e){var n=this;l.isNodeSdk()?this.doNodeLongPoll(t,e):setTimeout(function(){try{if(!n.sendNewPolls)return;var i=n.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=t,i.onload=i.onreadystatechange=function(){var t=i.readyState;t&&"loaded"!==t&&"complete"!==t||(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),e())},i.onerror=function(){r.log("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(i)}catch(t){}},Math.floor(1))},t}();e.FirebaseIFrameScriptHolder=c},Phjn:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("psW0");function i(t,e){return Object(r.a)(t,e,1)}},QJ7G:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("buEt"),i=n("t/Na"),o=(n("ozzT"),n("qXBG"),(new i.g).set("Content-Type","application/json")),a=function(){function t(t,e,n){this.slService=t,this.http=e,this.authService=n,this.productsChanged=new r.a,this.products=[]}return t.prototype.setProducts=function(t){this.products=t,this.productsChanged.next(this.products.slice())},t.prototype.getProducts=function(){var t=this.authService.getToken(),e={headers:new i.g({"Content-Type":"application/json","Access-Control-Allow-Origin":"*",Authorization:"Bearer "+t,Accept:"application/json"})};return this.http.get("https://sicgc.azurewebsites.net/api/Product",e).toPromise().then(function(t){return t}).then(function(t){return t})},t.prototype.getProduct=function(t){var e=this.authService.getToken(),n={headers:new i.g({"Content-Type":"application/json","Access-Control-Allow-Origin":"*",Authorization:"Bearer "+e,Accept:"application/json"})};return this.http.get("https://sicgc.azurewebsites.net/api/Product/"+t,n).toPromise().then(function(t){return t}).then(function(t){return t})},t.prototype.getMaterialFinishById=function(t){var e=this.authService.getToken(),n={headers:new i.g({"Content-Type":"application/json","Access-Control-Allow-Origin":"*",Authorization:"Bearer "+e,Accept:"application/json"})};return this.http.get("https://sicgc.azurewebsites.net/api/MaterialFinish/"+t,n).toPromise().then(function(t){return t}).then(function(t){return t})},t.prototype.postProduct=function(t){var e=this.authService.getToken(),n={headers:new i.g({"Content-Type":"application/json",Authorization:"Bearer "+e,Accept:"application/json"})};return this.http.post("https://sicgc.azurewebsites.net/api/Product",JSON.stringify(t),n).subscribe(function(t){console.log(t)})},t.prototype.addProductToShoppingList=function(t){this.slService.addProduct(t)},t.prototype.addProduct=function(t){this.products.push(t),this.productsChanged.next(this.products.slice())},t.prototype.updateProduct=function(t,e){this.products[t]=e,this.productsChanged.next(this.products.slice())},t.prototype.deleteProduct=function(t){this.products.splice(t,1),this.productsChanged.next(this.products.slice())},t.prototype.getCategory=function(){return this.http.get("https://sicgc.azurewebsites.net/api/Category").toPromise().then(function(t){return t}).then(function(t){return t})},t.prototype.getMaterialFinish=function(){return this.http.get("https://sicgc.azurewebsites.net/api/MaterialFinish").toPromise().then(function(t){return t}).then(function(t){return t})},t.prototype.postMaterialFinishPrice=function(t){var e=this.authService.getToken(),n={headers:new i.g({"Content-Type":"application/json",Authorization:"Bearer "+e,Accept:"application/json"})};return this.http.post("https://sicgc.azurewebsites.net/api/MaterialFinishPrice",JSON.stringify(t),n).subscribe(function(t){console.log(t)})},t.prototype.postProductPrice=function(t){var e=this.authService.getToken();return new i.g({"Content-Type":"application/json","Access-Control-Allow-Origin":"*",Authorization:"Bearer "+e,Accept:"application/json"}),this.http.post("https://sicgc.azurewebsites.net/api/ProductPrice",JSON.stringify(t),{headers:o}).subscribe(function(t){console.log(t)})},t.prototype.getProductPrice=function(t){return this.http.get("https://sicgc.azurewebsites.net/api/ProductPrice/Product/"+t).toPromise().then(function(t){return t}).then(function(t){return t})},t}()},QLcj:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("mrSG"),i=n("geFX"),o=n("0kFh"),a=n("0kFh"),s=n("0kFh"),u=n("W1I6"),l=n("q1Ft"),c=n("iDIO"),h=n("m925"),d=n("0kFh"),p=n("LlK3"),f=n("0kFh"),m=n("0kFh"),v=n("mG1e"),g=1e3,y=3e5;e.PersistentConnection=function(t){function e(n,r,i,o,a,s){var l=t.call(this)||this;if(l.repoInfo_=n,l.onDataUpdate_=r,l.onConnectStatus_=i,l.onServerInfoUpdate_=o,l.authTokenProvider_=a,l.authOverride_=s,l.id=e.nextPersistentConnectionId_++,l.log_=u.logWrapper("p:"+l.id+":"),l.interruptReasons_={},l.listens_={},l.outstandingPuts_=[],l.outstandingPutCount_=0,l.onDisconnectRequestQueue_=[],l.connected_=!1,l.reconnectDelay_=g,l.maxReconnectDelay_=y,l.securityDebugCallback_=null,l.lastSessionId=null,l.establishConnectionTimer_=null,l.visible_=!1,l.requestCBHash_={},l.requestNumber_=0,l.realtime_=null,l.authToken_=null,l.forceTokenRefresh_=!1,l.invalidAuthTokenCount_=0,l.firstConnection_=!0,l.lastConnectionAttemptTime_=null,l.lastConnectionEstablishedTime_=null,s&&!m.isNodeSdk())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return l.scheduleConnect_(0),c.VisibilityMonitor.getInstance().on("visible",l.onVisible_,l),-1===n.host.indexOf("fblocal")&&h.OnlineMonitor.getInstance().on("online",l.onOnline_,l),l}return r.__extends(e,t),e.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,i={r:r,a:t,b:e};this.log_(a.stringify(i)),s.assert(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},e.prototype.listen=function(t,e,n,r){var i=t.queryIdentifier(),o=t.path.toString();this.log_("Listen called for "+o+" "+i),this.listens_[o]=this.listens_[o]||{},s.assert(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),s.assert(!this.listens_[o][i],"listen() called twice for same path/queryId.");var a={onComplete:r,hashFn:e,query:t,tag:n};this.listens_[o][i]=a,this.connected_&&this.sendListen_(a)},e.prototype.sendListen_=function(t){var n=this,r=t.query,i=r.path.toString(),o=r.queryIdentifier();this.log_("Listen on "+i+" for "+o);var a={p:i};t.tag&&(a.q=r.queryObject(),a.t=t.tag),a.h=t.hashFn(),this.sendRequest("q",a,function(a){var s=a.d,u=a.s;e.warnOnListenWarnings_(s,r),(n.listens_[i]&&n.listens_[i][o])===t&&(n.log_("listen response",a),"ok"!==u&&n.removeListen_(i,o),t.onComplete&&t.onComplete(u,s))})},e.warnOnListenWarnings_=function(t,e){if(t&&"object"==typeof t&&o.contains(t,"w")){var n=o.safeGet(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e.getQueryParams().getIndex().toString()+'"',i=e.path.toString();u.warn("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||d.isAdmin(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},e.prototype.tryAuth=function(){var t=this;if(this.connected_&&this.authToken_){var e=this.authToken_,n=d.isValidFormat(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,function(n){var r=n.s,i=n.d||"error";t.authToken_===e&&("ok"===r?t.invalidAuthTokenCount_=0:t.onAuthRevoked_(r,i))})}},e.prototype.unlisten=function(t,e){var n=t.path.toString(),r=t.queryIdentifier();this.log_("Unlisten called for "+n+" "+r),s.assert(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t.queryObject(),e)},e.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},e.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,function(t){r&&setTimeout(function(){r(t.s,t.d)},Math.floor(0))})},e.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},e.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},e.prototype.putInternal=function(t,e,n,r,i){var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r.s,r.d)})},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,function(t){"ok"!==t.s&&e.log_("reportStats","Error sending stats: "+t.d)})}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+a.stringify(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},e.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):u.error("Unrecognized action received from server: "+a.stringify(t)+"\nAre you using the latest client?")},e.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;s.assert(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){e.establishConnectionTimer_=null,e.establishConnection_()},Math.floor(t))},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=g,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=g,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=g),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var t=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+e.nextConnectionId_++,o=this,a=this.lastSessionId,l=!1,c=null,h=function(){c?c.close():(l=!0,r())};this.realtime_={close:h,sendRequest:function(t){s.assert(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(t)}};var d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(d).then(function(e){l?u.log("getToken() completed but was canceled"):(u.log("getToken() completed. Creating connection."),o.authToken_=e&&e.accessToken,c=new p.Connection(i,o.repoInfo_,t,n,r,function(t){u.warn(t+" ("+o.repoInfo_.toString()+")"),o.interrupt("server_kill")},a))}).then(null,function(t){o.log_("Failed to get token: "+t),l||(f.CONSTANTS.NODE_ADMIN&&u.warn(t),h())})}},e.prototype.interrupt=function(t){u.log("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){u.log("Resuming connection for reason: "+t),delete this.interruptReasons_[t],o.isEmpty(this.interruptReasons_)&&(this.reconnectDelay_=g,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map(function(t){return u.ObjectToUniqueKey(t)}).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},e.prototype.removeListen_=function(t,e){var n,r=new l.Path(t).toString();return void 0!==this.listens_[r]?(n=this.listens_[r][e],delete this.listens_[r][e],0===o.getCount(this.listens_[r])&&delete this.listens_[r]):n=void 0,n},e.prototype.onAuthRevoked_=function(t,e){u.log("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},e.prototype.restoreState_=function(){var t=this;this.tryAuth(),o.forEach(this.listens_,function(e,n){o.forEach(n,function(e,n){t.sendListen_(n)})});for(var e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){var n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}},e.prototype.sendConnectStats_=function(){var t={},e="js";f.CONSTANTS.NODE_ADMIN?e="admin_node":f.CONSTANTS.NODE_CLIENT&&(e="node"),t["sdk."+e+"."+i.default.SDK_VERSION.replace(/\./g,"-")]=1,m.isMobileCordova()?t["framework.cordova"]=1:m.isReactNative()&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=h.OnlineMonitor.getInstance().currentlyOnline();return o.isEmpty(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(v.ServerActions)},Rm8y:function(t,e,n){"use strict";function r(){}n.r(e),n.d(e,"WebGLRenderTargetCube",function(){return dn}),n.d(e,"WebGLRenderTarget",function(){return hn}),n.d(e,"WebGLRenderer",function(){return qi}),n.d(e,"ShaderLib",function(){return Cn}),n.d(e,"UniformsLib",function(){return Mn}),n.d(e,"UniformsUtils",function(){return xn}),n.d(e,"ShaderChunk",function(){return wn}),n.d(e,"FogExp2",function(){return Xi}),n.d(e,"Fog",function(){return Yi}),n.d(e,"Scene",function(){return Ki}),n.d(e,"Sprite",function(){return $i}),n.d(e,"LOD",function(){return to}),n.d(e,"SkinnedMesh",function(){return ro}),n.d(e,"Skeleton",function(){return eo}),n.d(e,"Bone",function(){return no}),n.d(e,"Mesh",function(){return Sr}),n.d(e,"LineSegments",function(){return ao}),n.d(e,"LineLoop",function(){return so}),n.d(e,"Line",function(){return oo}),n.d(e,"Points",function(){return lo}),n.d(e,"Group",function(){return Gi}),n.d(e,"VideoTexture",function(){return co}),n.d(e,"DataTexture",function(){return pn}),n.d(e,"DataTexture3D",function(){return Cr}),n.d(e,"CompressedTexture",function(){return ho}),n.d(e,"CubeTexture",function(){return Mr}),n.d(e,"CanvasTexture",function(){return po}),n.d(e,"DepthTexture",function(){return fo}),n.d(e,"Texture",function(){return ln}),n.d(e,"CompressedTextureLoader",function(){return za}),n.d(e,"DataTextureLoader",function(){return Ha}),n.d(e,"CubeTextureLoader",function(){return qa}),n.d(e,"TextureLoader",function(){return Xa}),n.d(e,"ObjectLoader",function(){return $s}),n.d(e,"MaterialLoader",function(){return zs}),n.d(e,"BufferGeometryLoader",function(){return Hs}),n.d(e,"DefaultLoadingManager",function(){return Ba}),n.d(e,"LoadingManager",function(){return Ua}),n.d(e,"JSONLoader",function(){return Js}),n.d(e,"ImageLoader",function(){return Wa}),n.d(e,"ImageBitmapLoader",function(){return iu}),n.d(e,"FontLoader",function(){return uu}),n.d(e,"FileLoader",function(){return Va}),n.d(e,"Loader",function(){return Zs}),n.d(e,"LoaderUtils",function(){return Qs}),n.d(e,"Cache",function(){return ja}),n.d(e,"AudioLoader",function(){return Du}),n.d(e,"SpotLightShadow",function(){return bs}),n.d(e,"SpotLight",function(){return ws}),n.d(e,"PointLight",function(){return xs}),n.d(e,"RectAreaLight",function(){return Cs}),n.d(e,"HemisphereLight",function(){return ys}),n.d(e,"DirectionalLightShadow",function(){return Ss}),n.d(e,"DirectionalLight",function(){return Ts}),n.d(e,"AmbientLight",function(){return Ms}),n.d(e,"LightShadow",function(){return _s}),n.d(e,"Light",function(){return gs}),n.d(e,"StereoCamera",function(){return ku}),n.d(e,"PerspectiveCamera",function(){return zi}),n.d(e,"OrthographicCamera",function(){return Es}),n.d(e,"CubeCamera",function(){return Fu}),n.d(e,"ArrayCamera",function(){return Hi}),n.d(e,"Camera",function(){return Vi}),n.d(e,"AudioListener",function(){return ju}),n.d(e,"PositionalAudio",function(){return Bu}),n.d(e,"AudioContext",function(){return Nu}),n.d(e,"AudioAnalyser",function(){return Gu}),n.d(e,"Audio",function(){return Uu}),n.d(e,"VectorKeyframeTrack",function(){return Bs}),n.d(e,"StringKeyframeTrack",function(){return Us}),n.d(e,"QuaternionKeyframeTrack",function(){return js}),n.d(e,"NumberKeyframeTrack",function(){return ks}),n.d(e,"ColorKeyframeTrack",function(){return Ds}),n.d(e,"BooleanKeyframeTrack",function(){return Ns}),n.d(e,"PropertyMixer",function(){return Vu}),n.d(e,"PropertyBinding",function(){return Hu}),n.d(e,"KeyframeTrack",function(){return Is}),n.d(e,"AnimationUtils",function(){return As}),n.d(e,"AnimationObjectGroup",function(){return Wu}),n.d(e,"AnimationMixer",function(){return Xu}),n.d(e,"AnimationClip",function(){return Gs}),n.d(e,"Uniform",function(){return Yu}),n.d(e,"InstancedBufferGeometry",function(){return Ku}),n.d(e,"BufferGeometry",function(){return er}),n.d(e,"Geometry",function(){return Gn}),n.d(e,"InterleavedBufferAttribute",function(){return Qi}),n.d(e,"InstancedInterleavedBuffer",function(){return Zu}),n.d(e,"InterleavedBuffer",function(){return Zi}),n.d(e,"InstancedBufferAttribute",function(){return Qu}),n.d(e,"Face3",function(){return Pn}),n.d(e,"Object3D",function(){return Fn}),n.d(e,"Raycaster",function(){return Ju}),n.d(e,"Layers",function(){return Rn}),n.d(e,"EventDispatcher",function(){return r}),n.d(e,"Clock",function(){return el}),n.d(e,"QuaternionLinearInterpolant",function(){return Fs}),n.d(e,"LinearInterpolant",function(){return Rs}),n.d(e,"DiscreteInterpolant",function(){return Ls}),n.d(e,"CubicInterpolant",function(){return Os}),n.d(e,"Interpolant",function(){return Ps}),n.d(e,"Triangle",function(){return xr}),n.d(e,"Math",function(){return Ke}),n.d(e,"Spherical",function(){return nl}),n.d(e,"Cylindrical",function(){return rl}),n.d(e,"Plane",function(){return vn}),n.d(e,"Frustum",function(){return gn}),n.d(e,"Sphere",function(){return mn}),n.d(e,"Ray",function(){return wr}),n.d(e,"Matrix4",function(){return Qe}),n.d(e,"Matrix3",function(){return tn}),n.d(e,"Box3",function(){return fn}),n.d(e,"Box2",function(){return il}),n.d(e,"Line3",function(){return ol}),n.d(e,"Euler",function(){return On}),n.d(e,"Vector4",function(){return cn}),n.d(e,"Vector3",function(){return $e}),n.d(e,"Vector2",function(){return Ze}),n.d(e,"Quaternion",function(){return Je}),n.d(e,"Color",function(){return Sn}),n.d(e,"ImmediateRenderObject",function(){return al}),n.d(e,"VertexNormalsHelper",function(){return sl}),n.d(e,"SpotLightHelper",function(){return ul}),n.d(e,"SkeletonHelper",function(){return ll}),n.d(e,"PointLightHelper",function(){return cl}),n.d(e,"RectAreaLightHelper",function(){return hl}),n.d(e,"HemisphereLightHelper",function(){return dl}),n.d(e,"GridHelper",function(){return pl}),n.d(e,"PolarGridHelper",function(){return fl}),n.d(e,"FaceNormalsHelper",function(){return ml}),n.d(e,"DirectionalLightHelper",function(){return vl}),n.d(e,"CameraHelper",function(){return gl}),n.d(e,"BoxHelper",function(){return yl}),n.d(e,"Box3Helper",function(){return _l}),n.d(e,"PlaneHelper",function(){return bl}),n.d(e,"ArrowHelper",function(){return wl}),n.d(e,"AxesHelper",function(){return xl}),n.d(e,"Shape",function(){return vs}),n.d(e,"Path",function(){return ms}),n.d(e,"ShapePath",function(){return ou}),n.d(e,"Font",function(){return au}),n.d(e,"CurvePath",function(){return fs}),n.d(e,"Curve",function(){return Ya}),n.d(e,"ImageUtils",function(){return sn}),n.d(e,"ShapeUtils",function(){return ea}),n.d(e,"WebGLUtils",function(){return Bi}),n.d(e,"WireframeGeometry",function(){return mo}),n.d(e,"ParametricGeometry",function(){return vo}),n.d(e,"ParametricBufferGeometry",function(){return go}),n.d(e,"TetrahedronGeometry",function(){return bo}),n.d(e,"TetrahedronBufferGeometry",function(){return wo}),n.d(e,"OctahedronGeometry",function(){return xo}),n.d(e,"OctahedronBufferGeometry",function(){return Eo}),n.d(e,"IcosahedronGeometry",function(){return So}),n.d(e,"IcosahedronBufferGeometry",function(){return To}),n.d(e,"DodecahedronGeometry",function(){return Mo}),n.d(e,"DodecahedronBufferGeometry",function(){return Co}),n.d(e,"PolyhedronGeometry",function(){return yo}),n.d(e,"PolyhedronBufferGeometry",function(){return _o}),n.d(e,"TubeGeometry",function(){return Ao}),n.d(e,"TubeBufferGeometry",function(){return Po}),n.d(e,"TorusKnotGeometry",function(){return Oo}),n.d(e,"TorusKnotBufferGeometry",function(){return Ro}),n.d(e,"TorusGeometry",function(){return Lo}),n.d(e,"TorusBufferGeometry",function(){return Io}),n.d(e,"TextGeometry",function(){return ua}),n.d(e,"TextBufferGeometry",function(){return la}),n.d(e,"SphereGeometry",function(){return ca}),n.d(e,"SphereBufferGeometry",function(){return ha}),n.d(e,"RingGeometry",function(){return da}),n.d(e,"RingBufferGeometry",function(){return pa}),n.d(e,"PlaneGeometry",function(){return ir}),n.d(e,"PlaneBufferGeometry",function(){return or}),n.d(e,"LatheGeometry",function(){return fa}),n.d(e,"LatheBufferGeometry",function(){return ma}),n.d(e,"ShapeGeometry",function(){return va}),n.d(e,"ShapeBufferGeometry",function(){return ga}),n.d(e,"ExtrudeGeometry",function(){return ia}),n.d(e,"ExtrudeBufferGeometry",function(){return oa}),n.d(e,"EdgesGeometry",function(){return _a}),n.d(e,"ConeGeometry",function(){return xa}),n.d(e,"ConeBufferGeometry",function(){return Ea}),n.d(e,"CylinderGeometry",function(){return ba}),n.d(e,"CylinderBufferGeometry",function(){return wa}),n.d(e,"CircleGeometry",function(){return Sa}),n.d(e,"CircleBufferGeometry",function(){return Ta}),n.d(e,"BoxGeometry",function(){return nr}),n.d(e,"BoxBufferGeometry",function(){return rr}),n.d(e,"ShadowMaterial",function(){return Ca}),n.d(e,"SpriteMaterial",function(){return Ji}),n.d(e,"RawShaderMaterial",function(){return Aa}),n.d(e,"ShaderMaterial",function(){return br}),n.d(e,"PointsMaterial",function(){return uo}),n.d(e,"MeshPhysicalMaterial",function(){return Oa}),n.d(e,"MeshStandardMaterial",function(){return Pa}),n.d(e,"MeshPhongMaterial",function(){return Ra}),n.d(e,"MeshToonMaterial",function(){return La}),n.d(e,"MeshNormalMaterial",function(){return Ia}),n.d(e,"MeshLambertMaterial",function(){return Na}),n.d(e,"MeshDepthMaterial",function(){return Fi}),n.d(e,"MeshDistanceMaterial",function(){return ji}),n.d(e,"MeshBasicMaterial",function(){return Er}),n.d(e,"MeshMatcapMaterial",function(){return Da}),n.d(e,"LineDashedMaterial",function(){return ka}),n.d(e,"LineBasicMaterial",function(){return io}),n.d(e,"Material",function(){return _r}),n.d(e,"Float64BufferAttribute",function(){return Qn}),n.d(e,"Float32BufferAttribute",function(){return Zn}),n.d(e,"Uint32BufferAttribute",function(){return Kn}),n.d(e,"Int32BufferAttribute",function(){return Yn}),n.d(e,"Uint16BufferAttribute",function(){return Xn}),n.d(e,"Int16BufferAttribute",function(){return qn}),n.d(e,"Uint8ClampedBufferAttribute",function(){return Wn}),n.d(e,"Uint8BufferAttribute",function(){return Hn}),n.d(e,"Int8BufferAttribute",function(){return zn}),n.d(e,"BufferAttribute",function(){return Vn}),n.d(e,"ArcCurve",function(){return Za}),n.d(e,"CatmullRomCurve3",function(){return ns}),n.d(e,"CubicBezierCurve",function(){return as}),n.d(e,"CubicBezierCurve3",function(){return ss}),n.d(e,"EllipseCurve",function(){return Ka}),n.d(e,"LineCurve",function(){return us}),n.d(e,"LineCurve3",function(){return ls}),n.d(e,"QuadraticBezierCurve",function(){return cs}),n.d(e,"QuadraticBezierCurve3",function(){return hs}),n.d(e,"SplineCurve",function(){return ds}),n.d(e,"REVISION",function(){return m}),n.d(e,"MOUSE",function(){return v}),n.d(e,"CullFaceNone",function(){return g}),n.d(e,"CullFaceBack",function(){return y}),n.d(e,"CullFaceFront",function(){return _}),n.d(e,"CullFaceFrontBack",function(){return b}),n.d(e,"FrontFaceDirectionCW",function(){return w}),n.d(e,"FrontFaceDirectionCCW",function(){return x}),n.d(e,"BasicShadowMap",function(){return E}),n.d(e,"PCFShadowMap",function(){return S}),n.d(e,"PCFSoftShadowMap",function(){return T}),n.d(e,"FrontSide",function(){return M}),n.d(e,"BackSide",function(){return C}),n.d(e,"DoubleSide",function(){return A}),n.d(e,"FlatShading",function(){return P}),n.d(e,"SmoothShading",function(){return O}),n.d(e,"NoColors",function(){return R}),n.d(e,"FaceColors",function(){return L}),n.d(e,"VertexColors",function(){return I}),n.d(e,"NoBlending",function(){return N}),n.d(e,"NormalBlending",function(){return D}),n.d(e,"AdditiveBlending",function(){return k}),n.d(e,"SubtractiveBlending",function(){return F}),n.d(e,"MultiplyBlending",function(){return j}),n.d(e,"CustomBlending",function(){return U}),n.d(e,"AddEquation",function(){return B}),n.d(e,"SubtractEquation",function(){return G}),n.d(e,"ReverseSubtractEquation",function(){return V}),n.d(e,"MinEquation",function(){return z}),n.d(e,"MaxEquation",function(){return H}),n.d(e,"ZeroFactor",function(){return W}),n.d(e,"OneFactor",function(){return q}),n.d(e,"SrcColorFactor",function(){return X}),n.d(e,"OneMinusSrcColorFactor",function(){return Y}),n.d(e,"SrcAlphaFactor",function(){return K}),n.d(e,"OneMinusSrcAlphaFactor",function(){return Z}),n.d(e,"DstAlphaFactor",function(){return Q}),n.d(e,"OneMinusDstAlphaFactor",function(){return J}),n.d(e,"DstColorFactor",function(){return $}),n.d(e,"OneMinusDstColorFactor",function(){return tt}),n.d(e,"SrcAlphaSaturateFactor",function(){return et}),n.d(e,"NeverDepth",function(){return nt}),n.d(e,"AlwaysDepth",function(){return rt}),n.d(e,"LessDepth",function(){return it}),n.d(e,"LessEqualDepth",function(){return ot}),n.d(e,"EqualDepth",function(){return at}),n.d(e,"GreaterEqualDepth",function(){return st}),n.d(e,"GreaterDepth",function(){return ut}),n.d(e,"NotEqualDepth",function(){return lt}),n.d(e,"MultiplyOperation",function(){return ct}),n.d(e,"MixOperation",function(){return ht}),n.d(e,"AddOperation",function(){return dt}),n.d(e,"NoToneMapping",function(){return pt}),n.d(e,"LinearToneMapping",function(){return ft}),n.d(e,"ReinhardToneMapping",function(){return mt}),n.d(e,"Uncharted2ToneMapping",function(){return vt}),n.d(e,"CineonToneMapping",function(){return gt}),n.d(e,"UVMapping",function(){return yt}),n.d(e,"CubeReflectionMapping",function(){return _t}),n.d(e,"CubeRefractionMapping",function(){return bt}),n.d(e,"EquirectangularReflectionMapping",function(){return wt}),n.d(e,"EquirectangularRefractionMapping",function(){return xt}),n.d(e,"SphericalReflectionMapping",function(){return Et}),n.d(e,"CubeUVReflectionMapping",function(){return St}),n.d(e,"CubeUVRefractionMapping",function(){return Tt}),n.d(e,"RepeatWrapping",function(){return Mt}),n.d(e,"ClampToEdgeWrapping",function(){return Ct}),n.d(e,"MirroredRepeatWrapping",function(){return At}),n.d(e,"NearestFilter",function(){return Pt}),n.d(e,"NearestMipMapNearestFilter",function(){return Ot}),n.d(e,"NearestMipMapLinearFilter",function(){return Rt}),n.d(e,"LinearFilter",function(){return Lt}),n.d(e,"LinearMipMapNearestFilter",function(){return It}),n.d(e,"LinearMipMapLinearFilter",function(){return Nt}),n.d(e,"UnsignedByteType",function(){return Dt}),n.d(e,"ByteType",function(){return kt}),n.d(e,"ShortType",function(){return Ft}),n.d(e,"UnsignedShortType",function(){return jt}),n.d(e,"IntType",function(){return Ut}),n.d(e,"UnsignedIntType",function(){return Bt}),n.d(e,"FloatType",function(){return Gt}),n.d(e,"HalfFloatType",function(){return Vt}),n.d(e,"UnsignedShort4444Type",function(){return zt}),n.d(e,"UnsignedShort5551Type",function(){return Ht}),n.d(e,"UnsignedShort565Type",function(){return Wt}),n.d(e,"UnsignedInt248Type",function(){return qt}),n.d(e,"AlphaFormat",function(){return Xt}),n.d(e,"RGBFormat",function(){return Yt}),n.d(e,"RGBAFormat",function(){return Kt}),n.d(e,"LuminanceFormat",function(){return Zt}),n.d(e,"LuminanceAlphaFormat",function(){return Qt}),n.d(e,"RGBEFormat",function(){return Jt}),n.d(e,"DepthFormat",function(){return $t}),n.d(e,"DepthStencilFormat",function(){return te}),n.d(e,"RedFormat",function(){return ee}),n.d(e,"RGB_S3TC_DXT1_Format",function(){return ne}),n.d(e,"RGBA_S3TC_DXT1_Format",function(){return re}),n.d(e,"RGBA_S3TC_DXT3_Format",function(){return ie}),n.d(e,"RGBA_S3TC_DXT5_Format",function(){return oe}),n.d(e,"RGB_PVRTC_4BPPV1_Format",function(){return ae}),n.d(e,"RGB_PVRTC_2BPPV1_Format",function(){return se}),n.d(e,"RGBA_PVRTC_4BPPV1_Format",function(){return ue}),n.d(e,"RGBA_PVRTC_2BPPV1_Format",function(){return le}),n.d(e,"RGB_ETC1_Format",function(){return ce}),n.d(e,"RGBA_ASTC_4x4_Format",function(){return he}),n.d(e,"RGBA_ASTC_5x4_Format",function(){return de}),n.d(e,"RGBA_ASTC_5x5_Format",function(){return pe}),n.d(e,"RGBA_ASTC_6x5_Format",function(){return fe}),n.d(e,"RGBA_ASTC_6x6_Format",function(){return me}),n.d(e,"RGBA_ASTC_8x5_Format",function(){return ve}),n.d(e,"RGBA_ASTC_8x6_Format",function(){return ge}),n.d(e,"RGBA_ASTC_8x8_Format",function(){return ye}),n.d(e,"RGBA_ASTC_10x5_Format",function(){return _e}),n.d(e,"RGBA_ASTC_10x6_Format",function(){return be}),n.d(e,"RGBA_ASTC_10x8_Format",function(){return we}),n.d(e,"RGBA_ASTC_10x10_Format",function(){return xe}),n.d(e,"RGBA_ASTC_12x10_Format",function(){return Ee}),n.d(e,"RGBA_ASTC_12x12_Format",function(){return Se}),n.d(e,"LoopOnce",function(){return Te}),n.d(e,"LoopRepeat",function(){return Me}),n.d(e,"LoopPingPong",function(){return Ce}),n.d(e,"InterpolateDiscrete",function(){return Ae}),n.d(e,"InterpolateLinear",function(){return Pe}),n.d(e,"InterpolateSmooth",function(){return Oe}),n.d(e,"ZeroCurvatureEnding",function(){return Re}),n.d(e,"ZeroSlopeEnding",function(){return Le}),n.d(e,"WrapAroundEnding",function(){return Ie}),n.d(e,"TrianglesDrawMode",function(){return Ne}),n.d(e,"TriangleStripDrawMode",function(){return De}),n.d(e,"TriangleFanDrawMode",function(){return ke}),n.d(e,"LinearEncoding",function(){return Fe}),n.d(e,"sRGBEncoding",function(){return je}),n.d(e,"GammaEncoding",function(){return Ue}),n.d(e,"RGBEEncoding",function(){return Be}),n.d(e,"LogLuvEncoding",function(){return Ge}),n.d(e,"RGBM7Encoding",function(){return Ve}),n.d(e,"RGBM16Encoding",function(){return ze}),n.d(e,"RGBDEncoding",function(){return He}),n.d(e,"BasicDepthPacking",function(){return We}),n.d(e,"RGBADepthPacking",function(){return qe}),n.d(e,"TangentSpaceNormalMap",function(){return Xe}),n.d(e,"ObjectSpaceNormalMap",function(){return Ye}),n.d(e,"CubeGeometry",function(){return nr}),n.d(e,"Face4",function(){return El}),n.d(e,"LineStrip",function(){return Sl}),n.d(e,"LinePieces",function(){return Tl}),n.d(e,"MeshFaceMaterial",function(){return Ml}),n.d(e,"MultiMaterial",function(){return Cl}),n.d(e,"PointCloud",function(){return Al}),n.d(e,"Particle",function(){return Pl}),n.d(e,"ParticleSystem",function(){return Ol}),n.d(e,"PointCloudMaterial",function(){return Rl}),n.d(e,"ParticleBasicMaterial",function(){return Ll}),n.d(e,"ParticleSystemMaterial",function(){return Il}),n.d(e,"Vertex",function(){return Nl}),n.d(e,"DynamicBufferAttribute",function(){return Dl}),n.d(e,"Int8Attribute",function(){return kl}),n.d(e,"Uint8Attribute",function(){return Fl}),n.d(e,"Uint8ClampedAttribute",function(){return jl}),n.d(e,"Int16Attribute",function(){return Ul}),n.d(e,"Uint16Attribute",function(){return Bl}),n.d(e,"Int32Attribute",function(){return Gl}),n.d(e,"Uint32Attribute",function(){return Vl}),n.d(e,"Float32Attribute",function(){return zl}),n.d(e,"Float64Attribute",function(){return Hl}),n.d(e,"ClosedSplineCurve3",function(){return Wl}),n.d(e,"SplineCurve3",function(){return ql}),n.d(e,"Spline",function(){return Xl}),n.d(e,"AxisHelper",function(){return Yl}),n.d(e,"BoundingBoxHelper",function(){return Kl}),n.d(e,"EdgesHelper",function(){return Zl}),n.d(e,"WireframeHelper",function(){return Ql}),n.d(e,"XHRLoader",function(){return Jl}),n.d(e,"BinaryTextureLoader",function(){return $l}),n.d(e,"GeometryUtils",function(){return tc}),n.d(e,"Projector",function(){return ec}),n.d(e,"CanvasRenderer",function(){return nc}),n.d(e,"SceneUtils",function(){return rc}),n.d(e,"LensFlare",function(){return ic}),void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Number.isInteger&&(Number.isInteger=function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t}),void 0===Math.sign&&(Math.sign=function(t){return t<0?-1:t>0?1:+t}),"name"in Function.prototype==0&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&(Object.assign=function(t){if(void 0===t||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var r=arguments[n];if(void 0!==r&&null!==r)for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}),Object.assign(r.prototype,{addEventListener:function(t,e){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[t]&&(n[t]=[]),-1===n[t].indexOf(e)&&n[t].push(e)},hasEventListener:function(t,e){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[t]&&-1!==n[t].indexOf(e)},removeEventListener:function(t,e){if(void 0!==this._listeners){var n=this._listeners[t];if(void 0!==n){var r=n.indexOf(e);-1!==r&&n.splice(r,1)}}},dispatchEvent:function(t){if(void 0!==this._listeners){var e=this._listeners[t.type];if(void 0!==e){t.target=this;for(var n=e.slice(0),r=0,i=n.length;r<i;r++)n[r].call(this,t)}}}});var i,o,a,s,u,l,c,h,d,p,f,m="97",v={LEFT:0,MIDDLE:1,RIGHT:2},g=0,y=1,_=2,b=3,w=0,x=1,E=0,S=1,T=2,M=0,C=1,A=2,P=1,O=2,R=0,L=1,I=2,N=0,D=1,k=2,F=3,j=4,U=5,B=100,G=101,V=102,z=103,H=104,W=200,q=201,X=202,Y=203,K=204,Z=205,Q=206,J=207,$=208,tt=209,et=210,nt=0,rt=1,it=2,ot=3,at=4,st=5,ut=6,lt=7,ct=0,ht=1,dt=2,pt=0,ft=1,mt=2,vt=3,gt=4,yt=300,_t=301,bt=302,wt=303,xt=304,Et=305,St=306,Tt=307,Mt=1e3,Ct=1001,At=1002,Pt=1003,Ot=1004,Rt=1005,Lt=1006,It=1007,Nt=1008,Dt=1009,kt=1010,Ft=1011,jt=1012,Ut=1013,Bt=1014,Gt=1015,Vt=1016,zt=1017,Ht=1018,Wt=1019,qt=1020,Xt=1021,Yt=1022,Kt=1023,Zt=1024,Qt=1025,Jt=Kt,$t=1026,te=1027,ee=1028,ne=33776,re=33777,ie=33778,oe=33779,ae=35840,se=35841,ue=35842,le=35843,ce=36196,he=37808,de=37809,pe=37810,fe=37811,me=37812,ve=37813,ge=37814,ye=37815,_e=37816,be=37817,we=37818,xe=37819,Ee=37820,Se=37821,Te=2200,Me=2201,Ce=2202,Ae=2300,Pe=2301,Oe=2302,Re=2400,Le=2401,Ie=2402,Ne=0,De=1,ke=2,Fe=3e3,je=3001,Ue=3007,Be=3002,Ge=3003,Ve=3004,ze=3005,He=3006,We=3200,qe=3201,Xe=0,Ye=1,Ke={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){for(var t=[],e=0;e<256;e++)t[e]=(e<16?"0":"")+e.toString(16);return function(){var e=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(t[255&e]+t[e>>8&255]+t[e>>16&255]+t[e>>24&255]+"-"+t[255&n]+t[n>>8&255]+"-"+t[n>>16&15|64]+t[n>>24&255]+"-"+t[63&r|128]+t[r>>8&255]+"-"+t[r>>16&255]+t[r>>24&255]+t[255&i]+t[i>>8&255]+t[i>>16&255]+t[i>>24&255]).toUpperCase()}}(),clamp:function(t,e,n){return Math.max(e,Math.min(n,t))},euclideanModulo:function(t,e){return(t%e+e)%e},mapLinear:function(t,e,n,r,i){return r+(t-e)*(i-r)/(n-e)},lerp:function(t,e,n){return(1-n)*t+n*e},smoothstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*(3-2*t)},smootherstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*t*(t*(6*t-15)+10)},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},degToRad:function(t){return t*Ke.DEG2RAD},radToDeg:function(t){return t*Ke.RAD2DEG},isPowerOfTwo:function(t){return 0==(t&t-1)&&0!==t},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}};function Ze(t,e){this.x=t||0,this.y=e||0}function Qe(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function Je(t,e,n,r){this._x=t||0,this._y=e||0,this._z=n||0,this._w=void 0!==r?r:1}function $e(t,e,n){this.x=t||0,this.y=e||0,this.z=n||0}function tn(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}Object.defineProperties(Ze.prototype,{width:{get:function(){return this.x},set:function(t){this.x=t}},height:{get:function(){return this.y},set:function(t){this.y=t}}}),Object.assign(Ze.prototype,{isVector2:!0,set:function(t,e){return this.x=t,this.y=e,this},setScalar:function(t){return this.x=t,this.y=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(t){return this.x=t.x,this.y=t.y,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this)},addScalar:function(t){return this.x+=t,this.y+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this)},subScalar:function(t){return this.x-=t,this.y-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},divideScalar:function(t){return this.multiplyScalar(1/t)},applyMatrix3:function(t){var e=this.x,n=this.y,r=t.elements;return this.x=r[0]*e+r[3]*n+r[6],this.y=r[1]*e+r[4]*n+r[7],this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this},clampScalar:(i=new Ze,o=new Ze,function(t,e){return i.set(t,t),o.set(e,e),this.clamp(i,o)}),clampLength:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(t){return this.x*t.x+this.y*t.y},cross:function(t){return this.x*t.y-this.y*t.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var t=Math.atan2(this.y,this.x);return t<0&&(t+=2*Math.PI),t},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,n=this.y-t.y;return e*e+n*n},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t},fromBufferAttribute:function(t,e,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this},rotateAround:function(t,e){var n=Math.cos(e),r=Math.sin(e),i=this.x-t.x,o=this.y-t.y;return this.x=i*n-o*r+t.x,this.y=i*r+o*n+t.y,this}}),Object.assign(Qe.prototype,{isMatrix4:!0,set:function(t,e,n,r,i,o,a,s,u,l,c,h,d,p,f,m){var v=this.elements;return v[0]=t,v[4]=e,v[8]=n,v[12]=r,v[1]=i,v[5]=o,v[9]=a,v[13]=s,v[2]=u,v[6]=l,v[10]=c,v[14]=h,v[3]=d,v[7]=p,v[11]=f,v[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new Qe).fromArray(this.elements)},copy:function(t){var e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this},copyPosition:function(t){var e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this},extractBasis:function(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this},makeBasis:function(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this},extractRotation:(p=new $e,function(t){var e=this.elements,n=t.elements,r=1/p.setFromMatrixColumn(t,0).length(),i=1/p.setFromMatrixColumn(t,1).length(),o=1/p.setFromMatrixColumn(t,2).length();return e[0]=n[0]*r,e[1]=n[1]*r,e[2]=n[2]*r,e[3]=0,e[4]=n[4]*i,e[5]=n[5]*i,e[6]=n[6]*i,e[7]=0,e[8]=n[8]*o,e[9]=n[9]*o,e[10]=n[10]*o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}),makeRotationFromEuler:function(t){t&&t.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var e=this.elements,n=t.x,r=t.y,i=t.z,o=Math.cos(n),a=Math.sin(n),s=Math.cos(r),u=Math.sin(r),l=Math.cos(i),c=Math.sin(i);if("XYZ"===t.order){var h=o*l,d=o*c,p=a*l,f=a*c;e[0]=s*l,e[4]=-s*c,e[8]=u,e[1]=d+p*u,e[5]=h-f*u,e[9]=-a*s,e[2]=f-h*u,e[6]=p+d*u,e[10]=o*s}else if("YXZ"===t.order){var m=s*c,v=u*l;e[0]=(g=s*l)+(y=u*c)*a,e[4]=v*a-m,e[8]=o*u,e[1]=o*c,e[5]=o*l,e[9]=-a,e[2]=m*a-v,e[6]=y+g*a,e[10]=o*s}else if("ZXY"===t.order){var g,y;m=s*c,v=u*l,e[0]=(g=s*l)-(y=u*c)*a,e[4]=-o*c,e[8]=v+m*a,e[1]=m+v*a,e[5]=o*l,e[9]=y-g*a,e[2]=-o*u,e[6]=a,e[10]=o*s}else if("ZYX"===t.order)h=o*l,d=o*c,p=a*l,f=a*c,e[0]=s*l,e[4]=p*u-d,e[8]=h*u+f,e[1]=s*c,e[5]=f*u+h,e[9]=d*u-p,e[2]=-u,e[6]=a*s,e[10]=o*s;else if("YZX"===t.order){var _=o*s,b=o*u,w=a*s,x=a*u;e[0]=s*l,e[4]=x-_*c,e[8]=w*c+b,e[1]=c,e[5]=o*l,e[9]=-a*l,e[2]=-u*l,e[6]=b*c+w,e[10]=_-x*c}else"XZY"===t.order&&(_=o*s,b=o*u,w=a*s,x=a*u,e[0]=s*l,e[4]=-c,e[8]=u*l,e[1]=_*c+x,e[5]=o*l,e[9]=b*c-w,e[2]=w*c-b,e[6]=a*l,e[10]=x*c+_);return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},makeRotationFromQuaternion:(h=new $e(0,0,0),d=new $e(1,1,1),function(t){return this.compose(h,t,d)}),lookAt:(u=new $e,l=new $e,c=new $e,function(t,e,n){var r=this.elements;return c.subVectors(t,e),0===c.lengthSq()&&(c.z=1),c.normalize(),u.crossVectors(n,c),0===u.lengthSq()&&(1===Math.abs(n.z)?c.x+=1e-4:c.z+=1e-4,c.normalize(),u.crossVectors(n,c)),u.normalize(),l.crossVectors(c,u),r[0]=u.x,r[4]=l.x,r[8]=c.x,r[1]=u.y,r[5]=l.y,r[9]=c.y,r[2]=u.z,r[6]=l.z,r[10]=c.z,this}),multiply:function(t,e){return void 0!==e?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var n=t.elements,r=e.elements,i=this.elements,o=n[0],a=n[4],s=n[8],u=n[12],l=n[1],c=n[5],h=n[9],d=n[13],p=n[2],f=n[6],m=n[10],v=n[14],g=n[3],y=n[7],_=n[11],b=n[15],w=r[0],x=r[4],E=r[8],S=r[12],T=r[1],M=r[5],C=r[9],A=r[13],P=r[2],O=r[6],R=r[10],L=r[14],I=r[3],N=r[7],D=r[11],k=r[15];return i[0]=o*w+a*T+s*P+u*I,i[4]=o*x+a*M+s*O+u*N,i[8]=o*E+a*C+s*R+u*D,i[12]=o*S+a*A+s*L+u*k,i[1]=l*w+c*T+h*P+d*I,i[5]=l*x+c*M+h*O+d*N,i[9]=l*E+c*C+h*R+d*D,i[13]=l*S+c*A+h*L+d*k,i[2]=p*w+f*T+m*P+v*I,i[6]=p*x+f*M+m*O+v*N,i[10]=p*E+f*C+m*R+v*D,i[14]=p*S+f*A+m*L+v*k,i[3]=g*w+y*T+_*P+b*I,i[7]=g*x+y*M+_*O+b*N,i[11]=g*E+y*C+_*R+b*D,i[15]=g*S+y*A+_*L+b*k,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this},applyToBufferAttribute:function(){var t=new $e;return function(e){for(var n=0,r=e.count;n<r;n++)t.x=e.getX(n),t.y=e.getY(n),t.z=e.getZ(n),t.applyMatrix4(this),e.setXYZ(n,t.x,t.y,t.z);return e}}(),determinant:function(){var t=this.elements,e=t[0],n=t[4],r=t[8],i=t[12],o=t[1],a=t[5],s=t[9],u=t[13],l=t[2],c=t[6],h=t[10],d=t[14];return t[3]*(+i*s*c-r*u*c-i*a*h+n*u*h+r*a*d-n*s*d)+t[7]*(+e*s*d-e*u*h+i*o*h-r*o*d+r*u*l-i*s*l)+t[11]*(+e*u*c-e*a*d-i*o*c+n*o*d+i*a*l-n*u*l)+t[15]*(-r*a*l-e*s*c+e*a*h+r*o*c-n*o*h+n*s*l)},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this},setPosition:function(t){var e=this.elements;return e[12]=t.x,e[13]=t.y,e[14]=t.z,this},getInverse:function(t,e){var n=this.elements,r=t.elements,i=r[0],o=r[1],a=r[2],s=r[3],u=r[4],l=r[5],c=r[6],h=r[7],d=r[8],p=r[9],f=r[10],m=r[11],v=r[12],g=r[13],y=r[14],_=r[15],b=p*y*h-g*f*h+g*c*m-l*y*m-p*c*_+l*f*_,w=v*f*h-d*y*h-v*c*m+u*y*m+d*c*_-u*f*_,x=d*g*h-v*p*h+v*l*m-u*g*m-d*l*_+u*p*_,E=v*p*c-d*g*c-v*l*f+u*g*f+d*l*y-u*p*y,S=i*b+o*w+a*x+s*E;if(0===S){var T="THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0";if(!0===e)throw new Error(T);return console.warn(T),this.identity()}var M=1/S;return n[0]=b*M,n[1]=(g*f*s-p*y*s-g*a*m+o*y*m+p*a*_-o*f*_)*M,n[2]=(l*y*s-g*c*s+g*a*h-o*y*h-l*a*_+o*c*_)*M,n[3]=(p*c*s-l*f*s-p*a*h+o*f*h+l*a*m-o*c*m)*M,n[4]=w*M,n[5]=(d*y*s-v*f*s+v*a*m-i*y*m-d*a*_+i*f*_)*M,n[6]=(v*c*s-u*y*s-v*a*h+i*y*h+u*a*_-i*c*_)*M,n[7]=(u*f*s-d*c*s+d*a*h-i*f*h-u*a*m+i*c*m)*M,n[8]=x*M,n[9]=(v*p*s-d*g*s-v*o*m+i*g*m+d*o*_-i*p*_)*M,n[10]=(u*g*s-v*l*s+v*o*h-i*g*h-u*o*_+i*l*_)*M,n[11]=(d*l*s-u*p*s-d*o*h+i*p*h+u*o*m-i*l*m)*M,n[12]=E*M,n[13]=(d*g*a-v*p*a+v*o*f-i*g*f-d*o*y+i*p*y)*M,n[14]=(v*l*a-u*g*a-v*o*c+i*g*c+u*o*y-i*l*y)*M,n[15]=(u*p*a-d*l*a+d*o*c-i*p*c-u*o*f+i*l*f)*M,this},scale:function(t){var e=this.elements,n=t.x,r=t.y,i=t.z;return e[0]*=n,e[4]*=r,e[8]*=i,e[1]*=n,e[5]*=r,e[9]*=i,e[2]*=n,e[6]*=r,e[10]*=i,e[3]*=n,e[7]*=r,e[11]*=i,this},getMaxScaleOnAxis:function(){var t=this.elements;return Math.sqrt(Math.max(t[0]*t[0]+t[1]*t[1]+t[2]*t[2],t[4]*t[4]+t[5]*t[5]+t[6]*t[6],t[8]*t[8]+t[9]*t[9]+t[10]*t[10]))},makeTranslation:function(t,e,n){return this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this},makeRotationX:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this},makeRotationY:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this},makeRotationZ:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(t,e){var n=Math.cos(e),r=Math.sin(e),i=1-n,o=t.x,a=t.y,s=t.z,u=i*o,l=i*a;return this.set(u*o+n,u*a-r*s,u*s+r*a,0,u*a+r*s,l*a+n,l*s-r*o,0,u*s-r*a,l*s+r*o,i*s*s+n,0,0,0,0,1),this},makeScale:function(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this},makeShear:function(t,e,n){return this.set(1,e,n,0,t,1,n,0,t,e,1,0,0,0,0,1),this},compose:function(t,e,n){var r=this.elements,i=e._x,o=e._y,a=e._z,s=e._w,u=i+i,l=o+o,c=a+a,h=i*u,d=i*l,p=i*c,f=o*l,m=o*c,v=a*c,g=s*u,y=s*l,_=s*c,b=n.x,w=n.y,x=n.z;return r[0]=(1-(f+v))*b,r[1]=(d+_)*b,r[2]=(p-y)*b,r[3]=0,r[4]=(d-_)*w,r[5]=(1-(h+v))*w,r[6]=(m+g)*w,r[7]=0,r[8]=(p+y)*x,r[9]=(m-g)*x,r[10]=(1-(h+f))*x,r[11]=0,r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=1,this},decompose:(a=new $e,s=new Qe,function(t,e,n){var r=this.elements,i=a.set(r[0],r[1],r[2]).length(),o=a.set(r[4],r[5],r[6]).length(),u=a.set(r[8],r[9],r[10]).length();this.determinant()<0&&(i=-i),t.x=r[12],t.y=r[13],t.z=r[14],s.copy(this);var l=1/i,c=1/o,h=1/u;return s.elements[0]*=l,s.elements[1]*=l,s.elements[2]*=l,s.elements[4]*=c,s.elements[5]*=c,s.elements[6]*=c,s.elements[8]*=h,s.elements[9]*=h,s.elements[10]*=h,e.setFromRotationMatrix(s),n.x=i,n.y=o,n.z=u,this}),makePerspective:function(t,e,n,r,i,o){void 0===o&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var a=this.elements,s=2*i/(n-r),u=(e+t)/(e-t),l=(n+r)/(n-r),c=-(o+i)/(o-i),h=-2*o*i/(o-i);return a[0]=2*i/(e-t),a[4]=0,a[8]=u,a[12]=0,a[1]=0,a[5]=s,a[9]=l,a[13]=0,a[2]=0,a[6]=0,a[10]=c,a[14]=h,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this},makeOrthographic:function(t,e,n,r,i,o){var a=this.elements,s=1/(e-t),u=1/(n-r),l=1/(o-i),c=(e+t)*s,h=(n+r)*u,d=(o+i)*l;return a[0]=2*s,a[4]=0,a[8]=0,a[12]=-c,a[1]=0,a[5]=2*u,a[9]=0,a[13]=-h,a[2]=0,a[6]=0,a[10]=-2*l,a[14]=-d,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this},equals:function(t){for(var e=this.elements,n=t.elements,r=0;r<16;r++)if(e[r]!==n[r])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var n=0;n<16;n++)this.elements[n]=t[n+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}}),Object.assign(Je,{slerp:function(t,e,n,r){return n.copy(t).slerp(e,r)},slerpFlat:function(t,e,n,r,i,o,a){var s=n[r+0],u=n[r+1],l=n[r+2],c=n[r+3],h=i[o+0],d=i[o+1],p=i[o+2],f=i[o+3];if(c!==f||s!==h||u!==d||l!==p){var m=1-a,v=s*h+u*d+l*p+c*f,g=v>=0?1:-1,y=1-v*v;if(y>Number.EPSILON){var _=Math.sqrt(y),b=Math.atan2(_,v*g);m=Math.sin(m*b)/_,a=Math.sin(a*b)/_}var w=a*g;if(s=s*m+h*w,u=u*m+d*w,l=l*m+p*w,c=c*m+f*w,m===1-a){var x=1/Math.sqrt(s*s+u*u+l*l+c*c);s*=x,u*=x,l*=x,c*=x}}t[e]=s,t[e+1]=u,t[e+2]=l,t[e+3]=c}}),Object.defineProperties(Je.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this.onChangeCallback()}},w:{get:function(){return this._w},set:function(t){this._w=t,this.onChangeCallback()}}}),Object.assign(Je.prototype,{isQuaternion:!0,set:function(t,e,n,r){return this._x=t,this._y=e,this._z=n,this._w=r,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this.onChangeCallback(),this},setFromEuler:function(t,e){if(!t||!t.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=t._x,r=t._y,i=t._z,o=t.order,a=Math.cos,s=Math.sin,u=a(n/2),l=a(r/2),c=a(i/2),h=s(n/2),d=s(r/2),p=s(i/2);return"XYZ"===o?(this._x=h*l*c+u*d*p,this._y=u*d*c-h*l*p,this._z=u*l*p+h*d*c,this._w=u*l*c-h*d*p):"YXZ"===o?(this._x=h*l*c+u*d*p,this._y=u*d*c-h*l*p,this._z=u*l*p-h*d*c,this._w=u*l*c+h*d*p):"ZXY"===o?(this._x=h*l*c-u*d*p,this._y=u*d*c+h*l*p,this._z=u*l*p+h*d*c,this._w=u*l*c-h*d*p):"ZYX"===o?(this._x=h*l*c-u*d*p,this._y=u*d*c+h*l*p,this._z=u*l*p-h*d*c,this._w=u*l*c+h*d*p):"YZX"===o?(this._x=h*l*c+u*d*p,this._y=u*d*c+h*l*p,this._z=u*l*p-h*d*c,this._w=u*l*c-h*d*p):"XZY"===o&&(this._x=h*l*c-u*d*p,this._y=u*d*c-h*l*p,this._z=u*l*p+h*d*c,this._w=u*l*c+h*d*p),!1!==e&&this.onChangeCallback(),this},setFromAxisAngle:function(t,e){var n=e/2,r=Math.sin(n);return this._x=t.x*r,this._y=t.y*r,this._z=t.z*r,this._w=Math.cos(n),this.onChangeCallback(),this},setFromRotationMatrix:function(t){var e,n=t.elements,r=n[0],i=n[4],o=n[8],a=n[1],s=n[5],u=n[9],l=n[2],c=n[6],h=n[10],d=r+s+h;return d>0?(e=.5/Math.sqrt(d+1),this._w=.25/e,this._x=(c-u)*e,this._y=(o-l)*e,this._z=(a-i)*e):r>s&&r>h?(e=2*Math.sqrt(1+r-s-h),this._w=(c-u)/e,this._x=.25*e,this._y=(i+a)/e,this._z=(o+l)/e):s>h?(e=2*Math.sqrt(1+s-r-h),this._w=(o-l)/e,this._x=(i+a)/e,this._y=.25*e,this._z=(u+c)/e):(e=2*Math.sqrt(1+h-r-s),this._w=(a-i)/e,this._x=(o+l)/e,this._y=(u+c)/e,this._z=.25*e),this.onChangeCallback(),this},setFromUnitVectors:function(){var t,e=new $e;return function(n,r){return void 0===e&&(e=new $e),(t=n.dot(r)+1)<1e-6?(t=0,Math.abs(n.x)>Math.abs(n.z)?e.set(-n.y,n.x,0):e.set(0,-n.z,n.y)):e.crossVectors(n,r),this._x=e.x,this._y=e.y,this._z=e.z,this._w=t,this.normalize()}}(),angleTo:function(t){return 2*Math.acos(Math.abs(Ke.clamp(this.dot(t),-1,1)))},rotateTowards:function(t,e){var n=this.angleTo(t);if(0===n)return this;var r=Math.min(1,e/n);return this.slerp(t,r),this},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(this._x=this._x*(t=1/t),this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this.onChangeCallback(),this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)},premultiply:function(t){return this.multiplyQuaternions(t,this)},multiplyQuaternions:function(t,e){var n=t._x,r=t._y,i=t._z,o=t._w,a=e._x,s=e._y,u=e._z,l=e._w;return this._x=n*l+o*a+r*u-i*s,this._y=r*l+o*s+i*a-n*u,this._z=i*l+o*u+n*s-r*a,this._w=o*l-n*a-r*s-i*u,this.onChangeCallback(),this},slerp:function(t,e){if(0===e)return this;if(1===e)return this.copy(t);var n=this._x,r=this._y,i=this._z,o=this._w,a=o*t._w+n*t._x+r*t._y+i*t._z;if(a<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,a=-a):this.copy(t),a>=1)return this._w=o,this._x=n,this._y=r,this._z=i,this;var s=1-a*a;if(s<=Number.EPSILON){var u=1-e;return this._w=u*o+e*this._w,this._x=u*n+e*this._x,this._y=u*r+e*this._y,this._z=u*i+e*this._z,this.normalize()}var l=Math.sqrt(s),c=Math.atan2(l,a),h=Math.sin((1-e)*c)/l,d=Math.sin(e*c)/l;return this._w=o*h+this._w*d,this._x=n*h+this._x*d,this._y=r*h+this._y*d,this._z=i*h+this._z*d,this.onChangeCallback(),this},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w},fromArray:function(t,e){return void 0===e&&(e=0),this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this.onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){}}),Object.assign($e.prototype,{isVector3:!0,set:function(t,e,n){return this.x=t,this.y=e,this.z=n,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this},multiplyVectors:function(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this},applyEuler:(f=new Je,function(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(f.setFromEuler(t))}),applyAxisAngle:function(){var t=new Je;return function(e,n){return this.applyQuaternion(t.setFromAxisAngle(e,n))}}(),applyMatrix3:function(t){var e=this.x,n=this.y,r=this.z,i=t.elements;return this.x=i[0]*e+i[3]*n+i[6]*r,this.y=i[1]*e+i[4]*n+i[7]*r,this.z=i[2]*e+i[5]*n+i[8]*r,this},applyMatrix4:function(t){var e=this.x,n=this.y,r=this.z,i=t.elements,o=1/(i[3]*e+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*e+i[4]*n+i[8]*r+i[12])*o,this.y=(i[1]*e+i[5]*n+i[9]*r+i[13])*o,this.z=(i[2]*e+i[6]*n+i[10]*r+i[14])*o,this},applyQuaternion:function(t){var e=this.x,n=this.y,r=this.z,i=t.x,o=t.y,a=t.z,s=t.w,u=s*e+o*r-a*n,l=s*n+a*e-i*r,c=s*r+i*n-o*e,h=-i*e-o*n-a*r;return this.x=u*s+h*-i+l*-a-c*-o,this.y=l*s+h*-o+c*-i-u*-a,this.z=c*s+h*-a+u*-o-l*-i,this},project:function(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)},unproject:function(){var t=new Qe;return function(e){return this.applyMatrix4(t.getInverse(e.projectionMatrix)).applyMatrix4(e.matrixWorld)}}(),transformDirection:function(t){var e=this.x,n=this.y,r=this.z,i=t.elements;return this.x=i[0]*e+i[4]*n+i[8]*r,this.y=i[1]*e+i[5]*n+i[9]*r,this.z=i[2]*e+i[6]*n+i[10]*r,this.normalize()},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this},clampScalar:function(){var t=new $e,e=new $e;return function(n,r){return t.set(n,n,n),e.set(r,r,r),this.clamp(t,e)}}(),clampLength:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},cross:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e)):this.crossVectors(this,t)},crossVectors:function(t,e){var n=t.x,r=t.y,i=t.z,o=e.x,a=e.y,s=e.z;return this.x=r*s-i*a,this.y=i*o-n*s,this.z=n*a-r*o,this},projectOnVector:function(t){var e=t.dot(this)/t.lengthSq();return this.copy(t).multiplyScalar(e)},projectOnPlane:function(){var t=new $e;return function(e){return t.copy(this).projectOnVector(e),this.sub(t)}}(),reflect:function(){var t=new $e;return function(e){return this.sub(t.copy(e).multiplyScalar(2*this.dot(e)))}}(),angleTo:function(t){var e=this.dot(t)/Math.sqrt(this.lengthSq()*t.lengthSq());return Math.acos(Ke.clamp(e,-1,1))},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return e*e+n*n+r*r},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)},setFromSpherical:function(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)},setFromSphericalCoords:function(t,e,n){var r=Math.sin(e)*t;return this.x=r*Math.sin(n),this.y=Math.cos(e)*t,this.z=r*Math.cos(n),this},setFromCylindrical:function(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)},setFromCylindricalCoords:function(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this},setFromMatrixPosition:function(t){var e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this},setFromMatrixScale:function(t){var e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),r=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=r,this},setFromMatrixColumn:function(t,e){return this.fromArray(t.elements,4*e)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t},fromBufferAttribute:function(t,e,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}}),Object.assign(tn.prototype,{isMatrix3:!0,set:function(t,e,n,r,i,o,a,s,u){var l=this.elements;return l[0]=t,l[1]=r,l[2]=a,l[3]=e,l[4]=i,l[5]=s,l[6]=n,l[7]=o,l[8]=u,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(t){var e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this},setFromMatrix4:function(t){var e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this},applyToBufferAttribute:function(){var t=new $e;return function(e){for(var n=0,r=e.count;n<r;n++)t.x=e.getX(n),t.y=e.getY(n),t.z=e.getZ(n),t.applyMatrix3(this),e.setXYZ(n,t.x,t.y,t.z);return e}}(),multiply:function(t){return this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var n=t.elements,r=e.elements,i=this.elements,o=n[0],a=n[3],s=n[6],u=n[1],l=n[4],c=n[7],h=n[2],d=n[5],p=n[8],f=r[0],m=r[3],v=r[6],g=r[1],y=r[4],_=r[7],b=r[2],w=r[5],x=r[8];return i[0]=o*f+a*g+s*b,i[3]=o*m+a*y+s*w,i[6]=o*v+a*_+s*x,i[1]=u*f+l*g+c*b,i[4]=u*m+l*y+c*w,i[7]=u*v+l*_+c*x,i[2]=h*f+d*g+p*b,i[5]=h*m+d*y+p*w,i[8]=h*v+d*_+p*x,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this},determinant:function(){var t=this.elements,e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],u=t[7],l=t[8];return e*o*l-e*a*u-n*i*l+n*a*s+r*i*u-r*o*s},getInverse:function(t,e){t&&t.isMatrix4&&console.error("THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.");var n=t.elements,r=this.elements,i=n[0],o=n[1],a=n[2],s=n[3],u=n[4],l=n[5],c=n[6],h=n[7],d=n[8],p=d*u-l*h,f=l*c-d*s,m=h*s-u*c,v=i*p+o*f+a*m;if(0===v){var g="THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0";if(!0===e)throw new Error(g);return console.warn(g),this.identity()}var y=1/v;return r[0]=p*y,r[1]=(a*h-d*o)*y,r[2]=(l*o-a*u)*y,r[3]=f*y,r[4]=(d*i-a*c)*y,r[5]=(a*s-l*i)*y,r[6]=m*y,r[7]=(o*c-h*i)*y,r[8]=(u*i-o*s)*y,this},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this},getNormalMatrix:function(t){return this.setFromMatrix4(t).getInverse(this).transpose()},transposeIntoArray:function(t){var e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this},setUvTransform:function(t,e,n,r,i,o,a){var s=Math.cos(i),u=Math.sin(i);this.set(n*s,n*u,-n*(s*o+u*a)+o+t,-r*u,r*s,-r*(-u*o+s*a)+a+e,0,0,1)},scale:function(t,e){var n=this.elements;return n[0]*=t,n[3]*=t,n[6]*=t,n[1]*=e,n[4]*=e,n[7]*=e,this},rotate:function(t){var e=Math.cos(t),n=Math.sin(t),r=this.elements,i=r[0],o=r[3],a=r[6],s=r[1],u=r[4],l=r[7];return r[0]=e*i+n*s,r[3]=e*o+n*u,r[6]=e*a+n*l,r[1]=-n*i+e*s,r[4]=-n*o+e*u,r[7]=-n*a+e*l,this},translate:function(t,e){var n=this.elements;return n[0]+=t*n[2],n[3]+=t*n[5],n[6]+=t*n[8],n[1]+=e*n[2],n[4]+=e*n[5],n[7]+=e*n[8],this},equals:function(t){for(var e=this.elements,n=t.elements,r=0;r<9;r++)if(e[r]!==n[r])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var n=0;n<9;n++)this.elements[n]=t[n+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}});var en,nn,rn,on,an,sn={getDataURL:function(t){var e;if(t instanceof HTMLCanvasElement)e=t;else{(e=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")).width=t.width,e.height=t.height;var n=e.getContext("2d");t instanceof ImageData?n.putImageData(t,0,0):n.drawImage(t,0,0,t.width,t.height)}return e.width>2048||e.height>2048?e.toDataURL("image/jpeg",.6):e.toDataURL("image/png")}},un=0;function ln(t,e,n,r,i,o,a,s,u,l){Object.defineProperty(this,"id",{value:un++}),this.uuid=Ke.generateUUID(),this.name="",this.image=void 0!==t?t:ln.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==e?e:ln.DEFAULT_MAPPING,this.wrapS=void 0!==n?n:Ct,this.wrapT=void 0!==r?r:Ct,this.magFilter=void 0!==i?i:Lt,this.minFilter=void 0!==o?o:Nt,this.anisotropy=void 0!==u?u:1,this.format=void 0!==a?a:Kt,this.type=void 0!==s?s:Dt,this.offset=new Ze(0,0),this.repeat=new Ze(1,1),this.center=new Ze(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new tn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==l?l:Fe,this.version=0,this.onUpdate=null}function cn(t,e,n,r){this.x=t||0,this.y=e||0,this.z=n||0,this.w=void 0!==r?r:1}function hn(t,e,n){this.width=t,this.height=e,this.scissor=new cn(0,0,t,e),this.scissorTest=!1,this.viewport=new cn(0,0,t,e),void 0===(n=n||{}).minFilter&&(n.minFilter=Lt),this.texture=new ln(void 0,void 0,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.generateMipmaps=void 0===n.generateMipmaps||n.generateMipmaps,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0===n.stencilBuffer||n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}function dn(t,e,n){hn.call(this,t,e,n),this.activeCubeFace=0,this.activeMipMapLevel=0}function pn(t,e,n,r,i,o,a,s,u,l,c,h){ln.call(this,null,o,a,s,u,l,r,i,c,h),this.image={data:t,width:e,height:n},this.magFilter=void 0!==u?u:Pt,this.minFilter=void 0!==l?l:Pt,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}function fn(t,e){this.min=void 0!==t?t:new $e(1/0,1/0,1/0),this.max=void 0!==e?e:new $e(-1/0,-1/0,-1/0)}function mn(t,e){this.center=void 0!==t?t:new $e,this.radius=void 0!==e?e:0}function vn(t,e){this.normal=void 0!==t?t:new $e(1,0,0),this.constant=void 0!==e?e:0}function gn(t,e,n,r,i,o){this.planes=[void 0!==t?t:new vn,void 0!==e?e:new vn,void 0!==n?n:new vn,void 0!==r?r:new vn,void 0!==i?i:new vn,void 0!==o?o:new vn]}ln.DEFAULT_IMAGE=void 0,ln.DEFAULT_MAPPING=yt,ln.prototype=Object.assign(Object.create(r.prototype),{constructor:ln,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.name=t.name,this.image=t.image,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this},toJSON:function(t){var e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];var n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY};if(void 0!==this.image){var r=this.image;if(void 0===r.uuid&&(r.uuid=Ke.generateUUID()),!e&&void 0===t.images[r.uuid]){var i;if(Array.isArray(r)){i=[];for(var o=0,a=r.length;o<a;o++)i.push(sn.getDataURL(r[o]))}else i=sn.getDataURL(r);t.images[r.uuid]={uuid:r.uuid,url:i}}n.image=r.uuid}return e||(t.textures[this.uuid]=n),n},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(t){if(this.mapping!==yt)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case Mt:t.x=t.x-Math.floor(t.x);break;case Ct:t.x=t.x<0?0:1;break;case At:t.x=1===Math.abs(Math.floor(t.x)%2)?Math.ceil(t.x)-t.x:t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case Mt:t.y=t.y-Math.floor(t.y);break;case Ct:t.y=t.y<0?0:1;break;case At:t.y=1===Math.abs(Math.floor(t.y)%2)?Math.ceil(t.y)-t.y:t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}}),Object.defineProperty(ln.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(cn.prototype,{isVector4:!0,set:function(t,e,n,r){return this.x=t,this.y=e,this.z=n,this.w=r,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this.w=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setW:function(t){return this.w=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},applyMatrix4:function(t){var e=this.x,n=this.y,r=this.z,i=this.w,o=t.elements;return this.x=o[0]*e+o[4]*n+o[8]*r+o[12]*i,this.y=o[1]*e+o[5]*n+o[9]*r+o[13]*i,this.z=o[2]*e+o[6]*n+o[10]*r+o[14]*i,this.w=o[3]*e+o[7]*n+o[11]*r+o[15]*i,this},divideScalar:function(t){return this.multiplyScalar(1/t)},setAxisAngleFromQuaternion:function(t){this.w=2*Math.acos(t.w);var e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this},setAxisAngleFromRotationMatrix:function(t){var e,n,r,i,o=t.elements,a=o[0],s=o[4],u=o[8],l=o[1],c=o[5],h=o[9],d=o[2],p=o[6],f=o[10];if(Math.abs(s-l)<.01&&Math.abs(u-d)<.01&&Math.abs(h-p)<.01){if(Math.abs(s+l)<.1&&Math.abs(u+d)<.1&&Math.abs(h+p)<.1&&Math.abs(a+c+f-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;var m=(a+1)/2,v=(c+1)/2,g=(f+1)/2,y=(s+l)/4,_=(u+d)/4,b=(h+p)/4;return m>v&&m>g?m<.01?(n=0,r=.707106781,i=.707106781):(r=y/(n=Math.sqrt(m)),i=_/n):v>g?v<.01?(n=.707106781,r=0,i=.707106781):(n=y/(r=Math.sqrt(v)),i=b/r):g<.01?(n=.707106781,r=.707106781,i=0):(n=_/(i=Math.sqrt(g)),r=b/i),this.set(n,r,i,e),this}var w=Math.sqrt((p-h)*(p-h)+(u-d)*(u-d)+(l-s)*(l-s));return Math.abs(w)<.001&&(w=1),this.x=(p-h)/w,this.y=(u-d)/w,this.z=(l-s)/w,this.w=Math.acos((a+c+f-1)/2),this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this},clampScalar:function(){var t,e;return function(n,r){return void 0===t&&(t=new cn,e=new cn),t.set(n,n,n,n),e.set(r,r,r,r),this.clamp(t,e)}}(),clampLength:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t},fromBufferAttribute:function(t,e,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}}),hn.prototype=Object.assign(Object.create(r.prototype),{constructor:hn,isWebGLRenderTarget:!0,setSize:function(t,e){this.width===t&&this.height===e||(this.width=t,this.height=e,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.width=t.width,this.height=t.height,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),(dn.prototype=Object.create(hn.prototype)).constructor=dn,dn.prototype.isWebGLRenderTargetCube=!0,(pn.prototype=Object.create(ln.prototype)).constructor=pn,pn.prototype.isDataTexture=!0,Object.assign(fn.prototype,{isBox3:!0,set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromArray:function(t){for(var e=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0,s=0,u=t.length;s<u;s+=3){var l=t[s],c=t[s+1],h=t[s+2];l<e&&(e=l),c<n&&(n=c),h<r&&(r=h),l>i&&(i=l),c>o&&(o=c),h>a&&(a=h)}return this.min.set(e,n,r),this.max.set(i,o,a),this},setFromBufferAttribute:function(t){for(var e=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0,s=0,u=t.count;s<u;s++){var l=t.getX(s),c=t.getY(s),h=t.getZ(s);l<e&&(e=l),c<n&&(n=c),h<r&&(r=h),l>i&&(i=l),c>o&&(o=c),h>a&&(a=h)}return this.min.set(e,n,r),this.max.set(i,o,a),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(){var t=new $e;return function(e,n){var r=t.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}}(),setFromObject:function(t){return this.makeEmpty(),this.expandByObject(t)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(t){return void 0===t&&(console.warn("THREE.Box3: .getCenter() target is now required"),t=new $e),this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){return void 0===t&&(console.warn("THREE.Box3: .getSize() target is now required"),t=new $e),this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},expandByObject:function(){var t,e,n,r=new $e;function i(i){var o=i.geometry;if(void 0!==o)if(o.isGeometry){var a=o.vertices;for(e=0,n=a.length;e<n;e++)r.copy(a[e]),r.applyMatrix4(i.matrixWorld),t.expandByPoint(r)}else if(o.isBufferGeometry){var s=o.attributes.position;if(void 0!==s)for(e=0,n=s.count;e<n;e++)r.fromBufferAttribute(s,e).applyMatrix4(i.matrixWorld),t.expandByPoint(r)}}return function(e){return t=this,e.updateMatrixWorld(!0),e.traverse(i),this}}(),containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z},getParameter:function(t,e){return void 0===e&&(console.warn("THREE.Box3: .getParameter() target is now required"),e=new $e),e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)},intersectsSphere:(nn=new $e,function(t){return this.clampPoint(t.center,nn),nn.distanceToSquared(t.center)<=t.radius*t.radius}),intersectsPlane:function(t){var e,n;return t.normal.x>0?(e=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=-t.constant&&n>=-t.constant},intersectsTriangle:function(){var t=new $e,e=new $e,n=new $e,r=new $e,i=new $e,o=new $e,a=new $e,s=new $e,u=new $e,l=new $e;function c(r){var i,o;for(i=0,o=r.length-3;i<=o;i+=3){a.fromArray(r,i);var s=u.x*Math.abs(a.x)+u.y*Math.abs(a.y)+u.z*Math.abs(a.z),l=t.dot(a),c=e.dot(a),h=n.dot(a);if(Math.max(-Math.max(l,c,h),Math.min(l,c,h))>s)return!1}return!0}return function(a){if(this.isEmpty())return!1;this.getCenter(s),u.subVectors(this.max,s),t.subVectors(a.a,s),e.subVectors(a.b,s),n.subVectors(a.c,s),r.subVectors(e,t),i.subVectors(n,e),o.subVectors(t,n);var h=[0,-r.z,r.y,0,-i.z,i.y,0,-o.z,o.y,r.z,0,-r.x,i.z,0,-i.x,o.z,0,-o.x,-r.y,r.x,0,-i.y,i.x,0,-o.y,o.x,0];return!!c(h)&&!!c(h=[1,0,0,0,1,0,0,0,1])&&(l.crossVectors(r,i),c(h=[l.x,l.y,l.z]))}}(),clampPoint:function(t,e){return void 0===e&&(console.warn("THREE.Box3: .clampPoint() target is now required"),e=new $e),e.copy(t).clamp(this.min,this.max)},distanceToPoint:function(){var t=new $e;return function(e){return t.copy(e).clamp(this.min,this.max).sub(e).length()}}(),getBoundingSphere:function(){var t=new $e;return function(e){return void 0===e&&(console.warn("THREE.Box3: .getBoundingSphere() target is now required"),e=new mn),this.getCenter(e.center),e.radius=.5*this.getSize(t).length(),e}}(),intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},applyMatrix4:(en=[new $e,new $e,new $e,new $e,new $e,new $e,new $e,new $e],function(t){return this.isEmpty()?this:(en[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),en[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),en[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),en[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),en[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),en[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),en[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),en[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(en),this)}),translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}),Object.assign(mn.prototype,{set:function(t,e){return this.center.copy(t),this.radius=e,this},setFromPoints:(rn=new fn,function(t,e){var n=this.center;void 0!==e?n.copy(e):rn.setFromPoints(t).getCenter(n);for(var r=0,i=0,o=t.length;i<o;i++)r=Math.max(r,n.distanceToSquared(t[i]));return this.radius=Math.sqrt(r),this}),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.center.copy(t.center),this.radius=t.radius,this},empty:function(){return this.radius<=0},containsPoint:function(t){return t.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(t){return t.distanceTo(this.center)-this.radius},intersectsSphere:function(t){var e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e},intersectsBox:function(t){return t.intersectsSphere(this)},intersectsPlane:function(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius},clampPoint:function(t,e){var n=this.center.distanceToSquared(t);return void 0===e&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),e=new $e),e.copy(t),n>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e},getBoundingBox:function(t){return void 0===t&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),t=new fn),t.set(this.center,this.center),t.expandByScalar(this.radius),t},applyMatrix4:function(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this},translate:function(t){return this.center.add(t),this},equals:function(t){return t.center.equals(this.center)&&t.radius===this.radius}}),Object.assign(vn.prototype,{set:function(t,e){return this.normal.copy(t),this.constant=e,this},setComponents:function(t,e,n,r){return this.normal.set(t,e,n),this.constant=r,this},setFromNormalAndCoplanarPoint:function(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this},setFromCoplanarPoints:function(){var t=new $e,e=new $e;return function(n,r,i){var o=t.subVectors(i,r).cross(e.subVectors(n,r)).normalize();return this.setFromNormalAndCoplanarPoint(o,n),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.normal.copy(t.normal),this.constant=t.constant,this},normalize:function(){var t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(t){return this.normal.dot(t)+this.constant},distanceToSphere:function(t){return this.distanceToPoint(t.center)-t.radius},projectPoint:function(t,e){return void 0===e&&(console.warn("THREE.Plane: .projectPoint() target is now required"),e=new $e),e.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)},intersectLine:function(){var t=new $e;return function(e,n){void 0===n&&(console.warn("THREE.Plane: .intersectLine() target is now required"),n=new $e);var r=e.delta(t),i=this.normal.dot(r);if(0===i)return 0===this.distanceToPoint(e.start)?n.copy(e.start):void 0;var o=-(e.start.dot(this.normal)+this.constant)/i;return o<0||o>1?void 0:n.copy(r).multiplyScalar(o).add(e.start)}}(),intersectsLine:function(t){var e=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return e<0&&n>0||n<0&&e>0},intersectsBox:function(t){return t.intersectsPlane(this)},intersectsSphere:function(t){return t.intersectsPlane(this)},coplanarPoint:function(t){return void 0===t&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),t=new $e),t.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var t=new $e,e=new tn;return function(n,r){var i=r||e.getNormalMatrix(n),o=this.coplanarPoint(t).applyMatrix4(n),a=this.normal.applyMatrix3(i).normalize();return this.constant=-o.dot(a),this}}(),translate:function(t){return this.constant-=t.dot(this.normal),this},equals:function(t){return t.normal.equals(this.normal)&&t.constant===this.constant}}),Object.assign(gn.prototype,{set:function(t,e,n,r,i,o){var a=this.planes;return a[0].copy(t),a[1].copy(e),a[2].copy(n),a[3].copy(r),a[4].copy(i),a[5].copy(o),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){for(var e=this.planes,n=0;n<6;n++)e[n].copy(t.planes[n]);return this},setFromMatrix:function(t){var e=this.planes,n=t.elements,r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],u=n[5],l=n[6],c=n[7],h=n[8],d=n[9],p=n[10],f=n[11],m=n[12],v=n[13],g=n[14],y=n[15];return e[0].setComponents(a-r,c-s,f-h,y-m).normalize(),e[1].setComponents(a+r,c+s,f+h,y+m).normalize(),e[2].setComponents(a+i,c+u,f+d,y+v).normalize(),e[3].setComponents(a-i,c-u,f-d,y-v).normalize(),e[4].setComponents(a-o,c-l,f-p,y-g).normalize(),e[5].setComponents(a+o,c+l,f+p,y+g).normalize(),this},intersectsObject:(an=new mn,function(t){var e=t.geometry;return null===e.boundingSphere&&e.computeBoundingSphere(),an.copy(e.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(an)}),intersectsSprite:function(){var t=new mn;return function(e){return t.center.set(0,0,0),t.radius=.7071067811865476,t.applyMatrix4(e.matrixWorld),this.intersectsSphere(t)}}(),intersectsSphere:function(t){for(var e=this.planes,n=t.center,r=-t.radius,i=0;i<6;i++)if(e[i].distanceToPoint(n)<r)return!1;return!0},intersectsBox:(on=new $e,function(t){for(var e=this.planes,n=0;n<6;n++){var r=e[n];if(on.x=r.normal.x>0?t.max.x:t.min.x,on.y=r.normal.y>0?t.max.y:t.min.y,on.z=r.normal.z>0?t.max.z:t.min.z,r.distanceToPoint(on)<0)return!1}return!0}),containsPoint:function(t){for(var e=this.planes,n=0;n<6;n++)if(e[n].distanceToPoint(t)<0)return!1;return!0}});var yn,_n,bn,wn={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif\n",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif\n",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif\n",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif\n",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"\nvec3 transformed = vec3( position );\n",beginnormal_vertex:"\nvec3 objectNormal = vec3( normal );\n",bsdfs:"float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\treturn specularColor * AB.x + AB.y;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif\n",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t#endif\n#endif\n",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG ) && ! defined( MATCAP )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif\n",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG ) && ! defined( MATCAP )\n\tvarying vec3 vViewPosition;\n#endif\n",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG ) && ! defined( MATCAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif\n",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",common:"#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\n",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV( sampler2D envMap, vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif\n",defaultnormal_vertex:"vec3 transformedNormal = normalMatrix * objectNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif\n",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif\n",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif\n",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif\n",encodings_fragment:"  gl_FragColor = linearToOutputTexel( gl_FragColor );\n",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}\n",envmap_fragment:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\treflectVec = normalize( reflectVec );\n\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif\n",envmap_pars_fragment:"#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntensity;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif\n",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif\n",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent ));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif\n",envmap_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif\n",fog_vertex:"#ifdef USE_FOG\n\tfogDepth = -mvPosition.z;\n#endif\n",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif\n",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif\n",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif\n",gradientmap_pars_fragment:"#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif\n",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif\n",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif\n",lights_pars_begin:"uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t\tfloat shadowCameraNear;\n\t\tfloat shadowCameraFar;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif\n",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)\n",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif\n",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos - halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos + halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos + halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos - halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}\n",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearCoatRadiance = vec3( 0.0 );\n#endif\n",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tirradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), maxMipLevel );\n\t#ifndef STANDARD\n\t\tclearCoatRadiance += getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), maxMipLevel );\n\t#endif\n#endif\n",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif\n",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n#endif\n",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif\n",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\tgl_Position.z *= gl_Position.w;\n\t#endif\n#endif\n",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif\n",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n",map_particle_fragment:"#ifdef USE_MAP\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n",map_particle_pars_fragment:"#ifdef USE_MAP\n\tuniform mat3 uvTransform;\n\tuniform sampler2D map;\n#endif\n",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif\n",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif\n",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif\n",normal_fragment_begin:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n#endif\n",normal_fragment_maps:"#ifdef USE_NORMALMAP\n\t#ifdef OBJECTSPACE_NORMALMAP\n\t\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\t#ifdef FLIP_SIDED\n\t\t\tnormal = - normal;\n\t\t#endif\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t\tnormal = normalize( normalMatrix * normal );\n\t#else\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\t#ifdef OBJECTSPACE_NORMALMAP\n\t\tuniform mat3 normalMatrix;\n\t#else\n\t\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\t\tvec2 st0 = dFdx( vUv.st );\n\t\t\tvec2 st1 = dFdy( vUv.st );\n\t\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\n\t\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\t\tvec3 N = normalize( surf_norm );\n\t\t\tmat3 tsn = mat3( S, T, N );\n\t\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\t\tmapN.xy *= normalScale;\n\t\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\treturn normalize( tsn * mapN );\n\t\t}\n\t#endif\n#endif\n",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif\n",project_vertex:"vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\ngl_Position = projectionMatrix * mvPosition;\n",dithering_fragment:"#if defined( DITHERING )\n  gl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif\n",dithering_pars_fragment:"#if defined( DITHERING )\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif\n",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif\n",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif\n",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif\n",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif\n",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}\n",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif\n",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif\n",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif\n",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif\n",tonemapping_pars_fragment:"#ifndef saturate\n\t#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\n",uv_pars_fragment:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\n",uv_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n#endif\n",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tgl_FragColor = texture2D( t2D, vUv );\n}\n",background_vert:"varying vec2 vUv;\nvoid main() {\n\tvUv = uv;\n\tgl_Position = vec4( position, 1.0 );\n\tgl_Position.z = 1.0;\n}\n",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldPosition;\nvoid main() {\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n\tgl_FragColor.a *= opacity;\n}\n",cube_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}\n",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}\n",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}\n",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}\n",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldPosition );\n\tvec2 sampleUV;\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n}\n",equirect_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}\n",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}\n",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\tvec4 matcapColor = texture2D( matcap, uv );\n\tmatcapColor = matcapTexelToLinear( matcapColor );\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}\n",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",meshphysical_frag:"#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshphysical_vert:"#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}\n",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}\n",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}\n",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <fog_fragment>\n}\n",shadow_vert:"#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}\n"},xn={merge:function(t){for(var e={},n=0;n<t.length;n++){var r=this.clone(t[n]);for(var i in r)e[i]=r[i]}return e},clone:function(t){var e={};for(var n in t)for(var r in e[n]={},t[n]){var i=t[n][r];e[n][r]=i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture)?i.clone():Array.isArray(i)?i.slice():i}return e}},En={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Sn(t,e,n){return void 0===e&&void 0===n?this.set(t):this.setRGB(t,e,n)}Object.assign(Sn.prototype,{isColor:!0,r:1,g:1,b:1,set:function(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this},setScalar:function(t){return this.r=t,this.g=t,this.b=t,this},setHex:function(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this},setRGB:function(t,e,n){return this.r=t,this.g=e,this.b=n,this},setHSL:function(){function t(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+6*(e-t)*(2/3-n):t}return function(e,n,r){if(e=Ke.euclideanModulo(e,1),n=Ke.clamp(n,0,1),r=Ke.clamp(r,0,1),0===n)this.r=this.g=this.b=r;else{var i=r<=.5?r*(1+n):r+n-r*n,o=2*r-i;this.r=t(o,i,e+1/3),this.g=t(o,i,e),this.b=t(o,i,e-1/3)}return this}}(),setStyle:function(t){function e(e){void 0!==e&&parseFloat(e)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}var n;if(n=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(t)){var r,i=n[2];switch(n[1]){case"rgb":case"rgba":if(r=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(i))return this.r=Math.min(255,parseInt(r[1],10))/255,this.g=Math.min(255,parseInt(r[2],10))/255,this.b=Math.min(255,parseInt(r[3],10))/255,e(r[5]),this;if(r=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(i))return this.r=Math.min(100,parseInt(r[1],10))/100,this.g=Math.min(100,parseInt(r[2],10))/100,this.b=Math.min(100,parseInt(r[3],10))/100,e(r[5]),this;break;case"hsl":case"hsla":if(r=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(i)){var o=parseFloat(r[1])/360,a=parseInt(r[2],10)/100,s=parseInt(r[3],10)/100;return e(r[5]),this.setHSL(o,a,s)}}}else if(n=/^\#([A-Fa-f0-9]+)$/.exec(t)){var u,l=(u=n[1]).length;if(3===l)return this.r=parseInt(u.charAt(0)+u.charAt(0),16)/255,this.g=parseInt(u.charAt(1)+u.charAt(1),16)/255,this.b=parseInt(u.charAt(2)+u.charAt(2),16)/255,this;if(6===l)return this.r=parseInt(u.charAt(0)+u.charAt(1),16)/255,this.g=parseInt(u.charAt(2)+u.charAt(3),16)/255,this.b=parseInt(u.charAt(4)+u.charAt(5),16)/255,this}return t&&t.length>0&&(void 0!==(u=En[t])?this.setHex(u):console.warn("THREE.Color: Unknown color "+t)),this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this},copyGammaToLinear:function(t,e){return void 0===e&&(e=2),this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this},copyLinearToGamma:function(t,e){void 0===e&&(e=2);var n=e>0?1/e:1;return this.r=Math.pow(t.r,n),this.g=Math.pow(t.g,n),this.b=Math.pow(t.b,n),this},convertGammaToLinear:function(t){return this.copyGammaToLinear(this,t),this},convertLinearToGamma:function(t){return this.copyLinearToGamma(this,t),this},copySRGBToLinear:function(){function t(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}return function(e){return this.r=t(e.r),this.g=t(e.g),this.b=t(e.b),this}}(),copyLinearToSRGB:function(){function t(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}return function(e){return this.r=t(e.r),this.g=t(e.g),this.b=t(e.b),this}}(),convertSRGBToLinear:function(){return this.copySRGBToLinear(this),this},convertLinearToSRGB:function(){return this.copyLinearToSRGB(this),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(t){void 0===t&&(console.warn("THREE.Color: .getHSL() target is now required"),t={h:0,s:0,l:0});var e,n,r=this.r,i=this.g,o=this.b,a=Math.max(r,i,o),s=Math.min(r,i,o),u=(s+a)/2;if(s===a)e=0,n=0;else{var l=a-s;switch(n=u<=.5?l/(a+s):l/(2-a-s),a){case r:e=(i-o)/l+(i<o?6:0);break;case i:e=(o-r)/l+2;break;case o:e=(r-i)/l+4}e/=6}return t.h=e,t.s=n,t.l=u,t},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:(bn={},function(t,e,n){return this.getHSL(bn),bn.h+=t,bn.s+=e,bn.l+=n,this.setHSL(bn.h,bn.s,bn.l),this}),add:function(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this},addColors:function(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this},addScalar:function(t){return this.r+=t,this.g+=t,this.b+=t,this},sub:function(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this},multiply:function(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this},multiplyScalar:function(t){return this.r*=t,this.g*=t,this.b*=t,this},lerp:function(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this},lerpHSL:(yn={h:0,s:0,l:0},_n={h:0,s:0,l:0},function(t,e){this.getHSL(yn),t.getHSL(_n);var n=Ke.lerp(yn.h,_n.h,e),r=Ke.lerp(yn.s,_n.s,e),i=Ke.lerp(yn.l,_n.l,e);return this.setHSL(n,r,i),this}),equals:function(t){return t.r===this.r&&t.g===this.g&&t.b===this.b},fromArray:function(t,e){return void 0===e&&(e=0),this.r=t[e],this.g=t[e+1],this.b=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t},toJSON:function(){return this.getHex()}});var Tn,Mn={common:{diffuse:{value:new Sn(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new tn},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Ze(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Sn(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new Sn(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},uvTransform:{value:new tn}},sprite:{diffuse:{value:new Sn(15658734)},opacity:{value:1},center:{value:new Ze(.5,.5)},rotation:{value:0},map:{value:null},uvTransform:{value:new tn}}},Cn={basic:{uniforms:xn.merge([Mn.common,Mn.specularmap,Mn.envmap,Mn.aomap,Mn.lightmap,Mn.fog]),vertexShader:wn.meshbasic_vert,fragmentShader:wn.meshbasic_frag},lambert:{uniforms:xn.merge([Mn.common,Mn.specularmap,Mn.envmap,Mn.aomap,Mn.lightmap,Mn.emissivemap,Mn.fog,Mn.lights,{emissive:{value:new Sn(0)}}]),vertexShader:wn.meshlambert_vert,fragmentShader:wn.meshlambert_frag},phong:{uniforms:xn.merge([Mn.common,Mn.specularmap,Mn.envmap,Mn.aomap,Mn.lightmap,Mn.emissivemap,Mn.bumpmap,Mn.normalmap,Mn.displacementmap,Mn.gradientmap,Mn.fog,Mn.lights,{emissive:{value:new Sn(0)},specular:{value:new Sn(1118481)},shininess:{value:30}}]),vertexShader:wn.meshphong_vert,fragmentShader:wn.meshphong_frag},standard:{uniforms:xn.merge([Mn.common,Mn.envmap,Mn.aomap,Mn.lightmap,Mn.emissivemap,Mn.bumpmap,Mn.normalmap,Mn.displacementmap,Mn.roughnessmap,Mn.metalnessmap,Mn.fog,Mn.lights,{emissive:{value:new Sn(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:wn.meshphysical_vert,fragmentShader:wn.meshphysical_frag},matcap:{uniforms:xn.merge([Mn.common,Mn.bumpmap,Mn.normalmap,Mn.displacementmap,Mn.fog,{matcap:{value:null}}]),vertexShader:wn.meshmatcap_vert,fragmentShader:wn.meshmatcap_frag},points:{uniforms:xn.merge([Mn.points,Mn.fog]),vertexShader:wn.points_vert,fragmentShader:wn.points_frag},dashed:{uniforms:xn.merge([Mn.common,Mn.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:wn.linedashed_vert,fragmentShader:wn.linedashed_frag},depth:{uniforms:xn.merge([Mn.common,Mn.displacementmap]),vertexShader:wn.depth_vert,fragmentShader:wn.depth_frag},normal:{uniforms:xn.merge([Mn.common,Mn.bumpmap,Mn.normalmap,Mn.displacementmap,{opacity:{value:1}}]),vertexShader:wn.normal_vert,fragmentShader:wn.normal_frag},sprite:{uniforms:xn.merge([Mn.sprite,Mn.fog]),vertexShader:wn.sprite_vert,fragmentShader:wn.sprite_frag},background:{uniforms:{t2D:{value:null}},vertexShader:wn.background_vert,fragmentShader:wn.background_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:wn.cube_vert,fragmentShader:wn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:wn.equirect_vert,fragmentShader:wn.equirect_frag},distanceRGBA:{uniforms:xn.merge([Mn.common,Mn.displacementmap,{referencePosition:{value:new $e},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:wn.distanceRGBA_vert,fragmentShader:wn.distanceRGBA_frag},shadow:{uniforms:xn.merge([Mn.lights,Mn.fog,{color:{value:new Sn(0)},opacity:{value:1}}]),vertexShader:wn.shadow_vert,fragmentShader:wn.shadow_frag}};function An(){var t=null,e=!1,n=null;function r(i,o){!1!==e&&(n(i,o),t.requestAnimationFrame(r))}return{start:function(){!0!==e&&null!==n&&(t.requestAnimationFrame(r),e=!0)},stop:function(){e=!1},setAnimationLoop:function(t){n=t},setContext:function(e){t=e}}}function Pn(t,e,n,r,i,o){this.a=t,this.b=e,this.c=n,this.normal=r&&r.isVector3?r:new $e,this.vertexNormals=Array.isArray(r)?r:[],this.color=i&&i.isColor?i:new Sn,this.vertexColors=Array.isArray(i)?i:[],this.materialIndex=void 0!==o?o:0}function On(t,e,n,r){this._x=t||0,this._y=e||0,this._z=n||0,this._order=r||On.DefaultOrder}function Rn(){this.mask=1}Cn.physical={uniforms:xn.merge([Cn.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:wn.meshphysical_vert,fragmentShader:wn.meshphysical_frag},Object.assign(Pn.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.a=t.a,this.b=t.b,this.c=t.c,this.normal.copy(t.normal),this.color.copy(t.color),this.materialIndex=t.materialIndex;for(var e=0,n=t.vertexNormals.length;e<n;e++)this.vertexNormals[e]=t.vertexNormals[e].clone();for(e=0,n=t.vertexColors.length;e<n;e++)this.vertexColors[e]=t.vertexColors[e].clone();return this}}),On.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],On.DefaultOrder="XYZ",Object.defineProperties(On.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this.onChangeCallback()}},order:{get:function(){return this._order},set:function(t){this._order=t,this.onChangeCallback()}}}),Object.assign(On.prototype,{isEuler:!0,set:function(t,e,n,r){return this._x=t,this._y=e,this._z=n,this._order=r||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this.onChangeCallback(),this},setFromRotationMatrix:function(t,e,n){var r=Ke.clamp,i=t.elements,o=i[0],a=i[4],s=i[8],u=i[1],l=i[5],c=i[9],h=i[2],d=i[6],p=i[10];return"XYZ"===(e=e||this._order)?(this._y=Math.asin(r(s,-1,1)),Math.abs(s)<.99999?(this._x=Math.atan2(-c,p),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(d,l),this._z=0)):"YXZ"===e?(this._x=Math.asin(-r(c,-1,1)),Math.abs(c)<.99999?(this._y=Math.atan2(s,p),this._z=Math.atan2(u,l)):(this._y=Math.atan2(-h,o),this._z=0)):"ZXY"===e?(this._x=Math.asin(r(d,-1,1)),Math.abs(d)<.99999?(this._y=Math.atan2(-h,p),this._z=Math.atan2(-a,l)):(this._y=0,this._z=Math.atan2(u,o))):"ZYX"===e?(this._y=Math.asin(-r(h,-1,1)),Math.abs(h)<.99999?(this._x=Math.atan2(d,p),this._z=Math.atan2(u,o)):(this._x=0,this._z=Math.atan2(-a,l))):"YZX"===e?(this._z=Math.asin(r(u,-1,1)),Math.abs(u)<.99999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-h,o)):(this._x=0,this._y=Math.atan2(s,p))):"XZY"===e?(this._z=Math.asin(-r(a,-1,1)),Math.abs(a)<.99999?(this._x=Math.atan2(d,l),this._y=Math.atan2(s,o)):(this._x=Math.atan2(-c,p),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+e),this._order=e,!1!==n&&this.onChangeCallback(),this},setFromQuaternion:function(){var t=new Qe;return function(e,n,r){return t.makeRotationFromQuaternion(e),this.setFromRotationMatrix(t,n,r)}}(),setFromVector3:function(t,e){return this.set(t.x,t.y,t.z,e||this._order)},reorder:(Tn=new Je,function(t){return Tn.setFromEuler(this),this.setFromQuaternion(Tn,t)}),equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order},fromArray:function(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this.onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t},toVector3:function(t){return t?t.set(this._x,this._y,this._z):new $e(this._x,this._y,this._z)},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){}}),Object.assign(Rn.prototype,{set:function(t){this.mask=1<<t|0},enable:function(t){this.mask|=1<<t|0},toggle:function(t){this.mask^=1<<t|0},disable:function(t){this.mask&=~(1<<t|0)},test:function(t){return 0!=(this.mask&t.mask)}});var Ln,In,Nn,Dn,kn=0;function Fn(){Object.defineProperty(this,"id",{value:kn++}),this.uuid=Ke.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Fn.DefaultUp.clone();var t=new $e,e=new On,n=new Je,r=new $e(1,1,1);e.onChange(function(){n.setFromEuler(e,!1)}),n.onChange(function(){e.setFromQuaternion(n,void 0,!1)}),Object.defineProperties(this,{position:{enumerable:!0,value:t},rotation:{enumerable:!0,value:e},quaternion:{enumerable:!0,value:n},scale:{enumerable:!0,value:r},modelViewMatrix:{value:new Qe},normalMatrix:{value:new tn}}),this.matrix=new Qe,this.matrixWorld=new Qe,this.matrixAutoUpdate=Fn.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Rn,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}Fn.DefaultUp=new $e(0,1,0),Fn.DefaultMatrixAutoUpdate=!0,Fn.prototype=Object.assign(Object.create(r.prototype),{constructor:Fn,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(t){this.matrix.multiplyMatrices(t,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(t){return this.quaternion.premultiply(t),this},setRotationFromAxisAngle:function(t,e){this.quaternion.setFromAxisAngle(t,e)},setRotationFromEuler:function(t){this.quaternion.setFromEuler(t,!0)},setRotationFromMatrix:function(t){this.quaternion.setFromRotationMatrix(t)},setRotationFromQuaternion:function(t){this.quaternion.copy(t)},rotateOnAxis:(Dn=new Je,function(t,e){return Dn.setFromAxisAngle(t,e),this.quaternion.multiply(Dn),this}),rotateOnWorldAxis:function(){var t=new Je;return function(e,n){return t.setFromAxisAngle(e,n),this.quaternion.premultiply(t),this}}(),rotateX:function(){var t=new $e(1,0,0);return function(e){return this.rotateOnAxis(t,e)}}(),rotateY:function(){var t=new $e(0,1,0);return function(e){return this.rotateOnAxis(t,e)}}(),rotateZ:function(){var t=new $e(0,0,1);return function(e){return this.rotateOnAxis(t,e)}}(),translateOnAxis:function(){var t=new $e;return function(e,n){return t.copy(e).applyQuaternion(this.quaternion),this.position.add(t.multiplyScalar(n)),this}}(),translateX:function(){var t=new $e(1,0,0);return function(e){return this.translateOnAxis(t,e)}}(),translateY:function(){var t=new $e(0,1,0);return function(e){return this.translateOnAxis(t,e)}}(),translateZ:function(){var t=new $e(0,0,1);return function(e){return this.translateOnAxis(t,e)}}(),localToWorld:function(t){return t.applyMatrix4(this.matrixWorld)},worldToLocal:(Nn=new Qe,function(t){return t.applyMatrix4(Nn.getInverse(this.matrixWorld))}),lookAt:function(){var t=new Je,e=new Qe,n=new $e,r=new $e;return function(i,o,a){i.isVector3?n.copy(i):n.set(i,o,a);var s=this.parent;this.updateWorldMatrix(!0,!1),r.setFromMatrixPosition(this.matrixWorld),this.isCamera?e.lookAt(r,n,this.up):e.lookAt(n,r,this.up),this.quaternion.setFromRotationMatrix(e),s&&(e.extractRotation(s.matrixWorld),t.setFromRotationMatrix(e),this.quaternion.premultiply(t.inverse()))}}(),add:function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,t.dispatchEvent({type:"added"}),this.children.push(t)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)},remove:function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}var n=this.children.indexOf(t);return-1!==n&&(t.parent=null,t.dispatchEvent({type:"removed"}),this.children.splice(n,1)),this},getObjectById:function(t){return this.getObjectByProperty("id",t)},getObjectByName:function(t){return this.getObjectByProperty("name",t)},getObjectByProperty:function(t,e){if(this[t]===e)return this;for(var n=0,r=this.children.length;n<r;n++){var i=this.children[n].getObjectByProperty(t,e);if(void 0!==i)return i}},getWorldPosition:function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),t=new $e),this.updateMatrixWorld(!0),t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:(Ln=new $e,In=new $e,function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),t=new Je),this.updateMatrixWorld(!0),this.matrixWorld.decompose(Ln,t,In),t}),getWorldScale:function(){var t=new $e,e=new Je;return function(n){return void 0===n&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),n=new $e),this.updateMatrixWorld(!0),this.matrixWorld.decompose(t,e,n),n}}(),getWorldDirection:function(t){void 0===t&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),t=new $e),this.updateMatrixWorld(!0);var e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()},raycast:function(){},traverse:function(t){t(this);for(var e=this.children,n=0,r=e.length;n<r;n++)e[n].traverse(t)},traverseVisible:function(t){if(!1!==this.visible){t(this);for(var e=this.children,n=0,r=e.length;n<r;n++)e[n].traverseVisible(t)}},traverseAncestors:function(t){var e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);for(var e=this.children,n=0,r=e.length;n<r;n++)e[n].updateMatrixWorld(t)},updateWorldMatrix:function(t,e){var n=this.parent;if(!0===t&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===e)for(var r=this.children,i=0,o=r.length;i<o;i++)r[i].updateWorldMatrix(!1,!0)},toJSON:function(t){var e=void 0===t||"string"==typeof t,n={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var r={};function i(e,n){return void 0===e[n.uuid]&&(e[n.uuid]=n.toJSON(t)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isMesh||this.isLine||this.isPoints){r.geometry=i(t.geometries,this.geometry);var o=this.geometry.parameters;if(void 0!==o&&void 0!==o.shapes){var a=o.shapes;if(Array.isArray(a))for(var s=0,u=a.length;s<u;s++)i(t.shapes,a[s]);else i(t.shapes,a)}}if(void 0!==this.material)if(Array.isArray(this.material)){var l=[];for(s=0,u=this.material.length;s<u;s++)l.push(i(t.materials,this.material[s]));r.material=l}else r.material=i(t.materials,this.material);if(this.children.length>0)for(r.children=[],s=0;s<this.children.length;s++)r.children.push(this.children[s].toJSON(t).object);if(e){var c=f(t.geometries),h=f(t.materials),d=f(t.textures),p=f(t.images);a=f(t.shapes),c.length>0&&(n.geometries=c),h.length>0&&(n.materials=h),d.length>0&&(n.textures=d),p.length>0&&(n.images=p),a.length>0&&(n.shapes=a)}return n.object=r,n;function f(t){var e=[];for(var n in t){var r=t[n];delete r.metadata,e.push(r)}return e}},clone:function(t){return(new this.constructor).copy(this,t)},copy:function(t,e){if(void 0===e&&(e=!0),this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(var n=0;n<t.children.length;n++)this.add(t.children[n].clone());return this}});var jn,Un,Bn=0;function Gn(){Object.defineProperty(this,"id",{value:Bn+=2}),this.uuid=Ke.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}function Vn(t,e,n){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=!0===n,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function zn(t,e,n){Vn.call(this,new Int8Array(t),e,n)}function Hn(t,e,n){Vn.call(this,new Uint8Array(t),e,n)}function Wn(t,e,n){Vn.call(this,new Uint8ClampedArray(t),e,n)}function qn(t,e,n){Vn.call(this,new Int16Array(t),e,n)}function Xn(t,e,n){Vn.call(this,new Uint16Array(t),e,n)}function Yn(t,e,n){Vn.call(this,new Int32Array(t),e,n)}function Kn(t,e,n){Vn.call(this,new Uint32Array(t),e,n)}function Zn(t,e,n){Vn.call(this,new Float32Array(t),e,n)}function Qn(t,e,n){Vn.call(this,new Float64Array(t),e,n)}function Jn(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function $n(t){if(0===t.length)return-1/0;for(var e=t[0],n=1,r=t.length;n<r;++n)t[n]>e&&(e=t[n]);return e}Gn.prototype=Object.assign(Object.create(r.prototype),{constructor:Gn,isGeometry:!0,applyMatrix:function(t){for(var e=(new tn).getNormalMatrix(t),n=0,r=this.vertices.length;n<r;n++)this.vertices[n].applyMatrix4(t);for(n=0,r=this.faces.length;n<r;n++){var i=this.faces[n];i.normal.applyMatrix3(e).normalize();for(var o=0,a=i.vertexNormals.length;o<a;o++)i.vertexNormals[o].applyMatrix3(e).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(){var t=new Qe;return function(e){return t.makeRotationX(e),this.applyMatrix(t),this}}(),rotateY:function(){var t=new Qe;return function(e){return t.makeRotationY(e),this.applyMatrix(t),this}}(),rotateZ:function(){var t=new Qe;return function(e){return t.makeRotationZ(e),this.applyMatrix(t),this}}(),translate:function(){var t=new Qe;return function(e,n,r){return t.makeTranslation(e,n,r),this.applyMatrix(t),this}}(),scale:function(){var t=new Qe;return function(e,n,r){return t.makeScale(e,n,r),this.applyMatrix(t),this}}(),lookAt:(Un=new Fn,function(t){Un.lookAt(t),Un.updateMatrix(),this.applyMatrix(Un.matrix)}),fromBufferGeometry:function(t){var e=this,n=null!==t.index?t.index.array:void 0,r=t.attributes,i=r.position.array,o=void 0!==r.normal?r.normal.array:void 0,a=void 0!==r.color?r.color.array:void 0,s=void 0!==r.uv?r.uv.array:void 0,u=void 0!==r.uv2?r.uv2.array:void 0;void 0!==u&&(this.faceVertexUvs[1]=[]);for(var l=[],c=[],h=[],d=0,p=0;d<i.length;d+=3,p+=2)e.vertices.push(new $e(i[d],i[d+1],i[d+2])),void 0!==o&&l.push(new $e(o[d],o[d+1],o[d+2])),void 0!==a&&e.colors.push(new Sn(a[d],a[d+1],a[d+2])),void 0!==s&&c.push(new Ze(s[p],s[p+1])),void 0!==u&&h.push(new Ze(u[p],u[p+1]));function f(t,n,r,i){var d=new Pn(t,n,r,void 0!==o?[l[t].clone(),l[n].clone(),l[r].clone()]:[],void 0!==a?[e.colors[t].clone(),e.colors[n].clone(),e.colors[r].clone()]:[],i);e.faces.push(d),void 0!==s&&e.faceVertexUvs[0].push([c[t].clone(),c[n].clone(),c[r].clone()]),void 0!==u&&e.faceVertexUvs[1].push([h[t].clone(),h[n].clone(),h[r].clone()])}var m=t.groups;if(m.length>0)for(d=0;d<m.length;d++)for(var v=m[d],g=v.start,y=(p=g,g+v.count);p<y;p+=3)void 0!==n?f(n[p],n[p+1],n[p+2],v.materialIndex):f(p,p+1,p+2,v.materialIndex);else if(void 0!==n)for(d=0;d<n.length;d+=3)f(n[d],n[d+1],n[d+2]);else for(d=0;d<i.length/3;d+=3)f(d,d+1,d+2);return this.computeFaceNormals(),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this},center:(jn=new $e,function(){return this.computeBoundingBox(),this.boundingBox.getCenter(jn).negate(),this.translate(jn.x,jn.y,jn.z),this}),normalize:function(){this.computeBoundingSphere();var t=this.boundingSphere.center,e=this.boundingSphere.radius,n=0===e?1:1/e,r=new Qe;return r.set(n,0,0,-n*t.x,0,n,0,-n*t.y,0,0,n,-n*t.z,0,0,0,1),this.applyMatrix(r),this},computeFaceNormals:function(){for(var t=new $e,e=new $e,n=0,r=this.faces.length;n<r;n++){var i=this.faces[n],o=this.vertices[i.a],a=this.vertices[i.b];t.subVectors(this.vertices[i.c],a),e.subVectors(o,a),t.cross(e),t.normalize(),i.normal.copy(t)}},computeVertexNormals:function(t){var e,n,r,i,o,a;for(void 0===t&&(t=!0),a=new Array(this.vertices.length),e=0,n=this.vertices.length;e<n;e++)a[e]=new $e;if(t){var s,u,l=new $e,c=new $e;for(r=0,i=this.faces.length;r<i;r++)s=this.vertices[(o=this.faces[r]).a],l.subVectors(this.vertices[o.c],u=this.vertices[o.b]),c.subVectors(s,u),l.cross(c),a[o.a].add(l),a[o.b].add(l),a[o.c].add(l)}else for(this.computeFaceNormals(),r=0,i=this.faces.length;r<i;r++)a[(o=this.faces[r]).a].add(o.normal),a[o.b].add(o.normal),a[o.c].add(o.normal);for(e=0,n=this.vertices.length;e<n;e++)a[e].normalize();for(r=0,i=this.faces.length;r<i;r++){var h=(o=this.faces[r]).vertexNormals;3===h.length?(h[0].copy(a[o.a]),h[1].copy(a[o.b]),h[2].copy(a[o.c])):(h[0]=a[o.a].clone(),h[1]=a[o.b].clone(),h[2]=a[o.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var t,e,n;for(this.computeFaceNormals(),t=0,e=this.faces.length;t<e;t++){var r=(n=this.faces[t]).vertexNormals;3===r.length?(r[0].copy(n.normal),r[1].copy(n.normal),r[2].copy(n.normal)):(r[0]=n.normal.clone(),r[1]=n.normal.clone(),r[2]=n.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var t,e,n,r,i;for(n=0,r=this.faces.length;n<r;n++)for((i=this.faces[n]).__originalFaceNormal?i.__originalFaceNormal.copy(i.normal):i.__originalFaceNormal=i.normal.clone(),i.__originalVertexNormals||(i.__originalVertexNormals=[]),t=0,e=i.vertexNormals.length;t<e;t++)i.__originalVertexNormals[t]?i.__originalVertexNormals[t].copy(i.vertexNormals[t]):i.__originalVertexNormals[t]=i.vertexNormals[t].clone();var o=new Gn;for(o.faces=this.faces,t=0,e=this.morphTargets.length;t<e;t++){if(!this.morphNormals[t]){this.morphNormals[t]={},this.morphNormals[t].faceNormals=[],this.morphNormals[t].vertexNormals=[];var a=this.morphNormals[t].faceNormals,s=this.morphNormals[t].vertexNormals;for(n=0,r=this.faces.length;n<r;n++)u=new $e,l={a:new $e,b:new $e,c:new $e},a.push(u),s.push(l)}var u,l,c=this.morphNormals[t];for(o.vertices=this.morphTargets[t].vertices,o.computeFaceNormals(),o.computeVertexNormals(),n=0,r=this.faces.length;n<r;n++)l=c.vertexNormals[n],(u=c.faceNormals[n]).copy((i=this.faces[n]).normal),l.a.copy(i.vertexNormals[0]),l.b.copy(i.vertexNormals[1]),l.c.copy(i.vertexNormals[2])}for(n=0,r=this.faces.length;n<r;n++)(i=this.faces[n]).normal=i.__originalFaceNormal,i.vertexNormals=i.__originalVertexNormals},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new fn),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new mn),this.boundingSphere.setFromPoints(this.vertices)},merge:function(t,e,n){if(t&&t.isGeometry){var r,i=this.vertices.length,o=this.vertices,a=t.vertices,s=this.faces,u=t.faces,l=this.faceVertexUvs[0],c=t.faceVertexUvs[0],h=this.colors,d=t.colors;void 0===n&&(n=0),void 0!==e&&(r=(new tn).getNormalMatrix(e));for(var p=0,f=a.length;p<f;p++){var m=a[p].clone();void 0!==e&&m.applyMatrix4(e),o.push(m)}for(p=0,f=d.length;p<f;p++)h.push(d[p].clone());for(p=0,f=u.length;p<f;p++){var v,g,y=u[p],_=y.vertexNormals,b=y.vertexColors;(v=new Pn(y.a+i,y.b+i,y.c+i)).normal.copy(y.normal),void 0!==r&&v.normal.applyMatrix3(r).normalize();for(var w=0,x=_.length;w<x;w++)g=_[w].clone(),void 0!==r&&g.applyMatrix3(r).normalize(),v.vertexNormals.push(g);for(v.color.copy(y.color),w=0,x=b.length;w<x;w++)v.vertexColors.push(b[w].clone());v.materialIndex=y.materialIndex+n,s.push(v)}for(p=0,f=c.length;p<f;p++){var E=c[p],S=[];if(void 0!==E){for(w=0,x=E.length;w<x;w++)S.push(E[w].clone());l.push(S)}}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",t)},mergeMesh:function(t){t&&t.isMesh?(t.matrixAutoUpdate&&t.updateMatrix(),this.merge(t.geometry,t.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",t)},mergeVertices:function(){var t,e,n,r,i,o,a,s,u={},l=[],c=[],h=Math.pow(10,4);for(n=0,r=this.vertices.length;n<r;n++)t=this.vertices[n],void 0===u[e=Math.round(t.x*h)+"_"+Math.round(t.y*h)+"_"+Math.round(t.z*h)]?(u[e]=n,l.push(this.vertices[n]),c[n]=l.length-1):c[n]=c[u[e]];var d=[];for(n=0,r=this.faces.length;n<r;n++){(i=this.faces[n]).a=c[i.a],i.b=c[i.b],i.c=c[i.c],o=[i.a,i.b,i.c];for(var p=0;p<3;p++)if(o[p]===o[(p+1)%3]){d.push(n);break}}for(n=d.length-1;n>=0;n--){var f=d[n];for(this.faces.splice(f,1),a=0,s=this.faceVertexUvs.length;a<s;a++)this.faceVertexUvs[a].splice(f,1)}var m=this.vertices.length-l.length;return this.vertices=l,m},setFromPoints:function(t){this.vertices=[];for(var e=0,n=t.length;e<n;e++){var r=t[e];this.vertices.push(new $e(r.x,r.y,r.z||0))}return this},sortFacesByMaterialIndex:function(){for(var t=this.faces,e=t.length,n=0;n<e;n++)t[n]._id=n;t.sort(function(t,e){return t.materialIndex-e.materialIndex});var r,i,o=this.faceVertexUvs[0],a=this.faceVertexUvs[1];for(o&&o.length===e&&(r=[]),a&&a.length===e&&(i=[]),n=0;n<e;n++){var s=t[n]._id;r&&r.push(o[s]),i&&i.push(a[s])}r&&(this.faceVertexUvs[0]=r),i&&(this.faceVertexUvs[1]=i)},toJSON:function(){var t={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),void 0!==this.parameters){var e=this.parameters;for(var n in e)void 0!==e[n]&&(t[n]=e[n]);return t}for(var r=[],i=0;i<this.vertices.length;i++){var o=this.vertices[i];r.push(o.x,o.y,o.z)}var a=[],s=[],u={},l=[],c={},h=[],d={};for(i=0;i<this.faces.length;i++){var p=this.faces[i],f=void 0!==this.faceVertexUvs[0][i],m=p.normal.length()>0,v=p.vertexNormals.length>0,g=1!==p.color.r||1!==p.color.g||1!==p.color.b,y=p.vertexColors.length>0,_=0;if(_=E(_=E(_=E(_=E(_=E(_=E(_=E(_=E(_,0,0),1,!0),2,!1),3,f),4,m),5,v),6,g),7,y),a.push(_),a.push(p.a,p.b,p.c),a.push(p.materialIndex),f){var b=this.faceVertexUvs[0][i];a.push(M(b[0]),M(b[1]),M(b[2]))}if(m&&a.push(S(p.normal)),v){var w=p.vertexNormals;a.push(S(w[0]),S(w[1]),S(w[2]))}if(g&&a.push(T(p.color)),y){var x=p.vertexColors;a.push(T(x[0]),T(x[1]),T(x[2]))}}function E(t,e,n){return n?t|1<<e:t&~(1<<e)}function S(t){var e=t.x.toString()+t.y.toString()+t.z.toString();return void 0!==u[e]?u[e]:(u[e]=s.length/3,s.push(t.x,t.y,t.z),u[e])}function T(t){var e=t.r.toString()+t.g.toString()+t.b.toString();return void 0!==c[e]?c[e]:(c[e]=l.length,l.push(t.getHex()),c[e])}function M(t){var e=t.x.toString()+t.y.toString();return void 0!==d[e]?d[e]:(d[e]=h.length/2,h.push(t.x,t.y),d[e])}return t.data={},t.data.vertices=r,t.data.normals=s,l.length>0&&(t.data.colors=l),h.length>0&&(t.data.uvs=[h]),t.data.faces=a,t},clone:function(){return(new Gn).copy(this)},copy:function(t){var e,n,r,i,o,a;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=t.name;var s=t.vertices;for(e=0,n=s.length;e<n;e++)this.vertices.push(s[e].clone());var u=t.colors;for(e=0,n=u.length;e<n;e++)this.colors.push(u[e].clone());var l=t.faces;for(e=0,n=l.length;e<n;e++)this.faces.push(l[e].clone());for(e=0,n=t.faceVertexUvs.length;e<n;e++){var c=t.faceVertexUvs[e];for(void 0===this.faceVertexUvs[e]&&(this.faceVertexUvs[e]=[]),r=0,i=c.length;r<i;r++){var h=c[r],d=[];for(o=0,a=h.length;o<a;o++)d.push(h[o].clone());this.faceVertexUvs[e].push(d)}}var p=t.morphTargets;for(e=0,n=p.length;e<n;e++){var f={};if(f.name=p[e].name,void 0!==p[e].vertices)for(f.vertices=[],r=0,i=p[e].vertices.length;r<i;r++)f.vertices.push(p[e].vertices[r].clone());if(void 0!==p[e].normals)for(f.normals=[],r=0,i=p[e].normals.length;r<i;r++)f.normals.push(p[e].normals[r].clone());this.morphTargets.push(f)}var m=t.morphNormals;for(e=0,n=m.length;e<n;e++){var v={};if(void 0!==m[e].vertexNormals)for(v.vertexNormals=[],r=0,i=m[e].vertexNormals.length;r<i;r++){var g=m[e].vertexNormals[r],y={};y.a=g.a.clone(),y.b=g.b.clone(),y.c=g.c.clone(),v.vertexNormals.push(y)}if(void 0!==m[e].faceNormals)for(v.faceNormals=[],r=0,i=m[e].faceNormals.length;r<i;r++)v.faceNormals.push(m[e].faceNormals[r].clone());this.morphNormals.push(v)}var _=t.skinWeights;for(e=0,n=_.length;e<n;e++)this.skinWeights.push(_[e].clone());var b=t.skinIndices;for(e=0,n=b.length;e<n;e++)this.skinIndices.push(b[e].clone());var w=t.lineDistances;for(e=0,n=w.length;e<n;e++)this.lineDistances.push(w[e]);var x=t.boundingBox;null!==x&&(this.boundingBox=x.clone());var E=t.boundingSphere;return null!==E&&(this.boundingSphere=E.clone()),this.elementsNeedUpdate=t.elementsNeedUpdate,this.verticesNeedUpdate=t.verticesNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.lineDistancesNeedUpdate=t.lineDistancesNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(Vn.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(Vn.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setArray:function(t){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");return this.count=void 0!==t?t.length/this.itemSize:0,this.array=t,this},setDynamic:function(t){return this.dynamic=t,this},copy:function(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.dynamic=t.dynamic,this},copyAt:function(t,e,n){t*=this.itemSize,n*=e.itemSize;for(var r=0,i=this.itemSize;r<i;r++)this.array[t+r]=e.array[n+r];return this},copyArray:function(t){return this.array.set(t),this},copyColorsArray:function(t){for(var e=this.array,n=0,r=0,i=t.length;r<i;r++){var o=t[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),o=new Sn),e[n++]=o.r,e[n++]=o.g,e[n++]=o.b}return this},copyVector2sArray:function(t){for(var e=this.array,n=0,r=0,i=t.length;r<i;r++){var o=t[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),o=new Ze),e[n++]=o.x,e[n++]=o.y}return this},copyVector3sArray:function(t){for(var e=this.array,n=0,r=0,i=t.length;r<i;r++){var o=t[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),o=new $e),e[n++]=o.x,e[n++]=o.y,e[n++]=o.z}return this},copyVector4sArray:function(t){for(var e=this.array,n=0,r=0,i=t.length;r<i;r++){var o=t[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),o=new cn),e[n++]=o.x,e[n++]=o.y,e[n++]=o.z,e[n++]=o.w}return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},getX:function(t){return this.array[t*this.itemSize]},setX:function(t,e){return this.array[t*this.itemSize]=e,this},getY:function(t){return this.array[t*this.itemSize+1]},setY:function(t,e){return this.array[t*this.itemSize+1]=e,this},getZ:function(t){return this.array[t*this.itemSize+2]},setZ:function(t,e){return this.array[t*this.itemSize+2]=e,this},getW:function(t){return this.array[t*this.itemSize+3]},setW:function(t,e){return this.array[t*this.itemSize+3]=e,this},setXY:function(t,e,n){return this.array[0+(t*=this.itemSize)]=e,this.array[t+1]=n,this},setXYZ:function(t,e,n,r){return this.array[0+(t*=this.itemSize)]=e,this.array[t+1]=n,this.array[t+2]=r,this},setXYZW:function(t,e,n,r,i){return this.array[0+(t*=this.itemSize)]=e,this.array[t+1]=n,this.array[t+2]=r,this.array[t+3]=i,this},onUpload:function(t){return this.onUploadCallback=t,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)}}),(zn.prototype=Object.create(Vn.prototype)).constructor=zn,(Hn.prototype=Object.create(Vn.prototype)).constructor=Hn,(Wn.prototype=Object.create(Vn.prototype)).constructor=Wn,(qn.prototype=Object.create(Vn.prototype)).constructor=qn,(Xn.prototype=Object.create(Vn.prototype)).constructor=Xn,(Yn.prototype=Object.create(Vn.prototype)).constructor=Yn,(Kn.prototype=Object.create(Vn.prototype)).constructor=Kn,(Zn.prototype=Object.create(Vn.prototype)).constructor=Zn,(Qn.prototype=Object.create(Vn.prototype)).constructor=Qn,Object.assign(Jn.prototype,{computeGroups:function(t){for(var e,n=[],r=void 0,i=t.faces,o=0;o<i.length;o++){var a=i[o];a.materialIndex!==r&&(r=a.materialIndex,void 0!==e&&(e.count=3*o-e.start,n.push(e)),e={start:3*o,materialIndex:r})}void 0!==e&&(e.count=3*o-e.start,n.push(e)),this.groups=n},fromGeometry:function(t){var e,n=t.faces,r=t.vertices,i=t.faceVertexUvs,o=i[0]&&i[0].length>0,a=i[1]&&i[1].length>0,s=t.morphTargets,u=s.length;if(u>0){e=[];for(var l=0;l<u;l++)e[l]={name:s[l].name,data:[]};this.morphTargets.position=e}var c,h=t.morphNormals,d=h.length;if(d>0){for(c=[],l=0;l<d;l++)c[l]={name:h[l].name,data:[]};this.morphTargets.normal=c}var p=t.skinIndices,f=t.skinWeights,m=p.length===r.length,v=f.length===r.length;for(r.length>0&&0===n.length&&console.error("THREE.DirectGeometry: Faceless geometries are not supported."),l=0;l<n.length;l++){var g=n[l];this.vertices.push(r[g.a],r[g.b],r[g.c]);var y=g.vertexNormals;if(3===y.length)this.normals.push(y[0],y[1],y[2]);else{var _=g.normal;this.normals.push(_,_,_)}var b,w=g.vertexColors;if(3===w.length)this.colors.push(w[0],w[1],w[2]);else{var x=g.color;this.colors.push(x,x,x)}!0===o&&(void 0!==(b=i[0][l])?this.uvs.push(b[0],b[1],b[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",l),this.uvs.push(new Ze,new Ze,new Ze))),!0===a&&(void 0!==(b=i[1][l])?this.uvs2.push(b[0],b[1],b[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",l),this.uvs2.push(new Ze,new Ze,new Ze)));for(var E=0;E<u;E++){var S=s[E].vertices;e[E].data.push(S[g.a],S[g.b],S[g.c])}for(E=0;E<d;E++){var T=h[E].vertexNormals[l];c[E].data.push(T.a,T.b,T.c)}m&&this.skinIndices.push(p[g.a],p[g.b],p[g.c]),v&&this.skinWeights.push(f[g.a],f[g.b],f[g.c])}return this.computeGroups(t),this.verticesNeedUpdate=t.verticesNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this}});var tr=1;function er(){Object.defineProperty(this,"id",{value:tr+=2}),this.uuid=Ke.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}function nr(t,e,n,r,i,o){Gn.call(this),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:r,heightSegments:i,depthSegments:o},this.fromBufferGeometry(new rr(t,e,n,r,i,o)),this.mergeVertices()}function rr(t,e,n,r,i,o){er.call(this),this.type="BoxBufferGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:r,heightSegments:i,depthSegments:o};var a=this;t=t||1,e=e||1,n=n||1,r=Math.floor(r)||1,i=Math.floor(i)||1;var s=[],u=[],l=[],c=[],h=0,d=0;function p(t,e,n,r,i,o,p,f,m,v,g){var y,_,b=o/m,w=p/v,x=o/2,E=p/2,S=f/2,T=m+1,M=v+1,C=0,A=0,P=new $e;for(_=0;_<M;_++){var O=_*w-E;for(y=0;y<T;y++)P[t]=(y*b-x)*r,P[e]=O*i,P[n]=S,u.push(P.x,P.y,P.z),P[t]=0,P[e]=0,P[n]=f>0?1:-1,l.push(P.x,P.y,P.z),c.push(y/m),c.push(1-_/v),C+=1}for(_=0;_<v;_++)for(y=0;y<m;y++){var R=h+y+T*(_+1),L=h+(y+1)+T*(_+1),I=h+(y+1)+T*_;s.push(h+y+T*_,R,I),s.push(R,L,I),A+=6}a.addGroup(d,A,g),d+=A,h+=C}p("z","y","x",-1,-1,n,e,t,o=Math.floor(o)||1,i,0),p("z","y","x",1,-1,n,e,-t,o,i,1),p("x","z","y",1,1,t,n,e,r,o,2),p("x","z","y",1,-1,t,n,-e,r,o,3),p("x","y","z",1,-1,t,e,n,r,i,4),p("x","y","z",-1,-1,t,e,-n,r,i,5),this.setIndex(s),this.addAttribute("position",new Zn(u,3)),this.addAttribute("normal",new Zn(l,3)),this.addAttribute("uv",new Zn(c,2))}function ir(t,e,n,r){Gn.call(this),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:r},this.fromBufferGeometry(new or(t,e,n,r)),this.mergeVertices()}function or(t,e,n,r){er.call(this),this.type="PlaneBufferGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:r};var i,o,a=(t=t||1)/2,s=(e=e||1)/2,u=Math.floor(n)||1,l=Math.floor(r)||1,c=u+1,h=l+1,d=t/u,p=e/l,f=[],m=[],v=[],g=[];for(o=0;o<h;o++){var y=o*p-s;for(i=0;i<c;i++)m.push(i*d-a,-y,0),v.push(0,0,1),g.push(i/u),g.push(1-o/l)}for(o=0;o<l;o++)for(i=0;i<u;i++){var _=i+c*(o+1),b=i+1+c*(o+1),w=i+1+c*o;f.push(i+c*o,_,w),f.push(_,b,w)}this.setIndex(f),this.addAttribute("position",new Zn(m,3)),this.addAttribute("normal",new Zn(v,3)),this.addAttribute("uv",new Zn(g,2))}er.prototype=Object.assign(Object.create(r.prototype),{constructor:er,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(t){this.index=Array.isArray(t)?new($n(t)>65535?Kn:Xn)(t,1):t},addAttribute:function(t,e){return e&&e.isBufferAttribute||e&&e.isInterleavedBufferAttribute?"index"===t?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(e),this):(this.attributes[t]=e,this):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.addAttribute(t,new Vn(arguments[1],arguments[2])))},getAttribute:function(t){return this.attributes[t]},removeAttribute:function(t){return delete this.attributes[t],this},addGroup:function(t,e,n){this.groups.push({start:t,count:e,materialIndex:void 0!==n?n:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(t,e){this.drawRange.start=t,this.drawRange.count=e},applyMatrix:function(t){var e=this.attributes.position;void 0!==e&&(t.applyToBufferAttribute(e),e.needsUpdate=!0);var n=this.attributes.normal;return void 0!==n&&((new tn).getNormalMatrix(t).applyToBufferAttribute(n),n.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(){var t=new Qe;return function(e){return t.makeRotationX(e),this.applyMatrix(t),this}}(),rotateY:function(){var t=new Qe;return function(e){return t.makeRotationY(e),this.applyMatrix(t),this}}(),rotateZ:function(){var t=new Qe;return function(e){return t.makeRotationZ(e),this.applyMatrix(t),this}}(),translate:function(){var t=new Qe;return function(e,n,r){return t.makeTranslation(e,n,r),this.applyMatrix(t),this}}(),scale:function(){var t=new Qe;return function(e,n,r){return t.makeScale(e,n,r),this.applyMatrix(t),this}}(),lookAt:function(){var t=new Fn;return function(e){t.lookAt(e),t.updateMatrix(),this.applyMatrix(t.matrix)}}(),center:function(){var t=new $e;return function(){return this.computeBoundingBox(),this.boundingBox.getCenter(t).negate(),this.translate(t.x,t.y,t.z),this}}(),setFromObject:function(t){var e=t.geometry;if(t.isPoints||t.isLine){var n=new Zn(3*e.vertices.length,3),r=new Zn(3*e.colors.length,3);if(this.addAttribute("position",n.copyVector3sArray(e.vertices)),this.addAttribute("color",r.copyColorsArray(e.colors)),e.lineDistances&&e.lineDistances.length===e.vertices.length){var i=new Zn(e.lineDistances.length,1);this.addAttribute("lineDistance",i.copyArray(e.lineDistances))}null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone())}else t.isMesh&&e&&e.isGeometry&&this.fromGeometry(e);return this},setFromPoints:function(t){for(var e=[],n=0,r=t.length;n<r;n++){var i=t[n];e.push(i.x,i.y,i.z||0)}return this.addAttribute("position",new Zn(e,3)),this},updateFromObject:function(t){var e,n=t.geometry;if(t.isMesh){var r=n.__directGeometry;if(!0===n.elementsNeedUpdate&&(r=void 0,n.elementsNeedUpdate=!1),void 0===r)return this.fromGeometry(n);r.verticesNeedUpdate=n.verticesNeedUpdate,r.normalsNeedUpdate=n.normalsNeedUpdate,r.colorsNeedUpdate=n.colorsNeedUpdate,r.uvsNeedUpdate=n.uvsNeedUpdate,r.groupsNeedUpdate=n.groupsNeedUpdate,n.verticesNeedUpdate=!1,n.normalsNeedUpdate=!1,n.colorsNeedUpdate=!1,n.uvsNeedUpdate=!1,n.groupsNeedUpdate=!1,n=r}return!0===n.verticesNeedUpdate&&(void 0!==(e=this.attributes.position)&&(e.copyVector3sArray(n.vertices),e.needsUpdate=!0),n.verticesNeedUpdate=!1),!0===n.normalsNeedUpdate&&(void 0!==(e=this.attributes.normal)&&(e.copyVector3sArray(n.normals),e.needsUpdate=!0),n.normalsNeedUpdate=!1),!0===n.colorsNeedUpdate&&(void 0!==(e=this.attributes.color)&&(e.copyColorsArray(n.colors),e.needsUpdate=!0),n.colorsNeedUpdate=!1),n.uvsNeedUpdate&&(void 0!==(e=this.attributes.uv)&&(e.copyVector2sArray(n.uvs),e.needsUpdate=!0),n.uvsNeedUpdate=!1),n.lineDistancesNeedUpdate&&(void 0!==(e=this.attributes.lineDistance)&&(e.copyArray(n.lineDistances),e.needsUpdate=!0),n.lineDistancesNeedUpdate=!1),n.groupsNeedUpdate&&(n.computeGroups(t.geometry),this.groups=n.groups,n.groupsNeedUpdate=!1),this},fromGeometry:function(t){return t.__directGeometry=(new Jn).fromGeometry(t),this.fromDirectGeometry(t.__directGeometry)},fromDirectGeometry:function(t){var e=new Float32Array(3*t.vertices.length);if(this.addAttribute("position",new Vn(e,3).copyVector3sArray(t.vertices)),t.normals.length>0){var n=new Float32Array(3*t.normals.length);this.addAttribute("normal",new Vn(n,3).copyVector3sArray(t.normals))}if(t.colors.length>0){var r=new Float32Array(3*t.colors.length);this.addAttribute("color",new Vn(r,3).copyColorsArray(t.colors))}if(t.uvs.length>0){var i=new Float32Array(2*t.uvs.length);this.addAttribute("uv",new Vn(i,2).copyVector2sArray(t.uvs))}if(t.uvs2.length>0){var o=new Float32Array(2*t.uvs2.length);this.addAttribute("uv2",new Vn(o,2).copyVector2sArray(t.uvs2))}for(var a in this.groups=t.groups,t.morphTargets){for(var s=[],u=t.morphTargets[a],l=0,c=u.length;l<c;l++){var h=u[l],d=new Zn(3*h.data.length,3);d.name=h.name,s.push(d.copyVector3sArray(h.data))}this.morphAttributes[a]=s}if(t.skinIndices.length>0){var p=new Zn(4*t.skinIndices.length,4);this.addAttribute("skinIndex",p.copyVector4sArray(t.skinIndices))}if(t.skinWeights.length>0){var f=new Zn(4*t.skinWeights.length,4);this.addAttribute("skinWeight",f.copyVector4sArray(t.skinWeights))}return null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new fn);var t=this.attributes.position;void 0!==t?this.boundingBox.setFromBufferAttribute(t):this.boundingBox.makeEmpty(),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){var t=new fn,e=new $e;return function(){null===this.boundingSphere&&(this.boundingSphere=new mn);var n=this.attributes.position;if(n){var r=this.boundingSphere.center;t.setFromBufferAttribute(n),t.getCenter(r);for(var i=0,o=0,a=n.count;o<a;o++)e.x=n.getX(o),e.y=n.getY(o),e.z=n.getZ(o),i=Math.max(i,r.distanceToSquared(e));this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var t=this.index,e=this.attributes;if(e.position){var n=e.position.array;if(void 0===e.normal)this.addAttribute("normal",new Vn(new Float32Array(n.length),3));else for(var r=e.normal.array,i=0,o=r.length;i<o;i++)r[i]=0;var a,s,u,l=e.normal.array,c=new $e,h=new $e,d=new $e,p=new $e,f=new $e;if(t){var m=t.array;for(i=0,o=t.count;i<o;i+=3)s=3*m[i+1],u=3*m[i+2],c.fromArray(n,a=3*m[i+0]),h.fromArray(n,s),d.fromArray(n,u),p.subVectors(d,h),f.subVectors(c,h),p.cross(f),l[a]+=p.x,l[a+1]+=p.y,l[a+2]+=p.z,l[s]+=p.x,l[s+1]+=p.y,l[s+2]+=p.z,l[u]+=p.x,l[u+1]+=p.y,l[u+2]+=p.z}else for(i=0,o=n.length;i<o;i+=9)c.fromArray(n,i),h.fromArray(n,i+3),d.fromArray(n,i+6),p.subVectors(d,h),f.subVectors(c,h),p.cross(f),l[i]=p.x,l[i+1]=p.y,l[i+2]=p.z,l[i+3]=p.x,l[i+4]=p.y,l[i+5]=p.z,l[i+6]=p.x,l[i+7]=p.y,l[i+8]=p.z;this.normalizeNormals(),e.normal.needsUpdate=!0}},merge:function(t,e){if(t&&t.isBufferGeometry){void 0===e&&(e=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var n=this.attributes;for(var r in n)if(void 0!==t.attributes[r])for(var i=n[r].array,o=t.attributes[r],a=o.array,s=0,u=o.itemSize*e;s<a.length;s++,u++)i[u]=a[s];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t)},normalizeNormals:function(){var t=new $e;return function(){for(var e=this.attributes.normal,n=0,r=e.count;n<r;n++)t.x=e.getX(n),t.y=e.getY(n),t.z=e.getZ(n),t.normalize(),e.setXYZ(n,t.x,t.y,t.z)}}(),toNonIndexed:function(){if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var t=new er,e=this.index.array,n=this.attributes;for(var r in n){for(var i=n[r],o=i.array,a=i.itemSize,s=new o.constructor(e.length*a),u=0,l=0,c=0,h=e.length;c<h;c++){u=e[c]*a;for(var d=0;d<a;d++)s[l++]=o[u++]}t.addAttribute(r,new Vn(s,a))}var p=this.groups;for(c=0,h=p.length;c<h;c++){var f=p[c];t.addGroup(f.start,f.count,f.materialIndex)}return t},toJSON:function(){var t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){var e=this.parameters;for(var n in e)void 0!==e[n]&&(t[n]=e[n]);return t}t.data={attributes:{}};var r=this.index;if(null!==r){var i=Array.prototype.slice.call(r.array);t.data.index={type:r.array.constructor.name,array:i}}var o=this.attributes;for(var n in o){var a=o[n];i=Array.prototype.slice.call(a.array),t.data.attributes[n]={itemSize:a.itemSize,type:a.array.constructor.name,array:i,normalized:a.normalized}}var s=this.groups;s.length>0&&(t.data.groups=JSON.parse(JSON.stringify(s)));var u=this.boundingSphere;return null!==u&&(t.data.boundingSphere={center:u.center.toArray(),radius:u.radius}),t},clone:function(){return(new er).copy(this)},copy:function(t){var e,n,r;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=t.name;var i=t.index;null!==i&&this.setIndex(i.clone());var o=t.attributes;for(e in o)this.addAttribute(e,o[e].clone());var a=t.morphAttributes;for(e in a){var s=[],u=a[e];for(n=0,r=u.length;n<r;n++)s.push(u[n].clone());this.morphAttributes[e]=s}var l=t.groups;for(n=0,r=l.length;n<r;n++){var c=l[n];this.addGroup(c.start,c.count,c.materialIndex)}var h=t.boundingBox;null!==h&&(this.boundingBox=h.clone());var d=t.boundingSphere;return null!==d&&(this.boundingSphere=d.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),(nr.prototype=Object.create(Gn.prototype)).constructor=nr,(rr.prototype=Object.create(er.prototype)).constructor=rr,(ir.prototype=Object.create(Gn.prototype)).constructor=ir,(or.prototype=Object.create(er.prototype)).constructor=or;var ar,sr,ur,lr,cr,hr,dr,pr,fr,mr,vr,gr,yr=0;function _r(){Object.defineProperty(this,"id",{value:yr++}),this.uuid=Ke.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.lights=!0,this.blending=D,this.side=M,this.flatShading=!1,this.vertexColors=R,this.opacity=1,this.transparent=!1,this.blendSrc=K,this.blendDst=Z,this.blendEquation=B,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=ot,this.depthTest=!0,this.depthWrite=!0,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.overdraw=0,this.visible=!0,this.userData={},this.needsUpdate=!0}function br(t){_r.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,void 0!==t&&(void 0!==t.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(t))}function wr(t,e){this.origin=void 0!==t?t:new $e,this.direction=void 0!==e?e:new $e}function xr(t,e,n){this.a=void 0!==t?t:new $e,this.b=void 0!==e?e:new $e,this.c=void 0!==n?n:new $e}function Er(t){_r.call(this),this.type="MeshBasicMaterial",this.color=new Sn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=ct,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.lights=!1,this.setValues(t)}function Sr(t,e){Fn.call(this),this.type="Mesh",this.geometry=void 0!==t?t:new er,this.material=void 0!==e?e:new Er({color:16777215*Math.random()}),this.drawMode=Ne,this.updateMorphTargets()}function Tr(t,e){return Math.abs(e[1])-Math.abs(t[1])}function Mr(t,e,n,r,i,o,a,s,u,l){ln.call(this,t=void 0!==t?t:[],e=void 0!==e?e:_t,n,r,i,o,a,s,u,l),this.flipY=!1}function Cr(t,e,n,r){ln.call(this,null),this.image={data:t,width:e,height:n,depth:r},this.magFilter=Pt,this.minFilter=Pt,this.generateMipmaps=!1,this.flipY=!1}_r.prototype=Object.assign(Object.create(r.prototype),{constructor:_r,isMaterial:!0,onBeforeCompile:function(){},setValues:function(t){if(void 0!==t)for(var e in t){var n=t[e];if(void 0!==n)if("shading"!==e){var r=this[e];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[e]="overdraw"===e?Number(n):n:console.warn("THREE."+this.type+": '"+e+"' is not a property of this material.")}else console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=n===P;else console.warn("THREE.Material: '"+e+"' parameter is undefined.")}},toJSON:function(t){var e=void 0===t||"string"==typeof t;e&&(t={textures:{},images:{}});var n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(t){var e=[];for(var n in t){var r=t[n];delete r.metadata,e.push(r)}return e}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearCoat&&(n.clearCoat=this.clearCoat),void 0!==this.clearCoatRoughness&&(n.clearCoatRoughness=this.clearCoatRoughness),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(t).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,n.reflectivity=this.reflectivity,void 0!==this.combine&&(n.combine=this.combine),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.size&&(n.size=this.size),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==D&&(n.blending=this.blending),!0===this.flatShading&&(n.flatShading=this.flatShading),this.side!==M&&(n.side=this.side),this.vertexColors!==R&&(n.vertexColors=this.vertexColors),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(n.morphTargets=!0),!0===this.skinning&&(n.skinning=!0),!1===this.visible&&(n.visible=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),e){var i=r(t.textures),o=r(t.images);i.length>0&&(n.textures=i),o.length>0&&(n.images=o)}return n},clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.name=t.name,this.fog=t.fog,this.lights=t.lights,this.blending=t.blending,this.side=t.side,this.flatShading=t.flatShading,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.premultipliedAlpha=t.premultipliedAlpha,this.overdraw=t.overdraw,this.visible=t.visible,this.userData=JSON.parse(JSON.stringify(t.userData)),this.clipShadows=t.clipShadows,this.clipIntersection=t.clipIntersection;var e=t.clippingPlanes,n=null;if(null!==e){var r=e.length;n=new Array(r);for(var i=0;i!==r;++i)n[i]=e[i].clone()}return this.clippingPlanes=n,this.shadowSide=t.shadowSide,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),(br.prototype=Object.create(_r.prototype)).constructor=br,br.prototype.isShaderMaterial=!0,br.prototype.copy=function(t){return _r.prototype.copy.call(this,t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=xn.clone(t.uniforms),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.lights=t.lights,this.clipping=t.clipping,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.extensions=t.extensions,this},br.prototype.toJSON=function(t){var e=_r.prototype.toJSON.call(this,t);for(var n in e.uniforms={},this.uniforms){var r=this.uniforms[n].value;e.uniforms[n]=r.isTexture?{type:"t",value:r.toJSON(t).uuid}:r.isColor?{type:"c",value:r.getHex()}:r.isVector2?{type:"v2",value:r.toArray()}:r.isVector3?{type:"v3",value:r.toArray()}:r.isVector4?{type:"v4",value:r.toArray()}:r.isMatrix4?{type:"m4",value:r.toArray()}:{value:r}}return Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,e},Object.assign(wr.prototype,{set:function(t,e){return this.origin.copy(t),this.direction.copy(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this},at:function(t,e){return void 0===e&&(console.warn("THREE.Ray: .at() target is now required"),e=new $e),e.copy(this.direction).multiplyScalar(t).add(this.origin)},lookAt:function(t){return this.direction.copy(t).sub(this.origin).normalize(),this},recast:function(){var t=new $e;return function(e){return this.origin.copy(this.at(e,t)),this}}(),closestPointToPoint:function(t,e){void 0===e&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),e=new $e),e.subVectors(t,this.origin);var n=e.dot(this.direction);return n<0?e.copy(this.origin):e.copy(this.direction).multiplyScalar(n).add(this.origin)},distanceToPoint:function(t){return Math.sqrt(this.distanceSqToPoint(t))},distanceSqToPoint:function(){var t=new $e;return function(e){var n=t.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):(t.copy(this.direction).multiplyScalar(n).add(this.origin),t.distanceToSquared(e))}}(),distanceSqToSegment:(sr=new $e,ur=new $e,lr=new $e,function(t,e,n,r){sr.copy(t).add(e).multiplyScalar(.5),ur.copy(e).sub(t).normalize(),lr.copy(this.origin).sub(sr);var i,o,a,s,u=.5*t.distanceTo(e),l=-this.direction.dot(ur),c=lr.dot(this.direction),h=-lr.dot(ur),d=lr.lengthSq(),p=Math.abs(1-l*l);if(p>0)if(o=l*c-h,s=u*p,(i=l*h-c)>=0)if(o>=-s)if(o<=s){var f=1/p;a=(i*=f)*(i+l*(o*=f)+2*c)+o*(l*i+o+2*h)+d}else o=u,a=-(i=Math.max(0,-(l*o+c)))*i+o*(o+2*h)+d;else o=-u,a=-(i=Math.max(0,-(l*o+c)))*i+o*(o+2*h)+d;else o<=-s?a=-(i=Math.max(0,-(-l*u+c)))*i+(o=i>0?-u:Math.min(Math.max(-u,-h),u))*(o+2*h)+d:o<=s?(i=0,a=(o=Math.min(Math.max(-u,-h),u))*(o+2*h)+d):a=-(i=Math.max(0,-(l*u+c)))*i+(o=i>0?u:Math.min(Math.max(-u,-h),u))*(o+2*h)+d;else o=l>0?-u:u,a=-(i=Math.max(0,-(l*o+c)))*i+o*(o+2*h)+d;return n&&n.copy(this.direction).multiplyScalar(i).add(this.origin),r&&r.copy(ur).multiplyScalar(o).add(sr),a}),intersectSphere:function(){var t=new $e;return function(e,n){t.subVectors(e.center,this.origin);var r=t.dot(this.direction),i=t.dot(t)-r*r,o=e.radius*e.radius;if(i>o)return null;var a=Math.sqrt(o-i),s=r-a,u=r+a;return s<0&&u<0?null:this.at(s<0?u:s,n)}}(),intersectsSphere:function(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius},distanceToPlane:function(t){var e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(t.normal)+t.constant)/e;return n>=0?n:null},intersectPlane:function(t,e){var n=this.distanceToPlane(t);return null===n?null:this.at(n,e)},intersectsPlane:function(t){var e=t.distanceToPoint(this.origin);return 0===e||t.normal.dot(this.direction)*e<0},intersectBox:function(t,e){var n,r,i,o,a,s,u=1/this.direction.x,l=1/this.direction.y,c=1/this.direction.z,h=this.origin;return u>=0?(n=(t.min.x-h.x)*u,r=(t.max.x-h.x)*u):(n=(t.max.x-h.x)*u,r=(t.min.x-h.x)*u),l>=0?(i=(t.min.y-h.y)*l,o=(t.max.y-h.y)*l):(i=(t.max.y-h.y)*l,o=(t.min.y-h.y)*l),n>o||i>r?null:((i>n||n!=n)&&(n=i),(o<r||r!=r)&&(r=o),c>=0?(a=(t.min.z-h.z)*c,s=(t.max.z-h.z)*c):(a=(t.max.z-h.z)*c,s=(t.min.z-h.z)*c),n>s||a>r?null:((a>n||n!=n)&&(n=a),(s<r||r!=r)&&(r=s),r<0?null:this.at(n>=0?n:r,e)))},intersectsBox:(ar=new $e,function(t){return null!==this.intersectBox(t,ar)}),intersectTriangle:function(){var t=new $e,e=new $e,n=new $e,r=new $e;return function(i,o,a,s,u){e.subVectors(o,i),n.subVectors(a,i),r.crossVectors(e,n);var l,c=this.direction.dot(r);if(c>0){if(s)return null;l=1}else{if(!(c<0))return null;l=-1,c=-c}t.subVectors(this.origin,i);var h=l*this.direction.dot(n.crossVectors(t,n));if(h<0)return null;var d=l*this.direction.dot(e.cross(t));if(d<0)return null;if(h+d>c)return null;var p=-l*t.dot(r);return p<0?null:this.at(p/c,u)}}(),applyMatrix4:function(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this},equals:function(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}}),Object.assign(xr,{getNormal:(hr=new $e,function(t,e,n,r){void 0===r&&(console.warn("THREE.Triangle: .getNormal() target is now required"),r=new $e),r.subVectors(n,e),hr.subVectors(t,e),r.cross(hr);var i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)}),getBarycoord:function(){var t=new $e,e=new $e,n=new $e;return function(r,i,o,a,s){t.subVectors(a,i),e.subVectors(o,i),n.subVectors(r,i);var u=t.dot(t),l=t.dot(e),c=t.dot(n),h=e.dot(e),d=e.dot(n),p=u*h-l*l;if(void 0===s&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),s=new $e),0===p)return s.set(-2,-1,-1);var f=1/p,m=(h*c-l*d)*f,v=(u*d-l*c)*f;return s.set(1-m-v,v,m)}}(),containsPoint:function(){var t=new $e;return function(e,n,r,i){return xr.getBarycoord(e,n,r,i,t),t.x>=0&&t.y>=0&&t.x+t.y<=1}}(),getUV:(cr=new $e,function(t,e,n,r,i,o,a,s){return this.getBarycoord(t,e,n,r,cr),s.set(0,0),s.addScaledVector(i,cr.x),s.addScaledVector(o,cr.y),s.addScaledVector(a,cr.z),s})}),Object.assign(xr.prototype,{set:function(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this},setFromPointsAndIndices:function(t,e,n,r){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[r]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this},getArea:function(){var t=new $e,e=new $e;return function(){return t.subVectors(this.c,this.b),e.subVectors(this.a,this.b),.5*t.cross(e).length()}}(),getMidpoint:function(t){return void 0===t&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),t=new $e),t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(t){return xr.getNormal(this.a,this.b,this.c,t)},getPlane:function(t){return void 0===t&&(console.warn("THREE.Triangle: .getPlane() target is now required"),t=new $e),t.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(t,e){return xr.getBarycoord(t,this.a,this.b,this.c,e)},containsPoint:function(t){return xr.containsPoint(t,this.a,this.b,this.c)},getUV:function(t,e,n,r,i){return xr.getUV(t,this.a,this.b,this.c,e,n,r,i)},intersectsBox:function(t){return t.intersectsTriangle(this)},closestPointToPoint:(dr=new $e,pr=new $e,fr=new $e,mr=new $e,vr=new $e,gr=new $e,function(t,e){void 0===e&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),e=new $e);var n,r,i=this.a,o=this.b,a=this.c;dr.subVectors(o,i),pr.subVectors(a,i),mr.subVectors(t,i);var s=dr.dot(mr),u=pr.dot(mr);if(s<=0&&u<=0)return e.copy(i);vr.subVectors(t,o);var l=dr.dot(vr),c=pr.dot(vr);if(l>=0&&c<=l)return e.copy(o);var h=s*c-l*u;if(h<=0&&s>=0&&l<=0)return n=s/(s-l),e.copy(i).addScaledVector(dr,n);gr.subVectors(t,a);var d=dr.dot(gr),p=pr.dot(gr);if(p>=0&&d<=p)return e.copy(a);var f=d*u-s*p;if(f<=0&&u>=0&&p<=0)return r=u/(u-p),e.copy(i).addScaledVector(pr,r);var m=l*p-d*c;if(m<=0&&c-l>=0&&d-p>=0)return fr.subVectors(a,o),r=(c-l)/(c-l+(d-p)),e.copy(o).addScaledVector(fr,r);var v=1/(m+f+h);return n=f*v,r=h*v,e.copy(i).addScaledVector(dr,n).addScaledVector(pr,r)}),equals:function(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}),(Er.prototype=Object.create(_r.prototype)).constructor=Er,Er.prototype.isMeshBasicMaterial=!0,Er.prototype.copy=function(t){return _r.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this},Sr.prototype=Object.assign(Object.create(Fn.prototype),{constructor:Sr,isMesh:!0,setDrawMode:function(t){this.drawMode=t},copy:function(t){return Fn.prototype.copy.call(this,t),this.drawMode=t.drawMode,void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this},updateMorphTargets:function(){var t,e,n,r=this.geometry;if(r.isBufferGeometry){var i=r.morphAttributes,o=Object.keys(i);if(o.length>0){var a=i[o[0]];if(void 0!==a)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},t=0,e=a.length;t<e;t++)n=a[t].name||String(t),this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}else{var s=r.morphTargets;if(void 0!==s&&s.length>0)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},t=0,e=s.length;t<e;t++)n=s[t].name||String(t),this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}},raycast:function(){var t=new Qe,e=new wr,n=new mn,r=new $e,i=new $e,o=new $e,a=new $e,s=new $e,u=new $e,l=new Ze,c=new Ze,h=new Ze,d=new $e,p=new $e;function f(t,e,n,r,i,o,a,s){if(null===(e.side===C?r.intersectTriangle(a,o,i,!0,s):r.intersectTriangle(i,o,a,e.side!==A,s)))return null;p.copy(s),p.applyMatrix4(t.matrixWorld);var u=n.ray.origin.distanceTo(p);return u<n.near||u>n.far?null:{distance:u,point:p.clone(),object:t}}function m(t,e,n,a,s,u,p,m,v){r.fromBufferAttribute(s,p),i.fromBufferAttribute(s,m),o.fromBufferAttribute(s,v);var g=f(t,e,n,a,r,i,o,d);if(g){u&&(l.fromBufferAttribute(u,p),c.fromBufferAttribute(u,m),h.fromBufferAttribute(u,v),g.uv=xr.getUV(d,r,i,o,l,c,h,new Ze));var y=new Pn(p,m,v);xr.getNormal(r,i,o,y.normal),g.face=y}return g}return function(p,v){var g,y=this.geometry,_=this.material,b=this.matrixWorld;if(void 0!==_&&(null===y.boundingSphere&&y.computeBoundingSphere(),n.copy(y.boundingSphere),n.applyMatrix4(b),!1!==p.ray.intersectsSphere(n)&&(t.getInverse(b),e.copy(p.ray).applyMatrix4(t),null===y.boundingBox||!1!==e.intersectsBox(y.boundingBox))))if(y.isBufferGeometry){var w,x,E,S,T,M,C,A,P,O=y.index,R=y.attributes.position,L=y.attributes.uv,I=y.groups,N=y.drawRange;if(null!==O)if(Array.isArray(_))for(S=0,M=I.length;S<M;S++)for(P=_[(A=I[S]).materialIndex],T=Math.max(A.start,N.start),C=Math.min(A.start+A.count,N.start+N.count);T<C;T+=3)w=O.getX(T),x=O.getX(T+1),E=O.getX(T+2),(g=m(this,P,p,e,R,L,w,x,E))&&(g.faceIndex=Math.floor(T/3),v.push(g));else for(S=Math.max(0,N.start),M=Math.min(O.count,N.start+N.count);S<M;S+=3)w=O.getX(S),x=O.getX(S+1),E=O.getX(S+2),(g=m(this,_,p,e,R,L,w,x,E))&&(g.faceIndex=Math.floor(S/3),v.push(g));else if(void 0!==R)if(Array.isArray(_))for(S=0,M=I.length;S<M;S++)for(P=_[(A=I[S]).materialIndex],T=Math.max(A.start,N.start),C=Math.min(A.start+A.count,N.start+N.count);T<C;T+=3)(g=m(this,P,p,e,R,L,w=T,x=T+1,E=T+2))&&(g.faceIndex=Math.floor(T/3),v.push(g));else for(S=Math.max(0,N.start),M=Math.min(R.count,N.start+N.count);S<M;S+=3)(g=m(this,_,p,e,R,L,w=S,x=S+1,E=S+2))&&(g.faceIndex=Math.floor(S/3),v.push(g))}else if(y.isGeometry){var D,k,F,j,U=Array.isArray(_),B=y.vertices,G=y.faces,V=y.faceVertexUvs[0];V.length>0&&(j=V);for(var z=0,H=G.length;z<H;z++){var W=G[z],q=U?_[W.materialIndex]:_;if(void 0!==q){if(D=B[W.a],k=B[W.b],F=B[W.c],!0===q.morphTargets){var X=y.morphTargets,Y=this.morphTargetInfluences;r.set(0,0,0),i.set(0,0,0),o.set(0,0,0);for(var K=0,Z=X.length;K<Z;K++){var Q=Y[K];if(0!==Q){var J=X[K].vertices;r.addScaledVector(a.subVectors(J[W.a],D),Q),i.addScaledVector(s.subVectors(J[W.b],k),Q),o.addScaledVector(u.subVectors(J[W.c],F),Q)}}r.add(D),i.add(k),o.add(F),D=r,k=i,F=o}if(g=f(this,q,p,e,D,k,F,d)){if(j&&j[z]){var $=j[z];l.copy($[0]),c.copy($[1]),h.copy($[2]),g.uv=xr.getUV(d,D,k,F,l,c,h,new Ze)}g.face=W,g.faceIndex=z,v.push(g)}}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),(Mr.prototype=Object.create(ln.prototype)).constructor=Mr,Mr.prototype.isCubeTexture=!0,Object.defineProperty(Mr.prototype,"images",{get:function(){return this.image},set:function(t){this.image=t}}),(Cr.prototype=Object.create(ln.prototype)).constructor=Cr,Cr.prototype.isDataTexture3D=!0;var Ar=new ln,Pr=new Cr,Or=new Mr;function Rr(){this.seq=[],this.map={}}var Lr=[],Ir=[],Nr=new Float32Array(16),Dr=new Float32Array(9),kr=new Float32Array(4);function Fr(t,e,n){var r=t[0];if(r<=0||r>0)return t;var i=e*n,o=Lr[i];if(void 0===o&&(o=new Float32Array(i),Lr[i]=o),0!==e){r.toArray(o,0);for(var a=1,s=0;a!==e;++a)t[a].toArray(o,s+=n)}return o}function jr(t,e){if(t.length!==e.length)return!1;for(var n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!1;return!0}function Ur(t,e){for(var n=0,r=e.length;n<r;n++)t[n]=e[n]}function Br(t,e){var n=Ir[e];void 0===n&&(n=new Int32Array(e),Ir[e]=n);for(var r=0;r!==e;++r)n[r]=t.allocTextureUnit();return n}function Gr(t,e){var n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function Vr(t,e){var n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function zr(t,e){var n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y||(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(jr(n,e))return;t.uniform2fv(this.addr,e),Ur(n,e)}}function Hr(t,e){var n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z||(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(void 0!==e.r)n[0]===e.r&&n[1]===e.g&&n[2]===e.b||(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(jr(n,e))return;t.uniform3fv(this.addr,e),Ur(n,e)}}function Wr(t,e){var n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z&&n[3]===e.w||(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(jr(n,e))return;t.uniform4fv(this.addr,e),Ur(n,e)}}function qr(t,e){var n=this.cache,r=e.elements;if(void 0===r){if(jr(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),Ur(n,e)}else{if(jr(n,r))return;kr.set(r),t.uniformMatrix2fv(this.addr,!1,kr),Ur(n,r)}}function Xr(t,e){var n=this.cache,r=e.elements;if(void 0===r){if(jr(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),Ur(n,e)}else{if(jr(n,r))return;Dr.set(r),t.uniformMatrix3fv(this.addr,!1,Dr),Ur(n,r)}}function Yr(t,e){var n=this.cache,r=e.elements;if(void 0===r){if(jr(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),Ur(n,e)}else{if(jr(n,r))return;Nr.set(r),t.uniformMatrix4fv(this.addr,!1,Nr),Ur(n,r)}}function Kr(t,e,n){var r=this.cache,i=n.allocTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture2D(e||Ar,i)}function Zr(t,e,n){var r=this.cache,i=n.allocTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(e||Pr,i)}function Qr(t,e,n){var r=this.cache,i=n.allocTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(e||Or,i)}function Jr(t,e){var n=this.cache;jr(n,e)||(t.uniform2iv(this.addr,e),Ur(n,e))}function $r(t,e){var n=this.cache;jr(n,e)||(t.uniform3iv(this.addr,e),Ur(n,e))}function ti(t,e){var n=this.cache;jr(n,e)||(t.uniform4iv(this.addr,e),Ur(n,e))}function ei(t,e){var n=this.cache;jr(n,e)||(t.uniform1fv(this.addr,e),Ur(n,e))}function ni(t,e){var n=this.cache;jr(n,e)||(t.uniform1iv(this.addr,e),Ur(n,e))}function ri(t,e){var n=this.cache,r=Fr(e,this.size,2);jr(n,r)||(t.uniform2fv(this.addr,r),this.updateCache(r))}function ii(t,e){var n=this.cache,r=Fr(e,this.size,3);jr(n,r)||(t.uniform3fv(this.addr,r),this.updateCache(r))}function oi(t,e){var n=this.cache,r=Fr(e,this.size,4);jr(n,r)||(t.uniform4fv(this.addr,r),this.updateCache(r))}function ai(t,e){var n=this.cache,r=Fr(e,this.size,4);jr(n,r)||(t.uniformMatrix2fv(this.addr,!1,r),this.updateCache(r))}function si(t,e){var n=this.cache,r=Fr(e,this.size,9);jr(n,r)||(t.uniformMatrix3fv(this.addr,!1,r),this.updateCache(r))}function ui(t,e){var n=this.cache,r=Fr(e,this.size,16);jr(n,r)||(t.uniformMatrix4fv(this.addr,!1,r),this.updateCache(r))}function li(t,e,n){var r=this.cache,i=e.length,o=Br(n,i);!1===jr(r,o)&&(t.uniform1iv(this.addr,o),Ur(r,o));for(var a=0;a!==i;++a)n.setTexture2D(e[a]||Ar,o[a])}function ci(t,e,n){var r=this.cache,i=e.length,o=Br(n,i);!1===jr(r,o)&&(t.uniform1iv(this.addr,o),Ur(r,o));for(var a=0;a!==i;++a)n.setTextureCube(e[a]||Or,o[a])}function hi(t,e,n){this.id=t,this.addr=n,this.cache=[],this.setValue=function(t){switch(e.type){case 5126:return Gr;case 35664:return zr;case 35665:return Hr;case 35666:return Wr;case 35674:return qr;case 35675:return Xr;case 35676:return Yr;case 35678:case 36198:return Kr;case 35679:return Zr;case 35680:return Qr;case 5124:case 35670:return Vr;case 35667:case 35671:return Jr;case 35668:case 35672:return $r;case 35669:case 35673:return ti}}()}function di(t,e,n){this.id=t,this.addr=n,this.cache=[],this.size=e.size,this.setValue=function(t){switch(e.type){case 5126:return ei;case 35664:return ri;case 35665:return ii;case 35666:return oi;case 35674:return ai;case 35675:return si;case 35676:return ui;case 35678:return li;case 35680:return ci;case 5124:case 35670:return ni;case 35667:case 35671:return Jr;case 35668:case 35672:return $r;case 35669:case 35673:return ti}}()}function pi(t){this.id=t,Rr.call(this)}di.prototype.updateCache=function(t){var e=this.cache;t instanceof Float32Array&&e.length!==t.length&&(this.cache=new Float32Array(t.length)),Ur(e,t)},pi.prototype.setValue=function(t,e,n){for(var r=this.seq,i=0,o=r.length;i!==o;++i){var a=r[i];a.setValue(t,e[a.id],n)}};var fi=/([\w\d_]+)(\])?(\[|\.)?/g;function mi(t,e){t.seq.push(e),t.map[e.id]=e}function vi(t,e,n){var r=t.name,i=r.length;for(fi.lastIndex=0;;){var o=fi.exec(r),a=o[1],s=o[3];if("]"===o[2]&&(a|=0),void 0===s||"["===s&&fi.lastIndex+2===i){mi(n,void 0===s?new hi(a,t,e):new di(a,t,e));break}var u=n.map[a];void 0===u&&mi(n,u=new pi(a)),n=u}}function gi(t,e,n){Rr.call(this),this.renderer=n;for(var r=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),i=0;i<r;++i){var o=t.getActiveUniform(e,i);vi(o,t.getUniformLocation(e,o.name),this)}}function yi(t,e,n){var r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),!1===t.getShaderParameter(r,t.COMPILE_STATUS)&&console.error("THREE.WebGLShader: Shader couldn't compile."),""!==t.getShaderInfoLog(r)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",e===t.VERTEX_SHADER?"vertex":"fragment",t.getShaderInfoLog(r),function(t){for(var e=t.split("\n"),n=0;n<e.length;n++)e[n]=n+1+": "+e[n];return e.join("\n")}(n)),r}gi.prototype.setValue=function(t,e,n){var r=this.map[e];void 0!==r&&r.setValue(t,n,this.renderer)},gi.prototype.setOptional=function(t,e,n){var r=e[n];void 0!==r&&this.setValue(t,n,r)},gi.upload=function(t,e,n,r){for(var i=0,o=e.length;i!==o;++i){var a=e[i],s=n[a.id];!1!==s.needsUpdate&&a.setValue(t,s.value,r)}},gi.seqWithValue=function(t,e){for(var n=[],r=0,i=t.length;r!==i;++r){var o=t[r];o.id in e&&n.push(o)}return n};var _i=0;function bi(t){switch(t){case Fe:return["Linear","( value )"];case je:return["sRGB","( value )"];case Be:return["RGBE","( value )"];case Ve:return["RGBM","( value, 7.0 )"];case ze:return["RGBM","( value, 16.0 )"];case He:return["RGBD","( value, 256.0 )"];case Ue:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw new Error("unsupported encoding: "+t)}}function wi(t,e){var n=bi(e);return"vec4 "+t+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function xi(t){return""!==t}function Ei(t,e){return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights)}function Si(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}function Ti(t){return t.replace(/^[ \t]*#include +<([\w\d./]+)>/gm,function(t,e){var n=wn[e];if(void 0===n)throw new Error("Can not resolve #include <"+e+">");return Ti(n)})}function Mi(t){return t.replace(/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,function(t,e,n,r){for(var i="",o=parseInt(e);o<parseInt(n);o++)i+=r.replace(/\[ i \]/g,"[ "+o+" ]");return i})}function Ci(t,e){return t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.program&&e.program&&t.program!==e.program?t.program.id-e.program.id:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function Ai(t,e){return t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}var Pi,Oi,Ri,Li,Ii,Ni,Di=0;function ki(){var t=new function(){var t=new function(){var t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];var n;switch(e.type){case"DirectionalLight":n={direction:new $e,color:new Sn,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new Ze};break;case"SpotLight":n={position:new $e,direction:new $e,color:new Sn,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new Ze};break;case"PointLight":n={position:new $e,color:new Sn,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new Ze,shadowCameraNear:1,shadowCameraFar:1e3};break;case"HemisphereLight":n={direction:new $e,skyColor:new Sn,groundColor:new Sn};break;case"RectAreaLight":n={color:new Sn,position:new $e,halfWidth:new $e,halfHeight:new $e}}return t[e.id]=n,n}}},e={id:Di++,hash:{stateID:-1,directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,shadowsLength:-1},ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},n=new $e,r=new Qe,i=new Qe;return{setup:function(o,a,s){for(var u=0,l=0,c=0,h=0,d=0,p=0,f=0,m=0,v=s.matrixWorldInverse,g=0,y=o.length;g<y;g++){var _=o[g],b=_.color,w=_.intensity,x=_.distance,E=_.shadow&&_.shadow.map?_.shadow.map.texture:null;if(_.isAmbientLight)u+=b.r*w,l+=b.g*w,c+=b.b*w;else if(_.isDirectionalLight)(T=t.get(_)).color.copy(_.color).multiplyScalar(_.intensity),T.direction.setFromMatrixPosition(_.matrixWorld),n.setFromMatrixPosition(_.target.matrixWorld),T.direction.sub(n),T.direction.transformDirection(v),T.shadow=_.castShadow,_.castShadow&&(T.shadowBias=(S=_.shadow).bias,T.shadowRadius=S.radius,T.shadowMapSize=S.mapSize),e.directionalShadowMap[h]=E,e.directionalShadowMatrix[h]=_.shadow.matrix,e.directional[h]=T,h++;else if(_.isSpotLight)(T=t.get(_)).position.setFromMatrixPosition(_.matrixWorld),T.position.applyMatrix4(v),T.color.copy(b).multiplyScalar(w),T.distance=x,T.direction.setFromMatrixPosition(_.matrixWorld),n.setFromMatrixPosition(_.target.matrixWorld),T.direction.sub(n),T.direction.transformDirection(v),T.coneCos=Math.cos(_.angle),T.penumbraCos=Math.cos(_.angle*(1-_.penumbra)),T.decay=_.decay,T.shadow=_.castShadow,_.castShadow&&(T.shadowBias=(S=_.shadow).bias,T.shadowRadius=S.radius,T.shadowMapSize=S.mapSize),e.spotShadowMap[p]=E,e.spotShadowMatrix[p]=_.shadow.matrix,e.spot[p]=T,p++;else if(_.isRectAreaLight)(T=t.get(_)).color.copy(b).multiplyScalar(w),T.position.setFromMatrixPosition(_.matrixWorld),T.position.applyMatrix4(v),i.identity(),r.copy(_.matrixWorld),r.premultiply(v),i.extractRotation(r),T.halfWidth.set(.5*_.width,0,0),T.halfHeight.set(0,.5*_.height,0),T.halfWidth.applyMatrix4(i),T.halfHeight.applyMatrix4(i),e.rectArea[f]=T,f++;else if(_.isPointLight){var S;(T=t.get(_)).position.setFromMatrixPosition(_.matrixWorld),T.position.applyMatrix4(v),T.color.copy(_.color).multiplyScalar(_.intensity),T.distance=_.distance,T.decay=_.decay,T.shadow=_.castShadow,_.castShadow&&(T.shadowBias=(S=_.shadow).bias,T.shadowRadius=S.radius,T.shadowMapSize=S.mapSize,T.shadowCameraNear=S.camera.near,T.shadowCameraFar=S.camera.far),e.pointShadowMap[d]=E,e.pointShadowMatrix[d]=_.shadow.matrix,e.point[d]=T,d++}else if(_.isHemisphereLight){var T;(T=t.get(_)).direction.setFromMatrixPosition(_.matrixWorld),T.direction.transformDirection(v),T.direction.normalize(),T.skyColor.copy(_.color).multiplyScalar(w),T.groundColor.copy(_.groundColor).multiplyScalar(w),e.hemi[m]=T,m++}}e.ambient[0]=u,e.ambient[1]=l,e.ambient[2]=c,e.directional.length=h,e.spot.length=p,e.rectArea.length=f,e.point.length=d,e.hemi.length=m,e.hash.stateID=e.id,e.hash.directionalLength=h,e.hash.pointLength=d,e.hash.spotLength=p,e.hash.rectAreaLength=f,e.hash.hemiLength=m,e.hash.shadowsLength=a.length},state:e}},e=[],n=[];return{init:function(){e.length=0,n.length=0},state:{lightsArray:e,shadowsArray:n,lights:t},setupLights:function(r){t.setup(e,n,r)},pushLight:function(t){e.push(t)},pushShadow:function(t){n.push(t)}}}function Fi(t){_r.call(this),this.type="MeshDepthMaterial",this.depthPacking=We,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.setValues(t)}function ji(t){_r.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new $e,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.lights=!1,this.setValues(t)}function Ui(t,e,n){for(var r=new gn,i=new Qe,o=new Ze,a=new Ze(n,n),s=new $e,u=new $e,l=1,c=2,h=1+(l|c),d=new Array(h),p=new Array(h),f={},m={0:C,1:M,2:A},v=[new $e(1,0,0),new $e(-1,0,0),new $e(0,0,1),new $e(0,0,-1),new $e(0,1,0),new $e(0,-1,0)],g=[new $e(0,1,0),new $e(0,1,0),new $e(0,1,0),new $e(0,1,0),new $e(0,0,1),new $e(0,0,-1)],y=[new cn,new cn,new cn,new cn,new cn,new cn],_=0;_!==h;++_){var b=0!=(_&l),w=0!=(_&c),x=new Fi({depthPacking:qe,morphTargets:b,skinning:w});d[_]=x;var E=new ji({morphTargets:b,skinning:w});p[_]=E}var T=this;function P(e,n,r,i,o,a){var s=e.geometry,u=null,h=d,v=e.customDepthMaterial;if(r&&(h=p,v=e.customDistanceMaterial),v)u=v;else{var g=!1;n.morphTargets&&(s&&s.isBufferGeometry?g=s.morphAttributes&&s.morphAttributes.position&&s.morphAttributes.position.length>0:s&&s.isGeometry&&(g=s.morphTargets&&s.morphTargets.length>0)),e.isSkinnedMesh&&!1===n.skinning&&console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",e);var y=0;g&&(y|=l),e.isSkinnedMesh&&n.skinning&&(y|=c),u=h[y]}if(t.localClippingEnabled&&!0===n.clipShadows&&0!==n.clippingPlanes.length){var _=u.uuid,b=n.uuid,w=f[_];void 0===w&&(f[_]=w={});var x=w[b];void 0===x&&(x=u.clone(),w[b]=x),u=x}return u.visible=n.visible,u.wireframe=n.wireframe,u.side=null!=n.shadowSide?n.shadowSide:m[n.side],u.clipShadows=n.clipShadows,u.clippingPlanes=n.clippingPlanes,u.clipIntersection=n.clipIntersection,u.wireframeLinewidth=n.wireframeLinewidth,u.linewidth=n.linewidth,r&&u.isMeshDistanceMaterial&&(u.referencePosition.copy(i),u.nearDistance=o,u.farDistance=a),u}function O(n,i,o,a){if(!1!==n.visible){if(n.layers.test(i.layers)&&(n.isMesh||n.isLine||n.isPoints)&&n.castShadow&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,n.matrixWorld);var s=e.update(n),l=n.material;if(Array.isArray(l))for(var c=s.groups,h=0,d=c.length;h<d;h++){var p=c[h],f=l[p.materialIndex];if(f&&f.visible){var m=P(n,f,a,u,o.near,o.far);t.renderBufferDirect(o,null,s,m,n,p)}}else l.visible&&(m=P(n,l,a,u,o.near,o.far),t.renderBufferDirect(o,null,s,m,n,null))}for(var v=n.children,g=0,y=v.length;g<y;g++)O(v[g],i,o,a)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=S,this.render=function(e,n,l){if(!1!==T.enabled&&(!1!==T.autoUpdate||!1!==T.needsUpdate)&&0!==e.length){var c,h=t.state;h.disable(t.context.BLEND),h.buffers.color.setClear(1,1,1,1),h.buffers.depth.setTest(!0),h.setScissorTest(!1);for(var d=0,p=e.length;d<p;d++){var f=e[d],m=f.shadow,_=f&&f.isPointLight;if(void 0!==m){var b=m.camera;if(o.copy(m.mapSize),o.min(a),_){var w=o.x,x=o.y;y[0].set(2*w,x,w,x),y[1].set(0,x,w,x),y[2].set(3*w,x,w,x),y[3].set(w,x,w,x),y[4].set(3*w,0,w,x),y[5].set(w,0,w,x),o.x*=4,o.y*=2}null===m.map&&(m.map=new hn(o.x,o.y,{minFilter:Pt,magFilter:Pt,format:Kt}),m.map.texture.name=f.name+".shadowMap",b.updateProjectionMatrix()),m.isSpotLightShadow&&m.update(f);var E=m.map,S=m.matrix;u.setFromMatrixPosition(f.matrixWorld),b.position.copy(u),_?(c=6,S.makeTranslation(-u.x,-u.y,-u.z)):(c=1,s.setFromMatrixPosition(f.target.matrixWorld),b.lookAt(s),b.updateMatrixWorld(),S.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),S.multiply(b.projectionMatrix),S.multiply(b.matrixWorldInverse)),t.setRenderTarget(E),t.clear();for(var M=0;M<c;M++)_&&(s.copy(b.position),s.add(v[M]),b.up.copy(g[M]),b.lookAt(s),b.updateMatrixWorld(),h.viewport(y[M])),i.multiplyMatrices(b.projectionMatrix,b.matrixWorldInverse),r.setFromMatrix(i),O(n,l,b,_)}else console.warn("THREE.WebGLShadowMap:",f,"has no shadow.")}T.needsUpdate=!1}}}function Bi(t,e,n){return{convert:function(r){var i;if(r===Mt)return t.REPEAT;if(r===Ct)return t.CLAMP_TO_EDGE;if(r===At)return t.MIRRORED_REPEAT;if(r===Pt)return t.NEAREST;if(r===Ot)return t.NEAREST_MIPMAP_NEAREST;if(r===Rt)return t.NEAREST_MIPMAP_LINEAR;if(r===Lt)return t.LINEAR;if(r===It)return t.LINEAR_MIPMAP_NEAREST;if(r===Nt)return t.LINEAR_MIPMAP_LINEAR;if(r===Dt)return t.UNSIGNED_BYTE;if(r===zt)return t.UNSIGNED_SHORT_4_4_4_4;if(r===Ht)return t.UNSIGNED_SHORT_5_5_5_1;if(r===Wt)return t.UNSIGNED_SHORT_5_6_5;if(r===kt)return t.BYTE;if(r===Ft)return t.SHORT;if(r===jt)return t.UNSIGNED_SHORT;if(r===Ut)return t.INT;if(r===Bt)return t.UNSIGNED_INT;if(r===Gt)return t.FLOAT;if(r===Vt){if(n.isWebGL2)return t.HALF_FLOAT;if(null!==(i=e.get("OES_texture_half_float")))return i.HALF_FLOAT_OES}if(r===Xt)return t.ALPHA;if(r===Yt)return t.RGB;if(r===Kt)return t.RGBA;if(r===Zt)return t.LUMINANCE;if(r===Qt)return t.LUMINANCE_ALPHA;if(r===$t)return t.DEPTH_COMPONENT;if(r===te)return t.DEPTH_STENCIL;if(r===ee)return t.RED;if(r===B)return t.FUNC_ADD;if(r===G)return t.FUNC_SUBTRACT;if(r===V)return t.FUNC_REVERSE_SUBTRACT;if(r===W)return t.ZERO;if(r===q)return t.ONE;if(r===X)return t.SRC_COLOR;if(r===Y)return t.ONE_MINUS_SRC_COLOR;if(r===K)return t.SRC_ALPHA;if(r===Z)return t.ONE_MINUS_SRC_ALPHA;if(r===Q)return t.DST_ALPHA;if(r===J)return t.ONE_MINUS_DST_ALPHA;if(r===$)return t.DST_COLOR;if(r===tt)return t.ONE_MINUS_DST_COLOR;if(r===et)return t.SRC_ALPHA_SATURATE;if((r===ne||r===re||r===ie||r===oe)&&null!==(i=e.get("WEBGL_compressed_texture_s3tc"))){if(r===ne)return i.COMPRESSED_RGB_S3TC_DXT1_EXT;if(r===re)return i.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(r===ie)return i.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(r===oe)return i.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((r===ae||r===se||r===ue||r===le)&&null!==(i=e.get("WEBGL_compressed_texture_pvrtc"))){if(r===ae)return i.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(r===se)return i.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(r===ue)return i.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(r===le)return i.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(r===ce&&null!==(i=e.get("WEBGL_compressed_texture_etc1")))return i.COMPRESSED_RGB_ETC1_WEBGL;if((r===he||r===de||r===pe||r===fe||r===me||r===ve||r===ge||r===ye||r===_e||r===be||r===we||r===xe||r===Ee||r===Se)&&null!==(i=e.get("WEBGL_compressed_texture_astc")))return r;if(r===z||r===H){if(n.isWebGL2){if(r===z)return t.MIN;if(r===H)return t.MAX}if(null!==(i=e.get("EXT_blend_minmax"))){if(r===z)return i.MIN_EXT;if(r===H)return i.MAX_EXT}}if(r===qt){if(n.isWebGL2)return t.UNSIGNED_INT_24_8;if(null!==(i=e.get("WEBGL_depth_texture")))return i.UNSIGNED_INT_24_8_WEBGL}return 0}}}function Gi(){Fn.call(this),this.type="Group"}function Vi(){Fn.call(this),this.type="Camera",this.matrixWorldInverse=new Qe,this.projectionMatrix=new Qe,this.projectionMatrixInverse=new Qe}function zi(t,e,n,r){Vi.call(this),this.type="PerspectiveCamera",this.fov=void 0!==t?t:50,this.zoom=1,this.near=void 0!==n?n:.1,this.far=void 0!==r?r:2e3,this.focus=10,this.aspect=void 0!==e?e:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function Hi(t){zi.call(this),this.cameras=t||[]}function Wi(t){var e=this,n=null,r=null,i=null,o=[],a=new Qe,s=new Qe,u="stage";"undefined"!=typeof window&&"VRFrameData"in window&&(r=new window.VRFrameData,window.addEventListener("vrdisplaypresentchange",y,!1));var l=new Qe,c=new Je,h=new $e,d=new zi;d.bounds=new cn(0,0,.5,1),d.layers.enable(1);var p=new zi;p.bounds=new cn(.5,0,.5,1),p.layers.enable(2);var f,m,v=new Hi([d,p]);function g(){return null!==n&&!0===n.isPresenting}function y(){if(g()){var r=n.getEyeParameters("left"),i=r.renderWidth,o=r.renderHeight;m=t.getPixelRatio(),f=t.getSize(),t.setDrawingBufferSize(2*i,o,1),w.start()}else e.enabled&&t.setDrawingBufferSize(f.width,f.height,m),w.stop()}v.layers.enable(1),v.layers.enable(2);var _=[];function b(t){for(var e=navigator.getGamepads&&navigator.getGamepads(),n=0,r=0,i=e.length;n<i;n++){var o=e[n];if(o&&("Daydream Controller"===o.id||"Gear VR Controller"===o.id||"Oculus Go Controller"===o.id||"OpenVR Gamepad"===o.id||o.id.startsWith("Oculus Touch")||o.id.startsWith("Spatial Controller"))){if(r===t)return o;r++}}}this.enabled=!1,this.getController=function(t){var e=o[t];return void 0===e&&((e=new Gi).matrixAutoUpdate=!1,e.visible=!1,o[t]=e),e},this.getDevice=function(){return n},this.setDevice=function(t){void 0!==t&&(n=t),w.setContext(t)},this.setFrameOfReferenceType=function(t){u=t},this.setPoseTarget=function(t){void 0!==t&&(i=t)},this.getCamera=function(t){var e="stage"===u?1.6:0;if(null===n)return t.position.set(0,e,0),t;if(n.depthNear=t.near,n.depthFar=t.far,n.getFrameData(r),"stage"===u){var f=n.stageParameters;f?a.fromArray(f.sittingToStandingTransform):a.makeTranslation(0,e,0)}var m=r.pose,g=null!==i?i:t;if(g.matrix.copy(a),g.matrix.decompose(g.position,g.quaternion,g.scale),null!==m.orientation&&(c.fromArray(m.orientation),g.quaternion.multiply(c)),null!==m.position&&(c.setFromRotationMatrix(a),h.fromArray(m.position),h.applyQuaternion(c),g.position.add(h)),g.updateMatrixWorld(),!1===n.isPresenting)return t;d.near=t.near,p.near=t.near,d.far=t.far,p.far=t.far,v.matrixWorld.copy(t.matrixWorld),v.matrixWorldInverse.copy(t.matrixWorldInverse),d.matrixWorldInverse.fromArray(r.leftViewMatrix),p.matrixWorldInverse.fromArray(r.rightViewMatrix),s.getInverse(a),"stage"===u&&(d.matrixWorldInverse.multiply(s),p.matrixWorldInverse.multiply(s));var y=g.parent;null!==y&&(l.getInverse(y.matrixWorld),d.matrixWorldInverse.multiply(l),p.matrixWorldInverse.multiply(l)),d.matrixWorld.getInverse(d.matrixWorldInverse),p.matrixWorld.getInverse(p.matrixWorldInverse),d.projectionMatrix.fromArray(r.leftProjectionMatrix),p.projectionMatrix.fromArray(r.rightProjectionMatrix),v.projectionMatrix.copy(d.projectionMatrix);var w=n.getLayers();if(w.length){var x=w[0];null!==x.leftBounds&&4===x.leftBounds.length&&d.bounds.fromArray(x.leftBounds),null!==x.rightBounds&&4===x.rightBounds.length&&p.bounds.fromArray(x.rightBounds)}return function(){for(var t=0;t<o.length;t++){var e=o[t],n=b(t);if(void 0!==n&&void 0!==n.pose){if(null===n.pose)return;var r=n.pose;!1===r.hasPosition&&e.position.set(.2,-.6,-.05),null!==r.position&&e.position.fromArray(r.position),null!==r.orientation&&e.quaternion.fromArray(r.orientation),e.matrix.compose(e.position,e.quaternion,e.scale),e.matrix.premultiply(a),e.matrix.decompose(e.position,e.quaternion,e.scale),e.matrixWorldNeedsUpdate=!0,e.visible=!0;var i="Daydream Controller"===n.id?0:1;_[t]!==n.buttons[i].pressed&&(_[t]=n.buttons[i].pressed,!0===_[t]?e.dispatchEvent({type:"selectstart"}):(e.dispatchEvent({type:"selectend"}),e.dispatchEvent({type:"select"})))}else e.visible=!1}}(),v},this.getStandingMatrix=function(){return a},this.isPresenting=g;var w=new An;this.setAnimationLoop=function(t){w.setAnimationLoop(t)},this.submitFrame=function(){g()&&n.submitFrame()},this.dispose=function(){"undefined"!=typeof window&&window.removeEventListener("vrdisplaypresentchange",y)}}function qi(t){console.log("THREE.WebGLRenderer",m);var e=void 0!==(t=t||{}).canvas?t.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),n=void 0!==t.context?t.context:null,r=void 0!==t.alpha&&t.alpha,i=void 0===t.depth||t.depth,o=void 0===t.stencil||t.stencil,a=void 0!==t.antialias&&t.antialias,s=void 0===t.premultipliedAlpha||t.premultipliedAlpha,u=void 0!==t.preserveDrawingBuffer&&t.preserveDrawingBuffer,l=void 0!==t.powerPreference?t.powerPreference:"default",c=null,h=null;this.domElement=e,this.context=null,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=ft,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var d,p,f,v,b,w,x,E,P,O,R,L,I,G,V,z,H,W,q=this,X=!1,Y=null,K=null,Z=null,Q=-1,J={geometry:null,program:null,wireframe:!1},$=null,tt=null,et=new cn,yt=new cn,Mt=null,At=0,It=e.width,Nt=e.height,kt=1,Ft=new cn(0,0,It,Nt),Ut=new cn(0,0,It,Nt),zt=!1,Ht=new gn,Wt=new function(){var t=this,e=null,n=0,r=!1,i=!1,o=new vn,a=new tn,s={value:null,needsUpdate:!1};function u(){s.value!==e&&(s.value=e,s.needsUpdate=n>0),t.numPlanes=n,t.numIntersection=0}function l(e,n,r,i){var u=null!==e?e.length:0,l=null;if(0!==u){if(l=s.value,!0!==i||null===l){var c=r+4*u,h=n.matrixWorldInverse;a.getNormalMatrix(h),(null===l||l.length<c)&&(l=new Float32Array(c));for(var d=0,p=r;d!==u;++d,p+=4)o.copy(e[d]).applyMatrix4(h,a),o.normal.toArray(l,p),l[p+3]=o.constant}s.value=l,s.needsUpdate=!0}return t.numPlanes=u,l}this.uniform=s,this.numPlanes=0,this.numIntersection=0,this.init=function(t,i,o){var a=0!==t.length||i||0!==n||r;return r=i,e=l(t,o,0),n=t.length,a},this.beginShadows=function(){i=!0,l(null)},this.endShadows=function(){i=!1,u()},this.setState=function(t,o,a,c,h,d){if(!r||null===t||0===t.length||i&&!a)i?l(null):u();else{var p=i?0:n,f=4*p,m=h.clippingState||null;s.value=m,m=l(t,c,f,d);for(var v=0;v!==f;++v)m[v]=e[v];h.clippingState=m,this.numIntersection=o?this.numPlanes:0,this.numPlanes+=p}}},Xt=!1,Zt=!1,Qt=new Qe,Jt=new $e;function ee(){return null===K?kt:1}try{var ne={alpha:r,depth:i,stencil:o,antialias:a,premultipliedAlpha:s,preserveDrawingBuffer:u,powerPreference:l};if(e.addEventListener("webglcontextlost",ae,!1),e.addEventListener("webglcontextrestored",se,!1),null===(d=n||e.getContext("webgl",ne)||e.getContext("experimental-webgl",ne)))throw null!==e.getContext("webgl")?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.");void 0===d.getShaderPrecisionFormat&&(d.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(t){console.error("THREE.WebGLRenderer: "+t.message)}function re(){p=new function(t){var e={};return{get:function(n){if(void 0!==e[n])return e[n];var r;switch(n){case"WEBGL_depth_texture":r=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=t.getExtension(n)}return null===r&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),e[n]=r,r}}}(d),(f=new function(t,e,n){var r;function i(e){if("highp"===e){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";e="mediump"}return"mediump"===e&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}var o="undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext,a=void 0!==n.precision?n.precision:"highp",s=i(a);s!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",s,"instead."),a=s);var u=!0===n.logarithmicDepthBuffer,l=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),c=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),h=t.getParameter(t.MAX_TEXTURE_SIZE),d=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),p=t.getParameter(t.MAX_VERTEX_ATTRIBS),f=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),m=t.getParameter(t.MAX_VARYING_VECTORS),v=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),g=c>0,y=o||!!e.get("OES_texture_float");return{isWebGL2:o,getMaxAnisotropy:function(){if(void 0!==r)return r;var n=e.get("EXT_texture_filter_anisotropic");return r=null!==n?t.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:i,precision:a,logarithmicDepthBuffer:u,maxTextures:l,maxVertexTextures:c,maxTextureSize:h,maxCubemapSize:d,maxAttributes:p,maxVertexUniforms:f,maxVaryings:m,maxFragmentUniforms:v,vertexTextures:g,floatFragmentTextures:y,floatVertexTextures:g&&y}}(d,p,t)).isWebGL2||(p.get("WEBGL_depth_texture"),p.get("OES_texture_float"),p.get("OES_texture_half_float"),p.get("OES_texture_half_float_linear"),p.get("OES_standard_derivatives"),p.get("OES_element_index_uint"),p.get("ANGLE_instanced_arrays")),p.get("OES_texture_float_linear"),W=new Bi(d,p,f),(v=new function(t,e,n,r){var i=new function(){var e=!1,n=new cn,r=null,i=new cn(0,0,0,0);return{setMask:function(n){r===n||e||(t.colorMask(n,n,n,n),r=n)},setLocked:function(t){e=t},setClear:function(e,r,o,a,s){!0===s&&(e*=a,r*=a,o*=a),n.set(e,r,o,a),!1===i.equals(n)&&(t.clearColor(e,r,o,a),i.copy(n))},reset:function(){e=!1,r=null,i.set(-1,0,0,0)}}},o=new function(){var e=!1,n=null,r=null,i=null;return{setTest:function(e){e?Q(t.DEPTH_TEST):J(t.DEPTH_TEST)},setMask:function(r){n===r||e||(t.depthMask(r),n=r)},setFunc:function(e){if(r!==e){if(e)switch(e){case nt:t.depthFunc(t.NEVER);break;case rt:t.depthFunc(t.ALWAYS);break;case it:t.depthFunc(t.LESS);break;case ot:t.depthFunc(t.LEQUAL);break;case at:t.depthFunc(t.EQUAL);break;case st:t.depthFunc(t.GEQUAL);break;case ut:t.depthFunc(t.GREATER);break;case lt:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}else t.depthFunc(t.LEQUAL);r=e}},setLocked:function(t){e=t},setClear:function(e){i!==e&&(t.clearDepth(e),i=e)},reset:function(){e=!1,n=null,r=null,i=null}}},a=new function(){var e=!1,n=null,r=null,i=null,o=null,a=null,s=null,u=null,l=null;return{setTest:function(e){e?Q(t.STENCIL_TEST):J(t.STENCIL_TEST)},setMask:function(r){n===r||e||(t.stencilMask(r),n=r)},setFunc:function(e,n,a){r===e&&i===n&&o===a||(t.stencilFunc(e,n,a),r=e,i=n,o=a)},setOp:function(e,n,r){a===e&&s===n&&u===r||(t.stencilOp(e,n,r),a=e,s=n,u=r)},setLocked:function(t){e=t},setClear:function(e){l!==e&&(t.clearStencil(e),l=e)},reset:function(){e=!1,n=null,r=null,i=null,o=null,a=null,s=null,u=null,l=null}}},s=t.getParameter(t.MAX_VERTEX_ATTRIBS),u=new Uint8Array(s),l=new Uint8Array(s),c=new Uint8Array(s),h={},d=null,p=null,f=null,m=null,v=null,b=null,w=null,x=null,E=null,S=null,T=!1,M=null,P=null,O=null,R=null,L=null,I=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS),G=!1,V=0,z=t.getParameter(t.VERSION);-1!==z.indexOf("WebGL")?(V=parseFloat(/^WebGL\ ([0-9])/.exec(z)[1]),G=V>=1):-1!==z.indexOf("OpenGL ES")&&(V=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(z)[1]),G=V>=2);var H=null,W={},q=new cn,X=new cn;function Y(e,n,r){var i=new Uint8Array(4),o=t.createTexture();t.bindTexture(e,o),t.texParameteri(e,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(e,t.TEXTURE_MAG_FILTER,t.NEAREST);for(var a=0;a<r;a++)t.texImage2D(n+a,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,i);return o}var K={};function Z(n,i){u[n]=1,0===l[n]&&(t.enableVertexAttribArray(n),l[n]=1),c[n]!==i&&((r.isWebGL2?t:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,i),c[n]=i)}function Q(e){!0!==h[e]&&(t.enable(e),h[e]=!0)}function J(e){!1!==h[e]&&(t.disable(e),h[e]=!1)}function $(e,r,i,o,a,s,u,l){if(e!==N){if(f||(Q(t.BLEND),f=!0),e===U)a=a||r,s=s||i,u=u||o,r===v&&a===x||(t.blendEquationSeparate(n.convert(r),n.convert(a)),v=r,x=a),i===b&&o===w&&s===E&&u===S||(t.blendFuncSeparate(n.convert(i),n.convert(o),n.convert(s),n.convert(u)),b=i,w=o,E=s,S=u),m=e,T=null;else if(e!==m||l!==T){if(v===B&&x===B||(t.blendEquation(t.FUNC_ADD),v=B,x=B),l)switch(e){case D:t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case k:t.blendFunc(t.ONE,t.ONE);break;case F:t.blendFuncSeparate(t.ZERO,t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ONE_MINUS_SRC_ALPHA);break;case j:t.blendFuncSeparate(t.ZERO,t.SRC_COLOR,t.ZERO,t.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}else switch(e){case D:t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case k:t.blendFunc(t.SRC_ALPHA,t.ONE);break;case F:t.blendFunc(t.ZERO,t.ONE_MINUS_SRC_COLOR);break;case j:t.blendFunc(t.ZERO,t.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}b=null,w=null,E=null,S=null,m=e,T=l}}else f&&(J(t.BLEND),f=!1)}function tt(e){M!==e&&(t.frontFace(e?t.CW:t.CCW),M=e)}function et(e){e!==g?(Q(t.CULL_FACE),e!==P&&t.cullFace(e===y?t.BACK:e===_?t.FRONT:t.FRONT_AND_BACK)):J(t.CULL_FACE),P=e}function ct(e,n,r){e?(Q(t.POLYGON_OFFSET_FILL),R===n&&L===r||(t.polygonOffset(n,r),R=n,L=r)):J(t.POLYGON_OFFSET_FILL)}function ht(e){void 0===e&&(e=t.TEXTURE0+I-1),H!==e&&(t.activeTexture(e),H=e)}return K[t.TEXTURE_2D]=Y(t.TEXTURE_2D,t.TEXTURE_2D,1),K[t.TEXTURE_CUBE_MAP]=Y(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),i.setClear(0,0,0,1),o.setClear(1),a.setClear(0),Q(t.DEPTH_TEST),o.setFunc(ot),tt(!1),et(y),Q(t.CULL_FACE),$(N),{buffers:{color:i,depth:o,stencil:a},initAttributes:function(){for(var t=0,e=u.length;t<e;t++)u[t]=0},enableAttribute:function(t){Z(t,0)},enableAttributeAndDivisor:Z,disableUnusedAttributes:function(){for(var e=0,n=l.length;e!==n;++e)l[e]!==u[e]&&(t.disableVertexAttribArray(e),l[e]=0)},enable:Q,disable:J,getCompressedTextureFormats:function(){if(null===d&&(d=[],e.get("WEBGL_compressed_texture_pvrtc")||e.get("WEBGL_compressed_texture_s3tc")||e.get("WEBGL_compressed_texture_etc1")||e.get("WEBGL_compressed_texture_astc")))for(var n=t.getParameter(t.COMPRESSED_TEXTURE_FORMATS),r=0;r<n.length;r++)d.push(n[r]);return d},useProgram:function(e){return p!==e&&(t.useProgram(e),p=e,!0)},setBlending:$,setMaterial:function(e,n){e.side===A?J(t.CULL_FACE):Q(t.CULL_FACE);var r=e.side===C;n&&(r=!r),tt(r),e.blending===D&&!1===e.transparent?$(N):$(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),o.setFunc(e.depthFunc),o.setTest(e.depthTest),o.setMask(e.depthWrite),i.setMask(e.colorWrite),ct(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits)},setFlipSided:tt,setCullFace:et,setLineWidth:function(e){e!==O&&(G&&t.lineWidth(e),O=e)},setPolygonOffset:ct,setScissorTest:function(e){e?Q(t.SCISSOR_TEST):J(t.SCISSOR_TEST)},activeTexture:ht,bindTexture:function(e,n){null===H&&ht();var r=W[H];void 0===r&&(W[H]=r={type:void 0,texture:void 0}),r.type===e&&r.texture===n||(t.bindTexture(e,n||K[e]),r.type=e,r.texture=n)},compressedTexImage2D:function(){try{t.compressedTexImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage2D:function(){try{t.texImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage3D:function(){try{t.texImage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},scissor:function(e){!1===q.equals(e)&&(t.scissor(e.x,e.y,e.z,e.w),q.copy(e))},viewport:function(e){!1===X.equals(e)&&(t.viewport(e.x,e.y,e.z,e.w),X.copy(e))},reset:function(){for(var e=0;e<l.length;e++)1===l[e]&&(t.disableVertexAttribArray(e),l[e]=0);h={},d=null,H=null,W={},p=null,m=null,M=null,P=null,i.reset(),o.reset(),a.reset()}}}(d,p,W,f)).scissor(yt.copy(Ut).multiplyScalar(kt)),v.viewport(et.copy(Ft).multiplyScalar(kt)),b=new function(t){var e={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:e,programs:null,autoReset:!0,reset:function(){e.frame++,e.calls=0,e.triangles=0,e.points=0,e.lines=0},update:function(n,r,i){switch(i=i||1,e.calls++,r){case t.TRIANGLES:e.triangles+=i*(n/3);break;case t.TRIANGLE_STRIP:case t.TRIANGLE_FAN:e.triangles+=i*(n-2);break;case t.LINES:e.lines+=i*(n/2);break;case t.LINE_STRIP:e.lines+=i*(n-1);break;case t.LINE_LOOP:e.lines+=i*n;break;case t.POINTS:e.points+=i*n;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",r)}}}}(d),w=new function(){var t=new WeakMap;return{get:function(e){var n=t.get(e);return void 0===n&&t.set(e,n={}),n},remove:function(e){t.delete(e)},update:function(e,n,r){t.get(e)[n]=r},dispose:function(){t=new WeakMap}}},x=new function(t,e,n,r,i,o,a){var s,u={};function l(t,e){if(t.width>e||t.height>e){if("data"in t)return void console.warn("THREE.WebGLRenderer: image in DataTexture is too big ("+t.width+"x"+t.height+").");var n=e/Math.max(t.width,t.height),r=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return r.width=Math.floor(t.width*n),r.height=Math.floor(t.height*n),r.getContext("2d").drawImage(t,0,0,t.width,t.height,0,0,r.width,r.height),console.warn("THREE.WebGLRenderer: image is too big ("+t.width+"x"+t.height+"). Resized to "+r.width+"x"+r.height),r}return t}function c(t){return Ke.isPowerOfTwo(t.width)&&Ke.isPowerOfTwo(t.height)}function h(t,e){return t.generateMipmaps&&e&&t.minFilter!==Pt&&t.minFilter!==Lt}function d(e,n,i,o){t.generateMipmap(e),r.get(n).__maxMipLevel=Math.log(Math.max(i,o))*Math.LOG2E}function p(e,n){if(!i.isWebGL2)return e;if(e===t.RED){if(n===t.FLOAT)return t.R32F;if(n===t.HALF_FLOAT)return t.R16F;if(n===t.UNSIGNED_BYTE)return t.R8}if(e===t.RGB){if(n===t.FLOAT)return t.RGB32F;if(n===t.HALF_FLOAT)return t.RGB16F;if(n===t.UNSIGNED_BYTE)return t.RGB8}if(e===t.RGBA){if(n===t.FLOAT)return t.RGBA32F;if(n===t.HALF_FLOAT)return t.RGBA16F;if(n===t.UNSIGNED_BYTE)return t.RGBA8}return e}function f(e){return e===Pt||e===Ot||e===Rt?t.NEAREST:t.LINEAR}function m(e){var n=e.target;n.removeEventListener("dispose",m),function(e){var n=r.get(e);if(e.image&&n.__image__webglTextureCube)t.deleteTexture(n.__image__webglTextureCube);else{if(void 0===n.__webglInit)return;t.deleteTexture(n.__webglTexture)}r.remove(e)}(n),n.isVideoTexture&&delete u[n.id],a.memory.textures--}function v(e){var n=e.target;n.removeEventListener("dispose",v),function(e){var n=r.get(e),i=r.get(e.texture);if(e){if(void 0!==i.__webglTexture&&t.deleteTexture(i.__webglTexture),e.depthTexture&&e.depthTexture.dispose(),e.isWebGLRenderTargetCube)for(var o=0;o<6;o++)t.deleteFramebuffer(n.__webglFramebuffer[o]),n.__webglDepthbuffer&&t.deleteRenderbuffer(n.__webglDepthbuffer[o]);else t.deleteFramebuffer(n.__webglFramebuffer),n.__webglDepthbuffer&&t.deleteRenderbuffer(n.__webglDepthbuffer);r.remove(e.texture),r.remove(e)}}(n),a.memory.textures--}function g(e,i){var o=r.get(e);if(e.isVideoTexture&&function(t){var e=t.id,n=a.render.frame;u[e]!==n&&(u[e]=n,t.update())}(e),e.version>0&&o.__version!==e.version){var s=e.image;if(void 0===s)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==s.complete)return void _(o,e,i);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.activeTexture(t.TEXTURE0+i),n.bindTexture(t.TEXTURE_2D,o.__webglTexture)}function y(n,a,s){var u;if(s?(t.texParameteri(n,t.TEXTURE_WRAP_S,o.convert(a.wrapS)),t.texParameteri(n,t.TEXTURE_WRAP_T,o.convert(a.wrapT)),t.texParameteri(n,t.TEXTURE_MAG_FILTER,o.convert(a.magFilter)),t.texParameteri(n,t.TEXTURE_MIN_FILTER,o.convert(a.minFilter))):(t.texParameteri(n,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(n,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),a.wrapS===Ct&&a.wrapT===Ct||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(n,t.TEXTURE_MAG_FILTER,f(a.magFilter)),t.texParameteri(n,t.TEXTURE_MIN_FILTER,f(a.minFilter)),a.minFilter!==Pt&&a.minFilter!==Lt&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),u=e.get("EXT_texture_filter_anisotropic")){if(a.type===Gt&&null===e.get("OES_texture_float_linear"))return;if(a.type===Vt&&null===(i.isWebGL2||e.get("OES_texture_half_float_linear")))return;(a.anisotropy>1||r.get(a).__currentAnisotropy)&&(t.texParameterf(n,u.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,i.getMaxAnisotropy())),r.get(a).__currentAnisotropy=a.anisotropy)}}function _(e,r,u){var f;f=r.isDataTexture3D?t.TEXTURE_3D:t.TEXTURE_2D,void 0===e.__webglInit&&(e.__webglInit=!0,r.addEventListener("dispose",m),e.__webglTexture=t.createTexture(),a.memory.textures++),n.activeTexture(t.TEXTURE0+u),n.bindTexture(f,e.__webglTexture),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,r.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,r.unpackAlignment);var v=l(r.image,i.maxTextureSize);(function(t){return!i.isWebGL2&&(t.wrapS!==Ct||t.wrapT!==Ct||t.minFilter!==Pt&&t.minFilter!==Lt)})(r)&&!1===c(v)&&(v=function(t){return t instanceof HTMLImageElement||t instanceof HTMLCanvasElement||t instanceof ImageBitmap?(void 0===s&&(s=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),s.width=Ke.floorPowerOfTwo(t.width),s.height=Ke.floorPowerOfTwo(t.height),s.getContext("2d").drawImage(t,0,0,s.width,s.height),console.warn("THREE.WebGLRenderer: image is not power of two ("+t.width+"x"+t.height+"). Resized to "+s.width+"x"+s.height),s):t}(v));var g=c(v),_=o.convert(r.format),b=o.convert(r.type),w=p(_,b);y(f,r,g);var x,E=r.mipmaps;if(r.isDepthTexture){if(w=t.DEPTH_COMPONENT,r.type===Gt){if(!i.isWebGL2)throw new Error("Float Depth Texture only supported in WebGL2.0");w=t.DEPTH_COMPONENT32F}else i.isWebGL2&&(w=t.DEPTH_COMPONENT16);r.format===$t&&w===t.DEPTH_COMPONENT&&r.type!==jt&&r.type!==Bt&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),r.type=jt,b=o.convert(r.type)),r.format===te&&(w=t.DEPTH_STENCIL,r.type!==qt&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),r.type=qt,b=o.convert(r.type))),n.texImage2D(t.TEXTURE_2D,0,w,v.width,v.height,0,_,b,null)}else if(r.isDataTexture)if(E.length>0&&g){for(var S=0,T=E.length;S<T;S++)n.texImage2D(t.TEXTURE_2D,S,w,(x=E[S]).width,x.height,0,_,b,x.data);r.generateMipmaps=!1,e.__maxMipLevel=E.length-1}else n.texImage2D(t.TEXTURE_2D,0,w,v.width,v.height,0,_,b,v.data),e.__maxMipLevel=0;else if(r.isCompressedTexture){for(S=0,T=E.length;S<T;S++)x=E[S],r.format!==Kt&&r.format!==Yt?n.getCompressedTextureFormats().indexOf(_)>-1?n.compressedTexImage2D(t.TEXTURE_2D,S,w,x.width,x.height,0,x.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(t.TEXTURE_2D,S,w,x.width,x.height,0,_,b,x.data);e.__maxMipLevel=E.length-1}else if(r.isDataTexture3D)n.texImage3D(t.TEXTURE_3D,0,w,v.width,v.height,v.depth,0,_,b,v.data),e.__maxMipLevel=0;else if(E.length>0&&g){for(S=0,T=E.length;S<T;S++)n.texImage2D(t.TEXTURE_2D,S,w,_,b,x=E[S]);r.generateMipmaps=!1,e.__maxMipLevel=E.length-1}else n.texImage2D(t.TEXTURE_2D,0,w,_,b,v),e.__maxMipLevel=0;h(r,g)&&d(t.TEXTURE_2D,r,v.width,v.height),e.__version=r.version,r.onUpdate&&r.onUpdate(r)}function b(e,i,a,s){var u=o.convert(i.texture.format),l=o.convert(i.texture.type),c=p(u,l);n.texImage2D(s,0,c,i.width,i.height,0,u,l,null),t.bindFramebuffer(t.FRAMEBUFFER,e),t.framebufferTexture2D(t.FRAMEBUFFER,a,s,r.get(i.texture).__webglTexture,0),t.bindFramebuffer(t.FRAMEBUFFER,null)}function w(e,n){t.bindRenderbuffer(t.RENDERBUFFER,e),n.depthBuffer&&!n.stencilBuffer?(t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,n.width,n.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,e)):n.depthBuffer&&n.stencilBuffer?(t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,n.width,n.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,e)):t.renderbufferStorage(t.RENDERBUFFER,t.RGBA4,n.width,n.height),t.bindRenderbuffer(t.RENDERBUFFER,null)}this.setTexture2D=g,this.setTexture3D=function(e,i){var o=r.get(e);e.version>0&&o.__version!==e.version?_(o,e,i):(n.activeTexture(t.TEXTURE0+i),n.bindTexture(t.TEXTURE_3D,o.__webglTexture))},this.setTextureCube=function(e,s){var u=r.get(e);if(6===e.image.length)if(e.version>0&&u.__version!==e.version){u.__image__webglTextureCube||(e.addEventListener("dispose",m),u.__image__webglTextureCube=t.createTexture(),a.memory.textures++),n.activeTexture(t.TEXTURE0+s),n.bindTexture(t.TEXTURE_CUBE_MAP,u.__image__webglTextureCube),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,e.flipY);for(var f=e&&e.isCompressedTexture,v=e.image[0]&&e.image[0].isDataTexture,g=[],_=0;_<6;_++)g[_]=f||v?v?e.image[_].image:e.image[_]:l(e.image[_],i.maxCubemapSize);var b=g[0],w=c(b),x=o.convert(e.format),E=o.convert(e.type),S=p(x,E);for(y(t.TEXTURE_CUBE_MAP,e,w),_=0;_<6;_++)if(f)for(var T,M=g[_].mipmaps,C=0,A=M.length;C<A;C++)T=M[C],e.format!==Kt&&e.format!==Yt?n.getCompressedTextureFormats().indexOf(x)>-1?n.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+_,C,S,T.width,T.height,0,T.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+_,C,S,T.width,T.height,0,x,E,T.data);else v?n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+_,0,S,g[_].width,g[_].height,0,x,E,g[_].data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+_,0,S,x,E,g[_]);u.__maxMipLevel=f?M.length-1:0,h(e,w)&&d(t.TEXTURE_CUBE_MAP,e,b.width,b.height),u.__version=e.version,e.onUpdate&&e.onUpdate(e)}else n.activeTexture(t.TEXTURE0+s),n.bindTexture(t.TEXTURE_CUBE_MAP,u.__image__webglTextureCube)},this.setTextureCubeDynamic=function(e,i){n.activeTexture(t.TEXTURE0+i),n.bindTexture(t.TEXTURE_CUBE_MAP,r.get(e).__webglTexture)},this.setupRenderTarget=function(e){var i=r.get(e),o=r.get(e.texture);e.addEventListener("dispose",v),o.__webglTexture=t.createTexture(),a.memory.textures++;var s=!0===e.isWebGLRenderTargetCube,u=c(e);if(s){i.__webglFramebuffer=[];for(var l=0;l<6;l++)i.__webglFramebuffer[l]=t.createFramebuffer()}else i.__webglFramebuffer=t.createFramebuffer();if(s){for(n.bindTexture(t.TEXTURE_CUBE_MAP,o.__webglTexture),y(t.TEXTURE_CUBE_MAP,e.texture,u),l=0;l<6;l++)b(i.__webglFramebuffer[l],e,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+l);h(e.texture,u)&&d(t.TEXTURE_CUBE_MAP,e.texture,e.width,e.height),n.bindTexture(t.TEXTURE_CUBE_MAP,null)}else n.bindTexture(t.TEXTURE_2D,o.__webglTexture),y(t.TEXTURE_2D,e.texture,u),b(i.__webglFramebuffer,e,t.COLOR_ATTACHMENT0,t.TEXTURE_2D),h(e.texture,u)&&d(t.TEXTURE_2D,e.texture,e.width,e.height),n.bindTexture(t.TEXTURE_2D,null);e.depthBuffer&&function(e){var n=r.get(e),i=!0===e.isWebGLRenderTargetCube;if(e.depthTexture){if(i)throw new Error("target.depthTexture not supported in Cube render targets");!function(e,n){if(n&&n.isWebGLRenderTargetCube)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(t.FRAMEBUFFER,e),!n.depthTexture||!n.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(n.depthTexture).__webglTexture&&n.depthTexture.image.width===n.width&&n.depthTexture.image.height===n.height||(n.depthTexture.image.width=n.width,n.depthTexture.image.height=n.height,n.depthTexture.needsUpdate=!0),g(n.depthTexture,0);var i=r.get(n.depthTexture).__webglTexture;if(n.depthTexture.format===$t)t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,i,0);else{if(n.depthTexture.format!==te)throw new Error("Unknown depthTexture format");t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,i,0)}}(n.__webglFramebuffer,e)}else if(i){n.__webglDepthbuffer=[];for(var o=0;o<6;o++)t.bindFramebuffer(t.FRAMEBUFFER,n.__webglFramebuffer[o]),n.__webglDepthbuffer[o]=t.createRenderbuffer(),w(n.__webglDepthbuffer[o],e)}else t.bindFramebuffer(t.FRAMEBUFFER,n.__webglFramebuffer),n.__webglDepthbuffer=t.createRenderbuffer(),w(n.__webglDepthbuffer,e);t.bindFramebuffer(t.FRAMEBUFFER,null)}(e)},this.updateRenderTargetMipmap=function(e){var i=e.texture;if(h(i,c(e))){var o=e.isWebGLRenderTargetCube?t.TEXTURE_CUBE_MAP:t.TEXTURE_2D,a=r.get(i).__webglTexture;n.bindTexture(o,a),d(o,i,e.width,e.height),n.bindTexture(o,null)}}}(d,p,v,w,f,W,b),E=new function(t){var e=new WeakMap;return{get:function(t){return t.isInterleavedBufferAttribute&&(t=t.data),e.get(t)},remove:function(n){n.isInterleavedBufferAttribute&&(n=n.data);var r=e.get(n);r&&(t.deleteBuffer(r.buffer),e.delete(n))},update:function(n,r){n.isInterleavedBufferAttribute&&(n=n.data);var i=e.get(n);void 0===i?e.set(n,function(e,n){var r=e.array,i=e.dynamic?t.DYNAMIC_DRAW:t.STATIC_DRAW,o=t.createBuffer();t.bindBuffer(n,o),t.bufferData(n,r,i),e.onUploadCallback();var a=t.FLOAT;return r instanceof Float32Array?a=t.FLOAT:r instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):r instanceof Uint16Array?a=t.UNSIGNED_SHORT:r instanceof Int16Array?a=t.SHORT:r instanceof Uint32Array?a=t.UNSIGNED_INT:r instanceof Int32Array?a=t.INT:r instanceof Int8Array?a=t.BYTE:r instanceof Uint8Array&&(a=t.UNSIGNED_BYTE),{buffer:o,type:a,bytesPerElement:r.BYTES_PER_ELEMENT,version:e.version}}(n,r)):i.version<n.version&&(function(e,n,r){var o=n.array,a=n.updateRange;t.bindBuffer(r,i.buffer),!1===n.dynamic?t.bufferData(r,o,t.STATIC_DRAW):-1===a.count?t.bufferSubData(r,0,o):0===a.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(t.bufferSubData(r,a.offset*o.BYTES_PER_ELEMENT,o.subarray(a.offset,a.offset+a.count)),a.count=-1)}(0,n,r),i.version=n.version)}}}(d),P=new function(t,e,n){var r={},i={};function o(t){var a=t.target,s=r[a.id];for(var u in null!==s.index&&e.remove(s.index),s.attributes)e.remove(s.attributes[u]);a.removeEventListener("dispose",o),delete r[a.id];var l=i[s.id];l&&(e.remove(l),delete i[s.id]),n.memory.geometries--}return{get:function(t,e){var i=r[e.id];return i||(e.addEventListener("dispose",o),e.isBufferGeometry?i=e:e.isGeometry&&(void 0===e._bufferGeometry&&(e._bufferGeometry=(new er).setFromObject(t)),i=e._bufferGeometry),r[e.id]=i,n.memory.geometries++,i)},update:function(n){var r=n.index,i=n.attributes;for(var o in null!==r&&e.update(r,t.ELEMENT_ARRAY_BUFFER),i)e.update(i[o],t.ARRAY_BUFFER);var a=n.morphAttributes;for(var o in a)for(var s=a[o],u=0,l=s.length;u<l;u++)e.update(s[u],t.ARRAY_BUFFER)},getWireframeAttribute:function(n){var r=i[n.id];if(r)return r;var o,a=[],s=n.index,u=n.attributes;if(null!==s)for(var l=0,c=(o=s.array).length;l<c;l+=3)a.push(h=o[l+0],d=o[l+1],d,p=o[l+2],p,h);else for(l=0,c=(o=u.position.array).length/3-1;l<c;l+=3){var h,d,p;a.push(h=l+0,d=l+1,d,p=l+2,p,h)}return r=new($n(a)>65535?Kn:Xn)(a,1),e.update(r,t.ELEMENT_ARRAY_BUFFER),i[n.id]=r,r}}}(d,E,b),O=new function(t,e){var n={};return{update:function(r){var i=e.render.frame,o=r.geometry,a=t.get(r,o);return n[a.id]!==i&&(o.isGeometry&&a.updateFromObject(r),t.update(a),n[a.id]=i),a},dispose:function(){n={}}}}(P,b),V=new function(t){var e={},n=new Float32Array(8);return{update:function(r,i,o,a){var s=r.morphTargetInfluences,u=s.length,l=e[i.id];if(void 0===l){l=[];for(var c=0;c<u;c++)l[c]=[c,0];e[i.id]=l}var h=o.morphTargets&&i.morphAttributes.position,d=o.morphNormals&&i.morphAttributes.normal;for(c=0;c<u;c++)0!==(p=l[c])[1]&&(h&&i.removeAttribute("morphTarget"+c),d&&i.removeAttribute("morphNormal"+c));for(c=0;c<u;c++)(p=l[c])[0]=c,p[1]=s[c];for(l.sort(Tr),c=0;c<8;c++){var p;if(p=l[c]){var f=p[0],m=p[1];if(m){h&&i.addAttribute("morphTarget"+c,h[f]),d&&i.addAttribute("morphNormal"+c,d[f]),n[c]=m;continue}}n[c]=0}a.getUniforms().setValue(t,"morphTargetInfluences",n)}}}(d),R=new function(t,e,n){var r=[],i={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},o=["precision","supportsVertexTextures","map","mapEncoding","matcapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","fog","useFog","fogExp","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering"];function a(t,e){var n;return t?t.isTexture?n=t.encoding:t.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),n=t.texture.encoding):n=Fe,n===Fe&&e&&(n=Ue),n}this.getParameters=function(e,r,o,s,u,l,c){var h=i[e.type],d=c.isSkinnedMesh?function(t){var e=t.skeleton.bones;if(n.floatVertexTextures)return 1024;var r=Math.floor((n.maxVertexUniforms-20)/4),i=Math.min(r,e.length);return i<e.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+e.length+" bones. This GPU supports "+i+"."),0):i}(c):0,p=n.precision;null!==e.precision&&(p=n.getMaxPrecision(e.precision))!==e.precision&&console.warn("THREE.WebGLProgram.getParameters:",e.precision,"not supported, using",p,"instead.");var f=t.getRenderTarget();return{shaderID:h,precision:p,supportsVertexTextures:n.vertexTextures,outputEncoding:a(f?f.texture:null,t.gammaOutput),map:!!e.map,mapEncoding:a(e.map,t.gammaInput),matcap:!!e.matcap,matcapEncoding:a(e.matcap,t.gammaInput),envMap:!!e.envMap,envMapMode:e.envMap&&e.envMap.mapping,envMapEncoding:a(e.envMap,t.gammaInput),envMapCubeUV:!!e.envMap&&(e.envMap.mapping===St||e.envMap.mapping===Tt),lightMap:!!e.lightMap,aoMap:!!e.aoMap,emissiveMap:!!e.emissiveMap,emissiveMapEncoding:a(e.emissiveMap,t.gammaInput),bumpMap:!!e.bumpMap,normalMap:!!e.normalMap,objectSpaceNormalMap:e.normalMapType===Ye,displacementMap:!!e.displacementMap,roughnessMap:!!e.roughnessMap,metalnessMap:!!e.metalnessMap,specularMap:!!e.specularMap,alphaMap:!!e.alphaMap,gradientMap:!!e.gradientMap,combine:e.combine,vertexColors:e.vertexColors,fog:!!s,useFog:e.fog,fogExp:s&&s.isFogExp2,flatShading:e.flatShading,sizeAttenuation:e.sizeAttenuation,logarithmicDepthBuffer:n.logarithmicDepthBuffer,skinning:e.skinning&&d>0,maxBones:d,useVertexTexture:n.floatVertexTextures,morphTargets:e.morphTargets,morphNormals:e.morphNormals,maxMorphTargets:t.maxMorphTargets,maxMorphNormals:t.maxMorphNormals,numDirLights:r.directional.length,numPointLights:r.point.length,numSpotLights:r.spot.length,numRectAreaLights:r.rectArea.length,numHemiLights:r.hemi.length,numClippingPlanes:u,numClipIntersection:l,dithering:e.dithering,shadowMapEnabled:t.shadowMap.enabled&&c.receiveShadow&&o.length>0,shadowMapType:t.shadowMap.type,toneMapping:t.toneMapping,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:e.premultipliedAlpha,alphaTest:e.alphaTest,doubleSided:e.side===A,flipSided:e.side===C,depthPacking:void 0!==e.depthPacking&&e.depthPacking}},this.getProgramCode=function(e,n){var r=[];if(n.shaderID?r.push(n.shaderID):(r.push(e.fragmentShader),r.push(e.vertexShader)),void 0!==e.defines)for(var i in e.defines)r.push(i),r.push(e.defines[i]);for(var a=0;a<o.length;a++)r.push(n[o[a]]);return r.push(e.onBeforeCompile.toString()),r.push(t.gammaOutput),r.join()},this.acquireProgram=function(i,o,a,s){for(var u,l=0,c=r.length;l<c;l++){var h=r[l];if(h.code===s){++(u=h).usedTimes;break}}return void 0===u&&(u=new function(t,e,n,r,i,o,a){var s=t.context,u=r.defines,l=i.vertexShader,c=i.fragmentShader,h="SHADOWMAP_TYPE_BASIC";o.shadowMapType===S?h="SHADOWMAP_TYPE_PCF":o.shadowMapType===T&&(h="SHADOWMAP_TYPE_PCF_SOFT");var d="ENVMAP_TYPE_CUBE",p="ENVMAP_MODE_REFLECTION",f="ENVMAP_BLENDING_MULTIPLY";if(o.envMap){switch(r.envMap.mapping){case _t:case bt:d="ENVMAP_TYPE_CUBE";break;case St:case Tt:d="ENVMAP_TYPE_CUBE_UV";break;case wt:case xt:d="ENVMAP_TYPE_EQUIREC";break;case Et:d="ENVMAP_TYPE_SPHERE"}switch(r.envMap.mapping){case bt:case xt:p="ENVMAP_MODE_REFRACTION"}switch(r.combine){case ct:f="ENVMAP_BLENDING_MULTIPLY";break;case ht:f="ENVMAP_BLENDING_MIX";break;case dt:f="ENVMAP_BLENDING_ADD"}}var m,v,g,y,_,b=t.gammaFactor>0?t.gammaFactor:1,w=a.isWebGL2?"":function(t,e,n){return[(t=t||{}).derivatives||e.envMapCubeUV||e.bumpMap||e.normalMap&&!e.objectSpaceNormalMap||e.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(t.fragDepth||e.logarithmicDepthBuffer)&&n.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",t.drawBuffers&&n.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(t.shaderTextureLOD||e.envMap)&&n.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""].filter(xi).join("\n")}(r.extensions,o,e),x=function(t){var e=[];for(var n in t){var r=t[n];!1!==r&&e.push("#define "+n+" "+r)}return e.join("\n")}(u),E=s.createProgram();if(r.isRawShaderMaterial?((m=[x].filter(xi).join("\n")).length>0&&(m+="\n"),(v=[w,x].filter(xi).join("\n")).length>0&&(v+="\n")):(m=["precision "+o.precision+" float;","precision "+o.precision+" int;","#define SHADER_NAME "+i.name,x,o.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+b,"#define MAX_BONES "+o.maxBones,o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fogExp?"#define FOG_EXP2":"",o.map?"#define USE_MAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+p:"",o.lightMap?"#define USE_LIGHTMAP":"",o.aoMap?"#define USE_AOMAP":"",o.emissiveMap?"#define USE_EMISSIVEMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.normalMap&&o.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",o.displacementMap&&o.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.roughnessMap?"#define USE_ROUGHNESSMAP":"",o.metalnessMap?"#define USE_METALNESSMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.vertexColors?"#define USE_COLOR":"",o.flatShading?"#define FLAT_SHADED":"",o.skinning?"#define USE_SKINNING":"",o.useVertexTexture?"#define BONE_TEXTURE":"",o.morphTargets?"#define USE_MORPHTARGETS":"",o.morphNormals&&!1===o.flatShading?"#define USE_MORPHNORMALS":"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"",o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+h:"",o.sizeAttenuation?"#define USE_SIZEATTENUATION":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",o.logarithmicDepthBuffer&&(a.isWebGL2||e.get("EXT_frag_depth"))?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(xi).join("\n"),v=[w,"precision "+o.precision+" float;","precision "+o.precision+" int;","#define SHADER_NAME "+i.name,x,o.alphaTest?"#define ALPHATEST "+o.alphaTest+(o.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+b,o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fogExp?"#define FOG_EXP2":"",o.map?"#define USE_MAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+d:"",o.envMap?"#define "+p:"",o.envMap?"#define "+f:"",o.lightMap?"#define USE_LIGHTMAP":"",o.aoMap?"#define USE_AOMAP":"",o.emissiveMap?"#define USE_EMISSIVEMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.normalMap&&o.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.roughnessMap?"#define USE_ROUGHNESSMAP":"",o.metalnessMap?"#define USE_METALNESSMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.vertexColors?"#define USE_COLOR":"",o.gradientMap?"#define USE_GRADIENTMAP":"",o.flatShading?"#define FLAT_SHADED":"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"",o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+h:"",o.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",o.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",o.logarithmicDepthBuffer&&(a.isWebGL2||e.get("EXT_frag_depth"))?"#define USE_LOGDEPTHBUF_EXT":"",o.envMap&&(a.isWebGL2||e.get("EXT_shader_texture_lod"))?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",o.toneMapping!==pt?"#define TONE_MAPPING":"",o.toneMapping!==pt?wn.tonemapping_pars_fragment:"",o.toneMapping!==pt?function(t,e){var n;switch(e){case ft:n="Linear";break;case mt:n="Reinhard";break;case vt:n="Uncharted2";break;case gt:n="OptimizedCineon";break;default:throw new Error("unsupported toneMapping: "+e)}return"vec3 toneMapping( vec3 color ) { return "+n+"ToneMapping( color ); }"}(0,o.toneMapping):"",o.dithering?"#define DITHERING":"",o.outputEncoding||o.mapEncoding||o.matcapEncoding||o.envMapEncoding||o.emissiveMapEncoding?wn.encodings_pars_fragment:"",o.mapEncoding?wi("mapTexelToLinear",o.mapEncoding):"",o.matcapEncoding?wi("matcapTexelToLinear",o.matcapEncoding):"",o.envMapEncoding?wi("envMapTexelToLinear",o.envMapEncoding):"",o.emissiveMapEncoding?wi("emissiveMapTexelToLinear",o.emissiveMapEncoding):"",o.outputEncoding?(g="linearToOutputTexel",y=o.outputEncoding,_=bi(y),"vec4 "+g+"( vec4 value ) { return LinearTo"+_[0]+_[1]+"; }"):"",o.depthPacking?"#define DEPTH_PACKING "+r.depthPacking:"","\n"].filter(xi).join("\n")),l=Si(l=Ei(l=Ti(l),o),o),c=Si(c=Ei(c=Ti(c),o),o),l=Mi(l),c=Mi(c),a.isWebGL2&&!r.isRawShaderMaterial){var M=!1,C=/^\s*#version\s+300\s+es\s*\n/;r.isShaderMaterial&&null!==l.match(C)&&null!==c.match(C)&&(M=!0,l=l.replace(C,""),c=c.replace(C,"")),m=["#version 300 es\n","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+m,v=["#version 300 es\n","#define varying in",M?"":"out highp vec4 pc_fragColor;",M?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+v}var A=v+c,P=yi(s,s.VERTEX_SHADER,m+l),O=yi(s,s.FRAGMENT_SHADER,A);s.attachShader(E,P),s.attachShader(E,O),void 0!==r.index0AttributeName?s.bindAttribLocation(E,0,r.index0AttributeName):!0===o.morphTargets&&s.bindAttribLocation(E,0,"position"),s.linkProgram(E);var R,L,I=s.getProgramInfoLog(E).trim(),N=s.getShaderInfoLog(P).trim(),D=s.getShaderInfoLog(O).trim(),k=!0,F=!0;return!1===s.getProgramParameter(E,s.LINK_STATUS)?(k=!1,console.error("THREE.WebGLProgram: shader error: ",s.getError(),"gl.VALIDATE_STATUS",s.getProgramParameter(E,s.VALIDATE_STATUS),"gl.getProgramInfoLog",I,N,D)):""!==I?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",I):""!==N&&""!==D||(F=!1),F&&(this.diagnostics={runnable:k,material:r,programLog:I,vertexShader:{log:N,prefix:m},fragmentShader:{log:D,prefix:v}}),s.deleteShader(P),s.deleteShader(O),this.getUniforms=function(){return void 0===R&&(R=new gi(s,E,t)),R},this.getAttributes=function(){return void 0===L&&(L=function(t,e){for(var n={},r=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),i=0;i<r;i++){var o=t.getActiveAttrib(e,i).name;n[o]=t.getAttribLocation(e,o)}return n}(s,E)),L},this.destroy=function(){s.deleteProgram(E),this.program=void 0},Object.defineProperties(this,{uniforms:{get:function(){return console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms()."),this.getUniforms()}},attributes:{get:function(){return console.warn("THREE.WebGLProgram: .attributes is now .getAttributes()."),this.getAttributes()}}}),this.name=i.name,this.id=_i++,this.code=n,this.usedTimes=1,this.program=E,this.vertexShader=P,this.fragmentShader=O,this}(t,e,s,i,o,a,n),r.push(u)),u},this.releaseProgram=function(t){if(0==--t.usedTimes){var e=r.indexOf(t);r[e]=r[r.length-1],r.pop(),t.destroy()}},this.programs=r}(q,p,f),L=new function(){var t={};return{get:function(e,n){var r=e.id+","+n.id,i=t[r];return void 0===i&&(i=new function(){var t=[],e=0,n=[],r=[];return{opaque:n,transparent:r,init:function(){e=0,n.length=0,r.length=0},push:function(i,o,a,s,u){var l=t[e];void 0===l?t[e]=l={id:i.id,object:i,geometry:o,material:a,program:a.program,renderOrder:i.renderOrder,z:s,group:u}:(l.id=i.id,l.object=i,l.geometry=o,l.material=a,l.program=a.program,l.renderOrder=i.renderOrder,l.z=s,l.group=u),(!0===a.transparent?r:n).push(l),e++},sort:function(){n.length>1&&n.sort(Ci),r.length>1&&r.sort(Ai)}}},t[r]=i),i},dispose:function(){t={}}}},I=new function(){var t={};return{get:function(e,n){var r;return void 0===t[e.id]?(r=new ki,t[e.id]={},t[e.id][n.id]=r):void 0===t[e.id][n.id]?(r=new ki,t[e.id][n.id]=r):r=t[e.id][n.id],r},dispose:function(){t={}}}},G=new function(t,e,n,r){var i,o,a=new Sn(0),s=0;function u(t,n){e.buffers.color.setClear(t.r,t.g,t.b,n,r)}return{getClearColor:function(){return a},setClearColor:function(t,e){a.set(t),u(a,s=void 0!==e?e:1)},getClearAlpha:function(){return s},setClearAlpha:function(t){u(a,s=t)},render:function(e,r,l,c){var h=r.background;null===h?u(a,s):h&&h.isColor&&(u(h,1),c=!0),(t.autoClear||c)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),h&&h.isCubeTexture?(void 0===o&&((o=new Sr(new rr(1,1,1),new br({uniforms:xn.clone(Cn.cube.uniforms),vertexShader:Cn.cube.vertexShader,fragmentShader:Cn.cube.fragmentShader,side:C,depthTest:!0,depthWrite:!1,fog:!1}))).geometry.removeAttribute("normal"),o.geometry.removeAttribute("uv"),o.onBeforeRender=function(t,e,n){this.matrixWorld.copyPosition(n.matrixWorld)},n.update(o)),o.material.uniforms.tCube.value=h,e.push(o,o.geometry,o.material,0,null)):h&&h.isTexture&&(void 0===i&&((i=new Sr(new or(2,2),new br({uniforms:xn.clone(Cn.background.uniforms),vertexShader:Cn.background.vertexShader,fragmentShader:Cn.background.fragmentShader,side:M,depthTest:!0,depthWrite:!1,fog:!1}))).geometry.removeAttribute("normal"),n.update(i)),i.material.uniforms.t2D.value=h,e.push(i,i.geometry,i.material,0,null))}}}(q,v,O,s),z=new function(t,e,n,r){var i;this.setMode=function(t){i=t},this.render=function(e,r){t.drawArrays(i,e,r),n.update(r,i)},this.renderInstances=function(o,a,s){var u;if(r.isWebGL2)u=t;else if(null===(u=e.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[r.isWebGL2?"drawArraysInstanced":"drawArraysInstancedANGLE"](i,a,s,o.maxInstancedCount),n.update(s,i,o.maxInstancedCount)}}(d,p,b,f),H=new function(t,e,n,r){var i,o,a;this.setMode=function(t){i=t},this.setIndex=function(t){o=t.type,a=t.bytesPerElement},this.render=function(e,r){t.drawElements(i,r,o,e*a),n.update(r,i)},this.renderInstances=function(s,u,l){var c;if(r.isWebGL2)c=t;else if(null===(c=e.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");c[r.isWebGL2?"drawElementsInstanced":"drawElementsInstancedANGLE"](i,l,o,u*a,s.maxInstancedCount),n.update(l,i,s.maxInstancedCount)}}(d,p,b,f),b.programs=R.programs,q.context=d,q.capabilities=f,q.extensions=p,q.properties=w,q.renderLists=L,q.state=v,q.info=b}re();var ie=null;"undefined"!=typeof navigator&&(ie="xr"in navigator?new function(t){var e=t.context,n=null,r=null,i=null,o="stage",a=null,s=[],u=[];function l(){return null!==r&&null!==i}var c=new zi;c.layers.enable(1),c.viewport=new cn;var h=new zi;h.layers.enable(2),h.viewport=new cn;var d=new Hi([c,h]);function p(t){var e=s[u.indexOf(t.inputSource)];e&&e.dispatchEvent({type:t.type})}function f(){t.setFramebuffer(null),g.stop()}function m(t,e){null===e?t.matrixWorld.copy(t.matrix):t.matrixWorld.multiplyMatrices(e.matrixWorld,t.matrix),t.matrixWorldInverse.getInverse(t.matrixWorld)}d.layers.enable(1),d.layers.enable(2),this.enabled=!1,this.getController=function(t){var e=s[t];return void 0===e&&((e=new Gi).matrixAutoUpdate=!1,e.visible=!1,s[t]=e),e},this.getDevice=function(){return n},this.setDevice=function(t){void 0!==t&&(n=t),t instanceof XRDevice&&e.setCompatibleXRDevice(t)},this.setFrameOfReferenceType=function(t){o=t},this.setSession=function(n){null!==(r=n)&&(r.addEventListener("select",p),r.addEventListener("selectstart",p),r.addEventListener("selectend",p),r.addEventListener("end",f),r.baseLayer=new XRWebGLLayer(r,e),r.requestFrameOfReference(o).then(function(e){i=e,t.setFramebuffer(r.baseLayer.framebuffer),g.setContext(r),g.start()}),u=r.getInputSources(),r.addEventListener("inputsourceschange",function(){u=r.getInputSources(),console.log(u)}))},this.getCamera=function(t){if(l()){var e=t.parent,n=d.cameras;m(d,e);for(var r=0;r<n.length;r++)m(n[r],e);t.matrixWorld.copy(d.matrixWorld);for(var i=t.children,o=(r=0,i.length);r<o;r++)i[r].updateMatrixWorld(!0);return d}return t},this.isPresenting=l;var v=null,g=new An;g.setAnimationLoop(function(t,e){if(null!==(a=e.getDevicePose(i)))for(var n=r.baseLayer,o=e.views,l=0;l<o.length;l++){var c=o[l],h=n.getViewport(c),p=a.getViewMatrix(c),f=d.cameras[l];f.matrix.fromArray(p).getInverse(f.matrix),f.projectionMatrix.fromArray(c.projectionMatrix),f.viewport.set(h.x,h.y,h.width,h.height),0===l&&(d.matrix.copy(f.matrix),d.projectionMatrix.copy(f.projectionMatrix))}for(l=0;l<s.length;l++){var m=s[l],g=u[l];if(g){var y=e.getInputPose(g,i);if(null!==y){"targetRay"in y?m.matrix.elements=y.targetRay.transformMatrix:"pointerMatrix"in y&&(m.matrix.elements=y.pointerMatrix),m.matrix.decompose(m.position,m.rotation,m.scale),m.visible=!0;continue}}m.visible=!1}v&&v(t)}),this.setAnimationLoop=function(t){v=t},this.dispose=function(){},this.getStandingMatrix=function(){return console.warn("THREE.WebXRManager: getStandingMatrix() is no longer needed."),new THREE.Matrix4},this.submitFrame=function(){}}(q):new Wi(q)),this.vr=ie;var oe=new Ui(q,O,f.maxTextureSize);function ae(t){t.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),X=!0}function se(){console.log("THREE.WebGLRenderer: Context Restored."),X=!1,re()}function ue(t){var e=t.target;e.removeEventListener("dispose",ue),function(t){le(t),w.remove(t)}(e)}function le(t){var e=w.get(t).program;t.program=void 0,void 0!==e&&R.releaseProgram(e)}this.shadowMap=oe,this.getContext=function(){return d},this.getContextAttributes=function(){return d.getContextAttributes()},this.forceContextLoss=function(){var t=p.get("WEBGL_lose_context");t&&t.loseContext()},this.forceContextRestore=function(){var t=p.get("WEBGL_lose_context");t&&t.restoreContext()},this.getPixelRatio=function(){return kt},this.setPixelRatio=function(t){void 0!==t&&(kt=t,this.setSize(It,Nt,!1))},this.getSize=function(){return{width:It,height:Nt}},this.setSize=function(t,n,r){ie.isPresenting()?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(It=t,Nt=n,e.width=t*kt,e.height=n*kt,!1!==r&&(e.style.width=t+"px",e.style.height=n+"px"),this.setViewport(0,0,t,n))},this.getDrawingBufferSize=function(){return{width:It*kt,height:Nt*kt}},this.setDrawingBufferSize=function(t,n,r){It=t,Nt=n,kt=r,e.width=t*r,e.height=n*r,this.setViewport(0,0,t,n)},this.getCurrentViewport=function(){return et},this.setViewport=function(t,e,n,r){Ft.set(t,Nt-e-r,n,r),v.viewport(et.copy(Ft).multiplyScalar(kt))},this.setScissor=function(t,e,n,r){Ut.set(t,Nt-e-r,n,r),v.scissor(yt.copy(Ut).multiplyScalar(kt))},this.setScissorTest=function(t){v.setScissorTest(zt=t)},this.getClearColor=function(){return G.getClearColor()},this.setClearColor=function(){G.setClearColor.apply(G,arguments)},this.getClearAlpha=function(){return G.getClearAlpha()},this.setClearAlpha=function(){G.setClearAlpha.apply(G,arguments)},this.clear=function(t,e,n){var r=0;(void 0===t||t)&&(r|=d.COLOR_BUFFER_BIT),(void 0===e||e)&&(r|=d.DEPTH_BUFFER_BIT),(void 0===n||n)&&(r|=d.STENCIL_BUFFER_BIT),d.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",ae,!1),e.removeEventListener("webglcontextrestored",se,!1),L.dispose(),I.dispose(),w.dispose(),O.dispose(),ie.dispose(),de.stop()},this.renderBufferImmediate=function(t,e){v.initAttributes();var n=w.get(t);t.hasPositions&&!n.position&&(n.position=d.createBuffer()),t.hasNormals&&!n.normal&&(n.normal=d.createBuffer()),t.hasUvs&&!n.uv&&(n.uv=d.createBuffer()),t.hasColors&&!n.color&&(n.color=d.createBuffer());var r=e.getAttributes();t.hasPositions&&(d.bindBuffer(d.ARRAY_BUFFER,n.position),d.bufferData(d.ARRAY_BUFFER,t.positionArray,d.DYNAMIC_DRAW),v.enableAttribute(r.position),d.vertexAttribPointer(r.position,3,d.FLOAT,!1,0,0)),t.hasNormals&&(d.bindBuffer(d.ARRAY_BUFFER,n.normal),d.bufferData(d.ARRAY_BUFFER,t.normalArray,d.DYNAMIC_DRAW),v.enableAttribute(r.normal),d.vertexAttribPointer(r.normal,3,d.FLOAT,!1,0,0)),t.hasUvs&&(d.bindBuffer(d.ARRAY_BUFFER,n.uv),d.bufferData(d.ARRAY_BUFFER,t.uvArray,d.DYNAMIC_DRAW),v.enableAttribute(r.uv),d.vertexAttribPointer(r.uv,2,d.FLOAT,!1,0,0)),t.hasColors&&(d.bindBuffer(d.ARRAY_BUFFER,n.color),d.bufferData(d.ARRAY_BUFFER,t.colorArray,d.DYNAMIC_DRAW),v.enableAttribute(r.color),d.vertexAttribPointer(r.color,3,d.FLOAT,!1,0,0)),v.disableUnusedAttributes(),d.drawArrays(d.TRIANGLES,0,t.count),t.count=0},this.renderBufferDirect=function(t,e,n,r,i,o){var a=i.isMesh&&i.normalMatrix.determinant()<0;v.setMaterial(r,a);var s=ve(t,e,r,i),u=!1;J.geometry===n.id&&J.program===s.id&&J.wireframe===(!0===r.wireframe)||(J.geometry=n.id,J.program=s.id,J.wireframe=!0===r.wireframe,u=!0),i.morphTargetInfluences&&(V.update(i,n,r,s),u=!0);var l,c=n.index,h=n.attributes.position,m=1;!0===r.wireframe&&(c=P.getWireframeAttribute(n),m=2);var g=z;null!==c&&(l=E.get(c),(g=H).setIndex(l)),u&&(function(t,e,n){if(n&&n.isInstancedBufferGeometry&!f.isWebGL2&&null===p.get("ANGLE_instanced_arrays"))console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");else{v.initAttributes();var r=n.attributes,i=e.getAttributes(),o=t.defaultAttributeValues;for(var a in i){var s=i[a];if(s>=0){var u=r[a];if(void 0!==u){var l=u.normalized,c=u.itemSize,h=E.get(u);if(void 0===h)continue;var m=h.buffer,g=h.type,y=h.bytesPerElement;if(u.isInterleavedBufferAttribute){var _=u.data,b=_.stride,w=u.offset;_&&_.isInstancedInterleavedBuffer?(v.enableAttributeAndDivisor(s,_.meshPerAttribute),void 0===n.maxInstancedCount&&(n.maxInstancedCount=_.meshPerAttribute*_.count)):v.enableAttribute(s),d.bindBuffer(d.ARRAY_BUFFER,m),d.vertexAttribPointer(s,c,g,l,b*y,w*y)}else u.isInstancedBufferAttribute?(v.enableAttributeAndDivisor(s,u.meshPerAttribute),void 0===n.maxInstancedCount&&(n.maxInstancedCount=u.meshPerAttribute*u.count)):v.enableAttribute(s),d.bindBuffer(d.ARRAY_BUFFER,m),d.vertexAttribPointer(s,c,g,l,0,0)}else if(void 0!==o){var x=o[a];if(void 0!==x)switch(x.length){case 2:d.vertexAttrib2fv(s,x);break;case 3:d.vertexAttrib3fv(s,x);break;case 4:d.vertexAttrib4fv(s,x);break;default:d.vertexAttrib1fv(s,x)}}}}v.disableUnusedAttributes()}}(r,s,n),null!==c&&d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,l.buffer));var y=1/0;null!==c?y=c.count:void 0!==h&&(y=h.count);var _=n.drawRange.start*m,b=n.drawRange.count*m,w=null!==o?o.start*m:0,x=null!==o?o.count*m:1/0,S=Math.max(_,w),T=Math.min(y,_+b,w+x)-1,M=Math.max(0,T-S+1);if(0!==M){if(i.isMesh)if(!0===r.wireframe)v.setLineWidth(r.wireframeLinewidth*ee()),g.setMode(d.LINES);else switch(i.drawMode){case Ne:g.setMode(d.TRIANGLES);break;case De:g.setMode(d.TRIANGLE_STRIP);break;case ke:g.setMode(d.TRIANGLE_FAN)}else if(i.isLine){var C=r.linewidth;void 0===C&&(C=1),v.setLineWidth(C*ee()),g.setMode(i.isLineSegments?d.LINES:i.isLineLoop?d.LINE_LOOP:d.LINE_STRIP)}else i.isPoints?g.setMode(d.POINTS):i.isSprite&&g.setMode(d.TRIANGLES);n&&n.isInstancedBufferGeometry?n.maxInstancedCount>0&&g.renderInstances(n,S,M):g.render(S,M)}},this.compile=function(t,e){(h=I.get(t,e)).init(),t.traverse(function(t){t.isLight&&(h.pushLight(t),t.castShadow&&h.pushShadow(t))}),h.setupLights(e),t.traverse(function(e){if(e.material)if(Array.isArray(e.material))for(var n=0;n<e.material.length;n++)me(e.material[n],t.fog,e);else me(e.material,t.fog,e)})};var ce,he=null,de=new An;function pe(t,e,n,r){for(var i=0,o=t.length;i<o;i++){var a=t[i],s=a.object,u=a.geometry,l=void 0===r?a.material:r,c=a.group;if(n.isArrayCamera){tt=n;for(var d=n.cameras,p=0,f=d.length;p<f;p++){var m=d[p];if(s.layers.test(m.layers)){if("viewport"in m)v.viewport(et.copy(m.viewport));else{var g=m.bounds;v.viewport(et.set(g.x*It,g.y*Nt,g.z*It,g.w*Nt).multiplyScalar(kt))}h.setupLights(m),fe(s,e,m,u,l,c)}}}else tt=null,fe(s,e,n,u,l,c)}}function fe(t,e,n,r,i,o){if(t.onBeforeRender(q,e,n,r,i,o),h=I.get(e,tt||n),t.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,t.matrixWorld),t.normalMatrix.getNormalMatrix(t.modelViewMatrix),t.isImmediateRenderObject){v.setMaterial(i);var a=ve(n,e.fog,i,t);J.geometry=null,J.program=null,J.wireframe=!1,function(t,e){t.render(function(t){q.renderBufferImmediate(t,e)})}(t,a)}else q.renderBufferDirect(n,e.fog,r,i,t,o);t.onAfterRender(q,e,n,r,i,o),h=I.get(e,tt||n)}function me(t,e,n){var r=w.get(t),i=h.state.lights,o=r.lightsHash,a=i.state.hash,s=R.getParameters(t,i.state,h.state.shadowsArray,e,Wt.numPlanes,Wt.numIntersection,n),u=R.getProgramCode(t,s),l=r.program,c=!0;if(void 0===l)t.addEventListener("dispose",ue);else if(l.code!==u)le(t);else if(o.stateID!==a.stateID||o.directionalLength!==a.directionalLength||o.pointLength!==a.pointLength||o.spotLength!==a.spotLength||o.rectAreaLength!==a.rectAreaLength||o.hemiLength!==a.hemiLength||o.shadowsLength!==a.shadowsLength)o.stateID=a.stateID,o.directionalLength=a.directionalLength,o.pointLength=a.pointLength,o.spotLength=a.spotLength,o.rectAreaLength=a.rectAreaLength,o.hemiLength=a.hemiLength,o.shadowsLength=a.shadowsLength,c=!1;else{if(void 0!==s.shaderID)return;c=!1}if(c){if(s.shaderID){var d=Cn[s.shaderID];r.shader={name:t.type,uniforms:xn.clone(d.uniforms),vertexShader:d.vertexShader,fragmentShader:d.fragmentShader}}else r.shader={name:t.type,uniforms:t.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader};t.onBeforeCompile(r.shader,q),u=R.getProgramCode(t,s),l=R.acquireProgram(t,r.shader,s,u),r.program=l,t.program=l}var p=l.getAttributes();if(t.morphTargets){t.numSupportedMorphTargets=0;for(var f=0;f<q.maxMorphTargets;f++)p["morphTarget"+f]>=0&&t.numSupportedMorphTargets++}if(t.morphNormals)for(t.numSupportedMorphNormals=0,f=0;f<q.maxMorphNormals;f++)p["morphNormal"+f]>=0&&t.numSupportedMorphNormals++;var m=r.shader.uniforms;(t.isShaderMaterial||t.isRawShaderMaterial)&&!0!==t.clipping||(r.numClippingPlanes=Wt.numPlanes,r.numIntersection=Wt.numIntersection,m.clippingPlanes=Wt.uniform),r.fog=e,void 0===o&&(r.lightsHash=o={}),o.stateID=a.stateID,o.directionalLength=a.directionalLength,o.pointLength=a.pointLength,o.spotLength=a.spotLength,o.rectAreaLength=a.rectAreaLength,o.hemiLength=a.hemiLength,o.shadowsLength=a.shadowsLength,t.lights&&(m.ambientLightColor.value=i.state.ambient,m.directionalLights.value=i.state.directional,m.spotLights.value=i.state.spot,m.rectAreaLights.value=i.state.rectArea,m.pointLights.value=i.state.point,m.hemisphereLights.value=i.state.hemi,m.directionalShadowMap.value=i.state.directionalShadowMap,m.directionalShadowMatrix.value=i.state.directionalShadowMatrix,m.spotShadowMap.value=i.state.spotShadowMap,m.spotShadowMatrix.value=i.state.spotShadowMatrix,m.pointShadowMap.value=i.state.pointShadowMap,m.pointShadowMatrix.value=i.state.pointShadowMatrix);var v=r.program.getUniforms(),g=gi.seqWithValue(v.seq,m);r.uniformsList=g}function ve(t,e,n,r){At=0;var i=w.get(n),o=i.lightsHash,a=h.state.lights.state.hash;Xt&&(Zt||t!==$)&&Wt.setState(n.clippingPlanes,n.clipIntersection,n.clipShadows,t,i,t===$&&n.id===Q),!1===n.needsUpdate&&(void 0===i.program?n.needsUpdate=!0:n.fog&&i.fog!==e?n.needsUpdate=!0:(!n.lights||o.stateID===a.stateID&&o.directionalLength===a.directionalLength&&o.pointLength===a.pointLength&&o.spotLength===a.spotLength&&o.rectAreaLength===a.rectAreaLength&&o.hemiLength===a.hemiLength&&o.shadowsLength===a.shadowsLength)&&(void 0===i.numClippingPlanes||i.numClippingPlanes===Wt.numPlanes&&i.numIntersection===Wt.numIntersection)||(n.needsUpdate=!0)),n.needsUpdate&&(me(n,e,r),n.needsUpdate=!1);var s,u,l=!1,c=!1,p=!1,m=i.program,g=m.getUniforms(),y=i.shader.uniforms;if(v.useProgram(m.program)&&(l=!0,c=!0,p=!0),n.id!==Q&&(Q=n.id,c=!0),l||$!==t){if(g.setValue(d,"projectionMatrix",t.projectionMatrix),f.logarithmicDepthBuffer&&g.setValue(d,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),$!==t&&($=t,c=!0,p=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshStandardMaterial||n.envMap){var _=g.map.cameraPosition;void 0!==_&&_.setValue(d,Jt.setFromMatrixPosition(t.matrixWorld))}(n.isMeshPhongMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.skinning)&&g.setValue(d,"viewMatrix",t.matrixWorldInverse)}if(n.skinning){g.setOptional(d,r,"bindMatrix"),g.setOptional(d,r,"bindMatrixInverse");var b=r.skeleton;if(b)if(f.floatVertexTextures){if(void 0===b.boneTexture){var x=Math.sqrt(4*b.bones.length);x=Ke.ceilPowerOfTwo(x),x=Math.max(x,4);var E=new Float32Array(x*x*4);E.set(b.boneMatrices);var S=new pn(E,x,x,Kt,Gt);S.needsUpdate=!0,b.boneMatrices=E,b.boneTexture=S,b.boneTextureSize=x}g.setValue(d,"boneTexture",b.boneTexture),g.setValue(d,"boneTextureSize",b.boneTextureSize)}else g.setOptional(d,b,"boneMatrices")}return c&&(g.setValue(d,"toneMappingExposure",q.toneMappingExposure),g.setValue(d,"toneMappingWhitePoint",q.toneMappingWhitePoint),n.lights&&((s=y).ambientLightColor.needsUpdate=u=p,s.directionalLights.needsUpdate=u,s.pointLights.needsUpdate=u,s.spotLights.needsUpdate=u,s.rectAreaLights.needsUpdate=u,s.hemisphereLights.needsUpdate=u),e&&n.fog&&function(t,e){t.fogColor.value=e.color,e.isFog?(t.fogNear.value=e.near,t.fogFar.value=e.far):e.isFogExp2&&(t.fogDensity.value=e.density)}(y,e),n.isMeshBasicMaterial?ge(y,n):n.isMeshLambertMaterial?(ge(y,n),function(t,e){e.emissiveMap&&(y.emissiveMap.value=e.emissiveMap)}(0,n)):n.isMeshPhongMaterial?(ge(y,n),n.isMeshToonMaterial?function(t,e){ye(t,e),e.gradientMap&&(t.gradientMap.value=e.gradientMap)}(y,n):ye(y,n)):n.isMeshStandardMaterial?(ge(y,n),n.isMeshPhysicalMaterial?function(t,e){_e(t,e),t.reflectivity.value=e.reflectivity,t.clearCoat.value=e.clearCoat,t.clearCoatRoughness.value=e.clearCoatRoughness}(y,n):_e(y,n)):n.isMeshMatcapMaterial?(ge(y,n),function(t,e){e.matcap&&(t.matcap.value=e.matcap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===C&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===C&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(y,n)):n.isMeshDepthMaterial?(ge(y,n),function(t,e){e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(y,n)):n.isMeshDistanceMaterial?(ge(y,n),function(t,e){e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias),t.referencePosition.value.copy(e.referencePosition),t.nearDistance.value=e.nearDistance,t.farDistance.value=e.farDistance}(y,n)):n.isMeshNormalMaterial?(ge(y,n),function(t,e){e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===C&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===C&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(y,n)):n.isLineBasicMaterial?(function(t,e){t.diffuse.value=e.color,t.opacity.value=e.opacity}(y,n),n.isLineDashedMaterial&&function(t,e){t.dashSize.value=e.dashSize,t.totalSize.value=e.dashSize+e.gapSize,t.scale.value=e.scale}(y,n)):n.isPointsMaterial?function(t,e){t.diffuse.value=e.color,t.opacity.value=e.opacity,t.size.value=e.size*kt,t.scale.value=.5*Nt,t.map.value=e.map,null!==e.map&&(!0===e.map.matrixAutoUpdate&&e.map.updateMatrix(),t.uvTransform.value.copy(e.map.matrix))}(y,n):n.isSpriteMaterial?function(t,e){t.diffuse.value=e.color,t.opacity.value=e.opacity,t.rotation.value=e.rotation,t.map.value=e.map,null!==e.map&&(!0===e.map.matrixAutoUpdate&&e.map.updateMatrix(),t.uvTransform.value.copy(e.map.matrix))}(y,n):n.isShadowMaterial&&(y.color.value=n.color,y.opacity.value=n.opacity),void 0!==y.ltc_1&&(y.ltc_1.value=Mn.LTC_1),void 0!==y.ltc_2&&(y.ltc_2.value=Mn.LTC_2),gi.upload(d,i.uniformsList,y,q)),n.isShaderMaterial&&!0===n.uniformsNeedUpdate&&(gi.upload(d,i.uniformsList,y,q),n.uniformsNeedUpdate=!1),n.isSpriteMaterial&&g.setValue(d,"center",r.center),g.setValue(d,"modelViewMatrix",r.modelViewMatrix),g.setValue(d,"normalMatrix",r.normalMatrix),g.setValue(d,"modelMatrix",r.matrixWorld),m}function ge(t,e){var n;t.opacity.value=e.opacity,e.color&&(t.diffuse.value=e.color),e.emissive&&t.emissive.value.copy(e.emissive).multiplyScalar(e.emissiveIntensity),e.map&&(t.map.value=e.map),e.alphaMap&&(t.alphaMap.value=e.alphaMap),e.specularMap&&(t.specularMap.value=e.specularMap),e.envMap&&(t.envMap.value=e.envMap,t.flipEnvMap.value=e.envMap&&e.envMap.isCubeTexture?-1:1,t.reflectivity.value=e.reflectivity,t.refractionRatio.value=e.refractionRatio,t.maxMipLevel.value=w.get(e.envMap).__maxMipLevel),e.lightMap&&(t.lightMap.value=e.lightMap,t.lightMapIntensity.value=e.lightMapIntensity),e.aoMap&&(t.aoMap.value=e.aoMap,t.aoMapIntensity.value=e.aoMapIntensity),e.map?n=e.map:e.specularMap?n=e.specularMap:e.displacementMap?n=e.displacementMap:e.normalMap?n=e.normalMap:e.bumpMap?n=e.bumpMap:e.roughnessMap?n=e.roughnessMap:e.metalnessMap?n=e.metalnessMap:e.alphaMap?n=e.alphaMap:e.emissiveMap&&(n=e.emissiveMap),void 0!==n&&(n.isWebGLRenderTarget&&(n=n.texture),!0===n.matrixAutoUpdate&&n.updateMatrix(),t.uvTransform.value.copy(n.matrix))}function ye(t,e){t.specular.value=e.specular,t.shininess.value=Math.max(e.shininess,1e-4),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===C&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===C&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}function _e(t,e){t.roughness.value=e.roughness,t.metalness.value=e.metalness,e.roughnessMap&&(t.roughnessMap.value=e.roughnessMap),e.metalnessMap&&(t.metalnessMap.value=e.metalnessMap),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===C&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===C&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias),e.envMap&&(t.envMapIntensity.value=e.envMapIntensity)}de.setAnimationLoop(function(t){ie.isPresenting()||he&&he(t)}),"undefined"!=typeof window&&de.setContext(window),this.setAnimationLoop=function(t){he=t,ie.setAnimationLoop(t),de.start()},this.render=function(t,e,n,r){if(e&&e.isCamera){if(!X){J.geometry=null,J.program=null,J.wireframe=!1,Q=-1,$=null,!0===t.autoUpdate&&t.updateMatrixWorld(),null===e.parent&&e.updateMatrixWorld(),ie.enabled&&(e=ie.getCamera(e)),(h=I.get(t,e)).init(),t.onBeforeRender(q,t,e,n),Qt.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),Ht.setFromMatrix(Qt),Xt=Wt.init(this.clippingPlanes,Zt=this.localClippingEnabled,e),(c=L.get(t,e)).init(),function t(e,n,r){if(!1!==e.visible){if(e.layers.test(n.layers))if(e.isLight)h.pushLight(e),e.castShadow&&h.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||Ht.intersectsSprite(e)){r&&Jt.setFromMatrixPosition(e.matrixWorld).applyMatrix4(Qt);var i=O.update(e);c.push(e,i,o=e.material,Jt.z,null)}}else if(e.isImmediateRenderObject)r&&Jt.setFromMatrixPosition(e.matrixWorld).applyMatrix4(Qt),c.push(e,null,e.material,Jt.z,null);else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.update(),!e.frustumCulled||Ht.intersectsObject(e))){r&&Jt.setFromMatrixPosition(e.matrixWorld).applyMatrix4(Qt),i=O.update(e);var o=e.material;if(Array.isArray(o))for(var a=i.groups,s=0,u=a.length;s<u;s++){var l=a[s],d=o[l.materialIndex];d&&d.visible&&c.push(e,i,d,Jt.z,l)}else o.visible&&c.push(e,i,o,Jt.z,null)}var p=e.children;for(s=0,u=p.length;s<u;s++)t(p[s],n,r)}}(t,e,q.sortObjects),!0===q.sortObjects&&c.sort(),Xt&&Wt.beginShadows(),oe.render(h.state.shadowsArray,t,e),h.setupLights(e),Xt&&Wt.endShadows(),this.info.autoReset&&this.info.reset(),void 0===n&&(n=null),this.setRenderTarget(n),G.render(c,t,e,r);var i=c.opaque,o=c.transparent;if(t.overrideMaterial){var a=t.overrideMaterial;i.length&&pe(i,t,e,a),o.length&&pe(o,t,e,a)}else i.length&&pe(i,t,e),o.length&&pe(o,t,e);n&&x.updateRenderTargetMipmap(n),v.buffers.depth.setTest(!0),v.buffers.depth.setMask(!0),v.buffers.color.setMask(!0),v.setPolygonOffset(!1),t.onAfterRender(q,t,e),ie.enabled&&ie.submitFrame(),c=null,h=null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.allocTextureUnit=function(){var t=At;return t>=f.maxTextures&&console.warn("THREE.WebGLRenderer: Trying to use "+t+" texture units while this GPU supports only "+f.maxTextures),At+=1,t},this.setTexture2D=(ce=!1,function(t,e){t&&t.isWebGLRenderTarget&&(ce||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),ce=!0),t=t.texture),x.setTexture2D(t,e)}),this.setTexture3D=function(t,e){x.setTexture3D(t,e)},this.setTexture=function(){var t=!1;return function(e,n){t||(console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."),t=!0),x.setTexture2D(e,n)}}(),this.setTextureCube=function(){var t=!1;return function(e,n){e&&e.isWebGLRenderTargetCube&&(t||(console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead."),t=!0),e=e.texture),e&&e.isCubeTexture||Array.isArray(e.image)&&6===e.image.length?x.setTextureCube(e,n):x.setTextureCubeDynamic(e,n)}}(),this.setFramebuffer=function(t){Y=t},this.getRenderTarget=function(){return K},this.setRenderTarget=function(t){K=t,t&&void 0===w.get(t).__webglFramebuffer&&x.setupRenderTarget(t);var e=Y,n=!1;if(t){var r=w.get(t).__webglFramebuffer;t.isWebGLRenderTargetCube?(e=r[t.activeCubeFace],n=!0):e=r,et.copy(t.viewport),yt.copy(t.scissor),Mt=t.scissorTest}else et.copy(Ft).multiplyScalar(kt),yt.copy(Ut).multiplyScalar(kt),Mt=zt;if(Z!==e&&(d.bindFramebuffer(d.FRAMEBUFFER,e),Z=e),v.viewport(et),v.scissor(yt),v.setScissorTest(Mt),n){var i=w.get(t.texture);d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_CUBE_MAP_POSITIVE_X+t.activeCubeFace,i.__webglTexture,t.activeMipMapLevel)}},this.readRenderTargetPixels=function(t,e,n,r,i,o){if(t&&t.isWebGLRenderTarget){var a=w.get(t).__webglFramebuffer;if(a){var s=!1;a!==Z&&(d.bindFramebuffer(d.FRAMEBUFFER,a),s=!0);try{var u=t.texture,l=u.format,c=u.type;if(l!==Kt&&W.convert(l)!==d.getParameter(d.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!(c===Dt||W.convert(c)===d.getParameter(d.IMPLEMENTATION_COLOR_READ_TYPE)||c===Gt&&(f.isWebGL2||p.get("OES_texture_float")||p.get("WEBGL_color_buffer_float"))||c===Vt&&p.get(f.isWebGL2?"EXT_color_buffer_float":"EXT_color_buffer_half_float")))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");d.checkFramebufferStatus(d.FRAMEBUFFER)===d.FRAMEBUFFER_COMPLETE?e>=0&&e<=t.width-r&&n>=0&&n<=t.height-i&&d.readPixels(e,n,r,i,W.convert(l),W.convert(c),o):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{s&&d.bindFramebuffer(d.FRAMEBUFFER,Z)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(t,e,n){var r=e.image.width,i=e.image.height,o=W.convert(e.format);this.setTexture2D(e,0),d.copyTexImage2D(d.TEXTURE_2D,n||0,o,t.x,t.y,r,i,0)},this.copyTextureToTexture=function(t,e,n,r){var i=e.image.width,o=e.image.height,a=W.convert(n.format),s=W.convert(n.type);this.setTexture2D(n,0),e.isDataTexture?d.texSubImage2D(d.TEXTURE_2D,r||0,t.x,t.y,i,o,a,s,e.image.data):d.texSubImage2D(d.TEXTURE_2D,r||0,t.x,t.y,a,s,e.image)}}function Xi(t,e){this.name="",this.color=new Sn(t),this.density=void 0!==e?e:25e-5}function Yi(t,e,n){this.name="",this.color=new Sn(t),this.near=void 0!==e?e:1,this.far=void 0!==n?n:1e3}function Ki(){Fn.call(this),this.type="Scene",this.background=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0}function Zi(t,e){this.array=t,this.stride=e,this.count=void 0!==t?t.length/e:0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function Qi(t,e,n,r){this.data=t,this.itemSize=e,this.offset=n,this.normalized=!0===r}function Ji(t){_r.call(this),this.type="SpriteMaterial",this.color=new Sn(16777215),this.map=null,this.rotation=0,this.sizeAttenuation=!0,this.lights=!1,this.transparent=!0,this.setValues(t)}function $i(t){if(Fn.call(this),this.type="Sprite",void 0===Pi){Pi=new er;var e=new Zi(new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),5);Pi.setIndex([0,1,2,0,2,3]),Pi.addAttribute("position",new Qi(e,3,0,!1)),Pi.addAttribute("uv",new Qi(e,2,3,!1))}this.geometry=Pi,this.material=void 0!==t?t:new Ji,this.center=new Ze(.5,.5)}function to(){Fn.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})}function eo(t,e){if(this.bones=(t=t||[]).slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),void 0===e)this.calculateInverses();else if(this.bones.length===e.length)this.boneInverses=e.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(var n=0,r=this.bones.length;n<r;n++)this.boneInverses.push(new Qe)}}function no(){Fn.call(this),this.type="Bone"}function ro(t,e){Sr.call(this,t,e),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Qe,this.bindMatrixInverse=new Qe;var n=new eo(this.initBones());this.bind(n,this.matrixWorld),this.normalizeSkinWeights()}function io(t){_r.call(this),this.type="LineBasicMaterial",this.color=new Sn(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.lights=!1,this.setValues(t)}function oo(t,e,n){1===n&&console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead."),Fn.call(this),this.type="Line",this.geometry=void 0!==t?t:new er,this.material=void 0!==e?e:new io({color:16777215*Math.random()})}function ao(t,e){oo.call(this,t,e),this.type="LineSegments"}function so(t,e){oo.call(this,t,e),this.type="LineLoop"}function uo(t){_r.call(this),this.type="PointsMaterial",this.color=new Sn(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.lights=!1,this.setValues(t)}function lo(t,e){Fn.call(this),this.type="Points",this.geometry=void 0!==t?t:new er,this.material=void 0!==e?e:new uo({color:16777215*Math.random()})}function co(t,e,n,r,i,o,a,s,u){ln.call(this,t,e,n,r,i,o,a,s,u),this.generateMipmaps=!1}function ho(t,e,n,r,i,o,a,s,u,l,c,h){ln.call(this,null,o,a,s,u,l,r,i,c,h),this.image={width:e,height:n},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}function po(t,e,n,r,i,o,a,s,u){ln.call(this,t,e,n,r,i,o,a,s,u),this.needsUpdate=!0}function fo(t,e,n,r,i,o,a,s,u,l){if((l=void 0!==l?l:$t)!==$t&&l!==te)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&l===$t&&(n=jt),void 0===n&&l===te&&(n=qt),ln.call(this,null,r,i,o,a,s,l,n,u),this.image={width:t,height:e},this.magFilter=void 0!==a?a:Pt,this.minFilter=void 0!==s?s:Pt,this.flipY=!1,this.generateMipmaps=!1}function mo(t){er.call(this),this.type="WireframeGeometry";var e,n,r,i,o,a,s,u,l,c,h=[],d=[0,0],p={},f=["a","b","c"];if(t&&t.isGeometry){var m=t.faces;for(e=0,r=m.length;e<r;e++){var v=m[e];for(n=0;n<3;n++)s=v[f[n]],u=v[f[(n+1)%3]],d[0]=Math.min(s,u),d[1]=Math.max(s,u),void 0===p[l=d[0]+","+d[1]]&&(p[l]={index1:d[0],index2:d[1]})}for(l in p)h.push((c=t.vertices[(a=p[l]).index1]).x,c.y,c.z),h.push((c=t.vertices[a.index2]).x,c.y,c.z)}else if(t&&t.isBufferGeometry){var g,y,_,b,w;if(c=new $e,null!==t.index){for(g=t.attributes.position,y=t.index,0===(_=t.groups).length&&(_=[{start:0,count:y.count,materialIndex:0}]),i=0,o=_.length;i<o;++i)for(e=w=(b=_[i]).start,r=w+b.count;e<r;e+=3)for(n=0;n<3;n++)s=y.getX(e+n),u=y.getX(e+(n+1)%3),d[0]=Math.min(s,u),d[1]=Math.max(s,u),void 0===p[l=d[0]+","+d[1]]&&(p[l]={index1:d[0],index2:d[1]});for(l in p)c.fromBufferAttribute(g,(a=p[l]).index1),h.push(c.x,c.y,c.z),c.fromBufferAttribute(g,a.index2),h.push(c.x,c.y,c.z)}else for(e=0,r=(g=t.attributes.position).count/3;e<r;e++)for(n=0;n<3;n++)c.fromBufferAttribute(g,3*e+n),h.push(c.x,c.y,c.z),c.fromBufferAttribute(g,3*e+(n+1)%3),h.push(c.x,c.y,c.z)}this.addAttribute("position",new Zn(h,3))}function vo(t,e,n){Gn.call(this),this.type="ParametricGeometry",this.parameters={func:t,slices:e,stacks:n},this.fromBufferGeometry(new go(t,e,n)),this.mergeVertices()}function go(t,e,n){er.call(this),this.type="ParametricBufferGeometry",this.parameters={func:t,slices:e,stacks:n};var r,i,o=[],a=[],s=[],u=[],l=new $e,c=new $e,h=new $e,d=new $e,p=new $e;t.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");var f=e+1;for(r=0;r<=n;r++){var m=r/n;for(i=0;i<=e;i++){var v=i/e;t(v,m,c),a.push(c.x,c.y,c.z),v-1e-5>=0?(t(v-1e-5,m,h),d.subVectors(c,h)):(t(v+1e-5,m,h),d.subVectors(h,c)),m-1e-5>=0?(t(v,m-1e-5,h),p.subVectors(c,h)):(t(v,m+1e-5,h),p.subVectors(h,c)),l.crossVectors(d,p).normalize(),s.push(l.x,l.y,l.z),u.push(v,m)}}for(r=0;r<n;r++)for(i=0;i<e;i++){var g=r*f+i+1,y=(r+1)*f+i+1,_=(r+1)*f+i;o.push(r*f+i,g,_),o.push(g,y,_)}this.setIndex(o),this.addAttribute("position",new Zn(a,3)),this.addAttribute("normal",new Zn(s,3)),this.addAttribute("uv",new Zn(u,2))}function yo(t,e,n,r){Gn.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:e,radius:n,detail:r},this.fromBufferGeometry(new _o(t,e,n,r)),this.mergeVertices()}function _o(t,e,n,r){er.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:t,indices:e,radius:n,detail:r},n=n||1;var i=[],o=[];function a(t,e,n,r){var i,o,a=Math.pow(2,r),u=[];for(i=0;i<=a;i++){u[i]=[];var l=t.clone().lerp(n,i/a),c=e.clone().lerp(n,i/a),h=a-i;for(o=0;o<=h;o++)u[i][o]=0===o&&i===a?l:l.clone().lerp(c,o/h)}for(i=0;i<a;i++)for(o=0;o<2*(a-i)-1;o++){var d=Math.floor(o/2);o%2==0?(s(u[i][d+1]),s(u[i+1][d]),s(u[i][d])):(s(u[i][d+1]),s(u[i+1][d+1]),s(u[i+1][d]))}}function s(t){i.push(t.x,t.y,t.z)}function u(e,n){var r=3*e;n.x=t[r+0],n.y=t[r+1],n.z=t[r+2]}function l(t,e,n,r){r<0&&1===t.x&&(o[e]=t.x-1),0===n.x&&0===n.z&&(o[e]=r/2/Math.PI+.5)}function c(t){return Math.atan2(t.z,-t.x)}!function(t){for(var n=new $e,r=new $e,i=new $e,o=0;o<e.length;o+=3)u(e[o+0],n),u(e[o+1],r),u(e[o+2],i),a(n,r,i,t)}(r=r||0),function(t){for(var e=new $e,n=0;n<i.length;n+=3)e.x=i[n+0],e.y=i[n+1],e.z=i[n+2],e.normalize().multiplyScalar(t),i[n+0]=e.x,i[n+1]=e.y,i[n+2]=e.z}(n),function(){for(var t=new $e,e=0;e<i.length;e+=3){t.x=i[e+0],t.y=i[e+1],t.z=i[e+2];var n=c(t)/2/Math.PI+.5,r=(a=t,Math.atan2(-a.y,Math.sqrt(a.x*a.x+a.z*a.z))/Math.PI+.5);o.push(n,1-r)}var a;(function(){for(var t=new $e,e=new $e,n=new $e,r=new $e,a=new Ze,s=new Ze,u=new Ze,h=0,d=0;h<i.length;h+=9,d+=6){t.set(i[h+0],i[h+1],i[h+2]),e.set(i[h+3],i[h+4],i[h+5]),n.set(i[h+6],i[h+7],i[h+8]),a.set(o[d+0],o[d+1]),s.set(o[d+2],o[d+3]),u.set(o[d+4],o[d+5]),r.copy(t).add(e).add(n).divideScalar(3);var p=c(r);l(a,d+0,t,p),l(s,d+2,e,p),l(u,d+4,n,p)}})(),function(){for(var t=0;t<o.length;t+=6){var e=o[t+0],n=o[t+2],r=o[t+4],i=Math.max(e,n,r),a=Math.min(e,n,r);i>.9&&a<.1&&(e<.2&&(o[t+0]+=1),n<.2&&(o[t+2]+=1),r<.2&&(o[t+4]+=1))}}()}(),this.addAttribute("position",new Zn(i,3)),this.addAttribute("normal",new Zn(i.slice(),3)),this.addAttribute("uv",new Zn(o,2)),0===r?this.computeVertexNormals():this.normalizeNormals()}function bo(t,e){Gn.call(this),this.type="TetrahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new wo(t,e)),this.mergeVertices()}function wo(t,e){_o.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],t,e),this.type="TetrahedronBufferGeometry",this.parameters={radius:t,detail:e}}function xo(t,e){Gn.call(this),this.type="OctahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new Eo(t,e)),this.mergeVertices()}function Eo(t,e){_o.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],t,e),this.type="OctahedronBufferGeometry",this.parameters={radius:t,detail:e}}function So(t,e){Gn.call(this),this.type="IcosahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new To(t,e)),this.mergeVertices()}function To(t,e){var n=(1+Math.sqrt(5))/2;_o.call(this,[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],t,e),this.type="IcosahedronBufferGeometry",this.parameters={radius:t,detail:e}}function Mo(t,e){Gn.call(this),this.type="DodecahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new Co(t,e)),this.mergeVertices()}function Co(t,e){var n=(1+Math.sqrt(5))/2,r=1/n;_o.call(this,[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],t,e),this.type="DodecahedronBufferGeometry",this.parameters={radius:t,detail:e}}function Ao(t,e,n,r,i,o){Gn.call(this),this.type="TubeGeometry",this.parameters={path:t,tubularSegments:e,radius:n,radialSegments:r,closed:i},void 0!==o&&console.warn("THREE.TubeGeometry: taper has been removed.");var a=new Po(t,e,n,r,i);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals,this.fromBufferGeometry(a),this.mergeVertices()}function Po(t,e,n,r,i){er.call(this),this.type="TubeBufferGeometry",this.parameters={path:t,tubularSegments:e,radius:n,radialSegments:r,closed:i},e=e||64,n=n||1,r=r||8;var o=t.computeFrenetFrames(e,i=i||!1);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;var a,s,u=new $e,l=new $e,c=new Ze,h=new $e,d=[],p=[],f=[],m=[];function v(i){h=t.getPointAt(i/e,h);var a=o.normals[i],c=o.binormals[i];for(s=0;s<=r;s++){var f=s/r*Math.PI*2,m=Math.sin(f),v=-Math.cos(f);l.x=v*a.x+m*c.x,l.y=v*a.y+m*c.y,l.z=v*a.z+m*c.z,l.normalize(),p.push(l.x,l.y,l.z),u.x=h.x+n*l.x,u.y=h.y+n*l.y,u.z=h.z+n*l.z,d.push(u.x,u.y,u.z)}}!function(){for(a=0;a<e;a++)v(a);v(!1===i?e:0),function(){for(a=0;a<=e;a++)for(s=0;s<=r;s++)c.x=a/e,c.y=s/r,f.push(c.x,c.y)}(),function(){for(s=1;s<=e;s++)for(a=1;a<=r;a++){var t=(r+1)*s+(a-1),n=(r+1)*s+a,i=(r+1)*(s-1)+a;m.push((r+1)*(s-1)+(a-1),t,i),m.push(t,n,i)}}()}(),this.setIndex(m),this.addAttribute("position",new Zn(d,3)),this.addAttribute("normal",new Zn(p,3)),this.addAttribute("uv",new Zn(f,2))}function Oo(t,e,n,r,i,o,a){Gn.call(this),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:e,tubularSegments:n,radialSegments:r,p:i,q:o},void 0!==a&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new Ro(t,e,n,r,i,o)),this.mergeVertices()}function Ro(t,e,n,r,i,o){er.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:t,tube:e,tubularSegments:n,radialSegments:r,p:i,q:o},t=t||1,e=e||.4,n=Math.floor(n)||64,r=Math.floor(r)||8,i=i||2,o=o||3;var a,s,u=[],l=[],c=[],h=[],d=new $e,p=new $e,f=new $e,m=new $e,v=new $e,g=new $e,y=new $e;for(a=0;a<=n;++a){var _=a/n*i*Math.PI*2;for(M(_,i,o,t,f),M(_+.01,i,o,t,m),g.subVectors(m,f),y.addVectors(m,f),v.crossVectors(g,y),y.crossVectors(v,g),v.normalize(),y.normalize(),s=0;s<=r;++s){var b=s/r*Math.PI*2,w=-e*Math.cos(b),x=e*Math.sin(b);d.x=f.x+(w*y.x+x*v.x),d.y=f.y+(w*y.y+x*v.y),d.z=f.z+(w*y.z+x*v.z),l.push(d.x,d.y,d.z),p.subVectors(d,f).normalize(),c.push(p.x,p.y,p.z),h.push(a/n),h.push(s/r)}}for(s=1;s<=n;s++)for(a=1;a<=r;a++){var E=(r+1)*s+(a-1),S=(r+1)*s+a,T=(r+1)*(s-1)+a;u.push((r+1)*(s-1)+(a-1),E,T),u.push(E,S,T)}function M(t,e,n,r,i){var o=Math.cos(t),a=Math.sin(t),s=n/e*t,u=Math.cos(s);i.x=r*(2+u)*.5*o,i.y=r*(2+u)*a*.5,i.z=r*Math.sin(s)*.5}this.setIndex(u),this.addAttribute("position",new Zn(l,3)),this.addAttribute("normal",new Zn(c,3)),this.addAttribute("uv",new Zn(h,2))}function Lo(t,e,n,r,i){Gn.call(this),this.type="TorusGeometry",this.parameters={radius:t,tube:e,radialSegments:n,tubularSegments:r,arc:i},this.fromBufferGeometry(new Io(t,e,n,r,i)),this.mergeVertices()}function Io(t,e,n,r,i){er.call(this),this.type="TorusBufferGeometry",this.parameters={radius:t,tube:e,radialSegments:n,tubularSegments:r,arc:i},t=t||1,e=e||.4,n=Math.floor(n)||8,r=Math.floor(r)||6,i=i||2*Math.PI;var o,a,s=[],u=[],l=[],c=[],h=new $e,d=new $e,p=new $e;for(o=0;o<=n;o++)for(a=0;a<=r;a++){var f=a/r*i,m=o/n*Math.PI*2;d.x=(t+e*Math.cos(m))*Math.cos(f),d.y=(t+e*Math.cos(m))*Math.sin(f),d.z=e*Math.sin(m),u.push(d.x,d.y,d.z),h.x=t*Math.cos(f),h.y=t*Math.sin(f),p.subVectors(d,h).normalize(),l.push(p.x,p.y,p.z),c.push(a/r),c.push(o/n)}for(o=1;o<=n;o++)for(a=1;a<=r;a++){var v=(r+1)*(o-1)+a-1,g=(r+1)*(o-1)+a,y=(r+1)*o+a;s.push((r+1)*o+a-1,v,y),s.push(v,g,y)}this.setIndex(s),this.addAttribute("position",new Zn(u,3)),this.addAttribute("normal",new Zn(l,3)),this.addAttribute("uv",new Zn(c,2))}function No(t,e,n,r,i){var o,a;if(i===function(t,e,n,r){for(var i=0,o=e,a=n-r;o<n;o+=r)i+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return i}(t,e,n,r)>0)for(o=e;o<n;o+=r)a=Jo(o,t[o],t[o+1],a);else for(o=n-r;o>=e;o-=r)a=Jo(o,t[o],t[o+1],a);return a&&Yo(a,a.next)&&($o(a),a=a.next),a}function Do(t,e){if(!t)return t;e||(e=t);var n,r=t;do{if(n=!1,r.steiner||!Yo(r,r.next)&&0!==Xo(r.prev,r,r.next))r=r.next;else{if($o(r),(r=e=r.prev)===r.next)break;n=!0}}while(n||r!==e);return e}function ko(t,e,n,r,i,o,a){if(t){!a&&o&&function(t,e,n,r){var i=t;do{null===i.z&&(i.z=zo(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,n,r,i,o,a,s,u,l=1;do{for(n=t,t=null,o=null,a=0;n;){for(a++,r=n,s=0,e=0;e<l&&(s++,r=r.nextZ);e++);for(u=l;s>0||u>0&&r;)0!==s&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,u--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,l*=2}while(a>1)}(i)}(t,r,i,o);for(var s,u,l=t;t.prev!==t.next;)if(s=t.prev,u=t.next,o?jo(t,r,i,o):Fo(t))e.push(s.i/n),e.push(t.i/n),e.push(u.i/n),$o(t),t=u.next,l=u.next;else if((t=u)===l){a?1===a?ko(t=Uo(t,e,n),e,n,r,i,o,2):2===a&&Bo(t,e,n,r,i,o):ko(Do(t),e,n,r,i,o,1);break}}}function Fo(t){var e=t.prev,n=t,r=t.next;if(Xo(e,n,r)>=0)return!1;for(var i=t.next.next;i!==t.prev;){if(Wo(e.x,e.y,n.x,n.y,r.x,r.y,i.x,i.y)&&Xo(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function jo(t,e,n,r){var i=t.prev,o=t,a=t.next;if(Xo(i,o,a)>=0)return!1;for(var s=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,u=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,l=zo(i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,e,n,r),c=zo(s,u,e,n,r),h=t.nextZ;h&&h.z<=c;){if(h!==t.prev&&h!==t.next&&Wo(i.x,i.y,o.x,o.y,a.x,a.y,h.x,h.y)&&Xo(h.prev,h,h.next)>=0)return!1;h=h.nextZ}for(h=t.prevZ;h&&h.z>=l;){if(h!==t.prev&&h!==t.next&&Wo(i.x,i.y,o.x,o.y,a.x,a.y,h.x,h.y)&&Xo(h.prev,h,h.next)>=0)return!1;h=h.prevZ}return!0}function Uo(t,e,n){var r=t;do{var i=r.prev,o=r.next.next;!Yo(i,o)&&Ko(i,r,r.next,o)&&Zo(i,o)&&Zo(o,i)&&(e.push(i.i/n),e.push(r.i/n),e.push(o.i/n),$o(r),$o(r.next),r=t=o),r=r.next}while(r!==t);return r}function Bo(t,e,n,r,i,o){var a=t;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&qo(a,s)){var u=Qo(a,s);return a=Do(a,a.next),u=Do(u,u.next),ko(a,e,n,r,i,o),void ko(u,e,n,r,i,o)}s=s.next}a=a.next}while(a!==t)}function Go(t,e){return t.x-e.x}function Vo(t,e){if(e=function(t,e){var n,r=e,i=t.x,o=t.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a){if(a=s,s===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!n)return null;if(i===a)return n.prev;var u,l=n,c=n.x,h=n.y,d=1/0;for(r=n.next;r!==l;)i>=r.x&&r.x>=c&&i!==r.x&&Wo(o<h?i:a,o,c,h,o<h?a:i,o,r.x,r.y)&&((u=Math.abs(o-r.y)/(i-r.x))<d||u===d&&r.x>n.x)&&Zo(r,t)&&(n=r,d=u),r=r.next;return n}(t,e)){var n=Qo(e,t);Do(n,n.next)}}function zo(t,e,n,r,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*i)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*i)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function Ho(t){var e=t,n=t;do{e.x<n.x&&(n=e),e=e.next}while(e!==t);return n}function Wo(t,e,n,r,i,o,a,s){return(i-a)*(e-s)-(t-a)*(o-s)>=0&&(t-a)*(r-s)-(n-a)*(e-s)>=0&&(n-a)*(o-s)-(i-a)*(r-s)>=0}function qo(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&Ko(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&Zo(t,e)&&Zo(e,t)&&function(t,e){var n=t,r=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)}function Xo(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function Yo(t,e){return t.x===e.x&&t.y===e.y}function Ko(t,e,n,r){return!!(Yo(t,e)&&Yo(n,r)||Yo(t,r)&&Yo(n,e))||Xo(t,e,n)>0!=Xo(t,e,r)>0&&Xo(n,r,t)>0!=Xo(n,r,e)>0}function Zo(t,e){return Xo(t.prev,t,t.next)<0?Xo(t,e,t.next)>=0&&Xo(t,t.prev,e)>=0:Xo(t,e,t.prev)<0||Xo(t,t.next,e)<0}function Qo(t,e){var n=new ta(t.i,t.x,t.y),r=new ta(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function Jo(t,e,n,r){var i=new ta(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function $o(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function ta(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}(Fi.prototype=Object.create(_r.prototype)).constructor=Fi,Fi.prototype.isMeshDepthMaterial=!0,Fi.prototype.copy=function(t){return _r.prototype.copy.call(this,t),this.depthPacking=t.depthPacking,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this},(ji.prototype=Object.create(_r.prototype)).constructor=ji,ji.prototype.isMeshDistanceMaterial=!0,ji.prototype.copy=function(t){return _r.prototype.copy.call(this,t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this},Gi.prototype=Object.assign(Object.create(Fn.prototype),{constructor:Gi,isGroup:!0}),Vi.prototype=Object.assign(Object.create(Fn.prototype),{constructor:Vi,isCamera:!0,copy:function(t,e){return Fn.prototype.copy.call(this,t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this},getWorldDirection:function(t){void 0===t&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),t=new $e),this.updateMatrixWorld(!0);var e=this.matrixWorld.elements;return t.set(-e[8],-e[9],-e[10]).normalize()},updateMatrixWorld:function(t){Fn.prototype.updateMatrixWorld.call(this,t),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}}),zi.prototype=Object.assign(Object.create(Vi.prototype),{constructor:zi,isPerspectiveCamera:!0,copy:function(t,e){return Vi.prototype.copy.call(this,t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this},setFocalLength:function(t){var e=.5*this.getFilmHeight()/t;this.fov=2*Ke.RAD2DEG*Math.atan(e),this.updateProjectionMatrix()},getFocalLength:function(){var t=Math.tan(.5*Ke.DEG2RAD*this.fov);return.5*this.getFilmHeight()/t},getEffectiveFOV:function(){return 2*Ke.RAD2DEG*Math.atan(Math.tan(.5*Ke.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(t,e,n,r,i,o){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=this.near,e=t*Math.tan(.5*Ke.DEG2RAD*this.fov)/this.zoom,n=2*e,r=this.aspect*n,i=-.5*r,o=this.view;if(null!==this.view&&this.view.enabled){var a=o.fullWidth,s=o.fullHeight;i+=o.offsetX*r/a,e-=o.offsetY*n/s,r*=o.width/a,n*=o.height/s}var u=this.filmOffset;0!==u&&(i+=t*u/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,e,e-n,t,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(t){var e=Fn.prototype.toJSON.call(this,t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}),Hi.prototype=Object.assign(Object.create(zi.prototype),{constructor:Hi,isArrayCamera:!0}),Xi.prototype.isFogExp2=!0,Xi.prototype.clone=function(){return new Xi(this.color,this.density)},Xi.prototype.toJSON=function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}},Yi.prototype.isFog=!0,Yi.prototype.clone=function(){return new Yi(this.color,this.near,this.far)},Yi.prototype.toJSON=function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}},Ki.prototype=Object.assign(Object.create(Fn.prototype),{constructor:Ki,copy:function(t,e){return Fn.prototype.copy.call(this,t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.fog&&(this.fog=t.fog.clone()),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this},toJSON:function(t){var e=Fn.prototype.toJSON.call(this,t);return null!==this.background&&(e.object.background=this.background.toJSON(t)),null!==this.fog&&(e.object.fog=this.fog.toJSON()),e}}),Object.defineProperty(Zi.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(Zi.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setArray:function(t){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");return this.count=void 0!==t?t.length/this.stride:0,this.array=t,this},setDynamic:function(t){return this.dynamic=t,this},copy:function(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.dynamic=t.dynamic,this},copyAt:function(t,e,n){t*=this.stride,n*=e.stride;for(var r=0,i=this.stride;r<i;r++)this.array[t+r]=e.array[n+r];return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(t){return this.onUploadCallback=t,this}}),Object.defineProperties(Qi.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}}),Object.assign(Qi.prototype,{isInterleavedBufferAttribute:!0,setX:function(t,e){return this.data.array[t*this.data.stride+this.offset]=e,this},setY:function(t,e){return this.data.array[t*this.data.stride+this.offset+1]=e,this},setZ:function(t,e){return this.data.array[t*this.data.stride+this.offset+2]=e,this},setW:function(t,e){return this.data.array[t*this.data.stride+this.offset+3]=e,this},getX:function(t){return this.data.array[t*this.data.stride+this.offset]},getY:function(t){return this.data.array[t*this.data.stride+this.offset+1]},getZ:function(t){return this.data.array[t*this.data.stride+this.offset+2]},getW:function(t){return this.data.array[t*this.data.stride+this.offset+3]},setXY:function(t,e,n){return this.data.array[(t=t*this.data.stride+this.offset)+0]=e,this.data.array[t+1]=n,this},setXYZ:function(t,e,n,r){return this.data.array[(t=t*this.data.stride+this.offset)+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=r,this},setXYZW:function(t,e,n,r,i){return this.data.array[(t=t*this.data.stride+this.offset)+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=r,this.data.array[t+3]=i,this}}),(Ji.prototype=Object.create(_r.prototype)).constructor=Ji,Ji.prototype.isSpriteMaterial=!0,Ji.prototype.copy=function(t){return _r.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this},$i.prototype=Object.assign(Object.create(Fn.prototype),{constructor:$i,isSprite:!0,raycast:function(){var t=new $e,e=new $e,n=new $e,r=new Ze,i=new Ze,o=new Qe,a=new $e,s=new $e,u=new $e,l=new Ze,c=new Ze,h=new Ze;function d(t,e,n,a,s,u){r.subVectors(t,n).addScalar(.5).multiply(a),void 0!==s?(i.x=u*r.x-s*r.y,i.y=s*r.x+u*r.y):i.copy(r),t.copy(e),t.x+=i.x,t.y+=i.y,t.applyMatrix4(o)}return function(r,i){e.setFromMatrixScale(this.matrixWorld),o.getInverse(this.modelViewMatrix).premultiply(this.matrixWorld),n.setFromMatrixPosition(this.modelViewMatrix);var p,f,m=this.material.rotation;0!==m&&(f=Math.cos(m),p=Math.sin(m));var v=this.center;d(a.set(-.5,-.5,0),n,v,e,p,f),d(s.set(.5,-.5,0),n,v,e,p,f),d(u.set(.5,.5,0),n,v,e,p,f),l.set(0,0),c.set(1,0),h.set(1,1);var g=r.ray.intersectTriangle(a,s,u,!1,t);if(null!==g||(d(s.set(-.5,.5,0),n,v,e,p,f),c.set(0,1),null!==(g=r.ray.intersectTriangle(a,u,s,!1,t)))){var y=r.ray.origin.distanceTo(t);y<r.near||y>r.far||i.push({distance:y,point:t.clone(),uv:xr.getUV(t,a,s,u,l,c,h,new Ze),face:null,object:this})}}}(),clone:function(){return new this.constructor(this.material).copy(this)},copy:function(t){return Fn.prototype.copy.call(this,t),void 0!==t.center&&this.center.copy(t.center),this}}),to.prototype=Object.assign(Object.create(Fn.prototype),{constructor:to,copy:function(t){Fn.prototype.copy.call(this,t,!1);for(var e=t.levels,n=0,r=e.length;n<r;n++){var i=e[n];this.addLevel(i.object.clone(),i.distance)}return this},addLevel:function(t,e){void 0===e&&(e=0),e=Math.abs(e);for(var n=this.levels,r=0;r<n.length&&!(e<n[r].distance);r++);n.splice(r,0,{distance:e,object:t}),this.add(t)},getObjectForDistance:function(t){for(var e=this.levels,n=1,r=e.length;n<r&&!(t<e[n].distance);n++);return e[n-1].object},raycast:(Oi=new $e,function(t,e){Oi.setFromMatrixPosition(this.matrixWorld);var n=t.ray.origin.distanceTo(Oi);this.getObjectForDistance(n).raycast(t,e)}),update:function(){var t=new $e,e=new $e;return function(n){var r=this.levels;if(r.length>1){t.setFromMatrixPosition(n.matrixWorld),e.setFromMatrixPosition(this.matrixWorld);var i=t.distanceTo(e);r[0].object.visible=!0;for(var o=1,a=r.length;o<a&&i>=r[o].distance;o++)r[o-1].object.visible=!1,r[o].object.visible=!0;for(;o<a;o++)r[o].object.visible=!1}}}(),toJSON:function(t){var e=Fn.prototype.toJSON.call(this,t);e.object.levels=[];for(var n=this.levels,r=0,i=n.length;r<i;r++){var o=n[r];e.object.levels.push({object:o.object.uuid,distance:o.distance})}return e}}),Object.assign(eo.prototype,{calculateInverses:function(){this.boneInverses=[];for(var t=0,e=this.bones.length;t<e;t++){var n=new Qe;this.bones[t]&&n.getInverse(this.bones[t].matrixWorld),this.boneInverses.push(n)}},pose:function(){var t,e,n;for(e=0,n=this.bones.length;e<n;e++)(t=this.bones[e])&&t.matrixWorld.getInverse(this.boneInverses[e]);for(e=0,n=this.bones.length;e<n;e++)(t=this.bones[e])&&(t.parent&&t.parent.isBone?(t.matrix.getInverse(t.parent.matrixWorld),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))},update:(Ri=new Qe,Li=new Qe,function(){for(var t=this.bones,e=this.boneInverses,n=this.boneMatrices,r=this.boneTexture,i=0,o=t.length;i<o;i++)Ri.multiplyMatrices(t[i]?t[i].matrixWorld:Li,e[i]),Ri.toArray(n,16*i);void 0!==r&&(r.needsUpdate=!0)}),clone:function(){return new eo(this.bones,this.boneInverses)},getBoneByName:function(t){for(var e=0,n=this.bones.length;e<n;e++){var r=this.bones[e];if(r.name===t)return r}}}),no.prototype=Object.assign(Object.create(Fn.prototype),{constructor:no,isBone:!0}),ro.prototype=Object.assign(Object.create(Sr.prototype),{constructor:ro,isSkinnedMesh:!0,initBones:function(){var t,e,n,r,i=[];if(this.geometry&&void 0!==this.geometry.bones){for(n=0,r=this.geometry.bones.length;n<r;n++)e=this.geometry.bones[n],t=new no,i.push(t),t.name=e.name,t.position.fromArray(e.pos),t.quaternion.fromArray(e.rotq),void 0!==e.scl&&t.scale.fromArray(e.scl);for(n=0,r=this.geometry.bones.length;n<r;n++)-1!==(e=this.geometry.bones[n]).parent&&null!==e.parent&&void 0!==i[e.parent]?i[e.parent].add(i[n]):this.add(i[n])}return this.updateMatrixWorld(!0),i},bind:function(t,e){this.skeleton=t,void 0===e&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.getInverse(e)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){var t,e;if(this.geometry&&this.geometry.isGeometry)for(e=0;e<this.geometry.skinWeights.length;e++){var n=this.geometry.skinWeights[e];(t=1/n.manhattanLength())!=1/0?n.multiplyScalar(t):n.set(1,0,0,0)}else if(this.geometry&&this.geometry.isBufferGeometry){var r=new cn,i=this.geometry.attributes.skinWeight;for(e=0;e<i.count;e++)r.x=i.getX(e),r.y=i.getY(e),r.z=i.getZ(e),r.w=i.getW(e),(t=1/r.manhattanLength())!=1/0?r.multiplyScalar(t):r.set(1,0,0,0),i.setXYZW(e,r.x,r.y,r.z,r.w)}},updateMatrixWorld:function(t){Sr.prototype.updateMatrixWorld.call(this,t),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),(io.prototype=Object.create(_r.prototype)).constructor=io,io.prototype.isLineBasicMaterial=!0,io.prototype.copy=function(t){return _r.prototype.copy.call(this,t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this},oo.prototype=Object.assign(Object.create(Fn.prototype),{constructor:oo,isLine:!0,computeLineDistances:(Ii=new $e,Ni=new $e,function(){var t=this.geometry;if(t.isBufferGeometry)if(null===t.index){for(var e=t.attributes.position,n=[0],r=1,i=e.count;r<i;r++)Ii.fromBufferAttribute(e,r-1),Ni.fromBufferAttribute(e,r),n[r]=n[r-1],n[r]+=Ii.distanceTo(Ni);t.addAttribute("lineDistance",new Zn(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(t.isGeometry){var o=t.vertices;for((n=t.lineDistances)[0]=0,r=1,i=o.length;r<i;r++)n[r]=n[r-1],n[r]+=o[r-1].distanceTo(o[r])}return this}),raycast:function(){var t=new Qe,e=new wr,n=new mn;return function(r,i){var o=r.linePrecision,a=this.geometry,s=this.matrixWorld;if(null===a.boundingSphere&&a.computeBoundingSphere(),n.copy(a.boundingSphere),n.applyMatrix4(s),n.radius+=o,!1!==r.ray.intersectsSphere(n)){t.getInverse(s),e.copy(r.ray).applyMatrix4(t);var u=o/((this.scale.x+this.scale.y+this.scale.z)/3),l=u*u,c=new $e,h=new $e,d=new $e,p=new $e,f=this&&this.isLineSegments?2:1;if(a.isBufferGeometry){var m=a.index,v=a.attributes.position.array;if(null!==m)for(var g=m.array,y=0,_=g.length-1;y<_;y+=f){var b=g[y+1];c.fromArray(v,3*g[y]),h.fromArray(v,3*b),e.distanceSqToSegment(c,h,p,d)>l||(p.applyMatrix4(this.matrixWorld),(E=r.ray.origin.distanceTo(p))<r.near||E>r.far||i.push({distance:E,point:d.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this}))}else for(y=0,_=v.length/3-1;y<_;y+=f)c.fromArray(v,3*y),h.fromArray(v,3*y+3),e.distanceSqToSegment(c,h,p,d)>l||(p.applyMatrix4(this.matrixWorld),(E=r.ray.origin.distanceTo(p))<r.near||E>r.far||i.push({distance:E,point:d.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this}))}else if(a.isGeometry){var w=a.vertices,x=w.length;for(y=0;y<x-1;y+=f){var E;e.distanceSqToSegment(w[y],w[y+1],p,d)>l||(p.applyMatrix4(this.matrixWorld),(E=r.ray.origin.distanceTo(p))<r.near||E>r.far||i.push({distance:E,point:d.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this}))}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),ao.prototype=Object.assign(Object.create(oo.prototype),{constructor:ao,isLineSegments:!0,computeLineDistances:function(){var t=new $e,e=new $e;return function(){var n=this.geometry;if(n.isBufferGeometry)if(null===n.index){for(var r=n.attributes.position,i=[],o=0,a=r.count;o<a;o+=2)t.fromBufferAttribute(r,o),e.fromBufferAttribute(r,o+1),i[o]=0===o?0:i[o-1],i[o+1]=i[o]+t.distanceTo(e);n.addAttribute("lineDistance",new Zn(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(n.isGeometry){var s=n.vertices;for(i=n.lineDistances,o=0,a=s.length;o<a;o+=2)t.copy(s[o]),e.copy(s[o+1]),i[o]=0===o?0:i[o-1],i[o+1]=i[o]+t.distanceTo(e)}return this}}()}),so.prototype=Object.assign(Object.create(oo.prototype),{constructor:so,isLineLoop:!0}),(uo.prototype=Object.create(_r.prototype)).constructor=uo,uo.prototype.isPointsMaterial=!0,uo.prototype.copy=function(t){return _r.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.morphTargets=t.morphTargets,this},lo.prototype=Object.assign(Object.create(Fn.prototype),{constructor:lo,isPoints:!0,raycast:function(){var t=new Qe,e=new wr,n=new mn;return function(r,i){var o=this,a=this.geometry,s=this.matrixWorld,u=r.params.Points.threshold;if(null===a.boundingSphere&&a.computeBoundingSphere(),n.copy(a.boundingSphere),n.applyMatrix4(s),n.radius+=u,!1!==r.ray.intersectsSphere(n)){t.getInverse(s),e.copy(r.ray).applyMatrix4(t);var l=u/((this.scale.x+this.scale.y+this.scale.z)/3),c=l*l,h=new $e,d=new $e;if(a.isBufferGeometry){var p=a.index,f=a.attributes.position.array;if(null!==p)for(var m=p.array,v=0,g=m.length;v<g;v++){var y=m[v];h.fromArray(f,3*y),w(h,y)}else{v=0;for(var _=f.length/3;v<_;v++)h.fromArray(f,3*v),w(h,v)}}else{var b=a.vertices;for(v=0,_=b.length;v<_;v++)w(b[v],v)}}function w(t,n){var a=e.distanceSqToPoint(t);if(a<c){e.closestPointToPoint(t,d),d.applyMatrix4(s);var u=r.ray.origin.distanceTo(d);if(u<r.near||u>r.far)return;i.push({distance:u,distanceToRay:Math.sqrt(a),point:d.clone(),index:n,face:null,object:o})}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),co.prototype=Object.assign(Object.create(ln.prototype),{constructor:co,isVideoTexture:!0,update:function(){var t=this.image;t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),(ho.prototype=Object.create(ln.prototype)).constructor=ho,ho.prototype.isCompressedTexture=!0,(po.prototype=Object.create(ln.prototype)).constructor=po,po.prototype.isCanvasTexture=!0,(fo.prototype=Object.create(ln.prototype)).constructor=fo,fo.prototype.isDepthTexture=!0,(mo.prototype=Object.create(er.prototype)).constructor=mo,(vo.prototype=Object.create(Gn.prototype)).constructor=vo,(go.prototype=Object.create(er.prototype)).constructor=go,(yo.prototype=Object.create(Gn.prototype)).constructor=yo,(_o.prototype=Object.create(er.prototype)).constructor=_o,(bo.prototype=Object.create(Gn.prototype)).constructor=bo,(wo.prototype=Object.create(_o.prototype)).constructor=wo,(xo.prototype=Object.create(Gn.prototype)).constructor=xo,(Eo.prototype=Object.create(_o.prototype)).constructor=Eo,(So.prototype=Object.create(Gn.prototype)).constructor=So,(To.prototype=Object.create(_o.prototype)).constructor=To,(Mo.prototype=Object.create(Gn.prototype)).constructor=Mo,(Co.prototype=Object.create(_o.prototype)).constructor=Co,(Ao.prototype=Object.create(Gn.prototype)).constructor=Ao,(Po.prototype=Object.create(er.prototype)).constructor=Po,(Oo.prototype=Object.create(Gn.prototype)).constructor=Oo,(Ro.prototype=Object.create(er.prototype)).constructor=Ro,(Lo.prototype=Object.create(Gn.prototype)).constructor=Lo,(Io.prototype=Object.create(er.prototype)).constructor=Io;var ea={area:function(t){for(var e=t.length,n=0,r=e-1,i=0;i<e;r=i++)n+=t[r].x*t[i].y-t[i].x*t[r].y;return.5*n},isClockWise:function(t){return ea.area(t)<0},triangulateShape:function(t,e){var n=[],r=[],i=[];na(t),ra(n,t);var o=t.length;e.forEach(na);for(var a=0;a<e.length;a++)r.push(o),o+=e[a].length,ra(n,e[a]);var s=function(t,e,n){n=n||2;var r,i,o,a,s,u,l,c=e&&e.length,h=c?e[0]*n:t.length,d=No(t,0,h,n,!0),p=[];if(!d)return p;if(c&&(d=function(t,e,n,r){var i,o,a,s=[];for(i=0,o=e.length;i<o;i++)(a=No(t,e[i]*r,i<o-1?e[i+1]*r:t.length,r,!1))===a.next&&(a.steiner=!0),s.push(Ho(a));for(s.sort(Go),i=0;i<s.length;i++)Vo(s[i],n),n=Do(n,n.next);return n}(t,e,d,n)),t.length>80*n){r=o=t[0],i=a=t[1];for(var f=n;f<h;f+=n)u=t[f+1],(s=t[f])<r&&(r=s),u<i&&(i=u),s>o&&(o=s),u>a&&(a=u);l=0!==(l=Math.max(o-r,a-i))?1/l:0}return ko(d,p,n,r,i,l),p}(n,r);for(a=0;a<s.length;a+=3)i.push(s.slice(a,a+3));return i}};function na(t){var e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function ra(t,e){for(var n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}function ia(t,e){Gn.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:e},this.fromBufferGeometry(new oa(t,e)),this.mergeVertices()}function oa(t,e){er.call(this),this.type="ExtrudeBufferGeometry",this.parameters={shapes:t,options:e};for(var n=this,r=[],i=[],o=0,a=(t=Array.isArray(t)?t:[t]).length;o<a;o++)s(t[o]);function s(t){var o=[],a=void 0!==e.curveSegments?e.curveSegments:12,s=void 0!==e.steps?e.steps:1,u=void 0!==e.depth?e.depth:100,l=void 0===e.bevelEnabled||e.bevelEnabled,c=void 0!==e.bevelThickness?e.bevelThickness:6,h=void 0!==e.bevelSize?e.bevelSize:c-2,d=void 0!==e.bevelSegments?e.bevelSegments:3,p=e.extrudePath,f=void 0!==e.UVGenerator?e.UVGenerator:aa;void 0!==e.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),u=e.amount);var m,v,g,y,_,b,w,x,E=!1;p&&(m=p.getSpacedPoints(s),E=!0,l=!1,v=p.computeFrenetFrames(s,!1),g=new $e,y=new $e,_=new $e),l||(d=0,c=0,h=0);var S=t.extractPoints(a),T=S.shape,M=S.holes;if(!ea.isClockWise(T))for(T=T.reverse(),w=0,x=M.length;w<x;w++)ea.isClockWise(b=M[w])&&(M[w]=b.reverse());var C=ea.triangulateShape(T,M),A=T;for(w=0,x=M.length;w<x;w++)T=T.concat(b=M[w]);function P(t,e,n){return e||console.error("THREE.ExtrudeGeometry: vec does not exist"),e.clone().multiplyScalar(n).add(t)}var O,R,L,I,N,D,k=T.length,F=C.length;function j(t,e,n){var r,i,o,a=t.x-e.x,s=t.y-e.y,u=n.x-t.x,l=n.y-t.y,c=a*a+s*s;if(Math.abs(a*l-s*u)>Number.EPSILON){var h=Math.sqrt(c),d=Math.sqrt(u*u+l*l),p=e.x-s/h,f=e.y+a/h,m=((n.x-l/d-p)*l-(n.y+u/d-f)*u)/(a*l-s*u),v=(r=p+a*m-t.x)*r+(i=f+s*m-t.y)*i;if(v<=2)return new Ze(r,i);o=Math.sqrt(v/2)}else{var g=!1;a>Number.EPSILON?u>Number.EPSILON&&(g=!0):a<-Number.EPSILON?u<-Number.EPSILON&&(g=!0):Math.sign(s)===Math.sign(l)&&(g=!0),g?(r=-s,i=a,o=Math.sqrt(c)):(r=a,i=s,o=Math.sqrt(c/2))}return new Ze(r/o,i/o)}for(var U=[],B=0,G=A.length,V=G-1,z=B+1;B<G;B++,V++,z++)V===G&&(V=0),z===G&&(z=0),U[B]=j(A[B],A[V],A[z]);var H,W,q=[],X=U.concat();for(w=0,x=M.length;w<x;w++){for(H=[],V=(G=(b=M[w]).length)-1,z=1+(B=0);B<G;B++,V++,z++)V===G&&(V=0),z===G&&(z=0),H[B]=j(b[B],b[V],b[z]);q.push(H),X=X.concat(H)}for(O=0;O<d;O++){for(L=O/d,I=c*Math.cos(L*Math.PI/2),R=h*Math.sin(L*Math.PI/2),B=0,G=A.length;B<G;B++)K((N=P(A[B],U[B],R)).x,N.y,-I);for(w=0,x=M.length;w<x;w++)for(H=q[w],B=0,G=(b=M[w]).length;B<G;B++)K((N=P(b[B],H[B],R)).x,N.y,-I)}for(R=h,B=0;B<k;B++)N=l?P(T[B],X[B],R):T[B],E?(y.copy(v.normals[0]).multiplyScalar(N.x),g.copy(v.binormals[0]).multiplyScalar(N.y),_.copy(m[0]).add(y).add(g),K(_.x,_.y,_.z)):K(N.x,N.y,0);for(W=1;W<=s;W++)for(B=0;B<k;B++)N=l?P(T[B],X[B],R):T[B],E?(y.copy(v.normals[W]).multiplyScalar(N.x),g.copy(v.binormals[W]).multiplyScalar(N.y),_.copy(m[W]).add(y).add(g),K(_.x,_.y,_.z)):K(N.x,N.y,u/s*W);for(O=d-1;O>=0;O--){for(L=O/d,I=c*Math.cos(L*Math.PI/2),R=h*Math.sin(L*Math.PI/2),B=0,G=A.length;B<G;B++)K((N=P(A[B],U[B],R)).x,N.y,u+I);for(w=0,x=M.length;w<x;w++)for(H=q[w],B=0,G=(b=M[w]).length;B<G;B++)N=P(b[B],H[B],R),E?K(N.x,N.y+m[s-1].y,m[s-1].x+I):K(N.x,N.y,u+I)}function Y(t,e){var n,r;for(B=t.length;--B>=0;){n=B,(r=B-1)<0&&(r=t.length-1);var i=0,o=s+2*d;for(i=0;i<o;i++){var a=k*i,u=k*(i+1);Q(e+n+a,e+r+a,e+r+u,e+n+u)}}}function K(t,e,n){o.push(t),o.push(e),o.push(n)}function Z(t,e,i){J(t),J(e),J(i);var o=r.length/3,a=f.generateTopUV(n,r,o-3,o-2,o-1);$(a[0]),$(a[1]),$(a[2])}function Q(t,e,i,o){J(t),J(e),J(o),J(e),J(i),J(o);var a=r.length/3,s=f.generateSideWallUV(n,r,a-6,a-3,a-2,a-1);$(s[0]),$(s[1]),$(s[3]),$(s[1]),$(s[2]),$(s[3])}function J(t){r.push(o[3*t+0]),r.push(o[3*t+1]),r.push(o[3*t+2])}function $(t){i.push(t.x),i.push(t.y)}!function(){var t=r.length/3;if(l){var e=0,i=k*e;for(B=0;B<F;B++)Z((D=C[B])[2]+i,D[1]+i,D[0]+i);for(i=k*(e=s+2*d),B=0;B<F;B++)Z((D=C[B])[0]+i,D[1]+i,D[2]+i)}else{for(B=0;B<F;B++)Z((D=C[B])[2],D[1],D[0]);for(B=0;B<F;B++)Z((D=C[B])[0]+k*s,D[1]+k*s,D[2]+k*s)}n.addGroup(t,r.length/3-t,0)}(),function(){var t=r.length/3,e=0;for(Y(A,e),e+=A.length,w=0,x=M.length;w<x;w++)Y(b=M[w],e),e+=b.length;n.addGroup(t,r.length/3-t,1)}()}this.addAttribute("position",new Zn(r,3)),this.addAttribute("uv",new Zn(i,2)),this.computeVertexNormals()}(ia.prototype=Object.create(Gn.prototype)).constructor=ia,ia.prototype.toJSON=function(){var t=Gn.prototype.toJSON.call(this);return sa(this.parameters.shapes,this.parameters.options,t)},(oa.prototype=Object.create(er.prototype)).constructor=oa,oa.prototype.toJSON=function(){var t=er.prototype.toJSON.call(this);return sa(this.parameters.shapes,this.parameters.options,t)};var aa={generateTopUV:function(t,e,n,r,i){var o=e[3*r],a=e[3*r+1],s=e[3*i],u=e[3*i+1];return[new Ze(e[3*n],e[3*n+1]),new Ze(o,a),new Ze(s,u)]},generateSideWallUV:function(t,e,n,r,i,o){var a=e[3*n],s=e[3*n+1],u=e[3*n+2],l=e[3*r],c=e[3*r+1],h=e[3*r+2],d=e[3*i],p=e[3*i+1],f=e[3*i+2],m=e[3*o],v=e[3*o+1],g=e[3*o+2];return Math.abs(s-c)<.01?[new Ze(a,1-u),new Ze(l,1-h),new Ze(d,1-f),new Ze(m,1-g)]:[new Ze(s,1-u),new Ze(c,1-h),new Ze(p,1-f),new Ze(v,1-g)]}};function sa(t,e,n){if(n.shapes=[],Array.isArray(t))for(var r=0,i=t.length;r<i;r++)n.shapes.push(t[r].uuid);else n.shapes.push(t.uuid);return void 0!==e.extrudePath&&(n.options.extrudePath=e.extrudePath.toJSON()),n}function ua(t,e){Gn.call(this),this.type="TextGeometry",this.parameters={text:t,parameters:e},this.fromBufferGeometry(new la(t,e)),this.mergeVertices()}function la(t,e){var n=(e=e||{}).font;if(!n||!n.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new Gn;var r=n.generateShapes(t,e.size);e.depth=void 0!==e.height?e.height:50,void 0===e.bevelThickness&&(e.bevelThickness=10),void 0===e.bevelSize&&(e.bevelSize=8),void 0===e.bevelEnabled&&(e.bevelEnabled=!1),oa.call(this,r,e),this.type="TextBufferGeometry"}function ca(t,e,n,r,i,o,a){Gn.call(this),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:r,phiLength:i,thetaStart:o,thetaLength:a},this.fromBufferGeometry(new ha(t,e,n,r,i,o,a)),this.mergeVertices()}function ha(t,e,n,r,i,o,a){er.call(this),this.type="SphereBufferGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:r,phiLength:i,thetaStart:o,thetaLength:a},t=t||1,e=Math.max(3,Math.floor(e)||8),n=Math.max(2,Math.floor(n)||6),r=void 0!==r?r:0,i=void 0!==i?i:2*Math.PI;var s,u,l=(o=void 0!==o?o:0)+(a=void 0!==a?a:Math.PI),c=0,h=[],d=new $e,p=new $e,f=[],m=[],v=[],g=[];for(u=0;u<=n;u++){var y=[],_=u/n;for(s=0;s<=e;s++){var b=s/e;d.x=-t*Math.cos(r+b*i)*Math.sin(o+_*a),d.y=t*Math.cos(o+_*a),d.z=t*Math.sin(r+b*i)*Math.sin(o+_*a),m.push(d.x,d.y,d.z),p.set(d.x,d.y,d.z).normalize(),v.push(p.x,p.y,p.z),g.push(b,1-_),y.push(c++)}h.push(y)}for(u=0;u<n;u++)for(s=0;s<e;s++){var w=h[u][s],x=h[u+1][s],E=h[u+1][s+1];(0!==u||o>0)&&f.push(h[u][s+1],w,E),(u!==n-1||l<Math.PI)&&f.push(w,x,E)}this.setIndex(f),this.addAttribute("position",new Zn(m,3)),this.addAttribute("normal",new Zn(v,3)),this.addAttribute("uv",new Zn(g,2))}function da(t,e,n,r,i,o){Gn.call(this),this.type="RingGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:o},this.fromBufferGeometry(new pa(t,e,n,r,i,o)),this.mergeVertices()}function pa(t,e,n,r,i,o){er.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:o},t=t||.5,e=e||1,i=void 0!==i?i:0,o=void 0!==o?o:2*Math.PI,n=void 0!==n?Math.max(3,n):8;var a,s,u,l=[],c=[],h=[],d=[],p=t,f=(e-t)/(r=void 0!==r?Math.max(1,r):1),m=new $e,v=new Ze;for(s=0;s<=r;s++){for(u=0;u<=n;u++)a=i+u/n*o,m.x=p*Math.cos(a),m.y=p*Math.sin(a),c.push(m.x,m.y,m.z),h.push(0,0,1),v.x=(m.x/e+1)/2,v.y=(m.y/e+1)/2,d.push(v.x,v.y);p+=f}for(s=0;s<r;s++){var g=s*(n+1);for(u=0;u<n;u++){var y=(a=u+g)+n+1,_=a+n+2,b=a+1;l.push(a,y,b),l.push(y,_,b)}}this.setIndex(l),this.addAttribute("position",new Zn(c,3)),this.addAttribute("normal",new Zn(h,3)),this.addAttribute("uv",new Zn(d,2))}function fa(t,e,n,r){Gn.call(this),this.type="LatheGeometry",this.parameters={points:t,segments:e,phiStart:n,phiLength:r},this.fromBufferGeometry(new ma(t,e,n,r)),this.mergeVertices()}function ma(t,e,n,r){er.call(this),this.type="LatheBufferGeometry",this.parameters={points:t,segments:e,phiStart:n,phiLength:r},e=Math.floor(e)||12,n=n||0,r=r||2*Math.PI,r=Ke.clamp(r,0,2*Math.PI);var i,o,a,s=[],u=[],l=[],c=1/e,h=new $e,d=new Ze;for(o=0;o<=e;o++){var p=n+o*c*r,f=Math.sin(p),m=Math.cos(p);for(a=0;a<=t.length-1;a++)h.x=t[a].x*f,h.y=t[a].y,h.z=t[a].x*m,u.push(h.x,h.y,h.z),d.x=o/e,d.y=a/(t.length-1),l.push(d.x,d.y)}for(o=0;o<e;o++)for(a=0;a<t.length-1;a++){var v=(i=a+o*t.length)+t.length,g=i+t.length+1,y=i+1;s.push(i,v,y),s.push(v,g,y)}if(this.setIndex(s),this.addAttribute("position",new Zn(u,3)),this.addAttribute("uv",new Zn(l,2)),this.computeVertexNormals(),r===2*Math.PI){var _=this.attributes.normal.array,b=new $e,w=new $e,x=new $e;for(i=e*t.length*3,o=0,a=0;o<t.length;o++,a+=3)b.x=_[a+0],b.y=_[a+1],b.z=_[a+2],w.x=_[i+a+0],w.y=_[i+a+1],w.z=_[i+a+2],x.addVectors(b,w).normalize(),_[a+0]=_[i+a+0]=x.x,_[a+1]=_[i+a+1]=x.y,_[a+2]=_[i+a+2]=x.z}}function va(t,e){Gn.call(this),this.type="ShapeGeometry","object"==typeof e&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),e=e.curveSegments),this.parameters={shapes:t,curveSegments:e},this.fromBufferGeometry(new ga(t,e)),this.mergeVertices()}function ga(t,e){er.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:t,curveSegments:e},e=e||12;var n=[],r=[],i=[],o=[],a=0,s=0;if(!1===Array.isArray(t))l(t);else for(var u=0;u<t.length;u++)l(t[u]),this.addGroup(a,s,u),a+=s,s=0;function l(t){var a,u,l,c=r.length/3,h=t.extractPoints(e),d=h.shape,p=h.holes;if(!1===ea.isClockWise(d))for(d=d.reverse(),a=0,u=p.length;a<u;a++)!0===ea.isClockWise(l=p[a])&&(p[a]=l.reverse());var f=ea.triangulateShape(d,p);for(a=0,u=p.length;a<u;a++)d=d.concat(l=p[a]);for(a=0,u=d.length;a<u;a++){var m=d[a];r.push(m.x,m.y,0),i.push(0,0,1),o.push(m.x,m.y)}for(a=0,u=f.length;a<u;a++){var v=f[a];n.push(v[0]+c,v[1]+c,v[2]+c),s+=3}}this.setIndex(n),this.addAttribute("position",new Zn(r,3)),this.addAttribute("normal",new Zn(i,3)),this.addAttribute("uv",new Zn(o,2))}function ya(t,e){if(e.shapes=[],Array.isArray(t))for(var n=0,r=t.length;n<r;n++)e.shapes.push(t[n].uuid);else e.shapes.push(t.uuid);return e}function _a(t,e){er.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:e},e=void 0!==e?e:1;var n,r,i,o,a=[],s=Math.cos(Ke.DEG2RAD*e),u=[0,0],l={},c=["a","b","c"];t.isBufferGeometry?(o=new Gn).fromBufferGeometry(t):o=t.clone(),o.mergeVertices(),o.computeFaceNormals();for(var h=o.vertices,d=o.faces,p=0,f=d.length;p<f;p++)for(var m=d[p],v=0;v<3;v++)n=m[c[v]],r=m[c[(v+1)%3]],u[0]=Math.min(n,r),u[1]=Math.max(n,r),void 0===l[i=u[0]+","+u[1]]?l[i]={index1:u[0],index2:u[1],face1:p,face2:void 0}:l[i].face2=p;for(i in l){var g=l[i];if(void 0===g.face2||d[g.face1].normal.dot(d[g.face2].normal)<=s){var y=h[g.index1];a.push(y.x,y.y,y.z),a.push((y=h[g.index2]).x,y.y,y.z)}}this.addAttribute("position",new Zn(a,3))}function ba(t,e,n,r,i,o,a,s){Gn.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:r,heightSegments:i,openEnded:o,thetaStart:a,thetaLength:s},this.fromBufferGeometry(new wa(t,e,n,r,i,o,a,s)),this.mergeVertices()}function wa(t,e,n,r,i,o,a,s){er.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:r,heightSegments:i,openEnded:o,thetaStart:a,thetaLength:s};var u=this;t=void 0!==t?t:1,e=void 0!==e?e:1,n=n||1,r=Math.floor(r)||8,i=Math.floor(i)||1,o=void 0!==o&&o,a=void 0!==a?a:0,s=void 0!==s?s:2*Math.PI;var l=[],c=[],h=[],d=[],p=0,f=[],m=n/2,v=0;function g(n){var i,o,f,g=new Ze,y=new $e,_=0,b=!0===n?t:e,w=!0===n?1:-1;for(o=p,i=1;i<=r;i++)c.push(0,m*w,0),h.push(0,w,0),d.push(.5,.5),p++;for(f=p,i=0;i<=r;i++){var x=i/r*s+a,E=Math.cos(x),S=Math.sin(x);y.x=b*S,y.y=m*w,y.z=b*E,c.push(y.x,y.y,y.z),h.push(0,w,0),g.x=.5*E+.5,g.y=.5*S*w+.5,d.push(g.x,g.y),p++}for(i=0;i<r;i++){var T=o+i,M=f+i;!0===n?l.push(M,M+1,T):l.push(M+1,M,T),_+=3}u.addGroup(v,_,!0===n?1:2),v+=_}!function(){var o,g,y=new $e,_=new $e,b=0,w=(e-t)/n;for(g=0;g<=i;g++){var x=[],E=g/i,S=E*(e-t)+t;for(o=0;o<=r;o++){var T=o/r,M=T*s+a,C=Math.sin(M),A=Math.cos(M);_.x=S*C,_.y=-E*n+m,_.z=S*A,c.push(_.x,_.y,_.z),y.set(C,w,A).normalize(),h.push(y.x,y.y,y.z),d.push(T,1-E),x.push(p++)}f.push(x)}for(o=0;o<r;o++)for(g=0;g<i;g++){var P=f[g+1][o],O=f[g+1][o+1],R=f[g][o+1];l.push(f[g][o],P,R),l.push(P,O,R),b+=6}u.addGroup(v,b,0),v+=b}(),!1===o&&(t>0&&g(!0),e>0&&g(!1)),this.setIndex(l),this.addAttribute("position",new Zn(c,3)),this.addAttribute("normal",new Zn(h,3)),this.addAttribute("uv",new Zn(d,2))}function xa(t,e,n,r,i,o,a){ba.call(this,0,t,e,n,r,i,o,a),this.type="ConeGeometry",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:o,thetaLength:a}}function Ea(t,e,n,r,i,o,a){wa.call(this,0,t,e,n,r,i,o,a),this.type="ConeBufferGeometry",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:o,thetaLength:a}}function Sa(t,e,n,r){Gn.call(this),this.type="CircleGeometry",this.parameters={radius:t,segments:e,thetaStart:n,thetaLength:r},this.fromBufferGeometry(new Ta(t,e,n,r)),this.mergeVertices()}function Ta(t,e,n,r){er.call(this),this.type="CircleBufferGeometry",this.parameters={radius:t,segments:e,thetaStart:n,thetaLength:r},t=t||1,e=void 0!==e?Math.max(3,e):8,n=void 0!==n?n:0,r=void 0!==r?r:2*Math.PI;var i,o,a=[],s=[],u=[],l=[],c=new $e,h=new Ze;for(s.push(0,0,0),u.push(0,0,1),l.push(.5,.5),o=0,i=3;o<=e;o++,i+=3){var d=n+o/e*r;c.x=t*Math.cos(d),c.y=t*Math.sin(d),s.push(c.x,c.y,c.z),u.push(0,0,1),h.x=(s[i]/t+1)/2,h.y=(s[i+1]/t+1)/2,l.push(h.x,h.y)}for(i=1;i<=e;i++)a.push(i,i+1,0);this.setIndex(a),this.addAttribute("position",new Zn(s,3)),this.addAttribute("normal",new Zn(u,3)),this.addAttribute("uv",new Zn(l,2))}(ua.prototype=Object.create(Gn.prototype)).constructor=ua,(la.prototype=Object.create(oa.prototype)).constructor=la,(ca.prototype=Object.create(Gn.prototype)).constructor=ca,(ha.prototype=Object.create(er.prototype)).constructor=ha,(da.prototype=Object.create(Gn.prototype)).constructor=da,(pa.prototype=Object.create(er.prototype)).constructor=pa,(fa.prototype=Object.create(Gn.prototype)).constructor=fa,(ma.prototype=Object.create(er.prototype)).constructor=ma,(va.prototype=Object.create(Gn.prototype)).constructor=va,va.prototype.toJSON=function(){var t=Gn.prototype.toJSON.call(this);return ya(this.parameters.shapes,t)},(ga.prototype=Object.create(er.prototype)).constructor=ga,ga.prototype.toJSON=function(){var t=er.prototype.toJSON.call(this);return ya(this.parameters.shapes,t)},(_a.prototype=Object.create(er.prototype)).constructor=_a,(ba.prototype=Object.create(Gn.prototype)).constructor=ba,(wa.prototype=Object.create(er.prototype)).constructor=wa,(xa.prototype=Object.create(ba.prototype)).constructor=xa,(Ea.prototype=Object.create(wa.prototype)).constructor=Ea,(Sa.prototype=Object.create(Gn.prototype)).constructor=Sa,(Ta.prototype=Object.create(er.prototype)).constructor=Ta;var Ma=Object.freeze({WireframeGeometry:mo,ParametricGeometry:vo,ParametricBufferGeometry:go,TetrahedronGeometry:bo,TetrahedronBufferGeometry:wo,OctahedronGeometry:xo,OctahedronBufferGeometry:Eo,IcosahedronGeometry:So,IcosahedronBufferGeometry:To,DodecahedronGeometry:Mo,DodecahedronBufferGeometry:Co,PolyhedronGeometry:yo,PolyhedronBufferGeometry:_o,TubeGeometry:Ao,TubeBufferGeometry:Po,TorusKnotGeometry:Oo,TorusKnotBufferGeometry:Ro,TorusGeometry:Lo,TorusBufferGeometry:Io,TextGeometry:ua,TextBufferGeometry:la,SphereGeometry:ca,SphereBufferGeometry:ha,RingGeometry:da,RingBufferGeometry:pa,PlaneGeometry:ir,PlaneBufferGeometry:or,LatheGeometry:fa,LatheBufferGeometry:ma,ShapeGeometry:va,ShapeBufferGeometry:ga,ExtrudeGeometry:ia,ExtrudeBufferGeometry:oa,EdgesGeometry:_a,ConeGeometry:xa,ConeBufferGeometry:Ea,CylinderGeometry:ba,CylinderBufferGeometry:wa,CircleGeometry:Sa,CircleBufferGeometry:Ta,BoxGeometry:nr,BoxBufferGeometry:rr});function Ca(t){_r.call(this),this.type="ShadowMaterial",this.color=new Sn(0),this.transparent=!0,this.setValues(t)}function Aa(t){br.call(this,t),this.type="RawShaderMaterial"}function Pa(t){_r.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Sn(16777215),this.roughness=.5,this.metalness=.5,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Sn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Xe,this.normalScale=new Ze(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function Oa(t){Pa.call(this),this.defines={PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearCoat=0,this.clearCoatRoughness=0,this.setValues(t)}function Ra(t){_r.call(this),this.type="MeshPhongMaterial",this.color=new Sn(16777215),this.specular=new Sn(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Sn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Xe,this.normalScale=new Ze(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=ct,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function La(t){Ra.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.gradientMap=null,this.setValues(t)}function Ia(t){_r.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Xe,this.normalScale=new Ze(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function Na(t){_r.call(this),this.type="MeshLambertMaterial",this.color=new Sn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Sn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=ct,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function Da(t){if(_r.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Sn(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Xe,this.normalScale=new Ze(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.lights=!1,this.setValues(t),null===this.matcap){var e=document.createElement("canvas");e.width=1,e.height=1;var n=e.getContext("2d");n.fillStyle="#fff",n.fillRect(0,0,1,1),this.matcap=new THREE.CanvasTexture(e)}}function ka(t){io.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}(Ca.prototype=Object.create(_r.prototype)).constructor=Ca,Ca.prototype.isShadowMaterial=!0,Ca.prototype.copy=function(t){return _r.prototype.copy.call(this,t),this.color.copy(t.color),this},(Aa.prototype=Object.create(br.prototype)).constructor=Aa,Aa.prototype.isRawShaderMaterial=!0,(Pa.prototype=Object.create(_r.prototype)).constructor=Pa,Pa.prototype.isMeshStandardMaterial=!0,Pa.prototype.copy=function(t){return _r.prototype.copy.call(this,t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},(Oa.prototype=Object.create(Pa.prototype)).constructor=Oa,Oa.prototype.isMeshPhysicalMaterial=!0,Oa.prototype.copy=function(t){return Pa.prototype.copy.call(this,t),this.defines={PHYSICAL:""},this.reflectivity=t.reflectivity,this.clearCoat=t.clearCoat,this.clearCoatRoughness=t.clearCoatRoughness,this},(Ra.prototype=Object.create(_r.prototype)).constructor=Ra,Ra.prototype.isMeshPhongMaterial=!0,Ra.prototype.copy=function(t){return _r.prototype.copy.call(this,t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},(La.prototype=Object.create(Ra.prototype)).constructor=La,La.prototype.isMeshToonMaterial=!0,La.prototype.copy=function(t){return Ra.prototype.copy.call(this,t),this.gradientMap=t.gradientMap,this},(Ia.prototype=Object.create(_r.prototype)).constructor=Ia,Ia.prototype.isMeshNormalMaterial=!0,Ia.prototype.copy=function(t){return _r.prototype.copy.call(this,t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},(Na.prototype=Object.create(_r.prototype)).constructor=Na,Na.prototype.isMeshLambertMaterial=!0,Na.prototype.copy=function(t){return _r.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},(Da.prototype=Object.create(_r.prototype)).constructor=Da,Da.prototype.isMeshMatcapMaterial=!0,Da.prototype.copy=function(t){return _r.prototype.copy.call(this,t),this.defines={MATCAP:""},this.color.copy(t.color),this.matcap=t.matcap,this.map=t.map,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},(ka.prototype=Object.create(io.prototype)).constructor=ka,ka.prototype.isLineDashedMaterial=!0,ka.prototype.copy=function(t){return io.prototype.copy.call(this,t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this};var Fa=Object.freeze({ShadowMaterial:Ca,SpriteMaterial:Ji,RawShaderMaterial:Aa,ShaderMaterial:br,PointsMaterial:uo,MeshPhysicalMaterial:Oa,MeshStandardMaterial:Pa,MeshPhongMaterial:Ra,MeshToonMaterial:La,MeshNormalMaterial:Ia,MeshLambertMaterial:Na,MeshDepthMaterial:Fi,MeshDistanceMaterial:ji,MeshBasicMaterial:Er,MeshMatcapMaterial:Da,LineDashedMaterial:ka,LineBasicMaterial:io,Material:_r}),ja={enabled:!1,files:{},add:function(t,e){!1!==this.enabled&&(this.files[t]=e)},get:function(t){if(!1!==this.enabled)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};function Ua(t,e,n){var r=this,i=!1,o=0,a=0,s=void 0;this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=n,this.itemStart=function(t){a++,!1===i&&void 0!==r.onStart&&r.onStart(t,o,a),i=!0},this.itemEnd=function(t){o++,void 0!==r.onProgress&&r.onProgress(t,o,a),o===a&&(i=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(t){void 0!==r.onError&&r.onError(t)},this.resolveURL=function(t){return s?s(t):t},this.setURLModifier=function(t){return s=t,this}}var Ba=new Ua,Ga={};function Va(t){this.manager=void 0!==t?t:Ba}function za(t){this.manager=void 0!==t?t:Ba,this._parser=null}function Ha(t){this.manager=void 0!==t?t:Ba,this._parser=null}function Wa(t){this.manager=void 0!==t?t:Ba}function qa(t){this.manager=void 0!==t?t:Ba}function Xa(t){this.manager=void 0!==t?t:Ba}function Ya(){this.type="Curve",this.arcLengthDivisions=200}function Ka(t,e,n,r,i,o,a,s){Ya.call(this),this.type="EllipseCurve",this.aX=t||0,this.aY=e||0,this.xRadius=n||1,this.yRadius=r||1,this.aStartAngle=i||0,this.aEndAngle=o||2*Math.PI,this.aClockwise=a||!1,this.aRotation=s||0}function Za(t,e,n,r,i,o){Ka.call(this,t,e,n,n,r,i,o),this.type="ArcCurve"}function Qa(){var t=0,e=0,n=0,r=0;function i(i,o,a,s){t=i,e=a,n=-3*i+3*o-2*a-s,r=2*i-2*o+a+s}return{initCatmullRom:function(t,e,n,r,o){i(e,n,o*(n-t),o*(r-e))},initNonuniformCatmullRom:function(t,e,n,r,o,a,s){var u=(e-t)/o-(n-t)/(o+a)+(n-e)/a,l=(n-e)/a-(r-e)/(a+s)+(r-n)/s;i(e,n,u*=a,l*=a)},calc:function(i){var o=i*i;return t+e*i+n*o+r*(o*i)}}}Object.assign(Va.prototype,{load:function(t,e,n,r){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var i=this,o=ja.get(t);if(void 0!==o)return i.manager.itemStart(t),setTimeout(function(){e&&e(o),i.manager.itemEnd(t)},0),o;if(void 0===Ga[t]){var a=t.match(/^data:(.*?)(;base64)?,(.*)$/);if(a){var s=a[1],u=!!a[2],l=a[3];l=window.decodeURIComponent(l),u&&(l=window.atob(l));try{var c,h=(this.responseType||"").toLowerCase();switch(h){case"arraybuffer":case"blob":for(var d=new Uint8Array(l.length),p=0;p<l.length;p++)d[p]=l.charCodeAt(p);c="blob"===h?new Blob([d.buffer],{type:s}):d.buffer;break;case"document":var f=new DOMParser;c=f.parseFromString(l,s);break;case"json":c=JSON.parse(l);break;default:c=l}window.setTimeout(function(){e&&e(c),i.manager.itemEnd(t)},0)}catch(e){window.setTimeout(function(){r&&r(e),i.manager.itemEnd(t),i.manager.itemError(t)},0)}}else{Ga[t]=[],Ga[t].push({onLoad:e,onProgress:n,onError:r});var m=new XMLHttpRequest;for(var v in m.open("GET",t,!0),m.addEventListener("load",function(e){var n=this.response;ja.add(t,n);var r=Ga[t];if(delete Ga[t],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received.");for(var o=0,a=r.length;o<a;o++)(s=r[o]).onLoad&&s.onLoad(n);i.manager.itemEnd(t)}else{for(o=0,a=r.length;o<a;o++){var s;(s=r[o]).onError&&s.onError(e)}i.manager.itemEnd(t),i.manager.itemError(t)}},!1),m.addEventListener("progress",function(e){for(var n=Ga[t],r=0,i=n.length;r<i;r++){var o=n[r];o.onProgress&&o.onProgress(e)}},!1),m.addEventListener("error",function(e){var n=Ga[t];delete Ga[t];for(var r=0,o=n.length;r<o;r++){var a=n[r];a.onError&&a.onError(e)}i.manager.itemEnd(t),i.manager.itemError(t)},!1),m.addEventListener("abort",function(e){var n=Ga[t];delete Ga[t];for(var r=0,o=n.length;r<o;r++){var a=n[r];a.onError&&a.onError(e)}i.manager.itemEnd(t),i.manager.itemError(t)},!1),void 0!==this.responseType&&(m.responseType=this.responseType),void 0!==this.withCredentials&&(m.withCredentials=this.withCredentials),m.overrideMimeType&&m.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),this.requestHeader)m.setRequestHeader(v,this.requestHeader[v]);m.send(null)}return i.manager.itemStart(t),m}Ga[t].push({onLoad:e,onProgress:n,onError:r})},setPath:function(t){return this.path=t,this},setResponseType:function(t){return this.responseType=t,this},setWithCredentials:function(t){return this.withCredentials=t,this},setMimeType:function(t){return this.mimeType=t,this},setRequestHeader:function(t){return this.requestHeader=t,this}}),Object.assign(za.prototype,{load:function(t,e,n,r){var i=this,o=[],a=new ho;a.image=o;var s=new Va(this.manager);function u(u){s.load(t[u],function(t){var n=i._parser(t,!0);o[u]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},6===(l+=1)&&(1===n.mipmapCount&&(a.minFilter=Lt),a.format=n.format,a.needsUpdate=!0,e&&e(a))},n,r)}if(s.setPath(this.path),s.setResponseType("arraybuffer"),Array.isArray(t))for(var l=0,c=0,h=t.length;c<h;++c)u(c);else s.load(t,function(t){var n=i._parser(t,!0);if(n.isCubemap)for(var r=n.mipmaps.length/n.mipmapCount,s=0;s<r;s++){o[s]={mipmaps:[]};for(var u=0;u<n.mipmapCount;u++)o[s].mipmaps.push(n.mipmaps[s*n.mipmapCount+u]),o[s].format=n.format,o[s].width=n.width,o[s].height=n.height}else a.image.width=n.width,a.image.height=n.height,a.mipmaps=n.mipmaps;1===n.mipmapCount&&(a.minFilter=Lt),a.format=n.format,a.needsUpdate=!0,e&&e(a)},n,r);return a},setPath:function(t){return this.path=t,this}}),Object.assign(Ha.prototype,{load:function(t,e,n,r){var i=this,o=new pn,a=new Va(this.manager);return a.setResponseType("arraybuffer"),a.load(t,function(t){var n=i._parser(t);n&&(void 0!==n.image?o.image=n.image:void 0!==n.data&&(o.image.width=n.width,o.image.height=n.height,o.image.data=n.data),o.wrapS=void 0!==n.wrapS?n.wrapS:Ct,o.wrapT=void 0!==n.wrapT?n.wrapT:Ct,o.magFilter=void 0!==n.magFilter?n.magFilter:Lt,o.minFilter=void 0!==n.minFilter?n.minFilter:Nt,o.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.format&&(o.format=n.format),void 0!==n.type&&(o.type=n.type),void 0!==n.mipmaps&&(o.mipmaps=n.mipmaps),1===n.mipmapCount&&(o.minFilter=Lt),o.needsUpdate=!0,e&&e(o,n))},n,r),o}}),Object.assign(Wa.prototype,{crossOrigin:"anonymous",load:function(t,e,n,r){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var i=this,o=ja.get(t);if(void 0!==o)return i.manager.itemStart(t),setTimeout(function(){e&&e(o),i.manager.itemEnd(t)},0),o;var a=document.createElementNS("http://www.w3.org/1999/xhtml","img");function s(){a.removeEventListener("load",s,!1),a.removeEventListener("error",u,!1),ja.add(t,this),e&&e(this),i.manager.itemEnd(t)}function u(e){a.removeEventListener("load",s,!1),a.removeEventListener("error",u,!1),r&&r(e),i.manager.itemEnd(t),i.manager.itemError(t)}return a.addEventListener("load",s,!1),a.addEventListener("error",u,!1),"data:"!==t.substr(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),i.manager.itemStart(t),a.src=t,a},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this}}),Object.assign(qa.prototype,{crossOrigin:"anonymous",load:function(t,e,n,r){var i=new Mr,o=new Wa(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);var a=0;function s(n){o.load(t[n],function(t){i.images[n]=t,6==++a&&(i.needsUpdate=!0,e&&e(i))},void 0,r)}for(var u=0;u<t.length;++u)s(u);return i},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this}}),Object.assign(Xa.prototype,{crossOrigin:"anonymous",load:function(t,e,n,r){var i=new ln,o=new Wa(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(t,function(n){i.image=n;var r=t.search(/\.jpe?g$/i)>0||0===t.search(/^data\:image\/jpeg/);i.format=r?Yt:Kt,i.needsUpdate=!0,void 0!==e&&e(i)},n,r),i},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this}}),Object.assign(Ya.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(t,e){var n=this.getUtoTmapping(t);return this.getPoint(n,e)},getPoints:function(t){void 0===t&&(t=5);for(var e=[],n=0;n<=t;n++)e.push(this.getPoint(n/t));return e},getSpacedPoints:function(t){void 0===t&&(t=5);for(var e=[],n=0;n<=t;n++)e.push(this.getPointAt(n/t));return e},getLength:function(){var t=this.getLengths();return t[t.length-1]},getLengths:function(t){if(void 0===t&&(t=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var e,n,r=[],i=this.getPoint(0),o=0;for(r.push(0),n=1;n<=t;n++)o+=(e=this.getPoint(n/t)).distanceTo(i),r.push(o),i=e;return this.cacheArcLengths=r,r},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(t,e){var n,r=this.getLengths(),i=0,o=r.length;n=e||t*r[o-1];for(var a,s=0,u=o-1;s<=u;)if((a=r[i=Math.floor(s+(u-s)/2)]-n)<0)s=i+1;else{if(!(a>0)){u=i;break}u=i-1}if(r[i=u]===n)return i/(o-1);var l=r[i];return(i+(n-l)/(r[i+1]-l))/(o-1)},getTangent:function(t){var e=t-1e-4,n=t+1e-4;e<0&&(e=0),n>1&&(n=1);var r=this.getPoint(e);return this.getPoint(n).clone().sub(r).normalize()},getTangentAt:function(t){var e=this.getUtoTmapping(t);return this.getTangent(e)},computeFrenetFrames:function(t,e){var n,r,i=new $e,o=[],a=[],s=[],u=new $e,l=new Qe;for(n=0;n<=t;n++)o[n]=this.getTangentAt(n/t),o[n].normalize();a[0]=new $e,s[0]=new $e;var c=Number.MAX_VALUE,h=Math.abs(o[0].x),d=Math.abs(o[0].y),p=Math.abs(o[0].z);for(h<=c&&(c=h,i.set(1,0,0)),d<=c&&(c=d,i.set(0,1,0)),p<=c&&i.set(0,0,1),u.crossVectors(o[0],i).normalize(),a[0].crossVectors(o[0],u),s[0].crossVectors(o[0],a[0]),n=1;n<=t;n++)a[n]=a[n-1].clone(),s[n]=s[n-1].clone(),u.crossVectors(o[n-1],o[n]),u.length()>Number.EPSILON&&(u.normalize(),r=Math.acos(Ke.clamp(o[n-1].dot(o[n]),-1,1)),a[n].applyMatrix4(l.makeRotationAxis(u,r))),s[n].crossVectors(o[n],a[n]);if(!0===e)for(r=Math.acos(Ke.clamp(a[0].dot(a[t]),-1,1)),r/=t,o[0].dot(u.crossVectors(a[0],a[t]))>0&&(r=-r),n=1;n<=t;n++)a[n].applyMatrix4(l.makeRotationAxis(o[n],r*n)),s[n].crossVectors(o[n],a[n]);return{tangents:o,normals:a,binormals:s}},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this},toJSON:function(){var t={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t},fromJSON:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}),(Ka.prototype=Object.create(Ya.prototype)).constructor=Ka,Ka.prototype.isEllipseCurve=!0,Ka.prototype.getPoint=function(t,e){for(var n=e||new Ze,r=2*Math.PI,i=this.aEndAngle-this.aStartAngle,o=Math.abs(i)<Number.EPSILON;i<0;)i+=r;for(;i>r;)i-=r;i<Number.EPSILON&&(i=o?0:r),!0!==this.aClockwise||o||(i===r?i=-r:i-=r);var a=this.aStartAngle+t*i,s=this.aX+this.xRadius*Math.cos(a),u=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){var l=Math.cos(this.aRotation),c=Math.sin(this.aRotation),h=s-this.aX,d=u-this.aY;s=h*l-d*c+this.aX,u=h*c+d*l+this.aY}return n.set(s,u)},Ka.prototype.copy=function(t){return Ya.prototype.copy.call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this},Ka.prototype.toJSON=function(){var t=Ya.prototype.toJSON.call(this);return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t},Ka.prototype.fromJSON=function(t){return Ya.prototype.fromJSON.call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this},(Za.prototype=Object.create(Ka.prototype)).constructor=Za,Za.prototype.isArcCurve=!0;var Ja=new $e,$a=new Qa,ts=new Qa,es=new Qa;function ns(t,e,n,r){Ya.call(this),this.type="CatmullRomCurve3",this.points=t||[],this.closed=e||!1,this.curveType=n||"centripetal",this.tension=r||.5}function rs(t,e,n,r,i){var o=.5*(r-e),a=.5*(i-n),s=t*t;return(2*n-2*r+o+a)*(t*s)+(-3*n+3*r-2*o-a)*s+o*t+n}function is(t,e,n,r){return function(t,n){var r=1-t;return r*r*e}(t)+function(t,e){return 2*(1-t)*t*n}(t)+function(t,e){return t*t*r}(t)}function os(t,e,n,r,i){return function(t,n){var r=1-t;return r*r*r*e}(t)+function(t,e){var r=1-t;return 3*r*r*t*n}(t)+function(t,e){return 3*(1-t)*t*t*r}(t)+function(t,e){return t*t*t*i}(t)}function as(t,e,n,r){Ya.call(this),this.type="CubicBezierCurve",this.v0=t||new Ze,this.v1=e||new Ze,this.v2=n||new Ze,this.v3=r||new Ze}function ss(t,e,n,r){Ya.call(this),this.type="CubicBezierCurve3",this.v0=t||new $e,this.v1=e||new $e,this.v2=n||new $e,this.v3=r||new $e}function us(t,e){Ya.call(this),this.type="LineCurve",this.v1=t||new Ze,this.v2=e||new Ze}function ls(t,e){Ya.call(this),this.type="LineCurve3",this.v1=t||new $e,this.v2=e||new $e}function cs(t,e,n){Ya.call(this),this.type="QuadraticBezierCurve",this.v0=t||new Ze,this.v1=e||new Ze,this.v2=n||new Ze}function hs(t,e,n){Ya.call(this),this.type="QuadraticBezierCurve3",this.v0=t||new $e,this.v1=e||new $e,this.v2=n||new $e}function ds(t){Ya.call(this),this.type="SplineCurve",this.points=t||[]}(ns.prototype=Object.create(Ya.prototype)).constructor=ns,ns.prototype.isCatmullRomCurve3=!0,ns.prototype.getPoint=function(t,e){var n,r,i,o,a=e||new $e,s=this.points,u=s.length,l=(u-(this.closed?0:1))*t,c=Math.floor(l),h=l-c;if(this.closed?c+=c>0?0:(Math.floor(Math.abs(c)/u)+1)*u:0===h&&c===u-1&&(c=u-2,h=1),this.closed||c>0?n=s[(c-1)%u]:(Ja.subVectors(s[0],s[1]).add(s[0]),n=Ja),r=s[c%u],i=s[(c+1)%u],this.closed||c+2<u?o=s[(c+2)%u]:(Ja.subVectors(s[u-1],s[u-2]).add(s[u-1]),o=Ja),"centripetal"===this.curveType||"chordal"===this.curveType){var d="chordal"===this.curveType?.5:.25,p=Math.pow(n.distanceToSquared(r),d),f=Math.pow(r.distanceToSquared(i),d),m=Math.pow(i.distanceToSquared(o),d);f<1e-4&&(f=1),p<1e-4&&(p=f),m<1e-4&&(m=f),$a.initNonuniformCatmullRom(n.x,r.x,i.x,o.x,p,f,m),ts.initNonuniformCatmullRom(n.y,r.y,i.y,o.y,p,f,m),es.initNonuniformCatmullRom(n.z,r.z,i.z,o.z,p,f,m)}else"catmullrom"===this.curveType&&($a.initCatmullRom(n.x,r.x,i.x,o.x,this.tension),ts.initCatmullRom(n.y,r.y,i.y,o.y,this.tension),es.initCatmullRom(n.z,r.z,i.z,o.z,this.tension));return a.set($a.calc(h),ts.calc(h),es.calc(h)),a},ns.prototype.copy=function(t){Ya.prototype.copy.call(this,t),this.points=[];for(var e=0,n=t.points.length;e<n;e++)this.points.push(t.points[e].clone());return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this},ns.prototype.toJSON=function(){var t=Ya.prototype.toJSON.call(this);t.points=[];for(var e=0,n=this.points.length;e<n;e++)t.points.push(this.points[e].toArray());return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t},ns.prototype.fromJSON=function(t){Ya.prototype.fromJSON.call(this,t),this.points=[];for(var e=0,n=t.points.length;e<n;e++){var r=t.points[e];this.points.push((new $e).fromArray(r))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this},(as.prototype=Object.create(Ya.prototype)).constructor=as,as.prototype.isCubicBezierCurve=!0,as.prototype.getPoint=function(t,e){var n=e||new Ze,r=this.v0,i=this.v1,o=this.v2,a=this.v3;return n.set(os(t,r.x,i.x,o.x,a.x),os(t,r.y,i.y,o.y,a.y)),n},as.prototype.copy=function(t){return Ya.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this},as.prototype.toJSON=function(){var t=Ya.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t},as.prototype.fromJSON=function(t){return Ya.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this},(ss.prototype=Object.create(Ya.prototype)).constructor=ss,ss.prototype.isCubicBezierCurve3=!0,ss.prototype.getPoint=function(t,e){var n=e||new $e,r=this.v0,i=this.v1,o=this.v2,a=this.v3;return n.set(os(t,r.x,i.x,o.x,a.x),os(t,r.y,i.y,o.y,a.y),os(t,r.z,i.z,o.z,a.z)),n},ss.prototype.copy=function(t){return Ya.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this},ss.prototype.toJSON=function(){var t=Ya.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t},ss.prototype.fromJSON=function(t){return Ya.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this},(us.prototype=Object.create(Ya.prototype)).constructor=us,us.prototype.isLineCurve=!0,us.prototype.getPoint=function(t,e){var n=e||new Ze;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n},us.prototype.getPointAt=function(t,e){return this.getPoint(t,e)},us.prototype.getTangent=function(){return this.v2.clone().sub(this.v1).normalize()},us.prototype.copy=function(t){return Ya.prototype.copy.call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this},us.prototype.toJSON=function(){var t=Ya.prototype.toJSON.call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},us.prototype.fromJSON=function(t){return Ya.prototype.fromJSON.call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},(ls.prototype=Object.create(Ya.prototype)).constructor=ls,ls.prototype.isLineCurve3=!0,ls.prototype.getPoint=function(t,e){var n=e||new $e;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n},ls.prototype.getPointAt=function(t,e){return this.getPoint(t,e)},ls.prototype.copy=function(t){return Ya.prototype.copy.call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this},ls.prototype.toJSON=function(){var t=Ya.prototype.toJSON.call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},ls.prototype.fromJSON=function(t){return Ya.prototype.fromJSON.call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},(cs.prototype=Object.create(Ya.prototype)).constructor=cs,cs.prototype.isQuadraticBezierCurve=!0,cs.prototype.getPoint=function(t,e){var n=e||new Ze,r=this.v0,i=this.v1,o=this.v2;return n.set(is(t,r.x,i.x,o.x),is(t,r.y,i.y,o.y)),n},cs.prototype.copy=function(t){return Ya.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this},cs.prototype.toJSON=function(){var t=Ya.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},cs.prototype.fromJSON=function(t){return Ya.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},(hs.prototype=Object.create(Ya.prototype)).constructor=hs,hs.prototype.isQuadraticBezierCurve3=!0,hs.prototype.getPoint=function(t,e){var n=e||new $e,r=this.v0,i=this.v1,o=this.v2;return n.set(is(t,r.x,i.x,o.x),is(t,r.y,i.y,o.y),is(t,r.z,i.z,o.z)),n},hs.prototype.copy=function(t){return Ya.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this},hs.prototype.toJSON=function(){var t=Ya.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},hs.prototype.fromJSON=function(t){return Ya.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},(ds.prototype=Object.create(Ya.prototype)).constructor=ds,ds.prototype.isSplineCurve=!0,ds.prototype.getPoint=function(t,e){var n=e||new Ze,r=this.points,i=(r.length-1)*t,o=Math.floor(i),a=i-o,s=r[0===o?o:o-1],u=r[o],l=r[o>r.length-2?r.length-1:o+1],c=r[o>r.length-3?r.length-1:o+2];return n.set(rs(a,s.x,u.x,l.x,c.x),rs(a,s.y,u.y,l.y,c.y)),n},ds.prototype.copy=function(t){Ya.prototype.copy.call(this,t),this.points=[];for(var e=0,n=t.points.length;e<n;e++)this.points.push(t.points[e].clone());return this},ds.prototype.toJSON=function(){var t=Ya.prototype.toJSON.call(this);t.points=[];for(var e=0,n=this.points.length;e<n;e++)t.points.push(this.points[e].toArray());return t},ds.prototype.fromJSON=function(t){Ya.prototype.fromJSON.call(this,t),this.points=[];for(var e=0,n=t.points.length;e<n;e++){var r=t.points[e];this.points.push((new Ze).fromArray(r))}return this};var ps=Object.freeze({ArcCurve:Za,CatmullRomCurve3:ns,CubicBezierCurve:as,CubicBezierCurve3:ss,EllipseCurve:Ka,LineCurve:us,LineCurve3:ls,QuadraticBezierCurve:cs,QuadraticBezierCurve3:hs,SplineCurve:ds});function fs(){Ya.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function ms(t){fs.call(this),this.type="Path",this.currentPoint=new Ze,t&&this.setFromPoints(t)}function vs(t){ms.call(this,t),this.uuid=Ke.generateUUID(),this.type="Shape",this.holes=[]}function gs(t,e){Fn.call(this),this.type="Light",this.color=new Sn(t),this.intensity=void 0!==e?e:1,this.receiveShadow=void 0}function ys(t,e,n){gs.call(this,t,n),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(Fn.DefaultUp),this.updateMatrix(),this.groundColor=new Sn(e)}function _s(t){this.camera=t,this.bias=0,this.radius=1,this.mapSize=new Ze(512,512),this.map=null,this.matrix=new Qe}function bs(){_s.call(this,new zi(50,1,.5,500))}function ws(t,e,n,r,i,o){gs.call(this,t,e),this.type="SpotLight",this.position.copy(Fn.DefaultUp),this.updateMatrix(),this.target=new Fn,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(t){this.intensity=t/Math.PI}}),this.distance=void 0!==n?n:0,this.angle=void 0!==r?r:Math.PI/3,this.penumbra=void 0!==i?i:0,this.decay=void 0!==o?o:1,this.shadow=new bs}function xs(t,e,n,r){gs.call(this,t,e),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(t){this.intensity=t/(4*Math.PI)}}),this.distance=void 0!==n?n:0,this.decay=void 0!==r?r:1,this.shadow=new _s(new zi(90,1,.5,500))}function Es(t,e,n,r,i,o){Vi.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=n,this.bottom=r,this.near=void 0!==i?i:.1,this.far=void 0!==o?o:2e3,this.updateProjectionMatrix()}function Ss(){_s.call(this,new Es(-5,5,5,-5,.5,500))}function Ts(t,e){gs.call(this,t,e),this.type="DirectionalLight",this.position.copy(Fn.DefaultUp),this.updateMatrix(),this.target=new Fn,this.shadow=new Ss}function Ms(t,e){gs.call(this,t,e),this.type="AmbientLight",this.castShadow=void 0}function Cs(t,e,n,r){gs.call(this,t,e),this.type="RectAreaLight",this.width=void 0!==n?n:10,this.height=void 0!==r?r:10}fs.prototype=Object.assign(Object.create(Ya.prototype),{constructor:fs,add:function(t){this.curves.push(t)},closePath:function(){var t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new us(e,t))},getPoint:function(t){for(var e=t*this.getLength(),n=this.getCurveLengths(),r=0;r<n.length;){if(n[r]>=e){var i=n[r]-e,o=this.curves[r],a=o.getLength();return o.getPointAt(0===a?0:1-i/a)}r++}return null},getLength:function(){var t=this.getCurveLengths();return t[t.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var t=[],e=0,n=0,r=this.curves.length;n<r;n++)e+=this.curves[n].getLength(),t.push(e);return this.cacheLengths=t,t},getSpacedPoints:function(t){void 0===t&&(t=40);for(var e=[],n=0;n<=t;n++)e.push(this.getPoint(n/t));return this.autoClose&&e.push(e[0]),e},getPoints:function(t){t=t||12;for(var e,n=[],r=0,i=this.curves;r<i.length;r++)for(var o=i[r],a=o.getPoints(o&&o.isEllipseCurve?2*t:o&&(o.isLineCurve||o.isLineCurve3)?1:o&&o.isSplineCurve?t*o.points.length:t),s=0;s<a.length;s++){var u=a[s];e&&e.equals(u)||(n.push(u),e=u)}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n},copy:function(t){Ya.prototype.copy.call(this,t),this.curves=[];for(var e=0,n=t.curves.length;e<n;e++)this.curves.push(t.curves[e].clone());return this.autoClose=t.autoClose,this},toJSON:function(){var t=Ya.prototype.toJSON.call(this);t.autoClose=this.autoClose,t.curves=[];for(var e=0,n=this.curves.length;e<n;e++)t.curves.push(this.curves[e].toJSON());return t},fromJSON:function(t){Ya.prototype.fromJSON.call(this,t),this.autoClose=t.autoClose,this.curves=[];for(var e=0,n=t.curves.length;e<n;e++){var r=t.curves[e];this.curves.push((new ps[r.type]).fromJSON(r))}return this}}),ms.prototype=Object.assign(Object.create(fs.prototype),{constructor:ms,setFromPoints:function(t){this.moveTo(t[0].x,t[0].y);for(var e=1,n=t.length;e<n;e++)this.lineTo(t[e].x,t[e].y)},moveTo:function(t,e){this.currentPoint.set(t,e)},lineTo:function(t,e){var n=new us(this.currentPoint.clone(),new Ze(t,e));this.curves.push(n),this.currentPoint.set(t,e)},quadraticCurveTo:function(t,e,n,r){var i=new cs(this.currentPoint.clone(),new Ze(t,e),new Ze(n,r));this.curves.push(i),this.currentPoint.set(n,r)},bezierCurveTo:function(t,e,n,r,i,o){var a=new as(this.currentPoint.clone(),new Ze(t,e),new Ze(n,r),new Ze(i,o));this.curves.push(a),this.currentPoint.set(i,o)},splineThru:function(t){var e=new ds([this.currentPoint.clone()].concat(t));this.curves.push(e),this.currentPoint.copy(t[t.length-1])},arc:function(t,e,n,r,i,o){this.absarc(t+this.currentPoint.x,e+this.currentPoint.y,n,r,i,o)},absarc:function(t,e,n,r,i,o){this.absellipse(t,e,n,n,r,i,o)},ellipse:function(t,e,n,r,i,o,a,s){this.absellipse(t+this.currentPoint.x,e+this.currentPoint.y,n,r,i,o,a,s)},absellipse:function(t,e,n,r,i,o,a,s){var u=new Ka(t,e,n,r,i,o,a,s);if(this.curves.length>0){var l=u.getPoint(0);l.equals(this.currentPoint)||this.lineTo(l.x,l.y)}this.curves.push(u);var c=u.getPoint(1);this.currentPoint.copy(c)},copy:function(t){return fs.prototype.copy.call(this,t),this.currentPoint.copy(t.currentPoint),this},toJSON:function(){var t=fs.prototype.toJSON.call(this);return t.currentPoint=this.currentPoint.toArray(),t},fromJSON:function(t){return fs.prototype.fromJSON.call(this,t),this.currentPoint.fromArray(t.currentPoint),this}}),vs.prototype=Object.assign(Object.create(ms.prototype),{constructor:vs,getPointsHoles:function(t){for(var e=[],n=0,r=this.holes.length;n<r;n++)e[n]=this.holes[n].getPoints(t);return e},extractPoints:function(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}},copy:function(t){ms.prototype.copy.call(this,t),this.holes=[];for(var e=0,n=t.holes.length;e<n;e++)this.holes.push(t.holes[e].clone());return this},toJSON:function(){var t=ms.prototype.toJSON.call(this);t.uuid=this.uuid,t.holes=[];for(var e=0,n=this.holes.length;e<n;e++)t.holes.push(this.holes[e].toJSON());return t},fromJSON:function(t){ms.prototype.fromJSON.call(this,t),this.uuid=t.uuid,this.holes=[];for(var e=0,n=t.holes.length;e<n;e++){var r=t.holes[e];this.holes.push((new ms).fromJSON(r))}return this}}),gs.prototype=Object.assign(Object.create(Fn.prototype),{constructor:gs,isLight:!0,copy:function(t){return Fn.prototype.copy.call(this,t),this.color.copy(t.color),this.intensity=t.intensity,this},toJSON:function(t){var e=Fn.prototype.toJSON.call(this,t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),e}}),ys.prototype=Object.assign(Object.create(gs.prototype),{constructor:ys,isHemisphereLight:!0,copy:function(t){return gs.prototype.copy.call(this,t),this.groundColor.copy(t.groundColor),this}}),Object.assign(_s.prototype,{copy:function(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var t={};return 0!==this.bias&&(t.bias=this.bias),1!==this.radius&&(t.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}),bs.prototype=Object.assign(Object.create(_s.prototype),{constructor:bs,isSpotLightShadow:!0,update:function(t){var e=this.camera,n=2*Ke.RAD2DEG*t.angle,r=this.mapSize.width/this.mapSize.height,i=t.distance||e.far;n===e.fov&&r===e.aspect&&i===e.far||(e.fov=n,e.aspect=r,e.far=i,e.updateProjectionMatrix())}}),ws.prototype=Object.assign(Object.create(gs.prototype),{constructor:ws,isSpotLight:!0,copy:function(t){return gs.prototype.copy.call(this,t),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),xs.prototype=Object.assign(Object.create(gs.prototype),{constructor:xs,isPointLight:!0,copy:function(t){return gs.prototype.copy.call(this,t),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}),Es.prototype=Object.assign(Object.create(Vi.prototype),{constructor:Es,isOrthographicCamera:!0,copy:function(t,e){return Vi.prototype.copy.call(this,t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this},setViewOffset:function(t,e,n,r,i,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2,i=n-t,o=n+t,a=r+e,s=r-e;if(null!==this.view&&this.view.enabled){var u=this.zoom/(this.view.width/this.view.fullWidth),l=this.zoom/(this.view.height/this.view.fullHeight),c=(this.right-this.left)/this.view.width,h=(this.top-this.bottom)/this.view.height;o=(i+=c*(this.view.offsetX/u))+c*(this.view.width/u),s=(a-=h*(this.view.offsetY/l))-h*(this.view.height/l)}this.projectionMatrix.makeOrthographic(i,o,a,s,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(t){var e=Fn.prototype.toJSON.call(this,t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}}),Ss.prototype=Object.assign(Object.create(_s.prototype),{constructor:Ss}),Ts.prototype=Object.assign(Object.create(gs.prototype),{constructor:Ts,isDirectionalLight:!0,copy:function(t){return gs.prototype.copy.call(this,t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),Ms.prototype=Object.assign(Object.create(gs.prototype),{constructor:Ms,isAmbientLight:!0}),Cs.prototype=Object.assign(Object.create(gs.prototype),{constructor:Cs,isRectAreaLight:!0,copy:function(t){return gs.prototype.copy.call(this,t),this.width=t.width,this.height=t.height,this},toJSON:function(t){var e=gs.prototype.toJSON.call(this,t);return e.object.width=this.width,e.object.height=this.height,e}});var As={arraySlice:function(t,e,n){return As.isTypedArray(t)?new t.constructor(t.subarray(e,void 0!==n?n:t.length)):t.slice(e,n)},convertArray:function(t,e,n){return!t||!n&&t.constructor===e?t:"number"==typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)},isTypedArray:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)},getKeyframeOrder:function(t){for(var e=t.length,n=new Array(e),r=0;r!==e;++r)n[r]=r;return n.sort(function(e,n){return t[e]-t[n]}),n},sortedArray:function(t,e,n){for(var r=t.length,i=new t.constructor(r),o=0,a=0;a!==r;++o)for(var s=n[o]*e,u=0;u!==e;++u)i[a++]=t[s+u];return i},flattenJSON:function(t,e,n,r){for(var i=1,o=t[0];void 0!==o&&void 0===o[r];)o=t[i++];if(void 0!==o){var a=o[r];if(void 0!==a)if(Array.isArray(a))do{void 0!==(a=o[r])&&(e.push(o.time),n.push.apply(n,a)),o=t[i++]}while(void 0!==o);else if(void 0!==a.toArray)do{void 0!==(a=o[r])&&(e.push(o.time),a.toArray(n,n.length)),o=t[i++]}while(void 0!==o);else do{void 0!==(a=o[r])&&(e.push(o.time),n.push(a)),o=t[i++]}while(void 0!==o)}}};function Ps(t,e,n,r){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new e.constructor(n),this.sampleValues=e,this.valueSize=n}function Os(t,e,n,r){Ps.call(this,t,e,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function Rs(t,e,n,r){Ps.call(this,t,e,n,r)}function Ls(t,e,n,r){Ps.call(this,t,e,n,r)}function Is(t,e,n,r){if(void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===e||0===e.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=As.convertArray(e,this.TimeBufferType),this.values=As.convertArray(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}function Ns(t,e,n){Is.call(this,t,e,n)}function Ds(t,e,n,r){Is.call(this,t,e,n,r)}function ks(t,e,n,r){Is.call(this,t,e,n,r)}function Fs(t,e,n,r){Ps.call(this,t,e,n,r)}function js(t,e,n,r){Is.call(this,t,e,n,r)}function Us(t,e,n,r){Is.call(this,t,e,n,r)}function Bs(t,e,n,r){Is.call(this,t,e,n,r)}function Gs(t,e,n){this.name=t,this.tracks=n,this.duration=void 0!==e?e:-1,this.uuid=Ke.generateUUID(),this.duration<0&&this.resetDuration()}function Vs(t){if(void 0===t.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var e=function(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return ks;case"vector":case"vector2":case"vector3":case"vector4":return Bs;case"color":return Ds;case"quaternion":return js;case"bool":case"boolean":return Ns;case"string":return Us}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}(t.type);if(void 0===t.times){var n=[],r=[];As.flattenJSON(t.keys,n,r,"value"),t.times=n,t.values=r}return void 0!==e.parse?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}function zs(t){this.manager=void 0!==t?t:Ba,this.textures={}}function Hs(t){this.manager=void 0!==t?t:Ba}Object.assign(Ps.prototype,{evaluate:function(t){var e=this.parameterPositions,n=this._cachedIndex,r=e[n],i=e[n-1];t:{e:{var o;n:{r:if(!(t<r)){for(var a=n+2;;){if(void 0===r){if(t<i)break r;return this._cachedIndex=n=e.length,this.afterEnd_(n-1,t,i)}if(n===a)break;if(i=r,t<(r=e[++n]))break e}o=e.length;break n}if(t>=i)break t;var s=e[1];for(t<s&&(n=2,i=s),a=n-2;;){if(void 0===i)return this._cachedIndex=0,this.beforeStart_(0,t,r);if(n===a)break;if(r=i,t>=(i=e[--n-1]))break e}o=n,n=0}for(;n<o;){var u=n+o>>>1;t<e[u]?o=u:n=u+1}if(r=e[n],void 0===(i=e[n-1]))return this._cachedIndex=0,this.beforeStart_(0,t,r);if(void 0===r)return this._cachedIndex=n=e.length,this.afterEnd_(n-1,i,t)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,t,r)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(t){for(var e=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=t*r,o=0;o!==r;++o)e[o]=n[i+o];return e},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}}),Object.assign(Ps.prototype,{beforeStart_:Ps.prototype.copySampleValue_,afterEnd_:Ps.prototype.copySampleValue_}),Os.prototype=Object.assign(Object.create(Ps.prototype),{constructor:Os,DefaultSettings_:{endingStart:Re,endingEnd:Re},intervalChanged_:function(t,e,n){var r=this.parameterPositions,i=t-2,o=t+1,a=r[i],s=r[o];if(void 0===a)switch(this.getSettings_().endingStart){case Le:i=t,a=2*e-n;break;case Ie:a=e+r[i=r.length-2]-r[i+1];break;default:i=t,a=n}if(void 0===s)switch(this.getSettings_().endingEnd){case Le:o=t,s=2*n-e;break;case Ie:o=1,s=n+r[1]-r[0];break;default:o=t-1,s=e}var u=.5*(n-e),l=this.valueSize;this._weightPrev=u/(e-a),this._weightNext=u/(s-n),this._offsetPrev=i*l,this._offsetNext=o*l},interpolate_:function(t,e,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=t*a,u=s-a,l=this._offsetPrev,c=this._offsetNext,h=this._weightPrev,d=this._weightNext,p=(n-e)/(r-e),f=p*p,m=f*p,v=-h*m+2*h*f-h*p,g=(1+h)*m+(-1.5-2*h)*f+(-.5+h)*p+1,y=(-1-d)*m+(1.5+d)*f+.5*p,_=d*m-d*f,b=0;b!==a;++b)i[b]=v*o[l+b]+g*o[u+b]+y*o[s+b]+_*o[c+b];return i}}),Rs.prototype=Object.assign(Object.create(Ps.prototype),{constructor:Rs,interpolate_:function(t,e,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=t*a,u=s-a,l=(n-e)/(r-e),c=1-l,h=0;h!==a;++h)i[h]=o[u+h]*c+o[s+h]*l;return i}}),Ls.prototype=Object.assign(Object.create(Ps.prototype),{constructor:Ls,interpolate_:function(t){return this.copySampleValue_(t-1)}}),Object.assign(Is,{toJSON:function(t){var e,n=t.constructor;if(void 0!==n.toJSON)e=n.toJSON(t);else{e={name:t.name,times:As.convertArray(t.times,Array),values:As.convertArray(t.values,Array)};var r=t.getInterpolation();r!==t.DefaultInterpolation&&(e.interpolation=r)}return e.type=t.ValueTypeName,e}}),Object.assign(Is.prototype,{constructor:Is,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:Pe,InterpolantFactoryMethodDiscrete:function(t){return new Ls(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodLinear:function(t){return new Rs(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:function(t){return new Os(this.times,this.values,this.getValueSize(),t)},setInterpolation:function(t){var e;switch(t){case Ae:e=this.InterpolantFactoryMethodDiscrete;break;case Pe:e=this.InterpolantFactoryMethodLinear;break;case Oe:e=this.InterpolantFactoryMethodSmooth}if(void 0===e){var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=e,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Ae;case this.InterpolantFactoryMethodLinear:return Pe;case this.InterpolantFactoryMethodSmooth:return Oe}},getValueSize:function(){return this.values.length/this.times.length},shift:function(t){if(0!==t)for(var e=this.times,n=0,r=e.length;n!==r;++n)e[n]+=t;return this},scale:function(t){if(1!==t)for(var e=this.times,n=0,r=e.length;n!==r;++n)e[n]*=t;return this},trim:function(t,e){for(var n=this.times,r=n.length,i=0,o=r-1;i!==r&&n[i]<t;)++i;for(;-1!==o&&n[o]>e;)--o;if(++o,0!==i||o!==r){i>=o&&(i=(o=Math.max(o,1))-1);var a=this.getValueSize();this.times=As.arraySlice(n,i,o),this.values=As.arraySlice(this.values,i*a,o*a)}return this},validate:function(){var t=!0,e=this.getValueSize();e-Math.floor(e)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);var n=this.times,r=this.values,i=n.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);for(var o=null,a=0;a!==i;a++){var s=n[a];if("number"==typeof s&&isNaN(s)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,s),t=!1;break}if(null!==o&&o>s){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,s,o),t=!1;break}o=s}if(void 0!==r&&As.isTypedArray(r)){a=0;for(var u=r.length;a!==u;++a){var l=r[a];if(isNaN(l)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,l),t=!1;break}}}return t},optimize:function(){for(var t=this.times,e=this.values,n=this.getValueSize(),r=this.getInterpolation()===Oe,i=1,o=t.length-1,a=1;a<o;++a){var s=!1,u=t[a];if(u!==t[a+1]&&(1!==a||u!==u[0]))if(r)s=!0;else for(var l=a*n,c=l-n,h=l+n,d=0;d!==n;++d){var p=e[l+d];if(p!==e[c+d]||p!==e[h+d]){s=!0;break}}if(s){if(a!==i){t[i]=t[a];var f=a*n,m=i*n;for(d=0;d!==n;++d)e[m+d]=e[f+d]}++i}}if(o>0){for(t[i]=t[o],f=o*n,m=i*n,d=0;d!==n;++d)e[m+d]=e[f+d];++i}return i!==t.length&&(this.times=As.arraySlice(t,0,i),this.values=As.arraySlice(e,0,i*n)),this}}),Ns.prototype=Object.assign(Object.create(Is.prototype),{constructor:Ns,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:Ae,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Ds.prototype=Object.assign(Object.create(Is.prototype),{constructor:Ds,ValueTypeName:"color"}),ks.prototype=Object.assign(Object.create(Is.prototype),{constructor:ks,ValueTypeName:"number"}),Fs.prototype=Object.assign(Object.create(Ps.prototype),{constructor:Fs,interpolate_:function(t,e,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=t*a,u=(n-e)/(r-e),l=s+a;s!==l;s+=4)Je.slerpFlat(i,0,o,s-a,o,s,u);return i}}),js.prototype=Object.assign(Object.create(Is.prototype),{constructor:js,ValueTypeName:"quaternion",DefaultInterpolation:Pe,InterpolantFactoryMethodLinear:function(t){return new Fs(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:void 0}),Us.prototype=Object.assign(Object.create(Is.prototype),{constructor:Us,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:Ae,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Bs.prototype=Object.assign(Object.create(Is.prototype),{constructor:Bs,ValueTypeName:"vector"}),Object.assign(Gs,{parse:function(t){for(var e=[],n=t.tracks,r=1/(t.fps||1),i=0,o=n.length;i!==o;++i)e.push(Vs(n[i]).scale(r));return new Gs(t.name,t.duration,e)},toJSON:function(t){for(var e=[],n=t.tracks,r={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid},i=0,o=n.length;i!==o;++i)e.push(Is.toJSON(n[i]));return r},CreateFromMorphTargetSequence:function(t,e,n,r){for(var i=e.length,o=[],a=0;a<i;a++){var s=[],u=[];s.push((a+i-1)%i,a,(a+1)%i),u.push(0,1,0);var l=As.getKeyframeOrder(s);s=As.sortedArray(s,1,l),u=As.sortedArray(u,1,l),r||0!==s[0]||(s.push(i),u.push(u[0])),o.push(new ks(".morphTargetInfluences["+e[a].name+"]",s,u).scale(1/n))}return new Gs(t,-1,o)},findByName:function(t,e){var n=t;Array.isArray(t)||(n=t.geometry&&t.geometry.animations||t.animations);for(var r=0;r<n.length;r++)if(n[r].name===e)return n[r];return null},CreateClipsFromMorphTargetSequences:function(t,e,n){for(var r={},i=/^([\w-]*?)([\d]+)$/,o=0,a=t.length;o<a;o++){var s=t[o],u=s.name.match(i);if(u&&u.length>1){var l=r[h=u[1]];l||(r[h]=l=[]),l.push(s)}}var c=[];for(var h in r)c.push(Gs.CreateFromMorphTargetSequence(h,r[h],e,n));return c},parseAnimation:function(t,e){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var n=function(t,e,n,r,i){if(0!==n.length){var o=[],a=[];As.flattenJSON(n,o,a,r),0!==o.length&&i.push(new t(e,o,a))}},r=[],i=t.name||"default",o=t.length||-1,a=t.fps||30,s=t.hierarchy||[],u=0;u<s.length;u++){var l=s[u].keys;if(l&&0!==l.length)if(l[0].morphTargets){for(var c={},h=0;h<l.length;h++)if(l[h].morphTargets)for(var d=0;d<l[h].morphTargets.length;d++)c[l[h].morphTargets[d]]=-1;for(var p in c){var f=[],m=[];for(d=0;d!==l[h].morphTargets.length;++d){var v=l[h];f.push(v.time),m.push(v.morphTarget===p?1:0)}r.push(new ks(".morphTargetInfluence["+p+"]",f,m))}o=c.length*(a||1)}else{var g=".bones["+e[u].name+"]";n(Bs,g+".position",l,"pos",r),n(js,g+".quaternion",l,"rot",r),n(Bs,g+".scale",l,"scl",r)}}return 0===r.length?null:new Gs(i,o,r)}}),Object.assign(Gs.prototype,{resetDuration:function(){for(var t=0,e=0,n=this.tracks.length;e!==n;++e){var r=this.tracks[e];t=Math.max(t,r.times[r.times.length-1])}return this.duration=t,this},trim:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this},validate:function(){for(var t=!0,e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t},optimize:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}}),Object.assign(zs.prototype,{load:function(t,e,n,r){var i=this;new Va(i.manager).load(t,function(t){e(i.parse(JSON.parse(t)))},n,r)},setTextures:function(t){this.textures=t},parse:function(t){var e=this.textures;function n(t){return void 0===e[t]&&console.warn("THREE.MaterialLoader: Undefined texture",t),e[t]}var r=new Fa[t.type];if(void 0!==t.uuid&&(r.uuid=t.uuid),void 0!==t.name&&(r.name=t.name),void 0!==t.color&&r.color.setHex(t.color),void 0!==t.roughness&&(r.roughness=t.roughness),void 0!==t.metalness&&(r.metalness=t.metalness),void 0!==t.emissive&&r.emissive.setHex(t.emissive),void 0!==t.specular&&r.specular.setHex(t.specular),void 0!==t.shininess&&(r.shininess=t.shininess),void 0!==t.clearCoat&&(r.clearCoat=t.clearCoat),void 0!==t.clearCoatRoughness&&(r.clearCoatRoughness=t.clearCoatRoughness),void 0!==t.vertexColors&&(r.vertexColors=t.vertexColors),void 0!==t.fog&&(r.fog=t.fog),void 0!==t.flatShading&&(r.flatShading=t.flatShading),void 0!==t.blending&&(r.blending=t.blending),void 0!==t.combine&&(r.combine=t.combine),void 0!==t.side&&(r.side=t.side),void 0!==t.opacity&&(r.opacity=t.opacity),void 0!==t.transparent&&(r.transparent=t.transparent),void 0!==t.alphaTest&&(r.alphaTest=t.alphaTest),void 0!==t.depthTest&&(r.depthTest=t.depthTest),void 0!==t.depthWrite&&(r.depthWrite=t.depthWrite),void 0!==t.colorWrite&&(r.colorWrite=t.colorWrite),void 0!==t.wireframe&&(r.wireframe=t.wireframe),void 0!==t.wireframeLinewidth&&(r.wireframeLinewidth=t.wireframeLinewidth),void 0!==t.wireframeLinecap&&(r.wireframeLinecap=t.wireframeLinecap),void 0!==t.wireframeLinejoin&&(r.wireframeLinejoin=t.wireframeLinejoin),void 0!==t.rotation&&(r.rotation=t.rotation),1!==t.linewidth&&(r.linewidth=t.linewidth),void 0!==t.dashSize&&(r.dashSize=t.dashSize),void 0!==t.gapSize&&(r.gapSize=t.gapSize),void 0!==t.scale&&(r.scale=t.scale),void 0!==t.polygonOffset&&(r.polygonOffset=t.polygonOffset),void 0!==t.polygonOffsetFactor&&(r.polygonOffsetFactor=t.polygonOffsetFactor),void 0!==t.polygonOffsetUnits&&(r.polygonOffsetUnits=t.polygonOffsetUnits),void 0!==t.skinning&&(r.skinning=t.skinning),void 0!==t.morphTargets&&(r.morphTargets=t.morphTargets),void 0!==t.dithering&&(r.dithering=t.dithering),void 0!==t.visible&&(r.visible=t.visible),void 0!==t.userData&&(r.userData=t.userData),void 0!==t.uniforms)for(var i in t.uniforms){var o=t.uniforms[i];switch(r.uniforms[i]={},o.type){case"t":r.uniforms[i].value=n(o.value);break;case"c":r.uniforms[i].value=(new Sn).setHex(o.value);break;case"v2":r.uniforms[i].value=(new Ze).fromArray(o.value);break;case"v3":r.uniforms[i].value=(new $e).fromArray(o.value);break;case"v4":r.uniforms[i].value=(new cn).fromArray(o.value);break;case"m4":r.uniforms[i].value=(new Qe).fromArray(o.value);break;default:r.uniforms[i].value=o.value}}if(void 0!==t.defines&&(r.defines=t.defines),void 0!==t.vertexShader&&(r.vertexShader=t.vertexShader),void 0!==t.fragmentShader&&(r.fragmentShader=t.fragmentShader),void 0!==t.shading&&(r.flatShading=1===t.shading),void 0!==t.size&&(r.size=t.size),void 0!==t.sizeAttenuation&&(r.sizeAttenuation=t.sizeAttenuation),void 0!==t.map&&(r.map=n(t.map)),void 0!==t.alphaMap&&(r.alphaMap=n(t.alphaMap),r.transparent=!0),void 0!==t.bumpMap&&(r.bumpMap=n(t.bumpMap)),void 0!==t.bumpScale&&(r.bumpScale=t.bumpScale),void 0!==t.normalMap&&(r.normalMap=n(t.normalMap)),void 0!==t.normalMapType&&(r.normalMapType=t.normalMapType),void 0!==t.normalScale){var a=t.normalScale;!1===Array.isArray(a)&&(a=[a,a]),r.normalScale=(new Ze).fromArray(a)}return void 0!==t.displacementMap&&(r.displacementMap=n(t.displacementMap)),void 0!==t.displacementScale&&(r.displacementScale=t.displacementScale),void 0!==t.displacementBias&&(r.displacementBias=t.displacementBias),void 0!==t.roughnessMap&&(r.roughnessMap=n(t.roughnessMap)),void 0!==t.metalnessMap&&(r.metalnessMap=n(t.metalnessMap)),void 0!==t.emissiveMap&&(r.emissiveMap=n(t.emissiveMap)),void 0!==t.emissiveIntensity&&(r.emissiveIntensity=t.emissiveIntensity),void 0!==t.specularMap&&(r.specularMap=n(t.specularMap)),void 0!==t.envMap&&(r.envMap=n(t.envMap)),void 0!==t.envMapIntensity&&(r.envMapIntensity=t.envMapIntensity),void 0!==t.reflectivity&&(r.reflectivity=t.reflectivity),void 0!==t.lightMap&&(r.lightMap=n(t.lightMap)),void 0!==t.lightMapIntensity&&(r.lightMapIntensity=t.lightMapIntensity),void 0!==t.aoMap&&(r.aoMap=n(t.aoMap)),void 0!==t.aoMapIntensity&&(r.aoMapIntensity=t.aoMapIntensity),void 0!==t.gradientMap&&(r.gradientMap=n(t.gradientMap)),r}}),Object.assign(Hs.prototype,{load:function(t,e,n,r){var i=this;new Va(i.manager).load(t,function(t){e(i.parse(JSON.parse(t)))},n,r)},parse:function(t){var e=new er,n=t.data.index;if(void 0!==n){var r=new Ks[n.type](n.array);e.setIndex(new Vn(r,1))}var i=t.data.attributes;for(var o in i){var a=i[o];r=new Ks[a.type](a.array),e.addAttribute(o,new Vn(r,a.itemSize,a.normalized))}var s=t.data.groups||t.data.drawcalls||t.data.offsets;if(void 0!==s)for(var u=0,l=s.length;u!==l;++u){var c=s[u];e.addGroup(c.start,c.count,c.materialIndex)}var h=t.data.boundingSphere;if(void 0!==h){var d=new $e;void 0!==h.center&&d.fromArray(h.center),e.boundingSphere=new mn(d,h.radius)}return e}});var Ws,qs,Xs,Ys,Ks={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!=typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function Zs(){}Zs.Handlers={handlers:[],add:function(t,e){this.handlers.push(t,e)},get:function(t){for(var e=this.handlers,n=0,r=e.length;n<r;n+=2){var i=e[n+1];if(e[n].test(t))return i}return null}},Object.assign(Zs.prototype,{crossOrigin:"anonymous",onLoadStart:function(){},onLoadProgress:function(){},onLoadComplete:function(){},initMaterials:function(t,e,n){for(var r=[],i=0;i<t.length;++i)r[i]=this.createMaterial(t[i],e,n);return r},createMaterial:(Ws={NoBlending:N,NormalBlending:D,AdditiveBlending:k,SubtractiveBlending:F,MultiplyBlending:j,CustomBlending:U},qs=new Sn,Xs=new Xa,Ys=new zs,function(t,e,n){var r={};function i(t,i,o,a,s){var u,l=e+t,c=Zs.Handlers.get(l);null!==c?u=c.load(l):(Xs.setCrossOrigin(n),u=Xs.load(l)),void 0!==i&&(u.repeat.fromArray(i),1!==i[0]&&(u.wrapS=Mt),1!==i[1]&&(u.wrapT=Mt)),void 0!==o&&u.offset.fromArray(o),void 0!==a&&("repeat"===a[0]&&(u.wrapS=Mt),"mirror"===a[0]&&(u.wrapS=At),"repeat"===a[1]&&(u.wrapT=Mt),"mirror"===a[1]&&(u.wrapT=At)),void 0!==s&&(u.anisotropy=s);var h=Ke.generateUUID();return r[h]=u,h}var o={uuid:Ke.generateUUID(),type:"MeshLambertMaterial"};for(var a in t){var s=t[a];switch(a){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":break;case"DbgName":o.name=s;break;case"blending":o.blending=Ws[s];break;case"colorAmbient":case"mapAmbient":console.warn("THREE.Loader.createMaterial:",a,"is no longer supported.");break;case"colorDiffuse":o.color=qs.fromArray(s).getHex();break;case"colorSpecular":o.specular=qs.fromArray(s).getHex();break;case"colorEmissive":o.emissive=qs.fromArray(s).getHex();break;case"specularCoef":o.shininess=s;break;case"shading":"basic"===s.toLowerCase()&&(o.type="MeshBasicMaterial"),"phong"===s.toLowerCase()&&(o.type="MeshPhongMaterial"),"standard"===s.toLowerCase()&&(o.type="MeshStandardMaterial");break;case"mapDiffuse":o.map=i(s,t.mapDiffuseRepeat,t.mapDiffuseOffset,t.mapDiffuseWrap,t.mapDiffuseAnisotropy);break;case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":break;case"mapEmissive":o.emissiveMap=i(s,t.mapEmissiveRepeat,t.mapEmissiveOffset,t.mapEmissiveWrap,t.mapEmissiveAnisotropy);break;case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":break;case"mapLight":o.lightMap=i(s,t.mapLightRepeat,t.mapLightOffset,t.mapLightWrap,t.mapLightAnisotropy);break;case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":break;case"mapAO":o.aoMap=i(s,t.mapAORepeat,t.mapAOOffset,t.mapAOWrap,t.mapAOAnisotropy);break;case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":break;case"mapBump":o.bumpMap=i(s,t.mapBumpRepeat,t.mapBumpOffset,t.mapBumpWrap,t.mapBumpAnisotropy);break;case"mapBumpScale":o.bumpScale=s;break;case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":break;case"mapNormal":o.normalMap=i(s,t.mapNormalRepeat,t.mapNormalOffset,t.mapNormalWrap,t.mapNormalAnisotropy);break;case"mapNormalFactor":o.normalScale=s;break;case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":break;case"mapSpecular":o.specularMap=i(s,t.mapSpecularRepeat,t.mapSpecularOffset,t.mapSpecularWrap,t.mapSpecularAnisotropy);break;case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":break;case"mapMetalness":o.metalnessMap=i(s,t.mapMetalnessRepeat,t.mapMetalnessOffset,t.mapMetalnessWrap,t.mapMetalnessAnisotropy);break;case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":break;case"mapRoughness":o.roughnessMap=i(s,t.mapRoughnessRepeat,t.mapRoughnessOffset,t.mapRoughnessWrap,t.mapRoughnessAnisotropy);break;case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":break;case"mapAlpha":o.alphaMap=i(s,t.mapAlphaRepeat,t.mapAlphaOffset,t.mapAlphaWrap,t.mapAlphaAnisotropy);break;case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"flipSided":o.side=C;break;case"doubleSided":o.side=A;break;case"transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity"),o.opacity=s;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":o[a]=s;break;case"vertexColors":!0===s&&(o.vertexColors=I),"face"===s&&(o.vertexColors=L);break;default:console.error("THREE.Loader.createMaterial: Unsupported",a,s)}}return"MeshBasicMaterial"===o.type&&delete o.emissive,"MeshPhongMaterial"!==o.type&&delete o.specular,o.opacity<1&&(o.transparent=!0),Ys.setTextures(r),Ys.parse(o)})});var Qs={decodeText:function(t){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(t);for(var e="",n=0,r=t.length;n<r;n++)e+=String.fromCharCode(t[n]);return decodeURIComponent(escape(e))},extractUrlBase:function(t){var e=t.lastIndexOf("/");return-1===e?"./":t.substr(0,e+1)}};function Js(t){"boolean"==typeof t&&(console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor."),t=void 0),this.manager=void 0!==t?t:Ba,this.withCredentials=!1}function $s(t){this.manager=void 0!==t?t:Ba,this.texturePath=""}Object.assign(Js.prototype,{crossOrigin:"anonymous",load:function(t,e,n,r){var i=this,o=void 0===this.path?Qs.extractUrlBase(t):this.path,a=new Va(this.manager);a.setPath(this.path),a.setWithCredentials(this.withCredentials),a.load(t,function(n){var r=JSON.parse(n),a=r.metadata;if(void 0!==a){var s=a.type;if(void 0!==s&&"object"===s.toLowerCase())return void console.error("THREE.JSONLoader: "+t+" should be loaded with THREE.ObjectLoader instead.")}var u=i.parse(r,o);e(u.geometry,u.materials)},n,r)},setPath:function(t){return this.path=t,this},setResourcePath:function(t){return this.resourcePath=t,this},setCrossOrigin:function(t){return this.crossOrigin=t,this},parse:function(t,e){void 0!==t.data&&(t=t.data),t.scale=void 0!==t.scale?1/t.scale:1;var n=new Gn;return function(t,e){function n(t,e){return t&1<<e}var r,i,o,a,s,u,l,c,h,d,p,f,m,v,g,y,_,b,w,x,E,S,T,M,C,A=t.faces,P=t.vertices,O=t.normals,R=t.colors,L=t.scale,I=0;if(void 0!==t.uvs){for(r=0;r<t.uvs.length;r++)t.uvs[r].length&&I++;for(r=0;r<I;r++)e.faceVertexUvs[r]=[]}for(a=0,s=P.length;a<s;)(b=new $e).x=P[a++]*L,b.y=P[a++]*L,b.z=P[a++]*L,e.vertices.push(b);for(a=0,s=A.length;a<s;)if(p=n(d=A[a++],0),f=n(d,1),m=n(d,3),v=n(d,4),g=n(d,5),y=n(d,6),_=n(d,7),p){if((x=new Pn).a=A[a],x.b=A[a+1],x.c=A[a+3],(E=new Pn).a=A[a+1],E.b=A[a+2],E.c=A[a+3],a+=4,f&&(h=A[a++],x.materialIndex=h,E.materialIndex=h),o=e.faces.length,m)for(r=0;r<I;r++)for(M=t.uvs[r],e.faceVertexUvs[r][o]=[],e.faceVertexUvs[r][o+1]=[],i=0;i<4;i++)C=new Ze(M[2*(c=A[a++])],M[2*c+1]),2!==i&&e.faceVertexUvs[r][o].push(C),0!==i&&e.faceVertexUvs[r][o+1].push(C);if(v&&(l=3*A[a++],x.normal.set(O[l++],O[l++],O[l]),E.normal.copy(x.normal)),g)for(r=0;r<4;r++)l=3*A[a++],T=new $e(O[l++],O[l++],O[l]),2!==r&&x.vertexNormals.push(T),0!==r&&E.vertexNormals.push(T);if(y&&(u=A[a++],x.color.setHex(S=R[u]),E.color.setHex(S)),_)for(r=0;r<4;r++)S=R[u=A[a++]],2!==r&&x.vertexColors.push(new Sn(S)),0!==r&&E.vertexColors.push(new Sn(S));e.faces.push(x),e.faces.push(E)}else{if((w=new Pn).a=A[a++],w.b=A[a++],w.c=A[a++],f&&(h=A[a++],w.materialIndex=h),o=e.faces.length,m)for(r=0;r<I;r++)for(M=t.uvs[r],e.faceVertexUvs[r][o]=[],i=0;i<3;i++)C=new Ze(M[2*(c=A[a++])],M[2*c+1]),e.faceVertexUvs[r][o].push(C);if(v&&(l=3*A[a++],w.normal.set(O[l++],O[l++],O[l])),g)for(r=0;r<3;r++)l=3*A[a++],T=new $e(O[l++],O[l++],O[l]),w.vertexNormals.push(T);if(y&&(u=A[a++],w.color.setHex(R[u])),_)for(r=0;r<3;r++)u=A[a++],w.vertexColors.push(new Sn(R[u]));e.faces.push(w)}}(t,n),function(t,e){var n=void 0!==t.influencesPerVertex?t.influencesPerVertex:2;if(t.skinWeights)for(var r=0,i=t.skinWeights.length;r<i;r+=n)e.skinWeights.push(new cn(t.skinWeights[r],n>1?t.skinWeights[r+1]:0,n>2?t.skinWeights[r+2]:0,n>3?t.skinWeights[r+3]:0));if(t.skinIndices)for(r=0,i=t.skinIndices.length;r<i;r+=n)e.skinIndices.push(new cn(t.skinIndices[r],n>1?t.skinIndices[r+1]:0,n>2?t.skinIndices[r+2]:0,n>3?t.skinIndices[r+3]:0));e.bones=t.bones,e.bones&&e.bones.length>0&&(e.skinWeights.length!==e.skinIndices.length||e.skinIndices.length!==e.vertices.length)&&console.warn("When skinning, number of vertices ("+e.vertices.length+"), skinIndices ("+e.skinIndices.length+"), and skinWeights ("+e.skinWeights.length+") should match.")}(t,n),function(t,e){var n=t.scale;if(void 0!==t.morphTargets)for(var r=0,i=t.morphTargets.length;r<i;r++){e.morphTargets[r]={},e.morphTargets[r].name=t.morphTargets[r].name,e.morphTargets[r].vertices=[];for(var o=e.morphTargets[r].vertices,a=t.morphTargets[r].vertices,s=0,u=a.length;s<u;s+=3){var l=new $e;l.x=a[s]*n,l.y=a[s+1]*n,l.z=a[s+2]*n,o.push(l)}}if(void 0!==t.morphColors&&t.morphColors.length>0){console.warn('THREE.JSONLoader: "morphColors" no longer supported. Using them as face colors.');var c=e.faces,h=t.morphColors[0].colors;for(r=0,i=c.length;r<i;r++)c[r].color.fromArray(h,3*r)}}(t,n),function(t,e){var n=[],r=[];void 0!==t.animation&&r.push(t.animation),void 0!==t.animations&&(t.animations.length?r=r.concat(t.animations):r.push(t.animations));for(var i=0;i<r.length;i++){var o=Gs.parseAnimation(r[i],e.bones);o&&n.push(o)}if(e.morphTargets){var a=Gs.CreateClipsFromMorphTargetSequences(e.morphTargets,10);n=n.concat(a)}n.length>0&&(e.animations=n)}(t,n),n.computeFaceNormals(),n.computeBoundingSphere(),void 0===t.materials||0===t.materials.length?{geometry:n}:{geometry:n,materials:Zs.prototype.initMaterials(t.materials,this.resourcePath||e,this.crossOrigin)}}}),Object.assign($s.prototype,{crossOrigin:"anonymous",load:function(t,e,n,r){""===this.texturePath&&(this.texturePath=t.substring(0,t.lastIndexOf("/")+1));var i=this;new Va(i.manager).load(t,function(n){var o=null;try{o=JSON.parse(n)}catch(e){return void 0!==r&&r(e),void console.error("THREE:ObjectLoader: Can't parse "+t+".",e.message)}var a=o.metadata;void 0!==a&&void 0!==a.type&&"geometry"!==a.type.toLowerCase()?i.parse(o,e):console.error("THREE.ObjectLoader: Can't load "+t+". Use THREE.JSONLoader instead.")},n,r)},setTexturePath:function(t){return this.texturePath=t,this},setCrossOrigin:function(t){return this.crossOrigin=t,this},parse:function(t,e){var n=this.parseShape(t.shapes),r=this.parseGeometries(t.geometries,n),i=this.parseImages(t.images,function(){void 0!==e&&e(s)}),o=this.parseTextures(t.textures,i),a=this.parseMaterials(t.materials,o),s=this.parseObject(t.object,r,a);return t.animations&&(s.animations=this.parseAnimations(t.animations)),void 0!==t.images&&0!==t.images.length||void 0!==e&&e(s),s},parseShape:function(t){var e={};if(void 0!==t)for(var n=0,r=t.length;n<r;n++){var i=(new vs).fromJSON(t[n]);e[i.uuid]=i}return e},parseGeometries:function(t,e){var n={};if(void 0!==t)for(var r=new Js,i=new Hs,o=0,a=t.length;o<a;o++){var s,u=t[o];switch(u.type){case"PlaneGeometry":case"PlaneBufferGeometry":s=new Ma[u.type](u.width,u.height,u.widthSegments,u.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":s=new Ma[u.type](u.width,u.height,u.depth,u.widthSegments,u.heightSegments,u.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":s=new Ma[u.type](u.radius,u.segments,u.thetaStart,u.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":s=new Ma[u.type](u.radiusTop,u.radiusBottom,u.height,u.radialSegments,u.heightSegments,u.openEnded,u.thetaStart,u.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":s=new Ma[u.type](u.radius,u.height,u.radialSegments,u.heightSegments,u.openEnded,u.thetaStart,u.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":s=new Ma[u.type](u.radius,u.widthSegments,u.heightSegments,u.phiStart,u.phiLength,u.thetaStart,u.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":s=new Ma[u.type](u.radius,u.detail);break;case"RingGeometry":case"RingBufferGeometry":s=new Ma[u.type](u.innerRadius,u.outerRadius,u.thetaSegments,u.phiSegments,u.thetaStart,u.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":s=new Ma[u.type](u.radius,u.tube,u.radialSegments,u.tubularSegments,u.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":s=new Ma[u.type](u.radius,u.tube,u.tubularSegments,u.radialSegments,u.p,u.q);break;case"LatheGeometry":case"LatheBufferGeometry":s=new Ma[u.type](u.points,u.segments,u.phiStart,u.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":s=new Ma[u.type](u.vertices,u.indices,u.radius,u.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":for(var l=[],c=0,h=u.shapes.length;c<h;c++)l.push(e[u.shapes[c]]);s=new Ma[u.type](l,u.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":for(l=[],c=0,h=u.shapes.length;c<h;c++)l.push(e[u.shapes[c]]);var d=u.options.extrudePath;void 0!==d&&(u.options.extrudePath=(new ps[d.type]).fromJSON(d)),s=new Ma[u.type](l,u.options);break;case"BufferGeometry":s=i.parse(u);break;case"Geometry":s=r.parse(u,this.texturePath).geometry;break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+u.type+'"');continue}s.uuid=u.uuid,void 0!==u.name&&(s.name=u.name),!0===s.isBufferGeometry&&void 0!==u.userData&&(s.userData=u.userData),n[u.uuid]=s}return n},parseMaterials:function(t,e){var n={};if(void 0!==t){var r=new zs;r.setTextures(e);for(var i=0,o=t.length;i<o;i++){var a=t[i];if("MultiMaterial"===a.type){for(var s=[],u=0;u<a.materials.length;u++)s.push(r.parse(a.materials[u]));n[a.uuid]=s}else n[a.uuid]=r.parse(a)}}return n},parseAnimations:function(t){for(var e=[],n=0;n<t.length;n++){var r=t[n],i=Gs.parse(r);void 0!==r.uuid&&(i.uuid=r.uuid),e.push(i)}return e},parseImages:function(t,e){var n=this,r={};function i(t){return n.manager.itemStart(t),o.load(t,function(){n.manager.itemEnd(t)},void 0,function(){n.manager.itemEnd(t),n.manager.itemError(t)})}if(void 0!==t&&t.length>0){var o=new Wa(new Ua(e));o.setCrossOrigin(this.crossOrigin);for(var a=0,s=t.length;a<s;a++){var u=t[a],l=u.url;if(Array.isArray(l)){r[u.uuid]=[];for(var c=0,h=l.length;c<h;c++){var d=l[c],p=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(d)?d:n.texturePath+d;r[u.uuid].push(i(p))}}else p=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u.url)?u.url:n.texturePath+u.url,r[u.uuid]=i(p)}}return r},parseTextures:function(t,e){function n(t,e){return"number"==typeof t?t:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",t),e[t])}var r={};if(void 0!==t)for(var i=0,o=t.length;i<o;i++){var a,s=t[i];void 0===s.image&&console.warn('THREE.ObjectLoader: No "image" specified for',s.uuid),void 0===e[s.image]&&console.warn("THREE.ObjectLoader: Undefined image",s.image),(a=Array.isArray(e[s.image])?new Mr(e[s.image]):new ln(e[s.image])).needsUpdate=!0,a.uuid=s.uuid,void 0!==s.name&&(a.name=s.name),void 0!==s.mapping&&(a.mapping=n(s.mapping,eu)),void 0!==s.offset&&a.offset.fromArray(s.offset),void 0!==s.repeat&&a.repeat.fromArray(s.repeat),void 0!==s.center&&a.center.fromArray(s.center),void 0!==s.rotation&&(a.rotation=s.rotation),void 0!==s.wrap&&(a.wrapS=n(s.wrap[0],nu),a.wrapT=n(s.wrap[1],nu)),void 0!==s.format&&(a.format=s.format),void 0!==s.minFilter&&(a.minFilter=n(s.minFilter,ru)),void 0!==s.magFilter&&(a.magFilter=n(s.magFilter,ru)),void 0!==s.anisotropy&&(a.anisotropy=s.anisotropy),void 0!==s.flipY&&(a.flipY=s.flipY),r[s.uuid]=a}return r},parseObject:function(t,e,n){var r;function i(t){return void 0===e[t]&&console.warn("THREE.ObjectLoader: Undefined geometry",t),e[t]}function o(t){if(void 0!==t){if(Array.isArray(t)){for(var e=[],r=0,i=t.length;r<i;r++){var o=t[r];void 0===n[o]&&console.warn("THREE.ObjectLoader: Undefined material",o),e.push(n[o])}return e}return void 0===n[t]&&console.warn("THREE.ObjectLoader: Undefined material",t),n[t]}}switch(t.type){case"Scene":r=new Ki,void 0!==t.background&&Number.isInteger(t.background)&&(r.background=new Sn(t.background)),void 0!==t.fog&&("Fog"===t.fog.type?r.fog=new Yi(t.fog.color,t.fog.near,t.fog.far):"FogExp2"===t.fog.type&&(r.fog=new Xi(t.fog.color,t.fog.density)));break;case"PerspectiveCamera":r=new zi(t.fov,t.aspect,t.near,t.far),void 0!==t.focus&&(r.focus=t.focus),void 0!==t.zoom&&(r.zoom=t.zoom),void 0!==t.filmGauge&&(r.filmGauge=t.filmGauge),void 0!==t.filmOffset&&(r.filmOffset=t.filmOffset),void 0!==t.view&&(r.view=Object.assign({},t.view));break;case"OrthographicCamera":r=new Es(t.left,t.right,t.top,t.bottom,t.near,t.far),void 0!==t.zoom&&(r.zoom=t.zoom),void 0!==t.view&&(r.view=Object.assign({},t.view));break;case"AmbientLight":r=new Ms(t.color,t.intensity);break;case"DirectionalLight":r=new Ts(t.color,t.intensity);break;case"PointLight":r=new xs(t.color,t.intensity,t.distance,t.decay);break;case"RectAreaLight":r=new Cs(t.color,t.intensity,t.width,t.height);break;case"SpotLight":r=new ws(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay);break;case"HemisphereLight":r=new ys(t.color,t.groundColor,t.intensity);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":var a=i(t.geometry),s=o(t.material);r=a.bones&&a.bones.length>0?new ro(a,s):new Sr(a,s);break;case"LOD":r=new to;break;case"Line":r=new oo(i(t.geometry),o(t.material),t.mode);break;case"LineLoop":r=new so(i(t.geometry),o(t.material));break;case"LineSegments":r=new ao(i(t.geometry),o(t.material));break;case"PointCloud":case"Points":r=new lo(i(t.geometry),o(t.material));break;case"Sprite":r=new $i(o(t.material));break;case"Group":r=new Gi;break;default:r=new Fn}if(r.uuid=t.uuid,void 0!==t.name&&(r.name=t.name),void 0!==t.matrix?(r.matrix.fromArray(t.matrix),void 0!==t.matrixAutoUpdate&&(r.matrixAutoUpdate=t.matrixAutoUpdate),r.matrixAutoUpdate&&r.matrix.decompose(r.position,r.quaternion,r.scale)):(void 0!==t.position&&r.position.fromArray(t.position),void 0!==t.rotation&&r.rotation.fromArray(t.rotation),void 0!==t.quaternion&&r.quaternion.fromArray(t.quaternion),void 0!==t.scale&&r.scale.fromArray(t.scale)),void 0!==t.castShadow&&(r.castShadow=t.castShadow),void 0!==t.receiveShadow&&(r.receiveShadow=t.receiveShadow),t.shadow&&(void 0!==t.shadow.bias&&(r.shadow.bias=t.shadow.bias),void 0!==t.shadow.radius&&(r.shadow.radius=t.shadow.radius),void 0!==t.shadow.mapSize&&r.shadow.mapSize.fromArray(t.shadow.mapSize),void 0!==t.shadow.camera&&(r.shadow.camera=this.parseObject(t.shadow.camera))),void 0!==t.visible&&(r.visible=t.visible),void 0!==t.frustumCulled&&(r.frustumCulled=t.frustumCulled),void 0!==t.renderOrder&&(r.renderOrder=t.renderOrder),void 0!==t.userData&&(r.userData=t.userData),void 0!==t.layers&&(r.layers.mask=t.layers),void 0!==t.children)for(var u=t.children,l=0;l<u.length;l++)r.add(this.parseObject(u[l],e,n));if("LOD"===t.type)for(var c=t.levels,h=0;h<c.length;h++){var d=c[h],p=r.getObjectByProperty("uuid",d.object);void 0!==p&&r.addLevel(p,d.distance)}return r}});var tu,eu={UVMapping:yt,CubeReflectionMapping:_t,CubeRefractionMapping:bt,EquirectangularReflectionMapping:wt,EquirectangularRefractionMapping:xt,SphericalReflectionMapping:Et,CubeUVReflectionMapping:St,CubeUVRefractionMapping:Tt},nu={RepeatWrapping:Mt,ClampToEdgeWrapping:Ct,MirroredRepeatWrapping:At},ru={NearestFilter:Pt,NearestMipMapNearestFilter:Ot,NearestMipMapLinearFilter:Rt,LinearFilter:Lt,LinearMipMapNearestFilter:It,LinearMipMapLinearFilter:Nt};function iu(t){"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.manager=void 0!==t?t:Ba,this.options=void 0}function ou(){this.type="ShapePath",this.color=new Sn,this.subPaths=[],this.currentPath=null}function au(t){this.type="Font",this.data=t}function su(t,e,n,r,i){var o=i.glyphs[t]||i.glyphs["?"];if(o){var a,s,u,l,c,h,d,p,f=new ou;if(o.o)for(var m=o._cachedOutline||(o._cachedOutline=o.o.split(" ")),v=0,g=m.length;v<g;)switch(m[v++]){case"m":a=m[v++]*e+n,s=m[v++]*e+r,f.moveTo(a,s);break;case"l":a=m[v++]*e+n,s=m[v++]*e+r,f.lineTo(a,s);break;case"q":u=m[v++]*e+n,l=m[v++]*e+r,c=m[v++]*e+n,h=m[v++]*e+r,f.quadraticCurveTo(c,h,u,l);break;case"b":u=m[v++]*e+n,l=m[v++]*e+r,c=m[v++]*e+n,h=m[v++]*e+r,d=m[v++]*e+n,p=m[v++]*e+r,f.bezierCurveTo(c,h,d,p,u,l)}return{offsetX:o.ha*e,path:f}}}function uu(t){this.manager=void 0!==t?t:Ba}iu.prototype={constructor:iu,setOptions:function(t){return this.options=t,this},load:function(t,e,n,r){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var i=this,o=ja.get(t);if(void 0!==o)return i.manager.itemStart(t),setTimeout(function(){e&&e(o),i.manager.itemEnd(t)},0),o;fetch(t).then(function(t){return t.blob()}).then(function(t){return createImageBitmap(t,i.options)}).then(function(n){ja.add(t,n),e&&e(n),i.manager.itemEnd(t)}).catch(function(e){r&&r(e),i.manager.itemEnd(t),i.manager.itemError(t)})},setCrossOrigin:function(){return this},setPath:function(t){return this.path=t,this}},Object.assign(ou.prototype,{moveTo:function(t,e){this.currentPath=new ms,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e)},lineTo:function(t,e){this.currentPath.lineTo(t,e)},quadraticCurveTo:function(t,e,n,r){this.currentPath.quadraticCurveTo(t,e,n,r)},bezierCurveTo:function(t,e,n,r,i,o){this.currentPath.bezierCurveTo(t,e,n,r,i,o)},splineThru:function(t){this.currentPath.splineThru(t)},toShapes:function(t,e){function n(t){for(var e=[],n=0,r=t.length;n<r;n++){var i=t[n],o=new vs;o.curves=i.curves,e.push(o)}return e}function r(t,e){for(var n=e.length,r=!1,i=n-1,o=0;o<n;i=o++){var a=e[i],s=e[o],u=s.x-a.x,l=s.y-a.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(a=e[o],u=-u,s=e[i],l=-l),t.y<a.y||t.y>s.y)continue;if(t.y===a.y){if(t.x===a.x)return!0}else{var c=l*(t.x-a.x)-u*(t.y-a.y);if(0===c)return!0;if(c<0)continue;r=!r}}else{if(t.y!==a.y)continue;if(s.x<=t.x&&t.x<=a.x||a.x<=t.x&&t.x<=s.x)return!0}}return r}var i=ea.isClockWise,o=this.subPaths;if(0===o.length)return[];if(!0===e)return n(o);var a,s,u,l=[];if(1===o.length)return s=o[0],(u=new vs).curves=s.curves,l.push(u),l;var c=!i(o[0].getPoints());c=t?!c:c;var h,d,p=[],f=[],m=[],v=0;f[v]=void 0,m[v]=[];for(var g=0,y=o.length;g<y;g++)a=i(h=(s=o[g]).getPoints()),(a=t?!a:a)?(!c&&f[v]&&v++,f[v]={s:new vs,p:h},f[v].s.curves=s.curves,c&&v++,m[v]=[]):m[v].push({h:s,p:h[0]});if(!f[0])return n(o);if(f.length>1){for(var _=!1,b=[],w=0,x=f.length;w<x;w++)p[w]=[];for(w=0,x=f.length;w<x;w++)for(var E=m[w],S=0;S<E.length;S++){for(var T=E[S],M=!0,C=0;C<f.length;C++)r(T.p,f[C].p)&&(w!==C&&b.push({froms:w,tos:C,hole:S}),M?(M=!1,p[C].push(T)):_=!0);M&&p[w].push(T)}b.length>0&&(_||(m=p))}g=0;for(var A=f.length;g<A;g++){l.push(u=f[g].s);for(var P=0,O=(d=m[g]).length;P<O;P++)u.holes.push(d[P].h)}return l}}),Object.assign(au.prototype,{isFont:!0,generateShapes:function(t,e){void 0===e&&(e=100);for(var n=[],r=function(t,e,n){for(var r=Array.from?Array.from(t):String(t).split(""),i=e/n.resolution,o=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*i,a=[],s=0,u=0,l=0;l<r.length;l++){var c=r[l];if("\n"===c)s=0,u-=o;else{var h=su(c,i,s,u,n);s+=h.offsetX,a.push(h.path)}}return a}(t,e,this.data),i=0,o=r.length;i<o;i++)Array.prototype.push.apply(n,r[i].toShapes());return n}}),Object.assign(uu.prototype,{load:function(t,e,n,r){var i=this,o=new Va(this.manager);o.setPath(this.path),o.load(t,function(t){var n;try{n=JSON.parse(t)}catch(e){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),n=JSON.parse(t.substring(65,t.length-2))}var r=i.parse(n);e&&e(r)},n,r)},parse:function(t){return new au(t)},setPath:function(t){return this.path=t,this}});var lu,cu,hu,du,pu,fu,mu,vu,gu,yu,_u,bu,wu,xu,Eu,Su,Tu,Mu,Cu,Au,Pu,Ou,Ru,Lu,Iu,Nu={getContext:function(){return void 0===tu&&(tu=new(window.AudioContext||window.webkitAudioContext)),tu},setContext:function(t){tu=t}};function Du(t){this.manager=void 0!==t?t:Ba}function ku(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new zi,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new zi,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1}function Fu(t,e,n){Fn.call(this),this.type="CubeCamera";var r=new zi(90,1,t,e);r.up.set(0,-1,0),r.lookAt(new $e(1,0,0)),this.add(r);var i=new zi(90,1,t,e);i.up.set(0,-1,0),i.lookAt(new $e(-1,0,0)),this.add(i);var o=new zi(90,1,t,e);o.up.set(0,0,1),o.lookAt(new $e(0,1,0)),this.add(o);var a=new zi(90,1,t,e);a.up.set(0,0,-1),a.lookAt(new $e(0,-1,0)),this.add(a);var s=new zi(90,1,t,e);s.up.set(0,-1,0),s.lookAt(new $e(0,0,1)),this.add(s);var u=new zi(90,1,t,e);u.up.set(0,-1,0),u.lookAt(new $e(0,0,-1)),this.add(u),this.renderTarget=new dn(n,n,{format:Yt,magFilter:Lt,minFilter:Lt}),this.renderTarget.texture.name="CubeCamera",this.update=function(t,e){null===this.parent&&this.updateMatrixWorld();var n=this.renderTarget,l=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,n.activeCubeFace=0,t.render(e,r,n),n.activeCubeFace=1,t.render(e,i,n),n.activeCubeFace=2,t.render(e,o,n),n.activeCubeFace=3,t.render(e,a,n),n.activeCubeFace=4,t.render(e,s,n),n.texture.generateMipmaps=l,n.activeCubeFace=5,t.render(e,u,n),t.setRenderTarget(null)},this.clear=function(t,e,n,r){for(var i=this.renderTarget,o=0;o<6;o++)i.activeCubeFace=o,t.setRenderTarget(i),t.clear(e,n,r);t.setRenderTarget(null)}}function ju(){Fn.call(this),this.type="AudioListener",this.context=Nu.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null}function Uu(t){Fn.call(this),this.type="Audio",this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.loop=!1,this.startTime=0,this.offset=0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filters=[]}function Bu(t){Uu.call(this,t),this.panner=this.context.createPanner(),this.panner.connect(this.gain)}function Gu(t,e){this.analyser=t.context.createAnalyser(),this.analyser.fftSize=void 0!==e?e:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}function Vu(t,e,n){this.binding=t,this.valueSize=n;var r,i=Float64Array;switch(e){case"quaternion":r=this._slerp;break;case"string":case"bool":i=Array,r=this._select;break;default:r=this._lerp}this.buffer=new i(4*n),this._mixBufferRegion=r,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0}function zu(t,e,n){var r=n||Hu.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,r)}function Hu(t,e,n){this.path=e,this.parsedPath=n||Hu.parseTrackName(e),this.node=Hu.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t}function Wu(){this.uuid=Ke.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var t={};this._indicesByUUID=t;for(var e=0,n=arguments.length;e!==n;++e)t[arguments[e].uuid]=e;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var r=this;this.stats={objects:{get total(){return r._objects.length},get inUse(){return this.total-r.nCachedObjects_}},get bindingsPerObject(){return r._bindings.length}}}function qu(t,e,n){this._mixer=t,this._clip=e,this._localRoot=n||null;for(var r=e.tracks,i=r.length,o=new Array(i),a={endingStart:Re,endingEnd:Re},s=0;s!==i;++s){var u=r[s].createInterpolant(null);o[s]=u,u.settings=a}this._interpolantSettings=a,this._interpolants=o,this._propertyBindings=new Array(i),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Me,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}function Xu(t){this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}function Yu(t){"string"==typeof t&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),t=arguments[1]),this.value=t}function Ku(){er.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function Zu(t,e,n){Zi.call(this,t,e),this.meshPerAttribute=n||1}function Qu(t,e,n,r){"number"==typeof n&&(r=n,n=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),Vn.call(this,t,e,n),this.meshPerAttribute=r||1}function Ju(t,e,n,r){this.ray=new wr(t,e),this.near=n||0,this.far=r||1/0,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function $u(t,e){return t.distance-e.distance}function tl(t,e,n,r){if(!1!==t.visible&&(t.raycast(e,n),!0===r))for(var i=t.children,o=0,a=i.length;o<a;o++)tl(i[o],e,n,!0)}function el(t){this.autoStart=void 0===t||t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}function nl(t,e,n){return this.radius=void 0!==t?t:1,this.phi=void 0!==e?e:0,this.theta=void 0!==n?n:0,this}function rl(t,e,n){return this.radius=void 0!==t?t:1,this.theta=void 0!==e?e:0,this.y=void 0!==n?n:0,this}function il(t,e){this.min=void 0!==t?t:new Ze(1/0,1/0),this.max=void 0!==e?e:new Ze(-1/0,-1/0)}function ol(t,e){this.start=void 0!==t?t:new $e,this.end=void 0!==e?e:new $e}function al(t){Fn.call(this),this.material=t,this.render=function(){}}function sl(t,e,n,r){this.object=t,this.size=void 0!==e?e:1;var i=void 0!==n?n:16711680,o=void 0!==r?r:1,a=0,s=this.object.geometry;s&&s.isGeometry?a=3*s.faces.length:s&&s.isBufferGeometry&&(a=s.attributes.normal.count);var u=new er,l=new Zn(2*a*3,3);u.addAttribute("position",l),ao.call(this,u,new io({color:i,linewidth:o})),this.matrixAutoUpdate=!1,this.update()}function ul(t,e){Fn.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=e;for(var n=new er,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],i=0,o=1;i<32;i++,o++){var a=i/32*Math.PI*2,s=o/32*Math.PI*2;r.push(Math.cos(a),Math.sin(a),1,Math.cos(s),Math.sin(s),1)}n.addAttribute("position",new Zn(r,3));var u=new io({fog:!1});this.cone=new ao(n,u),this.add(this.cone),this.update()}function ll(t){for(var e=function t(e){var n=[];e&&e.isBone&&n.push(e);for(var r=0;r<e.children.length;r++)n.push.apply(n,t(e.children[r]));return n}(t),n=new er,r=[],i=[],o=new Sn(0,0,1),a=new Sn(0,1,0),s=0;s<e.length;s++){var u=e[s];u.parent&&u.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),i.push(o.r,o.g,o.b),i.push(a.r,a.g,a.b))}n.addAttribute("position",new Zn(r,3)),n.addAttribute("color",new Zn(i,3));var l=new io({vertexColors:I,depthTest:!1,depthWrite:!1,transparent:!0});ao.call(this,n,l),this.root=t,this.bones=e,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1}function cl(t,e,n){this.light=t,this.light.updateMatrixWorld(),this.color=n;var r=new ha(e,4,2),i=new Er({wireframe:!0,fog:!1});Sr.call(this,r,i),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function hl(t,e){Fn.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=e;var n=new io({fog:!1}),r=new er;r.addAttribute("position",new Vn(new Float32Array(15),3)),this.line=new oo(r,n),this.add(this.line),this.update()}function dl(t,e,n){Fn.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n;var r=new Eo(e);r.rotateY(.5*Math.PI),this.material=new Er({wireframe:!0,fog:!1}),void 0===this.color&&(this.material.vertexColors=I);var i=r.getAttribute("position"),o=new Float32Array(3*i.count);r.addAttribute("color",new Vn(o,3)),this.add(new Sr(r,this.material)),this.update()}function pl(t,e,n,r){t=t||10,e=e||10,n=new Sn(void 0!==n?n:4473924),r=new Sn(void 0!==r?r:8947848);for(var i=e/2,o=t/e,a=t/2,s=[],u=[],l=0,c=0,h=-a;l<=e;l++,h+=o){s.push(-a,0,h,a,0,h),s.push(h,0,-a,h,0,a);var d=l===i?n:r;d.toArray(u,c),d.toArray(u,c+=3),d.toArray(u,c+=3),d.toArray(u,c+=3),c+=3}var p=new er;p.addAttribute("position",new Zn(s,3)),p.addAttribute("color",new Zn(u,3));var f=new io({vertexColors:I});ao.call(this,p,f)}function fl(t,e,n,r,i,o){t=t||10,e=e||16,n=n||8,r=r||64,i=new Sn(void 0!==i?i:4473924),o=new Sn(void 0!==o?o:8947848);var a,s,u,l,c,h,d,p=[],f=[];for(l=0;l<=e;l++)u=l/e*(2*Math.PI),a=Math.sin(u)*t,s=Math.cos(u)*t,p.push(0,0,0),p.push(a,0,s),f.push((d=1&l?i:o).r,d.g,d.b),f.push(d.r,d.g,d.b);for(l=0;l<=n;l++)for(d=1&l?i:o,h=t-t/n*l,c=0;c<r;c++)u=c/r*(2*Math.PI),a=Math.sin(u)*h,s=Math.cos(u)*h,p.push(a,0,s),f.push(d.r,d.g,d.b),u=(c+1)/r*(2*Math.PI),a=Math.sin(u)*h,s=Math.cos(u)*h,p.push(a,0,s),f.push(d.r,d.g,d.b);var m=new er;m.addAttribute("position",new Zn(p,3)),m.addAttribute("color",new Zn(f,3));var v=new io({vertexColors:I});ao.call(this,m,v)}function ml(t,e,n,r){this.object=t,this.size=void 0!==e?e:1;var i=void 0!==n?n:16776960,o=void 0!==r?r:1,a=0,s=this.object.geometry;s&&s.isGeometry?a=s.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");var u=new er,l=new Zn(2*a*3,3);u.addAttribute("position",l),ao.call(this,u,new io({color:i,linewidth:o})),this.matrixAutoUpdate=!1,this.update()}function vl(t,e,n){Fn.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,void 0===e&&(e=1);var r=new er;r.addAttribute("position",new Zn([-e,e,0,e,e,0,e,-e,0,-e,-e,0,-e,e,0],3));var i=new io({fog:!1});this.lightPlane=new oo(r,i),this.add(this.lightPlane),(r=new er).addAttribute("position",new Zn([0,0,0,0,0,1],3)),this.targetLine=new oo(r,i),this.add(this.targetLine),this.update()}function gl(t){var e=new er,n=new io({color:16777215,vertexColors:L}),r=[],i=[],o={},a=new Sn(16755200),s=new Sn(16711680),u=new Sn(43775),l=new Sn(16777215),c=new Sn(3355443);function h(t,e,n){d(t,n),d(e,n)}function d(t,e){r.push(0,0,0),i.push(e.r,e.g,e.b),void 0===o[t]&&(o[t]=[]),o[t].push(r.length/3-1)}h("n1","n2",a),h("n2","n4",a),h("n4","n3",a),h("n3","n1",a),h("f1","f2",a),h("f2","f4",a),h("f4","f3",a),h("f3","f1",a),h("n1","f1",a),h("n2","f2",a),h("n3","f3",a),h("n4","f4",a),h("p","n1",s),h("p","n2",s),h("p","n3",s),h("p","n4",s),h("u1","u2",u),h("u2","u3",u),h("u3","u1",u),h("c","t",l),h("p","c",c),h("cn1","cn2",c),h("cn3","cn4",c),h("cf1","cf2",c),h("cf3","cf4",c),e.addAttribute("position",new Zn(r,3)),e.addAttribute("color",new Zn(i,3)),ao.call(this,e,n),this.camera=t,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update()}function yl(t,e){this.object=t,void 0===e&&(e=16776960);var n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),i=new er;i.setIndex(new Vn(n,1)),i.addAttribute("position",new Vn(r,3)),ao.call(this,i,new io({color:e})),this.matrixAutoUpdate=!1,this.update()}function _l(t,e){this.type="Box3Helper",this.box=t;var n=void 0!==e?e:16776960,r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new er;i.setIndex(new Vn(r,1)),i.addAttribute("position",new Zn([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),ao.call(this,i,new io({color:n})),this.geometry.computeBoundingSphere()}function bl(t,e,n){this.type="PlaneHelper",this.plane=t,this.size=void 0===e?1:e;var r=void 0!==n?n:16776960,i=new er;i.addAttribute("position",new Zn([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),i.computeBoundingSphere(),oo.call(this,i,new io({color:r}));var o=new er;o.addAttribute("position",new Zn([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),o.computeBoundingSphere(),this.add(new Sr(o,new Er({color:r,opacity:.2,transparent:!0,depthWrite:!1})))}function wl(t,e,n,r,i,o){Fn.call(this),void 0===r&&(r=16776960),void 0===n&&(n=1),void 0===i&&(i=.2*n),void 0===o&&(o=.2*i),void 0===Ou&&((Ou=new er).addAttribute("position",new Zn([0,0,0,0,1,0],3)),(Ru=new wa(0,.5,1,5,1)).translate(0,-.5,0)),this.position.copy(e),this.line=new oo(Ou,new io({color:r})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Sr(Ru,new Er({color:r})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(t),this.setLength(n,i,o)}function xl(t){var e=[0,0,0,t=t||1,0,0,0,0,0,0,t,0,0,0,0,0,0,t],n=new er;n.addAttribute("position",new Zn(e,3)),n.addAttribute("color",new Zn([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));var r=new io({vertexColors:I});ao.call(this,n,r)}function El(t,e,n,r,i,o,a){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new Pn(t,e,n,i,o,a)}Object.assign(Du.prototype,{load:function(t,e,n,r){var i=new Va(this.manager);i.setResponseType("arraybuffer"),i.load(t,function(t){var n=t.slice(0);Nu.getContext().decodeAudioData(n,function(t){e(t)})},n,r)}}),Object.assign(ku.prototype,{update:(gu=new Qe,yu=new Qe,function(t){if(lu!==this||cu!==t.focus||hu!==t.fov||du!==t.aspect*this.aspect||pu!==t.near||fu!==t.far||mu!==t.zoom||vu!==this.eyeSep){lu=this,cu=t.focus,hu=t.fov,du=t.aspect*this.aspect,pu=t.near,fu=t.far,mu=t.zoom;var e,n,r=t.projectionMatrix.clone(),i=(vu=this.eyeSep/2)*pu/cu,o=pu*Math.tan(Ke.DEG2RAD*hu*.5)/mu;yu.elements[12]=-vu,gu.elements[12]=vu,r.elements[0]=2*pu/((n=o*du+i)-(e=-o*du+i)),r.elements[8]=(n+e)/(n-e),this.cameraL.projectionMatrix.copy(r),r.elements[0]=2*pu/((n=o*du-i)-(e=-o*du-i)),r.elements[8]=(n+e)/(n-e),this.cameraR.projectionMatrix.copy(r)}this.cameraL.matrixWorld.copy(t.matrixWorld).multiply(yu),this.cameraR.matrixWorld.copy(t.matrixWorld).multiply(gu)})}),(Fu.prototype=Object.create(Fn.prototype)).constructor=Fu,ju.prototype=Object.assign(Object.create(Fn.prototype),{constructor:ju,getInput:function(){return this.gain},removeFilter:function(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this},getFilter:function(){return this.filter},setFilter:function(t){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this},updateMatrixWorld:function(){var t=new $e,e=new Je,n=new $e,r=new $e;return function(i){Fn.prototype.updateMatrixWorld.call(this,i);var o=this.context.listener,a=this.up;this.matrixWorld.decompose(t,e,n),r.set(0,0,-1).applyQuaternion(e),o.positionX?(o.positionX.setValueAtTime(t.x,this.context.currentTime),o.positionY.setValueAtTime(t.y,this.context.currentTime),o.positionZ.setValueAtTime(t.z,this.context.currentTime),o.forwardX.setValueAtTime(r.x,this.context.currentTime),o.forwardY.setValueAtTime(r.y,this.context.currentTime),o.forwardZ.setValueAtTime(r.z,this.context.currentTime),o.upX.setValueAtTime(a.x,this.context.currentTime),o.upY.setValueAtTime(a.y,this.context.currentTime),o.upZ.setValueAtTime(a.z,this.context.currentTime)):(o.setPosition(t.x,t.y,t.z),o.setOrientation(r.x,r.y,r.z,a.x,a.y,a.z))}}()}),Uu.prototype=Object.assign(Object.create(Fn.prototype),{constructor:Uu,getOutput:function(){return this.gain},setNodeSource:function(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this},setMediaElementSource:function(t){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(t),this.connect(),this},setBuffer:function(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(){if(!0!==this.isPlaying){if(!1!==this.hasPlaybackControl){var t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.onended=this.onEnded.bind(this),t.playbackRate.setValueAtTime(this.playbackRate,this.startTime),this.startTime=this.context.currentTime,t.start(this.startTime,this.offset),this.isPlaying=!0,this.source=t,this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}else console.warn("THREE.Audio: Audio is already playing.")},pause:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this.source.stop(),this.source.onended=null,this.offset+=(this.context.currentTime-this.startTime)*this.playbackRate,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")},stop:function(){if(!1!==this.hasPlaybackControl)return this.source.stop(),this.source.onended=null,this.offset=0,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(t){return t||(t=[]),!0===this.isPlaying?(this.disconnect(),this.filters=t,this.connect()):this.filters=t,this},getFilter:function(){return this.getFilters()[0]},setFilter:function(t){return this.setFilters(t?[t]:[])},setPlaybackRate:function(t){if(!1!==this.hasPlaybackControl)return this.playbackRate=t,!0===this.isPlaying&&this.source.playbackRate.setValueAtTime(this.playbackRate,this.context.currentTime),this;console.warn("THREE.Audio: this Audio has no playback control.")},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(t){if(!1!==this.hasPlaybackControl)return this.loop=t,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")},getVolume:function(){return this.gain.gain.value},setVolume:function(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}}),Bu.prototype=Object.assign(Object.create(Uu.prototype),{constructor:Bu,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(t){return this.panner.refDistance=t,this},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(t){return this.panner.rolloffFactor=t,this},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(t){return this.panner.distanceModel=t,this},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(t){return this.panner.maxDistance=t,this},setDirectionalCone:function(t,e,n){return this.panner.coneInnerAngle=t,this.panner.coneOuterAngle=e,this.panner.coneOuterGain=n,this},updateMatrixWorld:function(){var t=new $e,e=new Je,n=new $e,r=new $e;return function(i){Fn.prototype.updateMatrixWorld.call(this,i);var o=this.panner;this.matrixWorld.decompose(t,e,n),r.set(0,0,1).applyQuaternion(e),o.setPosition(t.x,t.y,t.z),o.setOrientation(r.x,r.y,r.z)}}()}),Object.assign(Gu.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var t=0,e=this.getFrequencyData(),n=0;n<e.length;n++)t+=e[n];return t/e.length}}),Object.assign(Vu.prototype,{accumulate:function(t,e){var n=this.buffer,r=this.valueSize,i=t*r+r,o=this.cumulativeWeight;if(0===o){for(var a=0;a!==r;++a)n[i+a]=n[a];o=e}else this._mixBufferRegion(n,i,0,e/(o+=e),r);this.cumulativeWeight=o},apply:function(t){var e=this.valueSize,n=this.buffer,r=t*e+e,i=this.cumulativeWeight,o=this.binding;this.cumulativeWeight=0,i<1&&this._mixBufferRegion(n,r,3*e,1-i,e);for(var a=e,s=e+e;a!==s;++a)if(n[a]!==n[a+e]){o.setValue(n,r);break}},saveOriginalState:function(){var t=this.buffer,e=this.valueSize,n=3*e;this.binding.getValue(t,n);for(var r=e,i=n;r!==i;++r)t[r]=t[n+r%e];this.cumulativeWeight=0},restoreOriginalState:function(){this.binding.setValue(this.buffer,3*this.valueSize)},_select:function(t,e,n,r,i){if(r>=.5)for(var o=0;o!==i;++o)t[e+o]=t[n+o]},_slerp:function(t,e,n,r){Je.slerpFlat(t,e,t,e,t,n,r)},_lerp:function(t,e,n,r,i){for(var o=1-r,a=0;a!==i;++a){var s=e+a;t[s]=t[s]*o+t[n+a]*r}}}),Object.assign(zu.prototype,{getValue:function(t,e){this.bind();var n=this._bindings[this._targetGroup.nCachedObjects_];void 0!==n&&n.getValue(t,e)},setValue:function(t,e){for(var n=this._bindings,r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(t,e)},bind:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].bind()},unbind:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].unbind()}}),Object.assign(Hu,{Composite:zu,create:function(t,e,n){return t&&t.isAnimationObjectGroup?new Hu.Composite(t,e,n):new Hu(t,e,n)},sanitizeNodeName:(Cu=new RegExp("[\\[\\]\\.:\\/]","g"),function(t){return t.replace(/\s/g,"_").replace(Cu,"")}),parseTrackName:(_u="[^\\[\\]\\.:\\/]",bu="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",wu=/((?:WC+[\/:])*)/.source.replace("WC",_u),xu=/(WCOD+)?/.source.replace("WCOD",bu),Eu=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",_u),Su=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",_u),Tu=new RegExp("^"+wu+xu+Eu+Su+"$"),Mu=["material","materials","bones"],function(t){var e=Tu.exec(t);if(!e)throw new Error("PropertyBinding: Cannot parse trackName: "+t);var n={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){var i=n.nodeName.substring(r+1);-1!==Mu.indexOf(i)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=i)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return n}),findNode:function(t,e){if(!e||""===e||"root"===e||"."===e||-1===e||e===t.name||e===t.uuid)return t;if(t.skeleton){var n=t.skeleton.getBoneByName(e);if(void 0!==n)return n}if(t.children){var r=function(t){for(var n=0;n<t.length;n++){var i=t[n];if(i.name===e||i.uuid===e)return i;var o=r(i.children);if(o)return o}return null},i=r(t.children);if(i)return i}return null}}),Object.assign(Hu.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(t,e){t[e]=this.node[this.propertyName]},function(t,e){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)t[e++]=n[r]},function(t,e){t[e]=this.resolvedProperty[this.propertyIndex]},function(t,e){this.resolvedProperty.toArray(t,e)}],SetterByBindingTypeAndVersioning:[[function(t,e){this.targetObject[this.propertyName]=t[e]},function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=t[e++]},function(t,e){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=t[e++];this.targetObject.needsUpdate=!0},function(t,e){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty[this.propertyIndex]=t[e]},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty.fromArray(t,e)},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(t,e){this.bind(),this.getValue(t,e)},setValue:function(t,e){this.bind(),this.setValue(t,e)},bind:function(){var t=this.node,e=this.parsedPath,n=e.objectName,r=e.propertyName,i=e.propertyIndex;if(t||(t=Hu.findNode(this.rootNode,e.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,t){if(n){var o=e.objectIndex;switch(n){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(var a=0;a<t.length;a++)if(t[a].name===o){o=a;break}break;default:if(void 0===t[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[n]}if(void 0!==o){if(void 0===t[o])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[o]}}var s=t[r];if(void 0!==s){var u=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?u=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(u=this.Versioning.MatrixWorldNeedsUpdate);var l=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===r){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(t.geometry.isBufferGeometry){if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);for(a=0;a<this.node.geometry.morphAttributes.position.length;a++)if(t.geometry.morphAttributes.position[a].name===i){i=a;break}}else{if(!t.geometry.morphTargets)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.",this);for(a=0;a<this.node.geometry.morphTargets.length;a++)if(t.geometry.morphTargets[a].name===i){i=a;break}}}l=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=i}else void 0!==s.fromArray&&void 0!==s.toArray?(l=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(l=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=r;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][u]}else console.error("THREE.PropertyBinding: Trying to update property for track: "+e.nodeName+"."+r+" but it wasn't found.",t)}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign(Hu.prototype,{_getValue_unbound:Hu.prototype.getValue,_setValue_unbound:Hu.prototype.setValue}),Object.assign(Wu.prototype,{isAnimationObjectGroup:!0,add:function(){for(var t=this._objects,e=t.length,n=this.nCachedObjects_,r=this._indicesByUUID,i=this._paths,o=this._parsedPaths,a=this._bindings,s=a.length,u=void 0,l=0,c=arguments.length;l!==c;++l){var h=arguments[l],d=h.uuid,p=r[d];if(void 0===p){p=e++,r[d]=p,t.push(h);for(var f=0,m=s;f!==m;++f)a[f].push(new Hu(h,i[f],o[f]))}else if(p<n){u=t[p];var v=--n,g=t[v];for(r[g.uuid]=p,t[p]=g,r[d]=v,t[v]=h,f=0,m=s;f!==m;++f){var y=a[f],_=y[p];y[p]=y[v],void 0===_&&(_=new Hu(h,i[f],o[f])),y[v]=_}}else t[p]!==u&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=n},remove:function(){for(var t=this._objects,e=this.nCachedObjects_,n=this._indicesByUUID,r=this._bindings,i=r.length,o=0,a=arguments.length;o!==a;++o){var s=arguments[o],u=s.uuid,l=n[u];if(void 0!==l&&l>=e){var c=e++,h=t[c];n[h.uuid]=l,t[l]=h,n[u]=c,t[c]=s;for(var d=0,p=i;d!==p;++d){var f=r[d],m=f[l];f[l]=f[c],f[c]=m}}}this.nCachedObjects_=e},uncache:function(){for(var t=this._objects,e=t.length,n=this.nCachedObjects_,r=this._indicesByUUID,i=this._bindings,o=i.length,a=0,s=arguments.length;a!==s;++a){var u=arguments[a].uuid,l=r[u];if(void 0!==l)if(delete r[u],l<n){var c=--n,h=t[c],d=t[v=--e];r[h.uuid]=l,t[l]=h,r[d.uuid]=c,t[c]=d,t.pop();for(var p=0,f=o;p!==f;++p){var m=(g=i[p])[v];g[l]=g[c],g[c]=m,g.pop()}}else{var v;for(r[(d=t[v=--e]).uuid]=l,t[l]=d,t.pop(),p=0,f=o;p!==f;++p){var g;(g=i[p])[l]=g[v],g.pop()}}}this.nCachedObjects_=n},subscribe_:function(t,e){var n=this._bindingsIndicesByPath,r=n[t],i=this._bindings;if(void 0!==r)return i[r];var o=this._paths,a=this._parsedPaths,s=this._objects,u=this.nCachedObjects_,l=new Array(s.length);n[t]=r=i.length,o.push(t),a.push(e),i.push(l);for(var c=u,h=s.length;c!==h;++c)l[c]=new Hu(s[c],t,e);return l},unsubscribe_:function(t){var e=this._bindingsIndicesByPath,n=e[t];if(void 0!==n){var r=this._paths,i=this._parsedPaths,o=this._bindings,a=o.length-1,s=o[a];e[t[a]]=n,o[n]=s,o.pop(),i[n]=i[a],i.pop(),r[n]=r[a],r.pop()}}}),Object.assign(qu.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(t){return this._startTime=t,this},setLoop:function(t,e){return this.loop=t,this.repetitions=e,this},setEffectiveWeight:function(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(t){return this._scheduleFading(t,0,1)},fadeOut:function(t){return this._scheduleFading(t,1,0)},crossFadeFrom:function(t,e,n){if(t.fadeOut(e),this.fadeIn(e),n){var r=this._clip.duration,i=t._clip.duration,o=r/i;t.warp(1,i/r,e),this.warp(o,1,e)}return this},crossFadeTo:function(t,e,n){return t.crossFadeFrom(this,e,n)},stopFading:function(){var t=this._weightInterpolant;return null!==t&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},setEffectiveTimeScale:function(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(t){return this.timeScale=this._clip.duration/t,this.stopWarping()},syncWith:function(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()},halt:function(t){return this.warp(this._effectiveTimeScale,0,t)},warp:function(t,e,n){var r=this._mixer,i=r.time,o=this._timeScaleInterpolant,a=this.timeScale;null===o&&(o=r._lendControlInterpolant(),this._timeScaleInterpolant=o);var s=o.parameterPositions,u=o.sampleValues;return s[0]=i,s[1]=i+n,u[0]=t/a,u[1]=e/a,this},stopWarping:function(){var t=this._timeScaleInterpolant;return null!==t&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(t,e,n,r){if(this.enabled){var i=this._startTime;if(null!==i){var o=(t-i)*n;if(o<0||0===n)return;this._startTime=null,e=n*o}e*=this._updateTimeScale(t);var a=this._updateTime(e),s=this._updateWeight(t);if(s>0)for(var u=this._interpolants,l=this._propertyBindings,c=0,h=u.length;c!==h;++c)u[c].evaluate(a),l[c].accumulate(r,s)}else this._updateWeight(t)},_updateWeight:function(t){var e=0;if(this.enabled){e=this.weight;var n=this._weightInterpolant;if(null!==n){var r=n.evaluate(t)[0];e*=r,t>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=e,e},_updateTimeScale:function(t){var e=0;if(!this.paused){e=this.timeScale;var n=this._timeScaleInterpolant;null!==n&&(e*=n.evaluate(t)[0],t>n.parameterPositions[1]&&(this.stopWarping(),0===e?this.paused=!0:this.timeScale=e))}return this._effectiveTimeScale=e,e},_updateTime:function(t){var e=this.time+t,n=this._clip.duration,r=this.loop,i=this._loopCount,o=r===Ce;if(0===t)return-1===i?e:o&&1==(1&i)?n-e:e;if(r===Te){-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1));t:{if(e>=n)e=n;else{if(!(e<0))break t;e=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(-1===i&&(t>=0?(i=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),e>=n||e<0){var a=Math.floor(e/n);e-=n*a,i+=Math.abs(a);var s=this.repetitions-i;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,e=t>0?n:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(1===s){var u=t<0;this._setEndings(u,!u,o)}else this._setEndings(!1,!1,o);this._loopCount=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}if(o&&1==(1&i))return this.time=e,n-e}return this.time=e,e},_setEndings:function(t,e,n){var r=this._interpolantSettings;n?(r.endingStart=Le,r.endingEnd=Le):(r.endingStart=t?this.zeroSlopeAtStart?Le:Re:Ie,r.endingEnd=e?this.zeroSlopeAtEnd?Le:Re:Ie)},_scheduleFading:function(t,e,n){var r=this._mixer,i=r.time,o=this._weightInterpolant;null===o&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);var a=o.parameterPositions,s=o.sampleValues;return a[0]=i,s[0]=e,a[1]=i+t,s[1]=n,this}}),Xu.prototype=Object.assign(Object.create(r.prototype),{constructor:Xu,_bindAction:function(t,e){var n=t._localRoot||this._root,r=t._clip.tracks,i=r.length,o=t._propertyBindings,a=t._interpolants,s=n.uuid,u=this._bindingsByRootAndName,l=u[s];void 0===l&&(u[s]=l={});for(var c=0;c!==i;++c){var h=r[c],d=h.name,p=l[d];if(void 0!==p)o[c]=p;else{if(void 0!==(p=o[c])){null===p._cacheIndex&&(++p.referenceCount,this._addInactiveBinding(p,s,d));continue}++(p=new Vu(Hu.create(n,d,e&&e._propertyBindings[c].binding.parsedPath),h.ValueTypeName,h.getValueSize())).referenceCount,this._addInactiveBinding(p,s,d),o[c]=p}a[c].resultBuffer=p.buffer}},_activateAction:function(t){if(!this._isActiveAction(t)){if(null===t._cacheIndex){var e=(t._localRoot||this._root).uuid,n=t._clip.uuid,r=this._actionsByClip[n];this._bindAction(t,r&&r.knownActions[0]),this._addInactiveAction(t,n,e)}for(var i=t._propertyBindings,o=0,a=i.length;o!==a;++o){var s=i[o];0==s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(t)}},_deactivateAction:function(t){if(this._isActiveAction(t)){for(var e=t._propertyBindings,n=0,r=e.length;n!==r;++n){var i=e[n];0==--i.useCount&&(i.restoreOriginalState(),this._takeBackBinding(i))}this._takeBackAction(t)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}},_isActiveAction:function(t){var e=t._cacheIndex;return null!==e&&e<this._nActiveActions},_addInactiveAction:function(t,e,n){var r=this._actions,i=this._actionsByClip,o=i[e];if(void 0===o)o={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,i[e]=o;else{var a=o.knownActions;t._byClipCacheIndex=a.length,a.push(t)}t._cacheIndex=r.length,r.push(t),o.actionByRoot[n]=t},_removeInactiveAction:function(t){var e=this._actions,n=e[e.length-1],r=t._cacheIndex;n._cacheIndex=r,e[r]=n,e.pop(),t._cacheIndex=null;var i=t._clip.uuid,o=this._actionsByClip,a=o[i],s=a.knownActions,u=s[s.length-1],l=t._byClipCacheIndex;u._byClipCacheIndex=l,s[l]=u,s.pop(),t._byClipCacheIndex=null,delete a.actionByRoot[(t._localRoot||this._root).uuid],0===s.length&&delete o[i],this._removeInactiveBindingsForAction(t)},_removeInactiveBindingsForAction:function(t){for(var e=t._propertyBindings,n=0,r=e.length;n!==r;++n){var i=e[n];0==--i.referenceCount&&this._removeInactiveBinding(i)}},_lendAction:function(t){var e=this._actions,n=t._cacheIndex,r=this._nActiveActions++,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=n,e[n]=i},_takeBackAction:function(t){var e=this._actions,n=t._cacheIndex,r=--this._nActiveActions,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=n,e[n]=i},_addInactiveBinding:function(t,e,n){var r=this._bindingsByRootAndName,i=r[e],o=this._bindings;void 0===i&&(r[e]=i={}),i[n]=t,t._cacheIndex=o.length,o.push(t)},_removeInactiveBinding:function(t){var e=this._bindings,n=t.binding,r=n.rootNode.uuid,i=n.path,o=this._bindingsByRootAndName,a=o[r],s=e[e.length-1],u=t._cacheIndex;s._cacheIndex=u,e[u]=s,e.pop(),delete a[i];t:{for(var l in a)break t;delete o[r]}},_lendBinding:function(t){var e=this._bindings,n=t._cacheIndex,r=this._nActiveBindings++,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=n,e[n]=i},_takeBackBinding:function(t){var e=this._bindings,n=t._cacheIndex,r=--this._nActiveBindings,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=n,e[n]=i},_lendControlInterpolant:function(){var t=this._controlInterpolants,e=this._nActiveControlInterpolants++,n=t[e];return void 0===n&&((n=new Rs(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=e,t[e]=n),n},_takeBackControlInterpolant:function(t){var e=this._controlInterpolants,n=t.__cacheIndex,r=--this._nActiveControlInterpolants,i=e[r];t.__cacheIndex=r,e[r]=t,i.__cacheIndex=n,e[n]=i},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(t,e){var n=e||this._root,r=n.uuid,i="string"==typeof t?Gs.findByName(n,t):t,o=null!==i?i.uuid:t,a=this._actionsByClip[o],s=null;if(void 0!==a){var u=a.actionByRoot[r];if(void 0!==u)return u;s=a.knownActions[0],null===i&&(i=s._clip)}if(null===i)return null;var l=new qu(this,i,e);return this._bindAction(l,s),this._addInactiveAction(l,o,r),l},existingAction:function(t,e){var n=e||this._root,r=n.uuid,i="string"==typeof t?Gs.findByName(n,t):t,o=this._actionsByClip[i?i.uuid:t];return void 0!==o&&o.actionByRoot[r]||null},stopAllAction:function(){var t=this._actions,e=this._nActiveActions,n=this._bindings,r=this._nActiveBindings;this._nActiveActions=0,this._nActiveBindings=0;for(var i=0;i!==e;++i)t[i].reset();for(i=0;i!==r;++i)n[i].useCount=0;return this},update:function(t){for(var e=this._actions,n=this._nActiveActions,r=this.time+=t*=this.timeScale,i=Math.sign(t),o=this._accuIndex^=1,a=0;a!==n;++a)e[a]._update(r,t,i,o);var s=this._bindings,u=this._nActiveBindings;for(a=0;a!==u;++a)s[a].apply(o);return this},getRoot:function(){return this._root},uncacheClip:function(t){var e=this._actions,n=t.uuid,r=this._actionsByClip,i=r[n];if(void 0!==i){for(var o=i.knownActions,a=0,s=o.length;a!==s;++a){var u=o[a];this._deactivateAction(u);var l=u._cacheIndex,c=e[e.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,c._cacheIndex=l,e[l]=c,e.pop(),this._removeInactiveBindingsForAction(u)}delete r[n]}},uncacheRoot:function(t){var e=t.uuid,n=this._actionsByClip;for(var r in n){var i=n[r].actionByRoot[e];void 0!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}var o=this._bindingsByRootAndName[e];if(void 0!==o)for(var a in o){var s=o[a];s.restoreOriginalState(),this._removeInactiveBinding(s)}},uncacheAction:function(t,e){var n=this.existingAction(t,e);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}),Yu.prototype.clone=function(){return new Yu(void 0===this.value.clone?this.value:this.value.clone())},Ku.prototype=Object.assign(Object.create(er.prototype),{constructor:Ku,isInstancedBufferGeometry:!0,copy:function(t){return er.prototype.copy.call(this,t),this.maxInstancedCount=t.maxInstancedCount,this},clone:function(){return(new this.constructor).copy(this)}}),Zu.prototype=Object.assign(Object.create(Zi.prototype),{constructor:Zu,isInstancedInterleavedBuffer:!0,copy:function(t){return Zi.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this}}),Qu.prototype=Object.assign(Object.create(Vn.prototype),{constructor:Qu,isInstancedBufferAttribute:!0,copy:function(t){return Vn.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this}}),Object.assign(Ju.prototype,{linePrecision:1,set:function(t,e){this.ray.set(t,e)},setFromCamera:function(t,e){e&&e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize()):e&&e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(t,e,n){var r=n||[];return tl(t,this,r,e),r.sort($u),r},intersectObjects:function(t,e,n){var r=n||[];if(!1===Array.isArray(t))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),r;for(var i=0,o=t.length;i<o;i++)tl(t[i],this,r,e);return r.sort($u),r}}),Object.assign(el.prototype,{start:function(){this.startTime=("undefined"==typeof performance?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var e=("undefined"==typeof performance?Date:performance).now();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}}),Object.assign(nl.prototype,{set:function(t,e,n){return this.radius=t,this.phi=e,this.theta=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this},makeSafe:function(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this},setFromVector3:function(t){return this.setFromCartesianCoords(t.x,t.y,t.z)},setFromCartesianCoords:function(t,e,n){return this.radius=Math.sqrt(t*t+e*e+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,n),this.phi=Math.acos(Ke.clamp(e/this.radius,-1,1))),this}}),Object.assign(rl.prototype,{set:function(t,e,n){return this.radius=t,this.theta=e,this.y=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.radius=t.radius,this.theta=t.theta,this.y=t.y,this},setFromVector3:function(t){return this.setFromCartesianCoords(t.x,t.y,t.z)},setFromCartesianCoords:function(t,e,n){return this.radius=Math.sqrt(t*t+n*n),this.theta=Math.atan2(t,n),this.y=e,this}}),Object.assign(il.prototype,{set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(){var t=new Ze;return function(e,n){var r=t.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(t){return void 0===t&&(console.warn("THREE.Box2: .getCenter() target is now required"),t=new Ze),this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){return void 0===t&&(console.warn("THREE.Box2: .getSize() target is now required"),t=new Ze),this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y},getParameter:function(t,e){return void 0===e&&(console.warn("THREE.Box2: .getParameter() target is now required"),e=new Ze),e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)},clampPoint:function(t,e){return void 0===e&&(console.warn("THREE.Box2: .clampPoint() target is now required"),e=new Ze),e.copy(t).clamp(this.min,this.max)},distanceToPoint:function(){var t=new Ze;return function(e){return t.copy(e).clamp(this.min,this.max).sub(e).length()}}(),intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}),Object.assign(ol.prototype,{set:function(t,e){return this.start.copy(t),this.end.copy(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.start.copy(t.start),this.end.copy(t.end),this},getCenter:function(t){return void 0===t&&(console.warn("THREE.Line3: .getCenter() target is now required"),t=new $e),t.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(t){return void 0===t&&(console.warn("THREE.Line3: .delta() target is now required"),t=new $e),t.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(t,e){return void 0===e&&(console.warn("THREE.Line3: .at() target is now required"),e=new $e),this.delta(e).multiplyScalar(t).add(this.start)},closestPointToPointParameter:(Au=new $e,Pu=new $e,function(t,e){Au.subVectors(t,this.start),Pu.subVectors(this.end,this.start);var n=Pu.dot(Pu),r=Pu.dot(Au)/n;return e&&(r=Ke.clamp(r,0,1)),r}),closestPointToPoint:function(t,e,n){var r=this.closestPointToPointParameter(t,e);return void 0===n&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),n=new $e),this.delta(n).multiplyScalar(r).add(this.start)},applyMatrix4:function(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this},equals:function(t){return t.start.equals(this.start)&&t.end.equals(this.end)}}),(al.prototype=Object.create(Fn.prototype)).constructor=al,al.prototype.isImmediateRenderObject=!0,(sl.prototype=Object.create(ao.prototype)).constructor=sl,sl.prototype.update=function(){var t=new $e,e=new $e,n=new tn;return function(){var r=["a","b","c"];this.object.updateMatrixWorld(!0),n.getNormalMatrix(this.object.matrixWorld);var i=this.object.matrixWorld,o=this.geometry.attributes.position,a=this.object.geometry;if(a&&a.isGeometry)for(var s=a.vertices,u=a.faces,l=0,c=0,h=u.length;c<h;c++)for(var d=u[c],p=0,f=d.vertexNormals.length;p<f;p++){var m=d.vertexNormals[p];t.copy(s[d[r[p]]]).applyMatrix4(i),e.copy(m).applyMatrix3(n).normalize().multiplyScalar(this.size).add(t),o.setXYZ(l,t.x,t.y,t.z),o.setXYZ(l+=1,e.x,e.y,e.z),l+=1}else if(a&&a.isBufferGeometry){var v=a.attributes.position,g=a.attributes.normal;for(l=0,p=0,f=v.count;p<f;p++)t.set(v.getX(p),v.getY(p),v.getZ(p)).applyMatrix4(i),e.set(g.getX(p),g.getY(p),g.getZ(p)),e.applyMatrix3(n).normalize().multiplyScalar(this.size).add(t),o.setXYZ(l,t.x,t.y,t.z),o.setXYZ(l+=1,e.x,e.y,e.z),l+=1}o.needsUpdate=!0}}(),(ul.prototype=Object.create(Fn.prototype)).constructor=ul,ul.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},ul.prototype.update=function(){var t=new $e,e=new $e;return function(){this.light.updateMatrixWorld();var n=this.light.distance?this.light.distance:1e3,r=n*Math.tan(this.light.angle);this.cone.scale.set(r,r,n),t.setFromMatrixPosition(this.light.matrixWorld),e.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(e.sub(t)),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}(),(ll.prototype=Object.create(ao.prototype)).constructor=ll,ll.prototype.updateMatrixWorld=function(){var t=new $e,e=new Qe,n=new Qe;return function(r){var i=this.bones,o=this.geometry,a=o.getAttribute("position");n.getInverse(this.root.matrixWorld);for(var s=0,u=0;s<i.length;s++){var l=i[s];l.parent&&l.parent.isBone&&(e.multiplyMatrices(n,l.matrixWorld),t.setFromMatrixPosition(e),a.setXYZ(u,t.x,t.y,t.z),e.multiplyMatrices(n,l.parent.matrixWorld),t.setFromMatrixPosition(e),a.setXYZ(u+1,t.x,t.y,t.z),u+=2)}o.getAttribute("position").needsUpdate=!0,Fn.prototype.updateMatrixWorld.call(this,r)}}(),(cl.prototype=Object.create(Sr.prototype)).constructor=cl,cl.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},cl.prototype.update=function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)},(hl.prototype=Object.create(Fn.prototype)).constructor=hl,hl.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},hl.prototype.update=function(){var t=.5*this.light.width,e=.5*this.light.height,n=this.line.geometry.attributes.position,r=n.array;r[0]=t,r[1]=-e,r[2]=0,r[3]=t,r[4]=e,r[5]=0,r[6]=-t,r[7]=e,r[8]=0,r[9]=-t,r[10]=-e,r[11]=0,r[12]=t,r[13]=-e,r[14]=0,n.needsUpdate=!0,void 0!==this.color?this.line.material.color.set(this.color):this.line.material.color.copy(this.light.color)},(dl.prototype=Object.create(Fn.prototype)).constructor=dl,dl.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},dl.prototype.update=function(){var t=new $e,e=new Sn,n=new Sn;return function(){var r=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var i=r.geometry.getAttribute("color");e.copy(this.light.color),n.copy(this.light.groundColor);for(var o=0,a=i.count;o<a;o++){var s=o<a/2?e:n;i.setXYZ(o,s.r,s.g,s.b)}i.needsUpdate=!0}r.lookAt(t.setFromMatrixPosition(this.light.matrixWorld).negate())}}(),(pl.prototype=Object.create(ao.prototype)).constructor=pl,(fl.prototype=Object.create(ao.prototype)).constructor=fl,(ml.prototype=Object.create(ao.prototype)).constructor=ml,ml.prototype.update=function(){var t=new $e,e=new $e,n=new tn;return function(){this.object.updateMatrixWorld(!0),n.getNormalMatrix(this.object.matrixWorld);for(var r=this.object.matrixWorld,i=this.geometry.attributes.position,o=this.object.geometry,a=o.vertices,s=o.faces,u=0,l=0,c=s.length;l<c;l++){var h=s[l],d=h.normal;t.copy(a[h.a]).add(a[h.b]).add(a[h.c]).divideScalar(3).applyMatrix4(r),e.copy(d).applyMatrix3(n).normalize().multiplyScalar(this.size).add(t),i.setXYZ(u,t.x,t.y,t.z),i.setXYZ(u+=1,e.x,e.y,e.z),u+=1}i.needsUpdate=!0}}(),(vl.prototype=Object.create(Fn.prototype)).constructor=vl,vl.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},vl.prototype.update=function(){var t=new $e,e=new $e,n=new $e;return function(){t.setFromMatrixPosition(this.light.matrixWorld),e.setFromMatrixPosition(this.light.target.matrixWorld),n.subVectors(e,t),this.lightPlane.lookAt(n),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(n),this.targetLine.scale.z=n.length()}}(),(gl.prototype=Object.create(ao.prototype)).constructor=gl,gl.prototype.update=function(){var t,e,n=new $e,r=new Vi;function i(i,o,a,s){n.set(o,a,s).unproject(r);var u=e[i];if(void 0!==u)for(var l=t.getAttribute("position"),c=0,h=u.length;c<h;c++)l.setXYZ(u[c],n.x,n.y,n.z)}return function(){t=this.geometry,e=this.pointMap,r.projectionMatrix.copy(this.camera.projectionMatrix),i("c",0,0,-1),i("t",0,0,1),i("n1",-1,-1,-1),i("n2",1,-1,-1),i("n3",-1,1,-1),i("n4",1,1,-1),i("f1",-1,-1,1),i("f2",1,-1,1),i("f3",-1,1,1),i("f4",1,1,1),i("u1",.7,1.1,-1),i("u2",-.7,1.1,-1),i("u3",0,2,-1),i("cf1",-1,0,1),i("cf2",1,0,1),i("cf3",0,-1,1),i("cf4",0,1,1),i("cn1",-1,0,-1),i("cn2",1,0,-1),i("cn3",0,-1,-1),i("cn4",0,1,-1),t.getAttribute("position").needsUpdate=!0}}(),(yl.prototype=Object.create(ao.prototype)).constructor=yl,yl.prototype.update=function(){var t=new fn;return function(e){if(void 0!==e&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&t.setFromObject(this.object),!t.isEmpty()){var n=t.min,r=t.max,i=this.geometry.attributes.position,o=i.array;o[0]=r.x,o[1]=r.y,o[2]=r.z,o[3]=n.x,o[4]=r.y,o[5]=r.z,o[6]=n.x,o[7]=n.y,o[8]=r.z,o[9]=r.x,o[10]=n.y,o[11]=r.z,o[12]=r.x,o[13]=r.y,o[14]=n.z,o[15]=n.x,o[16]=r.y,o[17]=n.z,o[18]=n.x,o[19]=n.y,o[20]=n.z,o[21]=r.x,o[22]=n.y,o[23]=n.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}}}(),yl.prototype.setFromObject=function(t){return this.object=t,this.update(),this},(_l.prototype=Object.create(ao.prototype)).constructor=_l,_l.prototype.updateMatrixWorld=function(t){var e=this.box;e.isEmpty()||(e.getCenter(this.position),e.getSize(this.scale),this.scale.multiplyScalar(.5),Fn.prototype.updateMatrixWorld.call(this,t))},(bl.prototype=Object.create(oo.prototype)).constructor=bl,bl.prototype.updateMatrixWorld=function(t){var e=-this.plane.constant;Math.abs(e)<1e-8&&(e=1e-8),this.scale.set(.5*this.size,.5*this.size,e),this.children[0].material.side=e<0?C:M,this.lookAt(this.plane.normal),Fn.prototype.updateMatrixWorld.call(this,t)},(wl.prototype=Object.create(Fn.prototype)).constructor=wl,wl.prototype.setDirection=(Iu=new $e,function(t){t.y>.99999?this.quaternion.set(0,0,0,1):t.y<-.99999?this.quaternion.set(1,0,0,0):(Iu.set(t.z,0,-t.x).normalize(),Lu=Math.acos(t.y),this.quaternion.setFromAxisAngle(Iu,Lu))}),wl.prototype.setLength=function(t,e,n){void 0===e&&(e=.2*t),void 0===n&&(n=.2*e),this.line.scale.set(1,Math.max(0,t-e),1),this.line.updateMatrix(),this.cone.scale.set(n,e,n),this.cone.position.y=t,this.cone.updateMatrix()},wl.prototype.setColor=function(t){this.line.material.color.copy(t),this.cone.material.color.copy(t)},(xl.prototype=Object.create(ao.prototype)).constructor=xl;var Sl=0,Tl=1;function Ml(t){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),t}function Cl(t){return void 0===t&&(t=[]),console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),t.isMultiMaterial=!0,t.materials=t,t.clone=function(){return t.slice()},t}function Al(t,e){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new lo(t,e)}function Pl(t){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new $i(t)}function Ol(t,e){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new lo(t,e)}function Rl(t){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new uo(t)}function Ll(t){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new uo(t)}function Il(t){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new uo(t)}function Nl(t,e,n){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new $e(t,e,n)}function Dl(t,e){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead."),new Vn(t,e).setDynamic(!0)}function kl(t,e){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new zn(t,e)}function Fl(t,e){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new Hn(t,e)}function jl(t,e){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new Wn(t,e)}function Ul(t,e){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new qn(t,e)}function Bl(t,e){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new Xn(t,e)}function Gl(t,e){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new Yn(t,e)}function Vl(t,e){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new Kn(t,e)}function zl(t,e){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new Zn(t,e)}function Hl(t,e){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new Qn(t,e)}function Wl(t){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),ns.call(this,t),this.type="catmullrom",this.closed=!0}function ql(t){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),ns.call(this,t),this.type="catmullrom"}function Xl(t){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),ns.call(this,t),this.type="catmullrom"}function Yl(t){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new xl(t)}function Kl(t,e){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new yl(t,e)}function Zl(t,e){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new ao(new _a(t.geometry),new io({color:void 0!==e?e:16777215}))}function Ql(t,e){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new ao(new mo(t.geometry),new io({color:void 0!==e?e:16777215}))}function Jl(t){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new Va(t)}function $l(t){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new Ha(t)}Ya.create=function(t,e){return console.log("THREE.Curve.create() has been deprecated"),t.prototype=Object.create(Ya.prototype),t.prototype.constructor=t,t.prototype.getPoint=e,t},Object.assign(fs.prototype,{createPointsGeometry:function(t){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var e=this.getPoints(t);return this.createGeometry(e)},createSpacedPointsGeometry:function(t){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var e=this.getSpacedPoints(t);return this.createGeometry(e)},createGeometry:function(t){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var e=new Gn,n=0,r=t.length;n<r;n++){var i=t[n];e.vertices.push(new $e(i.x,i.y,i.z||0))}return e}}),Object.assign(ms.prototype,{fromPoints:function(t){console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(t)}}),Wl.prototype=Object.create(ns.prototype),ql.prototype=Object.create(ns.prototype),Xl.prototype=Object.create(ns.prototype),Object.assign(Xl.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),pl.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},ll.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Object.assign(Zs.prototype,{extractUrlBase:function(t){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),Qs.extractUrlBase(t)}}),Object.assign(Js.prototype,{setTexturePath:function(t){return console.warn("THREE.JSONLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(t)}}),Object.assign(il.prototype,{center:function(t){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},size:function(t){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(t)}}),Object.assign(fn.prototype,{center:function(t){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionSphere:function(t){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)},size:function(t){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(t)}}),ol.prototype.center=function(t){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(t)},Object.assign(Ke,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(t){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),Ke.floorPowerOfTwo(t)},nextPowerOfTwo:function(t){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),Ke.ceilPowerOfTwo(t)}}),Object.assign(tn.prototype,{flattenToArrayOffset:function(t,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},multiplyVector3:function(t){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBuffer:function(t){return console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(t)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Object.assign(Qe.prototype,{extractPosition:function(t){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(t)},flattenToArrayOffset:function(t,e){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},getPosition:function(){var t;return function(){return void 0===t&&(t=new $e),console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),t.setFromMatrixColumn(this,3)}}(),setRotationFromQuaternion:function(t){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(t)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(t){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector4:function(t){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(t){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),t.transformDirection(this)},crossVector:function(t){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(t){return console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(t)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(t,e,n,r,i,o){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(t,e,r,n,i,o)}}),vn.prototype.isIntersectionLine=function(t){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(t)},Je.prototype.multiplyVector3=function(t){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),t.applyQuaternion(this)},Object.assign(wr.prototype,{isIntersectionBox:function(t){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionPlane:function(t){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(t)},isIntersectionSphere:function(t){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)}}),Object.assign(xr.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(t,e){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(t,e)},midpoint:function(t){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(t)},normal:function(t){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(t)},plane:function(t){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(t)}}),Object.assign(xr,{barycoordFromPoint:function(t,e,n,r,i){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),xr.getBarycoord(t,e,n,r,i)},normal:function(t,e,n,r){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),xr.getNormal(t,e,n,r)}}),Object.assign(vs.prototype,{extractAllPoints:function(t){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(t)},extrude:function(t){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new ia(this,t)},makeGeometry:function(t){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new va(this,t)}}),Object.assign(Ze.prototype,{fromAttribute:function(t,e,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},distanceToManhattan:function(t){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign($e.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(t){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(t)},getScaleFromMatrix:function(t){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(t)},getColumnFromMatrix:function(t,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,t)},applyProjection:function(t){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(t)},fromAttribute:function(t,e,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},distanceToManhattan:function(t){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(cn.prototype,{fromAttribute:function(t,e,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Gn.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}}),Object.assign(Fn.prototype,{getChildByName:function(t){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(t)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(t,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,t)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")}}),Object.defineProperties(Fn.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(t){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=t}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.defineProperties(to.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(eo.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),Object.defineProperty(Ya.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(t){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=t}}),zi.prototype.setLens=function(t,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==e&&(this.filmGauge=e),this.setFocalLength(t)},Object.defineProperties(gs.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(t){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=t}},shadowCameraLeft:{set:function(t){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=t}},shadowCameraRight:{set:function(t){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=t}},shadowCameraTop:{set:function(t){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=t}},shadowCameraBottom:{set:function(t){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=t}},shadowCameraNear:{set:function(t){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=t}},shadowCameraFar:{set:function(t){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=t}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(t){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=t}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(t){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=t}},shadowMapHeight:{set:function(t){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=t}}}),Object.defineProperties(Vn.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")}}),Object.assign(er.prototype,{addIndex:function(t){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(t)},addDrawCall:function(t,e,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(t,e)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}}),Object.defineProperties(er.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.assign(oa.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}}),Object.defineProperties(Yu.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(_r.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new Sn}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=t===P}}}),Object.defineProperties(Ra.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(br.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(t){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=t}}}),Object.assign(qi.prototype,{clearTarget:function(t,e,n,r){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(t),this.clear(e,n,r)},animate:function(t){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(t)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(t){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(t)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")}}),Object.defineProperties(qi.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=t}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=t}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(Ui.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(hn.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=t}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=t}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=t}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=t}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(t){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=t}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(t){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=t}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(t){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=t}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(t){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=t}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(t){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=t}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(t){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=t}}}),Object.defineProperties(Wi.prototype,{standing:{set:function(){console.warn("THREE.WebVRManager: .standing has been removed.")}},userHeight:{set:function(){console.warn("THREE.WebVRManager: .userHeight has been removed.")}}}),Uu.prototype.load=function(t){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var e=this;return(new Du).load(t,function(t){e.setBuffer(t)}),this},Gu.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},Fu.prototype.updateCubeMap=function(t,e){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(t,e)};var tc={merge:function(t,e,n){var r;console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead."),e.isMesh&&(e.matrixAutoUpdate&&e.updateMatrix(),r=e.matrix,e=e.geometry),t.merge(e,r,n)},center:function(t){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),t.center()}};function ec(){console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js."),this.projectVector=function(t,e){console.warn("THREE.Projector: .projectVector() is now vector.project()."),t.project(e)},this.unprojectVector=function(t,e){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."),t.unproject(e)},this.pickingRay=function(){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}}function nc(){console.error("THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js"),this.domElement=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),this.clear=function(){},this.render=function(){},this.setClearColor=function(){},this.setSize=function(){}}sn.crossOrigin=void 0,sn.loadTexture=function(t,e,n,r){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var i=new Xa;i.setCrossOrigin(this.crossOrigin);var o=i.load(t,n,void 0,r);return e&&(o.mapping=e),o},sn.loadTextureCube=function(t,e,n,r){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var i=new qa;i.setCrossOrigin(this.crossOrigin);var o=i.load(t,n,void 0,r);return e&&(o.mapping=e),o},sn.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},sn.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};var rc={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")}};function ic(){console.error("THREE.LensFlare has been moved to /examples/js/objects/Lensflare.js")}},RzhA:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("0kFh");e.OperationType=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}(e.OperationType||{}),e.OperationSource=function(){function t(t,e,n,i){this.fromUser=t,this.fromServer=e,this.queryId=n,this.tagged=i,r.assert(!i||e,"Tagged queries must be from server.")}return t.User=new t(!0,!1,null,!1),t.Server=new t(!1,!0,null,!1),t.forServerTaggedQuery=function(e){return new t(!1,!0,e,!0)},t}()},S4uM:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("q1Ft"),i=n("73GG"),o=n("W1I6");e.parseRepoInfo=function(t){var n=e.parseURL(t),a=n.subdomain;return"firebase"===n.domain&&o.fatal(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),a&&"undefined"!=a||"localhost"===n.domain||o.fatal("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||o.warnIfPageIsSecure(),{repoInfo:new i.RepoInfo(n.host,n.secure,a,"ws"===n.scheme||"wss"===n.scheme),path:new r.Path(n.pathString)}},e.parseURL=function(t){var e="",n="",r="",i="",a=!0,s="https",u=443;if("string"==typeof t){var l=t.indexOf("//");l>=0&&(s=t.substring(0,l-1),t=t.substring(l+2));var c=t.indexOf("/");-1===c&&(c=t.length);var h=t.indexOf("?");-1===h&&(h=t.length),e=t.substring(0,Math.min(c,h)),c<h&&(i=function(e){for(var n="",r=t.substring(c,h).split("/"),i=0;i<r.length;i++)if(r[i].length>0){var o=r[i];try{o=decodeURIComponent(o.replace(/\+/g," "))}catch(t){}n+="/"+o}return n}());var d=function(t){var e={};t.startsWith("?")&&(t=t.substring(1));for(var n=0,r=t.split("&");n<r.length;n++){var i=r[n];if(0!==i.length){var a=i.split("=");2===a.length?e[decodeURIComponent(a[0])]=decodeURIComponent(a[1]):o.warn("Invalid query segment '"+i+"' in query '"+t+"'")}}return e}(t.substring(Math.min(t.length,h)));(l=e.indexOf(":"))>=0?(a="https"===s||"wss"===s,u=parseInt(e.substring(l+1),10)):l=t.length;var p=e.split(".");3===p.length?(n=p[1],r=p[0].toLowerCase()):2===p.length?n=p[0]:"localhost"===p[0].slice(0,l).toLowerCase()&&(n="localhost"),""===r&&"ns"in d&&(r=d.ns)}return{host:e,port:u,domain:n,subdomain:r,secure:a,scheme:s,pathString:i}}},S5XQ:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("DKTb"),i=function(t){return function(e){return t.then(function(t){e.closed||(e.next(t),e.complete())},function(t){return e.error(t)}).then(null,r.a),e}}},S5bw:function(t,e,n){"use strict";var r=n("mrSG"),i=n("K9Ia"),o=n("zo3G"),a=n("pugT"),s=n("FFOo"),u=n("60iU"),l=function(t){function e(e,n,r){void 0===r&&(r=0);var i=t.call(this,e)||this;return i.scheduler=n,i.delay=r,i}return r.__extends(e,t),e.dispatch=function(t){t.notification.observe(t.destination),this.unsubscribe()},e.prototype.scheduleMessage=function(t){this.destination.add(this.scheduler.schedule(e.dispatch,this.delay,new c(t,this.destination)))},e.prototype._next=function(t){this.scheduleMessage(u.Notification.createNext(t))},e.prototype._error=function(t){this.scheduleMessage(u.Notification.createError(t)),this.unsubscribe()},e.prototype._complete=function(){this.scheduleMessage(u.Notification.createComplete()),this.unsubscribe()},e}(s.a),c=function(t,e){this.notification=t,this.destination=e},h=n("8g8A"),d=n(null);n.d(e,"ReplaySubject",function(){return p});var p=function(t){function e(e,n,r){void 0===e&&(e=Number.POSITIVE_INFINITY),void 0===n&&(n=Number.POSITIVE_INFINITY);var i=t.call(this)||this;return i.scheduler=r,i._events=[],i._infiniteTimeWindow=!1,i._bufferSize=e<1?1:e,i._windowTime=n<1?1:n,n===Number.POSITIVE_INFINITY?(i._infiniteTimeWindow=!0,i.next=i.nextInfiniteTimeWindow):i.next=i.nextTimeWindow,i}return r.__extends(e,t),e.prototype.nextInfiniteTimeWindow=function(e){var n=this._events;n.push(e),n.length>this._bufferSize&&n.shift(),t.prototype.next.call(this,e)},e.prototype.nextTimeWindow=function(e){this._events.push(new f(this._getNow(),e)),this._trimBufferThenGetEvents(),t.prototype.next.call(this,e)},e.prototype._subscribe=function(t){var e,n=this._infiniteTimeWindow,r=n?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,o=r.length;if(this.closed)throw new h.a;if(this.isStopped||this.hasError?e=a.a.EMPTY:(this.observers.push(t),e=new d.a(this,t)),i&&t.add(t=new l(t,i)),n)for(var s=0;s<o&&!t.closed;s++)t.next(r[s]);else for(s=0;s<o&&!t.closed;s++)t.next(r[s].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),e},e.prototype._getNow=function(){return(this.scheduler||o.queue).now()},e.prototype._trimBufferThenGetEvents=function(){for(var t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,i=r.length,o=0;o<i&&!(t-r[o].time<n);)o++;return i>e&&(o=Math.max(o,i-e)),o>0&&r.splice(0,o),r},e}(i.a),f=function(t,e){this.time=t,this.value=e}},SoC1:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("0kFh"),i=n("q1Ft"),o=n("rWOq"),a=n("Ix30"),s=n("FKYu"),u=n("Mom/");e.generateWithValues=function(t){return(t=t||{}).timestamp=t.timestamp||(new Date).getTime(),t},e.resolveDeferredValue=function(t,e){return t&&"object"==typeof t?(r.assert(".sv"in t,"Unexpected leaf node or priority contents"),e[t[".sv"]]):t},e.resolveDeferredValueTree=function(t,n){var r=new o.SparseSnapshotTree;return t.forEachTree(new i.Path(""),function(t,i){r.remember(t,e.resolveDeferredValueSnapshot(i,n))}),r},e.resolveDeferredValueSnapshot=function(t,n){var r,i=t.getPriority().val(),o=e.resolveDeferredValue(i,n);if(t.isLeafNode()){var l=t,c=e.resolveDeferredValue(l.getValue(),n);return c!==l.getValue()||o!==l.getPriority().val()?new a.LeafNode(c,s.nodeFromJSON(o)):t}var h=t;return r=h,o!==h.getPriority().val()&&(r=r.updatePriority(new a.LeafNode(o))),h.forEachChild(u.PRIORITY_INDEX,function(t,i){var o=e.resolveDeferredValueSnapshot(i,n);o!==i&&(r=r.updateImmediateChild(t,o))}),r}},"SyT/":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("q1Ft"),i=n("0kFh"),o=n("W1I6"),a=n("0kFh"),s=n("0kFh");e.INVALID_KEY_REGEX_=/[\[\].#$\/\u0000-\u001F\u007F]/,e.INVALID_PATH_REGEX_=/[\[\].#$\u0000-\u001F\u007F]/,e.MAX_LEAF_SIZE_=10485760,e.isValidKey=function(t){return"string"==typeof t&&0!==t.length&&!e.INVALID_KEY_REGEX_.test(t)},e.isValidPathString=function(t){return"string"==typeof t&&0!==t.length&&!e.INVALID_PATH_REGEX_.test(t)},e.isValidRootPathString=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),e.isValidPathString(t)},e.isValidPriority=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!o.isInvalidJSONNumber(t)||t&&"object"==typeof t&&i.contains(t,".sv")},e.validateFirebaseDataArg=function(t,n,r,i,o){o&&void 0===r||e.validateFirebaseData(a.errorPrefix(t,n,o),r,i)},e.validateFirebaseData=function(t,n,a){var u=a instanceof r.Path?new r.ValidationPath(a,t):a;if(void 0===n)throw new Error(t+"contains undefined "+u.toErrorString());if("function"==typeof n)throw new Error(t+"contains a function "+u.toErrorString()+" with contents = "+n.toString());if(o.isInvalidJSONNumber(n))throw new Error(t+"contains "+n.toString()+" "+u.toErrorString());if("string"==typeof n&&n.length>e.MAX_LEAF_SIZE_/3&&s.stringLength(n)>e.MAX_LEAF_SIZE_)throw new Error(t+"contains a string greater than "+e.MAX_LEAF_SIZE_+" utf8 bytes "+u.toErrorString()+" ('"+n.substring(0,50)+"...')");if(n&&"object"==typeof n){var l=!1,c=!1;if(i.forEach(n,function(n,r){if(".value"===n)l=!0;else if(".priority"!==n&&".sv"!==n&&(c=!0,!e.isValidKey(n)))throw new Error(t+" contains an invalid key ("+n+") "+u.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');u.push(n),e.validateFirebaseData(t,r,u),u.pop()}),l&&c)throw new Error(t+' contains ".value" child '+u.toErrorString()+" in addition to actual children.")}},e.validateFirebaseMergePaths=function(t,n){var i,o;for(i=0;i<n.length;i++)for(var a=(o=n[i]).slice(),s=0;s<a.length;s++)if(".priority"===a[s]&&s===a.length-1);else if(!e.isValidKey(a[s]))throw new Error(t+"contains an invalid key ("+a[s]+") in path "+o.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');n.sort(r.Path.comparePaths);var u=null;for(i=0;i<n.length;i++){if(o=n[i],null!==u&&u.contains(o))throw new Error(t+"contains a path "+u.toString()+" that is ancestor of another path "+o.toString());u=o}},e.validateFirebaseMergeDataArg=function(t,n,o,s,u){if(!u||void 0!==o){var l=a.errorPrefix(t,n,u);if(!o||"object"!=typeof o||Array.isArray(o))throw new Error(l+" must be an object containing the children to replace.");var c=[];i.forEach(o,function(t,n){var i=new r.Path(t);if(e.validateFirebaseData(l,n,s.child(i)),".priority"===i.getBack()&&!e.isValidPriority(n))throw new Error(l+"contains an invalid value for '"+i.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");c.push(i)}),e.validateFirebaseMergePaths(l,c)}},e.validatePriority=function(t,n,r,i){if(!i||void 0!==r){if(o.isInvalidJSONNumber(r))throw new Error(a.errorPrefix(t,n,i)+"is "+r.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!e.isValidPriority(r))throw new Error(a.errorPrefix(t,n,i)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},e.validateEventType=function(t,e,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(a.errorPrefix(t,e,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},e.validateKey=function(t,n,r,i){if(!(i&&void 0===r||e.isValidKey(r)))throw new Error(a.errorPrefix(t,n,i)+'was an invalid key = "'+r+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},e.validatePathString=function(t,n,r,i){if(!(i&&void 0===r||e.isValidPathString(r)))throw new Error(a.errorPrefix(t,n,i)+'was an invalid path = "'+r+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},e.validateRootPathString=function(t,n,r,i){r&&(r=r.replace(/^\/*\.info(\/|$)/,"/")),e.validatePathString(t,n,r,i)},e.validateWritablePath=function(t,e){if(".info"===e.getFront())throw new Error(t+" failed = Can't modify data under /.info/")},e.validateUrl=function(t,n,r){var i=r.path.toString();if("string"!=typeof r.repoInfo.host||0===r.repoInfo.host.length||!e.isValidKey(r.repoInfo.namespace)&&"localhost"!==r.repoInfo.host.split(":")[0]||0!==i.length&&!e.isValidRootPathString(i))throw new Error(a.errorPrefix(t,n,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},e.validateCredential=function(t,e,n,r){if((!r||void 0!==n)&&"string"!=typeof n)throw new Error(a.errorPrefix(t,e,r)+"must be a valid credential (a string).")},e.validateBoolean=function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error(a.errorPrefix(t,e,r)+"must be a boolean.")},e.validateString=function(t,e,n,r){if((!r||void 0!==n)&&"string"!=typeof n)throw new Error(a.errorPrefix(t,e,r)+"must be a valid string.")},e.validateObject=function(t,e,n,r){if(!(r&&void 0===n||n&&"object"==typeof n&&null!==n))throw new Error(a.errorPrefix(t,e,r)+"must be a valid object.")},e.validateObjectContainsKey=function(t,e,n,r,o,s){if(!n||"object"!=typeof n||!i.contains(n,r)){if(o)return;throw new Error(a.errorPrefix(t,e,o)+'must contain the key "'+r+'"')}if(s){var u=i.safeGet(n,r);if("number"===s&&"number"!=typeof u||"string"===s&&"string"!=typeof u||"boolean"===s&&"boolean"!=typeof u||"function"===s&&"function"!=typeof u||"object"===s&&"object"!=typeof u&&u)throw o?new Error(a.errorPrefix(t,e,o)+'contains invalid value for key "'+r+'" (must be of type "'+s+'")'):new Error(a.errorPrefix(t,e,o)+'must contain the key "'+r+'" with type "'+s+'"')}}},T1DM:function(t,e,n){"use strict";var r=n("mrSG"),i=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r.pending=!1,r}return r.__extends(e,t),e.prototype.schedule=function(t,e){if(void 0===e&&(e=0),this.closed)return this;this.state=t;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this},e.prototype.requestAsyncId=function(t,e,n){return void 0===n&&(n=0),setInterval(t.flush.bind(t,this),n)},e.prototype.recycleAsyncId=function(t,e,n){if(void 0===n&&(n=0),null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)},e.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,e){var n=!1,r=void 0;try{this.work(t)}catch(t){n=!0,r=!!t&&t||new Error(t)}if(n)return this.unsubscribe(),r},e.prototype._unsubscribe=function(){var t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null},e}(function(t){function e(e,n){return t.call(this)||this}return r.__extends(e,t),e.prototype.schedule=function(t,e){return void 0===e&&(e=0),this},e}(n("pugT").a)),o=n("siIJ"),a=function(t){function e(n,r){void 0===r&&(r=o.Scheduler.now);var i=t.call(this,n,function(){return e.delegate&&e.delegate!==i?e.delegate.now():r()})||this;return i.actions=[],i.active=!1,i.scheduled=void 0,i}return r.__extends(e,t),e.prototype.schedule=function(n,r,i){return void 0===r&&(r=0),e.delegate&&e.delegate!==this?e.delegate.schedule(n,r,i):t.prototype.schedule.call(this,n,r,i)},e.prototype.flush=function(t){var e=this.actions;if(this.active)e.push(t);else{var n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}},e}(o.Scheduler);n.d(e,"async",function(){return s});var s=new a(i)},TDTO:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("0kFh");e.MemoryStorage=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return r.contains(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}()},TczM:function(t,e,n){var r=n("Womt"),i=function(){var t={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123,FLOAT:5126,UNSIGNED_INT:5125,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987},e={1003:t.NEAREST,1004:t.NEAREST_MIPMAP_NEAREST,1005:t.NEAREST_MIPMAP_LINEAR,1006:t.LINEAR,1007:t.LINEAR_MIPMAP_NEAREST,1008:t.LINEAR_MIPMAP_LINEAR},n={scale:"scale",position:"translation",quaternion:"rotation",morphTargetInfluences:"weights"};function i(){}return i.prototype={constructor:i,parse:function(i,o,a){(a=Object.assign({},{binary:!1,trs:!1,onlyVisible:!0,truncateDrawRange:!0,embedImages:!0,animations:[],forceIndices:!1,forcePowerOfTwoTextures:!1},a)).animations.length>0&&(a.trs=!0);var s,u={asset:{version:"2.0",generator:"THREE.GLTFExporter"}},l=0,c=[],h=[],d=new Map,p=[],f={},m={attributes:new Map,materials:new Map,textures:new Map,images:new Map};function v(t,e){return t.length===e.length&&t.every(function(t,n){return t===e[n]})}function g(t){return 4*Math.ceil(t/4)}function y(t,e){e=e||0;var n=g(t.byteLength);if(n!==t.byteLength){var r=new Uint8Array(n);if(r.set(new Uint8Array(t)),0!==e)for(var i=t.byteLength;i<n;i++)r[i]=e;return r.buffer}return t}function _(t){try{return JSON.parse(JSON.stringify(t.userData))}catch(e){return console.warn("THREE.GLTFExporter: userData of '"+t.name+"' won't be serialized because of JSON.stringify error - "+e.message),{}}}function b(t){return u.buffers||(u.buffers=[{byteLength:0}]),c.push(t),0}function w(e,n,r,i){var o;if(e.array.constructor===Float32Array)o=t.FLOAT;else if(e.array.constructor===Uint32Array)o=t.UNSIGNED_INT;else if(e.array.constructor===Uint16Array)o=t.UNSIGNED_SHORT;else{if(e.array.constructor!==Uint8Array)throw new Error("THREE.GLTFExporter: Unsupported bufferAttribute component type.");o=t.UNSIGNED_BYTE}if(void 0===r&&(r=0),void 0===i&&(i=e.count),a.truncateDrawRange&&void 0!==n&&null===n.index){var s=r+i,c=n.drawRange.count===1/0?e.count:n.drawRange.start+n.drawRange.count;r=Math.max(r,n.drawRange.start),(i=Math.min(s,c)-r)<0&&(i=0)}if(0===i)return null;var h,d=function(t,e,n){for(var r={min:new Array(t.itemSize).fill(Number.POSITIVE_INFINITY),max:new Array(t.itemSize).fill(Number.NEGATIVE_INFINITY)},i=e;i<e+n;i++)for(var o=0;o<t.itemSize;o++){var a=t.array[i*t.itemSize+o];r.min[o]=Math.min(r.min[o],a),r.max[o]=Math.max(r.max[o],a)}return r}(e,r,i);void 0!==n&&(h=e===n.index?t.ELEMENT_ARRAY_BUFFER:t.ARRAY_BUFFER);var p=function(e,n,r,i,o){var a;u.bufferViews||(u.bufferViews=[]);for(var s=g(i*e.itemSize*(a=n===t.UNSIGNED_BYTE?1:n===t.UNSIGNED_SHORT?2:4)),c=new DataView(new ArrayBuffer(s)),h=0,d=r;d<r+i;d++)for(var p=0;p<e.itemSize;p++){var f=e.array[d*e.itemSize+p];n===t.FLOAT?c.setFloat32(h,f,!0):n===t.UNSIGNED_INT?c.setUint32(h,f,!0):n===t.UNSIGNED_SHORT?c.setUint16(h,f,!0):n===t.UNSIGNED_BYTE&&c.setUint8(h,f),h+=a}var m={buffer:b(c.buffer),byteOffset:l,byteLength:s};return void 0!==o&&(m.target=o),o===t.ARRAY_BUFFER&&(m.byteStride=e.itemSize*a),l+=s,u.bufferViews.push(m),{id:u.bufferViews.length-1,byteLength:0}}(e,o,r,i,h),f={bufferView:p.id,byteOffset:p.byteOffset,componentType:o,count:i,max:d.max,min:d.min,type:{1:"SCALAR",2:"VEC2",3:"VEC3",4:"VEC4",16:"MAT4"}[e.itemSize]};return u.accessors||(u.accessors=[]),u.accessors.push(f),u.accessors.length-1}function x(t){if(m.textures.has(t))return m.textures.get(t);u.textures||(u.textures=[]);var n={sampler:function(t){return u.samplers||(u.samplers=[]),u.samplers.push({magFilter:e[t.magFilter],minFilter:e[t.minFilter],wrapS:e[t.wrapS],wrapT:e[t.wrapT]}),u.samplers.length-1}(t),source:function(t,e,n){m.images.has(t)||m.images.set(t,{});var i=m.images.get(t),o=e===r.RGBAFormat?"image/png":"image/jpeg",c=o+":flipY/"+n.toString();if(void 0!==i[c])return i[c];u.images||(u.images=[]);var d={mimeType:o};if(a.embedImages){var p=s=s||document.createElement("canvas");p.width=t.width,p.height=t.height,a.forcePowerOfTwoTextures&&!function(t){return r.Math.isPowerOfTwo(t.width)&&r.Math.isPowerOfTwo(t.height)}(t)&&(console.warn("GLTFExporter: Resized non-power-of-two image.",t),p.width=r.Math.floorPowerOfTwo(p.width),p.height=r.Math.floorPowerOfTwo(p.height));var f=p.getContext("2d");!0===n&&(f.translate(0,p.height),f.scale(1,-1)),f.drawImage(t,0,0,p.width,p.height),!0===a.binary?h.push(new Promise(function(t){p.toBlob(function(e){(function(t){return u.bufferViews||(u.bufferViews=[]),new Promise(function(e){var n=new window.FileReader;n.readAsArrayBuffer(t),n.onloadend=function(){var t=y(n.result),r={buffer:b(t),byteOffset:l,byteLength:t.byteLength};l+=t.byteLength,u.bufferViews.push(r),e(u.bufferViews.length-1)}})})(e).then(function(e){d.bufferView=e,t()})},o)})):d.uri=p.toDataURL(o)}else d.uri=t.src;u.images.push(d);var v=u.images.length-1;return i[c]=v,v}(t.image,t.format,t.flipY)};u.textures.push(n);var i=u.textures.length-1;return m.textures.set(t,i),i}function E(t){if(m.materials.has(t))return m.materials.get(t);if(u.materials||(u.materials=[]),t.isShaderMaterial)return console.warn("GLTFExporter: THREE.ShaderMaterial not supported."),null;var e={pbrMetallicRoughness:{}};t.isMeshBasicMaterial?(e.extensions={KHR_materials_unlit:{}},f.KHR_materials_unlit=!0):t.isMeshStandardMaterial||console.warn("GLTFExporter: Use MeshStandardMaterial or MeshBasicMaterial for best results.");var n=t.color.toArray().concat([t.opacity]);if(v(n,[1,1,1,1])||(e.pbrMetallicRoughness.baseColorFactor=n),t.isMeshStandardMaterial?(e.pbrMetallicRoughness.metallicFactor=t.metalness,e.pbrMetallicRoughness.roughnessFactor=t.roughness):t.isMeshBasicMaterial?(e.pbrMetallicRoughness.metallicFactor=0,e.pbrMetallicRoughness.roughnessFactor=.9):(e.pbrMetallicRoughness.metallicFactor=.5,e.pbrMetallicRoughness.roughnessFactor=.5),(t.metalnessMap||t.roughnessMap)&&(t.metalnessMap===t.roughnessMap?e.pbrMetallicRoughness.metallicRoughnessTexture={index:x(t.metalnessMap)}:console.warn("THREE.GLTFExporter: Ignoring metalnessMap and roughnessMap because they are not the same Texture.")),t.map&&(e.pbrMetallicRoughness.baseColorTexture={index:x(t.map)}),t.isMeshBasicMaterial||t.isLineBasicMaterial||t.isPointsMaterial);else{var i=t.emissive.clone().multiplyScalar(t.emissiveIntensity).toArray();v(i,[0,0,0])||(e.emissiveFactor=i),t.emissiveMap&&(e.emissiveTexture={index:x(t.emissiveMap)})}t.normalMap&&(e.normalTexture={index:x(t.normalMap)},-1!==t.normalScale.x&&(t.normalScale.x!==t.normalScale.y&&console.warn("THREE.GLTFExporter: Normal scale components are different, ignoring Y and exporting X."),e.normalTexture.scale=t.normalScale.x)),t.aoMap&&(e.occlusionTexture={index:x(t.aoMap)},1!==t.aoMapIntensity&&(e.occlusionTexture.strength=t.aoMapIntensity)),(t.transparent||t.alphaTest>0)&&(e.alphaMode=t.opacity<1?"BLEND":"MASK",t.alphaTest>0&&.5!==t.alphaTest&&(e.alphaCutoff=t.alphaTest)),t.side===r.DoubleSide&&(e.doubleSided=!0),""!==t.name&&(e.name=t.name),Object.keys(t.userData).length>0&&(e.extras=_(t)),u.materials.push(e);var o=u.materials.length-1;return m.materials.set(t,o),o}function S(t,e){u.animations||(u.animations=[]);for(var i=[],o=[],a=0;a<t.tracks.length;++a){var s=t.tracks[a],l=r.PropertyBinding.parseTrackName(s.name),c=r.PropertyBinding.findNode(e,l.nodeName),h=n[l.propertyName];if("bones"===l.objectName&&(c=!0===c.isSkinnedMesh?c.skeleton.getBoneByName(l.objectIndex):void 0),!c||!h)return console.warn('THREE.GLTFExporter: Could not export animation track "%s".',s.name),null;var p,f=s.values.length/s.times.length;if(h===n.morphTargetInfluences){if(1!==c.morphTargetInfluences.length&&void 0!==l.propertyIndex){console.warn('THREE.GLTFExporter: Skipping animation track "%s". Morph target keyframe tracks must target all available morph targets for the given mesh.',s.name);continue}f/=c.morphTargetInfluences.length}!0===s.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline?(p="CUBICSPLINE",f/=3):p=s.getInterpolation()===r.InterpolateDiscrete?"STEP":"LINEAR",o.push({input:w(new r.BufferAttribute(s.times,1)),output:w(new r.BufferAttribute(s.values,f)),interpolation:p}),i.push({sampler:o.length-1,target:{node:d.get(c),path:h}})}return u.animations.push({name:t.name||"clip_"+u.animations.length,samplers:o,channels:i}),u.animations.length-1}function T(t){var e=u.nodes[d.get(t)],n=t.skeleton,i=t.skeleton.bones[0];if(void 0===i)return null;for(var o=[],a=new Float32Array(16*n.bones.length),s=0;s<n.bones.length;++s)o.push(d.get(n.bones[s])),n.boneInverses[s].toArray(a,16*s);return void 0===u.skins&&(u.skins=[]),u.skins.push({inverseBindMatrices:w(new r.BufferAttribute(a,16)),joints:o,skeleton:d.get(i)}),e.skin=u.skins.length-1}function M(e){if(e.isLight)return console.warn("GLTFExporter: Unsupported node type:",e.constructor.name),null;u.nodes||(u.nodes=[]);var n={};if(a.trs){var i=e.quaternion.toArray(),o=e.position.toArray(),s=e.scale.toArray();v(i,[0,0,0,1])||(n.rotation=i),v(o,[0,0,0])||(n.translation=o),v(s,[1,1,1])||(n.scale=s)}else e.updateMatrix(),v(e.matrix.elements,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])||(n.matrix=e.matrix.elements);if(""!==e.name&&(n.name=String(e.name)),e.userData&&Object.keys(e.userData).length>0&&(n.extras=_(e)),e.isMesh||e.isLine||e.isPoints){var l=function(e){var n,i=e.geometry;if(e.isLineSegments)n=t.LINES;else if(e.isLineLoop)n=t.LINE_LOOP;else if(e.isLine)n=t.LINE_STRIP;else if(e.isPoints)n=t.POINTS;else{if(!i.isBufferGeometry){var o=new r.BufferGeometry;o.fromGeometry(i),i=o}e.drawMode===r.TriangleFanDrawMode?(console.warn("GLTFExporter: TriangleFanDrawMode and wireframe incompatible."),n=t.TRIANGLE_FAN):n=e.drawMode===r.TriangleStripDrawMode?e.material.wireframe?t.LINE_STRIP:t.TRIANGLE_STRIP:e.material.wireframe?t.LINES:t.TRIANGLES}var s={},l={},c=[],h=[],d={uv:"TEXCOORD_0",uv2:"TEXCOORD_1",color:"COLOR_0",skinWeight:"WEIGHTS_0",skinIndex:"JOINTS_0"},p=i.getAttribute("normal");for(var f in void 0===p||function(t){if(m.attributes.has(t))return!1;for(var e=new r.Vector3,n=0,i=t.count;n<i;n++)if(Math.abs(e.fromArray(t.array,3*n).length()-1)>5e-4)return!1;return!0}(p)||(console.warn("THREE.GLTFExporter: Creating normalized normal attribute from the non-normalized one."),i.addAttribute("normal",function(t){if(m.attributes.has(t))return m.attributes.get(t);for(var e=t.clone(),n=new r.Vector3,i=0,o=e.count;i<o;i++)n.fromArray(e.array,3*i),0===n.x&&0===n.y&&0===n.z?n.setX(1):n.normalize(),n.toArray(e.array,3*i);return m.attributes.set(t,e),e}(p))),i.attributes){var v=i.attributes[f];f=d[f]||f.toUpperCase();var g=v.array;if("JOINTS_0"!==f||g instanceof Uint16Array||g instanceof Uint8Array||(console.warn('GLTFExporter: Attribute "skinIndex" converted to type UNSIGNED_SHORT.'),v=new r.BufferAttribute(new Uint16Array(g),v.itemSize,v.normalized)),"MORPH"!==f.substr(0,5)){var y=w(v,i);null!==y&&(l[f]=y)}}if(void 0!==p&&i.addAttribute("normal",p),0===Object.keys(l).length)return null;if(void 0!==e.morphTargetInfluences&&e.morphTargetInfluences.length>0){var b=[],x=[],S={};if(void 0!==e.morphTargetDictionary)for(var T in e.morphTargetDictionary)S[e.morphTargetDictionary[T]]=T;for(var M=0;M<e.morphTargetInfluences.length;++M){var C={},A=!1;for(var f in i.morphAttributes)if("position"===f||"normal"===f){for(var P=i.attributes[f],O=(v=i.morphAttributes[f][M]).clone(),R=0,L=v.count;R<L;R++)O.setXYZ(R,v.getX(R)-P.getX(R),v.getY(R)-P.getY(R),v.getZ(R)-P.getZ(R));C[f.toUpperCase()]=w(O,i)}else A||(console.warn("GLTFExporter: Only POSITION and NORMAL morph are supported."),A=!0);h.push(C),b.push(e.morphTargetInfluences[M]),void 0!==e.morphTargetDictionary&&x.push(S[M])}s.weights=b,x.length>0&&(s.extras={},s.extras.targetNames=x)}var I=Object.keys(i.userData).length>0?_(i):void 0,N=a.forceIndices,D=Array.isArray(e.material);if(D&&0===i.groups.length)return null;!N&&null===i.index&&D&&(console.warn("THREE.GLTFExporter: Creating index for non-indexed multi-material mesh."),N=!0);var k=!1;if(null===i.index&&N){for(var F=[],j=(M=0,i.attributes.position.count);M<j;M++)F[M]=M;i.setIndex(F),k=!0}var U=D?e.material:[e.material],B=D?i.groups:[{materialIndex:0,start:void 0,count:void 0}];for(M=0,j=B.length;M<j;M++){var G={mode:n,attributes:l};I&&(G.extras=I),h.length>0&&(G.targets=h),null!==i.index&&(G.indices=w(i.index,i,B[M].start,B[M].count));var V=E(U[B[M].materialIndex]);null!==V&&(G.material=V),c.push(G)}return k&&i.setIndex(null),s.primitives=c,u.meshes||(u.meshes=[]),u.meshes.push(s),u.meshes.length-1}(e);null!==l&&(n.mesh=l)}else e.isCamera&&(n.camera=function(t){u.cameras||(u.cameras=[]);var e=t.isOrthographicCamera,n={type:e?"orthographic":"perspective"};return e?n.orthographic={xmag:2*t.right,ymag:2*t.top,zfar:t.far<=0?.001:t.far,znear:t.near<0?0:t.near}:n.perspective={aspectRatio:t.aspect,yfov:r.Math.degToRad(t.fov)/t.aspect,zfar:t.far<=0?.001:t.far,znear:t.near<0?0:t.near},""!==t.name&&(n.name=t.type),u.cameras.push(n),u.cameras.length-1}(e));if(e.isSkinnedMesh&&p.push(e),e.children.length>0){for(var c=[],h=0,f=e.children.length;h<f;h++){var g=e.children[h];if(g.visible||!1===a.onlyVisible){var y=M(g);null!==y&&c.push(y)}}c.length>0&&(n.children=c)}u.nodes.push(n);var b=u.nodes.length-1;return d.set(e,b),b}function C(t){u.scenes||(u.scenes=[],u.scene=0);var e={nodes:[]};""!==t.name&&(e.name=t.name),u.scenes.push(e);for(var n=[],r=0,i=t.children.length;r<i;r++){var o=t.children[r];if(o.visible||!1===a.onlyVisible){var s=M(o);null!==s&&n.push(s)}}n.length>0&&(e.nodes=n)}!function(t){t=t instanceof Array?t:[t];for(var e=[],n=0;n<t.length;n++)t[n]instanceof r.Scene?C(t[n]):e.push(t[n]);for(e.length>0&&function(t){var e=new r.Scene;e.name="AuxScene";for(var n=0;n<t.length;n++)e.children.push(t[n]);C(e)}(e),n=0;n<p.length;++n)T(p[n]);for(n=0;n<a.animations.length;++n)S(a.animations[n],t[0])}(i),Promise.all(h).then(function(){var t=new Blob(c,{type:"application/octet-stream"}),e=Object.keys(f);if(e.length>0&&(u.extensionsUsed=e),u.buffers&&u.buffers.length>0){u.buffers[0].byteLength=t.size;var n=new window.FileReader;!0===a.binary?(n.readAsArrayBuffer(t),n.onloadend=function(){var t=y(n.result),e=new DataView(new ArrayBuffer(8));e.setUint32(0,t.byteLength,!0),e.setUint32(4,5130562,!0);var r=y(function(t){if(void 0!==window.TextEncoder)return(new TextEncoder).encode(t).buffer;for(var e=new Uint8Array(new ArrayBuffer(t.length)),n=0,r=t.length;n<r;n++){var i=t.charCodeAt(n);e[n]=i>255?32:i}return e.buffer}(JSON.stringify(u)),32),i=new DataView(new ArrayBuffer(8));i.setUint32(0,r.byteLength,!0),i.setUint32(4,1313821514,!0);var a=new ArrayBuffer(12),s=new DataView(a);s.setUint32(0,1179937895,!0),s.setUint32(4,2,!0),s.setUint32(8,12+i.byteLength+r.byteLength+e.byteLength+t.byteLength,!0);var l=new Blob([a,i,r,e,t],{type:"application/octet-stream"}),c=new window.FileReader;c.readAsArrayBuffer(l),c.onloadend=function(){o(c.result)}}):(n.readAsDataURL(t),n.onloadend=function(){u.buffers[0].uri=n.result,o(u)})}else o(u)})}},i}();t.exports=i},"Tox+":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("0kFh"),i=n("0kFh"),o=n("q1Ft"),a=n("XLUM"),s=n("Mom/"),u=n("h6Fy");e.WriteTree=function(){function t(){this.visibleWrites_=a.CompoundWrite.Empty,this.allWrites_=[],this.lastWriteId_=-1}return t.prototype.childWrites=function(t){return new l(t,this)},t.prototype.addOverwrite=function(t,e,n,r){i.assert(n>this.lastWriteId_,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),this.allWrites_.push({path:t,snap:e,writeId:n,visible:r}),r&&(this.visibleWrites_=this.visibleWrites_.addWrite(t,e)),this.lastWriteId_=n},t.prototype.addMerge=function(t,e,n){i.assert(n>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:t,children:e,writeId:n,visible:!0}),this.visibleWrites_=this.visibleWrites_.addWrites(t,e),this.lastWriteId_=n},t.prototype.getWrite=function(t){for(var e=0;e<this.allWrites_.length;e++){var n=this.allWrites_[e];if(n.writeId===t)return n}return null},t.prototype.removeWrite=function(t){var e=this,n=this.allWrites_.findIndex(function(e){return e.writeId===t});i.assert(n>=0,"removeWrite called with nonexistent writeId.");var o=this.allWrites_[n];this.allWrites_.splice(n,1);for(var a=o.visible,s=!1,u=this.allWrites_.length-1;a&&u>=0;){var l=this.allWrites_[u];l.visible&&(u>=n&&this.recordContainsPath_(l,o.path)?a=!1:o.path.contains(l.path)&&(s=!0)),u--}return!!a&&(s?(this.resetTree_(),!0):(o.snap?this.visibleWrites_=this.visibleWrites_.removeWrite(o.path):r.forEach(o.children,function(t){e.visibleWrites_=e.visibleWrites_.removeWrite(o.path.child(t))}),!0))},t.prototype.getCompleteWriteData=function(t){return this.visibleWrites_.getCompleteNode(t)},t.prototype.calcCompleteEventCache=function(e,n,r,i){if(r||i){var a=this.visibleWrites_.childCompoundWrite(e);return!i&&a.isEmpty()?n:i||null!=n||a.hasCompleteWrite(o.Path.Empty)?t.layerTree_(this.allWrites_,function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(t.path.contains(e)||e.contains(t.path))},e).apply(n||u.ChildrenNode.EMPTY_NODE):null}var s=this.visibleWrites_.getCompleteNode(e);if(null!=s)return s;var l=this.visibleWrites_.childCompoundWrite(e);return l.isEmpty()?n:null!=n||l.hasCompleteWrite(o.Path.Empty)?l.apply(n||u.ChildrenNode.EMPTY_NODE):null},t.prototype.calcCompleteEventChildren=function(t,e){var n=u.ChildrenNode.EMPTY_NODE,r=this.visibleWrites_.getCompleteNode(t);if(r)return r.isLeafNode()||r.forEachChild(s.PRIORITY_INDEX,function(t,e){n=n.updateImmediateChild(t,e)}),n;if(e){var i=this.visibleWrites_.childCompoundWrite(t);return e.forEachChild(s.PRIORITY_INDEX,function(t,e){var r=i.childCompoundWrite(new o.Path(t)).apply(e);n=n.updateImmediateChild(t,r)}),i.getCompleteChildren().forEach(function(t){n=n.updateImmediateChild(t.name,t.node)}),n}return this.visibleWrites_.childCompoundWrite(t).getCompleteChildren().forEach(function(t){n=n.updateImmediateChild(t.name,t.node)}),n},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n,r){i.assert(n||r,"Either existingEventSnap or existingServerSnap must exist");var o=t.child(e);if(this.visibleWrites_.hasCompleteWrite(o))return null;var a=this.visibleWrites_.childCompoundWrite(o);return a.isEmpty()?r.getChild(e):a.apply(r.getChild(e))},t.prototype.calcCompleteChild=function(t,e,n){var r=t.child(e),i=this.visibleWrites_.getCompleteNode(r);return null!=i?i:n.isCompleteForChild(e)?this.visibleWrites_.childCompoundWrite(r).apply(n.getNode().getImmediateChild(e)):null},t.prototype.shadowingWrite=function(t){return this.visibleWrites_.getCompleteNode(t)},t.prototype.calcIndexedSlice=function(t,e,n,r,i,a){var s,u=this.visibleWrites_.childCompoundWrite(t),l=u.getCompleteNode(o.Path.Empty);if(null!=l)s=l;else{if(null==e)return[];s=u.apply(e)}if((s=s.withIndex(a)).isEmpty()||s.isLeafNode())return[];for(var c=[],h=a.getCompare(),d=i?s.getReverseIteratorFrom(n,a):s.getIteratorFrom(n,a),p=d.getNext();p&&c.length<r;)0!==h(p,n)&&c.push(p),p=d.getNext();return c},t.prototype.recordContainsPath_=function(t,e){return t.snap?t.path.contains(e):!!r.findKey(t.children,function(n,r){return t.path.child(r).contains(e)})},t.prototype.resetTree_=function(){this.visibleWrites_=t.layerTree_(this.allWrites_,t.DefaultFilter_,o.Path.Empty),this.lastWriteId_=this.allWrites_.length>0?this.allWrites_[this.allWrites_.length-1].writeId:-1},t.DefaultFilter_=function(t){return t.visible},t.layerTree_=function(t,e,n){for(var s=a.CompoundWrite.Empty,u=0;u<t.length;++u){var l=t[u];if(e(l)){var c=l.path,h=void 0;if(l.snap)n.contains(c)?(h=o.Path.relativePath(n,c),s=s.addWrite(h,l.snap)):c.contains(n)&&(h=o.Path.relativePath(c,n),s=s.addWrite(o.Path.Empty,l.snap.getChild(h)));else{if(!l.children)throw i.assertionError("WriteRecord should have .snap or .children");if(n.contains(c))h=o.Path.relativePath(n,c),s=s.addWrites(h,l.children);else if(c.contains(n))if((h=o.Path.relativePath(c,n)).isEmpty())s=s.addWrites(o.Path.Empty,l.children);else{var d=r.safeGet(l.children,h.getFront());if(d){var p=d.getChild(h.popFront());s=s.addWrite(o.Path.Empty,p)}}}}}return s},t}();var l=function(){function t(t,e){this.treePath_=t,this.writeTree_=e}return t.prototype.calcCompleteEventCache=function(t,e,n){return this.writeTree_.calcCompleteEventCache(this.treePath_,t,e,n)},t.prototype.calcCompleteEventChildren=function(t){return this.writeTree_.calcCompleteEventChildren(this.treePath_,t)},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,t,e,n)},t.prototype.shadowingWrite=function(t){return this.writeTree_.shadowingWrite(this.treePath_.child(t))},t.prototype.calcIndexedSlice=function(t,e,n,r,i){return this.writeTree_.calcIndexedSlice(this.treePath_,t,e,n,r,i)},t.prototype.calcCompleteChild=function(t,e){return this.writeTree_.calcCompleteChild(this.treePath_,t,e)},t.prototype.child=function(e){return new t(this.treePath_.child(e),this.writeTree_)},t}();e.WriteTreeRef=l},Twyb:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("W1I6");e.NAME_ONLY_COMPARATOR=function(t,e){return r.nameCompare(t.name,e.name)},e.NAME_COMPARATOR=function(t,e){return r.nameCompare(t,e)}},ULIu:function(t,e,n){var r=function(){if("undefined"!=typeof global)return global;if("undefined"!=typeof window)return window;if("undefined"!=typeof self)return self;throw new Error("unable to locate global object")}();"undefined"==typeof Promise&&(r.Promise=Promise=n("6PkL"))},UR0p:function(t,e,n){"use strict";var r=n("mrSG"),i=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r.pending=!1,r}return r.__extends(e,t),e.prototype.schedule=function(t,e){if(void 0===e&&(e=0),this.closed)return this;this.state=t;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this},e.prototype.requestAsyncId=function(t,e,n){return void 0===n&&(n=0),setInterval(t.flush.bind(t,this),n)},e.prototype.recycleAsyncId=function(t,e,n){if(void 0===n&&(n=0),null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)},e.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,e){var n=!1,r=void 0;try{this.work(t)}catch(t){n=!0,r=!!t&&t||new Error(t)}if(n)return this.unsubscribe(),r},e.prototype._unsubscribe=function(){var t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null},e}(function(t){function e(e,n){return t.call(this)||this}return r.__extends(e,t),e.prototype.schedule=function(t,e){return void 0===e&&(e=0),this},e}(n("pugT").a)),o=n("siIJ"),a=function(t){function e(n,r){void 0===r&&(r=o.Scheduler.now);var i=t.call(this,n,function(){return e.delegate&&e.delegate!==i?e.delegate.now():r()})||this;return i.actions=[],i.active=!1,i.scheduled=void 0,i}return r.__extends(e,t),e.prototype.schedule=function(n,r,i){return void 0===r&&(r=0),e.delegate&&e.delegate!==this?e.delegate.schedule(n,r,i):t.prototype.schedule.call(this,n,r,i)},e.prototype.flush=function(t){var e=this.actions;if(this.active)e.push(t);else{var n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}},e}(o.Scheduler);n.d(e,"VirtualTimeScheduler",function(){return s}),n.d(e,"VirtualAction",function(){return u});var s=function(t){function e(e,n){void 0===e&&(e=u),void 0===n&&(n=Number.POSITIVE_INFINITY);var r=t.call(this,e,function(){return r.frame})||this;return r.maxFrames=n,r.frame=0,r.index=-1,r}return r.__extends(e,t),e.prototype.flush=function(){for(var t,e,n=this.actions,r=this.maxFrames;(e=n.shift())&&(this.frame=e.delay)<=r&&!(t=e.execute(e.state,e.delay)););if(t){for(;e=n.shift();)e.unsubscribe();throw t}},e.frameTimeFactor=10,e}(a),u=function(t){function e(e,n,r){void 0===r&&(r=e.index+=1);var i=t.call(this,e,n)||this;return i.scheduler=e,i.work=n,i.index=r,i.active=!0,i.index=e.index=r,i}return r.__extends(e,t),e.prototype.schedule=function(n,r){if(void 0===r&&(r=0),!this.id)return t.prototype.schedule.call(this,n,r);this.active=!1;var i=new e(this.scheduler,this.work);return this.add(i),i.schedule(n,r)},e.prototype.requestAsyncId=function(t,n,r){void 0===r&&(r=0),this.delay=t.frame+r;var i=t.actions;return i.push(this),i.sort(e.sortActions),!0},e.prototype.recycleAsyncId=function(t,e,n){void 0===n&&(n=0)},e.prototype._execute=function(e,n){if(!0===this.active)return t.prototype._execute.call(this,e,n)},e.sortActions=function(t,e){return t.delay===e.delay?t.index===e.index?0:t.index>e.index?1:-1:t.delay>e.delay?1:-1},e}(i)},UhcP:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("0kFh"),i=n("W1I6"),o=n("DwtJ"),a=n("h6Fy"),s=n("0kFh"),u=n("hOVL"),l=n("cywi"),c=n("tlNg"),h=n("RzhA"),d=n("eB1k"),p=n("q1Ft"),f=n("KcsV"),m=n("Tox+");e.SyncTree=function(){function t(t){this.listenProvider_=t,this.syncPointTree_=u.ImmutableTree.Empty,this.pendingWriteTree_=new m.WriteTree,this.tagToQueryMap_={},this.queryToTagMap_={}}return t.prototype.applyUserOverwrite=function(t,e,n,r){return this.pendingWriteTree_.addOverwrite(t,e,n,r),r?this.applyOperationToSyncPoints_(new d.Overwrite(h.OperationSource.User,t,e)):[]},t.prototype.applyUserMerge=function(t,e,n){this.pendingWriteTree_.addMerge(t,e,n);var r=u.ImmutableTree.fromObject(e);return this.applyOperationToSyncPoints_(new c.Merge(h.OperationSource.User,t,r))},t.prototype.ackUserWrite=function(t,e){void 0===e&&(e=!1);var n=this.pendingWriteTree_.getWrite(t);if(this.pendingWriteTree_.removeWrite(t)){var r=u.ImmutableTree.Empty;return null!=n.snap?r=r.set(p.Path.Empty,!0):s.forEach(n.children,function(t,e){r=r.set(new p.Path(t),e)}),this.applyOperationToSyncPoints_(new o.AckUserWrite(n.path,r,e))}return[]},t.prototype.applyServerOverwrite=function(t,e){return this.applyOperationToSyncPoints_(new d.Overwrite(h.OperationSource.Server,t,e))},t.prototype.applyServerMerge=function(t,e){var n=u.ImmutableTree.fromObject(e);return this.applyOperationToSyncPoints_(new c.Merge(h.OperationSource.Server,t,n))},t.prototype.applyListenComplete=function(t){return this.applyOperationToSyncPoints_(new l.ListenComplete(h.OperationSource.Server,t))},t.prototype.applyTaggedQueryOverwrite=function(e,n,r){var i=this.queryKeyForTag_(r);if(null!=i){var o=t.parseQueryKey_(i),a=o.path,s=o.queryId,u=p.Path.relativePath(a,e),l=new d.Overwrite(h.OperationSource.forServerTaggedQuery(s),u,n);return this.applyTaggedOperation_(a,l)}return[]},t.prototype.applyTaggedQueryMerge=function(e,n,r){var i=this.queryKeyForTag_(r);if(i){var o=t.parseQueryKey_(i),a=o.path,s=o.queryId,l=p.Path.relativePath(a,e),d=u.ImmutableTree.fromObject(n),f=new c.Merge(h.OperationSource.forServerTaggedQuery(s),l,d);return this.applyTaggedOperation_(a,f)}return[]},t.prototype.applyTaggedListenComplete=function(e,n){var r=this.queryKeyForTag_(n);if(r){var i=t.parseQueryKey_(r),o=i.path,a=i.queryId,s=p.Path.relativePath(o,e),u=new l.ListenComplete(h.OperationSource.forServerTaggedQuery(a),s);return this.applyTaggedOperation_(o,u)}return[]},t.prototype.addEventRegistration=function(e,n){var i=e.path,o=null,s=!1;this.syncPointTree_.foreachOnPath(i,function(t,e){var n=p.Path.relativePath(t,i);o=o||e.getCompleteServerCache(n),s=s||e.hasCompleteView()});var u,l=this.syncPointTree_.get(i);l?(s=s||l.hasCompleteView(),o=o||l.getCompleteServerCache(p.Path.Empty)):(l=new f.SyncPoint,this.syncPointTree_=this.syncPointTree_.set(i,l)),null!=o?u=!0:(u=!1,o=a.ChildrenNode.EMPTY_NODE,this.syncPointTree_.subtree(i).foreachChild(function(t,e){var n=e.getCompleteServerCache(p.Path.Empty);n&&(o=o.updateImmediateChild(t,n))}));var c=l.viewExistsForQuery(e);if(!c&&!e.getQueryParams().loadsAllData()){var h=t.makeQueryKey_(e);r.assert(!(h in this.queryToTagMap_),"View does not exist, but we have a tag");var d=t.getNextQueryTag_();this.queryToTagMap_[h]=d,this.tagToQueryMap_["_"+d]=h}var m=this.pendingWriteTree_.childWrites(i),v=l.addEventRegistration(e,n,m,o,u);if(!c&&!s){var g=l.viewForQuery(e);v=v.concat(this.setupListener_(e,g))}return v},t.prototype.removeEventRegistration=function(e,n,r){var i=this,o=e.path,a=this.syncPointTree_.get(o),s=[];if(a&&("default"===e.queryIdentifier()||a.viewExistsForQuery(e))){var u=a.removeEventRegistration(e,n,r);a.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(o));var l=u.removed;s=u.events;var c=-1!==l.findIndex(function(t){return t.getQueryParams().loadsAllData()}),h=this.syncPointTree_.findOnPath(o,function(t,e){return e.hasCompleteView()});if(c&&!h){var d=this.syncPointTree_.subtree(o);if(!d.isEmpty())for(var p=this.collectDistinctViewsForSubTree_(d),f=0;f<p.length;++f){var m=p[f],v=m.getQuery(),g=this.createListenerForView_(m);this.listenProvider_.startListening(t.queryForListening_(v),this.tagForQuery_(v),g.hashFn,g.onComplete)}}!h&&l.length>0&&!r&&(c?this.listenProvider_.stopListening(t.queryForListening_(e),null):l.forEach(function(e){var n=i.queryToTagMap_[t.makeQueryKey_(e)];i.listenProvider_.stopListening(t.queryForListening_(e),n)})),this.removeTags_(l)}return s},t.prototype.calcCompleteEventCache=function(t,e){var n=this.pendingWriteTree_,r=this.syncPointTree_.findOnPath(t,function(e,n){var r=p.Path.relativePath(e,t),i=n.getCompleteServerCache(r);if(i)return i});return n.calcCompleteEventCache(t,r,e,!0)},t.prototype.collectDistinctViewsForSubTree_=function(t){return t.fold(function(t,e,n){if(e&&e.hasCompleteView())return[e.getCompleteView()];var r=[];return e&&(r=e.getQueryViews()),s.forEach(n,function(t,e){r=r.concat(e)}),r})},t.prototype.removeTags_=function(e){for(var n=0;n<e.length;++n){var r=e[n];if(!r.getQueryParams().loadsAllData()){var i=t.makeQueryKey_(r),o=this.queryToTagMap_[i];delete this.queryToTagMap_[i],delete this.tagToQueryMap_["_"+o]}}},t.queryForListening_=function(t){return t.getQueryParams().loadsAllData()&&!t.getQueryParams().isDefault()?t.getRef():t},t.prototype.setupListener_=function(e,n){var i=e.path,o=this.tagForQuery_(e),a=this.createListenerForView_(n),u=this.listenProvider_.startListening(t.queryForListening_(e),o,a.hashFn,a.onComplete),l=this.syncPointTree_.subtree(i);if(o)r.assert(!l.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var c=l.fold(function(t,e,n){if(!t.isEmpty()&&e&&e.hasCompleteView())return[e.getCompleteView().getQuery()];var r=[];return e&&(r=r.concat(e.getQueryViews().map(function(t){return t.getQuery()}))),s.forEach(n,function(t,e){r=r.concat(e)}),r}),h=0;h<c.length;++h){var d=c[h];this.listenProvider_.stopListening(t.queryForListening_(d),this.tagForQuery_(d))}return u},t.prototype.createListenerForView_=function(t){var e=this,n=t.getQuery(),r=this.tagForQuery_(n);return{hashFn:function(){return(t.getServerCache()||a.ChildrenNode.EMPTY_NODE).hash()},onComplete:function(t){if("ok"===t)return r?e.applyTaggedListenComplete(n.path,r):e.applyListenComplete(n.path);var o=i.errorForServerCode(t,n);return e.removeEventRegistration(n,null,o)}}},t.makeQueryKey_=function(t){return t.path.toString()+"$"+t.queryIdentifier()},t.parseQueryKey_=function(t){var e=t.indexOf("$");return r.assert(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new p.Path(t.substr(0,e))}},t.prototype.queryKeyForTag_=function(t){return this.tagToQueryMap_["_"+t]},t.prototype.tagForQuery_=function(e){var n=t.makeQueryKey_(e);return s.safeGet(this.queryToTagMap_,n)},t.getNextQueryTag_=function(){return t.nextQueryTag_++},t.prototype.applyTaggedOperation_=function(t,e){var n=this.syncPointTree_.get(t);r.assert(n,"Missing sync point for query tag that we're tracking");var i=this.pendingWriteTree_.childWrites(t);return n.applyOperation(e,i,null)},t.prototype.applyOperationToSyncPoints_=function(t){return this.applyOperationHelper_(t,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(p.Path.Empty))},t.prototype.applyOperationHelper_=function(t,e,n,r){if(t.path.isEmpty())return this.applyOperationDescendantsHelper_(t,e,n,r);var i=e.get(p.Path.Empty);null==n&&null!=i&&(n=i.getCompleteServerCache(p.Path.Empty));var o=[],a=t.path.getFront(),s=t.operationForChild(a),u=e.children.get(a);if(u&&s){var l=n?n.getImmediateChild(a):null,c=r.child(a);o=o.concat(this.applyOperationHelper_(s,u,l,c))}return i&&(o=o.concat(i.applyOperation(t,r,n))),o},t.prototype.applyOperationDescendantsHelper_=function(t,e,n,r){var i=this,o=e.get(p.Path.Empty);null==n&&null!=o&&(n=o.getCompleteServerCache(p.Path.Empty));var a=[];return e.children.inorderTraversal(function(e,o){var s=n?n.getImmediateChild(e):null,u=r.child(e),l=t.operationForChild(e);l&&(a=a.concat(i.applyOperationDescendantsHelper_(l,o,s,u)))}),o&&(a=a.concat(o.applyOperation(t,r,n))),a},t.nextQueryTag_=1,t}()},"V9+g":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CONSTANTS={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"}},VNr4:function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("mrSG"),i=n("6blF"),o=n("isby"),a=n("G5J1"),s=n("zotm"),u=n("MGBS"),l=n("67Y/");function c(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return"function"==typeof e[e.length-1]&&(t=e.pop()),1===e.length&&Object(o.a)(e[0])&&(e=e[0]),0===e.length?a.a:t?c(e).pipe(Object(l.a)(function(e){return t.apply(void 0,e)})):new i.a(function(t){return new h(t,e)})}var h=function(t){function e(e,n){var r=t.call(this,e)||this;r.sources=n,r.completed=0,r.haveValues=0;var i=n.length;r.values=new Array(i);for(var o=0;o<i;o++){var a=n[o],u=Object(s.a)(r,a,null,o);u&&r.add(u)}return r}return r.__extends(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.values[n]=e,i._hasValue||(i._hasValue=!0,this.haveValues++)},e.prototype.notifyComplete=function(t){var e=this.destination,n=this.haveValues,r=this.values,i=r.length;t._hasValue?(this.completed++,this.completed===i&&(n===i&&e.next(r),e.complete())):e.complete()},e}(u.a)},"VnD/":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("mrSG"),i=n("FFOo");function o(t,e){return function(n){return n.lift(new a(t,e))}}var a=function(){function t(t,e){this.predicate=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new s(t,this.predicate,this.thisArg))},t}(),s=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.predicate=n,i.thisArg=r,i.count=0,i}return r.__extends(e,t),e.prototype._next=function(t){var e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}e&&this.destination.next(t)},e}(i.a)},W0Ae:function(t,e,n){"use strict";n.r(e),n.d(e,"race",function(){return u}),n.d(e,"RaceOperator",function(){return l}),n.d(e,"RaceSubscriber",function(){return c});var r=n("mrSG"),i=n("isby"),o=n("IUTb"),a=n("MGBS"),s=n("zotm");function u(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(1===t.length){if(!Object(i.a)(t[0]))return t[0];t=t[0]}return Object(o.a)(t,void 0).lift(new l)}var l=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new c(t))},t}(),c=function(t){function e(e){var n=t.call(this,e)||this;return n.hasFirst=!1,n.observables=[],n.subscriptions=[],n}return r.__extends(e,t),e.prototype._next=function(t){this.observables.push(t)},e.prototype._complete=function(){var t=this.observables,e=t.length;if(0===e)this.destination.complete();else{for(var n=0;n<e&&!this.hasFirst;n++){var r=t[n],i=Object(s.a)(this,r,r,n);this.subscriptions&&this.subscriptions.push(i),this.add(i)}this.observables=null}},e.prototype.notifyNext=function(t,e,n,r,i){if(!this.hasFirst){this.hasFirst=!0;for(var o=0;o<this.subscriptions.length;o++)if(o!==n){var a=this.subscriptions[o];a.unsubscribe(),this.remove(a)}this.subscriptions=null}this.destination.next(e)},e}(a.a)},W1I6:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n("0kFh"),o=n("0kFh"),a=n("0kFh"),s=n("0kFh"),u=n("0kFh"),l=n("0kFh"),c=n("xHNN"),h=n("0kFh"),d=n("dHOi"),p=new d.Logger("@firebase/database");e.LUIDGenerator=(r=1,function(){return r++}),e.sha1=function(t){var e=u.stringToByteArray(t),n=new s.Sha1;n.update(e);var r=n.digest();return a.base64.encodeByteArray(r)};var f=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++)Array.isArray(t[r])||t[r]&&"object"==typeof t[r]&&"number"==typeof t[r].length?n+=f.apply(null,t[r]):n+="object"==typeof t[r]?l.stringify(t[r]):t[r],n+=" ";return n};e.logger=null;var m=!0;e.enableLogging=function(t,n){i.assert(!n||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(p.logLevel=d.LogLevel.VERBOSE,e.logger=p.log.bind(p),n&&c.SessionStorage.set("logging_enabled",!0)):"function"==typeof t?e.logger=t:(e.logger=null,c.SessionStorage.remove("logging_enabled"))},e.log=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(!0===m&&(m=!1,null===e.logger&&!0===c.SessionStorage.get("logging_enabled")&&e.enableLogging(!0)),e.logger){var r=f.apply(null,t);e.logger(r)}},e.logWrapper=function(t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];e.log.apply(void 0,[t].concat(n))}},e.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+f.apply(void 0,t);p.error(n)},e.fatal=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+f.apply(void 0,t);throw p.error(n),new Error(n)},e.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+f.apply(void 0,t);p.warn(n)},e.warnIfPageIsSecure=function(){"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&e.warn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},e.warnAboutUnsupportedMethod=function(t){e.warn(t+" is unsupported and will likely change soon.  Please do not use.")},e.isInvalidJSONNumber=function(t){return"number"==typeof t&&(t!=t||t==Number.POSITIVE_INFINITY||t==Number.NEGATIVE_INFINITY)},e.executeWhenDOMReady=function(t){if(h.isNodeSdk()||"complete"===document.readyState)t();else{var e=!1,n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}},e.MIN_NAME="[MIN_NAME]",e.MAX_NAME="[MAX_NAME]",e.nameCompare=function(t,n){if(t===n)return 0;if(t===e.MIN_NAME||n===e.MAX_NAME)return-1;if(n===e.MIN_NAME||t===e.MAX_NAME)return 1;var r=e.tryParseInt(t),i=e.tryParseInt(n);return null!==r?null!==i?r-i==0?t.length-n.length:r-i:-1:null!==i?1:t<n?-1:1},e.stringCompare=function(t,e){return t===e?0:t<e?-1:1},e.requireKey=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+l.stringify(e))},e.ObjectToUniqueKey=function(t){if("object"!=typeof t||null===t)return l.stringify(t);var n=[];for(var r in t)n.push(r);n.sort();for(var i="{",o=0;o<n.length;o++)0!==o&&(i+=","),i+=l.stringify(n[o]),i+=":",i+=e.ObjectToUniqueKey(t[n[o]]);return i+"}"},e.splitStringBySize=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)r.push(t.substring(i,i+e>n?n:i+e));return r},e.each=function(t,e){if(Array.isArray(t))for(var n=0;n<t.length;++n)e(n,t[n]);else o.forEach(t,function(t,n){return e(n,t)})},e.bindCallback=function(t,e){return e?t.bind(e):t},e.doubleToIEEE754String=function(t){var n,r,o,a,s,u,l;for(i.assert(!e.isInvalidJSONNumber(t),"Invalid JSON number"),0===t?(r=0,o=0,n=1/t==-1/0?1:0):(n=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(r=(a=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,o=Math.round(t*Math.pow(2,52-a)-Math.pow(2,52))):(r=0,o=Math.round(t/Math.pow(2,-1074)))),u=[],s=52;s;s-=1)u.push(o%2?1:0),o=Math.floor(o/2);for(s=11;s;s-=1)u.push(r%2?1:0),r=Math.floor(r/2);u.push(n?1:0),u.reverse(),l=u.join("");var c="";for(s=0;s<64;s+=8){var h=parseInt(l.substr(s,8),2).toString(16);1===h.length&&(h="0"+h),c+=h}return c.toLowerCase()},e.isChromeExtensionContentScript=function(){return!("object"!=typeof window||!window.chrome||!window.chrome.extension||/^chrome/.test(window.location.href))},e.isWindowsStoreApp=function(){return"object"==typeof Windows&&"object"==typeof Windows.UI},e.errorForServerCode=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"==t?n="Client doesn't have permission to access the desired data.":"unavailable"==t&&(n="The service is unavailable");var r=new Error(t+" at "+e.path.toString()+": "+n);return r.code=t.toUpperCase(),r},e.INTEGER_REGEXP_=new RegExp("^-?\\d{1,10}$"),e.tryParseInt=function(t){if(e.INTEGER_REGEXP_.test(t)){var n=Number(t);if(n>=-2147483648&&n<=2147483647)return n}return null},e.exceptionGuard=function(t){try{t()}catch(t){setTimeout(function(){throw e.warn("Exception was thrown by user callback.",t.stack||""),t},Math.floor(0))}},e.callUserCallback=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];"function"==typeof t&&e.exceptionGuard(function(){t.apply(void 0,n)})},e.beingCrawled=function(){return("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},e.exportPropGetter=function(t,e,n){Object.defineProperty(t,e,{get:n})},e.setTimeoutNonBlocking=function(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n}},W2ca:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.contains=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.safeGet=function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]},e.forEach=function(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])},e.extend=function(t,n){return e.forEach(n,function(e,n){t[e]=n}),t},e.clone=function(t){return e.extend({},t)},e.isNonNullObject=function(t){return"object"==typeof t&&null!==t},e.isEmpty=function(t){for(var e in t)return!1;return!0},e.getCount=function(t){var e=0;for(var n in t)e++;return e},e.map=function(t,e,n){var r={};for(var i in t)r[i]=e.call(n,t[i],i,t);return r},e.findKey=function(t,e,n){for(var r in t)if(e.call(n,t[r],r,t))return r},e.findValue=function(t,n,r){var i=e.findKey(t,n,r);return i&&t[i]},e.getAnyKey=function(t){for(var e in t)return e},e.getValues=function(t){var e=[],n=0;for(var r in t)e[n++]=t[r];return e},e.every=function(t,e){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&!e(n,t[n]))return!1;return!0}},Wb6W:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("FcJQ"),i=n("pWZ8"),o=n("h6Fy"),a=n("oUad"),s=n("7jcd"),u=n("jKXO"),l=n("0kFh"),c=n("RzhA"),h=n("G6nc"),d=n("Mom/");e.View=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n=this.query_.getQueryParams(),l=new r.IndexedFilter(n.getIndex()),c=n.getNodeFilter();this.processor_=new i.ViewProcessor(c);var h=e.getServerCache(),d=e.getEventCache(),p=l.updateFullNode(o.ChildrenNode.EMPTY_NODE,h.getNode(),null),f=c.updateFullNode(o.ChildrenNode.EMPTY_NODE,d.getNode(),null),m=new a.CacheNode(p,h.isFullyInitialized(),l.filtersNodes()),v=new a.CacheNode(f,d.isFullyInitialized(),c.filtersNodes());this.viewCache_=new s.ViewCache(v,m),this.eventGenerator_=new u.EventGenerator(this.query_)}return t.prototype.getQuery=function(){return this.query_},t.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},t.prototype.getCompleteServerCache=function(t){var e=this.viewCache_.getCompleteServerSnap();return e&&(this.query_.getQueryParams().loadsAllData()||!t.isEmpty()&&!e.getImmediateChild(t.getFront()).isEmpty())?e.getChild(t):null},t.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},t.prototype.addEventRegistration=function(t){this.eventRegistrations_.push(t)},t.prototype.removeEventRegistration=function(t,e){var n=[];if(e){l.assert(null==t,"A cancel should cancel all event registrations.");var r=this.query_.path;this.eventRegistrations_.forEach(function(t){var i=t.createCancelEvent(e=e,r);i&&n.push(i)})}if(t){for(var i=[],o=0;o<this.eventRegistrations_.length;++o){var a=this.eventRegistrations_[o];if(a.matches(t)){if(t.hasAnyCallback()){i=i.concat(this.eventRegistrations_.slice(o+1));break}}else i.push(a)}this.eventRegistrations_=i}else this.eventRegistrations_=[];return n},t.prototype.applyOperation=function(t,e,n){t.type===c.OperationType.MERGE&&null!==t.source.queryId&&(l.assert(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),l.assert(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var r=this.viewCache_,i=this.processor_.applyOperation(r,t,e,n);return this.processor_.assertIndexed(i.viewCache),l.assert(i.viewCache.getServerCache().isFullyInitialized()||!r.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=i.viewCache,this.generateEventsForChanges_(i.changes,i.viewCache.getEventCache().getNode(),null)},t.prototype.getInitialEvents=function(t){var e=this.viewCache_.getEventCache(),n=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(d.PRIORITY_INDEX,function(t,e){n.push(h.Change.childAddedChange(t,e))}),e.isFullyInitialized()&&n.push(h.Change.valueChange(e.getNode())),this.generateEventsForChanges_(n,e.getNode(),t)},t.prototype.generateEventsForChanges_=function(t,e,n){return this.eventGenerator_.generateEventsForChanges(t,e,n?[n]:this.eventRegistrations_)},t}()},Womt:function(t,e,n){"use strict";function r(){}n.r(e),n.d(e,"WebGLRenderTargetCube",function(){return fn}),n.d(e,"WebGLRenderTarget",function(){return pn}),n.d(e,"WebGLRenderer",function(){return to}),n.d(e,"ShaderLib",function(){return Rn}),n.d(e,"UniformsLib",function(){return On}),n.d(e,"UniformsUtils",function(){return Mn}),n.d(e,"ShaderChunk",function(){return bn}),n.d(e,"FogExp2",function(){return eo}),n.d(e,"Fog",function(){return no}),n.d(e,"Scene",function(){return ro}),n.d(e,"Sprite",function(){return so}),n.d(e,"LOD",function(){return uo}),n.d(e,"SkinnedMesh",function(){return lo}),n.d(e,"Skeleton",function(){return co}),n.d(e,"Bone",function(){return ho}),n.d(e,"Mesh",function(){return Ar}),n.d(e,"LineSegments",function(){return mo}),n.d(e,"LineLoop",function(){return vo}),n.d(e,"Line",function(){return fo}),n.d(e,"Points",function(){return yo}),n.d(e,"Group",function(){return Bi}),n.d(e,"VideoTexture",function(){return _o}),n.d(e,"DataTexture",function(){return mn}),n.d(e,"DataTexture3D",function(){return Rr}),n.d(e,"CompressedTexture",function(){return bo}),n.d(e,"CubeTexture",function(){return Or}),n.d(e,"CanvasTexture",function(){return wo}),n.d(e,"DepthTexture",function(){return xo}),n.d(e,"Texture",function(){return hn}),n.d(e,"AnimationLoader",function(){return ds}),n.d(e,"CompressedTextureLoader",function(){return ps}),n.d(e,"DataTextureLoader",function(){return fs}),n.d(e,"CubeTextureLoader",function(){return vs}),n.d(e,"TextureLoader",function(){return gs}),n.d(e,"ObjectLoader",function(){return nu}),n.d(e,"MaterialLoader",function(){return Js}),n.d(e,"BufferGeometryLoader",function(){return tu}),n.d(e,"DefaultLoadingManager",function(){return ls}),n.d(e,"LoadingManager",function(){return us}),n.d(e,"ImageLoader",function(){return ms}),n.d(e,"ImageBitmapLoader",function(){return hu}),n.d(e,"FontLoader",function(){return mu}),n.d(e,"FileLoader",function(){return hs}),n.d(e,"Loader",function(){return vu}),n.d(e,"LoaderUtils",function(){return $s}),n.d(e,"Cache",function(){return ss}),n.d(e,"AudioLoader",function(){return zu}),n.d(e,"SpotLightShadow",function(){return Hs}),n.d(e,"SpotLight",function(){return Ws}),n.d(e,"PointLight",function(){return qs}),n.d(e,"RectAreaLight",function(){return Qs}),n.d(e,"HemisphereLight",function(){return Vs}),n.d(e,"DirectionalLightShadow",function(){return Ys}),n.d(e,"DirectionalLight",function(){return Ks}),n.d(e,"AmbientLight",function(){return Zs}),n.d(e,"LightShadow",function(){return zs}),n.d(e,"Light",function(){return Gs}),n.d(e,"StereoCamera",function(){return Hu}),n.d(e,"PerspectiveCamera",function(){return Vi}),n.d(e,"OrthographicCamera",function(){return Xs}),n.d(e,"CubeCamera",function(){return Wu}),n.d(e,"ArrayCamera",function(){return zi}),n.d(e,"Camera",function(){return Gi}),n.d(e,"AudioListener",function(){return Xu}),n.d(e,"PositionalAudio",function(){return Ku}),n.d(e,"AudioContext",function(){return Vu}),n.d(e,"AudioAnalyser",function(){return Zu}),n.d(e,"Audio",function(){return Yu}),n.d(e,"VectorKeyframeTrack",function(){return is}),n.d(e,"StringKeyframeTrack",function(){return rs}),n.d(e,"QuaternionKeyframeTrack",function(){return ns}),n.d(e,"NumberKeyframeTrack",function(){return ts}),n.d(e,"ColorKeyframeTrack",function(){return $a}),n.d(e,"BooleanKeyframeTrack",function(){return Ja}),n.d(e,"PropertyMixer",function(){return Qu}),n.d(e,"PropertyBinding",function(){return $u}),n.d(e,"KeyframeTrack",function(){return Qa}),n.d(e,"AnimationUtils",function(){return qa}),n.d(e,"AnimationObjectGroup",function(){return tl}),n.d(e,"AnimationMixer",function(){return nl}),n.d(e,"AnimationClip",function(){return os}),n.d(e,"Uniform",function(){return rl}),n.d(e,"InstancedBufferGeometry",function(){return il}),n.d(e,"BufferGeometry",function(){return or}),n.d(e,"Geometry",function(){return Wn}),n.d(e,"InterleavedBufferAttribute",function(){return oo}),n.d(e,"InstancedInterleavedBuffer",function(){return ol}),n.d(e,"InterleavedBuffer",function(){return io}),n.d(e,"InstancedBufferAttribute",function(){return al}),n.d(e,"Face3",function(){return In}),n.d(e,"Object3D",function(){return Gn}),n.d(e,"Raycaster",function(){return sl}),n.d(e,"Layers",function(){return Dn}),n.d(e,"EventDispatcher",function(){return r}),n.d(e,"Clock",function(){return qu}),n.d(e,"QuaternionLinearInterpolant",function(){return es}),n.d(e,"LinearInterpolant",function(){return Ka}),n.d(e,"DiscreteInterpolant",function(){return Za}),n.d(e,"CubicInterpolant",function(){return Ya}),n.d(e,"Interpolant",function(){return Xa}),n.d(e,"Triangle",function(){return Mr}),n.d(e,"Math",function(){return Qe}),n.d(e,"Spherical",function(){return cl}),n.d(e,"Cylindrical",function(){return hl}),n.d(e,"Plane",function(){return yn}),n.d(e,"Frustum",function(){return _n}),n.d(e,"Sphere",function(){return gn}),n.d(e,"Ray",function(){return Tr}),n.d(e,"Matrix4",function(){return $e}),n.d(e,"Matrix3",function(){return nn}),n.d(e,"Box3",function(){return vn}),n.d(e,"Box2",function(){return dl}),n.d(e,"Line3",function(){return pl}),n.d(e,"Euler",function(){return Nn}),n.d(e,"Vector4",function(){return dn}),n.d(e,"Vector3",function(){return en}),n.d(e,"Vector2",function(){return Je}),n.d(e,"Quaternion",function(){return tn}),n.d(e,"Color",function(){return An}),n.d(e,"ImmediateRenderObject",function(){return fl}),n.d(e,"VertexNormalsHelper",function(){return ml}),n.d(e,"SpotLightHelper",function(){return vl}),n.d(e,"SkeletonHelper",function(){return gl}),n.d(e,"PointLightHelper",function(){return yl}),n.d(e,"RectAreaLightHelper",function(){return _l}),n.d(e,"HemisphereLightHelper",function(){return bl}),n.d(e,"GridHelper",function(){return wl}),n.d(e,"PolarGridHelper",function(){return xl}),n.d(e,"FaceNormalsHelper",function(){return El}),n.d(e,"DirectionalLightHelper",function(){return Sl}),n.d(e,"CameraHelper",function(){return Tl}),n.d(e,"BoxHelper",function(){return Ml}),n.d(e,"Box3Helper",function(){return Cl}),n.d(e,"PlaneHelper",function(){return Al}),n.d(e,"ArrowHelper",function(){return Pl}),n.d(e,"AxesHelper",function(){return Ol}),n.d(e,"Shape",function(){return Bs}),n.d(e,"Path",function(){return Us}),n.d(e,"ShapePath",function(){return du}),n.d(e,"Font",function(){return pu}),n.d(e,"CurvePath",function(){return js}),n.d(e,"Curve",function(){return ys}),n.d(e,"ImageUtils",function(){return ln}),n.d(e,"ShapeUtils",function(){return la}),n.d(e,"WebGLUtils",function(){return Ui}),n.d(e,"WireframeGeometry",function(){return Eo}),n.d(e,"ParametricGeometry",function(){return So}),n.d(e,"ParametricBufferGeometry",function(){return To}),n.d(e,"TetrahedronGeometry",function(){return Ao}),n.d(e,"TetrahedronBufferGeometry",function(){return Po}),n.d(e,"OctahedronGeometry",function(){return Oo}),n.d(e,"OctahedronBufferGeometry",function(){return Ro}),n.d(e,"IcosahedronGeometry",function(){return Lo}),n.d(e,"IcosahedronBufferGeometry",function(){return Io}),n.d(e,"DodecahedronGeometry",function(){return No}),n.d(e,"DodecahedronBufferGeometry",function(){return Do}),n.d(e,"PolyhedronGeometry",function(){return Mo}),n.d(e,"PolyhedronBufferGeometry",function(){return Co}),n.d(e,"TubeGeometry",function(){return ko}),n.d(e,"TubeBufferGeometry",function(){return Fo}),n.d(e,"TorusKnotGeometry",function(){return jo}),n.d(e,"TorusKnotBufferGeometry",function(){return Uo}),n.d(e,"TorusGeometry",function(){return Bo}),n.d(e,"TorusBufferGeometry",function(){return Go}),n.d(e,"TextGeometry",function(){return va}),n.d(e,"TextBufferGeometry",function(){return ga}),n.d(e,"SphereGeometry",function(){return ya}),n.d(e,"SphereBufferGeometry",function(){return _a}),n.d(e,"RingGeometry",function(){return ba}),n.d(e,"RingBufferGeometry",function(){return wa}),n.d(e,"PlaneGeometry",function(){return ur}),n.d(e,"PlaneBufferGeometry",function(){return lr}),n.d(e,"LatheGeometry",function(){return xa}),n.d(e,"LatheBufferGeometry",function(){return Ea}),n.d(e,"ShapeGeometry",function(){return Sa}),n.d(e,"ShapeBufferGeometry",function(){return Ta}),n.d(e,"ExtrudeGeometry",function(){return da}),n.d(e,"ExtrudeBufferGeometry",function(){return pa}),n.d(e,"EdgesGeometry",function(){return Ca}),n.d(e,"ConeGeometry",function(){return Oa}),n.d(e,"ConeBufferGeometry",function(){return Ra}),n.d(e,"CylinderGeometry",function(){return Aa}),n.d(e,"CylinderBufferGeometry",function(){return Pa}),n.d(e,"CircleGeometry",function(){return La}),n.d(e,"CircleBufferGeometry",function(){return Ia}),n.d(e,"BoxGeometry",function(){return ar}),n.d(e,"BoxBufferGeometry",function(){return sr}),n.d(e,"ShadowMaterial",function(){return Da}),n.d(e,"SpriteMaterial",function(){return ao}),n.d(e,"RawShaderMaterial",function(){return ka}),n.d(e,"ShaderMaterial",function(){return Sr}),n.d(e,"PointsMaterial",function(){return go}),n.d(e,"MeshPhysicalMaterial",function(){return ja}),n.d(e,"MeshStandardMaterial",function(){return Fa}),n.d(e,"MeshPhongMaterial",function(){return Ua}),n.d(e,"MeshToonMaterial",function(){return Ba}),n.d(e,"MeshNormalMaterial",function(){return Ga}),n.d(e,"MeshLambertMaterial",function(){return Va}),n.d(e,"MeshDepthMaterial",function(){return ki}),n.d(e,"MeshDistanceMaterial",function(){return Fi}),n.d(e,"MeshBasicMaterial",function(){return Cr}),n.d(e,"MeshMatcapMaterial",function(){return za}),n.d(e,"LineDashedMaterial",function(){return Ha}),n.d(e,"LineBasicMaterial",function(){return po}),n.d(e,"Material",function(){return Er}),n.d(e,"Float64BufferAttribute",function(){return er}),n.d(e,"Float32BufferAttribute",function(){return tr}),n.d(e,"Uint32BufferAttribute",function(){return $n}),n.d(e,"Int32BufferAttribute",function(){return Jn}),n.d(e,"Uint16BufferAttribute",function(){return Qn}),n.d(e,"Int16BufferAttribute",function(){return Zn}),n.d(e,"Uint8ClampedBufferAttribute",function(){return Kn}),n.d(e,"Uint8BufferAttribute",function(){return Yn}),n.d(e,"Int8BufferAttribute",function(){return Xn}),n.d(e,"BufferAttribute",function(){return qn}),n.d(e,"ArcCurve",function(){return bs}),n.d(e,"CatmullRomCurve3",function(){return Ms}),n.d(e,"CubicBezierCurve",function(){return Os}),n.d(e,"CubicBezierCurve3",function(){return Rs}),n.d(e,"EllipseCurve",function(){return _s}),n.d(e,"LineCurve",function(){return Ls}),n.d(e,"LineCurve3",function(){return Is}),n.d(e,"QuadraticBezierCurve",function(){return Ns}),n.d(e,"QuadraticBezierCurve3",function(){return Ds}),n.d(e,"SplineCurve",function(){return ks}),n.d(e,"REVISION",function(){return v}),n.d(e,"MOUSE",function(){return g}),n.d(e,"CullFaceNone",function(){return y}),n.d(e,"CullFaceBack",function(){return _}),n.d(e,"CullFaceFront",function(){return b}),n.d(e,"CullFaceFrontBack",function(){return w}),n.d(e,"FrontFaceDirectionCW",function(){return x}),n.d(e,"FrontFaceDirectionCCW",function(){return E}),n.d(e,"BasicShadowMap",function(){return S}),n.d(e,"PCFShadowMap",function(){return T}),n.d(e,"PCFSoftShadowMap",function(){return M}),n.d(e,"FrontSide",function(){return C}),n.d(e,"BackSide",function(){return A}),n.d(e,"DoubleSide",function(){return P}),n.d(e,"FlatShading",function(){return O}),n.d(e,"SmoothShading",function(){return R}),n.d(e,"NoColors",function(){return L}),n.d(e,"FaceColors",function(){return I}),n.d(e,"VertexColors",function(){return N}),n.d(e,"NoBlending",function(){return D}),n.d(e,"NormalBlending",function(){return k}),n.d(e,"AdditiveBlending",function(){return F}),n.d(e,"SubtractiveBlending",function(){return j}),n.d(e,"MultiplyBlending",function(){return U}),n.d(e,"CustomBlending",function(){return B}),n.d(e,"AddEquation",function(){return G}),n.d(e,"SubtractEquation",function(){return V}),n.d(e,"ReverseSubtractEquation",function(){return z}),n.d(e,"MinEquation",function(){return H}),n.d(e,"MaxEquation",function(){return W}),n.d(e,"ZeroFactor",function(){return q}),n.d(e,"OneFactor",function(){return X}),n.d(e,"SrcColorFactor",function(){return Y}),n.d(e,"OneMinusSrcColorFactor",function(){return K}),n.d(e,"SrcAlphaFactor",function(){return Z}),n.d(e,"OneMinusSrcAlphaFactor",function(){return Q}),n.d(e,"DstAlphaFactor",function(){return J}),n.d(e,"OneMinusDstAlphaFactor",function(){return $}),n.d(e,"DstColorFactor",function(){return tt}),n.d(e,"OneMinusDstColorFactor",function(){return et}),n.d(e,"SrcAlphaSaturateFactor",function(){return nt}),n.d(e,"NeverDepth",function(){return rt}),n.d(e,"AlwaysDepth",function(){return it}),n.d(e,"LessDepth",function(){return ot}),n.d(e,"LessEqualDepth",function(){return at}),n.d(e,"EqualDepth",function(){return st}),n.d(e,"GreaterEqualDepth",function(){return ut}),n.d(e,"GreaterDepth",function(){return lt}),n.d(e,"NotEqualDepth",function(){return ct}),n.d(e,"MultiplyOperation",function(){return ht}),n.d(e,"MixOperation",function(){return dt}),n.d(e,"AddOperation",function(){return pt}),n.d(e,"NoToneMapping",function(){return ft}),n.d(e,"LinearToneMapping",function(){return mt}),n.d(e,"ReinhardToneMapping",function(){return vt}),n.d(e,"Uncharted2ToneMapping",function(){return gt}),n.d(e,"CineonToneMapping",function(){return yt}),n.d(e,"ACESFilmicToneMapping",function(){return _t}),n.d(e,"UVMapping",function(){return bt}),n.d(e,"CubeReflectionMapping",function(){return wt}),n.d(e,"CubeRefractionMapping",function(){return xt}),n.d(e,"EquirectangularReflectionMapping",function(){return Et}),n.d(e,"EquirectangularRefractionMapping",function(){return St}),n.d(e,"SphericalReflectionMapping",function(){return Tt}),n.d(e,"CubeUVReflectionMapping",function(){return Mt}),n.d(e,"CubeUVRefractionMapping",function(){return Ct}),n.d(e,"RepeatWrapping",function(){return At}),n.d(e,"ClampToEdgeWrapping",function(){return Pt}),n.d(e,"MirroredRepeatWrapping",function(){return Ot}),n.d(e,"NearestFilter",function(){return Rt}),n.d(e,"NearestMipMapNearestFilter",function(){return Lt}),n.d(e,"NearestMipMapLinearFilter",function(){return It}),n.d(e,"LinearFilter",function(){return Nt}),n.d(e,"LinearMipMapNearestFilter",function(){return Dt}),n.d(e,"LinearMipMapLinearFilter",function(){return kt}),n.d(e,"UnsignedByteType",function(){return Ft}),n.d(e,"ByteType",function(){return jt}),n.d(e,"ShortType",function(){return Ut}),n.d(e,"UnsignedShortType",function(){return Bt}),n.d(e,"IntType",function(){return Gt}),n.d(e,"UnsignedIntType",function(){return Vt}),n.d(e,"FloatType",function(){return zt}),n.d(e,"HalfFloatType",function(){return Ht}),n.d(e,"UnsignedShort4444Type",function(){return Wt}),n.d(e,"UnsignedShort5551Type",function(){return qt}),n.d(e,"UnsignedShort565Type",function(){return Xt}),n.d(e,"UnsignedInt248Type",function(){return Yt}),n.d(e,"AlphaFormat",function(){return Kt}),n.d(e,"RGBFormat",function(){return Zt}),n.d(e,"RGBAFormat",function(){return Qt}),n.d(e,"LuminanceFormat",function(){return Jt}),n.d(e,"LuminanceAlphaFormat",function(){return $t}),n.d(e,"RGBEFormat",function(){return te}),n.d(e,"DepthFormat",function(){return ee}),n.d(e,"DepthStencilFormat",function(){return ne}),n.d(e,"RedFormat",function(){return re}),n.d(e,"RGB_S3TC_DXT1_Format",function(){return ie}),n.d(e,"RGBA_S3TC_DXT1_Format",function(){return oe}),n.d(e,"RGBA_S3TC_DXT3_Format",function(){return ae}),n.d(e,"RGBA_S3TC_DXT5_Format",function(){return se}),n.d(e,"RGB_PVRTC_4BPPV1_Format",function(){return ue}),n.d(e,"RGB_PVRTC_2BPPV1_Format",function(){return le}),n.d(e,"RGBA_PVRTC_4BPPV1_Format",function(){return ce}),n.d(e,"RGBA_PVRTC_2BPPV1_Format",function(){return he}),n.d(e,"RGB_ETC1_Format",function(){return de}),n.d(e,"RGBA_ASTC_4x4_Format",function(){return pe}),n.d(e,"RGBA_ASTC_5x4_Format",function(){return fe}),n.d(e,"RGBA_ASTC_5x5_Format",function(){return me}),n.d(e,"RGBA_ASTC_6x5_Format",function(){return ve}),n.d(e,"RGBA_ASTC_6x6_Format",function(){return ge}),n.d(e,"RGBA_ASTC_8x5_Format",function(){return ye}),n.d(e,"RGBA_ASTC_8x6_Format",function(){return _e}),n.d(e,"RGBA_ASTC_8x8_Format",function(){return be}),n.d(e,"RGBA_ASTC_10x5_Format",function(){return we}),n.d(e,"RGBA_ASTC_10x6_Format",function(){return xe}),n.d(e,"RGBA_ASTC_10x8_Format",function(){return Ee}),n.d(e,"RGBA_ASTC_10x10_Format",function(){return Se}),n.d(e,"RGBA_ASTC_12x10_Format",function(){return Te}),n.d(e,"RGBA_ASTC_12x12_Format",function(){return Me}),n.d(e,"LoopOnce",function(){return Ce}),n.d(e,"LoopRepeat",function(){return Ae}),n.d(e,"LoopPingPong",function(){return Pe}),n.d(e,"InterpolateDiscrete",function(){return Oe}),n.d(e,"InterpolateLinear",function(){return Re}),n.d(e,"InterpolateSmooth",function(){return Le}),n.d(e,"ZeroCurvatureEnding",function(){return Ie}),n.d(e,"ZeroSlopeEnding",function(){return Ne}),n.d(e,"WrapAroundEnding",function(){return De}),n.d(e,"TrianglesDrawMode",function(){return ke}),n.d(e,"TriangleStripDrawMode",function(){return Fe}),n.d(e,"TriangleFanDrawMode",function(){return je}),n.d(e,"LinearEncoding",function(){return Ue}),n.d(e,"sRGBEncoding",function(){return Be}),n.d(e,"GammaEncoding",function(){return Ge}),n.d(e,"RGBEEncoding",function(){return Ve}),n.d(e,"LogLuvEncoding",function(){return ze}),n.d(e,"RGBM7Encoding",function(){return He}),n.d(e,"RGBM16Encoding",function(){return We}),n.d(e,"RGBDEncoding",function(){return qe}),n.d(e,"BasicDepthPacking",function(){return Xe}),n.d(e,"RGBADepthPacking",function(){return Ye}),n.d(e,"TangentSpaceNormalMap",function(){return Ke}),n.d(e,"ObjectSpaceNormalMap",function(){return Ze}),n.d(e,"CubeGeometry",function(){return ar}),n.d(e,"Face4",function(){return Rl}),n.d(e,"LineStrip",function(){return Ll}),n.d(e,"LinePieces",function(){return Il}),n.d(e,"MeshFaceMaterial",function(){return Nl}),n.d(e,"MultiMaterial",function(){return Dl}),n.d(e,"PointCloud",function(){return kl}),n.d(e,"Particle",function(){return Fl}),n.d(e,"ParticleSystem",function(){return jl}),n.d(e,"PointCloudMaterial",function(){return Ul}),n.d(e,"ParticleBasicMaterial",function(){return Bl}),n.d(e,"ParticleSystemMaterial",function(){return Gl}),n.d(e,"Vertex",function(){return Vl}),n.d(e,"DynamicBufferAttribute",function(){return zl}),n.d(e,"Int8Attribute",function(){return Hl}),n.d(e,"Uint8Attribute",function(){return Wl}),n.d(e,"Uint8ClampedAttribute",function(){return ql}),n.d(e,"Int16Attribute",function(){return Xl}),n.d(e,"Uint16Attribute",function(){return Yl}),n.d(e,"Int32Attribute",function(){return Kl}),n.d(e,"Uint32Attribute",function(){return Zl}),n.d(e,"Float32Attribute",function(){return Ql}),n.d(e,"Float64Attribute",function(){return Jl}),n.d(e,"ClosedSplineCurve3",function(){return $l}),n.d(e,"SplineCurve3",function(){return tc}),n.d(e,"Spline",function(){return ec}),n.d(e,"AxisHelper",function(){return nc}),n.d(e,"BoundingBoxHelper",function(){return rc}),n.d(e,"EdgesHelper",function(){return ic}),n.d(e,"WireframeHelper",function(){return oc}),n.d(e,"XHRLoader",function(){return ac}),n.d(e,"BinaryTextureLoader",function(){return sc}),n.d(e,"GeometryUtils",function(){return uc}),n.d(e,"Projector",function(){return lc}),n.d(e,"CanvasRenderer",function(){return cc}),n.d(e,"JSONLoader",function(){return hc}),n.d(e,"SceneUtils",function(){return dc}),n.d(e,"LensFlare",function(){return pc}),void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Number.isInteger&&(Number.isInteger=function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t}),void 0===Math.sign&&(Math.sign=function(t){return t<0?-1:t>0?1:+t}),"name"in Function.prototype==0&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&(Object.assign=function(t){if(void 0===t||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var r=arguments[n];if(void 0!==r&&null!==r)for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}),Object.assign(r.prototype,{addEventListener:function(t,e){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[t]&&(n[t]=[]),-1===n[t].indexOf(e)&&n[t].push(e)},hasEventListener:function(t,e){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[t]&&-1!==n[t].indexOf(e)},removeEventListener:function(t,e){if(void 0!==this._listeners){var n=this._listeners[t];if(void 0!==n){var r=n.indexOf(e);-1!==r&&n.splice(r,1)}}},dispatchEvent:function(t){if(void 0!==this._listeners){var e=this._listeners[t.type];if(void 0!==e){t.target=this;for(var n=e.slice(0),r=0,i=n.length;r<i;r++)n[r].call(this,t)}}}});var i,o,a,s,u,l,c,h,d,p,f,m,v="99",g={LEFT:0,MIDDLE:1,RIGHT:2},y=0,_=1,b=2,w=3,x=0,E=1,S=0,T=1,M=2,C=0,A=1,P=2,O=1,R=2,L=0,I=1,N=2,D=0,k=1,F=2,j=3,U=4,B=5,G=100,V=101,z=102,H=103,W=104,q=200,X=201,Y=202,K=203,Z=204,Q=205,J=206,$=207,tt=208,et=209,nt=210,rt=0,it=1,ot=2,at=3,st=4,ut=5,lt=6,ct=7,ht=0,dt=1,pt=2,ft=0,mt=1,vt=2,gt=3,yt=4,_t=5,bt=300,wt=301,xt=302,Et=303,St=304,Tt=305,Mt=306,Ct=307,At=1e3,Pt=1001,Ot=1002,Rt=1003,Lt=1004,It=1005,Nt=1006,Dt=1007,kt=1008,Ft=1009,jt=1010,Ut=1011,Bt=1012,Gt=1013,Vt=1014,zt=1015,Ht=1016,Wt=1017,qt=1018,Xt=1019,Yt=1020,Kt=1021,Zt=1022,Qt=1023,Jt=1024,$t=1025,te=Qt,ee=1026,ne=1027,re=1028,ie=33776,oe=33777,ae=33778,se=33779,ue=35840,le=35841,ce=35842,he=35843,de=36196,pe=37808,fe=37809,me=37810,ve=37811,ge=37812,ye=37813,_e=37814,be=37815,we=37816,xe=37817,Ee=37818,Se=37819,Te=37820,Me=37821,Ce=2200,Ae=2201,Pe=2202,Oe=2300,Re=2301,Le=2302,Ie=2400,Ne=2401,De=2402,ke=0,Fe=1,je=2,Ue=3e3,Be=3001,Ge=3007,Ve=3002,ze=3003,He=3004,We=3005,qe=3006,Xe=3200,Ye=3201,Ke=0,Ze=1,Qe={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){for(var t=[],e=0;e<256;e++)t[e]=(e<16?"0":"")+e.toString(16);return function(){var e=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(t[255&e]+t[e>>8&255]+t[e>>16&255]+t[e>>24&255]+"-"+t[255&n]+t[n>>8&255]+"-"+t[n>>16&15|64]+t[n>>24&255]+"-"+t[63&r|128]+t[r>>8&255]+"-"+t[r>>16&255]+t[r>>24&255]+t[255&i]+t[i>>8&255]+t[i>>16&255]+t[i>>24&255]).toUpperCase()}}(),clamp:function(t,e,n){return Math.max(e,Math.min(n,t))},euclideanModulo:function(t,e){return(t%e+e)%e},mapLinear:function(t,e,n,r,i){return r+(t-e)*(i-r)/(n-e)},lerp:function(t,e,n){return(1-n)*t+n*e},smoothstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*(3-2*t)},smootherstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*t*(t*(6*t-15)+10)},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},degToRad:function(t){return t*Qe.DEG2RAD},radToDeg:function(t){return t*Qe.RAD2DEG},isPowerOfTwo:function(t){return 0==(t&t-1)&&0!==t},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}};function Je(t,e){this.x=t||0,this.y=e||0}function $e(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function tn(t,e,n,r){this._x=t||0,this._y=e||0,this._z=n||0,this._w=void 0!==r?r:1}function en(t,e,n){this.x=t||0,this.y=e||0,this.z=n||0}function nn(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}Object.defineProperties(Je.prototype,{width:{get:function(){return this.x},set:function(t){this.x=t}},height:{get:function(){return this.y},set:function(t){this.y=t}}}),Object.assign(Je.prototype,{isVector2:!0,set:function(t,e){return this.x=t,this.y=e,this},setScalar:function(t){return this.x=t,this.y=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(t){return this.x=t.x,this.y=t.y,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this)},addScalar:function(t){return this.x+=t,this.y+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this)},subScalar:function(t){return this.x-=t,this.y-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},divideScalar:function(t){return this.multiplyScalar(1/t)},applyMatrix3:function(t){var e=this.x,n=this.y,r=t.elements;return this.x=r[0]*e+r[3]*n+r[6],this.y=r[1]*e+r[4]*n+r[7],this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this},clampScalar:(i=new Je,o=new Je,function(t,e){return i.set(t,t),o.set(e,e),this.clamp(i,o)}),clampLength:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(t){return this.x*t.x+this.y*t.y},cross:function(t){return this.x*t.y-this.y*t.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var t=Math.atan2(this.y,this.x);return t<0&&(t+=2*Math.PI),t},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,n=this.y-t.y;return e*e+n*n},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t},fromBufferAttribute:function(t,e,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this},rotateAround:function(t,e){var n=Math.cos(e),r=Math.sin(e),i=this.x-t.x,o=this.y-t.y;return this.x=i*n-o*r+t.x,this.y=i*r+o*n+t.y,this}}),Object.assign($e.prototype,{isMatrix4:!0,set:function(t,e,n,r,i,o,a,s,u,l,c,h,d,p,f,m){var v=this.elements;return v[0]=t,v[4]=e,v[8]=n,v[12]=r,v[1]=i,v[5]=o,v[9]=a,v[13]=s,v[2]=u,v[6]=l,v[10]=c,v[14]=h,v[3]=d,v[7]=p,v[11]=f,v[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new $e).fromArray(this.elements)},copy:function(t){var e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this},copyPosition:function(t){var e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this},extractBasis:function(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this},makeBasis:function(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this},extractRotation:(p=new en,function(t){var e=this.elements,n=t.elements,r=1/p.setFromMatrixColumn(t,0).length(),i=1/p.setFromMatrixColumn(t,1).length(),o=1/p.setFromMatrixColumn(t,2).length();return e[0]=n[0]*r,e[1]=n[1]*r,e[2]=n[2]*r,e[3]=0,e[4]=n[4]*i,e[5]=n[5]*i,e[6]=n[6]*i,e[7]=0,e[8]=n[8]*o,e[9]=n[9]*o,e[10]=n[10]*o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}),makeRotationFromEuler:function(t){t&&t.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var e=this.elements,n=t.x,r=t.y,i=t.z,o=Math.cos(n),a=Math.sin(n),s=Math.cos(r),u=Math.sin(r),l=Math.cos(i),c=Math.sin(i);if("XYZ"===t.order){var h=o*l,d=o*c,p=a*l,f=a*c;e[0]=s*l,e[4]=-s*c,e[8]=u,e[1]=d+p*u,e[5]=h-f*u,e[9]=-a*s,e[2]=f-h*u,e[6]=p+d*u,e[10]=o*s}else if("YXZ"===t.order){var m=s*c,v=u*l;e[0]=(g=s*l)+(y=u*c)*a,e[4]=v*a-m,e[8]=o*u,e[1]=o*c,e[5]=o*l,e[9]=-a,e[2]=m*a-v,e[6]=y+g*a,e[10]=o*s}else if("ZXY"===t.order){var g,y;m=s*c,v=u*l,e[0]=(g=s*l)-(y=u*c)*a,e[4]=-o*c,e[8]=v+m*a,e[1]=m+v*a,e[5]=o*l,e[9]=y-g*a,e[2]=-o*u,e[6]=a,e[10]=o*s}else if("ZYX"===t.order)h=o*l,d=o*c,p=a*l,f=a*c,e[0]=s*l,e[4]=p*u-d,e[8]=h*u+f,e[1]=s*c,e[5]=f*u+h,e[9]=d*u-p,e[2]=-u,e[6]=a*s,e[10]=o*s;else if("YZX"===t.order){var _=o*s,b=o*u,w=a*s,x=a*u;e[0]=s*l,e[4]=x-_*c,e[8]=w*c+b,e[1]=c,e[5]=o*l,e[9]=-a*l,e[2]=-u*l,e[6]=b*c+w,e[10]=_-x*c}else"XZY"===t.order&&(_=o*s,b=o*u,w=a*s,x=a*u,e[0]=s*l,e[4]=-c,e[8]=u*l,e[1]=_*c+x,e[5]=o*l,e[9]=b*c-w,e[2]=w*c-b,e[6]=a*l,e[10]=x*c+_);return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},makeRotationFromQuaternion:(h=new en(0,0,0),d=new en(1,1,1),function(t){return this.compose(h,t,d)}),lookAt:(u=new en,l=new en,c=new en,function(t,e,n){var r=this.elements;return c.subVectors(t,e),0===c.lengthSq()&&(c.z=1),c.normalize(),u.crossVectors(n,c),0===u.lengthSq()&&(1===Math.abs(n.z)?c.x+=1e-4:c.z+=1e-4,c.normalize(),u.crossVectors(n,c)),u.normalize(),l.crossVectors(c,u),r[0]=u.x,r[4]=l.x,r[8]=c.x,r[1]=u.y,r[5]=l.y,r[9]=c.y,r[2]=u.z,r[6]=l.z,r[10]=c.z,this}),multiply:function(t,e){return void 0!==e?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var n=t.elements,r=e.elements,i=this.elements,o=n[0],a=n[4],s=n[8],u=n[12],l=n[1],c=n[5],h=n[9],d=n[13],p=n[2],f=n[6],m=n[10],v=n[14],g=n[3],y=n[7],_=n[11],b=n[15],w=r[0],x=r[4],E=r[8],S=r[12],T=r[1],M=r[5],C=r[9],A=r[13],P=r[2],O=r[6],R=r[10],L=r[14],I=r[3],N=r[7],D=r[11],k=r[15];return i[0]=o*w+a*T+s*P+u*I,i[4]=o*x+a*M+s*O+u*N,i[8]=o*E+a*C+s*R+u*D,i[12]=o*S+a*A+s*L+u*k,i[1]=l*w+c*T+h*P+d*I,i[5]=l*x+c*M+h*O+d*N,i[9]=l*E+c*C+h*R+d*D,i[13]=l*S+c*A+h*L+d*k,i[2]=p*w+f*T+m*P+v*I,i[6]=p*x+f*M+m*O+v*N,i[10]=p*E+f*C+m*R+v*D,i[14]=p*S+f*A+m*L+v*k,i[3]=g*w+y*T+_*P+b*I,i[7]=g*x+y*M+_*O+b*N,i[11]=g*E+y*C+_*R+b*D,i[15]=g*S+y*A+_*L+b*k,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this},applyToBufferAttribute:function(){var t=new en;return function(e){for(var n=0,r=e.count;n<r;n++)t.x=e.getX(n),t.y=e.getY(n),t.z=e.getZ(n),t.applyMatrix4(this),e.setXYZ(n,t.x,t.y,t.z);return e}}(),determinant:function(){var t=this.elements,e=t[0],n=t[4],r=t[8],i=t[12],o=t[1],a=t[5],s=t[9],u=t[13],l=t[2],c=t[6],h=t[10],d=t[14];return t[3]*(+i*s*c-r*u*c-i*a*h+n*u*h+r*a*d-n*s*d)+t[7]*(+e*s*d-e*u*h+i*o*h-r*o*d+r*u*l-i*s*l)+t[11]*(+e*u*c-e*a*d-i*o*c+n*o*d+i*a*l-n*u*l)+t[15]*(-r*a*l-e*s*c+e*a*h+r*o*c-n*o*h+n*s*l)},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this},setPosition:function(t){var e=this.elements;return e[12]=t.x,e[13]=t.y,e[14]=t.z,this},getInverse:function(t,e){var n=this.elements,r=t.elements,i=r[0],o=r[1],a=r[2],s=r[3],u=r[4],l=r[5],c=r[6],h=r[7],d=r[8],p=r[9],f=r[10],m=r[11],v=r[12],g=r[13],y=r[14],_=r[15],b=p*y*h-g*f*h+g*c*m-l*y*m-p*c*_+l*f*_,w=v*f*h-d*y*h-v*c*m+u*y*m+d*c*_-u*f*_,x=d*g*h-v*p*h+v*l*m-u*g*m-d*l*_+u*p*_,E=v*p*c-d*g*c-v*l*f+u*g*f+d*l*y-u*p*y,S=i*b+o*w+a*x+s*E;if(0===S){var T="THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0";if(!0===e)throw new Error(T);return console.warn(T),this.identity()}var M=1/S;return n[0]=b*M,n[1]=(g*f*s-p*y*s-g*a*m+o*y*m+p*a*_-o*f*_)*M,n[2]=(l*y*s-g*c*s+g*a*h-o*y*h-l*a*_+o*c*_)*M,n[3]=(p*c*s-l*f*s-p*a*h+o*f*h+l*a*m-o*c*m)*M,n[4]=w*M,n[5]=(d*y*s-v*f*s+v*a*m-i*y*m-d*a*_+i*f*_)*M,n[6]=(v*c*s-u*y*s-v*a*h+i*y*h+u*a*_-i*c*_)*M,n[7]=(u*f*s-d*c*s+d*a*h-i*f*h-u*a*m+i*c*m)*M,n[8]=x*M,n[9]=(v*p*s-d*g*s-v*o*m+i*g*m+d*o*_-i*p*_)*M,n[10]=(u*g*s-v*l*s+v*o*h-i*g*h-u*o*_+i*l*_)*M,n[11]=(d*l*s-u*p*s-d*o*h+i*p*h+u*o*m-i*l*m)*M,n[12]=E*M,n[13]=(d*g*a-v*p*a+v*o*f-i*g*f-d*o*y+i*p*y)*M,n[14]=(v*l*a-u*g*a-v*o*c+i*g*c+u*o*y-i*l*y)*M,n[15]=(u*p*a-d*l*a+d*o*c-i*p*c-u*o*f+i*l*f)*M,this},scale:function(t){var e=this.elements,n=t.x,r=t.y,i=t.z;return e[0]*=n,e[4]*=r,e[8]*=i,e[1]*=n,e[5]*=r,e[9]*=i,e[2]*=n,e[6]*=r,e[10]*=i,e[3]*=n,e[7]*=r,e[11]*=i,this},getMaxScaleOnAxis:function(){var t=this.elements;return Math.sqrt(Math.max(t[0]*t[0]+t[1]*t[1]+t[2]*t[2],t[4]*t[4]+t[5]*t[5]+t[6]*t[6],t[8]*t[8]+t[9]*t[9]+t[10]*t[10]))},makeTranslation:function(t,e,n){return this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this},makeRotationX:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this},makeRotationY:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this},makeRotationZ:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(t,e){var n=Math.cos(e),r=Math.sin(e),i=1-n,o=t.x,a=t.y,s=t.z,u=i*o,l=i*a;return this.set(u*o+n,u*a-r*s,u*s+r*a,0,u*a+r*s,l*a+n,l*s-r*o,0,u*s-r*a,l*s+r*o,i*s*s+n,0,0,0,0,1),this},makeScale:function(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this},makeShear:function(t,e,n){return this.set(1,e,n,0,t,1,n,0,t,e,1,0,0,0,0,1),this},compose:function(t,e,n){var r=this.elements,i=e._x,o=e._y,a=e._z,s=e._w,u=i+i,l=o+o,c=a+a,h=i*u,d=i*l,p=i*c,f=o*l,m=o*c,v=a*c,g=s*u,y=s*l,_=s*c,b=n.x,w=n.y,x=n.z;return r[0]=(1-(f+v))*b,r[1]=(d+_)*b,r[2]=(p-y)*b,r[3]=0,r[4]=(d-_)*w,r[5]=(1-(h+v))*w,r[6]=(m+g)*w,r[7]=0,r[8]=(p+y)*x,r[9]=(m-g)*x,r[10]=(1-(h+f))*x,r[11]=0,r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=1,this},decompose:(a=new en,s=new $e,function(t,e,n){var r=this.elements,i=a.set(r[0],r[1],r[2]).length(),o=a.set(r[4],r[5],r[6]).length(),u=a.set(r[8],r[9],r[10]).length();this.determinant()<0&&(i=-i),t.x=r[12],t.y=r[13],t.z=r[14],s.copy(this);var l=1/i,c=1/o,h=1/u;return s.elements[0]*=l,s.elements[1]*=l,s.elements[2]*=l,s.elements[4]*=c,s.elements[5]*=c,s.elements[6]*=c,s.elements[8]*=h,s.elements[9]*=h,s.elements[10]*=h,e.setFromRotationMatrix(s),n.x=i,n.y=o,n.z=u,this}),makePerspective:function(t,e,n,r,i,o){void 0===o&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var a=this.elements,s=2*i/(n-r),u=(e+t)/(e-t),l=(n+r)/(n-r),c=-(o+i)/(o-i),h=-2*o*i/(o-i);return a[0]=2*i/(e-t),a[4]=0,a[8]=u,a[12]=0,a[1]=0,a[5]=s,a[9]=l,a[13]=0,a[2]=0,a[6]=0,a[10]=c,a[14]=h,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this},makeOrthographic:function(t,e,n,r,i,o){var a=this.elements,s=1/(e-t),u=1/(n-r),l=1/(o-i),c=(e+t)*s,h=(n+r)*u,d=(o+i)*l;return a[0]=2*s,a[4]=0,a[8]=0,a[12]=-c,a[1]=0,a[5]=2*u,a[9]=0,a[13]=-h,a[2]=0,a[6]=0,a[10]=-2*l,a[14]=-d,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this},equals:function(t){for(var e=this.elements,n=t.elements,r=0;r<16;r++)if(e[r]!==n[r])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var n=0;n<16;n++)this.elements[n]=t[n+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}}),Object.assign(tn,{slerp:function(t,e,n,r){return n.copy(t).slerp(e,r)},slerpFlat:function(t,e,n,r,i,o,a){var s=n[r+0],u=n[r+1],l=n[r+2],c=n[r+3],h=i[o+0],d=i[o+1],p=i[o+2],f=i[o+3];if(c!==f||s!==h||u!==d||l!==p){var m=1-a,v=s*h+u*d+l*p+c*f,g=v>=0?1:-1,y=1-v*v;if(y>Number.EPSILON){var _=Math.sqrt(y),b=Math.atan2(_,v*g);m=Math.sin(m*b)/_,a=Math.sin(a*b)/_}var w=a*g;if(s=s*m+h*w,u=u*m+d*w,l=l*m+p*w,c=c*m+f*w,m===1-a){var x=1/Math.sqrt(s*s+u*u+l*l+c*c);s*=x,u*=x,l*=x,c*=x}}t[e]=s,t[e+1]=u,t[e+2]=l,t[e+3]=c}}),Object.defineProperties(tn.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this.onChangeCallback()}},w:{get:function(){return this._w},set:function(t){this._w=t,this.onChangeCallback()}}}),Object.assign(tn.prototype,{isQuaternion:!0,set:function(t,e,n,r){return this._x=t,this._y=e,this._z=n,this._w=r,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this.onChangeCallback(),this},setFromEuler:function(t,e){if(!t||!t.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=t._x,r=t._y,i=t._z,o=t.order,a=Math.cos,s=Math.sin,u=a(n/2),l=a(r/2),c=a(i/2),h=s(n/2),d=s(r/2),p=s(i/2);return"XYZ"===o?(this._x=h*l*c+u*d*p,this._y=u*d*c-h*l*p,this._z=u*l*p+h*d*c,this._w=u*l*c-h*d*p):"YXZ"===o?(this._x=h*l*c+u*d*p,this._y=u*d*c-h*l*p,this._z=u*l*p-h*d*c,this._w=u*l*c+h*d*p):"ZXY"===o?(this._x=h*l*c-u*d*p,this._y=u*d*c+h*l*p,this._z=u*l*p+h*d*c,this._w=u*l*c-h*d*p):"ZYX"===o?(this._x=h*l*c-u*d*p,this._y=u*d*c+h*l*p,this._z=u*l*p-h*d*c,this._w=u*l*c+h*d*p):"YZX"===o?(this._x=h*l*c+u*d*p,this._y=u*d*c+h*l*p,this._z=u*l*p-h*d*c,this._w=u*l*c-h*d*p):"XZY"===o&&(this._x=h*l*c-u*d*p,this._y=u*d*c-h*l*p,this._z=u*l*p+h*d*c,this._w=u*l*c+h*d*p),!1!==e&&this.onChangeCallback(),this},setFromAxisAngle:function(t,e){var n=e/2,r=Math.sin(n);return this._x=t.x*r,this._y=t.y*r,this._z=t.z*r,this._w=Math.cos(n),this.onChangeCallback(),this},setFromRotationMatrix:function(t){var e,n=t.elements,r=n[0],i=n[4],o=n[8],a=n[1],s=n[5],u=n[9],l=n[2],c=n[6],h=n[10],d=r+s+h;return d>0?(e=.5/Math.sqrt(d+1),this._w=.25/e,this._x=(c-u)*e,this._y=(o-l)*e,this._z=(a-i)*e):r>s&&r>h?(e=2*Math.sqrt(1+r-s-h),this._w=(c-u)/e,this._x=.25*e,this._y=(i+a)/e,this._z=(o+l)/e):s>h?(e=2*Math.sqrt(1+s-r-h),this._w=(o-l)/e,this._x=(i+a)/e,this._y=.25*e,this._z=(u+c)/e):(e=2*Math.sqrt(1+h-r-s),this._w=(a-i)/e,this._x=(o+l)/e,this._y=(u+c)/e,this._z=.25*e),this.onChangeCallback(),this},setFromUnitVectors:function(){var t,e=new en;return function(n,r){return void 0===e&&(e=new en),(t=n.dot(r)+1)<1e-6?(t=0,Math.abs(n.x)>Math.abs(n.z)?e.set(-n.y,n.x,0):e.set(0,-n.z,n.y)):e.crossVectors(n,r),this._x=e.x,this._y=e.y,this._z=e.z,this._w=t,this.normalize()}}(),angleTo:function(t){return 2*Math.acos(Math.abs(Qe.clamp(this.dot(t),-1,1)))},rotateTowards:function(t,e){var n=this.angleTo(t);if(0===n)return this;var r=Math.min(1,e/n);return this.slerp(t,r),this},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(this._x=this._x*(t=1/t),this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this.onChangeCallback(),this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)},premultiply:function(t){return this.multiplyQuaternions(t,this)},multiplyQuaternions:function(t,e){var n=t._x,r=t._y,i=t._z,o=t._w,a=e._x,s=e._y,u=e._z,l=e._w;return this._x=n*l+o*a+r*u-i*s,this._y=r*l+o*s+i*a-n*u,this._z=i*l+o*u+n*s-r*a,this._w=o*l-n*a-r*s-i*u,this.onChangeCallback(),this},slerp:function(t,e){if(0===e)return this;if(1===e)return this.copy(t);var n=this._x,r=this._y,i=this._z,o=this._w,a=o*t._w+n*t._x+r*t._y+i*t._z;if(a<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,a=-a):this.copy(t),a>=1)return this._w=o,this._x=n,this._y=r,this._z=i,this;var s=1-a*a;if(s<=Number.EPSILON){var u=1-e;return this._w=u*o+e*this._w,this._x=u*n+e*this._x,this._y=u*r+e*this._y,this._z=u*i+e*this._z,this.normalize()}var l=Math.sqrt(s),c=Math.atan2(l,a),h=Math.sin((1-e)*c)/l,d=Math.sin(e*c)/l;return this._w=o*h+this._w*d,this._x=n*h+this._x*d,this._y=r*h+this._y*d,this._z=i*h+this._z*d,this.onChangeCallback(),this},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w},fromArray:function(t,e){return void 0===e&&(e=0),this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this.onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){}}),Object.assign(en.prototype,{isVector3:!0,set:function(t,e,n){return this.x=t,this.y=e,this.z=n,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this},multiplyVectors:function(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this},applyEuler:(f=new tn,function(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(f.setFromEuler(t))}),applyAxisAngle:function(){var t=new tn;return function(e,n){return this.applyQuaternion(t.setFromAxisAngle(e,n))}}(),applyMatrix3:function(t){var e=this.x,n=this.y,r=this.z,i=t.elements;return this.x=i[0]*e+i[3]*n+i[6]*r,this.y=i[1]*e+i[4]*n+i[7]*r,this.z=i[2]*e+i[5]*n+i[8]*r,this},applyMatrix4:function(t){var e=this.x,n=this.y,r=this.z,i=t.elements,o=1/(i[3]*e+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*e+i[4]*n+i[8]*r+i[12])*o,this.y=(i[1]*e+i[5]*n+i[9]*r+i[13])*o,this.z=(i[2]*e+i[6]*n+i[10]*r+i[14])*o,this},applyQuaternion:function(t){var e=this.x,n=this.y,r=this.z,i=t.x,o=t.y,a=t.z,s=t.w,u=s*e+o*r-a*n,l=s*n+a*e-i*r,c=s*r+i*n-o*e,h=-i*e-o*n-a*r;return this.x=u*s+h*-i+l*-a-c*-o,this.y=l*s+h*-o+c*-i-u*-a,this.z=c*s+h*-a+u*-o-l*-i,this},project:function(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)},unproject:function(){var t=new $e;return function(e){return this.applyMatrix4(t.getInverse(e.projectionMatrix)).applyMatrix4(e.matrixWorld)}}(),transformDirection:function(t){var e=this.x,n=this.y,r=this.z,i=t.elements;return this.x=i[0]*e+i[4]*n+i[8]*r,this.y=i[1]*e+i[5]*n+i[9]*r,this.z=i[2]*e+i[6]*n+i[10]*r,this.normalize()},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this},clampScalar:function(){var t=new en,e=new en;return function(n,r){return t.set(n,n,n),e.set(r,r,r),this.clamp(t,e)}}(),clampLength:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},cross:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e)):this.crossVectors(this,t)},crossVectors:function(t,e){var n=t.x,r=t.y,i=t.z,o=e.x,a=e.y,s=e.z;return this.x=r*s-i*a,this.y=i*o-n*s,this.z=n*a-r*o,this},projectOnVector:function(t){var e=t.dot(this)/t.lengthSq();return this.copy(t).multiplyScalar(e)},projectOnPlane:function(){var t=new en;return function(e){return t.copy(this).projectOnVector(e),this.sub(t)}}(),reflect:function(){var t=new en;return function(e){return this.sub(t.copy(e).multiplyScalar(2*this.dot(e)))}}(),angleTo:function(t){var e=this.dot(t)/Math.sqrt(this.lengthSq()*t.lengthSq());return Math.acos(Qe.clamp(e,-1,1))},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return e*e+n*n+r*r},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)},setFromSpherical:function(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)},setFromSphericalCoords:function(t,e,n){var r=Math.sin(e)*t;return this.x=r*Math.sin(n),this.y=Math.cos(e)*t,this.z=r*Math.cos(n),this},setFromCylindrical:function(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)},setFromCylindricalCoords:function(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this},setFromMatrixPosition:function(t){var e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this},setFromMatrixScale:function(t){var e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),r=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=r,this},setFromMatrixColumn:function(t,e){return this.fromArray(t.elements,4*e)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t},fromBufferAttribute:function(t,e,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}}),Object.assign(nn.prototype,{isMatrix3:!0,set:function(t,e,n,r,i,o,a,s,u){var l=this.elements;return l[0]=t,l[1]=r,l[2]=a,l[3]=e,l[4]=i,l[5]=s,l[6]=n,l[7]=o,l[8]=u,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(t){var e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this},setFromMatrix4:function(t){var e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this},applyToBufferAttribute:function(){var t=new en;return function(e){for(var n=0,r=e.count;n<r;n++)t.x=e.getX(n),t.y=e.getY(n),t.z=e.getZ(n),t.applyMatrix3(this),e.setXYZ(n,t.x,t.y,t.z);return e}}(),multiply:function(t){return this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var n=t.elements,r=e.elements,i=this.elements,o=n[0],a=n[3],s=n[6],u=n[1],l=n[4],c=n[7],h=n[2],d=n[5],p=n[8],f=r[0],m=r[3],v=r[6],g=r[1],y=r[4],_=r[7],b=r[2],w=r[5],x=r[8];return i[0]=o*f+a*g+s*b,i[3]=o*m+a*y+s*w,i[6]=o*v+a*_+s*x,i[1]=u*f+l*g+c*b,i[4]=u*m+l*y+c*w,i[7]=u*v+l*_+c*x,i[2]=h*f+d*g+p*b,i[5]=h*m+d*y+p*w,i[8]=h*v+d*_+p*x,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this},determinant:function(){var t=this.elements,e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],u=t[7],l=t[8];return e*o*l-e*a*u-n*i*l+n*a*s+r*i*u-r*o*s},getInverse:function(t,e){t&&t.isMatrix4&&console.error("THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.");var n=t.elements,r=this.elements,i=n[0],o=n[1],a=n[2],s=n[3],u=n[4],l=n[5],c=n[6],h=n[7],d=n[8],p=d*u-l*h,f=l*c-d*s,m=h*s-u*c,v=i*p+o*f+a*m;if(0===v){var g="THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0";if(!0===e)throw new Error(g);return console.warn(g),this.identity()}var y=1/v;return r[0]=p*y,r[1]=(a*h-d*o)*y,r[2]=(l*o-a*u)*y,r[3]=f*y,r[4]=(d*i-a*c)*y,r[5]=(a*s-l*i)*y,r[6]=m*y,r[7]=(o*c-h*i)*y,r[8]=(u*i-o*s)*y,this},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this},getNormalMatrix:function(t){return this.setFromMatrix4(t).getInverse(this).transpose()},transposeIntoArray:function(t){var e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this},setUvTransform:function(t,e,n,r,i,o,a){var s=Math.cos(i),u=Math.sin(i);this.set(n*s,n*u,-n*(s*o+u*a)+o+t,-r*u,r*s,-r*(-u*o+s*a)+a+e,0,0,1)},scale:function(t,e){var n=this.elements;return n[0]*=t,n[3]*=t,n[6]*=t,n[1]*=e,n[4]*=e,n[7]*=e,this},rotate:function(t){var e=Math.cos(t),n=Math.sin(t),r=this.elements,i=r[0],o=r[3],a=r[6],s=r[1],u=r[4],l=r[7];return r[0]=e*i+n*s,r[3]=e*o+n*u,r[6]=e*a+n*l,r[1]=-n*i+e*s,r[4]=-n*o+e*u,r[7]=-n*a+e*l,this},translate:function(t,e){var n=this.elements;return n[0]+=t*n[2],n[3]+=t*n[5],n[6]+=t*n[8],n[1]+=e*n[2],n[4]+=e*n[5],n[7]+=e*n[8],this},equals:function(t){for(var e=this.elements,n=t.elements,r=0;r<9;r++)if(e[r]!==n[r])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var n=0;n<9;n++)this.elements[n]=t[n+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}});var rn,on,an,sn,un,ln={getDataURL:function(t){var e;if("undefined"==typeof HTMLCanvasElement)return t.src;if(t instanceof HTMLCanvasElement)e=t;else{void 0===m&&(m=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),m.width=t.width,m.height=t.height;var n=m.getContext("2d");t instanceof ImageData?n.putImageData(t,0,0):n.drawImage(t,0,0,t.width,t.height),e=m}return e.width>2048||e.height>2048?e.toDataURL("image/jpeg",.6):e.toDataURL("image/png")}},cn=0;function hn(t,e,n,r,i,o,a,s,u,l){Object.defineProperty(this,"id",{value:cn++}),this.uuid=Qe.generateUUID(),this.name="",this.image=void 0!==t?t:hn.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==e?e:hn.DEFAULT_MAPPING,this.wrapS=void 0!==n?n:Pt,this.wrapT=void 0!==r?r:Pt,this.magFilter=void 0!==i?i:Nt,this.minFilter=void 0!==o?o:kt,this.anisotropy=void 0!==u?u:1,this.format=void 0!==a?a:Qt,this.type=void 0!==s?s:Ft,this.offset=new Je(0,0),this.repeat=new Je(1,1),this.center=new Je(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new nn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==l?l:Ue,this.version=0,this.onUpdate=null}function dn(t,e,n,r){this.x=t||0,this.y=e||0,this.z=n||0,this.w=void 0!==r?r:1}function pn(t,e,n){this.width=t,this.height=e,this.scissor=new dn(0,0,t,e),this.scissorTest=!1,this.viewport=new dn(0,0,t,e),this.texture=new hn(void 0,void 0,(n=n||{}).wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:Nt,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0===n.stencilBuffer||n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}function fn(t,e,n){pn.call(this,t,e,n),this.activeCubeFace=0,this.activeMipMapLevel=0}function mn(t,e,n,r,i,o,a,s,u,l,c,h){hn.call(this,null,o,a,s,u,l,r,i,c,h),this.image={data:t,width:e,height:n},this.magFilter=void 0!==u?u:Rt,this.minFilter=void 0!==l?l:Rt,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}function vn(t,e){this.min=void 0!==t?t:new en(1/0,1/0,1/0),this.max=void 0!==e?e:new en(-1/0,-1/0,-1/0)}function gn(t,e){this.center=void 0!==t?t:new en,this.radius=void 0!==e?e:0}function yn(t,e){this.normal=void 0!==t?t:new en(1,0,0),this.constant=void 0!==e?e:0}function _n(t,e,n,r,i,o){this.planes=[void 0!==t?t:new yn,void 0!==e?e:new yn,void 0!==n?n:new yn,void 0!==r?r:new yn,void 0!==i?i:new yn,void 0!==o?o:new yn]}hn.DEFAULT_IMAGE=void 0,hn.DEFAULT_MAPPING=bt,hn.prototype=Object.assign(Object.create(r.prototype),{constructor:hn,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.name=t.name,this.image=t.image,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this},toJSON:function(t){var e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];var n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY};if(void 0!==this.image){var r=this.image;if(void 0===r.uuid&&(r.uuid=Qe.generateUUID()),!e&&void 0===t.images[r.uuid]){var i;if(Array.isArray(r)){i=[];for(var o=0,a=r.length;o<a;o++)i.push(ln.getDataURL(r[o]))}else i=ln.getDataURL(r);t.images[r.uuid]={uuid:r.uuid,url:i}}n.image=r.uuid}return e||(t.textures[this.uuid]=n),n},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(t){if(this.mapping!==bt)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case At:t.x=t.x-Math.floor(t.x);break;case Pt:t.x=t.x<0?0:1;break;case Ot:t.x=1===Math.abs(Math.floor(t.x)%2)?Math.ceil(t.x)-t.x:t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case At:t.y=t.y-Math.floor(t.y);break;case Pt:t.y=t.y<0?0:1;break;case Ot:t.y=1===Math.abs(Math.floor(t.y)%2)?Math.ceil(t.y)-t.y:t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}}),Object.defineProperty(hn.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(dn.prototype,{isVector4:!0,set:function(t,e,n,r){return this.x=t,this.y=e,this.z=n,this.w=r,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this.w=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setW:function(t){return this.w=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},applyMatrix4:function(t){var e=this.x,n=this.y,r=this.z,i=this.w,o=t.elements;return this.x=o[0]*e+o[4]*n+o[8]*r+o[12]*i,this.y=o[1]*e+o[5]*n+o[9]*r+o[13]*i,this.z=o[2]*e+o[6]*n+o[10]*r+o[14]*i,this.w=o[3]*e+o[7]*n+o[11]*r+o[15]*i,this},divideScalar:function(t){return this.multiplyScalar(1/t)},setAxisAngleFromQuaternion:function(t){this.w=2*Math.acos(t.w);var e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this},setAxisAngleFromRotationMatrix:function(t){var e,n,r,i,o=t.elements,a=o[0],s=o[4],u=o[8],l=o[1],c=o[5],h=o[9],d=o[2],p=o[6],f=o[10];if(Math.abs(s-l)<.01&&Math.abs(u-d)<.01&&Math.abs(h-p)<.01){if(Math.abs(s+l)<.1&&Math.abs(u+d)<.1&&Math.abs(h+p)<.1&&Math.abs(a+c+f-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;var m=(a+1)/2,v=(c+1)/2,g=(f+1)/2,y=(s+l)/4,_=(u+d)/4,b=(h+p)/4;return m>v&&m>g?m<.01?(n=0,r=.707106781,i=.707106781):(r=y/(n=Math.sqrt(m)),i=_/n):v>g?v<.01?(n=.707106781,r=0,i=.707106781):(n=y/(r=Math.sqrt(v)),i=b/r):g<.01?(n=.707106781,r=.707106781,i=0):(n=_/(i=Math.sqrt(g)),r=b/i),this.set(n,r,i,e),this}var w=Math.sqrt((p-h)*(p-h)+(u-d)*(u-d)+(l-s)*(l-s));return Math.abs(w)<.001&&(w=1),this.x=(p-h)/w,this.y=(u-d)/w,this.z=(l-s)/w,this.w=Math.acos((a+c+f-1)/2),this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this},clampScalar:function(){var t,e;return function(n,r){return void 0===t&&(t=new dn,e=new dn),t.set(n,n,n,n),e.set(r,r,r,r),this.clamp(t,e)}}(),clampLength:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t},fromBufferAttribute:function(t,e,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}}),pn.prototype=Object.assign(Object.create(r.prototype),{constructor:pn,isWebGLRenderTarget:!0,setSize:function(t,e){this.width===t&&this.height===e||(this.width=t,this.height=e,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.width=t.width,this.height=t.height,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),(fn.prototype=Object.create(pn.prototype)).constructor=fn,fn.prototype.isWebGLRenderTargetCube=!0,(mn.prototype=Object.create(hn.prototype)).constructor=mn,mn.prototype.isDataTexture=!0,Object.assign(vn.prototype,{isBox3:!0,set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromArray:function(t){for(var e=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0,s=0,u=t.length;s<u;s+=3){var l=t[s],c=t[s+1],h=t[s+2];l<e&&(e=l),c<n&&(n=c),h<r&&(r=h),l>i&&(i=l),c>o&&(o=c),h>a&&(a=h)}return this.min.set(e,n,r),this.max.set(i,o,a),this},setFromBufferAttribute:function(t){for(var e=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0,s=0,u=t.count;s<u;s++){var l=t.getX(s),c=t.getY(s),h=t.getZ(s);l<e&&(e=l),c<n&&(n=c),h<r&&(r=h),l>i&&(i=l),c>o&&(o=c),h>a&&(a=h)}return this.min.set(e,n,r),this.max.set(i,o,a),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(){var t=new en;return function(e,n){var r=t.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}}(),setFromObject:function(t){return this.makeEmpty(),this.expandByObject(t)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(t){return void 0===t&&(console.warn("THREE.Box3: .getCenter() target is now required"),t=new en),this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){return void 0===t&&(console.warn("THREE.Box3: .getSize() target is now required"),t=new en),this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},expandByObject:function(){var t,e,n,r=new en;function i(i){var o=i.geometry;if(void 0!==o)if(o.isGeometry){var a=o.vertices;for(e=0,n=a.length;e<n;e++)r.copy(a[e]),r.applyMatrix4(i.matrixWorld),t.expandByPoint(r)}else if(o.isBufferGeometry){var s=o.attributes.position;if(void 0!==s)for(e=0,n=s.count;e<n;e++)r.fromBufferAttribute(s,e).applyMatrix4(i.matrixWorld),t.expandByPoint(r)}}return function(e){return t=this,e.updateMatrixWorld(!0),e.traverse(i),this}}(),containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z},getParameter:function(t,e){return void 0===e&&(console.warn("THREE.Box3: .getParameter() target is now required"),e=new en),e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)},intersectsSphere:(on=new en,function(t){return this.clampPoint(t.center,on),on.distanceToSquared(t.center)<=t.radius*t.radius}),intersectsPlane:function(t){var e,n;return t.normal.x>0?(e=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=-t.constant&&n>=-t.constant},intersectsTriangle:function(){var t=new en,e=new en,n=new en,r=new en,i=new en,o=new en,a=new en,s=new en,u=new en,l=new en;function c(r){var i,o;for(i=0,o=r.length-3;i<=o;i+=3){a.fromArray(r,i);var s=u.x*Math.abs(a.x)+u.y*Math.abs(a.y)+u.z*Math.abs(a.z),l=t.dot(a),c=e.dot(a),h=n.dot(a);if(Math.max(-Math.max(l,c,h),Math.min(l,c,h))>s)return!1}return!0}return function(a){if(this.isEmpty())return!1;this.getCenter(s),u.subVectors(this.max,s),t.subVectors(a.a,s),e.subVectors(a.b,s),n.subVectors(a.c,s),r.subVectors(e,t),i.subVectors(n,e),o.subVectors(t,n);var h=[0,-r.z,r.y,0,-i.z,i.y,0,-o.z,o.y,r.z,0,-r.x,i.z,0,-i.x,o.z,0,-o.x,-r.y,r.x,0,-i.y,i.x,0,-o.y,o.x,0];return!!c(h)&&!!c(h=[1,0,0,0,1,0,0,0,1])&&(l.crossVectors(r,i),c(h=[l.x,l.y,l.z]))}}(),clampPoint:function(t,e){return void 0===e&&(console.warn("THREE.Box3: .clampPoint() target is now required"),e=new en),e.copy(t).clamp(this.min,this.max)},distanceToPoint:function(){var t=new en;return function(e){return t.copy(e).clamp(this.min,this.max).sub(e).length()}}(),getBoundingSphere:function(){var t=new en;return function(e){return void 0===e&&(console.warn("THREE.Box3: .getBoundingSphere() target is now required"),e=new gn),this.getCenter(e.center),e.radius=.5*this.getSize(t).length(),e}}(),intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},applyMatrix4:(rn=[new en,new en,new en,new en,new en,new en,new en,new en],function(t){return this.isEmpty()?this:(rn[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),rn[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),rn[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),rn[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),rn[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),rn[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),rn[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),rn[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(rn),this)}),translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}),Object.assign(gn.prototype,{set:function(t,e){return this.center.copy(t),this.radius=e,this},setFromPoints:(an=new vn,function(t,e){var n=this.center;void 0!==e?n.copy(e):an.setFromPoints(t).getCenter(n);for(var r=0,i=0,o=t.length;i<o;i++)r=Math.max(r,n.distanceToSquared(t[i]));return this.radius=Math.sqrt(r),this}),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.center.copy(t.center),this.radius=t.radius,this},empty:function(){return this.radius<=0},containsPoint:function(t){return t.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(t){return t.distanceTo(this.center)-this.radius},intersectsSphere:function(t){var e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e},intersectsBox:function(t){return t.intersectsSphere(this)},intersectsPlane:function(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius},clampPoint:function(t,e){var n=this.center.distanceToSquared(t);return void 0===e&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),e=new en),e.copy(t),n>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e},getBoundingBox:function(t){return void 0===t&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),t=new vn),t.set(this.center,this.center),t.expandByScalar(this.radius),t},applyMatrix4:function(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this},translate:function(t){return this.center.add(t),this},equals:function(t){return t.center.equals(this.center)&&t.radius===this.radius}}),Object.assign(yn.prototype,{set:function(t,e){return this.normal.copy(t),this.constant=e,this},setComponents:function(t,e,n,r){return this.normal.set(t,e,n),this.constant=r,this},setFromNormalAndCoplanarPoint:function(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this},setFromCoplanarPoints:function(){var t=new en,e=new en;return function(n,r,i){var o=t.subVectors(i,r).cross(e.subVectors(n,r)).normalize();return this.setFromNormalAndCoplanarPoint(o,n),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.normal.copy(t.normal),this.constant=t.constant,this},normalize:function(){var t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(t){return this.normal.dot(t)+this.constant},distanceToSphere:function(t){return this.distanceToPoint(t.center)-t.radius},projectPoint:function(t,e){return void 0===e&&(console.warn("THREE.Plane: .projectPoint() target is now required"),e=new en),e.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)},intersectLine:function(){var t=new en;return function(e,n){void 0===n&&(console.warn("THREE.Plane: .intersectLine() target is now required"),n=new en);var r=e.delta(t),i=this.normal.dot(r);if(0===i)return 0===this.distanceToPoint(e.start)?n.copy(e.start):void 0;var o=-(e.start.dot(this.normal)+this.constant)/i;return o<0||o>1?void 0:n.copy(r).multiplyScalar(o).add(e.start)}}(),intersectsLine:function(t){var e=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return e<0&&n>0||n<0&&e>0},intersectsBox:function(t){return t.intersectsPlane(this)},intersectsSphere:function(t){return t.intersectsPlane(this)},coplanarPoint:function(t){return void 0===t&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),t=new en),t.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var t=new en,e=new nn;return function(n,r){var i=r||e.getNormalMatrix(n),o=this.coplanarPoint(t).applyMatrix4(n),a=this.normal.applyMatrix3(i).normalize();return this.constant=-o.dot(a),this}}(),translate:function(t){return this.constant-=t.dot(this.normal),this},equals:function(t){return t.normal.equals(this.normal)&&t.constant===this.constant}}),Object.assign(_n.prototype,{set:function(t,e,n,r,i,o){var a=this.planes;return a[0].copy(t),a[1].copy(e),a[2].copy(n),a[3].copy(r),a[4].copy(i),a[5].copy(o),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){for(var e=this.planes,n=0;n<6;n++)e[n].copy(t.planes[n]);return this},setFromMatrix:function(t){var e=this.planes,n=t.elements,r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],u=n[5],l=n[6],c=n[7],h=n[8],d=n[9],p=n[10],f=n[11],m=n[12],v=n[13],g=n[14],y=n[15];return e[0].setComponents(a-r,c-s,f-h,y-m).normalize(),e[1].setComponents(a+r,c+s,f+h,y+m).normalize(),e[2].setComponents(a+i,c+u,f+d,y+v).normalize(),e[3].setComponents(a-i,c-u,f-d,y-v).normalize(),e[4].setComponents(a-o,c-l,f-p,y-g).normalize(),e[5].setComponents(a+o,c+l,f+p,y+g).normalize(),this},intersectsObject:(un=new gn,function(t){var e=t.geometry;return null===e.boundingSphere&&e.computeBoundingSphere(),un.copy(e.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(un)}),intersectsSprite:function(){var t=new gn;return function(e){return t.center.set(0,0,0),t.radius=.7071067811865476,t.applyMatrix4(e.matrixWorld),this.intersectsSphere(t)}}(),intersectsSphere:function(t){for(var e=this.planes,n=t.center,r=-t.radius,i=0;i<6;i++)if(e[i].distanceToPoint(n)<r)return!1;return!0},intersectsBox:(sn=new en,function(t){for(var e=this.planes,n=0;n<6;n++){var r=e[n];if(sn.x=r.normal.x>0?t.max.x:t.min.x,sn.y=r.normal.y>0?t.max.y:t.min.y,sn.z=r.normal.z>0?t.max.z:t.min.z,r.distanceToPoint(sn)<0)return!1}return!0}),containsPoint:function(t){for(var e=this.planes,n=0;n<6;n++)if(e[n].distanceToPoint(t)<0)return!1;return!0}});var bn={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );",bsdfs:"float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\treturn specularColor * AB.x + AB.y;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG ) && ! defined( MATCAP )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG ) && ! defined( MATCAP )\n\tvarying vec3 vViewPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG ) && ! defined( MATCAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",common:"#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV( sampler2D envMap, vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = normalMatrix * objectNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\treflectVec = normalize( reflectVec );\n\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_pars_fragment:"#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntensity;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent ));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tfogDepth = -mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif",lights_pars_begin:"uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t\tfloat shadowCameraNear;\n\t\tfloat shadowCameraFar;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos - halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos + halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos + halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos - halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearCoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tirradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), maxMipLevel );\n\t#ifndef STANDARD\n\t\tclearCoatRadiance += getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), maxMipLevel );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\tgl_Position.z *= gl_Position.w;\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#ifdef USE_MAP\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif",map_particle_pars_fragment:"#ifdef USE_MAP\n\tuniform mat3 uvTransform;\n\tuniform sampler2D map;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif",normal_fragment_begin:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n#endif",normal_fragment_maps:"#ifdef USE_NORMALMAP\n\t#ifdef OBJECTSPACE_NORMALMAP\n\t\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\t#ifdef FLIP_SIDED\n\t\t\tnormal = - normal;\n\t\t#endif\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t\tnormal = normalize( normalMatrix * normal );\n\t#else\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\t#ifdef OBJECTSPACE_NORMALMAP\n\t\tuniform mat3 normalMatrix;\n\t#else\n\t\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\t\tvec2 st0 = dFdx( vUv.st );\n\t\t\tvec2 st1 = dFdy( vUv.st );\n\t\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\n\t\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\t\tvec3 N = normalize( surf_norm );\n\t\t\tmat3 tsn = mat3( S, T, N );\n\t\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\t\tmapN.xy *= normalScale;\n\t\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\treturn normalize( tsn * mapN );\n\t\t}\n\t#endif\n#endif",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#if defined( DITHERING )\n  gl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#if defined( DITHERING )\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n\t#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( ( color * ( 2.51 * color + 0.03 ) ) / ( color * ( 2.43 * color + 0.59 ) + 0.14 ) );\n}",uv_pars_fragment:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n#endif",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV;\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphysical_frag:"#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <fog_fragment>\n}",shadow_vert:"#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}"};function wn(t){var e={};for(var n in t)for(var r in e[n]={},t[n]){var i=t[n][r];e[n][r]=i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture)?i.clone():Array.isArray(i)?i.slice():i}return e}function xn(t){for(var e={},n=0;n<t.length;n++){var r=wn(t[n]);for(var i in r)e[i]=r[i]}return e}var En,Sn,Tn,Mn={clone:wn,merge:xn},Cn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function An(t,e,n){return void 0===e&&void 0===n?this.set(t):this.setRGB(t,e,n)}Object.assign(An.prototype,{isColor:!0,r:1,g:1,b:1,set:function(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this},setScalar:function(t){return this.r=t,this.g=t,this.b=t,this},setHex:function(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this},setRGB:function(t,e,n){return this.r=t,this.g=e,this.b=n,this},setHSL:function(){function t(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+6*(e-t)*(2/3-n):t}return function(e,n,r){if(e=Qe.euclideanModulo(e,1),n=Qe.clamp(n,0,1),r=Qe.clamp(r,0,1),0===n)this.r=this.g=this.b=r;else{var i=r<=.5?r*(1+n):r+n-r*n,o=2*r-i;this.r=t(o,i,e+1/3),this.g=t(o,i,e),this.b=t(o,i,e-1/3)}return this}}(),setStyle:function(t){function e(e){void 0!==e&&parseFloat(e)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}var n;if(n=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(t)){var r,i=n[2];switch(n[1]){case"rgb":case"rgba":if(r=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(i))return this.r=Math.min(255,parseInt(r[1],10))/255,this.g=Math.min(255,parseInt(r[2],10))/255,this.b=Math.min(255,parseInt(r[3],10))/255,e(r[5]),this;if(r=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(i))return this.r=Math.min(100,parseInt(r[1],10))/100,this.g=Math.min(100,parseInt(r[2],10))/100,this.b=Math.min(100,parseInt(r[3],10))/100,e(r[5]),this;break;case"hsl":case"hsla":if(r=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(i)){var o=parseFloat(r[1])/360,a=parseInt(r[2],10)/100,s=parseInt(r[3],10)/100;return e(r[5]),this.setHSL(o,a,s)}}}else if(n=/^\#([A-Fa-f0-9]+)$/.exec(t)){var u,l=(u=n[1]).length;if(3===l)return this.r=parseInt(u.charAt(0)+u.charAt(0),16)/255,this.g=parseInt(u.charAt(1)+u.charAt(1),16)/255,this.b=parseInt(u.charAt(2)+u.charAt(2),16)/255,this;if(6===l)return this.r=parseInt(u.charAt(0)+u.charAt(1),16)/255,this.g=parseInt(u.charAt(2)+u.charAt(3),16)/255,this.b=parseInt(u.charAt(4)+u.charAt(5),16)/255,this}return t&&t.length>0&&(void 0!==(u=Cn[t])?this.setHex(u):console.warn("THREE.Color: Unknown color "+t)),this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this},copyGammaToLinear:function(t,e){return void 0===e&&(e=2),this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this},copyLinearToGamma:function(t,e){void 0===e&&(e=2);var n=e>0?1/e:1;return this.r=Math.pow(t.r,n),this.g=Math.pow(t.g,n),this.b=Math.pow(t.b,n),this},convertGammaToLinear:function(t){return this.copyGammaToLinear(this,t),this},convertLinearToGamma:function(t){return this.copyLinearToGamma(this,t),this},copySRGBToLinear:function(){function t(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}return function(e){return this.r=t(e.r),this.g=t(e.g),this.b=t(e.b),this}}(),copyLinearToSRGB:function(){function t(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}return function(e){return this.r=t(e.r),this.g=t(e.g),this.b=t(e.b),this}}(),convertSRGBToLinear:function(){return this.copySRGBToLinear(this),this},convertLinearToSRGB:function(){return this.copyLinearToSRGB(this),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(t){void 0===t&&(console.warn("THREE.Color: .getHSL() target is now required"),t={h:0,s:0,l:0});var e,n,r=this.r,i=this.g,o=this.b,a=Math.max(r,i,o),s=Math.min(r,i,o),u=(s+a)/2;if(s===a)e=0,n=0;else{var l=a-s;switch(n=u<=.5?l/(a+s):l/(2-a-s),a){case r:e=(i-o)/l+(i<o?6:0);break;case i:e=(o-r)/l+2;break;case o:e=(r-i)/l+4}e/=6}return t.h=e,t.s=n,t.l=u,t},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:(Tn={},function(t,e,n){return this.getHSL(Tn),Tn.h+=t,Tn.s+=e,Tn.l+=n,this.setHSL(Tn.h,Tn.s,Tn.l),this}),add:function(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this},addColors:function(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this},addScalar:function(t){return this.r+=t,this.g+=t,this.b+=t,this},sub:function(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this},multiply:function(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this},multiplyScalar:function(t){return this.r*=t,this.g*=t,this.b*=t,this},lerp:function(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this},lerpHSL:(En={h:0,s:0,l:0},Sn={h:0,s:0,l:0},function(t,e){this.getHSL(En),t.getHSL(Sn);var n=Qe.lerp(En.h,Sn.h,e),r=Qe.lerp(En.s,Sn.s,e),i=Qe.lerp(En.l,Sn.l,e);return this.setHSL(n,r,i),this}),equals:function(t){return t.r===this.r&&t.g===this.g&&t.b===this.b},fromArray:function(t,e){return void 0===e&&(e=0),this.r=t[e],this.g=t[e+1],this.b=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t},toJSON:function(){return this.getHex()}});var Pn,On={common:{diffuse:{value:new An(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new nn},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Je(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new An(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new An(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},uvTransform:{value:new nn}},sprite:{diffuse:{value:new An(15658734)},opacity:{value:1},center:{value:new Je(.5,.5)},rotation:{value:0},map:{value:null},uvTransform:{value:new nn}}},Rn={basic:{uniforms:xn([On.common,On.specularmap,On.envmap,On.aomap,On.lightmap,On.fog]),vertexShader:bn.meshbasic_vert,fragmentShader:bn.meshbasic_frag},lambert:{uniforms:xn([On.common,On.specularmap,On.envmap,On.aomap,On.lightmap,On.emissivemap,On.fog,On.lights,{emissive:{value:new An(0)}}]),vertexShader:bn.meshlambert_vert,fragmentShader:bn.meshlambert_frag},phong:{uniforms:xn([On.common,On.specularmap,On.envmap,On.aomap,On.lightmap,On.emissivemap,On.bumpmap,On.normalmap,On.displacementmap,On.gradientmap,On.fog,On.lights,{emissive:{value:new An(0)},specular:{value:new An(1118481)},shininess:{value:30}}]),vertexShader:bn.meshphong_vert,fragmentShader:bn.meshphong_frag},standard:{uniforms:xn([On.common,On.envmap,On.aomap,On.lightmap,On.emissivemap,On.bumpmap,On.normalmap,On.displacementmap,On.roughnessmap,On.metalnessmap,On.fog,On.lights,{emissive:{value:new An(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:bn.meshphysical_vert,fragmentShader:bn.meshphysical_frag},matcap:{uniforms:xn([On.common,On.bumpmap,On.normalmap,On.displacementmap,On.fog,{matcap:{value:null}}]),vertexShader:bn.meshmatcap_vert,fragmentShader:bn.meshmatcap_frag},points:{uniforms:xn([On.points,On.fog]),vertexShader:bn.points_vert,fragmentShader:bn.points_frag},dashed:{uniforms:xn([On.common,On.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:bn.linedashed_vert,fragmentShader:bn.linedashed_frag},depth:{uniforms:xn([On.common,On.displacementmap]),vertexShader:bn.depth_vert,fragmentShader:bn.depth_frag},normal:{uniforms:xn([On.common,On.bumpmap,On.normalmap,On.displacementmap,{opacity:{value:1}}]),vertexShader:bn.normal_vert,fragmentShader:bn.normal_frag},sprite:{uniforms:xn([On.sprite,On.fog]),vertexShader:bn.sprite_vert,fragmentShader:bn.sprite_frag},background:{uniforms:{uvTransform:{value:new nn},t2D:{value:null}},vertexShader:bn.background_vert,fragmentShader:bn.background_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:bn.cube_vert,fragmentShader:bn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:bn.equirect_vert,fragmentShader:bn.equirect_frag},distanceRGBA:{uniforms:xn([On.common,On.displacementmap,{referencePosition:{value:new en},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:bn.distanceRGBA_vert,fragmentShader:bn.distanceRGBA_frag},shadow:{uniforms:xn([On.lights,On.fog,{color:{value:new An(0)},opacity:{value:1}}]),vertexShader:bn.shadow_vert,fragmentShader:bn.shadow_frag}};function Ln(){var t=null,e=!1,n=null;function r(i,o){!1!==e&&(n(i,o),t.requestAnimationFrame(r))}return{start:function(){!0!==e&&null!==n&&(t.requestAnimationFrame(r),e=!0)},stop:function(){e=!1},setAnimationLoop:function(t){n=t},setContext:function(e){t=e}}}function In(t,e,n,r,i,o){this.a=t,this.b=e,this.c=n,this.normal=r&&r.isVector3?r:new en,this.vertexNormals=Array.isArray(r)?r:[],this.color=i&&i.isColor?i:new An,this.vertexColors=Array.isArray(i)?i:[],this.materialIndex=void 0!==o?o:0}function Nn(t,e,n,r){this._x=t||0,this._y=e||0,this._z=n||0,this._order=r||Nn.DefaultOrder}function Dn(){this.mask=1}Rn.physical={uniforms:xn([Rn.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:bn.meshphysical_vert,fragmentShader:bn.meshphysical_frag},Object.assign(In.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.a=t.a,this.b=t.b,this.c=t.c,this.normal.copy(t.normal),this.color.copy(t.color),this.materialIndex=t.materialIndex;for(var e=0,n=t.vertexNormals.length;e<n;e++)this.vertexNormals[e]=t.vertexNormals[e].clone();for(e=0,n=t.vertexColors.length;e<n;e++)this.vertexColors[e]=t.vertexColors[e].clone();return this}}),Nn.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],Nn.DefaultOrder="XYZ",Object.defineProperties(Nn.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this.onChangeCallback()}},order:{get:function(){return this._order},set:function(t){this._order=t,this.onChangeCallback()}}}),Object.assign(Nn.prototype,{isEuler:!0,set:function(t,e,n,r){return this._x=t,this._y=e,this._z=n,this._order=r||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this.onChangeCallback(),this},setFromRotationMatrix:function(t,e,n){var r=Qe.clamp,i=t.elements,o=i[0],a=i[4],s=i[8],u=i[1],l=i[5],c=i[9],h=i[2],d=i[6],p=i[10];return"XYZ"===(e=e||this._order)?(this._y=Math.asin(r(s,-1,1)),Math.abs(s)<.99999?(this._x=Math.atan2(-c,p),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(d,l),this._z=0)):"YXZ"===e?(this._x=Math.asin(-r(c,-1,1)),Math.abs(c)<.99999?(this._y=Math.atan2(s,p),this._z=Math.atan2(u,l)):(this._y=Math.atan2(-h,o),this._z=0)):"ZXY"===e?(this._x=Math.asin(r(d,-1,1)),Math.abs(d)<.99999?(this._y=Math.atan2(-h,p),this._z=Math.atan2(-a,l)):(this._y=0,this._z=Math.atan2(u,o))):"ZYX"===e?(this._y=Math.asin(-r(h,-1,1)),Math.abs(h)<.99999?(this._x=Math.atan2(d,p),this._z=Math.atan2(u,o)):(this._x=0,this._z=Math.atan2(-a,l))):"YZX"===e?(this._z=Math.asin(r(u,-1,1)),Math.abs(u)<.99999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-h,o)):(this._x=0,this._y=Math.atan2(s,p))):"XZY"===e?(this._z=Math.asin(-r(a,-1,1)),Math.abs(a)<.99999?(this._x=Math.atan2(d,l),this._y=Math.atan2(s,o)):(this._x=Math.atan2(-c,p),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+e),this._order=e,!1!==n&&this.onChangeCallback(),this},setFromQuaternion:function(){var t=new $e;return function(e,n,r){return t.makeRotationFromQuaternion(e),this.setFromRotationMatrix(t,n,r)}}(),setFromVector3:function(t,e){return this.set(t.x,t.y,t.z,e||this._order)},reorder:(Pn=new tn,function(t){return Pn.setFromEuler(this),this.setFromQuaternion(Pn,t)}),equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order},fromArray:function(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this.onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t},toVector3:function(t){return t?t.set(this._x,this._y,this._z):new en(this._x,this._y,this._z)},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){}}),Object.assign(Dn.prototype,{set:function(t){this.mask=1<<t|0},enable:function(t){this.mask|=1<<t|0},toggle:function(t){this.mask^=1<<t|0},disable:function(t){this.mask&=~(1<<t|0)},test:function(t){return 0!=(this.mask&t.mask)}});var kn,Fn,jn,Un,Bn=0;function Gn(){Object.defineProperty(this,"id",{value:Bn++}),this.uuid=Qe.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Gn.DefaultUp.clone();var t=new en,e=new Nn,n=new tn,r=new en(1,1,1);e.onChange(function(){n.setFromEuler(e,!1)}),n.onChange(function(){e.setFromQuaternion(n,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new $e},normalMatrix:{value:new nn}}),this.matrix=new $e,this.matrixWorld=new $e,this.matrixAutoUpdate=Gn.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Dn,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}Gn.DefaultUp=new en(0,1,0),Gn.DefaultMatrixAutoUpdate=!0,Gn.prototype=Object.assign(Object.create(r.prototype),{constructor:Gn,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(t){this.matrix.multiplyMatrices(t,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(t){return this.quaternion.premultiply(t),this},setRotationFromAxisAngle:function(t,e){this.quaternion.setFromAxisAngle(t,e)},setRotationFromEuler:function(t){this.quaternion.setFromEuler(t,!0)},setRotationFromMatrix:function(t){this.quaternion.setFromRotationMatrix(t)},setRotationFromQuaternion:function(t){this.quaternion.copy(t)},rotateOnAxis:(Un=new tn,function(t,e){return Un.setFromAxisAngle(t,e),this.quaternion.multiply(Un),this}),rotateOnWorldAxis:function(){var t=new tn;return function(e,n){return t.setFromAxisAngle(e,n),this.quaternion.premultiply(t),this}}(),rotateX:function(){var t=new en(1,0,0);return function(e){return this.rotateOnAxis(t,e)}}(),rotateY:function(){var t=new en(0,1,0);return function(e){return this.rotateOnAxis(t,e)}}(),rotateZ:function(){var t=new en(0,0,1);return function(e){return this.rotateOnAxis(t,e)}}(),translateOnAxis:function(){var t=new en;return function(e,n){return t.copy(e).applyQuaternion(this.quaternion),this.position.add(t.multiplyScalar(n)),this}}(),translateX:function(){var t=new en(1,0,0);return function(e){return this.translateOnAxis(t,e)}}(),translateY:function(){var t=new en(0,1,0);return function(e){return this.translateOnAxis(t,e)}}(),translateZ:function(){var t=new en(0,0,1);return function(e){return this.translateOnAxis(t,e)}}(),localToWorld:function(t){return t.applyMatrix4(this.matrixWorld)},worldToLocal:(jn=new $e,function(t){return t.applyMatrix4(jn.getInverse(this.matrixWorld))}),lookAt:function(){var t=new tn,e=new $e,n=new en,r=new en;return function(i,o,a){i.isVector3?n.copy(i):n.set(i,o,a);var s=this.parent;this.updateWorldMatrix(!0,!1),r.setFromMatrixPosition(this.matrixWorld),this.isCamera?e.lookAt(r,n,this.up):e.lookAt(n,r,this.up),this.quaternion.setFromRotationMatrix(e),s&&(e.extractRotation(s.matrixWorld),t.setFromRotationMatrix(e),this.quaternion.premultiply(t.inverse()))}}(),add:function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,t.dispatchEvent({type:"added"}),this.children.push(t)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)},remove:function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}var n=this.children.indexOf(t);return-1!==n&&(t.parent=null,t.dispatchEvent({type:"removed"}),this.children.splice(n,1)),this},getObjectById:function(t){return this.getObjectByProperty("id",t)},getObjectByName:function(t){return this.getObjectByProperty("name",t)},getObjectByProperty:function(t,e){if(this[t]===e)return this;for(var n=0,r=this.children.length;n<r;n++){var i=this.children[n].getObjectByProperty(t,e);if(void 0!==i)return i}},getWorldPosition:function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),t=new en),this.updateMatrixWorld(!0),t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:(kn=new en,Fn=new en,function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),t=new tn),this.updateMatrixWorld(!0),this.matrixWorld.decompose(kn,t,Fn),t}),getWorldScale:function(){var t=new en,e=new tn;return function(n){return void 0===n&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),n=new en),this.updateMatrixWorld(!0),this.matrixWorld.decompose(t,e,n),n}}(),getWorldDirection:function(t){void 0===t&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),t=new en),this.updateMatrixWorld(!0);var e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()},raycast:function(){},traverse:function(t){t(this);for(var e=this.children,n=0,r=e.length;n<r;n++)e[n].traverse(t)},traverseVisible:function(t){if(!1!==this.visible){t(this);for(var e=this.children,n=0,r=e.length;n<r;n++)e[n].traverseVisible(t)}},traverseAncestors:function(t){var e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);for(var e=this.children,n=0,r=e.length;n<r;n++)e[n].updateMatrixWorld(t)},updateWorldMatrix:function(t,e){var n=this.parent;if(!0===t&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===e)for(var r=this.children,i=0,o=r.length;i<o;i++)r[i].updateWorldMatrix(!1,!0)},toJSON:function(t){var e=void 0===t||"string"==typeof t,n={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var r={};function i(e,n){return void 0===e[n.uuid]&&(e[n.uuid]=n.toJSON(t)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isMesh||this.isLine||this.isPoints){r.geometry=i(t.geometries,this.geometry);var o=this.geometry.parameters;if(void 0!==o&&void 0!==o.shapes){var a=o.shapes;if(Array.isArray(a))for(var s=0,u=a.length;s<u;s++)i(t.shapes,a[s]);else i(t.shapes,a)}}if(void 0!==this.material)if(Array.isArray(this.material)){var l=[];for(s=0,u=this.material.length;s<u;s++)l.push(i(t.materials,this.material[s]));r.material=l}else r.material=i(t.materials,this.material);if(this.children.length>0)for(r.children=[],s=0;s<this.children.length;s++)r.children.push(this.children[s].toJSON(t).object);if(e){var c=f(t.geometries),h=f(t.materials),d=f(t.textures),p=f(t.images);a=f(t.shapes),c.length>0&&(n.geometries=c),h.length>0&&(n.materials=h),d.length>0&&(n.textures=d),p.length>0&&(n.images=p),a.length>0&&(n.shapes=a)}return n.object=r,n;function f(t){var e=[];for(var n in t){var r=t[n];delete r.metadata,e.push(r)}return e}},clone:function(t){return(new this.constructor).copy(this,t)},copy:function(t,e){if(void 0===e&&(e=!0),this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(var n=0;n<t.children.length;n++)this.add(t.children[n].clone());return this}});var Vn,zn,Hn=0;function Wn(){Object.defineProperty(this,"id",{value:Hn+=2}),this.uuid=Qe.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}function qn(t,e,n){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=!0===n,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function Xn(t,e,n){qn.call(this,new Int8Array(t),e,n)}function Yn(t,e,n){qn.call(this,new Uint8Array(t),e,n)}function Kn(t,e,n){qn.call(this,new Uint8ClampedArray(t),e,n)}function Zn(t,e,n){qn.call(this,new Int16Array(t),e,n)}function Qn(t,e,n){qn.call(this,new Uint16Array(t),e,n)}function Jn(t,e,n){qn.call(this,new Int32Array(t),e,n)}function $n(t,e,n){qn.call(this,new Uint32Array(t),e,n)}function tr(t,e,n){qn.call(this,new Float32Array(t),e,n)}function er(t,e,n){qn.call(this,new Float64Array(t),e,n)}function nr(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function rr(t){if(0===t.length)return-1/0;for(var e=t[0],n=1,r=t.length;n<r;++n)t[n]>e&&(e=t[n]);return e}Wn.prototype=Object.assign(Object.create(r.prototype),{constructor:Wn,isGeometry:!0,applyMatrix:function(t){for(var e=(new nn).getNormalMatrix(t),n=0,r=this.vertices.length;n<r;n++)this.vertices[n].applyMatrix4(t);for(n=0,r=this.faces.length;n<r;n++){var i=this.faces[n];i.normal.applyMatrix3(e).normalize();for(var o=0,a=i.vertexNormals.length;o<a;o++)i.vertexNormals[o].applyMatrix3(e).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(){var t=new $e;return function(e){return t.makeRotationX(e),this.applyMatrix(t),this}}(),rotateY:function(){var t=new $e;return function(e){return t.makeRotationY(e),this.applyMatrix(t),this}}(),rotateZ:function(){var t=new $e;return function(e){return t.makeRotationZ(e),this.applyMatrix(t),this}}(),translate:function(){var t=new $e;return function(e,n,r){return t.makeTranslation(e,n,r),this.applyMatrix(t),this}}(),scale:function(){var t=new $e;return function(e,n,r){return t.makeScale(e,n,r),this.applyMatrix(t),this}}(),lookAt:(zn=new Gn,function(t){zn.lookAt(t),zn.updateMatrix(),this.applyMatrix(zn.matrix)}),fromBufferGeometry:function(t){var e=this,n=null!==t.index?t.index.array:void 0,r=t.attributes,i=r.position.array,o=void 0!==r.normal?r.normal.array:void 0,a=void 0!==r.color?r.color.array:void 0,s=void 0!==r.uv?r.uv.array:void 0,u=void 0!==r.uv2?r.uv2.array:void 0;void 0!==u&&(this.faceVertexUvs[1]=[]);for(var l=0,c=0;l<i.length;l+=3,c+=2)e.vertices.push((new en).fromArray(i,l)),void 0!==a&&e.colors.push((new An).fromArray(a,l));function h(t,n,r,i){var l=void 0===a?[]:[e.colors[t].clone(),e.colors[n].clone(),e.colors[r].clone()],c=new In(t,n,r,void 0===o?[]:[(new en).fromArray(o,3*t),(new en).fromArray(o,3*n),(new en).fromArray(o,3*r)],l,i);e.faces.push(c),void 0!==s&&e.faceVertexUvs[0].push([(new Je).fromArray(s,2*t),(new Je).fromArray(s,2*n),(new Je).fromArray(s,2*r)]),void 0!==u&&e.faceVertexUvs[1].push([(new Je).fromArray(u,2*t),(new Je).fromArray(u,2*n),(new Je).fromArray(u,2*r)])}var d=t.groups;if(d.length>0)for(l=0;l<d.length;l++)for(var p=d[l],f=p.start,m=(c=f,f+p.count);c<m;c+=3)void 0!==n?h(n[c],n[c+1],n[c+2],p.materialIndex):h(c,c+1,c+2,p.materialIndex);else if(void 0!==n)for(l=0;l<n.length;l+=3)h(n[l],n[l+1],n[l+2]);else for(l=0;l<i.length/3;l+=3)h(l,l+1,l+2);return this.computeFaceNormals(),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this},center:(Vn=new en,function(){return this.computeBoundingBox(),this.boundingBox.getCenter(Vn).negate(),this.translate(Vn.x,Vn.y,Vn.z),this}),normalize:function(){this.computeBoundingSphere();var t=this.boundingSphere.center,e=this.boundingSphere.radius,n=0===e?1:1/e,r=new $e;return r.set(n,0,0,-n*t.x,0,n,0,-n*t.y,0,0,n,-n*t.z,0,0,0,1),this.applyMatrix(r),this},computeFaceNormals:function(){for(var t=new en,e=new en,n=0,r=this.faces.length;n<r;n++){var i=this.faces[n],o=this.vertices[i.a],a=this.vertices[i.b];t.subVectors(this.vertices[i.c],a),e.subVectors(o,a),t.cross(e),t.normalize(),i.normal.copy(t)}},computeVertexNormals:function(t){var e,n,r,i,o,a;for(void 0===t&&(t=!0),a=new Array(this.vertices.length),e=0,n=this.vertices.length;e<n;e++)a[e]=new en;if(t){var s,u,l=new en,c=new en;for(r=0,i=this.faces.length;r<i;r++)s=this.vertices[(o=this.faces[r]).a],l.subVectors(this.vertices[o.c],u=this.vertices[o.b]),c.subVectors(s,u),l.cross(c),a[o.a].add(l),a[o.b].add(l),a[o.c].add(l)}else for(this.computeFaceNormals(),r=0,i=this.faces.length;r<i;r++)a[(o=this.faces[r]).a].add(o.normal),a[o.b].add(o.normal),a[o.c].add(o.normal);for(e=0,n=this.vertices.length;e<n;e++)a[e].normalize();for(r=0,i=this.faces.length;r<i;r++){var h=(o=this.faces[r]).vertexNormals;3===h.length?(h[0].copy(a[o.a]),h[1].copy(a[o.b]),h[2].copy(a[o.c])):(h[0]=a[o.a].clone(),h[1]=a[o.b].clone(),h[2]=a[o.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var t,e,n;for(this.computeFaceNormals(),t=0,e=this.faces.length;t<e;t++){var r=(n=this.faces[t]).vertexNormals;3===r.length?(r[0].copy(n.normal),r[1].copy(n.normal),r[2].copy(n.normal)):(r[0]=n.normal.clone(),r[1]=n.normal.clone(),r[2]=n.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var t,e,n,r,i;for(n=0,r=this.faces.length;n<r;n++)for((i=this.faces[n]).__originalFaceNormal?i.__originalFaceNormal.copy(i.normal):i.__originalFaceNormal=i.normal.clone(),i.__originalVertexNormals||(i.__originalVertexNormals=[]),t=0,e=i.vertexNormals.length;t<e;t++)i.__originalVertexNormals[t]?i.__originalVertexNormals[t].copy(i.vertexNormals[t]):i.__originalVertexNormals[t]=i.vertexNormals[t].clone();var o=new Wn;for(o.faces=this.faces,t=0,e=this.morphTargets.length;t<e;t++){if(!this.morphNormals[t]){this.morphNormals[t]={},this.morphNormals[t].faceNormals=[],this.morphNormals[t].vertexNormals=[];var a=this.morphNormals[t].faceNormals,s=this.morphNormals[t].vertexNormals;for(n=0,r=this.faces.length;n<r;n++)u=new en,l={a:new en,b:new en,c:new en},a.push(u),s.push(l)}var u,l,c=this.morphNormals[t];for(o.vertices=this.morphTargets[t].vertices,o.computeFaceNormals(),o.computeVertexNormals(),n=0,r=this.faces.length;n<r;n++)l=c.vertexNormals[n],(u=c.faceNormals[n]).copy((i=this.faces[n]).normal),l.a.copy(i.vertexNormals[0]),l.b.copy(i.vertexNormals[1]),l.c.copy(i.vertexNormals[2])}for(n=0,r=this.faces.length;n<r;n++)(i=this.faces[n]).normal=i.__originalFaceNormal,i.vertexNormals=i.__originalVertexNormals},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new vn),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new gn),this.boundingSphere.setFromPoints(this.vertices)},merge:function(t,e,n){if(t&&t.isGeometry){var r,i=this.vertices.length,o=this.vertices,a=t.vertices,s=this.faces,u=t.faces,l=this.faceVertexUvs[0],c=t.faceVertexUvs[0],h=this.colors,d=t.colors;void 0===n&&(n=0),void 0!==e&&(r=(new nn).getNormalMatrix(e));for(var p=0,f=a.length;p<f;p++){var m=a[p].clone();void 0!==e&&m.applyMatrix4(e),o.push(m)}for(p=0,f=d.length;p<f;p++)h.push(d[p].clone());for(p=0,f=u.length;p<f;p++){var v,g,y=u[p],_=y.vertexNormals,b=y.vertexColors;(v=new In(y.a+i,y.b+i,y.c+i)).normal.copy(y.normal),void 0!==r&&v.normal.applyMatrix3(r).normalize();for(var w=0,x=_.length;w<x;w++)g=_[w].clone(),void 0!==r&&g.applyMatrix3(r).normalize(),v.vertexNormals.push(g);for(v.color.copy(y.color),w=0,x=b.length;w<x;w++)v.vertexColors.push(b[w].clone());v.materialIndex=y.materialIndex+n,s.push(v)}for(p=0,f=c.length;p<f;p++){var E=c[p],S=[];if(void 0!==E){for(w=0,x=E.length;w<x;w++)S.push(E[w].clone());l.push(S)}}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",t)},mergeMesh:function(t){t&&t.isMesh?(t.matrixAutoUpdate&&t.updateMatrix(),this.merge(t.geometry,t.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",t)},mergeVertices:function(){var t,e,n,r,i,o,a,s,u={},l=[],c=[],h=Math.pow(10,4);for(n=0,r=this.vertices.length;n<r;n++)t=this.vertices[n],void 0===u[e=Math.round(t.x*h)+"_"+Math.round(t.y*h)+"_"+Math.round(t.z*h)]?(u[e]=n,l.push(this.vertices[n]),c[n]=l.length-1):c[n]=c[u[e]];var d=[];for(n=0,r=this.faces.length;n<r;n++){(i=this.faces[n]).a=c[i.a],i.b=c[i.b],i.c=c[i.c],o=[i.a,i.b,i.c];for(var p=0;p<3;p++)if(o[p]===o[(p+1)%3]){d.push(n);break}}for(n=d.length-1;n>=0;n--){var f=d[n];for(this.faces.splice(f,1),a=0,s=this.faceVertexUvs.length;a<s;a++)this.faceVertexUvs[a].splice(f,1)}var m=this.vertices.length-l.length;return this.vertices=l,m},setFromPoints:function(t){this.vertices=[];for(var e=0,n=t.length;e<n;e++){var r=t[e];this.vertices.push(new en(r.x,r.y,r.z||0))}return this},sortFacesByMaterialIndex:function(){for(var t=this.faces,e=t.length,n=0;n<e;n++)t[n]._id=n;t.sort(function(t,e){return t.materialIndex-e.materialIndex});var r,i,o=this.faceVertexUvs[0],a=this.faceVertexUvs[1];for(o&&o.length===e&&(r=[]),a&&a.length===e&&(i=[]),n=0;n<e;n++){var s=t[n]._id;r&&r.push(o[s]),i&&i.push(a[s])}r&&(this.faceVertexUvs[0]=r),i&&(this.faceVertexUvs[1]=i)},toJSON:function(){var t={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),void 0!==this.parameters){var e=this.parameters;for(var n in e)void 0!==e[n]&&(t[n]=e[n]);return t}for(var r=[],i=0;i<this.vertices.length;i++){var o=this.vertices[i];r.push(o.x,o.y,o.z)}var a=[],s=[],u={},l=[],c={},h=[],d={};for(i=0;i<this.faces.length;i++){var p=this.faces[i],f=void 0!==this.faceVertexUvs[0][i],m=p.normal.length()>0,v=p.vertexNormals.length>0,g=1!==p.color.r||1!==p.color.g||1!==p.color.b,y=p.vertexColors.length>0,_=0;if(_=E(_=E(_=E(_=E(_=E(_=E(_=E(_=E(_,0,0),1,!0),2,!1),3,f),4,m),5,v),6,g),7,y),a.push(_),a.push(p.a,p.b,p.c),a.push(p.materialIndex),f){var b=this.faceVertexUvs[0][i];a.push(M(b[0]),M(b[1]),M(b[2]))}if(m&&a.push(S(p.normal)),v){var w=p.vertexNormals;a.push(S(w[0]),S(w[1]),S(w[2]))}if(g&&a.push(T(p.color)),y){var x=p.vertexColors;a.push(T(x[0]),T(x[1]),T(x[2]))}}function E(t,e,n){return n?t|1<<e:t&~(1<<e)}function S(t){var e=t.x.toString()+t.y.toString()+t.z.toString();return void 0!==u[e]?u[e]:(u[e]=s.length/3,s.push(t.x,t.y,t.z),u[e])}function T(t){var e=t.r.toString()+t.g.toString()+t.b.toString();return void 0!==c[e]?c[e]:(c[e]=l.length,l.push(t.getHex()),c[e])}function M(t){var e=t.x.toString()+t.y.toString();return void 0!==d[e]?d[e]:(d[e]=h.length/2,h.push(t.x,t.y),d[e])}return t.data={},t.data.vertices=r,t.data.normals=s,l.length>0&&(t.data.colors=l),h.length>0&&(t.data.uvs=[h]),t.data.faces=a,t},clone:function(){return(new Wn).copy(this)},copy:function(t){var e,n,r,i,o,a;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=t.name;var s=t.vertices;for(e=0,n=s.length;e<n;e++)this.vertices.push(s[e].clone());var u=t.colors;for(e=0,n=u.length;e<n;e++)this.colors.push(u[e].clone());var l=t.faces;for(e=0,n=l.length;e<n;e++)this.faces.push(l[e].clone());for(e=0,n=t.faceVertexUvs.length;e<n;e++){var c=t.faceVertexUvs[e];for(void 0===this.faceVertexUvs[e]&&(this.faceVertexUvs[e]=[]),r=0,i=c.length;r<i;r++){var h=c[r],d=[];for(o=0,a=h.length;o<a;o++)d.push(h[o].clone());this.faceVertexUvs[e].push(d)}}var p=t.morphTargets;for(e=0,n=p.length;e<n;e++){var f={};if(f.name=p[e].name,void 0!==p[e].vertices)for(f.vertices=[],r=0,i=p[e].vertices.length;r<i;r++)f.vertices.push(p[e].vertices[r].clone());if(void 0!==p[e].normals)for(f.normals=[],r=0,i=p[e].normals.length;r<i;r++)f.normals.push(p[e].normals[r].clone());this.morphTargets.push(f)}var m=t.morphNormals;for(e=0,n=m.length;e<n;e++){var v={};if(void 0!==m[e].vertexNormals)for(v.vertexNormals=[],r=0,i=m[e].vertexNormals.length;r<i;r++){var g=m[e].vertexNormals[r],y={};y.a=g.a.clone(),y.b=g.b.clone(),y.c=g.c.clone(),v.vertexNormals.push(y)}if(void 0!==m[e].faceNormals)for(v.faceNormals=[],r=0,i=m[e].faceNormals.length;r<i;r++)v.faceNormals.push(m[e].faceNormals[r].clone());this.morphNormals.push(v)}var _=t.skinWeights;for(e=0,n=_.length;e<n;e++)this.skinWeights.push(_[e].clone());var b=t.skinIndices;for(e=0,n=b.length;e<n;e++)this.skinIndices.push(b[e].clone());var w=t.lineDistances;for(e=0,n=w.length;e<n;e++)this.lineDistances.push(w[e]);var x=t.boundingBox;null!==x&&(this.boundingBox=x.clone());var E=t.boundingSphere;return null!==E&&(this.boundingSphere=E.clone()),this.elementsNeedUpdate=t.elementsNeedUpdate,this.verticesNeedUpdate=t.verticesNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.lineDistancesNeedUpdate=t.lineDistancesNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(qn.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(qn.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setArray:function(t){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");return this.count=void 0!==t?t.length/this.itemSize:0,this.array=t,this},setDynamic:function(t){return this.dynamic=t,this},copy:function(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.dynamic=t.dynamic,this},copyAt:function(t,e,n){t*=this.itemSize,n*=e.itemSize;for(var r=0,i=this.itemSize;r<i;r++)this.array[t+r]=e.array[n+r];return this},copyArray:function(t){return this.array.set(t),this},copyColorsArray:function(t){for(var e=this.array,n=0,r=0,i=t.length;r<i;r++){var o=t[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),o=new An),e[n++]=o.r,e[n++]=o.g,e[n++]=o.b}return this},copyVector2sArray:function(t){for(var e=this.array,n=0,r=0,i=t.length;r<i;r++){var o=t[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),o=new Je),e[n++]=o.x,e[n++]=o.y}return this},copyVector3sArray:function(t){for(var e=this.array,n=0,r=0,i=t.length;r<i;r++){var o=t[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),o=new en),e[n++]=o.x,e[n++]=o.y,e[n++]=o.z}return this},copyVector4sArray:function(t){for(var e=this.array,n=0,r=0,i=t.length;r<i;r++){var o=t[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),o=new dn),e[n++]=o.x,e[n++]=o.y,e[n++]=o.z,e[n++]=o.w}return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},getX:function(t){return this.array[t*this.itemSize]},setX:function(t,e){return this.array[t*this.itemSize]=e,this},getY:function(t){return this.array[t*this.itemSize+1]},setY:function(t,e){return this.array[t*this.itemSize+1]=e,this},getZ:function(t){return this.array[t*this.itemSize+2]},setZ:function(t,e){return this.array[t*this.itemSize+2]=e,this},getW:function(t){return this.array[t*this.itemSize+3]},setW:function(t,e){return this.array[t*this.itemSize+3]=e,this},setXY:function(t,e,n){return this.array[0+(t*=this.itemSize)]=e,this.array[t+1]=n,this},setXYZ:function(t,e,n,r){return this.array[0+(t*=this.itemSize)]=e,this.array[t+1]=n,this.array[t+2]=r,this},setXYZW:function(t,e,n,r,i){return this.array[0+(t*=this.itemSize)]=e,this.array[t+1]=n,this.array[t+2]=r,this.array[t+3]=i,this},onUpload:function(t){return this.onUploadCallback=t,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)}}),(Xn.prototype=Object.create(qn.prototype)).constructor=Xn,(Yn.prototype=Object.create(qn.prototype)).constructor=Yn,(Kn.prototype=Object.create(qn.prototype)).constructor=Kn,(Zn.prototype=Object.create(qn.prototype)).constructor=Zn,(Qn.prototype=Object.create(qn.prototype)).constructor=Qn,(Jn.prototype=Object.create(qn.prototype)).constructor=Jn,($n.prototype=Object.create(qn.prototype)).constructor=$n,(tr.prototype=Object.create(qn.prototype)).constructor=tr,(er.prototype=Object.create(qn.prototype)).constructor=er,Object.assign(nr.prototype,{computeGroups:function(t){for(var e,n=[],r=void 0,i=t.faces,o=0;o<i.length;o++){var a=i[o];a.materialIndex!==r&&(r=a.materialIndex,void 0!==e&&(e.count=3*o-e.start,n.push(e)),e={start:3*o,materialIndex:r})}void 0!==e&&(e.count=3*o-e.start,n.push(e)),this.groups=n},fromGeometry:function(t){var e,n=t.faces,r=t.vertices,i=t.faceVertexUvs,o=i[0]&&i[0].length>0,a=i[1]&&i[1].length>0,s=t.morphTargets,u=s.length;if(u>0){e=[];for(var l=0;l<u;l++)e[l]={name:s[l].name,data:[]};this.morphTargets.position=e}var c,h=t.morphNormals,d=h.length;if(d>0){for(c=[],l=0;l<d;l++)c[l]={name:h[l].name,data:[]};this.morphTargets.normal=c}var p=t.skinIndices,f=t.skinWeights,m=p.length===r.length,v=f.length===r.length;for(r.length>0&&0===n.length&&console.error("THREE.DirectGeometry: Faceless geometries are not supported."),l=0;l<n.length;l++){var g=n[l];this.vertices.push(r[g.a],r[g.b],r[g.c]);var y=g.vertexNormals;if(3===y.length)this.normals.push(y[0],y[1],y[2]);else{var _=g.normal;this.normals.push(_,_,_)}var b,w=g.vertexColors;if(3===w.length)this.colors.push(w[0],w[1],w[2]);else{var x=g.color;this.colors.push(x,x,x)}!0===o&&(void 0!==(b=i[0][l])?this.uvs.push(b[0],b[1],b[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",l),this.uvs.push(new Je,new Je,new Je))),!0===a&&(void 0!==(b=i[1][l])?this.uvs2.push(b[0],b[1],b[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",l),this.uvs2.push(new Je,new Je,new Je)));for(var E=0;E<u;E++){var S=s[E].vertices;e[E].data.push(S[g.a],S[g.b],S[g.c])}for(E=0;E<d;E++){var T=h[E].vertexNormals[l];c[E].data.push(T.a,T.b,T.c)}m&&this.skinIndices.push(p[g.a],p[g.b],p[g.c]),v&&this.skinWeights.push(f[g.a],f[g.b],f[g.c])}return this.computeGroups(t),this.verticesNeedUpdate=t.verticesNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this}});var ir=1;function or(){Object.defineProperty(this,"id",{value:ir+=2}),this.uuid=Qe.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}function ar(t,e,n,r,i,o){Wn.call(this),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:r,heightSegments:i,depthSegments:o},this.fromBufferGeometry(new sr(t,e,n,r,i,o)),this.mergeVertices()}function sr(t,e,n,r,i,o){or.call(this),this.type="BoxBufferGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:r,heightSegments:i,depthSegments:o};var a=this;t=t||1,e=e||1,n=n||1,r=Math.floor(r)||1,i=Math.floor(i)||1;var s=[],u=[],l=[],c=[],h=0,d=0;function p(t,e,n,r,i,o,p,f,m,v,g){var y,_,b=o/m,w=p/v,x=o/2,E=p/2,S=f/2,T=m+1,M=v+1,C=0,A=0,P=new en;for(_=0;_<M;_++){var O=_*w-E;for(y=0;y<T;y++)P[t]=(y*b-x)*r,P[e]=O*i,P[n]=S,u.push(P.x,P.y,P.z),P[t]=0,P[e]=0,P[n]=f>0?1:-1,l.push(P.x,P.y,P.z),c.push(y/m),c.push(1-_/v),C+=1}for(_=0;_<v;_++)for(y=0;y<m;y++){var R=h+y+T*(_+1),L=h+(y+1)+T*(_+1),I=h+(y+1)+T*_;s.push(h+y+T*_,R,I),s.push(R,L,I),A+=6}a.addGroup(d,A,g),d+=A,h+=C}p("z","y","x",-1,-1,n,e,t,o=Math.floor(o)||1,i,0),p("z","y","x",1,-1,n,e,-t,o,i,1),p("x","z","y",1,1,t,n,e,r,o,2),p("x","z","y",1,-1,t,n,-e,r,o,3),p("x","y","z",1,-1,t,e,n,r,i,4),p("x","y","z",-1,-1,t,e,-n,r,i,5),this.setIndex(s),this.addAttribute("position",new tr(u,3)),this.addAttribute("normal",new tr(l,3)),this.addAttribute("uv",new tr(c,2))}function ur(t,e,n,r){Wn.call(this),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:r},this.fromBufferGeometry(new lr(t,e,n,r)),this.mergeVertices()}function lr(t,e,n,r){or.call(this),this.type="PlaneBufferGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:r};var i,o,a=(t=t||1)/2,s=(e=e||1)/2,u=Math.floor(n)||1,l=Math.floor(r)||1,c=u+1,h=l+1,d=t/u,p=e/l,f=[],m=[],v=[],g=[];for(o=0;o<h;o++){var y=o*p-s;for(i=0;i<c;i++)m.push(i*d-a,-y,0),v.push(0,0,1),g.push(i/u),g.push(1-o/l)}for(o=0;o<l;o++)for(i=0;i<u;i++){var _=i+c*(o+1),b=i+1+c*(o+1),w=i+1+c*o;f.push(i+c*o,_,w),f.push(_,b,w)}this.setIndex(f),this.addAttribute("position",new tr(m,3)),this.addAttribute("normal",new tr(v,3)),this.addAttribute("uv",new tr(g,2))}or.prototype=Object.assign(Object.create(r.prototype),{constructor:or,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(t){this.index=Array.isArray(t)?new(rr(t)>65535?$n:Qn)(t,1):t},addAttribute:function(t,e){return e&&e.isBufferAttribute||e&&e.isInterleavedBufferAttribute?"index"===t?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(e),this):(this.attributes[t]=e,this):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.addAttribute(t,new qn(arguments[1],arguments[2])))},getAttribute:function(t){return this.attributes[t]},removeAttribute:function(t){return delete this.attributes[t],this},addGroup:function(t,e,n){this.groups.push({start:t,count:e,materialIndex:void 0!==n?n:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(t,e){this.drawRange.start=t,this.drawRange.count=e},applyMatrix:function(t){var e=this.attributes.position;void 0!==e&&(t.applyToBufferAttribute(e),e.needsUpdate=!0);var n=this.attributes.normal;return void 0!==n&&((new nn).getNormalMatrix(t).applyToBufferAttribute(n),n.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(){var t=new $e;return function(e){return t.makeRotationX(e),this.applyMatrix(t),this}}(),rotateY:function(){var t=new $e;return function(e){return t.makeRotationY(e),this.applyMatrix(t),this}}(),rotateZ:function(){var t=new $e;return function(e){return t.makeRotationZ(e),this.applyMatrix(t),this}}(),translate:function(){var t=new $e;return function(e,n,r){return t.makeTranslation(e,n,r),this.applyMatrix(t),this}}(),scale:function(){var t=new $e;return function(e,n,r){return t.makeScale(e,n,r),this.applyMatrix(t),this}}(),lookAt:function(){var t=new Gn;return function(e){t.lookAt(e),t.updateMatrix(),this.applyMatrix(t.matrix)}}(),center:function(){var t=new en;return function(){return this.computeBoundingBox(),this.boundingBox.getCenter(t).negate(),this.translate(t.x,t.y,t.z),this}}(),setFromObject:function(t){var e=t.geometry;if(t.isPoints||t.isLine){var n=new tr(3*e.vertices.length,3),r=new tr(3*e.colors.length,3);if(this.addAttribute("position",n.copyVector3sArray(e.vertices)),this.addAttribute("color",r.copyColorsArray(e.colors)),e.lineDistances&&e.lineDistances.length===e.vertices.length){var i=new tr(e.lineDistances.length,1);this.addAttribute("lineDistance",i.copyArray(e.lineDistances))}null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone())}else t.isMesh&&e&&e.isGeometry&&this.fromGeometry(e);return this},setFromPoints:function(t){for(var e=[],n=0,r=t.length;n<r;n++){var i=t[n];e.push(i.x,i.y,i.z||0)}return this.addAttribute("position",new tr(e,3)),this},updateFromObject:function(t){var e,n=t.geometry;if(t.isMesh){var r=n.__directGeometry;if(!0===n.elementsNeedUpdate&&(r=void 0,n.elementsNeedUpdate=!1),void 0===r)return this.fromGeometry(n);r.verticesNeedUpdate=n.verticesNeedUpdate,r.normalsNeedUpdate=n.normalsNeedUpdate,r.colorsNeedUpdate=n.colorsNeedUpdate,r.uvsNeedUpdate=n.uvsNeedUpdate,r.groupsNeedUpdate=n.groupsNeedUpdate,n.verticesNeedUpdate=!1,n.normalsNeedUpdate=!1,n.colorsNeedUpdate=!1,n.uvsNeedUpdate=!1,n.groupsNeedUpdate=!1,n=r}return!0===n.verticesNeedUpdate&&(void 0!==(e=this.attributes.position)&&(e.copyVector3sArray(n.vertices),e.needsUpdate=!0),n.verticesNeedUpdate=!1),!0===n.normalsNeedUpdate&&(void 0!==(e=this.attributes.normal)&&(e.copyVector3sArray(n.normals),e.needsUpdate=!0),n.normalsNeedUpdate=!1),!0===n.colorsNeedUpdate&&(void 0!==(e=this.attributes.color)&&(e.copyColorsArray(n.colors),e.needsUpdate=!0),n.colorsNeedUpdate=!1),n.uvsNeedUpdate&&(void 0!==(e=this.attributes.uv)&&(e.copyVector2sArray(n.uvs),e.needsUpdate=!0),n.uvsNeedUpdate=!1),n.lineDistancesNeedUpdate&&(void 0!==(e=this.attributes.lineDistance)&&(e.copyArray(n.lineDistances),e.needsUpdate=!0),n.lineDistancesNeedUpdate=!1),n.groupsNeedUpdate&&(n.computeGroups(t.geometry),this.groups=n.groups,n.groupsNeedUpdate=!1),this},fromGeometry:function(t){return t.__directGeometry=(new nr).fromGeometry(t),this.fromDirectGeometry(t.__directGeometry)},fromDirectGeometry:function(t){var e=new Float32Array(3*t.vertices.length);if(this.addAttribute("position",new qn(e,3).copyVector3sArray(t.vertices)),t.normals.length>0){var n=new Float32Array(3*t.normals.length);this.addAttribute("normal",new qn(n,3).copyVector3sArray(t.normals))}if(t.colors.length>0){var r=new Float32Array(3*t.colors.length);this.addAttribute("color",new qn(r,3).copyColorsArray(t.colors))}if(t.uvs.length>0){var i=new Float32Array(2*t.uvs.length);this.addAttribute("uv",new qn(i,2).copyVector2sArray(t.uvs))}if(t.uvs2.length>0){var o=new Float32Array(2*t.uvs2.length);this.addAttribute("uv2",new qn(o,2).copyVector2sArray(t.uvs2))}for(var a in this.groups=t.groups,t.morphTargets){for(var s=[],u=t.morphTargets[a],l=0,c=u.length;l<c;l++){var h=u[l],d=new tr(3*h.data.length,3);d.name=h.name,s.push(d.copyVector3sArray(h.data))}this.morphAttributes[a]=s}if(t.skinIndices.length>0){var p=new tr(4*t.skinIndices.length,4);this.addAttribute("skinIndex",p.copyVector4sArray(t.skinIndices))}if(t.skinWeights.length>0){var f=new tr(4*t.skinWeights.length,4);this.addAttribute("skinWeight",f.copyVector4sArray(t.skinWeights))}return null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new vn);var t=this.attributes.position;void 0!==t?this.boundingBox.setFromBufferAttribute(t):this.boundingBox.makeEmpty(),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){var t=new vn,e=new en;return function(){null===this.boundingSphere&&(this.boundingSphere=new gn);var n=this.attributes.position;if(n){var r=this.boundingSphere.center;t.setFromBufferAttribute(n),t.getCenter(r);for(var i=0,o=0,a=n.count;o<a;o++)e.x=n.getX(o),e.y=n.getY(o),e.z=n.getZ(o),i=Math.max(i,r.distanceToSquared(e));this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var t=this.index,e=this.attributes;if(e.position){var n=e.position.array;if(void 0===e.normal)this.addAttribute("normal",new qn(new Float32Array(n.length),3));else for(var r=e.normal.array,i=0,o=r.length;i<o;i++)r[i]=0;var a,s,u,l=e.normal.array,c=new en,h=new en,d=new en,p=new en,f=new en;if(t){var m=t.array;for(i=0,o=t.count;i<o;i+=3)s=3*m[i+1],u=3*m[i+2],c.fromArray(n,a=3*m[i+0]),h.fromArray(n,s),d.fromArray(n,u),p.subVectors(d,h),f.subVectors(c,h),p.cross(f),l[a]+=p.x,l[a+1]+=p.y,l[a+2]+=p.z,l[s]+=p.x,l[s+1]+=p.y,l[s+2]+=p.z,l[u]+=p.x,l[u+1]+=p.y,l[u+2]+=p.z}else for(i=0,o=n.length;i<o;i+=9)c.fromArray(n,i),h.fromArray(n,i+3),d.fromArray(n,i+6),p.subVectors(d,h),f.subVectors(c,h),p.cross(f),l[i]=p.x,l[i+1]=p.y,l[i+2]=p.z,l[i+3]=p.x,l[i+4]=p.y,l[i+5]=p.z,l[i+6]=p.x,l[i+7]=p.y,l[i+8]=p.z;this.normalizeNormals(),e.normal.needsUpdate=!0}},merge:function(t,e){if(t&&t.isBufferGeometry){void 0===e&&(e=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var n=this.attributes;for(var r in n)if(void 0!==t.attributes[r])for(var i=n[r].array,o=t.attributes[r],a=o.array,s=0,u=o.itemSize*e;s<a.length;s++,u++)i[u]=a[s];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t)},normalizeNormals:function(){var t=new en;return function(){for(var e=this.attributes.normal,n=0,r=e.count;n<r;n++)t.x=e.getX(n),t.y=e.getY(n),t.z=e.getZ(n),t.normalize(),e.setXYZ(n,t.x,t.y,t.z)}}(),toNonIndexed:function(){if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var t=new or,e=this.index.array,n=this.attributes;for(var r in n){for(var i=n[r],o=i.array,a=i.itemSize,s=new o.constructor(e.length*a),u=0,l=0,c=0,h=e.length;c<h;c++){u=e[c]*a;for(var d=0;d<a;d++)s[l++]=o[u++]}t.addAttribute(r,new qn(s,a))}var p=this.groups;for(c=0,h=p.length;c<h;c++){var f=p[c];t.addGroup(f.start,f.count,f.materialIndex)}return t},toJSON:function(){var t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){var e=this.parameters;for(var n in e)void 0!==e[n]&&(t[n]=e[n]);return t}t.data={attributes:{}};var r=this.index;if(null!==r){var i=Array.prototype.slice.call(r.array);t.data.index={type:r.array.constructor.name,array:i}}var o=this.attributes;for(var n in o){var a=o[n];i=Array.prototype.slice.call(a.array),t.data.attributes[n]={itemSize:a.itemSize,type:a.array.constructor.name,array:i,normalized:a.normalized}}var s=this.groups;s.length>0&&(t.data.groups=JSON.parse(JSON.stringify(s)));var u=this.boundingSphere;return null!==u&&(t.data.boundingSphere={center:u.center.toArray(),radius:u.radius}),t},clone:function(){return(new or).copy(this)},copy:function(t){var e,n,r;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=t.name;var i=t.index;null!==i&&this.setIndex(i.clone());var o=t.attributes;for(e in o)this.addAttribute(e,o[e].clone());var a=t.morphAttributes;for(e in a){var s=[],u=a[e];for(n=0,r=u.length;n<r;n++)s.push(u[n].clone());this.morphAttributes[e]=s}var l=t.groups;for(n=0,r=l.length;n<r;n++){var c=l[n];this.addGroup(c.start,c.count,c.materialIndex)}var h=t.boundingBox;null!==h&&(this.boundingBox=h.clone());var d=t.boundingSphere;return null!==d&&(this.boundingSphere=d.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),(ar.prototype=Object.create(Wn.prototype)).constructor=ar,(sr.prototype=Object.create(or.prototype)).constructor=sr,(ur.prototype=Object.create(Wn.prototype)).constructor=ur,(lr.prototype=Object.create(or.prototype)).constructor=lr;var cr,hr,dr,pr,fr,mr,vr,gr,yr,_r,br,wr,xr=0;function Er(){Object.defineProperty(this,"id",{value:xr++}),this.uuid=Qe.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.lights=!0,this.blending=k,this.side=C,this.flatShading=!1,this.vertexColors=L,this.opacity=1,this.transparent=!1,this.blendSrc=Z,this.blendDst=Q,this.blendEquation=G,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=at,this.depthTest=!0,this.depthWrite=!0,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.userData={},this.needsUpdate=!0}function Sr(t){Er.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,void 0!==t&&(void 0!==t.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(t))}function Tr(t,e){this.origin=void 0!==t?t:new en,this.direction=void 0!==e?e:new en}function Mr(t,e,n){this.a=void 0!==t?t:new en,this.b=void 0!==e?e:new en,this.c=void 0!==n?n:new en}function Cr(t){Er.call(this),this.type="MeshBasicMaterial",this.color=new An(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=ht,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.lights=!1,this.setValues(t)}function Ar(t,e){Gn.call(this),this.type="Mesh",this.geometry=void 0!==t?t:new or,this.material=void 0!==e?e:new Cr({color:16777215*Math.random()}),this.drawMode=ke,this.updateMorphTargets()}function Pr(t,e){return Math.abs(e[1])-Math.abs(t[1])}function Or(t,e,n,r,i,o,a,s,u,l){hn.call(this,t=void 0!==t?t:[],e=void 0!==e?e:wt,n,r,i,o,a,s,u,l),this.flipY=!1}function Rr(t,e,n,r){hn.call(this,null),this.image={data:t,width:e,height:n,depth:r},this.magFilter=Rt,this.minFilter=Rt,this.generateMipmaps=!1,this.flipY=!1}Er.prototype=Object.assign(Object.create(r.prototype),{constructor:Er,isMaterial:!0,onBeforeCompile:function(){},setValues:function(t){if(void 0!==t)for(var e in t){var n=t[e];if(void 0!==n)if("shading"!==e){var r=this[e];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[e]=n:console.warn("THREE."+this.type+": '"+e+"' is not a property of this material.")}else console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=n===O;else console.warn("THREE.Material: '"+e+"' parameter is undefined.")}},toJSON:function(t){var e=void 0===t||"string"==typeof t;e&&(t={textures:{},images:{}});var n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(t){var e=[];for(var n in t){var r=t[n];delete r.metadata,e.push(r)}return e}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearCoat&&(n.clearCoat=this.clearCoat),void 0!==this.clearCoatRoughness&&(n.clearCoatRoughness=this.clearCoatRoughness),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(t).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,n.reflectivity=this.reflectivity,void 0!==this.combine&&(n.combine=this.combine),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.size&&(n.size=this.size),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==k&&(n.blending=this.blending),!0===this.flatShading&&(n.flatShading=this.flatShading),this.side!==C&&(n.side=this.side),this.vertexColors!==L&&(n.vertexColors=this.vertexColors),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(n.morphTargets=!0),!0===this.skinning&&(n.skinning=!0),!1===this.visible&&(n.visible=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),e){var i=r(t.textures),o=r(t.images);i.length>0&&(n.textures=i),o.length>0&&(n.images=o)}return n},clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.name=t.name,this.fog=t.fog,this.lights=t.lights,this.blending=t.blending,this.side=t.side,this.flatShading=t.flatShading,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.premultipliedAlpha=t.premultipliedAlpha,this.visible=t.visible,this.userData=JSON.parse(JSON.stringify(t.userData)),this.clipShadows=t.clipShadows,this.clipIntersection=t.clipIntersection;var e=t.clippingPlanes,n=null;if(null!==e){var r=e.length;n=new Array(r);for(var i=0;i!==r;++i)n[i]=e[i].clone()}return this.clippingPlanes=n,this.shadowSide=t.shadowSide,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),(Sr.prototype=Object.create(Er.prototype)).constructor=Sr,Sr.prototype.isShaderMaterial=!0,Sr.prototype.copy=function(t){return Er.prototype.copy.call(this,t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=wn(t.uniforms),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.lights=t.lights,this.clipping=t.clipping,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.extensions=t.extensions,this},Sr.prototype.toJSON=function(t){var e=Er.prototype.toJSON.call(this,t);for(var n in e.uniforms={},this.uniforms){var r=this.uniforms[n].value;e.uniforms[n]=r.isTexture?{type:"t",value:r.toJSON(t).uuid}:r.isColor?{type:"c",value:r.getHex()}:r.isVector2?{type:"v2",value:r.toArray()}:r.isVector3?{type:"v3",value:r.toArray()}:r.isVector4?{type:"v4",value:r.toArray()}:r.isMatrix4?{type:"m4",value:r.toArray()}:{value:r}}return Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,e},Object.assign(Tr.prototype,{set:function(t,e){return this.origin.copy(t),this.direction.copy(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this},at:function(t,e){return void 0===e&&(console.warn("THREE.Ray: .at() target is now required"),e=new en),e.copy(this.direction).multiplyScalar(t).add(this.origin)},lookAt:function(t){return this.direction.copy(t).sub(this.origin).normalize(),this},recast:function(){var t=new en;return function(e){return this.origin.copy(this.at(e,t)),this}}(),closestPointToPoint:function(t,e){void 0===e&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),e=new en),e.subVectors(t,this.origin);var n=e.dot(this.direction);return n<0?e.copy(this.origin):e.copy(this.direction).multiplyScalar(n).add(this.origin)},distanceToPoint:function(t){return Math.sqrt(this.distanceSqToPoint(t))},distanceSqToPoint:function(){var t=new en;return function(e){var n=t.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):(t.copy(this.direction).multiplyScalar(n).add(this.origin),t.distanceToSquared(e))}}(),distanceSqToSegment:(hr=new en,dr=new en,pr=new en,function(t,e,n,r){hr.copy(t).add(e).multiplyScalar(.5),dr.copy(e).sub(t).normalize(),pr.copy(this.origin).sub(hr);var i,o,a,s,u=.5*t.distanceTo(e),l=-this.direction.dot(dr),c=pr.dot(this.direction),h=-pr.dot(dr),d=pr.lengthSq(),p=Math.abs(1-l*l);if(p>0)if(o=l*c-h,s=u*p,(i=l*h-c)>=0)if(o>=-s)if(o<=s){var f=1/p;a=(i*=f)*(i+l*(o*=f)+2*c)+o*(l*i+o+2*h)+d}else o=u,a=-(i=Math.max(0,-(l*o+c)))*i+o*(o+2*h)+d;else o=-u,a=-(i=Math.max(0,-(l*o+c)))*i+o*(o+2*h)+d;else o<=-s?a=-(i=Math.max(0,-(-l*u+c)))*i+(o=i>0?-u:Math.min(Math.max(-u,-h),u))*(o+2*h)+d:o<=s?(i=0,a=(o=Math.min(Math.max(-u,-h),u))*(o+2*h)+d):a=-(i=Math.max(0,-(l*u+c)))*i+(o=i>0?u:Math.min(Math.max(-u,-h),u))*(o+2*h)+d;else o=l>0?-u:u,a=-(i=Math.max(0,-(l*o+c)))*i+o*(o+2*h)+d;return n&&n.copy(this.direction).multiplyScalar(i).add(this.origin),r&&r.copy(dr).multiplyScalar(o).add(hr),a}),intersectSphere:function(){var t=new en;return function(e,n){t.subVectors(e.center,this.origin);var r=t.dot(this.direction),i=t.dot(t)-r*r,o=e.radius*e.radius;if(i>o)return null;var a=Math.sqrt(o-i),s=r-a,u=r+a;return s<0&&u<0?null:this.at(s<0?u:s,n)}}(),intersectsSphere:function(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius},distanceToPlane:function(t){var e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(t.normal)+t.constant)/e;return n>=0?n:null},intersectPlane:function(t,e){var n=this.distanceToPlane(t);return null===n?null:this.at(n,e)},intersectsPlane:function(t){var e=t.distanceToPoint(this.origin);return 0===e||t.normal.dot(this.direction)*e<0},intersectBox:function(t,e){var n,r,i,o,a,s,u=1/this.direction.x,l=1/this.direction.y,c=1/this.direction.z,h=this.origin;return u>=0?(n=(t.min.x-h.x)*u,r=(t.max.x-h.x)*u):(n=(t.max.x-h.x)*u,r=(t.min.x-h.x)*u),l>=0?(i=(t.min.y-h.y)*l,o=(t.max.y-h.y)*l):(i=(t.max.y-h.y)*l,o=(t.min.y-h.y)*l),n>o||i>r?null:((i>n||n!=n)&&(n=i),(o<r||r!=r)&&(r=o),c>=0?(a=(t.min.z-h.z)*c,s=(t.max.z-h.z)*c):(a=(t.max.z-h.z)*c,s=(t.min.z-h.z)*c),n>s||a>r?null:((a>n||n!=n)&&(n=a),(s<r||r!=r)&&(r=s),r<0?null:this.at(n>=0?n:r,e)))},intersectsBox:(cr=new en,function(t){return null!==this.intersectBox(t,cr)}),intersectTriangle:function(){var t=new en,e=new en,n=new en,r=new en;return function(i,o,a,s,u){e.subVectors(o,i),n.subVectors(a,i),r.crossVectors(e,n);var l,c=this.direction.dot(r);if(c>0){if(s)return null;l=1}else{if(!(c<0))return null;l=-1,c=-c}t.subVectors(this.origin,i);var h=l*this.direction.dot(n.crossVectors(t,n));if(h<0)return null;var d=l*this.direction.dot(e.cross(t));if(d<0)return null;if(h+d>c)return null;var p=-l*t.dot(r);return p<0?null:this.at(p/c,u)}}(),applyMatrix4:function(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this},equals:function(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}}),Object.assign(Mr,{getNormal:(mr=new en,function(t,e,n,r){void 0===r&&(console.warn("THREE.Triangle: .getNormal() target is now required"),r=new en),r.subVectors(n,e),mr.subVectors(t,e),r.cross(mr);var i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)}),getBarycoord:function(){var t=new en,e=new en,n=new en;return function(r,i,o,a,s){t.subVectors(a,i),e.subVectors(o,i),n.subVectors(r,i);var u=t.dot(t),l=t.dot(e),c=t.dot(n),h=e.dot(e),d=e.dot(n),p=u*h-l*l;if(void 0===s&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),s=new en),0===p)return s.set(-2,-1,-1);var f=1/p,m=(h*c-l*d)*f,v=(u*d-l*c)*f;return s.set(1-m-v,v,m)}}(),containsPoint:function(){var t=new en;return function(e,n,r,i){return Mr.getBarycoord(e,n,r,i,t),t.x>=0&&t.y>=0&&t.x+t.y<=1}}(),getUV:(fr=new en,function(t,e,n,r,i,o,a,s){return this.getBarycoord(t,e,n,r,fr),s.set(0,0),s.addScaledVector(i,fr.x),s.addScaledVector(o,fr.y),s.addScaledVector(a,fr.z),s})}),Object.assign(Mr.prototype,{set:function(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this},setFromPointsAndIndices:function(t,e,n,r){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[r]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this},getArea:function(){var t=new en,e=new en;return function(){return t.subVectors(this.c,this.b),e.subVectors(this.a,this.b),.5*t.cross(e).length()}}(),getMidpoint:function(t){return void 0===t&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),t=new en),t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(t){return Mr.getNormal(this.a,this.b,this.c,t)},getPlane:function(t){return void 0===t&&(console.warn("THREE.Triangle: .getPlane() target is now required"),t=new en),t.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(t,e){return Mr.getBarycoord(t,this.a,this.b,this.c,e)},containsPoint:function(t){return Mr.containsPoint(t,this.a,this.b,this.c)},getUV:function(t,e,n,r,i){return Mr.getUV(t,this.a,this.b,this.c,e,n,r,i)},intersectsBox:function(t){return t.intersectsTriangle(this)},closestPointToPoint:(vr=new en,gr=new en,yr=new en,_r=new en,br=new en,wr=new en,function(t,e){void 0===e&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),e=new en);var n,r,i=this.a,o=this.b,a=this.c;vr.subVectors(o,i),gr.subVectors(a,i),_r.subVectors(t,i);var s=vr.dot(_r),u=gr.dot(_r);if(s<=0&&u<=0)return e.copy(i);br.subVectors(t,o);var l=vr.dot(br),c=gr.dot(br);if(l>=0&&c<=l)return e.copy(o);var h=s*c-l*u;if(h<=0&&s>=0&&l<=0)return n=s/(s-l),e.copy(i).addScaledVector(vr,n);wr.subVectors(t,a);var d=vr.dot(wr),p=gr.dot(wr);if(p>=0&&d<=p)return e.copy(a);var f=d*u-s*p;if(f<=0&&u>=0&&p<=0)return r=u/(u-p),e.copy(i).addScaledVector(gr,r);var m=l*p-d*c;if(m<=0&&c-l>=0&&d-p>=0)return yr.subVectors(a,o),r=(c-l)/(c-l+(d-p)),e.copy(o).addScaledVector(yr,r);var v=1/(m+f+h);return n=f*v,r=h*v,e.copy(i).addScaledVector(vr,n).addScaledVector(gr,r)}),equals:function(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}),(Cr.prototype=Object.create(Er.prototype)).constructor=Cr,Cr.prototype.isMeshBasicMaterial=!0,Cr.prototype.copy=function(t){return Er.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this},Ar.prototype=Object.assign(Object.create(Gn.prototype),{constructor:Ar,isMesh:!0,setDrawMode:function(t){this.drawMode=t},copy:function(t){return Gn.prototype.copy.call(this,t),this.drawMode=t.drawMode,void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this},updateMorphTargets:function(){var t,e,n,r=this.geometry;if(r.isBufferGeometry){var i=r.morphAttributes,o=Object.keys(i);if(o.length>0){var a=i[o[0]];if(void 0!==a)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},t=0,e=a.length;t<e;t++)n=a[t].name||String(t),this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}else{var s=r.morphTargets;if(void 0!==s&&s.length>0)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},t=0,e=s.length;t<e;t++)n=s[t].name||String(t),this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}},raycast:function(){var t=new $e,e=new Tr,n=new gn,r=new en,i=new en,o=new en,a=new en,s=new en,u=new en,l=new Je,c=new Je,h=new Je,d=new en,p=new en;function f(t,e,n,r,i,o,a,s){if(null===(e.side===A?r.intersectTriangle(a,o,i,!0,s):r.intersectTriangle(i,o,a,e.side!==P,s)))return null;p.copy(s),p.applyMatrix4(t.matrixWorld);var u=n.ray.origin.distanceTo(p);return u<n.near||u>n.far?null:{distance:u,point:p.clone(),object:t}}function m(t,e,n,a,s,u,p,m,v){r.fromBufferAttribute(s,p),i.fromBufferAttribute(s,m),o.fromBufferAttribute(s,v);var g=f(t,e,n,a,r,i,o,d);if(g){u&&(l.fromBufferAttribute(u,p),c.fromBufferAttribute(u,m),h.fromBufferAttribute(u,v),g.uv=Mr.getUV(d,r,i,o,l,c,h,new Je));var y=new In(p,m,v);Mr.getNormal(r,i,o,y.normal),g.face=y}return g}return function(p,v){var g,y=this.geometry,_=this.material,b=this.matrixWorld;if(void 0!==_&&(null===y.boundingSphere&&y.computeBoundingSphere(),n.copy(y.boundingSphere),n.applyMatrix4(b),!1!==p.ray.intersectsSphere(n)&&(t.getInverse(b),e.copy(p.ray).applyMatrix4(t),null===y.boundingBox||!1!==e.intersectsBox(y.boundingBox))))if(y.isBufferGeometry){var w,x,E,S,T,M,C,A,P,O=y.index,R=y.attributes.position,L=y.attributes.uv,I=y.groups,N=y.drawRange;if(null!==O)if(Array.isArray(_))for(S=0,M=I.length;S<M;S++)for(P=_[(A=I[S]).materialIndex],T=Math.max(A.start,N.start),C=Math.min(A.start+A.count,N.start+N.count);T<C;T+=3)w=O.getX(T),x=O.getX(T+1),E=O.getX(T+2),(g=m(this,P,p,e,R,L,w,x,E))&&(g.faceIndex=Math.floor(T/3),v.push(g));else for(S=Math.max(0,N.start),M=Math.min(O.count,N.start+N.count);S<M;S+=3)w=O.getX(S),x=O.getX(S+1),E=O.getX(S+2),(g=m(this,_,p,e,R,L,w,x,E))&&(g.faceIndex=Math.floor(S/3),v.push(g));else if(void 0!==R)if(Array.isArray(_))for(S=0,M=I.length;S<M;S++)for(P=_[(A=I[S]).materialIndex],T=Math.max(A.start,N.start),C=Math.min(A.start+A.count,N.start+N.count);T<C;T+=3)(g=m(this,P,p,e,R,L,w=T,x=T+1,E=T+2))&&(g.faceIndex=Math.floor(T/3),v.push(g));else for(S=Math.max(0,N.start),M=Math.min(R.count,N.start+N.count);S<M;S+=3)(g=m(this,_,p,e,R,L,w=S,x=S+1,E=S+2))&&(g.faceIndex=Math.floor(S/3),v.push(g))}else if(y.isGeometry){var D,k,F,j,U=Array.isArray(_),B=y.vertices,G=y.faces,V=y.faceVertexUvs[0];V.length>0&&(j=V);for(var z=0,H=G.length;z<H;z++){var W=G[z],q=U?_[W.materialIndex]:_;if(void 0!==q){if(D=B[W.a],k=B[W.b],F=B[W.c],!0===q.morphTargets){var X=y.morphTargets,Y=this.morphTargetInfluences;r.set(0,0,0),i.set(0,0,0),o.set(0,0,0);for(var K=0,Z=X.length;K<Z;K++){var Q=Y[K];if(0!==Q){var J=X[K].vertices;r.addScaledVector(a.subVectors(J[W.a],D),Q),i.addScaledVector(s.subVectors(J[W.b],k),Q),o.addScaledVector(u.subVectors(J[W.c],F),Q)}}r.add(D),i.add(k),o.add(F),D=r,k=i,F=o}if(g=f(this,q,p,e,D,k,F,d)){if(j&&j[z]){var $=j[z];l.copy($[0]),c.copy($[1]),h.copy($[2]),g.uv=Mr.getUV(d,D,k,F,l,c,h,new Je)}g.face=W,g.faceIndex=z,v.push(g)}}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),(Or.prototype=Object.create(hn.prototype)).constructor=Or,Or.prototype.isCubeTexture=!0,Object.defineProperty(Or.prototype,"images",{get:function(){return this.image},set:function(t){this.image=t}}),(Rr.prototype=Object.create(hn.prototype)).constructor=Rr,Rr.prototype.isDataTexture3D=!0;var Lr=new hn,Ir=new Rr,Nr=new Or;function Dr(){this.seq=[],this.map={}}var kr=[],Fr=[],jr=new Float32Array(16),Ur=new Float32Array(9),Br=new Float32Array(4);function Gr(t,e,n){var r=t[0];if(r<=0||r>0)return t;var i=e*n,o=kr[i];if(void 0===o&&(o=new Float32Array(i),kr[i]=o),0!==e){r.toArray(o,0);for(var a=1,s=0;a!==e;++a)t[a].toArray(o,s+=n)}return o}function Vr(t,e){if(t.length!==e.length)return!1;for(var n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!1;return!0}function zr(t,e){for(var n=0,r=e.length;n<r;n++)t[n]=e[n]}function Hr(t,e){var n=Fr[e];void 0===n&&(n=new Int32Array(e),Fr[e]=n);for(var r=0;r!==e;++r)n[r]=t.allocTextureUnit();return n}function Wr(t,e){var n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function qr(t,e){var n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function Xr(t,e){var n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y||(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Vr(n,e))return;t.uniform2fv(this.addr,e),zr(n,e)}}function Yr(t,e){var n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z||(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(void 0!==e.r)n[0]===e.r&&n[1]===e.g&&n[2]===e.b||(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(Vr(n,e))return;t.uniform3fv(this.addr,e),zr(n,e)}}function Kr(t,e){var n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z&&n[3]===e.w||(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Vr(n,e))return;t.uniform4fv(this.addr,e),zr(n,e)}}function Zr(t,e){var n=this.cache,r=e.elements;if(void 0===r){if(Vr(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),zr(n,e)}else{if(Vr(n,r))return;Br.set(r),t.uniformMatrix2fv(this.addr,!1,Br),zr(n,r)}}function Qr(t,e){var n=this.cache,r=e.elements;if(void 0===r){if(Vr(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),zr(n,e)}else{if(Vr(n,r))return;Ur.set(r),t.uniformMatrix3fv(this.addr,!1,Ur),zr(n,r)}}function Jr(t,e){var n=this.cache,r=e.elements;if(void 0===r){if(Vr(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),zr(n,e)}else{if(Vr(n,r))return;jr.set(r),t.uniformMatrix4fv(this.addr,!1,jr),zr(n,r)}}function $r(t,e,n){var r=this.cache,i=n.allocTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture2D(e||Lr,i)}function ti(t,e,n){var r=this.cache,i=n.allocTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(e||Ir,i)}function ei(t,e,n){var r=this.cache,i=n.allocTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(e||Nr,i)}function ni(t,e){var n=this.cache;Vr(n,e)||(t.uniform2iv(this.addr,e),zr(n,e))}function ri(t,e){var n=this.cache;Vr(n,e)||(t.uniform3iv(this.addr,e),zr(n,e))}function ii(t,e){var n=this.cache;Vr(n,e)||(t.uniform4iv(this.addr,e),zr(n,e))}function oi(t,e){var n=this.cache;Vr(n,e)||(t.uniform1fv(this.addr,e),zr(n,e))}function ai(t,e){var n=this.cache;Vr(n,e)||(t.uniform1iv(this.addr,e),zr(n,e))}function si(t,e){var n=this.cache,r=Gr(e,this.size,2);Vr(n,r)||(t.uniform2fv(this.addr,r),this.updateCache(r))}function ui(t,e){var n=this.cache,r=Gr(e,this.size,3);Vr(n,r)||(t.uniform3fv(this.addr,r),this.updateCache(r))}function li(t,e){var n=this.cache,r=Gr(e,this.size,4);Vr(n,r)||(t.uniform4fv(this.addr,r),this.updateCache(r))}function ci(t,e){var n=this.cache,r=Gr(e,this.size,4);Vr(n,r)||(t.uniformMatrix2fv(this.addr,!1,r),this.updateCache(r))}function hi(t,e){var n=this.cache,r=Gr(e,this.size,9);Vr(n,r)||(t.uniformMatrix3fv(this.addr,!1,r),this.updateCache(r))}function di(t,e){var n=this.cache,r=Gr(e,this.size,16);Vr(n,r)||(t.uniformMatrix4fv(this.addr,!1,r),this.updateCache(r))}function pi(t,e,n){var r=this.cache,i=e.length,o=Hr(n,i);!1===Vr(r,o)&&(t.uniform1iv(this.addr,o),zr(r,o));for(var a=0;a!==i;++a)n.setTexture2D(e[a]||Lr,o[a])}function fi(t,e,n){var r=this.cache,i=e.length,o=Hr(n,i);!1===Vr(r,o)&&(t.uniform1iv(this.addr,o),zr(r,o));for(var a=0;a!==i;++a)n.setTextureCube(e[a]||Nr,o[a])}function mi(t,e,n){this.id=t,this.addr=n,this.cache=[],this.setValue=function(t){switch(e.type){case 5126:return Wr;case 35664:return Xr;case 35665:return Yr;case 35666:return Kr;case 35674:return Zr;case 35675:return Qr;case 35676:return Jr;case 35678:case 36198:return $r;case 35679:return ti;case 35680:return ei;case 5124:case 35670:return qr;case 35667:case 35671:return ni;case 35668:case 35672:return ri;case 35669:case 35673:return ii}}()}function vi(t,e,n){this.id=t,this.addr=n,this.cache=[],this.size=e.size,this.setValue=function(t){switch(e.type){case 5126:return oi;case 35664:return si;case 35665:return ui;case 35666:return li;case 35674:return ci;case 35675:return hi;case 35676:return di;case 35678:return pi;case 35680:return fi;case 5124:case 35670:return ai;case 35667:case 35671:return ni;case 35668:case 35672:return ri;case 35669:case 35673:return ii}}()}function gi(t){this.id=t,Dr.call(this)}vi.prototype.updateCache=function(t){var e=this.cache;t instanceof Float32Array&&e.length!==t.length&&(this.cache=new Float32Array(t.length)),zr(e,t)},gi.prototype.setValue=function(t,e,n){for(var r=this.seq,i=0,o=r.length;i!==o;++i){var a=r[i];a.setValue(t,e[a.id],n)}};var yi=/([\w\d_]+)(\])?(\[|\.)?/g;function _i(t,e){t.seq.push(e),t.map[e.id]=e}function bi(t,e,n){var r=t.name,i=r.length;for(yi.lastIndex=0;;){var o=yi.exec(r),a=o[1],s=o[3];if("]"===o[2]&&(a|=0),void 0===s||"["===s&&yi.lastIndex+2===i){_i(n,void 0===s?new mi(a,t,e):new vi(a,t,e));break}var u=n.map[a];void 0===u&&_i(n,u=new gi(a)),n=u}}function wi(t,e,n){Dr.call(this),this.renderer=n;for(var r=t.getProgramParameter(e,35718),i=0;i<r;++i){var o=t.getActiveUniform(e,i);bi(o,t.getUniformLocation(e,o.name),this)}}function xi(t,e,n){var r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),!1===t.getShaderParameter(r,35713)&&console.error("THREE.WebGLShader: Shader couldn't compile."),""!==t.getShaderInfoLog(r)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",35633===e?"vertex":"fragment",t.getShaderInfoLog(r),function(t){for(var e=t.split("\n"),n=0;n<e.length;n++)e[n]=n+1+": "+e[n];return e.join("\n")}(n)),r}wi.prototype.setValue=function(t,e,n){var r=this.map[e];void 0!==r&&r.setValue(t,n,this.renderer)},wi.prototype.setOptional=function(t,e,n){var r=e[n];void 0!==r&&this.setValue(t,n,r)},wi.upload=function(t,e,n,r){for(var i=0,o=e.length;i!==o;++i){var a=e[i],s=n[a.id];!1!==s.needsUpdate&&a.setValue(t,s.value,r)}},wi.seqWithValue=function(t,e){for(var n=[],r=0,i=t.length;r!==i;++r){var o=t[r];o.id in e&&n.push(o)}return n};var Ei=0;function Si(t){switch(t){case Ue:return["Linear","( value )"];case Be:return["sRGB","( value )"];case Ve:return["RGBE","( value )"];case He:return["RGBM","( value, 7.0 )"];case We:return["RGBM","( value, 16.0 )"];case qe:return["RGBD","( value, 256.0 )"];case Ge:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw new Error("unsupported encoding: "+t)}}function Ti(t,e){var n=Si(e);return"vec4 "+t+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function Mi(t){return""!==t}function Ci(t,e){return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights)}function Ai(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}function Pi(t){return t.replace(/^[ \t]*#include +<([\w\d./]+)>/gm,function(t,e){var n=bn[e];if(void 0===n)throw new Error("Can not resolve #include <"+e+">");return Pi(n)})}function Oi(t){return t.replace(/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,function(t,e,n,r){for(var i="",o=parseInt(e);o<parseInt(n);o++)i+=r.replace(/\[ i \]/g,"[ "+o+" ]");return i})}function Ri(t,e){return t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.program&&e.program&&t.program!==e.program?t.program.id-e.program.id:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function Li(t,e){return t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function Ii(){var t=[],e=0,n=[],r=[];function i(n,r,i,o,a){var s=t[e];return void 0===s?t[e]=s={id:n.id,object:n,geometry:r,material:i,program:i.program,renderOrder:n.renderOrder,z:o,group:a}:(s.id=n.id,s.object=n,s.geometry=r,s.material=i,s.program=i.program,s.renderOrder=n.renderOrder,s.z=o,s.group=a),e++,s}return{opaque:n,transparent:r,init:function(){e=0,n.length=0,r.length=0},push:function(t,e,o,a,s){var u=i(t,e,o,a,s);(!0===o.transparent?r:n).push(u)},unshift:function(t,e,o,a,s){var u=i(t,e,o,a,s);(!0===o.transparent?r:n).unshift(u)},sort:function(){n.length>1&&n.sort(Ri),r.length>1&&r.sort(Li)}}}var Ni=0;function Di(){var t=new function(){var t=new function(){var t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];var n;switch(e.type){case"DirectionalLight":n={direction:new en,color:new An,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new Je};break;case"SpotLight":n={position:new en,direction:new en,color:new An,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new Je};break;case"PointLight":n={position:new en,color:new An,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new Je,shadowCameraNear:1,shadowCameraFar:1e3};break;case"HemisphereLight":n={direction:new en,skyColor:new An,groundColor:new An};break;case"RectAreaLight":n={color:new An,position:new en,halfWidth:new en,halfHeight:new en}}return t[e.id]=n,n}}},e={id:Ni++,hash:{stateID:-1,directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,shadowsLength:-1},ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},n=new en,r=new $e,i=new $e;return{setup:function(o,a,s){for(var u=0,l=0,c=0,h=0,d=0,p=0,f=0,m=0,v=s.matrixWorldInverse,g=0,y=o.length;g<y;g++){var _=o[g],b=_.color,w=_.intensity,x=_.distance,E=_.shadow&&_.shadow.map?_.shadow.map.texture:null;if(_.isAmbientLight)u+=b.r*w,l+=b.g*w,c+=b.b*w;else if(_.isDirectionalLight)(T=t.get(_)).color.copy(_.color).multiplyScalar(_.intensity),T.direction.setFromMatrixPosition(_.matrixWorld),n.setFromMatrixPosition(_.target.matrixWorld),T.direction.sub(n),T.direction.transformDirection(v),T.shadow=_.castShadow,_.castShadow&&(T.shadowBias=(S=_.shadow).bias,T.shadowRadius=S.radius,T.shadowMapSize=S.mapSize),e.directionalShadowMap[h]=E,e.directionalShadowMatrix[h]=_.shadow.matrix,e.directional[h]=T,h++;else if(_.isSpotLight)(T=t.get(_)).position.setFromMatrixPosition(_.matrixWorld),T.position.applyMatrix4(v),T.color.copy(b).multiplyScalar(w),T.distance=x,T.direction.setFromMatrixPosition(_.matrixWorld),n.setFromMatrixPosition(_.target.matrixWorld),T.direction.sub(n),T.direction.transformDirection(v),T.coneCos=Math.cos(_.angle),T.penumbraCos=Math.cos(_.angle*(1-_.penumbra)),T.decay=_.decay,T.shadow=_.castShadow,_.castShadow&&(T.shadowBias=(S=_.shadow).bias,T.shadowRadius=S.radius,T.shadowMapSize=S.mapSize),e.spotShadowMap[p]=E,e.spotShadowMatrix[p]=_.shadow.matrix,e.spot[p]=T,p++;else if(_.isRectAreaLight)(T=t.get(_)).color.copy(b).multiplyScalar(w),T.position.setFromMatrixPosition(_.matrixWorld),T.position.applyMatrix4(v),i.identity(),r.copy(_.matrixWorld),r.premultiply(v),i.extractRotation(r),T.halfWidth.set(.5*_.width,0,0),T.halfHeight.set(0,.5*_.height,0),T.halfWidth.applyMatrix4(i),T.halfHeight.applyMatrix4(i),e.rectArea[f]=T,f++;else if(_.isPointLight){var S;(T=t.get(_)).position.setFromMatrixPosition(_.matrixWorld),T.position.applyMatrix4(v),T.color.copy(_.color).multiplyScalar(_.intensity),T.distance=_.distance,T.decay=_.decay,T.shadow=_.castShadow,_.castShadow&&(T.shadowBias=(S=_.shadow).bias,T.shadowRadius=S.radius,T.shadowMapSize=S.mapSize,T.shadowCameraNear=S.camera.near,T.shadowCameraFar=S.camera.far),e.pointShadowMap[d]=E,e.pointShadowMatrix[d]=_.shadow.matrix,e.point[d]=T,d++}else if(_.isHemisphereLight){var T;(T=t.get(_)).direction.setFromMatrixPosition(_.matrixWorld),T.direction.transformDirection(v),T.direction.normalize(),T.skyColor.copy(_.color).multiplyScalar(w),T.groundColor.copy(_.groundColor).multiplyScalar(w),e.hemi[m]=T,m++}}e.ambient[0]=u,e.ambient[1]=l,e.ambient[2]=c,e.directional.length=h,e.spot.length=p,e.rectArea.length=f,e.point.length=d,e.hemi.length=m,e.hash.stateID=e.id,e.hash.directionalLength=h,e.hash.pointLength=d,e.hash.spotLength=p,e.hash.rectAreaLength=f,e.hash.hemiLength=m,e.hash.shadowsLength=a.length},state:e}},e=[],n=[];return{init:function(){e.length=0,n.length=0},state:{lightsArray:e,shadowsArray:n,lights:t},setupLights:function(r){t.setup(e,n,r)},pushLight:function(t){e.push(t)},pushShadow:function(t){n.push(t)}}}function ki(t){Er.call(this),this.type="MeshDepthMaterial",this.depthPacking=Xe,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.setValues(t)}function Fi(t){Er.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new en,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.lights=!1,this.setValues(t)}function ji(t,e,n){for(var r=new _n,i=new $e,o=new Je,a=new Je(n,n),s=new en,u=new en,l=1,c=2,h=1+(l|c),d=new Array(h),p=new Array(h),f={},m={0:A,1:C,2:P},v=[new en(1,0,0),new en(-1,0,0),new en(0,0,1),new en(0,0,-1),new en(0,1,0),new en(0,-1,0)],g=[new en(0,1,0),new en(0,1,0),new en(0,1,0),new en(0,1,0),new en(0,0,1),new en(0,0,-1)],y=[new dn,new dn,new dn,new dn,new dn,new dn],_=0;_!==h;++_){var b=0!=(_&l),w=0!=(_&c),x=new ki({depthPacking:Ye,morphTargets:b,skinning:w});d[_]=x;var E=new Fi({morphTargets:b,skinning:w});p[_]=E}var S=this;function M(e,n,r,i,o,a){var s=e.geometry,u=null,h=d,v=e.customDepthMaterial;if(r&&(h=p,v=e.customDistanceMaterial),v)u=v;else{var g=!1;n.morphTargets&&(s&&s.isBufferGeometry?g=s.morphAttributes&&s.morphAttributes.position&&s.morphAttributes.position.length>0:s&&s.isGeometry&&(g=s.morphTargets&&s.morphTargets.length>0)),e.isSkinnedMesh&&!1===n.skinning&&console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",e);var y=0;g&&(y|=l),e.isSkinnedMesh&&n.skinning&&(y|=c),u=h[y]}if(t.localClippingEnabled&&!0===n.clipShadows&&0!==n.clippingPlanes.length){var _=u.uuid,b=n.uuid,w=f[_];void 0===w&&(f[_]=w={});var x=w[b];void 0===x&&(x=u.clone(),w[b]=x),u=x}return u.visible=n.visible,u.wireframe=n.wireframe,u.side=null!=n.shadowSide?n.shadowSide:m[n.side],u.clipShadows=n.clipShadows,u.clippingPlanes=n.clippingPlanes,u.clipIntersection=n.clipIntersection,u.wireframeLinewidth=n.wireframeLinewidth,u.linewidth=n.linewidth,r&&u.isMeshDistanceMaterial&&(u.referencePosition.copy(i),u.nearDistance=o,u.farDistance=a),u}function O(n,i,o,a){if(!1!==n.visible){if(n.layers.test(i.layers)&&(n.isMesh||n.isLine||n.isPoints)&&n.castShadow&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,n.matrixWorld);var s=e.update(n),l=n.material;if(Array.isArray(l))for(var c=s.groups,h=0,d=c.length;h<d;h++){var p=c[h],f=l[p.materialIndex];if(f&&f.visible){var m=M(n,f,a,u,o.near,o.far);t.renderBufferDirect(o,null,s,m,n,p)}}else l.visible&&(m=M(n,l,a,u,o.near,o.far),t.renderBufferDirect(o,null,s,m,n,null))}for(var v=n.children,g=0,y=v.length;g<y;g++)O(v[g],i,o,a)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=T,this.render=function(e,n,l){if(!1!==S.enabled&&(!1!==S.autoUpdate||!1!==S.needsUpdate)&&0!==e.length){var c,h=t.state;h.disable(3042),h.buffers.color.setClear(1,1,1,1),h.buffers.depth.setTest(!0),h.setScissorTest(!1);for(var d=0,p=e.length;d<p;d++){var f=e[d],m=f.shadow,_=f&&f.isPointLight;if(void 0!==m){var b=m.camera;if(o.copy(m.mapSize),o.min(a),_){var w=o.x,x=o.y;y[0].set(2*w,x,w,x),y[1].set(0,x,w,x),y[2].set(3*w,x,w,x),y[3].set(w,x,w,x),y[4].set(3*w,0,w,x),y[5].set(w,0,w,x),o.x*=4,o.y*=2}null===m.map&&(m.map=new pn(o.x,o.y,{minFilter:Rt,magFilter:Rt,format:Qt}),m.map.texture.name=f.name+".shadowMap",b.updateProjectionMatrix()),m.isSpotLightShadow&&m.update(f);var E=m.map,T=m.matrix;u.setFromMatrixPosition(f.matrixWorld),b.position.copy(u),_?(c=6,T.makeTranslation(-u.x,-u.y,-u.z)):(c=1,s.setFromMatrixPosition(f.target.matrixWorld),b.lookAt(s),b.updateMatrixWorld(),T.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),T.multiply(b.projectionMatrix),T.multiply(b.matrixWorldInverse)),t.setRenderTarget(E),t.clear();for(var M=0;M<c;M++)_&&(s.copy(b.position),s.add(v[M]),b.up.copy(g[M]),b.lookAt(s),b.updateMatrixWorld(),h.viewport(y[M])),i.multiplyMatrices(b.projectionMatrix,b.matrixWorldInverse),r.setFromMatrix(i),O(n,l,b,_)}else console.warn("THREE.WebGLShadowMap:",f,"has no shadow.")}S.needsUpdate=!1}}}function Ui(t,e,n){return{convert:function(t){var r;if(t===At)return 10497;if(t===Pt)return 33071;if(t===Ot)return 33648;if(t===Rt)return 9728;if(t===Lt)return 9984;if(t===It)return 9986;if(t===Nt)return 9729;if(t===Dt)return 9985;if(t===kt)return 9987;if(t===Ft)return 5121;if(t===Wt)return 32819;if(t===qt)return 32820;if(t===Xt)return 33635;if(t===jt)return 5120;if(t===Ut)return 5122;if(t===Bt)return 5123;if(t===Gt)return 5124;if(t===Vt)return 5125;if(t===zt)return 5126;if(t===Ht){if(n.isWebGL2)return 5131;if(null!==(r=e.get("OES_texture_half_float")))return r.HALF_FLOAT_OES}if(t===Kt)return 6406;if(t===Zt)return 6407;if(t===Qt)return 6408;if(t===Jt)return 6409;if(t===$t)return 6410;if(t===ee)return 6402;if(t===ne)return 34041;if(t===re)return 6403;if(t===G)return 32774;if(t===V)return 32778;if(t===z)return 32779;if(t===q)return 0;if(t===X)return 1;if(t===Y)return 768;if(t===K)return 769;if(t===Z)return 770;if(t===Q)return 771;if(t===J)return 772;if(t===$)return 773;if(t===tt)return 774;if(t===et)return 775;if(t===nt)return 776;if((t===ie||t===oe||t===ae||t===se)&&null!==(r=e.get("WEBGL_compressed_texture_s3tc"))){if(t===ie)return r.COMPRESSED_RGB_S3TC_DXT1_EXT;if(t===oe)return r.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(t===ae)return r.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(t===se)return r.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((t===ue||t===le||t===ce||t===he)&&null!==(r=e.get("WEBGL_compressed_texture_pvrtc"))){if(t===ue)return r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(t===le)return r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(t===ce)return r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(t===he)return r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(t===de&&null!==(r=e.get("WEBGL_compressed_texture_etc1")))return r.COMPRESSED_RGB_ETC1_WEBGL;if((t===pe||t===fe||t===me||t===ve||t===ge||t===ye||t===_e||t===be||t===we||t===xe||t===Ee||t===Se||t===Te||t===Me)&&null!==(r=e.get("WEBGL_compressed_texture_astc")))return t;if(t===H||t===W){if(n.isWebGL2){if(t===H)return 32775;if(t===W)return 32776}if(null!==(r=e.get("EXT_blend_minmax"))){if(t===H)return r.MIN_EXT;if(t===W)return r.MAX_EXT}}if(t===Yt){if(n.isWebGL2)return 34042;if(null!==(r=e.get("WEBGL_depth_texture")))return r.UNSIGNED_INT_24_8_WEBGL}return 0}}}function Bi(){Gn.call(this),this.type="Group"}function Gi(){Gn.call(this),this.type="Camera",this.matrixWorldInverse=new $e,this.projectionMatrix=new $e,this.projectionMatrixInverse=new $e}function Vi(t,e,n,r){Gi.call(this),this.type="PerspectiveCamera",this.fov=void 0!==t?t:50,this.zoom=1,this.near=void 0!==n?n:.1,this.far=void 0!==r?r:2e3,this.focus=10,this.aspect=void 0!==e?e:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function zi(t){Vi.call(this),this.cameras=t||[]}(ki.prototype=Object.create(Er.prototype)).constructor=ki,ki.prototype.isMeshDepthMaterial=!0,ki.prototype.copy=function(t){return Er.prototype.copy.call(this,t),this.depthPacking=t.depthPacking,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this},(Fi.prototype=Object.create(Er.prototype)).constructor=Fi,Fi.prototype.isMeshDistanceMaterial=!0,Fi.prototype.copy=function(t){return Er.prototype.copy.call(this,t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this},Bi.prototype=Object.assign(Object.create(Gn.prototype),{constructor:Bi,isGroup:!0}),Gi.prototype=Object.assign(Object.create(Gn.prototype),{constructor:Gi,isCamera:!0,copy:function(t,e){return Gn.prototype.copy.call(this,t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this},getWorldDirection:function(t){void 0===t&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),t=new en),this.updateMatrixWorld(!0);var e=this.matrixWorld.elements;return t.set(-e[8],-e[9],-e[10]).normalize()},updateMatrixWorld:function(t){Gn.prototype.updateMatrixWorld.call(this,t),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}}),Vi.prototype=Object.assign(Object.create(Gi.prototype),{constructor:Vi,isPerspectiveCamera:!0,copy:function(t,e){return Gi.prototype.copy.call(this,t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this},setFocalLength:function(t){var e=.5*this.getFilmHeight()/t;this.fov=2*Qe.RAD2DEG*Math.atan(e),this.updateProjectionMatrix()},getFocalLength:function(){var t=Math.tan(.5*Qe.DEG2RAD*this.fov);return.5*this.getFilmHeight()/t},getEffectiveFOV:function(){return 2*Qe.RAD2DEG*Math.atan(Math.tan(.5*Qe.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(t,e,n,r,i,o){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=this.near,e=t*Math.tan(.5*Qe.DEG2RAD*this.fov)/this.zoom,n=2*e,r=this.aspect*n,i=-.5*r,o=this.view;if(null!==this.view&&this.view.enabled){var a=o.fullWidth,s=o.fullHeight;i+=o.offsetX*r/a,e-=o.offsetY*n/s,r*=o.width/a,n*=o.height/s}var u=this.filmOffset;0!==u&&(i+=t*u/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,e,e-n,t,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(t){var e=Gn.prototype.toJSON.call(this,t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}),zi.prototype=Object.assign(Object.create(Vi.prototype),{constructor:zi,isArrayCamera:!0});var Hi,Wi,qi,Xi,Yi,Ki,Zi=new en,Qi=new en;function Ji(t,e,n){Zi.setFromMatrixPosition(e.matrixWorld),Qi.setFromMatrixPosition(n.matrixWorld);var r=Zi.distanceTo(Qi),i=e.projectionMatrix.elements,o=n.projectionMatrix.elements,a=i[14]/(i[10]-1),s=i[14]/(i[10]+1),u=(i[9]+1)/i[5],l=(i[9]-1)/i[5],c=(i[8]-1)/i[0],h=(o[8]+1)/o[0],d=a*c,p=a*h,f=r/(-c+h),m=f*-c;e.matrixWorld.decompose(t.position,t.quaternion,t.scale),t.translateX(m),t.translateZ(f),t.matrixWorld.compose(t.position,t.quaternion,t.scale),t.matrixWorldInverse.getInverse(t.matrixWorld);var v=a+f,g=s+f;t.projectionMatrix.makePerspective(d-m,p+(r-m),u*s/g*v,l*s/g*v,v,g)}function $i(t){var e=this,n=null,r=null,i=null,o=[],a=new $e,s=new $e,u=1,l="stage";"undefined"!=typeof window&&"VRFrameData"in window&&(r=new window.VRFrameData,window.addEventListener("vrdisplaypresentchange",_,!1));var c=new $e,h=new tn,d=new en,p=new Vi;p.bounds=new dn(0,0,.5,1),p.layers.enable(1);var f=new Vi;f.bounds=new dn(.5,0,.5,1),f.layers.enable(2);var m,v,g=new zi([p,f]);function y(){return null!==n&&!0===n.isPresenting}function _(){if(y()){var r=n.getEyeParameters("left"),i=r.renderWidth*u,o=r.renderHeight*u;v=t.getPixelRatio(),m=t.getSize(),t.setDrawingBufferSize(2*i,o,1),x.start()}else e.enabled&&t.setDrawingBufferSize(m.width,m.height,v),x.stop()}g.layers.enable(1),g.layers.enable(2);var b=[];function w(t){for(var e=navigator.getGamepads&&navigator.getGamepads(),n=0,r=0,i=e.length;n<i;n++){var o=e[n];if(o&&("Daydream Controller"===o.id||"Gear VR Controller"===o.id||"Oculus Go Controller"===o.id||"OpenVR Gamepad"===o.id||o.id.startsWith("Oculus Touch")||o.id.startsWith("Spatial Controller"))){if(r===t)return o;r++}}}this.enabled=!1,this.getController=function(t){var e=o[t];return void 0===e&&((e=new Bi).matrixAutoUpdate=!1,e.visible=!1,o[t]=e),e},this.getDevice=function(){return n},this.setDevice=function(t){void 0!==t&&(n=t),x.setContext(t)},this.setFramebufferScaleFactor=function(t){u=t},this.setFrameOfReferenceType=function(t){l=t},this.setPoseTarget=function(t){void 0!==t&&(i=t)},this.getCamera=function(t){var e="stage"===l?1.6:0;if(null===n)return t.position.set(0,e,0),t;if(n.depthNear=t.near,n.depthFar=t.far,n.getFrameData(r),"stage"===l){var u=n.stageParameters;u?a.fromArray(u.sittingToStandingTransform):a.makeTranslation(0,e,0)}var m=r.pose,v=null!==i?i:t;if(v.matrix.copy(a),v.matrix.decompose(v.position,v.quaternion,v.scale),null!==m.orientation&&(h.fromArray(m.orientation),v.quaternion.multiply(h)),null!==m.position&&(h.setFromRotationMatrix(a),d.fromArray(m.position),d.applyQuaternion(h),v.position.add(d)),v.updateMatrixWorld(),!1===n.isPresenting)return t;p.near=t.near,f.near=t.near,p.far=t.far,f.far=t.far,p.matrixWorldInverse.fromArray(r.leftViewMatrix),f.matrixWorldInverse.fromArray(r.rightViewMatrix),s.getInverse(a),"stage"===l&&(p.matrixWorldInverse.multiply(s),f.matrixWorldInverse.multiply(s));var y=v.parent;null!==y&&(c.getInverse(y.matrixWorld),p.matrixWorldInverse.multiply(c),f.matrixWorldInverse.multiply(c)),p.matrixWorld.getInverse(p.matrixWorldInverse),f.matrixWorld.getInverse(f.matrixWorldInverse),p.projectionMatrix.fromArray(r.leftProjectionMatrix),f.projectionMatrix.fromArray(r.rightProjectionMatrix),Ji(g,p,f);var _=n.getLayers();if(_.length){var x=_[0];null!==x.leftBounds&&4===x.leftBounds.length&&p.bounds.fromArray(x.leftBounds),null!==x.rightBounds&&4===x.rightBounds.length&&f.bounds.fromArray(x.rightBounds)}return function(){for(var t=0;t<o.length;t++){var e=o[t],n=w(t);if(void 0!==n&&void 0!==n.pose){if(null===n.pose)return;var r=n.pose;!1===r.hasPosition&&e.position.set(.2,-.6,-.05),null!==r.position&&e.position.fromArray(r.position),null!==r.orientation&&e.quaternion.fromArray(r.orientation),e.matrix.compose(e.position,e.quaternion,e.scale),e.matrix.premultiply(a),e.matrix.decompose(e.position,e.quaternion,e.scale),e.matrixWorldNeedsUpdate=!0,e.visible=!0;var i="Daydream Controller"===n.id?0:1;b[t]!==n.buttons[i].pressed&&(b[t]=n.buttons[i].pressed,!0===b[t]?e.dispatchEvent({type:"selectstart"}):(e.dispatchEvent({type:"selectend"}),e.dispatchEvent({type:"select"})))}else e.visible=!1}}(),g},this.getStandingMatrix=function(){return a},this.isPresenting=y;var x=new Ln;this.setAnimationLoop=function(t){x.setAnimationLoop(t)},this.submitFrame=function(){y()&&n.submitFrame()},this.dispose=function(){"undefined"!=typeof window&&window.removeEventListener("vrdisplaypresentchange",_)}}function to(t){console.log("THREE.WebGLRenderer",v);var e=void 0!==(t=t||{}).canvas?t.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),n=void 0!==t.context?t.context:null,r=void 0!==t.alpha&&t.alpha,i=void 0===t.depth||t.depth,o=void 0===t.stencil||t.stencil,a=void 0!==t.antialias&&t.antialias,s=void 0===t.premultipliedAlpha||t.premultipliedAlpha,u=void 0!==t.preserveDrawingBuffer&&t.preserveDrawingBuffer,l=void 0!==t.powerPreference?t.powerPreference:"default",c=null,h=null;this.domElement=e,this.context=null,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=mt,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var d,p,f,m,g,w,x,E,S,O,R,L,I,N,V,z,H,W,q=this,X=!1,Y=null,K=null,Z=null,Q=-1,J={geometry:null,program:null,wireframe:!1},$=null,tt=null,et=new dn,nt=new dn,bt=null,At=0,Ot=e.width,Dt=e.height,kt=1,jt=new dn(0,0,Ot,Dt),Ut=new dn(0,0,Ot,Dt),Gt=!1,Wt=new _n,qt=new function(){var t=this,e=null,n=0,r=!1,i=!1,o=new yn,a=new nn,s={value:null,needsUpdate:!1};function u(){s.value!==e&&(s.value=e,s.needsUpdate=n>0),t.numPlanes=n,t.numIntersection=0}function l(e,n,r,i){var u=null!==e?e.length:0,l=null;if(0!==u){if(l=s.value,!0!==i||null===l){var c=r+4*u,h=n.matrixWorldInverse;a.getNormalMatrix(h),(null===l||l.length<c)&&(l=new Float32Array(c));for(var d=0,p=r;d!==u;++d,p+=4)o.copy(e[d]).applyMatrix4(h,a),o.normal.toArray(l,p),l[p+3]=o.constant}s.value=l,s.needsUpdate=!0}return t.numPlanes=u,l}this.uniform=s,this.numPlanes=0,this.numIntersection=0,this.init=function(t,i,o){var a=0!==t.length||i||0!==n||r;return r=i,e=l(t,o,0),n=t.length,a},this.beginShadows=function(){i=!0,l(null)},this.endShadows=function(){i=!1,u()},this.setState=function(t,o,a,c,h,d){if(!r||null===t||0===t.length||i&&!a)i?l(null):u();else{var p=i?0:n,f=4*p,m=h.clippingState||null;s.value=m,m=l(t,c,f,d);for(var v=0;v!==f;++v)m[v]=e[v];h.clippingState=m,this.numIntersection=o?this.numPlanes:0,this.numPlanes+=p}}},Xt=!1,Kt=!1,Jt=new $e,$t=new en;function te(){return null===K?kt:1}try{var re={alpha:r,depth:i,stencil:o,antialias:a,premultipliedAlpha:s,preserveDrawingBuffer:u,powerPreference:l};if(e.addEventListener("webglcontextlost",se,!1),e.addEventListener("webglcontextrestored",ue,!1),null===(d=n||e.getContext("webgl",re)||e.getContext("experimental-webgl",re)))throw null!==e.getContext("webgl")?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.");void 0===d.getShaderPrecisionFormat&&(d.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(t){console.error("THREE.WebGLRenderer: "+t.message)}function ie(){p=new function(t){var e={};return{get:function(n){if(void 0!==e[n])return e[n];var r;switch(n){case"WEBGL_depth_texture":r=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=t.getExtension(n)}return null===r&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),e[n]=r,r}}}(d),(f=new function(t,e,n){var r;function i(e){if("highp"===e){if(t.getShaderPrecisionFormat(35633,36338).precision>0&&t.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";e="mediump"}return"mediump"===e&&t.getShaderPrecisionFormat(35633,36337).precision>0&&t.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}var o="undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext,a=void 0!==n.precision?n.precision:"highp",s=i(a);s!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",s,"instead."),a=s);var u=!0===n.logarithmicDepthBuffer,l=t.getParameter(34930),c=t.getParameter(35660),h=t.getParameter(3379),d=t.getParameter(34076),p=t.getParameter(34921),f=t.getParameter(36347),m=t.getParameter(36348),v=t.getParameter(36349),g=c>0,y=o||!!e.get("OES_texture_float");return{isWebGL2:o,getMaxAnisotropy:function(){if(void 0!==r)return r;var n=e.get("EXT_texture_filter_anisotropic");return r=null!==n?t.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:i,precision:a,logarithmicDepthBuffer:u,maxTextures:l,maxVertexTextures:c,maxTextureSize:h,maxCubemapSize:d,maxAttributes:p,maxVertexUniforms:f,maxVaryings:m,maxFragmentUniforms:v,vertexTextures:g,floatFragmentTextures:y,floatVertexTextures:g&&y}}(d,p,t)).isWebGL2||(p.get("WEBGL_depth_texture"),p.get("OES_texture_float"),p.get("OES_texture_half_float"),p.get("OES_texture_half_float_linear"),p.get("OES_standard_derivatives"),p.get("OES_element_index_uint"),p.get("ANGLE_instanced_arrays")),p.get("OES_texture_float_linear"),W=new Ui(d,p,f),(m=new function(t,e,n,r){var i=new function(){var e=!1,n=new dn,r=null,i=new dn(0,0,0,0);return{setMask:function(n){r===n||e||(t.colorMask(n,n,n,n),r=n)},setLocked:function(t){e=t},setClear:function(e,r,o,a,s){!0===s&&(e*=a,r*=a,o*=a),n.set(e,r,o,a),!1===i.equals(n)&&(t.clearColor(e,r,o,a),i.copy(n))},reset:function(){e=!1,r=null,i.set(-1,0,0,0)}}},o=new function(){var e=!1,n=null,r=null,i=null;return{setTest:function(t){t?Q(2929):J(2929)},setMask:function(r){n===r||e||(t.depthMask(r),n=r)},setFunc:function(e){if(r!==e){if(e)switch(e){case rt:t.depthFunc(512);break;case it:t.depthFunc(519);break;case ot:t.depthFunc(513);break;case at:t.depthFunc(515);break;case st:t.depthFunc(514);break;case ut:t.depthFunc(518);break;case lt:t.depthFunc(516);break;case ct:t.depthFunc(517);break;default:t.depthFunc(515)}else t.depthFunc(515);r=e}},setLocked:function(t){e=t},setClear:function(e){i!==e&&(t.clearDepth(e),i=e)},reset:function(){e=!1,n=null,r=null,i=null}}},a=new function(){var e=!1,n=null,r=null,i=null,o=null,a=null,s=null,u=null,l=null;return{setTest:function(t){t?Q(2960):J(2960)},setMask:function(r){n===r||e||(t.stencilMask(r),n=r)},setFunc:function(e,n,a){r===e&&i===n&&o===a||(t.stencilFunc(e,n,a),r=e,i=n,o=a)},setOp:function(e,n,r){a===e&&s===n&&u===r||(t.stencilOp(e,n,r),a=e,s=n,u=r)},setLocked:function(t){e=t},setClear:function(e){l!==e&&(t.clearStencil(e),l=e)},reset:function(){e=!1,n=null,r=null,i=null,o=null,a=null,s=null,u=null,l=null}}},s=t.getParameter(34921),u=new Uint8Array(s),l=new Uint8Array(s),c=new Uint8Array(s),h={},d=null,p=null,f=null,m=null,v=null,g=null,w=null,x=null,E=null,S=null,T=!1,M=null,C=null,O=null,R=null,L=null,I=t.getParameter(35661),N=!1,V=0,z=t.getParameter(7938);-1!==z.indexOf("WebGL")?(V=parseFloat(/^WebGL\ ([0-9])/.exec(z)[1]),N=V>=1):-1!==z.indexOf("OpenGL ES")&&(V=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(z)[1]),N=V>=2);var H=null,W={},q=new dn,X=new dn;function Y(e,n,r){var i=new Uint8Array(4),o=t.createTexture();t.bindTexture(e,o),t.texParameteri(e,10241,9728),t.texParameteri(e,10240,9728);for(var a=0;a<r;a++)t.texImage2D(n+a,0,6408,1,1,0,6408,5121,i);return o}var K={};function Z(n,i){u[n]=1,0===l[n]&&(t.enableVertexAttribArray(n),l[n]=1),c[n]!==i&&((r.isWebGL2?t:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,i),c[n]=i)}function Q(e){!0!==h[e]&&(t.enable(e),h[e]=!0)}function J(e){!1!==h[e]&&(t.disable(e),h[e]=!1)}function $(e,r,i,o,a,s,u,l){if(e!==D){if(f||(Q(3042),f=!0),e===B)a=a||r,s=s||i,u=u||o,r===v&&a===x||(t.blendEquationSeparate(n.convert(r),n.convert(a)),v=r,x=a),i===g&&o===w&&s===E&&u===S||(t.blendFuncSeparate(n.convert(i),n.convert(o),n.convert(s),n.convert(u)),g=i,w=o,E=s,S=u),m=e,T=null;else if(e!==m||l!==T){if(v===G&&x===G||(t.blendEquation(32774),v=G,x=G),l)switch(e){case k:t.blendFuncSeparate(1,771,1,771);break;case F:t.blendFunc(1,1);break;case j:t.blendFuncSeparate(0,0,769,771);break;case U:t.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}else switch(e){case k:t.blendFuncSeparate(770,771,1,771);break;case F:t.blendFunc(770,1);break;case j:t.blendFunc(0,769);break;case U:t.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}g=null,w=null,E=null,S=null,m=e,T=l}}else f&&(J(3042),f=!1)}function tt(e){M!==e&&(t.frontFace(e?2304:2305),M=e)}function et(e){e!==y?(Q(2884),e!==C&&t.cullFace(e===_?1029:e===b?1028:1032)):J(2884),C=e}function nt(e,n,r){e?(Q(32823),R===n&&L===r||(t.polygonOffset(n,r),R=n,L=r)):J(32823)}function ht(e){void 0===e&&(e=33984+I-1),H!==e&&(t.activeTexture(e),H=e)}return K[3553]=Y(3553,3553,1),K[34067]=Y(34067,34069,6),i.setClear(0,0,0,1),o.setClear(1),a.setClear(0),Q(2929),o.setFunc(at),tt(!1),et(_),Q(2884),$(D),{buffers:{color:i,depth:o,stencil:a},initAttributes:function(){for(var t=0,e=u.length;t<e;t++)u[t]=0},enableAttribute:function(t){Z(t,0)},enableAttributeAndDivisor:Z,disableUnusedAttributes:function(){for(var e=0,n=l.length;e!==n;++e)l[e]!==u[e]&&(t.disableVertexAttribArray(e),l[e]=0)},enable:Q,disable:J,getCompressedTextureFormats:function(){if(null===d&&(d=[],e.get("WEBGL_compressed_texture_pvrtc")||e.get("WEBGL_compressed_texture_s3tc")||e.get("WEBGL_compressed_texture_etc1")||e.get("WEBGL_compressed_texture_astc")))for(var n=t.getParameter(34467),r=0;r<n.length;r++)d.push(n[r]);return d},useProgram:function(e){return p!==e&&(t.useProgram(e),p=e,!0)},setBlending:$,setMaterial:function(t,e){t.side===P?J(2884):Q(2884);var n=t.side===A;e&&(n=!n),tt(n),t.blending===k&&!1===t.transparent?$(D):$(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha),o.setFunc(t.depthFunc),o.setTest(t.depthTest),o.setMask(t.depthWrite),i.setMask(t.colorWrite),nt(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits)},setFlipSided:tt,setCullFace:et,setLineWidth:function(e){e!==O&&(N&&t.lineWidth(e),O=e)},setPolygonOffset:nt,setScissorTest:function(t){t?Q(3089):J(3089)},activeTexture:ht,bindTexture:function(e,n){null===H&&ht();var r=W[H];void 0===r&&(W[H]=r={type:void 0,texture:void 0}),r.type===e&&r.texture===n||(t.bindTexture(e,n||K[e]),r.type=e,r.texture=n)},compressedTexImage2D:function(){try{t.compressedTexImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage2D:function(){try{t.texImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage3D:function(){try{t.texImage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},scissor:function(e){!1===q.equals(e)&&(t.scissor(e.x,e.y,e.z,e.w),q.copy(e))},viewport:function(e){!1===X.equals(e)&&(t.viewport(e.x,e.y,e.z,e.w),X.copy(e))},reset:function(){for(var e=0;e<l.length;e++)1===l[e]&&(t.disableVertexAttribArray(e),l[e]=0);h={},d=null,H=null,W={},p=null,m=null,M=null,C=null,i.reset(),o.reset(),a.reset()}}}(d,p,W,f)).scissor(nt.copy(Ut).multiplyScalar(kt)),m.viewport(et.copy(jt).multiplyScalar(kt)),g=new function(t){var e={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:e,programs:null,autoReset:!0,reset:function(){e.frame++,e.calls=0,e.triangles=0,e.points=0,e.lines=0},update:function(t,n,r){switch(r=r||1,e.calls++,n){case 4:e.triangles+=r*(t/3);break;case 5:case 6:e.triangles+=r*(t-2);break;case 1:e.lines+=r*(t/2);break;case 3:e.lines+=r*(t-1);break;case 2:e.lines+=r*t;break;case 0:e.points+=r*t;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}(d),w=new function(){var t=new WeakMap;return{get:function(e){var n=t.get(e);return void 0===n&&t.set(e,n={}),n},remove:function(e){t.delete(e)},update:function(e,n,r){t.get(e)[n]=r},dispose:function(){t=new WeakMap}}},x=new function(t,e,n,r,i,o,a){var s,u={};function l(t,e){if(t.width>e||t.height>e){if("data"in t)return void console.warn("THREE.WebGLRenderer: image in DataTexture is too big ("+t.width+"x"+t.height+").");var n=e/Math.max(t.width,t.height),r=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return r.width=Math.floor(t.width*n),r.height=Math.floor(t.height*n),r.getContext("2d").drawImage(t,0,0,t.width,t.height,0,0,r.width,r.height),console.warn("THREE.WebGLRenderer: image is too big ("+t.width+"x"+t.height+"). Resized to "+r.width+"x"+r.height),r}return t}function c(t){return Qe.isPowerOfTwo(t.width)&&Qe.isPowerOfTwo(t.height)}function h(t,e){return t.generateMipmaps&&e&&t.minFilter!==Rt&&t.minFilter!==Nt}function d(e,n,i,o){t.generateMipmap(e),r.get(n).__maxMipLevel=Math.log(Math.max(i,o))*Math.LOG2E}function p(t,e){if(!i.isWebGL2)return t;if(6403===t){if(5126===e)return 33326;if(5131===e)return 33325;if(5121===e)return 33321}if(6407===t){if(5126===e)return 34837;if(5131===e)return 34843;if(5121===e)return 32849}if(6408===t){if(5126===e)return 34836;if(5131===e)return 34842;if(5121===e)return 32856}return t}function f(t){return t===Rt||t===Lt||t===It?9728:9729}function m(e){var n=e.target;n.removeEventListener("dispose",m),function(e){var n=r.get(e);if(e.image&&n.__image__webglTextureCube)t.deleteTexture(n.__image__webglTextureCube);else{if(void 0===n.__webglInit)return;t.deleteTexture(n.__webglTexture)}r.remove(e)}(n),n.isVideoTexture&&delete u[n.id],a.memory.textures--}function v(e){var n=e.target;n.removeEventListener("dispose",v),function(e){var n=r.get(e),i=r.get(e.texture);if(e){if(void 0!==i.__webglTexture&&t.deleteTexture(i.__webglTexture),e.depthTexture&&e.depthTexture.dispose(),e.isWebGLRenderTargetCube)for(var o=0;o<6;o++)t.deleteFramebuffer(n.__webglFramebuffer[o]),n.__webglDepthbuffer&&t.deleteRenderbuffer(n.__webglDepthbuffer[o]);else t.deleteFramebuffer(n.__webglFramebuffer),n.__webglDepthbuffer&&t.deleteRenderbuffer(n.__webglDepthbuffer);r.remove(e.texture),r.remove(e)}}(n),a.memory.textures--}function g(t,e){var i=r.get(t);if(t.isVideoTexture&&function(t){var e=t.id,n=a.render.frame;u[e]!==n&&(u[e]=n,t.update())}(t),t.version>0&&i.__version!==t.version){var o=t.image;if(void 0===o)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==o.complete)return void _(i,t,e);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.activeTexture(33984+e),n.bindTexture(3553,i.__webglTexture)}function y(n,a,s){var u;if(s?(t.texParameteri(n,10242,o.convert(a.wrapS)),t.texParameteri(n,10243,o.convert(a.wrapT)),t.texParameteri(n,10240,o.convert(a.magFilter)),t.texParameteri(n,10241,o.convert(a.minFilter))):(t.texParameteri(n,10242,33071),t.texParameteri(n,10243,33071),a.wrapS===Pt&&a.wrapT===Pt||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(n,10240,f(a.magFilter)),t.texParameteri(n,10241,f(a.minFilter)),a.minFilter!==Rt&&a.minFilter!==Nt&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),u=e.get("EXT_texture_filter_anisotropic")){if(a.type===zt&&null===e.get("OES_texture_float_linear"))return;if(a.type===Ht&&null===(i.isWebGL2||e.get("OES_texture_half_float_linear")))return;(a.anisotropy>1||r.get(a).__currentAnisotropy)&&(t.texParameterf(n,u.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,i.getMaxAnisotropy())),r.get(a).__currentAnisotropy=a.anisotropy)}}function _(e,r,u){var f;f=r.isDataTexture3D?32879:3553,void 0===e.__webglInit&&(e.__webglInit=!0,r.addEventListener("dispose",m),e.__webglTexture=t.createTexture(),a.memory.textures++),n.activeTexture(33984+u),n.bindTexture(f,e.__webglTexture),t.pixelStorei(37440,r.flipY),t.pixelStorei(37441,r.premultiplyAlpha),t.pixelStorei(3317,r.unpackAlignment);var v=l(r.image,i.maxTextureSize);(function(t){return!i.isWebGL2&&(t.wrapS!==Pt||t.wrapT!==Pt||t.minFilter!==Rt&&t.minFilter!==Nt)})(r)&&!1===c(v)&&(v=function(t){return t instanceof HTMLImageElement||t instanceof HTMLCanvasElement||t instanceof ImageBitmap?(void 0===s&&(s=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),s.width=Qe.floorPowerOfTwo(t.width),s.height=Qe.floorPowerOfTwo(t.height),s.getContext("2d").drawImage(t,0,0,s.width,s.height),console.warn("THREE.WebGLRenderer: image is not power of two ("+t.width+"x"+t.height+"). Resized to "+s.width+"x"+s.height),s):t}(v));var g=c(v),_=o.convert(r.format),b=o.convert(r.type),w=p(_,b);y(f,r,g);var x,E=r.mipmaps;if(r.isDepthTexture){if(w=6402,r.type===zt){if(!i.isWebGL2)throw new Error("Float Depth Texture only supported in WebGL2.0");w=36012}else i.isWebGL2&&(w=33189);r.format===ee&&6402===w&&r.type!==Bt&&r.type!==Vt&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),r.type=Bt,b=o.convert(r.type)),r.format===ne&&(w=34041,r.type!==Yt&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),r.type=Yt,b=o.convert(r.type))),n.texImage2D(3553,0,w,v.width,v.height,0,_,b,null)}else if(r.isDataTexture)if(E.length>0&&g){for(var S=0,T=E.length;S<T;S++)n.texImage2D(3553,S,w,(x=E[S]).width,x.height,0,_,b,x.data);r.generateMipmaps=!1,e.__maxMipLevel=E.length-1}else n.texImage2D(3553,0,w,v.width,v.height,0,_,b,v.data),e.__maxMipLevel=0;else if(r.isCompressedTexture){for(S=0,T=E.length;S<T;S++)x=E[S],r.format!==Qt&&r.format!==Zt?n.getCompressedTextureFormats().indexOf(_)>-1?n.compressedTexImage2D(3553,S,w,x.width,x.height,0,x.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(3553,S,w,x.width,x.height,0,_,b,x.data);e.__maxMipLevel=E.length-1}else if(r.isDataTexture3D)n.texImage3D(32879,0,w,v.width,v.height,v.depth,0,_,b,v.data),e.__maxMipLevel=0;else if(E.length>0&&g){for(S=0,T=E.length;S<T;S++)n.texImage2D(3553,S,w,_,b,x=E[S]);r.generateMipmaps=!1,e.__maxMipLevel=E.length-1}else n.texImage2D(3553,0,w,_,b,v),e.__maxMipLevel=0;h(r,g)&&d(3553,r,v.width,v.height),e.__version=r.version,r.onUpdate&&r.onUpdate(r)}function b(e,i,a,s){var u=o.convert(i.texture.format),l=o.convert(i.texture.type),c=p(u,l);n.texImage2D(s,0,c,i.width,i.height,0,u,l,null),t.bindFramebuffer(36160,e),t.framebufferTexture2D(36160,a,s,r.get(i.texture).__webglTexture,0),t.bindFramebuffer(36160,null)}function w(e,n){t.bindRenderbuffer(36161,e),n.depthBuffer&&!n.stencilBuffer?(t.renderbufferStorage(36161,33189,n.width,n.height),t.framebufferRenderbuffer(36160,36096,36161,e)):n.depthBuffer&&n.stencilBuffer?(t.renderbufferStorage(36161,34041,n.width,n.height),t.framebufferRenderbuffer(36160,33306,36161,e)):t.renderbufferStorage(36161,32854,n.width,n.height),t.bindRenderbuffer(36161,null)}this.setTexture2D=g,this.setTexture3D=function(t,e){var i=r.get(t);t.version>0&&i.__version!==t.version?_(i,t,e):(n.activeTexture(33984+e),n.bindTexture(32879,i.__webglTexture))},this.setTextureCube=function(e,s){var u=r.get(e);if(6===e.image.length)if(e.version>0&&u.__version!==e.version){u.__image__webglTextureCube||(e.addEventListener("dispose",m),u.__image__webglTextureCube=t.createTexture(),a.memory.textures++),n.activeTexture(33984+s),n.bindTexture(34067,u.__image__webglTextureCube),t.pixelStorei(37440,e.flipY);for(var f=e&&e.isCompressedTexture,v=e.image[0]&&e.image[0].isDataTexture,g=[],_=0;_<6;_++)g[_]=f||v?v?e.image[_].image:e.image[_]:l(e.image[_],i.maxCubemapSize);var b=g[0],w=c(b),x=o.convert(e.format),E=o.convert(e.type),S=p(x,E);for(y(34067,e,w),_=0;_<6;_++)if(f)for(var T,M=g[_].mipmaps,C=0,A=M.length;C<A;C++)T=M[C],e.format!==Qt&&e.format!==Zt?n.getCompressedTextureFormats().indexOf(x)>-1?n.compressedTexImage2D(34069+_,C,S,T.width,T.height,0,T.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(34069+_,C,S,T.width,T.height,0,x,E,T.data);else v?n.texImage2D(34069+_,0,S,g[_].width,g[_].height,0,x,E,g[_].data):n.texImage2D(34069+_,0,S,x,E,g[_]);u.__maxMipLevel=f?M.length-1:0,h(e,w)&&d(34067,e,b.width,b.height),u.__version=e.version,e.onUpdate&&e.onUpdate(e)}else n.activeTexture(33984+s),n.bindTexture(34067,u.__image__webglTextureCube)},this.setTextureCubeDynamic=function(t,e){n.activeTexture(33984+e),n.bindTexture(34067,r.get(t).__webglTexture)},this.setupRenderTarget=function(e){var i=r.get(e),o=r.get(e.texture);e.addEventListener("dispose",v),o.__webglTexture=t.createTexture(),a.memory.textures++;var s=!0===e.isWebGLRenderTargetCube,u=c(e);if(s){i.__webglFramebuffer=[];for(var l=0;l<6;l++)i.__webglFramebuffer[l]=t.createFramebuffer()}else i.__webglFramebuffer=t.createFramebuffer();if(s){for(n.bindTexture(34067,o.__webglTexture),y(34067,e.texture,u),l=0;l<6;l++)b(i.__webglFramebuffer[l],e,36064,34069+l);h(e.texture,u)&&d(34067,e.texture,e.width,e.height),n.bindTexture(34067,null)}else n.bindTexture(3553,o.__webglTexture),y(3553,e.texture,u),b(i.__webglFramebuffer,e,36064,3553),h(e.texture,u)&&d(3553,e.texture,e.width,e.height),n.bindTexture(3553,null);e.depthBuffer&&function(e){var n=r.get(e),i=!0===e.isWebGLRenderTargetCube;if(e.depthTexture){if(i)throw new Error("target.depthTexture not supported in Cube render targets");!function(e,n){if(n&&n.isWebGLRenderTargetCube)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,e),!n.depthTexture||!n.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(n.depthTexture).__webglTexture&&n.depthTexture.image.width===n.width&&n.depthTexture.image.height===n.height||(n.depthTexture.image.width=n.width,n.depthTexture.image.height=n.height,n.depthTexture.needsUpdate=!0),g(n.depthTexture,0);var i=r.get(n.depthTexture).__webglTexture;if(n.depthTexture.format===ee)t.framebufferTexture2D(36160,36096,3553,i,0);else{if(n.depthTexture.format!==ne)throw new Error("Unknown depthTexture format");t.framebufferTexture2D(36160,33306,3553,i,0)}}(n.__webglFramebuffer,e)}else if(i){n.__webglDepthbuffer=[];for(var o=0;o<6;o++)t.bindFramebuffer(36160,n.__webglFramebuffer[o]),n.__webglDepthbuffer[o]=t.createRenderbuffer(),w(n.__webglDepthbuffer[o],e)}else t.bindFramebuffer(36160,n.__webglFramebuffer),n.__webglDepthbuffer=t.createRenderbuffer(),w(n.__webglDepthbuffer,e);t.bindFramebuffer(36160,null)}(e)},this.updateRenderTargetMipmap=function(t){var e=t.texture;if(h(e,c(t))){var i=t.isWebGLRenderTargetCube?34067:3553,o=r.get(e).__webglTexture;n.bindTexture(i,o),d(i,e,t.width,t.height),n.bindTexture(i,null)}}}(d,p,m,w,f,W,g),E=new function(t){var e=new WeakMap;return{get:function(t){return t.isInterleavedBufferAttribute&&(t=t.data),e.get(t)},remove:function(n){n.isInterleavedBufferAttribute&&(n=n.data);var r=e.get(n);r&&(t.deleteBuffer(r.buffer),e.delete(n))},update:function(n,r){n.isInterleavedBufferAttribute&&(n=n.data);var i=e.get(n);void 0===i?e.set(n,function(e,n){var r=e.array,i=e.dynamic?35048:35044,o=t.createBuffer();t.bindBuffer(n,o),t.bufferData(n,r,i),e.onUploadCallback();var a=5126;return r instanceof Float32Array?a=5126:r instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):r instanceof Uint16Array?a=5123:r instanceof Int16Array?a=5122:r instanceof Uint32Array?a=5125:r instanceof Int32Array?a=5124:r instanceof Int8Array?a=5120:r instanceof Uint8Array&&(a=5121),{buffer:o,type:a,bytesPerElement:r.BYTES_PER_ELEMENT,version:e.version}}(n,r)):i.version<n.version&&(function(e,n,r){var o=n.array,a=n.updateRange;t.bindBuffer(r,i.buffer),!1===n.dynamic?t.bufferData(r,o,35044):-1===a.count?t.bufferSubData(r,0,o):0===a.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(t.bufferSubData(r,a.offset*o.BYTES_PER_ELEMENT,o.subarray(a.offset,a.offset+a.count)),a.count=-1)}(0,n,r),i.version=n.version)}}}(d),S=new function(t,e,n){var r={},i={};function o(t){var a=t.target,s=r[a.id];for(var u in null!==s.index&&e.remove(s.index),s.attributes)e.remove(s.attributes[u]);a.removeEventListener("dispose",o),delete r[a.id];var l=i[s.id];l&&(e.remove(l),delete i[s.id]),n.memory.geometries--}return{get:function(t,e){var i=r[e.id];return i||(e.addEventListener("dispose",o),e.isBufferGeometry?i=e:e.isGeometry&&(void 0===e._bufferGeometry&&(e._bufferGeometry=(new or).setFromObject(t)),i=e._bufferGeometry),r[e.id]=i,n.memory.geometries++,i)},update:function(t){var n=t.index,r=t.attributes;for(var i in null!==n&&e.update(n,34963),r)e.update(r[i],34962);var o=t.morphAttributes;for(var i in o)for(var a=o[i],s=0,u=a.length;s<u;s++)e.update(a[s],34962)},getWireframeAttribute:function(t){var n=i[t.id];if(n)return n;var r,o=[],a=t.index,s=t.attributes;if(null!==a)for(var u=0,l=(r=a.array).length;u<l;u+=3)o.push(c=r[u+0],h=r[u+1],h,d=r[u+2],d,c);else for(u=0,l=(r=s.position.array).length/3-1;u<l;u+=3){var c,h,d;o.push(c=u+0,h=u+1,h,d=u+2,d,c)}return n=new(rr(o)>65535?$n:Qn)(o,1),e.update(n,34963),i[t.id]=n,n}}}(d,E,g),O=new function(t,e){var n={};return{update:function(r){var i=e.render.frame,o=r.geometry,a=t.get(r,o);return n[a.id]!==i&&(o.isGeometry&&a.updateFromObject(r),t.update(a),n[a.id]=i),a},dispose:function(){n={}}}}(S,g),V=new function(t){var e={},n=new Float32Array(8);return{update:function(r,i,o,a){var s=r.morphTargetInfluences,u=s.length,l=e[i.id];if(void 0===l){l=[];for(var c=0;c<u;c++)l[c]=[c,0];e[i.id]=l}var h=o.morphTargets&&i.morphAttributes.position,d=o.morphNormals&&i.morphAttributes.normal;for(c=0;c<u;c++)0!==(p=l[c])[1]&&(h&&i.removeAttribute("morphTarget"+c),d&&i.removeAttribute("morphNormal"+c));for(c=0;c<u;c++)(p=l[c])[0]=c,p[1]=s[c];for(l.sort(Pr),c=0;c<8;c++){var p;if(p=l[c]){var f=p[0],m=p[1];if(m){h&&i.addAttribute("morphTarget"+c,h[f]),d&&i.addAttribute("morphNormal"+c,d[f]),n[c]=m;continue}}n[c]=0}a.getUniforms().setValue(t,"morphTargetInfluences",n)}}}(d),R=new function(t,e,n){var r=[],i={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},o=["precision","supportsVertexTextures","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","fog","useFog","fogExp","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering"];function a(t,e){var n;return t?t.isTexture?n=t.encoding:t.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),n=t.texture.encoding):n=Ue,n===Ue&&e&&(n=Ge),n}this.getParameters=function(e,r,o,s,u,l,c){var h=i[e.type],d=c.isSkinnedMesh?function(t){var e=t.skeleton.bones;if(n.floatVertexTextures)return 1024;var r=Math.floor((n.maxVertexUniforms-20)/4),i=Math.min(r,e.length);return i<e.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+e.length+" bones. This GPU supports "+i+"."),0):i}(c):0,p=n.precision;null!==e.precision&&(p=n.getMaxPrecision(e.precision))!==e.precision&&console.warn("THREE.WebGLProgram.getParameters:",e.precision,"not supported, using",p,"instead.");var f=t.getRenderTarget();return{shaderID:h,precision:p,supportsVertexTextures:n.vertexTextures,outputEncoding:a(f?f.texture:null,t.gammaOutput),map:!!e.map,mapEncoding:a(e.map,t.gammaInput),matcap:!!e.matcap,matcapEncoding:a(e.matcap,t.gammaInput),envMap:!!e.envMap,envMapMode:e.envMap&&e.envMap.mapping,envMapEncoding:a(e.envMap,t.gammaInput),envMapCubeUV:!!e.envMap&&(e.envMap.mapping===Mt||e.envMap.mapping===Ct),lightMap:!!e.lightMap,aoMap:!!e.aoMap,emissiveMap:!!e.emissiveMap,emissiveMapEncoding:a(e.emissiveMap,t.gammaInput),bumpMap:!!e.bumpMap,normalMap:!!e.normalMap,objectSpaceNormalMap:e.normalMapType===Ze,displacementMap:!!e.displacementMap,roughnessMap:!!e.roughnessMap,metalnessMap:!!e.metalnessMap,specularMap:!!e.specularMap,alphaMap:!!e.alphaMap,gradientMap:!!e.gradientMap,combine:e.combine,vertexColors:e.vertexColors,fog:!!s,useFog:e.fog,fogExp:s&&s.isFogExp2,flatShading:e.flatShading,sizeAttenuation:e.sizeAttenuation,logarithmicDepthBuffer:n.logarithmicDepthBuffer,skinning:e.skinning&&d>0,maxBones:d,useVertexTexture:n.floatVertexTextures,morphTargets:e.morphTargets,morphNormals:e.morphNormals,maxMorphTargets:t.maxMorphTargets,maxMorphNormals:t.maxMorphNormals,numDirLights:r.directional.length,numPointLights:r.point.length,numSpotLights:r.spot.length,numRectAreaLights:r.rectArea.length,numHemiLights:r.hemi.length,numClippingPlanes:u,numClipIntersection:l,dithering:e.dithering,shadowMapEnabled:t.shadowMap.enabled&&c.receiveShadow&&o.length>0,shadowMapType:t.shadowMap.type,toneMapping:t.toneMapping,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:e.premultipliedAlpha,alphaTest:e.alphaTest,doubleSided:e.side===P,flipSided:e.side===A,depthPacking:void 0!==e.depthPacking&&e.depthPacking}},this.getProgramCode=function(e,n){var r=[];if(n.shaderID?r.push(n.shaderID):(r.push(e.fragmentShader),r.push(e.vertexShader)),void 0!==e.defines)for(var i in e.defines)r.push(i),r.push(e.defines[i]);for(var a=0;a<o.length;a++)r.push(n[o[a]]);return r.push(e.onBeforeCompile.toString()),r.push(t.gammaOutput),r.push(t.gammaFactor),r.join()},this.acquireProgram=function(i,o,a,s){for(var u,l=0,c=r.length;l<c;l++){var h=r[l];if(h.code===s){++(u=h).usedTimes;break}}return void 0===u&&(u=new function(t,e,n,r,i,o,a){var s=t.context,u=r.defines,l=i.vertexShader,c=i.fragmentShader,h="SHADOWMAP_TYPE_BASIC";o.shadowMapType===T?h="SHADOWMAP_TYPE_PCF":o.shadowMapType===M&&(h="SHADOWMAP_TYPE_PCF_SOFT");var d="ENVMAP_TYPE_CUBE",p="ENVMAP_MODE_REFLECTION",f="ENVMAP_BLENDING_MULTIPLY";if(o.envMap){switch(r.envMap.mapping){case wt:case xt:d="ENVMAP_TYPE_CUBE";break;case Mt:case Ct:d="ENVMAP_TYPE_CUBE_UV";break;case Et:case St:d="ENVMAP_TYPE_EQUIREC";break;case Tt:d="ENVMAP_TYPE_SPHERE"}switch(r.envMap.mapping){case xt:case St:p="ENVMAP_MODE_REFRACTION"}switch(r.combine){case ht:f="ENVMAP_BLENDING_MULTIPLY";break;case dt:f="ENVMAP_BLENDING_MIX";break;case pt:f="ENVMAP_BLENDING_ADD"}}var m,v,g,y,_,b=t.gammaFactor>0?t.gammaFactor:1,w=a.isWebGL2?"":function(t,e,n){return[(t=t||{}).derivatives||e.envMapCubeUV||e.bumpMap||e.normalMap&&!e.objectSpaceNormalMap||e.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(t.fragDepth||e.logarithmicDepthBuffer)&&n.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",t.drawBuffers&&n.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(t.shaderTextureLOD||e.envMap)&&n.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Mi).join("\n")}(r.extensions,o,e),x=function(t){var e=[];for(var n in t){var r=t[n];!1!==r&&e.push("#define "+n+" "+r)}return e.join("\n")}(u),E=s.createProgram();if(r.isRawShaderMaterial?((m=[x].filter(Mi).join("\n")).length>0&&(m+="\n"),(v=[w,x].filter(Mi).join("\n")).length>0&&(v+="\n")):(m=["precision "+o.precision+" float;","precision "+o.precision+" int;","#define SHADER_NAME "+i.name,x,o.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+b,"#define MAX_BONES "+o.maxBones,o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fogExp?"#define FOG_EXP2":"",o.map?"#define USE_MAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+p:"",o.lightMap?"#define USE_LIGHTMAP":"",o.aoMap?"#define USE_AOMAP":"",o.emissiveMap?"#define USE_EMISSIVEMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.normalMap&&o.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",o.displacementMap&&o.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.roughnessMap?"#define USE_ROUGHNESSMAP":"",o.metalnessMap?"#define USE_METALNESSMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.vertexColors?"#define USE_COLOR":"",o.flatShading?"#define FLAT_SHADED":"",o.skinning?"#define USE_SKINNING":"",o.useVertexTexture?"#define BONE_TEXTURE":"",o.morphTargets?"#define USE_MORPHTARGETS":"",o.morphNormals&&!1===o.flatShading?"#define USE_MORPHNORMALS":"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"",o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+h:"",o.sizeAttenuation?"#define USE_SIZEATTENUATION":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",o.logarithmicDepthBuffer&&(a.isWebGL2||e.get("EXT_frag_depth"))?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Mi).join("\n"),v=[w,"precision "+o.precision+" float;","precision "+o.precision+" int;","#define SHADER_NAME "+i.name,x,o.alphaTest?"#define ALPHATEST "+o.alphaTest+(o.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+b,o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fogExp?"#define FOG_EXP2":"",o.map?"#define USE_MAP":"",o.matcap?"#define USE_MATCAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+d:"",o.envMap?"#define "+p:"",o.envMap?"#define "+f:"",o.lightMap?"#define USE_LIGHTMAP":"",o.aoMap?"#define USE_AOMAP":"",o.emissiveMap?"#define USE_EMISSIVEMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.normalMap&&o.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.roughnessMap?"#define USE_ROUGHNESSMAP":"",o.metalnessMap?"#define USE_METALNESSMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.vertexColors?"#define USE_COLOR":"",o.gradientMap?"#define USE_GRADIENTMAP":"",o.flatShading?"#define FLAT_SHADED":"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"",o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+h:"",o.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",o.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",o.logarithmicDepthBuffer&&(a.isWebGL2||e.get("EXT_frag_depth"))?"#define USE_LOGDEPTHBUF_EXT":"",o.envMap&&(a.isWebGL2||e.get("EXT_shader_texture_lod"))?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",o.toneMapping!==ft?"#define TONE_MAPPING":"",o.toneMapping!==ft?bn.tonemapping_pars_fragment:"",o.toneMapping!==ft?function(t,e){var n;switch(e){case mt:n="Linear";break;case vt:n="Reinhard";break;case gt:n="Uncharted2";break;case yt:n="OptimizedCineon";break;case _t:n="ACESFilmic";break;default:throw new Error("unsupported toneMapping: "+e)}return"vec3 toneMapping( vec3 color ) { return "+n+"ToneMapping( color ); }"}(0,o.toneMapping):"",o.dithering?"#define DITHERING":"",o.outputEncoding||o.mapEncoding||o.matcapEncoding||o.envMapEncoding||o.emissiveMapEncoding?bn.encodings_pars_fragment:"",o.mapEncoding?Ti("mapTexelToLinear",o.mapEncoding):"",o.matcapEncoding?Ti("matcapTexelToLinear",o.matcapEncoding):"",o.envMapEncoding?Ti("envMapTexelToLinear",o.envMapEncoding):"",o.emissiveMapEncoding?Ti("emissiveMapTexelToLinear",o.emissiveMapEncoding):"",o.outputEncoding?(g="linearToOutputTexel",y=o.outputEncoding,_=Si(y),"vec4 "+g+"( vec4 value ) { return LinearTo"+_[0]+_[1]+"; }"):"",o.depthPacking?"#define DEPTH_PACKING "+r.depthPacking:"","\n"].filter(Mi).join("\n")),l=Ai(l=Ci(l=Pi(l),o),o),c=Ai(c=Ci(c=Pi(c),o),o),l=Oi(l),c=Oi(c),a.isWebGL2&&!r.isRawShaderMaterial){var S=!1,C=/^\s*#version\s+300\s+es\s*\n/;r.isShaderMaterial&&null!==l.match(C)&&null!==c.match(C)&&(S=!0,l=l.replace(C,""),c=c.replace(C,"")),m=["#version 300 es\n","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+m,v=["#version 300 es\n","#define varying in",S?"":"out highp vec4 pc_fragColor;",S?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+v}var A=v+c,P=xi(s,35633,m+l),O=xi(s,35632,A);s.attachShader(E,P),s.attachShader(E,O),void 0!==r.index0AttributeName?s.bindAttribLocation(E,0,r.index0AttributeName):!0===o.morphTargets&&s.bindAttribLocation(E,0,"position"),s.linkProgram(E);var R,L,I=s.getProgramInfoLog(E).trim(),N=s.getShaderInfoLog(P).trim(),D=s.getShaderInfoLog(O).trim(),k=!0,F=!0;return!1===s.getProgramParameter(E,35714)?(k=!1,console.error("THREE.WebGLProgram: shader error: ",s.getError(),"35715",s.getProgramParameter(E,35715),"gl.getProgramInfoLog",I,N,D)):""!==I?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",I):""!==N&&""!==D||(F=!1),F&&(this.diagnostics={runnable:k,material:r,programLog:I,vertexShader:{log:N,prefix:m},fragmentShader:{log:D,prefix:v}}),s.deleteShader(P),s.deleteShader(O),this.getUniforms=function(){return void 0===R&&(R=new wi(s,E,t)),R},this.getAttributes=function(){return void 0===L&&(L=function(t,e){for(var n={},r=t.getProgramParameter(e,35721),i=0;i<r;i++){var o=t.getActiveAttrib(e,i).name;n[o]=t.getAttribLocation(e,o)}return n}(s,E)),L},this.destroy=function(){s.deleteProgram(E),this.program=void 0},Object.defineProperties(this,{uniforms:{get:function(){return console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms()."),this.getUniforms()}},attributes:{get:function(){return console.warn("THREE.WebGLProgram: .attributes is now .getAttributes()."),this.getAttributes()}}}),this.name=i.name,this.id=Ei++,this.code=n,this.usedTimes=1,this.program=E,this.vertexShader=P,this.fragmentShader=O,this}(t,e,s,i,o,a,n),r.push(u)),u},this.releaseProgram=function(t){if(0==--t.usedTimes){var e=r.indexOf(t);r[e]=r[r.length-1],r.pop(),t.destroy()}},this.programs=r}(q,p,f),L=new function(){var t={};return{get:function(e,n){var r,i=t[e.id];return void 0===i?(r=new Ii,t[e.id]={},t[e.id][n.id]=r):void 0===(r=i[n.id])&&(r=new Ii,i[n.id]=r),r},dispose:function(){t={}}}},I=new function(){var t={};return{get:function(e,n){var r;return void 0===t[e.id]?(r=new Di,t[e.id]={},t[e.id][n.id]=r):void 0===t[e.id][n.id]?(r=new Di,t[e.id][n.id]=r):r=t[e.id][n.id],r},dispose:function(){t={}}}},N=new function(t,e,n,r){var i,o,a=new An(0),s=0,u=null,l=0;function c(t,n){e.buffers.color.setClear(t.r,t.g,t.b,n,r)}return{getClearColor:function(){return a},setClearColor:function(t,e){a.set(t),c(a,s=void 0!==e?e:1)},getClearAlpha:function(){return s},setClearAlpha:function(t){c(a,s=t)},render:function(e,r,h,d){var p=r.background;if(null===p?(c(a,s),u=null,l=0):p&&p.isColor&&(c(p,1),d=!0,u=null,l=0),(t.autoClear||d)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),p&&(p.isCubeTexture||p.isWebGLRenderTargetCube)){void 0===o&&((o=new Ar(new sr(1,1,1),new Sr({type:"BackgroundCubeMaterial",uniforms:wn(Rn.cube.uniforms),vertexShader:Rn.cube.vertexShader,fragmentShader:Rn.cube.fragmentShader,side:A,depthTest:!0,depthWrite:!1,fog:!1}))).geometry.removeAttribute("normal"),o.geometry.removeAttribute("uv"),o.onBeforeRender=function(t,e,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(o.material,"map",{get:function(){return this.uniforms.tCube.value}}),n.update(o));var f=p.isWebGLRenderTargetCube?p.texture:p;o.material.uniforms.tCube.value=f,o.material.uniforms.tFlip.value=p.isWebGLRenderTargetCube?1:-1,u===p&&l===f.version||(o.material.needsUpdate=!0,u=p,l=f.version),e.unshift(o,o.geometry,o.material,0,null)}else p&&p.isTexture&&(void 0===i&&((i=new Ar(new lr(2,2),new Sr({type:"BackgroundMaterial",uniforms:wn(Rn.background.uniforms),vertexShader:Rn.background.vertexShader,fragmentShader:Rn.background.fragmentShader,side:C,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.removeAttribute("normal"),Object.defineProperty(i.material,"map",{get:function(){return this.uniforms.t2D.value}}),n.update(i)),i.material.uniforms.t2D.value=p,!0===p.matrixAutoUpdate&&p.updateMatrix(),i.material.uniforms.uvTransform.value.copy(p.matrix),u===p&&l===p.version||(i.material.needsUpdate=!0,u=p,l=p.version),e.unshift(i,i.geometry,i.material,0,null))}}}(q,m,O,s),z=new function(t,e,n,r){var i;this.setMode=function(t){i=t},this.render=function(e,r){t.drawArrays(i,e,r),n.update(r,i)},this.renderInstances=function(o,a,s){var u;if(r.isWebGL2)u=t;else if(null===(u=e.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[r.isWebGL2?"drawArraysInstanced":"drawArraysInstancedANGLE"](i,a,s,o.maxInstancedCount),n.update(s,i,o.maxInstancedCount)}}(d,p,g,f),H=new function(t,e,n,r){var i,o,a;this.setMode=function(t){i=t},this.setIndex=function(t){o=t.type,a=t.bytesPerElement},this.render=function(e,r){t.drawElements(i,r,o,e*a),n.update(r,i)},this.renderInstances=function(s,u,l){var c;if(r.isWebGL2)c=t;else if(null===(c=e.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");c[r.isWebGL2?"drawElementsInstanced":"drawElementsInstancedANGLE"](i,l,o,u*a,s.maxInstancedCount),n.update(l,i,s.maxInstancedCount)}}(d,p,g,f),g.programs=R.programs,q.context=d,q.capabilities=f,q.extensions=p,q.properties=w,q.renderLists=L,q.state=m,q.info=g}ie();var oe=null;"undefined"!=typeof navigator&&(oe="xr"in navigator?new function(t){var e=t.context,n=null,r=null,i=1,o=null,a="stage",s=null,u=[],l=[];function c(){return null!==r&&null!==o}var h=new Vi;h.layers.enable(1),h.viewport=new dn;var d=new Vi;d.layers.enable(2),d.viewport=new dn;var p=new zi([h,d]);function f(t){var e=u[l.indexOf(t.inputSource)];e&&e.dispatchEvent({type:t.type})}function m(){t.setFramebuffer(null),y.stop()}function v(t,e){null===e?t.matrixWorld.copy(t.matrix):t.matrixWorld.multiplyMatrices(e.matrixWorld,t.matrix),t.matrixWorldInverse.getInverse(t.matrixWorld)}p.layers.enable(1),p.layers.enable(2),this.enabled=!1,this.getController=function(t){var e=u[t];return void 0===e&&((e=new Bi).matrixAutoUpdate=!1,e.visible=!1,u[t]=e),e},this.getDevice=function(){return n},this.setDevice=function(t){void 0!==t&&(n=t),t instanceof XRDevice&&e.setCompatibleXRDevice(t)},this.setFramebufferScaleFactor=function(t){i=t},this.setFrameOfReferenceType=function(t){a=t},this.setSession=function(n){null!==(r=n)&&(r.addEventListener("select",f),r.addEventListener("selectstart",f),r.addEventListener("selectend",f),r.addEventListener("end",m),r.baseLayer=new XRWebGLLayer(r,e,{framebufferScaleFactor:i}),r.requestFrameOfReference(a).then(function(e){o=e,t.setFramebuffer(r.baseLayer.framebuffer),y.setContext(r),y.start()}),l=r.getInputSources(),r.addEventListener("inputsourceschange",function(){l=r.getInputSources(),console.log(l);for(var t=0;t<u.length;t++)u[t].userData.inputSource=l[t]}))},this.getCamera=function(t){if(c()){var e=t.parent,n=p.cameras;v(p,e);for(var r=0;r<n.length;r++)v(n[r],e);t.matrixWorld.copy(p.matrixWorld);for(var i=t.children,o=(r=0,i.length);r<o;r++)i[r].updateMatrixWorld(!0);return Ji(p,h,d),p}return t},this.isPresenting=c;var g=null,y=new Ln;y.setAnimationLoop(function(t,e){if(null!==(s=e.getDevicePose(o)))for(var n=r.baseLayer,i=e.views,a=0;a<i.length;a++){var c=i[a],h=n.getViewport(c),d=s.getViewMatrix(c),f=p.cameras[a];f.matrix.fromArray(d).getInverse(f.matrix),f.projectionMatrix.fromArray(c.projectionMatrix),f.viewport.set(h.x,h.y,h.width,h.height),0===a&&p.matrix.copy(f.matrix)}for(a=0;a<u.length;a++){var m=u[a],v=l[a];if(v){var y=e.getInputPose(v,o);if(null!==y){"targetRay"in y?m.matrix.elements=y.targetRay.transformMatrix:"pointerMatrix"in y&&(m.matrix.elements=y.pointerMatrix),m.matrix.decompose(m.position,m.rotation,m.scale),m.visible=!0;continue}}m.visible=!1}g&&g(t)}),this.setAnimationLoop=function(t){g=t},this.dispose=function(){},this.getStandingMatrix=function(){return console.warn("THREE.WebXRManager: getStandingMatrix() is no longer needed."),new THREE.Matrix4},this.submitFrame=function(){}}(q):new $i(q)),this.vr=oe;var ae=new ji(q,O,f.maxTextureSize);function se(t){t.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),X=!0}function ue(){console.log("THREE.WebGLRenderer: Context Restored."),X=!1,ie()}function le(t){var e=t.target;e.removeEventListener("dispose",le),function(t){ce(t),w.remove(t)}(e)}function ce(t){var e=w.get(t).program;t.program=void 0,void 0!==e&&R.releaseProgram(e)}this.shadowMap=ae,this.getContext=function(){return d},this.getContextAttributes=function(){return d.getContextAttributes()},this.forceContextLoss=function(){var t=p.get("WEBGL_lose_context");t&&t.loseContext()},this.forceContextRestore=function(){var t=p.get("WEBGL_lose_context");t&&t.restoreContext()},this.getPixelRatio=function(){return kt},this.setPixelRatio=function(t){void 0!==t&&(kt=t,this.setSize(Ot,Dt,!1))},this.getSize=function(){return{width:Ot,height:Dt}},this.setSize=function(t,n,r){oe.isPresenting()?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(Ot=t,Dt=n,e.width=t*kt,e.height=n*kt,!1!==r&&(e.style.width=t+"px",e.style.height=n+"px"),this.setViewport(0,0,t,n))},this.getDrawingBufferSize=function(){return{width:Ot*kt,height:Dt*kt}},this.setDrawingBufferSize=function(t,n,r){Ot=t,Dt=n,kt=r,e.width=t*r,e.height=n*r,this.setViewport(0,0,t,n)},this.getCurrentViewport=function(){return et},this.setViewport=function(t,e,n,r){jt.set(t,Dt-e-r,n,r),m.viewport(et.copy(jt).multiplyScalar(kt))},this.setScissor=function(t,e,n,r){Ut.set(t,Dt-e-r,n,r),m.scissor(nt.copy(Ut).multiplyScalar(kt))},this.setScissorTest=function(t){m.setScissorTest(Gt=t)},this.getClearColor=function(){return N.getClearColor()},this.setClearColor=function(){N.setClearColor.apply(N,arguments)},this.getClearAlpha=function(){return N.getClearAlpha()},this.setClearAlpha=function(){N.setClearAlpha.apply(N,arguments)},this.clear=function(t,e,n){var r=0;(void 0===t||t)&&(r|=16384),(void 0===e||e)&&(r|=256),(void 0===n||n)&&(r|=1024),d.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",se,!1),e.removeEventListener("webglcontextrestored",ue,!1),L.dispose(),I.dispose(),w.dispose(),O.dispose(),oe.dispose(),pe.stop()},this.renderBufferImmediate=function(t,e){m.initAttributes();var n=w.get(t);t.hasPositions&&!n.position&&(n.position=d.createBuffer()),t.hasNormals&&!n.normal&&(n.normal=d.createBuffer()),t.hasUvs&&!n.uv&&(n.uv=d.createBuffer()),t.hasColors&&!n.color&&(n.color=d.createBuffer());var r=e.getAttributes();t.hasPositions&&(d.bindBuffer(34962,n.position),d.bufferData(34962,t.positionArray,35048),m.enableAttribute(r.position),d.vertexAttribPointer(r.position,3,5126,!1,0,0)),t.hasNormals&&(d.bindBuffer(34962,n.normal),d.bufferData(34962,t.normalArray,35048),m.enableAttribute(r.normal),d.vertexAttribPointer(r.normal,3,5126,!1,0,0)),t.hasUvs&&(d.bindBuffer(34962,n.uv),d.bufferData(34962,t.uvArray,35048),m.enableAttribute(r.uv),d.vertexAttribPointer(r.uv,2,5126,!1,0,0)),t.hasColors&&(d.bindBuffer(34962,n.color),d.bufferData(34962,t.colorArray,35048),m.enableAttribute(r.color),d.vertexAttribPointer(r.color,3,5126,!1,0,0)),m.disableUnusedAttributes(),d.drawArrays(4,0,t.count),t.count=0},this.renderBufferDirect=function(t,e,n,r,i,o){var a=i.isMesh&&i.normalMatrix.determinant()<0;m.setMaterial(r,a);var s=ge(t,e,r,i),u=!1;J.geometry===n.id&&J.program===s.id&&J.wireframe===(!0===r.wireframe)||(J.geometry=n.id,J.program=s.id,J.wireframe=!0===r.wireframe,u=!0),i.morphTargetInfluences&&(V.update(i,n,r,s),u=!0);var l,c=n.index,h=n.attributes.position,v=1;!0===r.wireframe&&(c=S.getWireframeAttribute(n),v=2);var g=z;null!==c&&(l=E.get(c),(g=H).setIndex(l)),u&&(function(t,e,n){if(n&&n.isInstancedBufferGeometry&!f.isWebGL2&&null===p.get("ANGLE_instanced_arrays"))console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");else{m.initAttributes();var r=n.attributes,i=e.getAttributes(),o=t.defaultAttributeValues;for(var a in i){var s=i[a];if(s>=0){var u=r[a];if(void 0!==u){var l=u.normalized,c=u.itemSize,h=E.get(u);if(void 0===h)continue;var v=h.buffer,g=h.type,y=h.bytesPerElement;if(u.isInterleavedBufferAttribute){var _=u.data,b=_.stride,w=u.offset;_&&_.isInstancedInterleavedBuffer?(m.enableAttributeAndDivisor(s,_.meshPerAttribute),void 0===n.maxInstancedCount&&(n.maxInstancedCount=_.meshPerAttribute*_.count)):m.enableAttribute(s),d.bindBuffer(34962,v),d.vertexAttribPointer(s,c,g,l,b*y,w*y)}else u.isInstancedBufferAttribute?(m.enableAttributeAndDivisor(s,u.meshPerAttribute),void 0===n.maxInstancedCount&&(n.maxInstancedCount=u.meshPerAttribute*u.count)):m.enableAttribute(s),d.bindBuffer(34962,v),d.vertexAttribPointer(s,c,g,l,0,0)}else if(void 0!==o){var x=o[a];if(void 0!==x)switch(x.length){case 2:d.vertexAttrib2fv(s,x);break;case 3:d.vertexAttrib3fv(s,x);break;case 4:d.vertexAttrib4fv(s,x);break;default:d.vertexAttrib1fv(s,x)}}}}m.disableUnusedAttributes()}}(r,s,n),null!==c&&d.bindBuffer(34963,l.buffer));var y=1/0;null!==c?y=c.count:void 0!==h&&(y=h.count);var _=n.drawRange.start*v,b=n.drawRange.count*v,w=null!==o?o.start*v:0,x=null!==o?o.count*v:1/0,T=Math.max(_,w),M=Math.min(y,_+b,w+x)-1,C=Math.max(0,M-T+1);if(0!==C){if(i.isMesh)if(!0===r.wireframe)m.setLineWidth(r.wireframeLinewidth*te()),g.setMode(1);else switch(i.drawMode){case ke:g.setMode(4);break;case Fe:g.setMode(5);break;case je:g.setMode(6)}else if(i.isLine){var A=r.linewidth;void 0===A&&(A=1),m.setLineWidth(A*te()),g.setMode(i.isLineSegments?1:i.isLineLoop?2:3)}else i.isPoints?g.setMode(0):i.isSprite&&g.setMode(4);n&&n.isInstancedBufferGeometry?n.maxInstancedCount>0&&g.renderInstances(n,T,C):g.render(T,C)}},this.compile=function(t,e){(h=I.get(t,e)).init(),t.traverse(function(t){t.isLight&&(h.pushLight(t),t.castShadow&&h.pushShadow(t))}),h.setupLights(e),t.traverse(function(e){if(e.material)if(Array.isArray(e.material))for(var n=0;n<e.material.length;n++)ve(e.material[n],t.fog,e);else ve(e.material,t.fog,e)})};var he,de=null,pe=new Ln;function fe(t,e,n,r){for(var i=0,o=t.length;i<o;i++){var a=t[i],s=a.object,u=a.geometry,l=void 0===r?a.material:r,c=a.group;if(n.isArrayCamera){tt=n;for(var d=n.cameras,p=0,f=d.length;p<f;p++){var v=d[p];if(s.layers.test(v.layers)){if("viewport"in v)m.viewport(et.copy(v.viewport));else{var g=v.bounds;m.viewport(et.set(g.x*Ot,g.y*Dt,g.z*Ot,g.w*Dt).multiplyScalar(kt))}h.setupLights(v),me(s,e,v,u,l,c)}}}else tt=null,me(s,e,n,u,l,c)}}function me(t,e,n,r,i,o){if(t.onBeforeRender(q,e,n,r,i,o),h=I.get(e,tt||n),t.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,t.matrixWorld),t.normalMatrix.getNormalMatrix(t.modelViewMatrix),t.isImmediateRenderObject){m.setMaterial(i);var a=ge(n,e.fog,i,t);J.geometry=null,J.program=null,J.wireframe=!1,function(t,e){t.render(function(t){q.renderBufferImmediate(t,e)})}(t,a)}else q.renderBufferDirect(n,e.fog,r,i,t,o);t.onAfterRender(q,e,n,r,i,o),h=I.get(e,tt||n)}function ve(t,e,n){var r=w.get(t),i=h.state.lights,o=r.lightsHash,a=i.state.hash,s=R.getParameters(t,i.state,h.state.shadowsArray,e,qt.numPlanes,qt.numIntersection,n),u=R.getProgramCode(t,s),l=r.program,c=!0;if(void 0===l)t.addEventListener("dispose",le);else if(l.code!==u)ce(t);else if(o.stateID!==a.stateID||o.directionalLength!==a.directionalLength||o.pointLength!==a.pointLength||o.spotLength!==a.spotLength||o.rectAreaLength!==a.rectAreaLength||o.hemiLength!==a.hemiLength||o.shadowsLength!==a.shadowsLength)o.stateID=a.stateID,o.directionalLength=a.directionalLength,o.pointLength=a.pointLength,o.spotLength=a.spotLength,o.rectAreaLength=a.rectAreaLength,o.hemiLength=a.hemiLength,o.shadowsLength=a.shadowsLength,c=!1;else{if(void 0!==s.shaderID)return;c=!1}if(c){if(s.shaderID){var d=Rn[s.shaderID];r.shader={name:t.type,uniforms:wn(d.uniforms),vertexShader:d.vertexShader,fragmentShader:d.fragmentShader}}else r.shader={name:t.type,uniforms:t.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader};t.onBeforeCompile(r.shader,q),u=R.getProgramCode(t,s),l=R.acquireProgram(t,r.shader,s,u),r.program=l,t.program=l}var p=l.getAttributes();if(t.morphTargets){t.numSupportedMorphTargets=0;for(var f=0;f<q.maxMorphTargets;f++)p["morphTarget"+f]>=0&&t.numSupportedMorphTargets++}if(t.morphNormals)for(t.numSupportedMorphNormals=0,f=0;f<q.maxMorphNormals;f++)p["morphNormal"+f]>=0&&t.numSupportedMorphNormals++;var m=r.shader.uniforms;(t.isShaderMaterial||t.isRawShaderMaterial)&&!0!==t.clipping||(r.numClippingPlanes=qt.numPlanes,r.numIntersection=qt.numIntersection,m.clippingPlanes=qt.uniform),r.fog=e,void 0===o&&(r.lightsHash=o={}),o.stateID=a.stateID,o.directionalLength=a.directionalLength,o.pointLength=a.pointLength,o.spotLength=a.spotLength,o.rectAreaLength=a.rectAreaLength,o.hemiLength=a.hemiLength,o.shadowsLength=a.shadowsLength,t.lights&&(m.ambientLightColor.value=i.state.ambient,m.directionalLights.value=i.state.directional,m.spotLights.value=i.state.spot,m.rectAreaLights.value=i.state.rectArea,m.pointLights.value=i.state.point,m.hemisphereLights.value=i.state.hemi,m.directionalShadowMap.value=i.state.directionalShadowMap,m.directionalShadowMatrix.value=i.state.directionalShadowMatrix,m.spotShadowMap.value=i.state.spotShadowMap,m.spotShadowMatrix.value=i.state.spotShadowMatrix,m.pointShadowMap.value=i.state.pointShadowMap,m.pointShadowMatrix.value=i.state.pointShadowMatrix);var v=r.program.getUniforms(),g=wi.seqWithValue(v.seq,m);r.uniformsList=g}function ge(t,e,n,r){At=0;var i=w.get(n),o=i.lightsHash,a=h.state.lights.state.hash;Xt&&(Kt||t!==$)&&qt.setState(n.clippingPlanes,n.clipIntersection,n.clipShadows,t,i,t===$&&n.id===Q),!1===n.needsUpdate&&(void 0===i.program?n.needsUpdate=!0:n.fog&&i.fog!==e?n.needsUpdate=!0:(!n.lights||o.stateID===a.stateID&&o.directionalLength===a.directionalLength&&o.pointLength===a.pointLength&&o.spotLength===a.spotLength&&o.rectAreaLength===a.rectAreaLength&&o.hemiLength===a.hemiLength&&o.shadowsLength===a.shadowsLength)&&(void 0===i.numClippingPlanes||i.numClippingPlanes===qt.numPlanes&&i.numIntersection===qt.numIntersection)||(n.needsUpdate=!0)),n.needsUpdate&&(ve(n,e,r),n.needsUpdate=!1);var s,u,l=!1,c=!1,p=!1,v=i.program,g=v.getUniforms(),y=i.shader.uniforms;if(m.useProgram(v.program)&&(l=!0,c=!0,p=!0),n.id!==Q&&(Q=n.id,c=!0),l||$!==t){if(g.setValue(d,"projectionMatrix",t.projectionMatrix),f.logarithmicDepthBuffer&&g.setValue(d,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),$!==t&&($=t,c=!0,p=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshStandardMaterial||n.envMap){var _=g.map.cameraPosition;void 0!==_&&_.setValue(d,$t.setFromMatrixPosition(t.matrixWorld))}(n.isMeshPhongMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.skinning)&&g.setValue(d,"viewMatrix",t.matrixWorldInverse)}if(n.skinning){g.setOptional(d,r,"bindMatrix"),g.setOptional(d,r,"bindMatrixInverse");var b=r.skeleton;if(b)if(f.floatVertexTextures){if(void 0===b.boneTexture){var x=Math.sqrt(4*b.bones.length);x=Qe.ceilPowerOfTwo(x),x=Math.max(x,4);var E=new Float32Array(x*x*4);E.set(b.boneMatrices);var S=new mn(E,x,x,Qt,zt);S.needsUpdate=!0,b.boneMatrices=E,b.boneTexture=S,b.boneTextureSize=x}g.setValue(d,"boneTexture",b.boneTexture),g.setValue(d,"boneTextureSize",b.boneTextureSize)}else g.setOptional(d,b,"boneMatrices")}return c&&(g.setValue(d,"toneMappingExposure",q.toneMappingExposure),g.setValue(d,"toneMappingWhitePoint",q.toneMappingWhitePoint),n.lights&&((s=y).ambientLightColor.needsUpdate=u=p,s.directionalLights.needsUpdate=u,s.pointLights.needsUpdate=u,s.spotLights.needsUpdate=u,s.rectAreaLights.needsUpdate=u,s.hemisphereLights.needsUpdate=u),e&&n.fog&&function(t,e){t.fogColor.value=e.color,e.isFog?(t.fogNear.value=e.near,t.fogFar.value=e.far):e.isFogExp2&&(t.fogDensity.value=e.density)}(y,e),n.isMeshBasicMaterial?ye(y,n):n.isMeshLambertMaterial?(ye(y,n),function(t,e){e.emissiveMap&&(y.emissiveMap.value=e.emissiveMap)}(0,n)):n.isMeshPhongMaterial?(ye(y,n),n.isMeshToonMaterial?function(t,e){_e(t,e),e.gradientMap&&(t.gradientMap.value=e.gradientMap)}(y,n):_e(y,n)):n.isMeshStandardMaterial?(ye(y,n),n.isMeshPhysicalMaterial?function(t,e){be(t,e),t.reflectivity.value=e.reflectivity,t.clearCoat.value=e.clearCoat,t.clearCoatRoughness.value=e.clearCoatRoughness}(y,n):be(y,n)):n.isMeshMatcapMaterial?(ye(y,n),function(t,e){e.matcap&&(t.matcap.value=e.matcap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===A&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===A&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(y,n)):n.isMeshDepthMaterial?(ye(y,n),function(t,e){e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(y,n)):n.isMeshDistanceMaterial?(ye(y,n),function(t,e){e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias),t.referencePosition.value.copy(e.referencePosition),t.nearDistance.value=e.nearDistance,t.farDistance.value=e.farDistance}(y,n)):n.isMeshNormalMaterial?(ye(y,n),function(t,e){e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===A&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===A&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(y,n)):n.isLineBasicMaterial?(function(t,e){t.diffuse.value=e.color,t.opacity.value=e.opacity}(y,n),n.isLineDashedMaterial&&function(t,e){t.dashSize.value=e.dashSize,t.totalSize.value=e.dashSize+e.gapSize,t.scale.value=e.scale}(y,n)):n.isPointsMaterial?function(t,e){t.diffuse.value=e.color,t.opacity.value=e.opacity,t.size.value=e.size*kt,t.scale.value=.5*Dt,t.map.value=e.map,null!==e.map&&(!0===e.map.matrixAutoUpdate&&e.map.updateMatrix(),t.uvTransform.value.copy(e.map.matrix))}(y,n):n.isSpriteMaterial?function(t,e){t.diffuse.value=e.color,t.opacity.value=e.opacity,t.rotation.value=e.rotation,t.map.value=e.map,null!==e.map&&(!0===e.map.matrixAutoUpdate&&e.map.updateMatrix(),t.uvTransform.value.copy(e.map.matrix))}(y,n):n.isShadowMaterial&&(y.color.value=n.color,y.opacity.value=n.opacity),void 0!==y.ltc_1&&(y.ltc_1.value=On.LTC_1),void 0!==y.ltc_2&&(y.ltc_2.value=On.LTC_2),wi.upload(d,i.uniformsList,y,q)),n.isShaderMaterial&&!0===n.uniformsNeedUpdate&&(wi.upload(d,i.uniformsList,y,q),n.uniformsNeedUpdate=!1),n.isSpriteMaterial&&g.setValue(d,"center",r.center),g.setValue(d,"modelViewMatrix",r.modelViewMatrix),g.setValue(d,"normalMatrix",r.normalMatrix),g.setValue(d,"modelMatrix",r.matrixWorld),v}function ye(t,e){var n;t.opacity.value=e.opacity,e.color&&(t.diffuse.value=e.color),e.emissive&&t.emissive.value.copy(e.emissive).multiplyScalar(e.emissiveIntensity),e.map&&(t.map.value=e.map),e.alphaMap&&(t.alphaMap.value=e.alphaMap),e.specularMap&&(t.specularMap.value=e.specularMap),e.envMap&&(t.envMap.value=e.envMap,t.flipEnvMap.value=e.envMap.isCubeTexture?-1:1,t.reflectivity.value=e.reflectivity,t.refractionRatio.value=e.refractionRatio,t.maxMipLevel.value=w.get(e.envMap).__maxMipLevel),e.lightMap&&(t.lightMap.value=e.lightMap,t.lightMapIntensity.value=e.lightMapIntensity),e.aoMap&&(t.aoMap.value=e.aoMap,t.aoMapIntensity.value=e.aoMapIntensity),e.map?n=e.map:e.specularMap?n=e.specularMap:e.displacementMap?n=e.displacementMap:e.normalMap?n=e.normalMap:e.bumpMap?n=e.bumpMap:e.roughnessMap?n=e.roughnessMap:e.metalnessMap?n=e.metalnessMap:e.alphaMap?n=e.alphaMap:e.emissiveMap&&(n=e.emissiveMap),void 0!==n&&(n.isWebGLRenderTarget&&(n=n.texture),!0===n.matrixAutoUpdate&&n.updateMatrix(),t.uvTransform.value.copy(n.matrix))}function _e(t,e){t.specular.value=e.specular,t.shininess.value=Math.max(e.shininess,1e-4),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===A&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===A&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}function be(t,e){t.roughness.value=e.roughness,t.metalness.value=e.metalness,e.roughnessMap&&(t.roughnessMap.value=e.roughnessMap),e.metalnessMap&&(t.metalnessMap.value=e.metalnessMap),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===A&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===A&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias),e.envMap&&(t.envMapIntensity.value=e.envMapIntensity)}pe.setAnimationLoop(function(t){oe.isPresenting()||de&&de(t)}),"undefined"!=typeof window&&pe.setContext(window),this.setAnimationLoop=function(t){de=t,oe.setAnimationLoop(t),pe.start()},this.render=function(t,e,n,r){if(e&&e.isCamera){if(!X){J.geometry=null,J.program=null,J.wireframe=!1,Q=-1,$=null,!0===t.autoUpdate&&t.updateMatrixWorld(),null===e.parent&&e.updateMatrixWorld(),oe.enabled&&(e=oe.getCamera(e)),(h=I.get(t,e)).init(),t.onBeforeRender(q,t,e,n),Jt.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),Wt.setFromMatrix(Jt),Xt=qt.init(this.clippingPlanes,Kt=this.localClippingEnabled,e),(c=L.get(t,e)).init(),function t(e,n,r){if(!1!==e.visible){if(e.layers.test(n.layers))if(e.isLight)h.pushLight(e),e.castShadow&&h.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||Wt.intersectsSprite(e)){r&&$t.setFromMatrixPosition(e.matrixWorld).applyMatrix4(Jt);var i=O.update(e);c.push(e,i,o=e.material,$t.z,null)}}else if(e.isImmediateRenderObject)r&&$t.setFromMatrixPosition(e.matrixWorld).applyMatrix4(Jt),c.push(e,null,e.material,$t.z,null);else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.update(),!e.frustumCulled||Wt.intersectsObject(e))){r&&$t.setFromMatrixPosition(e.matrixWorld).applyMatrix4(Jt),i=O.update(e);var o=e.material;if(Array.isArray(o))for(var a=i.groups,s=0,u=a.length;s<u;s++){var l=a[s],d=o[l.materialIndex];d&&d.visible&&c.push(e,i,d,$t.z,l)}else o.visible&&c.push(e,i,o,$t.z,null)}var p=e.children;for(s=0,u=p.length;s<u;s++)t(p[s],n,r)}}(t,e,q.sortObjects),!0===q.sortObjects&&c.sort(),Xt&&qt.beginShadows(),ae.render(h.state.shadowsArray,t,e),h.setupLights(e),Xt&&qt.endShadows(),this.info.autoReset&&this.info.reset(),void 0===n&&(n=null),this.setRenderTarget(n),N.render(c,t,e,r);var i=c.opaque,o=c.transparent;if(t.overrideMaterial){var a=t.overrideMaterial;i.length&&fe(i,t,e,a),o.length&&fe(o,t,e,a)}else i.length&&fe(i,t,e),o.length&&fe(o,t,e);n&&x.updateRenderTargetMipmap(n),m.buffers.depth.setTest(!0),m.buffers.depth.setMask(!0),m.buffers.color.setMask(!0),m.setPolygonOffset(!1),t.onAfterRender(q,t,e),oe.enabled&&oe.submitFrame(),c=null,h=null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.allocTextureUnit=function(){var t=At;return t>=f.maxTextures&&console.warn("THREE.WebGLRenderer: Trying to use "+t+" texture units while this GPU supports only "+f.maxTextures),At+=1,t},this.setTexture2D=(he=!1,function(t,e){t&&t.isWebGLRenderTarget&&(he||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),he=!0),t=t.texture),x.setTexture2D(t,e)}),this.setTexture3D=function(t,e){x.setTexture3D(t,e)},this.setTexture=function(){var t=!1;return function(e,n){t||(console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."),t=!0),x.setTexture2D(e,n)}}(),this.setTextureCube=function(){var t=!1;return function(e,n){e&&e.isWebGLRenderTargetCube&&(t||(console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead."),t=!0),e=e.texture),e&&e.isCubeTexture||Array.isArray(e.image)&&6===e.image.length?x.setTextureCube(e,n):x.setTextureCubeDynamic(e,n)}}(),this.setFramebuffer=function(t){Y=t},this.getRenderTarget=function(){return K},this.setRenderTarget=function(t){K=t,t&&void 0===w.get(t).__webglFramebuffer&&x.setupRenderTarget(t);var e=Y,n=!1;if(t){var r=w.get(t).__webglFramebuffer;t.isWebGLRenderTargetCube?(e=r[t.activeCubeFace],n=!0):e=r,et.copy(t.viewport),nt.copy(t.scissor),bt=t.scissorTest}else et.copy(jt).multiplyScalar(kt),nt.copy(Ut).multiplyScalar(kt),bt=Gt;if(Z!==e&&(d.bindFramebuffer(36160,e),Z=e),m.viewport(et),m.scissor(nt),m.setScissorTest(bt),n){var i=w.get(t.texture);d.framebufferTexture2D(36160,36064,34069+t.activeCubeFace,i.__webglTexture,t.activeMipMapLevel)}},this.readRenderTargetPixels=function(t,e,n,r,i,o){if(t&&t.isWebGLRenderTarget){var a=w.get(t).__webglFramebuffer;if(a){var s=!1;a!==Z&&(d.bindFramebuffer(36160,a),s=!0);try{var u=t.texture,l=u.format,c=u.type;if(l!==Qt&&W.convert(l)!==d.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!(c===Ft||W.convert(c)===d.getParameter(35738)||c===zt&&(f.isWebGL2||p.get("OES_texture_float")||p.get("WEBGL_color_buffer_float"))||c===Ht&&p.get(f.isWebGL2?"EXT_color_buffer_float":"EXT_color_buffer_half_float")))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===d.checkFramebufferStatus(36160)?e>=0&&e<=t.width-r&&n>=0&&n<=t.height-i&&d.readPixels(e,n,r,i,W.convert(l),W.convert(c),o):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{s&&d.bindFramebuffer(36160,Z)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(t,e,n){var r=e.image.width,i=e.image.height,o=W.convert(e.format);this.setTexture2D(e,0),d.copyTexImage2D(3553,n||0,o,t.x,t.y,r,i,0)},this.copyTextureToTexture=function(t,e,n,r){var i=e.image.width,o=e.image.height,a=W.convert(n.format),s=W.convert(n.type);this.setTexture2D(n,0),e.isDataTexture?d.texSubImage2D(3553,r||0,t.x,t.y,i,o,a,s,e.image.data):d.texSubImage2D(3553,r||0,t.x,t.y,a,s,e.image)}}function eo(t,e){this.name="",this.color=new An(t),this.density=void 0!==e?e:25e-5}function no(t,e,n){this.name="",this.color=new An(t),this.near=void 0!==e?e:1,this.far=void 0!==n?n:1e3}function ro(){Gn.call(this),this.type="Scene",this.background=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0}function io(t,e){this.array=t,this.stride=e,this.count=void 0!==t?t.length/e:0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function oo(t,e,n,r){this.data=t,this.itemSize=e,this.offset=n,this.normalized=!0===r}function ao(t){Er.call(this),this.type="SpriteMaterial",this.color=new An(16777215),this.map=null,this.rotation=0,this.sizeAttenuation=!0,this.lights=!1,this.transparent=!0,this.setValues(t)}function so(t){if(Gn.call(this),this.type="Sprite",void 0===Hi){Hi=new or;var e=new io(new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),5);Hi.setIndex([0,1,2,0,2,3]),Hi.addAttribute("position",new oo(e,3,0,!1)),Hi.addAttribute("uv",new oo(e,2,3,!1))}this.geometry=Hi,this.material=void 0!==t?t:new ao,this.center=new Je(.5,.5)}function uo(){Gn.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})}function lo(t,e){t&&t.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),Ar.call(this,t,e),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new $e,this.bindMatrixInverse=new $e}function co(t,e){if(this.bones=(t=t||[]).slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),void 0===e)this.calculateInverses();else if(this.bones.length===e.length)this.boneInverses=e.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(var n=0,r=this.bones.length;n<r;n++)this.boneInverses.push(new $e)}}function ho(){Gn.call(this),this.type="Bone"}function po(t){Er.call(this),this.type="LineBasicMaterial",this.color=new An(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.lights=!1,this.setValues(t)}function fo(t,e,n){1===n&&console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead."),Gn.call(this),this.type="Line",this.geometry=void 0!==t?t:new or,this.material=void 0!==e?e:new po({color:16777215*Math.random()})}function mo(t,e){fo.call(this,t,e),this.type="LineSegments"}function vo(t,e){fo.call(this,t,e),this.type="LineLoop"}function go(t){Er.call(this),this.type="PointsMaterial",this.color=new An(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.lights=!1,this.setValues(t)}function yo(t,e){Gn.call(this),this.type="Points",this.geometry=void 0!==t?t:new or,this.material=void 0!==e?e:new go({color:16777215*Math.random()})}function _o(t,e,n,r,i,o,a,s,u){hn.call(this,t,e,n,r,i,o,a,s,u),this.format=void 0!==a?a:Zt,this.minFilter=void 0!==o?o:Nt,this.magFilter=void 0!==i?i:Nt,this.generateMipmaps=!1}function bo(t,e,n,r,i,o,a,s,u,l,c,h){hn.call(this,null,o,a,s,u,l,r,i,c,h),this.image={width:e,height:n},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}function wo(t,e,n,r,i,o,a,s,u){hn.call(this,t,e,n,r,i,o,a,s,u),this.needsUpdate=!0}function xo(t,e,n,r,i,o,a,s,u,l){if((l=void 0!==l?l:ee)!==ee&&l!==ne)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&l===ee&&(n=Bt),void 0===n&&l===ne&&(n=Yt),hn.call(this,null,r,i,o,a,s,l,n,u),this.image={width:t,height:e},this.magFilter=void 0!==a?a:Rt,this.minFilter=void 0!==s?s:Rt,this.flipY=!1,this.generateMipmaps=!1}function Eo(t){or.call(this),this.type="WireframeGeometry";var e,n,r,i,o,a,s,u,l,c,h=[],d=[0,0],p={},f=["a","b","c"];if(t&&t.isGeometry){var m=t.faces;for(e=0,r=m.length;e<r;e++){var v=m[e];for(n=0;n<3;n++)s=v[f[n]],u=v[f[(n+1)%3]],d[0]=Math.min(s,u),d[1]=Math.max(s,u),void 0===p[l=d[0]+","+d[1]]&&(p[l]={index1:d[0],index2:d[1]})}for(l in p)h.push((c=t.vertices[(a=p[l]).index1]).x,c.y,c.z),h.push((c=t.vertices[a.index2]).x,c.y,c.z)}else if(t&&t.isBufferGeometry){var g,y,_,b,w;if(c=new en,null!==t.index){for(g=t.attributes.position,y=t.index,0===(_=t.groups).length&&(_=[{start:0,count:y.count,materialIndex:0}]),i=0,o=_.length;i<o;++i)for(e=w=(b=_[i]).start,r=w+b.count;e<r;e+=3)for(n=0;n<3;n++)s=y.getX(e+n),u=y.getX(e+(n+1)%3),d[0]=Math.min(s,u),d[1]=Math.max(s,u),void 0===p[l=d[0]+","+d[1]]&&(p[l]={index1:d[0],index2:d[1]});for(l in p)c.fromBufferAttribute(g,(a=p[l]).index1),h.push(c.x,c.y,c.z),c.fromBufferAttribute(g,a.index2),h.push(c.x,c.y,c.z)}else for(e=0,r=(g=t.attributes.position).count/3;e<r;e++)for(n=0;n<3;n++)c.fromBufferAttribute(g,3*e+n),h.push(c.x,c.y,c.z),c.fromBufferAttribute(g,3*e+(n+1)%3),h.push(c.x,c.y,c.z)}this.addAttribute("position",new tr(h,3))}function So(t,e,n){Wn.call(this),this.type="ParametricGeometry",this.parameters={func:t,slices:e,stacks:n},this.fromBufferGeometry(new To(t,e,n)),this.mergeVertices()}function To(t,e,n){or.call(this),this.type="ParametricBufferGeometry",this.parameters={func:t,slices:e,stacks:n};var r,i,o=[],a=[],s=[],u=[],l=new en,c=new en,h=new en,d=new en,p=new en;t.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");var f=e+1;for(r=0;r<=n;r++){var m=r/n;for(i=0;i<=e;i++){var v=i/e;t(v,m,c),a.push(c.x,c.y,c.z),v-1e-5>=0?(t(v-1e-5,m,h),d.subVectors(c,h)):(t(v+1e-5,m,h),d.subVectors(h,c)),m-1e-5>=0?(t(v,m-1e-5,h),p.subVectors(c,h)):(t(v,m+1e-5,h),p.subVectors(h,c)),l.crossVectors(d,p).normalize(),s.push(l.x,l.y,l.z),u.push(v,m)}}for(r=0;r<n;r++)for(i=0;i<e;i++){var g=r*f+i+1,y=(r+1)*f+i+1,_=(r+1)*f+i;o.push(r*f+i,g,_),o.push(g,y,_)}this.setIndex(o),this.addAttribute("position",new tr(a,3)),this.addAttribute("normal",new tr(s,3)),this.addAttribute("uv",new tr(u,2))}function Mo(t,e,n,r){Wn.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:e,radius:n,detail:r},this.fromBufferGeometry(new Co(t,e,n,r)),this.mergeVertices()}function Co(t,e,n,r){or.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:t,indices:e,radius:n,detail:r},n=n||1;var i=[],o=[];function a(t,e,n,r){var i,o,a=Math.pow(2,r),u=[];for(i=0;i<=a;i++){u[i]=[];var l=t.clone().lerp(n,i/a),c=e.clone().lerp(n,i/a),h=a-i;for(o=0;o<=h;o++)u[i][o]=0===o&&i===a?l:l.clone().lerp(c,o/h)}for(i=0;i<a;i++)for(o=0;o<2*(a-i)-1;o++){var d=Math.floor(o/2);o%2==0?(s(u[i][d+1]),s(u[i+1][d]),s(u[i][d])):(s(u[i][d+1]),s(u[i+1][d+1]),s(u[i+1][d]))}}function s(t){i.push(t.x,t.y,t.z)}function u(e,n){var r=3*e;n.x=t[r+0],n.y=t[r+1],n.z=t[r+2]}function l(t,e,n,r){r<0&&1===t.x&&(o[e]=t.x-1),0===n.x&&0===n.z&&(o[e]=r/2/Math.PI+.5)}function c(t){return Math.atan2(t.z,-t.x)}!function(t){for(var n=new en,r=new en,i=new en,o=0;o<e.length;o+=3)u(e[o+0],n),u(e[o+1],r),u(e[o+2],i),a(n,r,i,t)}(r=r||0),function(t){for(var e=new en,n=0;n<i.length;n+=3)e.x=i[n+0],e.y=i[n+1],e.z=i[n+2],e.normalize().multiplyScalar(t),i[n+0]=e.x,i[n+1]=e.y,i[n+2]=e.z}(n),function(){for(var t=new en,e=0;e<i.length;e+=3){t.x=i[e+0],t.y=i[e+1],t.z=i[e+2];var n=c(t)/2/Math.PI+.5,r=(a=t,Math.atan2(-a.y,Math.sqrt(a.x*a.x+a.z*a.z))/Math.PI+.5);o.push(n,1-r)}var a;(function(){for(var t=new en,e=new en,n=new en,r=new en,a=new Je,s=new Je,u=new Je,h=0,d=0;h<i.length;h+=9,d+=6){t.set(i[h+0],i[h+1],i[h+2]),e.set(i[h+3],i[h+4],i[h+5]),n.set(i[h+6],i[h+7],i[h+8]),a.set(o[d+0],o[d+1]),s.set(o[d+2],o[d+3]),u.set(o[d+4],o[d+5]),r.copy(t).add(e).add(n).divideScalar(3);var p=c(r);l(a,d+0,t,p),l(s,d+2,e,p),l(u,d+4,n,p)}})(),function(){for(var t=0;t<o.length;t+=6){var e=o[t+0],n=o[t+2],r=o[t+4],i=Math.max(e,n,r),a=Math.min(e,n,r);i>.9&&a<.1&&(e<.2&&(o[t+0]+=1),n<.2&&(o[t+2]+=1),r<.2&&(o[t+4]+=1))}}()}(),this.addAttribute("position",new tr(i,3)),this.addAttribute("normal",new tr(i.slice(),3)),this.addAttribute("uv",new tr(o,2)),0===r?this.computeVertexNormals():this.normalizeNormals()}function Ao(t,e){Wn.call(this),this.type="TetrahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new Po(t,e)),this.mergeVertices()}function Po(t,e){Co.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],t,e),this.type="TetrahedronBufferGeometry",this.parameters={radius:t,detail:e}}function Oo(t,e){Wn.call(this),this.type="OctahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new Ro(t,e)),this.mergeVertices()}function Ro(t,e){Co.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],t,e),this.type="OctahedronBufferGeometry",this.parameters={radius:t,detail:e}}function Lo(t,e){Wn.call(this),this.type="IcosahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new Io(t,e)),this.mergeVertices()}function Io(t,e){var n=(1+Math.sqrt(5))/2;Co.call(this,[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],t,e),this.type="IcosahedronBufferGeometry",this.parameters={radius:t,detail:e}}function No(t,e){Wn.call(this),this.type="DodecahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new Do(t,e)),this.mergeVertices()}function Do(t,e){var n=(1+Math.sqrt(5))/2,r=1/n;Co.call(this,[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],t,e),this.type="DodecahedronBufferGeometry",this.parameters={radius:t,detail:e}}function ko(t,e,n,r,i,o){Wn.call(this),this.type="TubeGeometry",this.parameters={path:t,tubularSegments:e,radius:n,radialSegments:r,closed:i},void 0!==o&&console.warn("THREE.TubeGeometry: taper has been removed.");var a=new Fo(t,e,n,r,i);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals,this.fromBufferGeometry(a),this.mergeVertices()}function Fo(t,e,n,r,i){or.call(this),this.type="TubeBufferGeometry",this.parameters={path:t,tubularSegments:e,radius:n,radialSegments:r,closed:i},e=e||64,n=n||1,r=r||8;var o=t.computeFrenetFrames(e,i=i||!1);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;var a,s,u=new en,l=new en,c=new Je,h=new en,d=[],p=[],f=[],m=[];function v(i){h=t.getPointAt(i/e,h);var a=o.normals[i],c=o.binormals[i];for(s=0;s<=r;s++){var f=s/r*Math.PI*2,m=Math.sin(f),v=-Math.cos(f);l.x=v*a.x+m*c.x,l.y=v*a.y+m*c.y,l.z=v*a.z+m*c.z,l.normalize(),p.push(l.x,l.y,l.z),u.x=h.x+n*l.x,u.y=h.y+n*l.y,u.z=h.z+n*l.z,d.push(u.x,u.y,u.z)}}!function(){for(a=0;a<e;a++)v(a);v(!1===i?e:0),function(){for(a=0;a<=e;a++)for(s=0;s<=r;s++)c.x=a/e,c.y=s/r,f.push(c.x,c.y)}(),function(){for(s=1;s<=e;s++)for(a=1;a<=r;a++){var t=(r+1)*s+(a-1),n=(r+1)*s+a,i=(r+1)*(s-1)+a;m.push((r+1)*(s-1)+(a-1),t,i),m.push(t,n,i)}}()}(),this.setIndex(m),this.addAttribute("position",new tr(d,3)),this.addAttribute("normal",new tr(p,3)),this.addAttribute("uv",new tr(f,2))}function jo(t,e,n,r,i,o,a){Wn.call(this),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:e,tubularSegments:n,radialSegments:r,p:i,q:o},void 0!==a&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new Uo(t,e,n,r,i,o)),this.mergeVertices()}function Uo(t,e,n,r,i,o){or.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:t,tube:e,tubularSegments:n,radialSegments:r,p:i,q:o},t=t||1,e=e||.4,n=Math.floor(n)||64,r=Math.floor(r)||8,i=i||2,o=o||3;var a,s,u=[],l=[],c=[],h=[],d=new en,p=new en,f=new en,m=new en,v=new en,g=new en,y=new en;for(a=0;a<=n;++a){var _=a/n*i*Math.PI*2;for(M(_,i,o,t,f),M(_+.01,i,o,t,m),g.subVectors(m,f),y.addVectors(m,f),v.crossVectors(g,y),y.crossVectors(v,g),v.normalize(),y.normalize(),s=0;s<=r;++s){var b=s/r*Math.PI*2,w=-e*Math.cos(b),x=e*Math.sin(b);d.x=f.x+(w*y.x+x*v.x),d.y=f.y+(w*y.y+x*v.y),d.z=f.z+(w*y.z+x*v.z),l.push(d.x,d.y,d.z),p.subVectors(d,f).normalize(),c.push(p.x,p.y,p.z),h.push(a/n),h.push(s/r)}}for(s=1;s<=n;s++)for(a=1;a<=r;a++){var E=(r+1)*s+(a-1),S=(r+1)*s+a,T=(r+1)*(s-1)+a;u.push((r+1)*(s-1)+(a-1),E,T),u.push(E,S,T)}function M(t,e,n,r,i){var o=Math.cos(t),a=Math.sin(t),s=n/e*t,u=Math.cos(s);i.x=r*(2+u)*.5*o,i.y=r*(2+u)*a*.5,i.z=r*Math.sin(s)*.5}this.setIndex(u),this.addAttribute("position",new tr(l,3)),this.addAttribute("normal",new tr(c,3)),this.addAttribute("uv",new tr(h,2))}function Bo(t,e,n,r,i){Wn.call(this),this.type="TorusGeometry",this.parameters={radius:t,tube:e,radialSegments:n,tubularSegments:r,arc:i},this.fromBufferGeometry(new Go(t,e,n,r,i)),this.mergeVertices()}function Go(t,e,n,r,i){or.call(this),this.type="TorusBufferGeometry",this.parameters={radius:t,tube:e,radialSegments:n,tubularSegments:r,arc:i},t=t||1,e=e||.4,n=Math.floor(n)||8,r=Math.floor(r)||6,i=i||2*Math.PI;var o,a,s=[],u=[],l=[],c=[],h=new en,d=new en,p=new en;for(o=0;o<=n;o++)for(a=0;a<=r;a++){var f=a/r*i,m=o/n*Math.PI*2;d.x=(t+e*Math.cos(m))*Math.cos(f),d.y=(t+e*Math.cos(m))*Math.sin(f),d.z=e*Math.sin(m),u.push(d.x,d.y,d.z),h.x=t*Math.cos(f),h.y=t*Math.sin(f),p.subVectors(d,h).normalize(),l.push(p.x,p.y,p.z),c.push(a/r),c.push(o/n)}for(o=1;o<=n;o++)for(a=1;a<=r;a++){var v=(r+1)*(o-1)+a-1,g=(r+1)*(o-1)+a,y=(r+1)*o+a;s.push((r+1)*o+a-1,v,y),s.push(v,g,y)}this.setIndex(s),this.addAttribute("position",new tr(u,3)),this.addAttribute("normal",new tr(l,3)),this.addAttribute("uv",new tr(c,2))}function Vo(t,e,n,r,i){var o,a;if(i===function(t,e,n,r){for(var i=0,o=e,a=n-r;o<n;o+=r)i+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return i}(t,e,n,r)>0)for(o=e;o<n;o+=r)a=aa(o,t[o],t[o+1],a);else for(o=n-r;o>=e;o-=r)a=aa(o,t[o],t[o+1],a);return a&&na(a,a.next)&&(sa(a),a=a.next),a}function zo(t,e){if(!t)return t;e||(e=t);var n,r=t;do{if(n=!1,r.steiner||!na(r,r.next)&&0!==ea(r.prev,r,r.next))r=r.next;else{if(sa(r),(r=e=r.prev)===r.next)break;n=!0}}while(n||r!==e);return e}function Ho(t,e,n,r,i,o,a){if(t){!a&&o&&function(t,e,n,r){var i=t;do{null===i.z&&(i.z=Qo(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,n,r,i,o,a,s,u,l=1;do{for(n=t,t=null,o=null,a=0;n;){for(a++,r=n,s=0,e=0;e<l&&(s++,r=r.nextZ);e++);for(u=l;s>0||u>0&&r;)0!==s&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,u--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,l*=2}while(a>1)}(i)}(t,r,i,o);for(var s,u,l=t;t.prev!==t.next;)if(s=t.prev,u=t.next,o?qo(t,r,i,o):Wo(t))e.push(s.i/n),e.push(t.i/n),e.push(u.i/n),sa(t),t=u.next,l=u.next;else if((t=u)===l){a?1===a?Ho(t=Xo(t,e,n),e,n,r,i,o,2):2===a&&Yo(t,e,n,r,i,o):Ho(zo(t),e,n,r,i,o,1);break}}}function Wo(t){var e=t.prev,n=t,r=t.next;if(ea(e,n,r)>=0)return!1;for(var i=t.next.next;i!==t.prev;){if($o(e.x,e.y,n.x,n.y,r.x,r.y,i.x,i.y)&&ea(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function qo(t,e,n,r){var i=t.prev,o=t,a=t.next;if(ea(i,o,a)>=0)return!1;for(var s=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,u=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,l=Qo(i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,e,n,r),c=Qo(s,u,e,n,r),h=t.nextZ;h&&h.z<=c;){if(h!==t.prev&&h!==t.next&&$o(i.x,i.y,o.x,o.y,a.x,a.y,h.x,h.y)&&ea(h.prev,h,h.next)>=0)return!1;h=h.nextZ}for(h=t.prevZ;h&&h.z>=l;){if(h!==t.prev&&h!==t.next&&$o(i.x,i.y,o.x,o.y,a.x,a.y,h.x,h.y)&&ea(h.prev,h,h.next)>=0)return!1;h=h.prevZ}return!0}function Xo(t,e,n){var r=t;do{var i=r.prev,o=r.next.next;!na(i,o)&&ra(i,r,r.next,o)&&ia(i,o)&&ia(o,i)&&(e.push(i.i/n),e.push(r.i/n),e.push(o.i/n),sa(r),sa(r.next),r=t=o),r=r.next}while(r!==t);return r}function Yo(t,e,n,r,i,o){var a=t;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&ta(a,s)){var u=oa(a,s);return a=zo(a,a.next),u=zo(u,u.next),Ho(a,e,n,r,i,o),void Ho(u,e,n,r,i,o)}s=s.next}a=a.next}while(a!==t)}function Ko(t,e){return t.x-e.x}function Zo(t,e){if(e=function(t,e){var n,r=e,i=t.x,o=t.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a){if(a=s,s===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!n)return null;if(i===a)return n.prev;var u,l=n,c=n.x,h=n.y,d=1/0;for(r=n.next;r!==l;)i>=r.x&&r.x>=c&&i!==r.x&&$o(o<h?i:a,o,c,h,o<h?a:i,o,r.x,r.y)&&((u=Math.abs(o-r.y)/(i-r.x))<d||u===d&&r.x>n.x)&&ia(r,t)&&(n=r,d=u),r=r.next;return n}(t,e)){var n=oa(e,t);zo(n,n.next)}}function Qo(t,e,n,r,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*i)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*i)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function Jo(t){var e=t,n=t;do{e.x<n.x&&(n=e),e=e.next}while(e!==t);return n}function $o(t,e,n,r,i,o,a,s){return(i-a)*(e-s)-(t-a)*(o-s)>=0&&(t-a)*(r-s)-(n-a)*(e-s)>=0&&(n-a)*(o-s)-(i-a)*(r-s)>=0}function ta(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&ra(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&ia(t,e)&&ia(e,t)&&function(t,e){var n=t,r=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)}function ea(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function na(t,e){return t.x===e.x&&t.y===e.y}function ra(t,e,n,r){return!!(na(t,e)&&na(n,r)||na(t,r)&&na(n,e))||ea(t,e,n)>0!=ea(t,e,r)>0&&ea(n,r,t)>0!=ea(n,r,e)>0}function ia(t,e){return ea(t.prev,t,t.next)<0?ea(t,e,t.next)>=0&&ea(t,t.prev,e)>=0:ea(t,e,t.prev)<0||ea(t,t.next,e)<0}function oa(t,e){var n=new ua(t.i,t.x,t.y),r=new ua(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function aa(t,e,n,r){var i=new ua(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function sa(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function ua(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}eo.prototype.isFogExp2=!0,eo.prototype.clone=function(){return new eo(this.color,this.density)},eo.prototype.toJSON=function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}},no.prototype.isFog=!0,no.prototype.clone=function(){return new no(this.color,this.near,this.far)},no.prototype.toJSON=function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}},ro.prototype=Object.assign(Object.create(Gn.prototype),{constructor:ro,copy:function(t,e){return Gn.prototype.copy.call(this,t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.fog&&(this.fog=t.fog.clone()),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this},toJSON:function(t){var e=Gn.prototype.toJSON.call(this,t);return null!==this.background&&(e.object.background=this.background.toJSON(t)),null!==this.fog&&(e.object.fog=this.fog.toJSON()),e}}),Object.defineProperty(io.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(io.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setArray:function(t){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");return this.count=void 0!==t?t.length/this.stride:0,this.array=t,this},setDynamic:function(t){return this.dynamic=t,this},copy:function(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.dynamic=t.dynamic,this},copyAt:function(t,e,n){t*=this.stride,n*=e.stride;for(var r=0,i=this.stride;r<i;r++)this.array[t+r]=e.array[n+r];return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(t){return this.onUploadCallback=t,this}}),Object.defineProperties(oo.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}}),Object.assign(oo.prototype,{isInterleavedBufferAttribute:!0,setX:function(t,e){return this.data.array[t*this.data.stride+this.offset]=e,this},setY:function(t,e){return this.data.array[t*this.data.stride+this.offset+1]=e,this},setZ:function(t,e){return this.data.array[t*this.data.stride+this.offset+2]=e,this},setW:function(t,e){return this.data.array[t*this.data.stride+this.offset+3]=e,this},getX:function(t){return this.data.array[t*this.data.stride+this.offset]},getY:function(t){return this.data.array[t*this.data.stride+this.offset+1]},getZ:function(t){return this.data.array[t*this.data.stride+this.offset+2]},getW:function(t){return this.data.array[t*this.data.stride+this.offset+3]},setXY:function(t,e,n){return this.data.array[(t=t*this.data.stride+this.offset)+0]=e,this.data.array[t+1]=n,this},setXYZ:function(t,e,n,r){return this.data.array[(t=t*this.data.stride+this.offset)+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=r,this},setXYZW:function(t,e,n,r,i){return this.data.array[(t=t*this.data.stride+this.offset)+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=r,this.data.array[t+3]=i,this}}),(ao.prototype=Object.create(Er.prototype)).constructor=ao,ao.prototype.isSpriteMaterial=!0,ao.prototype.copy=function(t){return Er.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this},so.prototype=Object.assign(Object.create(Gn.prototype),{constructor:so,isSprite:!0,raycast:function(){var t=new en,e=new en,n=new en,r=new Je,i=new Je,o=new $e,a=new en,s=new en,u=new en,l=new Je,c=new Je,h=new Je;function d(t,e,n,a,s,u){r.subVectors(t,n).addScalar(.5).multiply(a),void 0!==s?(i.x=u*r.x-s*r.y,i.y=s*r.x+u*r.y):i.copy(r),t.copy(e),t.x+=i.x,t.y+=i.y,t.applyMatrix4(o)}return function(r,i){e.setFromMatrixScale(this.matrixWorld),o.getInverse(this.modelViewMatrix).premultiply(this.matrixWorld),n.setFromMatrixPosition(this.modelViewMatrix);var p,f,m=this.material.rotation;0!==m&&(f=Math.cos(m),p=Math.sin(m));var v=this.center;d(a.set(-.5,-.5,0),n,v,e,p,f),d(s.set(.5,-.5,0),n,v,e,p,f),d(u.set(.5,.5,0),n,v,e,p,f),l.set(0,0),c.set(1,0),h.set(1,1);var g=r.ray.intersectTriangle(a,s,u,!1,t);if(null!==g||(d(s.set(-.5,.5,0),n,v,e,p,f),c.set(0,1),null!==(g=r.ray.intersectTriangle(a,u,s,!1,t)))){var y=r.ray.origin.distanceTo(t);y<r.near||y>r.far||i.push({distance:y,point:t.clone(),uv:Mr.getUV(t,a,s,u,l,c,h,new Je),face:null,object:this})}}}(),clone:function(){return new this.constructor(this.material).copy(this)},copy:function(t){return Gn.prototype.copy.call(this,t),void 0!==t.center&&this.center.copy(t.center),this}}),uo.prototype=Object.assign(Object.create(Gn.prototype),{constructor:uo,copy:function(t){Gn.prototype.copy.call(this,t,!1);for(var e=t.levels,n=0,r=e.length;n<r;n++){var i=e[n];this.addLevel(i.object.clone(),i.distance)}return this},addLevel:function(t,e){void 0===e&&(e=0),e=Math.abs(e);for(var n=this.levels,r=0;r<n.length&&!(e<n[r].distance);r++);n.splice(r,0,{distance:e,object:t}),this.add(t)},getObjectForDistance:function(t){for(var e=this.levels,n=1,r=e.length;n<r&&!(t<e[n].distance);n++);return e[n-1].object},raycast:(Wi=new en,function(t,e){Wi.setFromMatrixPosition(this.matrixWorld);var n=t.ray.origin.distanceTo(Wi);this.getObjectForDistance(n).raycast(t,e)}),update:function(){var t=new en,e=new en;return function(n){var r=this.levels;if(r.length>1){t.setFromMatrixPosition(n.matrixWorld),e.setFromMatrixPosition(this.matrixWorld);var i=t.distanceTo(e);r[0].object.visible=!0;for(var o=1,a=r.length;o<a&&i>=r[o].distance;o++)r[o-1].object.visible=!1,r[o].object.visible=!0;for(;o<a;o++)r[o].object.visible=!1}}}(),toJSON:function(t){var e=Gn.prototype.toJSON.call(this,t);e.object.levels=[];for(var n=this.levels,r=0,i=n.length;r<i;r++){var o=n[r];e.object.levels.push({object:o.object.uuid,distance:o.distance})}return e}}),lo.prototype=Object.assign(Object.create(Ar.prototype),{constructor:lo,isSkinnedMesh:!0,bind:function(t,e){this.skeleton=t,void 0===e&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.getInverse(e)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){for(var t=new dn,e=this.geometry.attributes.skinWeight,n=0,r=e.count;n<r;n++){t.x=e.getX(n),t.y=e.getY(n),t.z=e.getZ(n),t.w=e.getW(n);var i=1/t.manhattanLength();i!==1/0?t.multiplyScalar(i):t.set(1,0,0,0),e.setXYZW(n,t.x,t.y,t.z,t.w)}},updateMatrixWorld:function(t){Ar.prototype.updateMatrixWorld.call(this,t),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Object.assign(co.prototype,{calculateInverses:function(){this.boneInverses=[];for(var t=0,e=this.bones.length;t<e;t++){var n=new $e;this.bones[t]&&n.getInverse(this.bones[t].matrixWorld),this.boneInverses.push(n)}},pose:function(){var t,e,n;for(e=0,n=this.bones.length;e<n;e++)(t=this.bones[e])&&t.matrixWorld.getInverse(this.boneInverses[e]);for(e=0,n=this.bones.length;e<n;e++)(t=this.bones[e])&&(t.parent&&t.parent.isBone?(t.matrix.getInverse(t.parent.matrixWorld),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))},update:(qi=new $e,Xi=new $e,function(){for(var t=this.bones,e=this.boneInverses,n=this.boneMatrices,r=this.boneTexture,i=0,o=t.length;i<o;i++)qi.multiplyMatrices(t[i]?t[i].matrixWorld:Xi,e[i]),qi.toArray(n,16*i);void 0!==r&&(r.needsUpdate=!0)}),clone:function(){return new co(this.bones,this.boneInverses)},getBoneByName:function(t){for(var e=0,n=this.bones.length;e<n;e++){var r=this.bones[e];if(r.name===t)return r}}}),ho.prototype=Object.assign(Object.create(Gn.prototype),{constructor:ho,isBone:!0}),(po.prototype=Object.create(Er.prototype)).constructor=po,po.prototype.isLineBasicMaterial=!0,po.prototype.copy=function(t){return Er.prototype.copy.call(this,t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this},fo.prototype=Object.assign(Object.create(Gn.prototype),{constructor:fo,isLine:!0,computeLineDistances:(Yi=new en,Ki=new en,function(){var t=this.geometry;if(t.isBufferGeometry)if(null===t.index){for(var e=t.attributes.position,n=[0],r=1,i=e.count;r<i;r++)Yi.fromBufferAttribute(e,r-1),Ki.fromBufferAttribute(e,r),n[r]=n[r-1],n[r]+=Yi.distanceTo(Ki);t.addAttribute("lineDistance",new tr(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(t.isGeometry){var o=t.vertices;for((n=t.lineDistances)[0]=0,r=1,i=o.length;r<i;r++)n[r]=n[r-1],n[r]+=o[r-1].distanceTo(o[r])}return this}),raycast:function(){var t=new $e,e=new Tr,n=new gn;return function(r,i){var o=r.linePrecision,a=this.geometry,s=this.matrixWorld;if(null===a.boundingSphere&&a.computeBoundingSphere(),n.copy(a.boundingSphere),n.applyMatrix4(s),n.radius+=o,!1!==r.ray.intersectsSphere(n)){t.getInverse(s),e.copy(r.ray).applyMatrix4(t);var u=o/((this.scale.x+this.scale.y+this.scale.z)/3),l=u*u,c=new en,h=new en,d=new en,p=new en,f=this&&this.isLineSegments?2:1;if(a.isBufferGeometry){var m=a.index,v=a.attributes.position.array;if(null!==m)for(var g=m.array,y=0,_=g.length-1;y<_;y+=f){var b=g[y+1];c.fromArray(v,3*g[y]),h.fromArray(v,3*b),e.distanceSqToSegment(c,h,p,d)>l||(p.applyMatrix4(this.matrixWorld),(E=r.ray.origin.distanceTo(p))<r.near||E>r.far||i.push({distance:E,point:d.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this}))}else for(y=0,_=v.length/3-1;y<_;y+=f)c.fromArray(v,3*y),h.fromArray(v,3*y+3),e.distanceSqToSegment(c,h,p,d)>l||(p.applyMatrix4(this.matrixWorld),(E=r.ray.origin.distanceTo(p))<r.near||E>r.far||i.push({distance:E,point:d.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this}))}else if(a.isGeometry){var w=a.vertices,x=w.length;for(y=0;y<x-1;y+=f){var E;e.distanceSqToSegment(w[y],w[y+1],p,d)>l||(p.applyMatrix4(this.matrixWorld),(E=r.ray.origin.distanceTo(p))<r.near||E>r.far||i.push({distance:E,point:d.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this}))}}}}}(),copy:function(t){return Gn.prototype.copy.call(this,t),this.geometry.copy(t.geometry),this.material.copy(t.material),this},clone:function(){return(new this.constructor).copy(this)}}),mo.prototype=Object.assign(Object.create(fo.prototype),{constructor:mo,isLineSegments:!0,computeLineDistances:function(){var t=new en,e=new en;return function(){var n=this.geometry;if(n.isBufferGeometry)if(null===n.index){for(var r=n.attributes.position,i=[],o=0,a=r.count;o<a;o+=2)t.fromBufferAttribute(r,o),e.fromBufferAttribute(r,o+1),i[o]=0===o?0:i[o-1],i[o+1]=i[o]+t.distanceTo(e);n.addAttribute("lineDistance",new tr(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(n.isGeometry){var s=n.vertices;for(i=n.lineDistances,o=0,a=s.length;o<a;o+=2)t.copy(s[o]),e.copy(s[o+1]),i[o]=0===o?0:i[o-1],i[o+1]=i[o]+t.distanceTo(e)}return this}}()}),vo.prototype=Object.assign(Object.create(fo.prototype),{constructor:vo,isLineLoop:!0}),(go.prototype=Object.create(Er.prototype)).constructor=go,go.prototype.isPointsMaterial=!0,go.prototype.copy=function(t){return Er.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.morphTargets=t.morphTargets,this},yo.prototype=Object.assign(Object.create(Gn.prototype),{constructor:yo,isPoints:!0,raycast:function(){var t=new $e,e=new Tr,n=new gn;return function(r,i){var o=this,a=this.geometry,s=this.matrixWorld,u=r.params.Points.threshold;if(null===a.boundingSphere&&a.computeBoundingSphere(),n.copy(a.boundingSphere),n.applyMatrix4(s),n.radius+=u,!1!==r.ray.intersectsSphere(n)){t.getInverse(s),e.copy(r.ray).applyMatrix4(t);var l=u/((this.scale.x+this.scale.y+this.scale.z)/3),c=l*l,h=new en,d=new en;if(a.isBufferGeometry){var p=a.index,f=a.attributes.position.array;if(null!==p)for(var m=p.array,v=0,g=m.length;v<g;v++){var y=m[v];h.fromArray(f,3*y),w(h,y)}else{v=0;for(var _=f.length/3;v<_;v++)h.fromArray(f,3*v),w(h,v)}}else{var b=a.vertices;for(v=0,_=b.length;v<_;v++)w(b[v],v)}}function w(t,n){var a=e.distanceSqToPoint(t);if(a<c){e.closestPointToPoint(t,d),d.applyMatrix4(s);var u=r.ray.origin.distanceTo(d);if(u<r.near||u>r.far)return;i.push({distance:u,distanceToRay:Math.sqrt(a),point:d.clone(),index:n,face:null,object:o})}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),_o.prototype=Object.assign(Object.create(hn.prototype),{constructor:_o,isVideoTexture:!0,update:function(){var t=this.image;t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),(bo.prototype=Object.create(hn.prototype)).constructor=bo,bo.prototype.isCompressedTexture=!0,(wo.prototype=Object.create(hn.prototype)).constructor=wo,wo.prototype.isCanvasTexture=!0,(xo.prototype=Object.create(hn.prototype)).constructor=xo,xo.prototype.isDepthTexture=!0,(Eo.prototype=Object.create(or.prototype)).constructor=Eo,(So.prototype=Object.create(Wn.prototype)).constructor=So,(To.prototype=Object.create(or.prototype)).constructor=To,(Mo.prototype=Object.create(Wn.prototype)).constructor=Mo,(Co.prototype=Object.create(or.prototype)).constructor=Co,(Ao.prototype=Object.create(Wn.prototype)).constructor=Ao,(Po.prototype=Object.create(Co.prototype)).constructor=Po,(Oo.prototype=Object.create(Wn.prototype)).constructor=Oo,(Ro.prototype=Object.create(Co.prototype)).constructor=Ro,(Lo.prototype=Object.create(Wn.prototype)).constructor=Lo,(Io.prototype=Object.create(Co.prototype)).constructor=Io,(No.prototype=Object.create(Wn.prototype)).constructor=No,(Do.prototype=Object.create(Co.prototype)).constructor=Do,(ko.prototype=Object.create(Wn.prototype)).constructor=ko,(Fo.prototype=Object.create(or.prototype)).constructor=Fo,(jo.prototype=Object.create(Wn.prototype)).constructor=jo,(Uo.prototype=Object.create(or.prototype)).constructor=Uo,(Bo.prototype=Object.create(Wn.prototype)).constructor=Bo,(Go.prototype=Object.create(or.prototype)).constructor=Go;var la={area:function(t){for(var e=t.length,n=0,r=e-1,i=0;i<e;r=i++)n+=t[r].x*t[i].y-t[i].x*t[r].y;return.5*n},isClockWise:function(t){return la.area(t)<0},triangulateShape:function(t,e){var n=[],r=[],i=[];ca(t),ha(n,t);var o=t.length;e.forEach(ca);for(var a=0;a<e.length;a++)r.push(o),o+=e[a].length,ha(n,e[a]);var s=function(t,e,n){n=n||2;var r,i,o,a,s,u,l,c=e&&e.length,h=c?e[0]*n:t.length,d=Vo(t,0,h,n,!0),p=[];if(!d)return p;if(c&&(d=function(t,e,n,r){var i,o,a,s=[];for(i=0,o=e.length;i<o;i++)(a=Vo(t,e[i]*r,i<o-1?e[i+1]*r:t.length,r,!1))===a.next&&(a.steiner=!0),s.push(Jo(a));for(s.sort(Ko),i=0;i<s.length;i++)Zo(s[i],n),n=zo(n,n.next);return n}(t,e,d,n)),t.length>80*n){r=o=t[0],i=a=t[1];for(var f=n;f<h;f+=n)u=t[f+1],(s=t[f])<r&&(r=s),u<i&&(i=u),s>o&&(o=s),u>a&&(a=u);l=0!==(l=Math.max(o-r,a-i))?1/l:0}return Ho(d,p,n,r,i,l),p}(n,r);for(a=0;a<s.length;a+=3)i.push(s.slice(a,a+3));return i}};function ca(t){var e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function ha(t,e){for(var n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}function da(t,e){Wn.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:e},this.fromBufferGeometry(new pa(t,e)),this.mergeVertices()}function pa(t,e){or.call(this),this.type="ExtrudeBufferGeometry",this.parameters={shapes:t,options:e};for(var n=this,r=[],i=[],o=0,a=(t=Array.isArray(t)?t:[t]).length;o<a;o++)s(t[o]);function s(t){var o=[],a=void 0!==e.curveSegments?e.curveSegments:12,s=void 0!==e.steps?e.steps:1,u=void 0!==e.depth?e.depth:100,l=void 0===e.bevelEnabled||e.bevelEnabled,c=void 0!==e.bevelThickness?e.bevelThickness:6,h=void 0!==e.bevelSize?e.bevelSize:c-2,d=void 0!==e.bevelSegments?e.bevelSegments:3,p=e.extrudePath,f=void 0!==e.UVGenerator?e.UVGenerator:fa;void 0!==e.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),u=e.amount);var m,v,g,y,_,b,w,x,E=!1;p&&(m=p.getSpacedPoints(s),E=!0,l=!1,v=p.computeFrenetFrames(s,!1),g=new en,y=new en,_=new en),l||(d=0,c=0,h=0);var S=t.extractPoints(a),T=S.shape,M=S.holes;if(!la.isClockWise(T))for(T=T.reverse(),w=0,x=M.length;w<x;w++)la.isClockWise(b=M[w])&&(M[w]=b.reverse());var C=la.triangulateShape(T,M),A=T;for(w=0,x=M.length;w<x;w++)T=T.concat(b=M[w]);function P(t,e,n){return e||console.error("THREE.ExtrudeGeometry: vec does not exist"),e.clone().multiplyScalar(n).add(t)}var O,R,L,I,N,D,k=T.length,F=C.length;function j(t,e,n){var r,i,o,a=t.x-e.x,s=t.y-e.y,u=n.x-t.x,l=n.y-t.y,c=a*a+s*s;if(Math.abs(a*l-s*u)>Number.EPSILON){var h=Math.sqrt(c),d=Math.sqrt(u*u+l*l),p=e.x-s/h,f=e.y+a/h,m=((n.x-l/d-p)*l-(n.y+u/d-f)*u)/(a*l-s*u),v=(r=p+a*m-t.x)*r+(i=f+s*m-t.y)*i;if(v<=2)return new Je(r,i);o=Math.sqrt(v/2)}else{var g=!1;a>Number.EPSILON?u>Number.EPSILON&&(g=!0):a<-Number.EPSILON?u<-Number.EPSILON&&(g=!0):Math.sign(s)===Math.sign(l)&&(g=!0),g?(r=-s,i=a,o=Math.sqrt(c)):(r=a,i=s,o=Math.sqrt(c/2))}return new Je(r/o,i/o)}for(var U=[],B=0,G=A.length,V=G-1,z=B+1;B<G;B++,V++,z++)V===G&&(V=0),z===G&&(z=0),U[B]=j(A[B],A[V],A[z]);var H,W,q=[],X=U.concat();for(w=0,x=M.length;w<x;w++){for(H=[],V=(G=(b=M[w]).length)-1,z=1+(B=0);B<G;B++,V++,z++)V===G&&(V=0),z===G&&(z=0),H[B]=j(b[B],b[V],b[z]);q.push(H),X=X.concat(H)}for(O=0;O<d;O++){for(L=O/d,I=c*Math.cos(L*Math.PI/2),R=h*Math.sin(L*Math.PI/2),B=0,G=A.length;B<G;B++)K((N=P(A[B],U[B],R)).x,N.y,-I);for(w=0,x=M.length;w<x;w++)for(H=q[w],B=0,G=(b=M[w]).length;B<G;B++)K((N=P(b[B],H[B],R)).x,N.y,-I)}for(R=h,B=0;B<k;B++)N=l?P(T[B],X[B],R):T[B],E?(y.copy(v.normals[0]).multiplyScalar(N.x),g.copy(v.binormals[0]).multiplyScalar(N.y),_.copy(m[0]).add(y).add(g),K(_.x,_.y,_.z)):K(N.x,N.y,0);for(W=1;W<=s;W++)for(B=0;B<k;B++)N=l?P(T[B],X[B],R):T[B],E?(y.copy(v.normals[W]).multiplyScalar(N.x),g.copy(v.binormals[W]).multiplyScalar(N.y),_.copy(m[W]).add(y).add(g),K(_.x,_.y,_.z)):K(N.x,N.y,u/s*W);for(O=d-1;O>=0;O--){for(L=O/d,I=c*Math.cos(L*Math.PI/2),R=h*Math.sin(L*Math.PI/2),B=0,G=A.length;B<G;B++)K((N=P(A[B],U[B],R)).x,N.y,u+I);for(w=0,x=M.length;w<x;w++)for(H=q[w],B=0,G=(b=M[w]).length;B<G;B++)N=P(b[B],H[B],R),E?K(N.x,N.y+m[s-1].y,m[s-1].x+I):K(N.x,N.y,u+I)}function Y(t,e){var n,r;for(B=t.length;--B>=0;){n=B,(r=B-1)<0&&(r=t.length-1);var i=0,o=s+2*d;for(i=0;i<o;i++){var a=k*i,u=k*(i+1);Q(e+n+a,e+r+a,e+r+u,e+n+u)}}}function K(t,e,n){o.push(t),o.push(e),o.push(n)}function Z(t,e,i){J(t),J(e),J(i);var o=r.length/3,a=f.generateTopUV(n,r,o-3,o-2,o-1);$(a[0]),$(a[1]),$(a[2])}function Q(t,e,i,o){J(t),J(e),J(o),J(e),J(i),J(o);var a=r.length/3,s=f.generateSideWallUV(n,r,a-6,a-3,a-2,a-1);$(s[0]),$(s[1]),$(s[3]),$(s[1]),$(s[2]),$(s[3])}function J(t){r.push(o[3*t+0]),r.push(o[3*t+1]),r.push(o[3*t+2])}function $(t){i.push(t.x),i.push(t.y)}!function(){var t=r.length/3;if(l){var e=0,i=k*e;for(B=0;B<F;B++)Z((D=C[B])[2]+i,D[1]+i,D[0]+i);for(i=k*(e=s+2*d),B=0;B<F;B++)Z((D=C[B])[0]+i,D[1]+i,D[2]+i)}else{for(B=0;B<F;B++)Z((D=C[B])[2],D[1],D[0]);for(B=0;B<F;B++)Z((D=C[B])[0]+k*s,D[1]+k*s,D[2]+k*s)}n.addGroup(t,r.length/3-t,0)}(),function(){var t=r.length/3,e=0;for(Y(A,e),e+=A.length,w=0,x=M.length;w<x;w++)Y(b=M[w],e),e+=b.length;n.addGroup(t,r.length/3-t,1)}()}this.addAttribute("position",new tr(r,3)),this.addAttribute("uv",new tr(i,2)),this.computeVertexNormals()}(da.prototype=Object.create(Wn.prototype)).constructor=da,da.prototype.toJSON=function(){var t=Wn.prototype.toJSON.call(this);return ma(this.parameters.shapes,this.parameters.options,t)},(pa.prototype=Object.create(or.prototype)).constructor=pa,pa.prototype.toJSON=function(){var t=or.prototype.toJSON.call(this);return ma(this.parameters.shapes,this.parameters.options,t)};var fa={generateTopUV:function(t,e,n,r,i){var o=e[3*r],a=e[3*r+1],s=e[3*i],u=e[3*i+1];return[new Je(e[3*n],e[3*n+1]),new Je(o,a),new Je(s,u)]},generateSideWallUV:function(t,e,n,r,i,o){var a=e[3*n],s=e[3*n+1],u=e[3*n+2],l=e[3*r],c=e[3*r+1],h=e[3*r+2],d=e[3*i],p=e[3*i+1],f=e[3*i+2],m=e[3*o],v=e[3*o+1],g=e[3*o+2];return Math.abs(s-c)<.01?[new Je(a,1-u),new Je(l,1-h),new Je(d,1-f),new Je(m,1-g)]:[new Je(s,1-u),new Je(c,1-h),new Je(p,1-f),new Je(v,1-g)]}};function ma(t,e,n){if(n.shapes=[],Array.isArray(t))for(var r=0,i=t.length;r<i;r++)n.shapes.push(t[r].uuid);else n.shapes.push(t.uuid);return void 0!==e.extrudePath&&(n.options.extrudePath=e.extrudePath.toJSON()),n}function va(t,e){Wn.call(this),this.type="TextGeometry",this.parameters={text:t,parameters:e},this.fromBufferGeometry(new ga(t,e)),this.mergeVertices()}function ga(t,e){var n=(e=e||{}).font;if(!n||!n.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new Wn;var r=n.generateShapes(t,e.size);e.depth=void 0!==e.height?e.height:50,void 0===e.bevelThickness&&(e.bevelThickness=10),void 0===e.bevelSize&&(e.bevelSize=8),void 0===e.bevelEnabled&&(e.bevelEnabled=!1),pa.call(this,r,e),this.type="TextBufferGeometry"}function ya(t,e,n,r,i,o,a){Wn.call(this),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:r,phiLength:i,thetaStart:o,thetaLength:a},this.fromBufferGeometry(new _a(t,e,n,r,i,o,a)),this.mergeVertices()}function _a(t,e,n,r,i,o,a){or.call(this),this.type="SphereBufferGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:r,phiLength:i,thetaStart:o,thetaLength:a},t=t||1,e=Math.max(3,Math.floor(e)||8),n=Math.max(2,Math.floor(n)||6),r=void 0!==r?r:0,i=void 0!==i?i:2*Math.PI;var s,u,l=(o=void 0!==o?o:0)+(a=void 0!==a?a:Math.PI),c=0,h=[],d=new en,p=new en,f=[],m=[],v=[],g=[];for(u=0;u<=n;u++){var y=[],_=u/n;for(s=0;s<=e;s++){var b=s/e;d.x=-t*Math.cos(r+b*i)*Math.sin(o+_*a),d.y=t*Math.cos(o+_*a),d.z=t*Math.sin(r+b*i)*Math.sin(o+_*a),m.push(d.x,d.y,d.z),p.set(d.x,d.y,d.z).normalize(),v.push(p.x,p.y,p.z),g.push(b,1-_),y.push(c++)}h.push(y)}for(u=0;u<n;u++)for(s=0;s<e;s++){var w=h[u][s],x=h[u+1][s],E=h[u+1][s+1];(0!==u||o>0)&&f.push(h[u][s+1],w,E),(u!==n-1||l<Math.PI)&&f.push(w,x,E)}this.setIndex(f),this.addAttribute("position",new tr(m,3)),this.addAttribute("normal",new tr(v,3)),this.addAttribute("uv",new tr(g,2))}function ba(t,e,n,r,i,o){Wn.call(this),this.type="RingGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:o},this.fromBufferGeometry(new wa(t,e,n,r,i,o)),this.mergeVertices()}function wa(t,e,n,r,i,o){or.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:o},t=t||.5,e=e||1,i=void 0!==i?i:0,o=void 0!==o?o:2*Math.PI,n=void 0!==n?Math.max(3,n):8;var a,s,u,l=[],c=[],h=[],d=[],p=t,f=(e-t)/(r=void 0!==r?Math.max(1,r):1),m=new en,v=new Je;for(s=0;s<=r;s++){for(u=0;u<=n;u++)a=i+u/n*o,m.x=p*Math.cos(a),m.y=p*Math.sin(a),c.push(m.x,m.y,m.z),h.push(0,0,1),v.x=(m.x/e+1)/2,v.y=(m.y/e+1)/2,d.push(v.x,v.y);p+=f}for(s=0;s<r;s++){var g=s*(n+1);for(u=0;u<n;u++){var y=(a=u+g)+n+1,_=a+n+2,b=a+1;l.push(a,y,b),l.push(y,_,b)}}this.setIndex(l),this.addAttribute("position",new tr(c,3)),this.addAttribute("normal",new tr(h,3)),this.addAttribute("uv",new tr(d,2))}function xa(t,e,n,r){Wn.call(this),this.type="LatheGeometry",this.parameters={points:t,segments:e,phiStart:n,phiLength:r},this.fromBufferGeometry(new Ea(t,e,n,r)),this.mergeVertices()}function Ea(t,e,n,r){or.call(this),this.type="LatheBufferGeometry",this.parameters={points:t,segments:e,phiStart:n,phiLength:r},e=Math.floor(e)||12,n=n||0,r=r||2*Math.PI,r=Qe.clamp(r,0,2*Math.PI);var i,o,a,s=[],u=[],l=[],c=1/e,h=new en,d=new Je;for(o=0;o<=e;o++){var p=n+o*c*r,f=Math.sin(p),m=Math.cos(p);for(a=0;a<=t.length-1;a++)h.x=t[a].x*f,h.y=t[a].y,h.z=t[a].x*m,u.push(h.x,h.y,h.z),d.x=o/e,d.y=a/(t.length-1),l.push(d.x,d.y)}for(o=0;o<e;o++)for(a=0;a<t.length-1;a++){var v=(i=a+o*t.length)+t.length,g=i+t.length+1,y=i+1;s.push(i,v,y),s.push(v,g,y)}if(this.setIndex(s),this.addAttribute("position",new tr(u,3)),this.addAttribute("uv",new tr(l,2)),this.computeVertexNormals(),r===2*Math.PI){var _=this.attributes.normal.array,b=new en,w=new en,x=new en;for(i=e*t.length*3,o=0,a=0;o<t.length;o++,a+=3)b.x=_[a+0],b.y=_[a+1],b.z=_[a+2],w.x=_[i+a+0],w.y=_[i+a+1],w.z=_[i+a+2],x.addVectors(b,w).normalize(),_[a+0]=_[i+a+0]=x.x,_[a+1]=_[i+a+1]=x.y,_[a+2]=_[i+a+2]=x.z}}function Sa(t,e){Wn.call(this),this.type="ShapeGeometry","object"==typeof e&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),e=e.curveSegments),this.parameters={shapes:t,curveSegments:e},this.fromBufferGeometry(new Ta(t,e)),this.mergeVertices()}function Ta(t,e){or.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:t,curveSegments:e},e=e||12;var n=[],r=[],i=[],o=[],a=0,s=0;if(!1===Array.isArray(t))l(t);else for(var u=0;u<t.length;u++)l(t[u]),this.addGroup(a,s,u),a+=s,s=0;function l(t){var a,u,l,c=r.length/3,h=t.extractPoints(e),d=h.shape,p=h.holes;if(!1===la.isClockWise(d))for(d=d.reverse(),a=0,u=p.length;a<u;a++)!0===la.isClockWise(l=p[a])&&(p[a]=l.reverse());var f=la.triangulateShape(d,p);for(a=0,u=p.length;a<u;a++)d=d.concat(l=p[a]);for(a=0,u=d.length;a<u;a++){var m=d[a];r.push(m.x,m.y,0),i.push(0,0,1),o.push(m.x,m.y)}for(a=0,u=f.length;a<u;a++){var v=f[a];n.push(v[0]+c,v[1]+c,v[2]+c),s+=3}}this.setIndex(n),this.addAttribute("position",new tr(r,3)),this.addAttribute("normal",new tr(i,3)),this.addAttribute("uv",new tr(o,2))}function Ma(t,e){if(e.shapes=[],Array.isArray(t))for(var n=0,r=t.length;n<r;n++)e.shapes.push(t[n].uuid);else e.shapes.push(t.uuid);return e}function Ca(t,e){or.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:e},e=void 0!==e?e:1;var n,r,i,o,a=[],s=Math.cos(Qe.DEG2RAD*e),u=[0,0],l={},c=["a","b","c"];t.isBufferGeometry?(o=new Wn).fromBufferGeometry(t):o=t.clone(),o.mergeVertices(),o.computeFaceNormals();for(var h=o.vertices,d=o.faces,p=0,f=d.length;p<f;p++)for(var m=d[p],v=0;v<3;v++)n=m[c[v]],r=m[c[(v+1)%3]],u[0]=Math.min(n,r),u[1]=Math.max(n,r),void 0===l[i=u[0]+","+u[1]]?l[i]={index1:u[0],index2:u[1],face1:p,face2:void 0}:l[i].face2=p;for(i in l){var g=l[i];if(void 0===g.face2||d[g.face1].normal.dot(d[g.face2].normal)<=s){var y=h[g.index1];a.push(y.x,y.y,y.z),a.push((y=h[g.index2]).x,y.y,y.z)}}this.addAttribute("position",new tr(a,3))}function Aa(t,e,n,r,i,o,a,s){Wn.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:r,heightSegments:i,openEnded:o,thetaStart:a,thetaLength:s},this.fromBufferGeometry(new Pa(t,e,n,r,i,o,a,s)),this.mergeVertices()}function Pa(t,e,n,r,i,o,a,s){or.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:r,heightSegments:i,openEnded:o,thetaStart:a,thetaLength:s};var u=this;t=void 0!==t?t:1,e=void 0!==e?e:1,n=n||1,r=Math.floor(r)||8,i=Math.floor(i)||1,o=void 0!==o&&o,a=void 0!==a?a:0,s=void 0!==s?s:2*Math.PI;var l=[],c=[],h=[],d=[],p=0,f=[],m=n/2,v=0;function g(n){var i,o,f,g=new Je,y=new en,_=0,b=!0===n?t:e,w=!0===n?1:-1;for(o=p,i=1;i<=r;i++)c.push(0,m*w,0),h.push(0,w,0),d.push(.5,.5),p++;for(f=p,i=0;i<=r;i++){var x=i/r*s+a,E=Math.cos(x),S=Math.sin(x);y.x=b*S,y.y=m*w,y.z=b*E,c.push(y.x,y.y,y.z),h.push(0,w,0),g.x=.5*E+.5,g.y=.5*S*w+.5,d.push(g.x,g.y),p++}for(i=0;i<r;i++){var T=o+i,M=f+i;!0===n?l.push(M,M+1,T):l.push(M+1,M,T),_+=3}u.addGroup(v,_,!0===n?1:2),v+=_}!function(){var o,g,y=new en,_=new en,b=0,w=(e-t)/n;for(g=0;g<=i;g++){var x=[],E=g/i,S=E*(e-t)+t;for(o=0;o<=r;o++){var T=o/r,M=T*s+a,C=Math.sin(M),A=Math.cos(M);_.x=S*C,_.y=-E*n+m,_.z=S*A,c.push(_.x,_.y,_.z),y.set(C,w,A).normalize(),h.push(y.x,y.y,y.z),d.push(T,1-E),x.push(p++)}f.push(x)}for(o=0;o<r;o++)for(g=0;g<i;g++){var P=f[g+1][o],O=f[g+1][o+1],R=f[g][o+1];l.push(f[g][o],P,R),l.push(P,O,R),b+=6}u.addGroup(v,b,0),v+=b}(),!1===o&&(t>0&&g(!0),e>0&&g(!1)),this.setIndex(l),this.addAttribute("position",new tr(c,3)),this.addAttribute("normal",new tr(h,3)),this.addAttribute("uv",new tr(d,2))}function Oa(t,e,n,r,i,o,a){Aa.call(this,0,t,e,n,r,i,o,a),this.type="ConeGeometry",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:o,thetaLength:a}}function Ra(t,e,n,r,i,o,a){Pa.call(this,0,t,e,n,r,i,o,a),this.type="ConeBufferGeometry",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:o,thetaLength:a}}function La(t,e,n,r){Wn.call(this),this.type="CircleGeometry",this.parameters={radius:t,segments:e,thetaStart:n,thetaLength:r},this.fromBufferGeometry(new Ia(t,e,n,r)),this.mergeVertices()}function Ia(t,e,n,r){or.call(this),this.type="CircleBufferGeometry",this.parameters={radius:t,segments:e,thetaStart:n,thetaLength:r},t=t||1,e=void 0!==e?Math.max(3,e):8,n=void 0!==n?n:0,r=void 0!==r?r:2*Math.PI;var i,o,a=[],s=[],u=[],l=[],c=new en,h=new Je;for(s.push(0,0,0),u.push(0,0,1),l.push(.5,.5),o=0,i=3;o<=e;o++,i+=3){var d=n+o/e*r;c.x=t*Math.cos(d),c.y=t*Math.sin(d),s.push(c.x,c.y,c.z),u.push(0,0,1),h.x=(s[i]/t+1)/2,h.y=(s[i+1]/t+1)/2,l.push(h.x,h.y)}for(i=1;i<=e;i++)a.push(i,i+1,0);this.setIndex(a),this.addAttribute("position",new tr(s,3)),this.addAttribute("normal",new tr(u,3)),this.addAttribute("uv",new tr(l,2))}(va.prototype=Object.create(Wn.prototype)).constructor=va,(ga.prototype=Object.create(pa.prototype)).constructor=ga,(ya.prototype=Object.create(Wn.prototype)).constructor=ya,(_a.prototype=Object.create(or.prototype)).constructor=_a,(ba.prototype=Object.create(Wn.prototype)).constructor=ba,(wa.prototype=Object.create(or.prototype)).constructor=wa,(xa.prototype=Object.create(Wn.prototype)).constructor=xa,(Ea.prototype=Object.create(or.prototype)).constructor=Ea,(Sa.prototype=Object.create(Wn.prototype)).constructor=Sa,Sa.prototype.toJSON=function(){var t=Wn.prototype.toJSON.call(this);return Ma(this.parameters.shapes,t)},(Ta.prototype=Object.create(or.prototype)).constructor=Ta,Ta.prototype.toJSON=function(){var t=or.prototype.toJSON.call(this);return Ma(this.parameters.shapes,t)},(Ca.prototype=Object.create(or.prototype)).constructor=Ca,(Aa.prototype=Object.create(Wn.prototype)).constructor=Aa,(Pa.prototype=Object.create(or.prototype)).constructor=Pa,(Oa.prototype=Object.create(Aa.prototype)).constructor=Oa,(Ra.prototype=Object.create(Pa.prototype)).constructor=Ra,(La.prototype=Object.create(Wn.prototype)).constructor=La,(Ia.prototype=Object.create(or.prototype)).constructor=Ia;var Na=Object.freeze({WireframeGeometry:Eo,ParametricGeometry:So,ParametricBufferGeometry:To,TetrahedronGeometry:Ao,TetrahedronBufferGeometry:Po,OctahedronGeometry:Oo,OctahedronBufferGeometry:Ro,IcosahedronGeometry:Lo,IcosahedronBufferGeometry:Io,DodecahedronGeometry:No,DodecahedronBufferGeometry:Do,PolyhedronGeometry:Mo,PolyhedronBufferGeometry:Co,TubeGeometry:ko,TubeBufferGeometry:Fo,TorusKnotGeometry:jo,TorusKnotBufferGeometry:Uo,TorusGeometry:Bo,TorusBufferGeometry:Go,TextGeometry:va,TextBufferGeometry:ga,SphereGeometry:ya,SphereBufferGeometry:_a,RingGeometry:ba,RingBufferGeometry:wa,PlaneGeometry:ur,PlaneBufferGeometry:lr,LatheGeometry:xa,LatheBufferGeometry:Ea,ShapeGeometry:Sa,ShapeBufferGeometry:Ta,ExtrudeGeometry:da,ExtrudeBufferGeometry:pa,EdgesGeometry:Ca,ConeGeometry:Oa,ConeBufferGeometry:Ra,CylinderGeometry:Aa,CylinderBufferGeometry:Pa,CircleGeometry:La,CircleBufferGeometry:Ia,BoxGeometry:ar,BoxBufferGeometry:sr});function Da(t){Er.call(this),this.type="ShadowMaterial",this.color=new An(0),this.transparent=!0,this.setValues(t)}function ka(t){Sr.call(this,t),this.type="RawShaderMaterial"}function Fa(t){Er.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new An(16777215),this.roughness=.5,this.metalness=.5,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new An(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ke,this.normalScale=new Je(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function ja(t){Fa.call(this),this.defines={PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearCoat=0,this.clearCoatRoughness=0,this.setValues(t)}function Ua(t){Er.call(this),this.type="MeshPhongMaterial",this.color=new An(16777215),this.specular=new An(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new An(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ke,this.normalScale=new Je(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=ht,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function Ba(t){Ua.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.gradientMap=null,this.setValues(t)}function Ga(t){Er.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ke,this.normalScale=new Je(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function Va(t){Er.call(this),this.type="MeshLambertMaterial",this.color=new An(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new An(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=ht,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function za(t){Er.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new An(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ke,this.normalScale=new Je(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.lights=!1,this.setValues(t)}function Ha(t){po.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}(Da.prototype=Object.create(Er.prototype)).constructor=Da,Da.prototype.isShadowMaterial=!0,Da.prototype.copy=function(t){return Er.prototype.copy.call(this,t),this.color.copy(t.color),this},(ka.prototype=Object.create(Sr.prototype)).constructor=ka,ka.prototype.isRawShaderMaterial=!0,(Fa.prototype=Object.create(Er.prototype)).constructor=Fa,Fa.prototype.isMeshStandardMaterial=!0,Fa.prototype.copy=function(t){return Er.prototype.copy.call(this,t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},(ja.prototype=Object.create(Fa.prototype)).constructor=ja,ja.prototype.isMeshPhysicalMaterial=!0,ja.prototype.copy=function(t){return Fa.prototype.copy.call(this,t),this.defines={PHYSICAL:""},this.reflectivity=t.reflectivity,this.clearCoat=t.clearCoat,this.clearCoatRoughness=t.clearCoatRoughness,this},(Ua.prototype=Object.create(Er.prototype)).constructor=Ua,Ua.prototype.isMeshPhongMaterial=!0,Ua.prototype.copy=function(t){return Er.prototype.copy.call(this,t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},(Ba.prototype=Object.create(Ua.prototype)).constructor=Ba,Ba.prototype.isMeshToonMaterial=!0,Ba.prototype.copy=function(t){return Ua.prototype.copy.call(this,t),this.gradientMap=t.gradientMap,this},(Ga.prototype=Object.create(Er.prototype)).constructor=Ga,Ga.prototype.isMeshNormalMaterial=!0,Ga.prototype.copy=function(t){return Er.prototype.copy.call(this,t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},(Va.prototype=Object.create(Er.prototype)).constructor=Va,Va.prototype.isMeshLambertMaterial=!0,Va.prototype.copy=function(t){return Er.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},(za.prototype=Object.create(Er.prototype)).constructor=za,za.prototype.isMeshMatcapMaterial=!0,za.prototype.copy=function(t){return Er.prototype.copy.call(this,t),this.defines={MATCAP:""},this.color.copy(t.color),this.matcap=t.matcap,this.map=t.map,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},(Ha.prototype=Object.create(po.prototype)).constructor=Ha,Ha.prototype.isLineDashedMaterial=!0,Ha.prototype.copy=function(t){return po.prototype.copy.call(this,t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this};var Wa=Object.freeze({ShadowMaterial:Da,SpriteMaterial:ao,RawShaderMaterial:ka,ShaderMaterial:Sr,PointsMaterial:go,MeshPhysicalMaterial:ja,MeshStandardMaterial:Fa,MeshPhongMaterial:Ua,MeshToonMaterial:Ba,MeshNormalMaterial:Ga,MeshLambertMaterial:Va,MeshDepthMaterial:ki,MeshDistanceMaterial:Fi,MeshBasicMaterial:Cr,MeshMatcapMaterial:za,LineDashedMaterial:Ha,LineBasicMaterial:po,Material:Er}),qa={arraySlice:function(t,e,n){return qa.isTypedArray(t)?new t.constructor(t.subarray(e,void 0!==n?n:t.length)):t.slice(e,n)},convertArray:function(t,e,n){return!t||!n&&t.constructor===e?t:"number"==typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)},isTypedArray:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)},getKeyframeOrder:function(t){for(var e=t.length,n=new Array(e),r=0;r!==e;++r)n[r]=r;return n.sort(function(e,n){return t[e]-t[n]}),n},sortedArray:function(t,e,n){for(var r=t.length,i=new t.constructor(r),o=0,a=0;a!==r;++o)for(var s=n[o]*e,u=0;u!==e;++u)i[a++]=t[s+u];return i},flattenJSON:function(t,e,n,r){for(var i=1,o=t[0];void 0!==o&&void 0===o[r];)o=t[i++];if(void 0!==o){var a=o[r];if(void 0!==a)if(Array.isArray(a))do{void 0!==(a=o[r])&&(e.push(o.time),n.push.apply(n,a)),o=t[i++]}while(void 0!==o);else if(void 0!==a.toArray)do{void 0!==(a=o[r])&&(e.push(o.time),a.toArray(n,n.length)),o=t[i++]}while(void 0!==o);else do{void 0!==(a=o[r])&&(e.push(o.time),n.push(a)),o=t[i++]}while(void 0!==o)}}};function Xa(t,e,n,r){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new e.constructor(n),this.sampleValues=e,this.valueSize=n}function Ya(t,e,n,r){Xa.call(this,t,e,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function Ka(t,e,n,r){Xa.call(this,t,e,n,r)}function Za(t,e,n,r){Xa.call(this,t,e,n,r)}function Qa(t,e,n,r){if(void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===e||0===e.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=qa.convertArray(e,this.TimeBufferType),this.values=qa.convertArray(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}function Ja(t,e,n){Qa.call(this,t,e,n)}function $a(t,e,n,r){Qa.call(this,t,e,n,r)}function ts(t,e,n,r){Qa.call(this,t,e,n,r)}function es(t,e,n,r){Xa.call(this,t,e,n,r)}function ns(t,e,n,r){Qa.call(this,t,e,n,r)}function rs(t,e,n,r){Qa.call(this,t,e,n,r)}function is(t,e,n,r){Qa.call(this,t,e,n,r)}function os(t,e,n){this.name=t,this.tracks=n,this.duration=void 0!==e?e:-1,this.uuid=Qe.generateUUID(),this.duration<0&&this.resetDuration()}function as(t){if(void 0===t.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var e=function(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return ts;case"vector":case"vector2":case"vector3":case"vector4":return is;case"color":return $a;case"quaternion":return ns;case"bool":case"boolean":return Ja;case"string":return rs}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}(t.type);if(void 0===t.times){var n=[],r=[];qa.flattenJSON(t.keys,n,r,"value"),t.times=n,t.values=r}return void 0!==e.parse?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}Object.assign(Xa.prototype,{evaluate:function(t){var e=this.parameterPositions,n=this._cachedIndex,r=e[n],i=e[n-1];t:{e:{var o;n:{r:if(!(t<r)){for(var a=n+2;;){if(void 0===r){if(t<i)break r;return this._cachedIndex=n=e.length,this.afterEnd_(n-1,t,i)}if(n===a)break;if(i=r,t<(r=e[++n]))break e}o=e.length;break n}if(t>=i)break t;var s=e[1];for(t<s&&(n=2,i=s),a=n-2;;){if(void 0===i)return this._cachedIndex=0,this.beforeStart_(0,t,r);if(n===a)break;if(r=i,t>=(i=e[--n-1]))break e}o=n,n=0}for(;n<o;){var u=n+o>>>1;t<e[u]?o=u:n=u+1}if(r=e[n],void 0===(i=e[n-1]))return this._cachedIndex=0,this.beforeStart_(0,t,r);if(void 0===r)return this._cachedIndex=n=e.length,this.afterEnd_(n-1,i,t)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,t,r)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(t){for(var e=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=t*r,o=0;o!==r;++o)e[o]=n[i+o];return e},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}}),Object.assign(Xa.prototype,{beforeStart_:Xa.prototype.copySampleValue_,afterEnd_:Xa.prototype.copySampleValue_}),Ya.prototype=Object.assign(Object.create(Xa.prototype),{constructor:Ya,DefaultSettings_:{endingStart:Ie,endingEnd:Ie},intervalChanged_:function(t,e,n){var r=this.parameterPositions,i=t-2,o=t+1,a=r[i],s=r[o];if(void 0===a)switch(this.getSettings_().endingStart){case Ne:i=t,a=2*e-n;break;case De:a=e+r[i=r.length-2]-r[i+1];break;default:i=t,a=n}if(void 0===s)switch(this.getSettings_().endingEnd){case Ne:o=t,s=2*n-e;break;case De:o=1,s=n+r[1]-r[0];break;default:o=t-1,s=e}var u=.5*(n-e),l=this.valueSize;this._weightPrev=u/(e-a),this._weightNext=u/(s-n),this._offsetPrev=i*l,this._offsetNext=o*l},interpolate_:function(t,e,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=t*a,u=s-a,l=this._offsetPrev,c=this._offsetNext,h=this._weightPrev,d=this._weightNext,p=(n-e)/(r-e),f=p*p,m=f*p,v=-h*m+2*h*f-h*p,g=(1+h)*m+(-1.5-2*h)*f+(-.5+h)*p+1,y=(-1-d)*m+(1.5+d)*f+.5*p,_=d*m-d*f,b=0;b!==a;++b)i[b]=v*o[l+b]+g*o[u+b]+y*o[s+b]+_*o[c+b];return i}}),Ka.prototype=Object.assign(Object.create(Xa.prototype),{constructor:Ka,interpolate_:function(t,e,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=t*a,u=s-a,l=(n-e)/(r-e),c=1-l,h=0;h!==a;++h)i[h]=o[u+h]*c+o[s+h]*l;return i}}),Za.prototype=Object.assign(Object.create(Xa.prototype),{constructor:Za,interpolate_:function(t){return this.copySampleValue_(t-1)}}),Object.assign(Qa,{toJSON:function(t){var e,n=t.constructor;if(void 0!==n.toJSON)e=n.toJSON(t);else{e={name:t.name,times:qa.convertArray(t.times,Array),values:qa.convertArray(t.values,Array)};var r=t.getInterpolation();r!==t.DefaultInterpolation&&(e.interpolation=r)}return e.type=t.ValueTypeName,e}}),Object.assign(Qa.prototype,{constructor:Qa,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:Re,InterpolantFactoryMethodDiscrete:function(t){return new Za(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodLinear:function(t){return new Ka(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:function(t){return new Ya(this.times,this.values,this.getValueSize(),t)},setInterpolation:function(t){var e;switch(t){case Oe:e=this.InterpolantFactoryMethodDiscrete;break;case Re:e=this.InterpolantFactoryMethodLinear;break;case Le:e=this.InterpolantFactoryMethodSmooth}if(void 0===e){var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=e,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Oe;case this.InterpolantFactoryMethodLinear:return Re;case this.InterpolantFactoryMethodSmooth:return Le}},getValueSize:function(){return this.values.length/this.times.length},shift:function(t){if(0!==t)for(var e=this.times,n=0,r=e.length;n!==r;++n)e[n]+=t;return this},scale:function(t){if(1!==t)for(var e=this.times,n=0,r=e.length;n!==r;++n)e[n]*=t;return this},trim:function(t,e){for(var n=this.times,r=n.length,i=0,o=r-1;i!==r&&n[i]<t;)++i;for(;-1!==o&&n[o]>e;)--o;if(++o,0!==i||o!==r){i>=o&&(i=(o=Math.max(o,1))-1);var a=this.getValueSize();this.times=qa.arraySlice(n,i,o),this.values=qa.arraySlice(this.values,i*a,o*a)}return this},validate:function(){var t=!0,e=this.getValueSize();e-Math.floor(e)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);var n=this.times,r=this.values,i=n.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);for(var o=null,a=0;a!==i;a++){var s=n[a];if("number"==typeof s&&isNaN(s)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,s),t=!1;break}if(null!==o&&o>s){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,s,o),t=!1;break}o=s}if(void 0!==r&&qa.isTypedArray(r)){a=0;for(var u=r.length;a!==u;++a){var l=r[a];if(isNaN(l)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,l),t=!1;break}}}return t},optimize:function(){for(var t=this.times,e=this.values,n=this.getValueSize(),r=this.getInterpolation()===Le,i=1,o=t.length-1,a=1;a<o;++a){var s=!1,u=t[a];if(u!==t[a+1]&&(1!==a||u!==u[0]))if(r)s=!0;else for(var l=a*n,c=l-n,h=l+n,d=0;d!==n;++d){var p=e[l+d];if(p!==e[c+d]||p!==e[h+d]){s=!0;break}}if(s){if(a!==i){t[i]=t[a];var f=a*n,m=i*n;for(d=0;d!==n;++d)e[m+d]=e[f+d]}++i}}if(o>0){for(t[i]=t[o],f=o*n,m=i*n,d=0;d!==n;++d)e[m+d]=e[f+d];++i}return i!==t.length&&(this.times=qa.arraySlice(t,0,i),this.values=qa.arraySlice(e,0,i*n)),this}}),Ja.prototype=Object.assign(Object.create(Qa.prototype),{constructor:Ja,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:Oe,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),$a.prototype=Object.assign(Object.create(Qa.prototype),{constructor:$a,ValueTypeName:"color"}),ts.prototype=Object.assign(Object.create(Qa.prototype),{constructor:ts,ValueTypeName:"number"}),es.prototype=Object.assign(Object.create(Xa.prototype),{constructor:es,interpolate_:function(t,e,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=t*a,u=(n-e)/(r-e),l=s+a;s!==l;s+=4)tn.slerpFlat(i,0,o,s-a,o,s,u);return i}}),ns.prototype=Object.assign(Object.create(Qa.prototype),{constructor:ns,ValueTypeName:"quaternion",DefaultInterpolation:Re,InterpolantFactoryMethodLinear:function(t){return new es(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:void 0}),rs.prototype=Object.assign(Object.create(Qa.prototype),{constructor:rs,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:Oe,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),is.prototype=Object.assign(Object.create(Qa.prototype),{constructor:is,ValueTypeName:"vector"}),Object.assign(os,{parse:function(t){for(var e=[],n=t.tracks,r=1/(t.fps||1),i=0,o=n.length;i!==o;++i)e.push(as(n[i]).scale(r));return new os(t.name,t.duration,e)},toJSON:function(t){for(var e=[],n=t.tracks,r={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid},i=0,o=n.length;i!==o;++i)e.push(Qa.toJSON(n[i]));return r},CreateFromMorphTargetSequence:function(t,e,n,r){for(var i=e.length,o=[],a=0;a<i;a++){var s=[],u=[];s.push((a+i-1)%i,a,(a+1)%i),u.push(0,1,0);var l=qa.getKeyframeOrder(s);s=qa.sortedArray(s,1,l),u=qa.sortedArray(u,1,l),r||0!==s[0]||(s.push(i),u.push(u[0])),o.push(new ts(".morphTargetInfluences["+e[a].name+"]",s,u).scale(1/n))}return new os(t,-1,o)},findByName:function(t,e){var n=t;Array.isArray(t)||(n=t.geometry&&t.geometry.animations||t.animations);for(var r=0;r<n.length;r++)if(n[r].name===e)return n[r];return null},CreateClipsFromMorphTargetSequences:function(t,e,n){for(var r={},i=/^([\w-]*?)([\d]+)$/,o=0,a=t.length;o<a;o++){var s=t[o],u=s.name.match(i);if(u&&u.length>1){var l=r[h=u[1]];l||(r[h]=l=[]),l.push(s)}}var c=[];for(var h in r)c.push(os.CreateFromMorphTargetSequence(h,r[h],e,n));return c},parseAnimation:function(t,e){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var n=function(t,e,n,r,i){if(0!==n.length){var o=[],a=[];qa.flattenJSON(n,o,a,r),0!==o.length&&i.push(new t(e,o,a))}},r=[],i=t.name||"default",o=t.length||-1,a=t.fps||30,s=t.hierarchy||[],u=0;u<s.length;u++){var l=s[u].keys;if(l&&0!==l.length)if(l[0].morphTargets){for(var c={},h=0;h<l.length;h++)if(l[h].morphTargets)for(var d=0;d<l[h].morphTargets.length;d++)c[l[h].morphTargets[d]]=-1;for(var p in c){var f=[],m=[];for(d=0;d!==l[h].morphTargets.length;++d){var v=l[h];f.push(v.time),m.push(v.morphTarget===p?1:0)}r.push(new ts(".morphTargetInfluence["+p+"]",f,m))}o=c.length*(a||1)}else{var g=".bones["+e[u].name+"]";n(is,g+".position",l,"pos",r),n(ns,g+".quaternion",l,"rot",r),n(is,g+".scale",l,"scl",r)}}return 0===r.length?null:new os(i,o,r)}}),Object.assign(os.prototype,{resetDuration:function(){for(var t=0,e=0,n=this.tracks.length;e!==n;++e){var r=this.tracks[e];t=Math.max(t,r.times[r.times.length-1])}return this.duration=t,this},trim:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this},validate:function(){for(var t=!0,e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t},optimize:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}});var ss={enabled:!1,files:{},add:function(t,e){!1!==this.enabled&&(this.files[t]=e)},get:function(t){if(!1!==this.enabled)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};function us(t,e,n){var r=this,i=!1,o=0,a=0,s=void 0;this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=n,this.itemStart=function(t){a++,!1===i&&void 0!==r.onStart&&r.onStart(t,o,a),i=!0},this.itemEnd=function(t){o++,void 0!==r.onProgress&&r.onProgress(t,o,a),o===a&&(i=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(t){void 0!==r.onError&&r.onError(t)},this.resolveURL=function(t){return s?s(t):t},this.setURLModifier=function(t){return s=t,this}}var ls=new us,cs={};function hs(t){this.manager=void 0!==t?t:ls}function ds(t){this.manager=void 0!==t?t:ls}function ps(t){this.manager=void 0!==t?t:ls,this._parser=null}function fs(t){this.manager=void 0!==t?t:ls,this._parser=null}function ms(t){this.manager=void 0!==t?t:ls}function vs(t){this.manager=void 0!==t?t:ls}function gs(t){this.manager=void 0!==t?t:ls}function ys(){this.type="Curve",this.arcLengthDivisions=200}function _s(t,e,n,r,i,o,a,s){ys.call(this),this.type="EllipseCurve",this.aX=t||0,this.aY=e||0,this.xRadius=n||1,this.yRadius=r||1,this.aStartAngle=i||0,this.aEndAngle=o||2*Math.PI,this.aClockwise=a||!1,this.aRotation=s||0}function bs(t,e,n,r,i,o){_s.call(this,t,e,n,n,r,i,o),this.type="ArcCurve"}function ws(){var t=0,e=0,n=0,r=0;function i(i,o,a,s){t=i,e=a,n=-3*i+3*o-2*a-s,r=2*i-2*o+a+s}return{initCatmullRom:function(t,e,n,r,o){i(e,n,o*(n-t),o*(r-e))},initNonuniformCatmullRom:function(t,e,n,r,o,a,s){var u=(e-t)/o-(n-t)/(o+a)+(n-e)/a,l=(n-e)/a-(r-e)/(a+s)+(r-n)/s;i(e,n,u*=a,l*=a)},calc:function(i){var o=i*i;return t+e*i+n*o+r*(o*i)}}}Object.assign(hs.prototype,{load:function(t,e,n,r){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var i=this,o=ss.get(t);if(void 0!==o)return i.manager.itemStart(t),setTimeout(function(){e&&e(o),i.manager.itemEnd(t)},0),o;if(void 0===cs[t]){var a=t.match(/^data:(.*?)(;base64)?,(.*)$/);if(a){var s=a[1],u=!!a[2],l=a[3];l=decodeURIComponent(l),u&&(l=atob(l));try{var c,h=(this.responseType||"").toLowerCase();switch(h){case"arraybuffer":case"blob":for(var d=new Uint8Array(l.length),p=0;p<l.length;p++)d[p]=l.charCodeAt(p);c="blob"===h?new Blob([d.buffer],{type:s}):d.buffer;break;case"document":var f=new DOMParser;c=f.parseFromString(l,s);break;case"json":c=JSON.parse(l);break;default:c=l}setTimeout(function(){e&&e(c),i.manager.itemEnd(t)},0)}catch(e){setTimeout(function(){r&&r(e),i.manager.itemError(t),i.manager.itemEnd(t)},0)}}else{cs[t]=[],cs[t].push({onLoad:e,onProgress:n,onError:r});var m=new XMLHttpRequest;for(var v in m.open("GET",t,!0),m.addEventListener("load",function(e){var n=this.response;ss.add(t,n);var r=cs[t];if(delete cs[t],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received.");for(var o=0,a=r.length;o<a;o++)(s=r[o]).onLoad&&s.onLoad(n);i.manager.itemEnd(t)}else{for(o=0,a=r.length;o<a;o++){var s;(s=r[o]).onError&&s.onError(e)}i.manager.itemError(t),i.manager.itemEnd(t)}},!1),m.addEventListener("progress",function(e){for(var n=cs[t],r=0,i=n.length;r<i;r++){var o=n[r];o.onProgress&&o.onProgress(e)}},!1),m.addEventListener("error",function(e){var n=cs[t];delete cs[t];for(var r=0,o=n.length;r<o;r++){var a=n[r];a.onError&&a.onError(e)}i.manager.itemError(t),i.manager.itemEnd(t)},!1),m.addEventListener("abort",function(e){var n=cs[t];delete cs[t];for(var r=0,o=n.length;r<o;r++){var a=n[r];a.onError&&a.onError(e)}i.manager.itemError(t),i.manager.itemEnd(t)},!1),void 0!==this.responseType&&(m.responseType=this.responseType),void 0!==this.withCredentials&&(m.withCredentials=this.withCredentials),m.overrideMimeType&&m.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),this.requestHeader)m.setRequestHeader(v,this.requestHeader[v]);m.send(null)}return i.manager.itemStart(t),m}cs[t].push({onLoad:e,onProgress:n,onError:r})},setPath:function(t){return this.path=t,this},setResponseType:function(t){return this.responseType=t,this},setWithCredentials:function(t){return this.withCredentials=t,this},setMimeType:function(t){return this.mimeType=t,this},setRequestHeader:function(t){return this.requestHeader=t,this}}),Object.assign(ds.prototype,{load:function(t,e,n,r){var i=this,o=new hs(i.manager);o.setPath(i.path),o.load(t,function(t){e(i.parse(JSON.parse(t)))},n,r)},parse:function(t,e){for(var n=[],r=0;r<t.length;r++){var i=os.parse(t[r]);n.push(i)}e(n)},setPath:function(t){return this.path=t,this}}),Object.assign(ps.prototype,{load:function(t,e,n,r){var i=this,o=[],a=new bo;a.image=o;var s=new hs(this.manager);function u(u){s.load(t[u],function(t){var n=i._parser(t,!0);o[u]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},6===(l+=1)&&(1===n.mipmapCount&&(a.minFilter=Nt),a.format=n.format,a.needsUpdate=!0,e&&e(a))},n,r)}if(s.setPath(this.path),s.setResponseType("arraybuffer"),Array.isArray(t))for(var l=0,c=0,h=t.length;c<h;++c)u(c);else s.load(t,function(t){var n=i._parser(t,!0);if(n.isCubemap)for(var r=n.mipmaps.length/n.mipmapCount,s=0;s<r;s++){o[s]={mipmaps:[]};for(var u=0;u<n.mipmapCount;u++)o[s].mipmaps.push(n.mipmaps[s*n.mipmapCount+u]),o[s].format=n.format,o[s].width=n.width,o[s].height=n.height}else a.image.width=n.width,a.image.height=n.height,a.mipmaps=n.mipmaps;1===n.mipmapCount&&(a.minFilter=Nt),a.format=n.format,a.needsUpdate=!0,e&&e(a)},n,r);return a},setPath:function(t){return this.path=t,this}}),Object.assign(fs.prototype,{load:function(t,e,n,r){var i=this,o=new mn,a=new hs(this.manager);return a.setResponseType("arraybuffer"),a.setPath(this.path),a.load(t,function(t){var n=i._parser(t);n&&(void 0!==n.image?o.image=n.image:void 0!==n.data&&(o.image.width=n.width,o.image.height=n.height,o.image.data=n.data),o.wrapS=void 0!==n.wrapS?n.wrapS:Pt,o.wrapT=void 0!==n.wrapT?n.wrapT:Pt,o.magFilter=void 0!==n.magFilter?n.magFilter:Nt,o.minFilter=void 0!==n.minFilter?n.minFilter:kt,o.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.format&&(o.format=n.format),void 0!==n.type&&(o.type=n.type),void 0!==n.mipmaps&&(o.mipmaps=n.mipmaps),1===n.mipmapCount&&(o.minFilter=Nt),o.needsUpdate=!0,e&&e(o,n))},n,r),o},setPath:function(t){return this.path=t,this}}),Object.assign(ms.prototype,{crossOrigin:"anonymous",load:function(t,e,n,r){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var i=this,o=ss.get(t);if(void 0!==o)return i.manager.itemStart(t),setTimeout(function(){e&&e(o),i.manager.itemEnd(t)},0),o;var a=document.createElementNS("http://www.w3.org/1999/xhtml","img");function s(){a.removeEventListener("load",s,!1),a.removeEventListener("error",u,!1),ss.add(t,this),e&&e(this),i.manager.itemEnd(t)}function u(e){a.removeEventListener("load",s,!1),a.removeEventListener("error",u,!1),r&&r(e),i.manager.itemError(t),i.manager.itemEnd(t)}return a.addEventListener("load",s,!1),a.addEventListener("error",u,!1),"data:"!==t.substr(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),i.manager.itemStart(t),a.src=t,a},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this}}),Object.assign(vs.prototype,{crossOrigin:"anonymous",load:function(t,e,n,r){var i=new Or,o=new ms(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);var a=0;function s(n){o.load(t[n],function(t){i.images[n]=t,6==++a&&(i.needsUpdate=!0,e&&e(i))},void 0,r)}for(var u=0;u<t.length;++u)s(u);return i},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this}}),Object.assign(gs.prototype,{crossOrigin:"anonymous",load:function(t,e,n,r){var i=new hn,o=new ms(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(t,function(n){i.image=n;var r=t.search(/\.jpe?g($|\?)/i)>0||0===t.search(/^data\:image\/jpeg/);i.format=r?Zt:Qt,i.needsUpdate=!0,void 0!==e&&e(i)},n,r),i},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this}}),Object.assign(ys.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(t,e){var n=this.getUtoTmapping(t);return this.getPoint(n,e)},getPoints:function(t){void 0===t&&(t=5);for(var e=[],n=0;n<=t;n++)e.push(this.getPoint(n/t));return e},getSpacedPoints:function(t){void 0===t&&(t=5);for(var e=[],n=0;n<=t;n++)e.push(this.getPointAt(n/t));return e},getLength:function(){var t=this.getLengths();return t[t.length-1]},getLengths:function(t){if(void 0===t&&(t=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var e,n,r=[],i=this.getPoint(0),o=0;for(r.push(0),n=1;n<=t;n++)o+=(e=this.getPoint(n/t)).distanceTo(i),r.push(o),i=e;return this.cacheArcLengths=r,r},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(t,e){var n,r=this.getLengths(),i=0,o=r.length;n=e||t*r[o-1];for(var a,s=0,u=o-1;s<=u;)if((a=r[i=Math.floor(s+(u-s)/2)]-n)<0)s=i+1;else{if(!(a>0)){u=i;break}u=i-1}if(r[i=u]===n)return i/(o-1);var l=r[i];return(i+(n-l)/(r[i+1]-l))/(o-1)},getTangent:function(t){var e=t-1e-4,n=t+1e-4;e<0&&(e=0),n>1&&(n=1);var r=this.getPoint(e);return this.getPoint(n).clone().sub(r).normalize()},getTangentAt:function(t){var e=this.getUtoTmapping(t);return this.getTangent(e)},computeFrenetFrames:function(t,e){var n,r,i=new en,o=[],a=[],s=[],u=new en,l=new $e;for(n=0;n<=t;n++)o[n]=this.getTangentAt(n/t),o[n].normalize();a[0]=new en,s[0]=new en;var c=Number.MAX_VALUE,h=Math.abs(o[0].x),d=Math.abs(o[0].y),p=Math.abs(o[0].z);for(h<=c&&(c=h,i.set(1,0,0)),d<=c&&(c=d,i.set(0,1,0)),p<=c&&i.set(0,0,1),u.crossVectors(o[0],i).normalize(),a[0].crossVectors(o[0],u),s[0].crossVectors(o[0],a[0]),n=1;n<=t;n++)a[n]=a[n-1].clone(),s[n]=s[n-1].clone(),u.crossVectors(o[n-1],o[n]),u.length()>Number.EPSILON&&(u.normalize(),r=Math.acos(Qe.clamp(o[n-1].dot(o[n]),-1,1)),a[n].applyMatrix4(l.makeRotationAxis(u,r))),s[n].crossVectors(o[n],a[n]);if(!0===e)for(r=Math.acos(Qe.clamp(a[0].dot(a[t]),-1,1)),r/=t,o[0].dot(u.crossVectors(a[0],a[t]))>0&&(r=-r),n=1;n<=t;n++)a[n].applyMatrix4(l.makeRotationAxis(o[n],r*n)),s[n].crossVectors(o[n],a[n]);return{tangents:o,normals:a,binormals:s}},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this},toJSON:function(){var t={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t},fromJSON:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}),(_s.prototype=Object.create(ys.prototype)).constructor=_s,_s.prototype.isEllipseCurve=!0,_s.prototype.getPoint=function(t,e){for(var n=e||new Je,r=2*Math.PI,i=this.aEndAngle-this.aStartAngle,o=Math.abs(i)<Number.EPSILON;i<0;)i+=r;for(;i>r;)i-=r;i<Number.EPSILON&&(i=o?0:r),!0!==this.aClockwise||o||(i===r?i=-r:i-=r);var a=this.aStartAngle+t*i,s=this.aX+this.xRadius*Math.cos(a),u=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){var l=Math.cos(this.aRotation),c=Math.sin(this.aRotation),h=s-this.aX,d=u-this.aY;s=h*l-d*c+this.aX,u=h*c+d*l+this.aY}return n.set(s,u)},_s.prototype.copy=function(t){return ys.prototype.copy.call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this},_s.prototype.toJSON=function(){var t=ys.prototype.toJSON.call(this);return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t},_s.prototype.fromJSON=function(t){return ys.prototype.fromJSON.call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this},(bs.prototype=Object.create(_s.prototype)).constructor=bs,bs.prototype.isArcCurve=!0;var xs=new en,Es=new ws,Ss=new ws,Ts=new ws;function Ms(t,e,n,r){ys.call(this),this.type="CatmullRomCurve3",this.points=t||[],this.closed=e||!1,this.curveType=n||"centripetal",this.tension=r||.5}function Cs(t,e,n,r,i){var o=.5*(r-e),a=.5*(i-n),s=t*t;return(2*n-2*r+o+a)*(t*s)+(-3*n+3*r-2*o-a)*s+o*t+n}function As(t,e,n,r){return function(t,n){var r=1-t;return r*r*e}(t)+function(t,e){return 2*(1-t)*t*n}(t)+function(t,e){return t*t*r}(t)}function Ps(t,e,n,r,i){return function(t,n){var r=1-t;return r*r*r*e}(t)+function(t,e){var r=1-t;return 3*r*r*t*n}(t)+function(t,e){return 3*(1-t)*t*t*r}(t)+function(t,e){return t*t*t*i}(t)}function Os(t,e,n,r){ys.call(this),this.type="CubicBezierCurve",this.v0=t||new Je,this.v1=e||new Je,this.v2=n||new Je,this.v3=r||new Je}function Rs(t,e,n,r){ys.call(this),this.type="CubicBezierCurve3",this.v0=t||new en,this.v1=e||new en,this.v2=n||new en,this.v3=r||new en}function Ls(t,e){ys.call(this),this.type="LineCurve",this.v1=t||new Je,this.v2=e||new Je}function Is(t,e){ys.call(this),this.type="LineCurve3",this.v1=t||new en,this.v2=e||new en}function Ns(t,e,n){ys.call(this),this.type="QuadraticBezierCurve",this.v0=t||new Je,this.v1=e||new Je,this.v2=n||new Je}function Ds(t,e,n){ys.call(this),this.type="QuadraticBezierCurve3",this.v0=t||new en,this.v1=e||new en,this.v2=n||new en}function ks(t){ys.call(this),this.type="SplineCurve",this.points=t||[]}(Ms.prototype=Object.create(ys.prototype)).constructor=Ms,Ms.prototype.isCatmullRomCurve3=!0,Ms.prototype.getPoint=function(t,e){var n,r,i,o,a=e||new en,s=this.points,u=s.length,l=(u-(this.closed?0:1))*t,c=Math.floor(l),h=l-c;if(this.closed?c+=c>0?0:(Math.floor(Math.abs(c)/u)+1)*u:0===h&&c===u-1&&(c=u-2,h=1),this.closed||c>0?n=s[(c-1)%u]:(xs.subVectors(s[0],s[1]).add(s[0]),n=xs),r=s[c%u],i=s[(c+1)%u],this.closed||c+2<u?o=s[(c+2)%u]:(xs.subVectors(s[u-1],s[u-2]).add(s[u-1]),o=xs),"centripetal"===this.curveType||"chordal"===this.curveType){var d="chordal"===this.curveType?.5:.25,p=Math.pow(n.distanceToSquared(r),d),f=Math.pow(r.distanceToSquared(i),d),m=Math.pow(i.distanceToSquared(o),d);f<1e-4&&(f=1),p<1e-4&&(p=f),m<1e-4&&(m=f),Es.initNonuniformCatmullRom(n.x,r.x,i.x,o.x,p,f,m),Ss.initNonuniformCatmullRom(n.y,r.y,i.y,o.y,p,f,m),Ts.initNonuniformCatmullRom(n.z,r.z,i.z,o.z,p,f,m)}else"catmullrom"===this.curveType&&(Es.initCatmullRom(n.x,r.x,i.x,o.x,this.tension),Ss.initCatmullRom(n.y,r.y,i.y,o.y,this.tension),Ts.initCatmullRom(n.z,r.z,i.z,o.z,this.tension));return a.set(Es.calc(h),Ss.calc(h),Ts.calc(h)),a},Ms.prototype.copy=function(t){ys.prototype.copy.call(this,t),this.points=[];for(var e=0,n=t.points.length;e<n;e++)this.points.push(t.points[e].clone());return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this},Ms.prototype.toJSON=function(){var t=ys.prototype.toJSON.call(this);t.points=[];for(var e=0,n=this.points.length;e<n;e++)t.points.push(this.points[e].toArray());return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t},Ms.prototype.fromJSON=function(t){ys.prototype.fromJSON.call(this,t),this.points=[];for(var e=0,n=t.points.length;e<n;e++){var r=t.points[e];this.points.push((new en).fromArray(r))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this},(Os.prototype=Object.create(ys.prototype)).constructor=Os,Os.prototype.isCubicBezierCurve=!0,Os.prototype.getPoint=function(t,e){var n=e||new Je,r=this.v0,i=this.v1,o=this.v2,a=this.v3;return n.set(Ps(t,r.x,i.x,o.x,a.x),Ps(t,r.y,i.y,o.y,a.y)),n},Os.prototype.copy=function(t){return ys.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this},Os.prototype.toJSON=function(){var t=ys.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t},Os.prototype.fromJSON=function(t){return ys.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this},(Rs.prototype=Object.create(ys.prototype)).constructor=Rs,Rs.prototype.isCubicBezierCurve3=!0,Rs.prototype.getPoint=function(t,e){var n=e||new en,r=this.v0,i=this.v1,o=this.v2,a=this.v3;return n.set(Ps(t,r.x,i.x,o.x,a.x),Ps(t,r.y,i.y,o.y,a.y),Ps(t,r.z,i.z,o.z,a.z)),n},Rs.prototype.copy=function(t){return ys.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this},Rs.prototype.toJSON=function(){var t=ys.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t},Rs.prototype.fromJSON=function(t){return ys.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this},(Ls.prototype=Object.create(ys.prototype)).constructor=Ls,Ls.prototype.isLineCurve=!0,Ls.prototype.getPoint=function(t,e){var n=e||new Je;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n},Ls.prototype.getPointAt=function(t,e){return this.getPoint(t,e)},Ls.prototype.getTangent=function(){return this.v2.clone().sub(this.v1).normalize()},Ls.prototype.copy=function(t){return ys.prototype.copy.call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this},Ls.prototype.toJSON=function(){var t=ys.prototype.toJSON.call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},Ls.prototype.fromJSON=function(t){return ys.prototype.fromJSON.call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},(Is.prototype=Object.create(ys.prototype)).constructor=Is,Is.prototype.isLineCurve3=!0,Is.prototype.getPoint=function(t,e){var n=e||new en;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n},Is.prototype.getPointAt=function(t,e){return this.getPoint(t,e)},Is.prototype.copy=function(t){return ys.prototype.copy.call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this},Is.prototype.toJSON=function(){var t=ys.prototype.toJSON.call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},Is.prototype.fromJSON=function(t){return ys.prototype.fromJSON.call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},(Ns.prototype=Object.create(ys.prototype)).constructor=Ns,Ns.prototype.isQuadraticBezierCurve=!0,Ns.prototype.getPoint=function(t,e){var n=e||new Je,r=this.v0,i=this.v1,o=this.v2;return n.set(As(t,r.x,i.x,o.x),As(t,r.y,i.y,o.y)),n},Ns.prototype.copy=function(t){return ys.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this},Ns.prototype.toJSON=function(){var t=ys.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},Ns.prototype.fromJSON=function(t){return ys.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},(Ds.prototype=Object.create(ys.prototype)).constructor=Ds,Ds.prototype.isQuadraticBezierCurve3=!0,Ds.prototype.getPoint=function(t,e){var n=e||new en,r=this.v0,i=this.v1,o=this.v2;return n.set(As(t,r.x,i.x,o.x),As(t,r.y,i.y,o.y),As(t,r.z,i.z,o.z)),n},Ds.prototype.copy=function(t){return ys.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this},Ds.prototype.toJSON=function(){var t=ys.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},Ds.prototype.fromJSON=function(t){return ys.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},(ks.prototype=Object.create(ys.prototype)).constructor=ks,ks.prototype.isSplineCurve=!0,ks.prototype.getPoint=function(t,e){var n=e||new Je,r=this.points,i=(r.length-1)*t,o=Math.floor(i),a=i-o,s=r[0===o?o:o-1],u=r[o],l=r[o>r.length-2?r.length-1:o+1],c=r[o>r.length-3?r.length-1:o+2];return n.set(Cs(a,s.x,u.x,l.x,c.x),Cs(a,s.y,u.y,l.y,c.y)),n},ks.prototype.copy=function(t){ys.prototype.copy.call(this,t),this.points=[];for(var e=0,n=t.points.length;e<n;e++)this.points.push(t.points[e].clone());return this},ks.prototype.toJSON=function(){var t=ys.prototype.toJSON.call(this);t.points=[];for(var e=0,n=this.points.length;e<n;e++)t.points.push(this.points[e].toArray());return t},ks.prototype.fromJSON=function(t){ys.prototype.fromJSON.call(this,t),this.points=[];for(var e=0,n=t.points.length;e<n;e++){var r=t.points[e];this.points.push((new Je).fromArray(r))}return this};var Fs=Object.freeze({ArcCurve:bs,CatmullRomCurve3:Ms,CubicBezierCurve:Os,CubicBezierCurve3:Rs,EllipseCurve:_s,LineCurve:Ls,LineCurve3:Is,QuadraticBezierCurve:Ns,QuadraticBezierCurve3:Ds,SplineCurve:ks});function js(){ys.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function Us(t){js.call(this),this.type="Path",this.currentPoint=new Je,t&&this.setFromPoints(t)}function Bs(t){Us.call(this,t),this.uuid=Qe.generateUUID(),this.type="Shape",this.holes=[]}function Gs(t,e){Gn.call(this),this.type="Light",this.color=new An(t),this.intensity=void 0!==e?e:1,this.receiveShadow=void 0}function Vs(t,e,n){Gs.call(this,t,n),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(Gn.DefaultUp),this.updateMatrix(),this.groundColor=new An(e)}function zs(t){this.camera=t,this.bias=0,this.radius=1,this.mapSize=new Je(512,512),this.map=null,this.matrix=new $e}function Hs(){zs.call(this,new Vi(50,1,.5,500))}function Ws(t,e,n,r,i,o){Gs.call(this,t,e),this.type="SpotLight",this.position.copy(Gn.DefaultUp),this.updateMatrix(),this.target=new Gn,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(t){this.intensity=t/Math.PI}}),this.distance=void 0!==n?n:0,this.angle=void 0!==r?r:Math.PI/3,this.penumbra=void 0!==i?i:0,this.decay=void 0!==o?o:1,this.shadow=new Hs}function qs(t,e,n,r){Gs.call(this,t,e),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(t){this.intensity=t/(4*Math.PI)}}),this.distance=void 0!==n?n:0,this.decay=void 0!==r?r:1,this.shadow=new zs(new Vi(90,1,.5,500))}function Xs(t,e,n,r,i,o){Gi.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=void 0!==t?t:-1,this.right=void 0!==e?e:1,this.top=void 0!==n?n:1,this.bottom=void 0!==r?r:-1,this.near=void 0!==i?i:.1,this.far=void 0!==o?o:2e3,this.updateProjectionMatrix()}function Ys(){zs.call(this,new Xs(-5,5,5,-5,.5,500))}function Ks(t,e){Gs.call(this,t,e),this.type="DirectionalLight",this.position.copy(Gn.DefaultUp),this.updateMatrix(),this.target=new Gn,this.shadow=new Ys}function Zs(t,e){Gs.call(this,t,e),this.type="AmbientLight",this.castShadow=void 0}function Qs(t,e,n,r){Gs.call(this,t,e),this.type="RectAreaLight",this.width=void 0!==n?n:10,this.height=void 0!==r?r:10}function Js(t){this.manager=void 0!==t?t:ls,this.textures={}}js.prototype=Object.assign(Object.create(ys.prototype),{constructor:js,add:function(t){this.curves.push(t)},closePath:function(){var t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new Ls(e,t))},getPoint:function(t){for(var e=t*this.getLength(),n=this.getCurveLengths(),r=0;r<n.length;){if(n[r]>=e){var i=n[r]-e,o=this.curves[r],a=o.getLength();return o.getPointAt(0===a?0:1-i/a)}r++}return null},getLength:function(){var t=this.getCurveLengths();return t[t.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var t=[],e=0,n=0,r=this.curves.length;n<r;n++)e+=this.curves[n].getLength(),t.push(e);return this.cacheLengths=t,t},getSpacedPoints:function(t){void 0===t&&(t=40);for(var e=[],n=0;n<=t;n++)e.push(this.getPoint(n/t));return this.autoClose&&e.push(e[0]),e},getPoints:function(t){t=t||12;for(var e,n=[],r=0,i=this.curves;r<i.length;r++)for(var o=i[r],a=o.getPoints(o&&o.isEllipseCurve?2*t:o&&(o.isLineCurve||o.isLineCurve3)?1:o&&o.isSplineCurve?t*o.points.length:t),s=0;s<a.length;s++){var u=a[s];e&&e.equals(u)||(n.push(u),e=u)}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n},copy:function(t){ys.prototype.copy.call(this,t),this.curves=[];for(var e=0,n=t.curves.length;e<n;e++)this.curves.push(t.curves[e].clone());return this.autoClose=t.autoClose,this},toJSON:function(){var t=ys.prototype.toJSON.call(this);t.autoClose=this.autoClose,t.curves=[];for(var e=0,n=this.curves.length;e<n;e++)t.curves.push(this.curves[e].toJSON());return t},fromJSON:function(t){ys.prototype.fromJSON.call(this,t),this.autoClose=t.autoClose,this.curves=[];for(var e=0,n=t.curves.length;e<n;e++){var r=t.curves[e];this.curves.push((new Fs[r.type]).fromJSON(r))}return this}}),Us.prototype=Object.assign(Object.create(js.prototype),{constructor:Us,setFromPoints:function(t){this.moveTo(t[0].x,t[0].y);for(var e=1,n=t.length;e<n;e++)this.lineTo(t[e].x,t[e].y)},moveTo:function(t,e){this.currentPoint.set(t,e)},lineTo:function(t,e){var n=new Ls(this.currentPoint.clone(),new Je(t,e));this.curves.push(n),this.currentPoint.set(t,e)},quadraticCurveTo:function(t,e,n,r){var i=new Ns(this.currentPoint.clone(),new Je(t,e),new Je(n,r));this.curves.push(i),this.currentPoint.set(n,r)},bezierCurveTo:function(t,e,n,r,i,o){var a=new Os(this.currentPoint.clone(),new Je(t,e),new Je(n,r),new Je(i,o));this.curves.push(a),this.currentPoint.set(i,o)},splineThru:function(t){var e=new ks([this.currentPoint.clone()].concat(t));this.curves.push(e),this.currentPoint.copy(t[t.length-1])},arc:function(t,e,n,r,i,o){this.absarc(t+this.currentPoint.x,e+this.currentPoint.y,n,r,i,o)},absarc:function(t,e,n,r,i,o){this.absellipse(t,e,n,n,r,i,o)},ellipse:function(t,e,n,r,i,o,a,s){this.absellipse(t+this.currentPoint.x,e+this.currentPoint.y,n,r,i,o,a,s)},absellipse:function(t,e,n,r,i,o,a,s){var u=new _s(t,e,n,r,i,o,a,s);if(this.curves.length>0){var l=u.getPoint(0);l.equals(this.currentPoint)||this.lineTo(l.x,l.y)}this.curves.push(u);var c=u.getPoint(1);this.currentPoint.copy(c)},copy:function(t){return js.prototype.copy.call(this,t),this.currentPoint.copy(t.currentPoint),this},toJSON:function(){var t=js.prototype.toJSON.call(this);return t.currentPoint=this.currentPoint.toArray(),t},fromJSON:function(t){return js.prototype.fromJSON.call(this,t),this.currentPoint.fromArray(t.currentPoint),this}}),Bs.prototype=Object.assign(Object.create(Us.prototype),{constructor:Bs,getPointsHoles:function(t){for(var e=[],n=0,r=this.holes.length;n<r;n++)e[n]=this.holes[n].getPoints(t);return e},extractPoints:function(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}},copy:function(t){Us.prototype.copy.call(this,t),this.holes=[];for(var e=0,n=t.holes.length;e<n;e++)this.holes.push(t.holes[e].clone());return this},toJSON:function(){var t=Us.prototype.toJSON.call(this);t.uuid=this.uuid,t.holes=[];for(var e=0,n=this.holes.length;e<n;e++)t.holes.push(this.holes[e].toJSON());return t},fromJSON:function(t){Us.prototype.fromJSON.call(this,t),this.uuid=t.uuid,this.holes=[];for(var e=0,n=t.holes.length;e<n;e++){var r=t.holes[e];this.holes.push((new Us).fromJSON(r))}return this}}),Gs.prototype=Object.assign(Object.create(Gn.prototype),{constructor:Gs,isLight:!0,copy:function(t){return Gn.prototype.copy.call(this,t),this.color.copy(t.color),this.intensity=t.intensity,this},toJSON:function(t){var e=Gn.prototype.toJSON.call(this,t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),e}}),Vs.prototype=Object.assign(Object.create(Gs.prototype),{constructor:Vs,isHemisphereLight:!0,copy:function(t){return Gs.prototype.copy.call(this,t),this.groundColor.copy(t.groundColor),this}}),Object.assign(zs.prototype,{copy:function(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var t={};return 0!==this.bias&&(t.bias=this.bias),1!==this.radius&&(t.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}),Hs.prototype=Object.assign(Object.create(zs.prototype),{constructor:Hs,isSpotLightShadow:!0,update:function(t){var e=this.camera,n=2*Qe.RAD2DEG*t.angle,r=this.mapSize.width/this.mapSize.height,i=t.distance||e.far;n===e.fov&&r===e.aspect&&i===e.far||(e.fov=n,e.aspect=r,e.far=i,e.updateProjectionMatrix())}}),Ws.prototype=Object.assign(Object.create(Gs.prototype),{constructor:Ws,isSpotLight:!0,copy:function(t){return Gs.prototype.copy.call(this,t),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),qs.prototype=Object.assign(Object.create(Gs.prototype),{constructor:qs,isPointLight:!0,copy:function(t){return Gs.prototype.copy.call(this,t),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}),Xs.prototype=Object.assign(Object.create(Gi.prototype),{constructor:Xs,isOrthographicCamera:!0,copy:function(t,e){return Gi.prototype.copy.call(this,t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this},setViewOffset:function(t,e,n,r,i,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2,i=n-t,o=n+t,a=r+e,s=r-e;if(null!==this.view&&this.view.enabled){var u=this.zoom/(this.view.width/this.view.fullWidth),l=this.zoom/(this.view.height/this.view.fullHeight),c=(this.right-this.left)/this.view.width,h=(this.top-this.bottom)/this.view.height;o=(i+=c*(this.view.offsetX/u))+c*(this.view.width/u),s=(a-=h*(this.view.offsetY/l))-h*(this.view.height/l)}this.projectionMatrix.makeOrthographic(i,o,a,s,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(t){var e=Gn.prototype.toJSON.call(this,t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}}),Ys.prototype=Object.assign(Object.create(zs.prototype),{constructor:Ys}),Ks.prototype=Object.assign(Object.create(Gs.prototype),{constructor:Ks,isDirectionalLight:!0,copy:function(t){return Gs.prototype.copy.call(this,t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),Zs.prototype=Object.assign(Object.create(Gs.prototype),{constructor:Zs,isAmbientLight:!0}),Qs.prototype=Object.assign(Object.create(Gs.prototype),{constructor:Qs,isRectAreaLight:!0,copy:function(t){return Gs.prototype.copy.call(this,t),this.width=t.width,this.height=t.height,this},toJSON:function(t){var e=Gs.prototype.toJSON.call(this,t);return e.object.width=this.width,e.object.height=this.height,e}}),Object.assign(Js.prototype,{load:function(t,e,n,r){var i=this,o=new hs(i.manager);o.setPath(i.path),o.load(t,function(t){e(i.parse(JSON.parse(t)))},n,r)},parse:function(t){var e=this.textures;function n(t){return void 0===e[t]&&console.warn("THREE.MaterialLoader: Undefined texture",t),e[t]}var r=new Wa[t.type];if(void 0!==t.uuid&&(r.uuid=t.uuid),void 0!==t.name&&(r.name=t.name),void 0!==t.color&&r.color.setHex(t.color),void 0!==t.roughness&&(r.roughness=t.roughness),void 0!==t.metalness&&(r.metalness=t.metalness),void 0!==t.emissive&&r.emissive.setHex(t.emissive),void 0!==t.specular&&r.specular.setHex(t.specular),void 0!==t.shininess&&(r.shininess=t.shininess),void 0!==t.clearCoat&&(r.clearCoat=t.clearCoat),void 0!==t.clearCoatRoughness&&(r.clearCoatRoughness=t.clearCoatRoughness),void 0!==t.vertexColors&&(r.vertexColors=t.vertexColors),void 0!==t.fog&&(r.fog=t.fog),void 0!==t.flatShading&&(r.flatShading=t.flatShading),void 0!==t.blending&&(r.blending=t.blending),void 0!==t.combine&&(r.combine=t.combine),void 0!==t.side&&(r.side=t.side),void 0!==t.opacity&&(r.opacity=t.opacity),void 0!==t.transparent&&(r.transparent=t.transparent),void 0!==t.alphaTest&&(r.alphaTest=t.alphaTest),void 0!==t.depthTest&&(r.depthTest=t.depthTest),void 0!==t.depthWrite&&(r.depthWrite=t.depthWrite),void 0!==t.colorWrite&&(r.colorWrite=t.colorWrite),void 0!==t.wireframe&&(r.wireframe=t.wireframe),void 0!==t.wireframeLinewidth&&(r.wireframeLinewidth=t.wireframeLinewidth),void 0!==t.wireframeLinecap&&(r.wireframeLinecap=t.wireframeLinecap),void 0!==t.wireframeLinejoin&&(r.wireframeLinejoin=t.wireframeLinejoin),void 0!==t.rotation&&(r.rotation=t.rotation),1!==t.linewidth&&(r.linewidth=t.linewidth),void 0!==t.dashSize&&(r.dashSize=t.dashSize),void 0!==t.gapSize&&(r.gapSize=t.gapSize),void 0!==t.scale&&(r.scale=t.scale),void 0!==t.polygonOffset&&(r.polygonOffset=t.polygonOffset),void 0!==t.polygonOffsetFactor&&(r.polygonOffsetFactor=t.polygonOffsetFactor),void 0!==t.polygonOffsetUnits&&(r.polygonOffsetUnits=t.polygonOffsetUnits),void 0!==t.skinning&&(r.skinning=t.skinning),void 0!==t.morphTargets&&(r.morphTargets=t.morphTargets),void 0!==t.dithering&&(r.dithering=t.dithering),void 0!==t.visible&&(r.visible=t.visible),void 0!==t.userData&&(r.userData=t.userData),void 0!==t.uniforms)for(var i in t.uniforms){var o=t.uniforms[i];switch(r.uniforms[i]={},o.type){case"t":r.uniforms[i].value=n(o.value);break;case"c":r.uniforms[i].value=(new An).setHex(o.value);break;case"v2":r.uniforms[i].value=(new Je).fromArray(o.value);break;case"v3":r.uniforms[i].value=(new en).fromArray(o.value);break;case"v4":r.uniforms[i].value=(new dn).fromArray(o.value);break;case"m4":r.uniforms[i].value=(new $e).fromArray(o.value);break;default:r.uniforms[i].value=o.value}}if(void 0!==t.defines&&(r.defines=t.defines),void 0!==t.vertexShader&&(r.vertexShader=t.vertexShader),void 0!==t.fragmentShader&&(r.fragmentShader=t.fragmentShader),void 0!==t.shading&&(r.flatShading=1===t.shading),void 0!==t.size&&(r.size=t.size),void 0!==t.sizeAttenuation&&(r.sizeAttenuation=t.sizeAttenuation),void 0!==t.map&&(r.map=n(t.map)),void 0!==t.alphaMap&&(r.alphaMap=n(t.alphaMap),r.transparent=!0),void 0!==t.bumpMap&&(r.bumpMap=n(t.bumpMap)),void 0!==t.bumpScale&&(r.bumpScale=t.bumpScale),void 0!==t.normalMap&&(r.normalMap=n(t.normalMap)),void 0!==t.normalMapType&&(r.normalMapType=t.normalMapType),void 0!==t.normalScale){var a=t.normalScale;!1===Array.isArray(a)&&(a=[a,a]),r.normalScale=(new Je).fromArray(a)}return void 0!==t.displacementMap&&(r.displacementMap=n(t.displacementMap)),void 0!==t.displacementScale&&(r.displacementScale=t.displacementScale),void 0!==t.displacementBias&&(r.displacementBias=t.displacementBias),void 0!==t.roughnessMap&&(r.roughnessMap=n(t.roughnessMap)),void 0!==t.metalnessMap&&(r.metalnessMap=n(t.metalnessMap)),void 0!==t.emissiveMap&&(r.emissiveMap=n(t.emissiveMap)),void 0!==t.emissiveIntensity&&(r.emissiveIntensity=t.emissiveIntensity),void 0!==t.specularMap&&(r.specularMap=n(t.specularMap)),void 0!==t.envMap&&(r.envMap=n(t.envMap)),void 0!==t.envMapIntensity&&(r.envMapIntensity=t.envMapIntensity),void 0!==t.reflectivity&&(r.reflectivity=t.reflectivity),void 0!==t.lightMap&&(r.lightMap=n(t.lightMap)),void 0!==t.lightMapIntensity&&(r.lightMapIntensity=t.lightMapIntensity),void 0!==t.aoMap&&(r.aoMap=n(t.aoMap)),void 0!==t.aoMapIntensity&&(r.aoMapIntensity=t.aoMapIntensity),void 0!==t.gradientMap&&(r.gradientMap=n(t.gradientMap)),r},setPath:function(t){return this.path=t,this},setTextures:function(t){return this.textures=t,this}});var $s={decodeText:function(t){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(t);for(var e="",n=0,r=t.length;n<r;n++)e+=String.fromCharCode(t[n]);return decodeURIComponent(escape(e))},extractUrlBase:function(t){var e=t.lastIndexOf("/");return-1===e?"./":t.substr(0,e+1)}};function tu(t){this.manager=void 0!==t?t:ls}Object.assign(tu.prototype,{load:function(t,e,n,r){var i=this,o=new hs(i.manager);o.setPath(i.path),o.load(t,function(t){e(i.parse(JSON.parse(t)))},n,r)},parse:function(t){var e=new or,n=t.data.index;if(void 0!==n){var r=new eu[n.type](n.array);e.setIndex(new qn(r,1))}var i=t.data.attributes;for(var o in i){var a=i[o];r=new eu[a.type](a.array),e.addAttribute(o,new qn(r,a.itemSize,a.normalized))}var s=t.data.groups||t.data.drawcalls||t.data.offsets;if(void 0!==s)for(var u=0,l=s.length;u!==l;++u){var c=s[u];e.addGroup(c.start,c.count,c.materialIndex)}var h=t.data.boundingSphere;if(void 0!==h){var d=new en;void 0!==h.center&&d.fromArray(h.center),e.boundingSphere=new gn(d,h.radius)}return t.name&&(e.name=t.name),t.userData&&(e.userData=t.userData),e},setPath:function(t){return this.path=t,this}});var eu={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!=typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function nu(t){this.manager=void 0!==t?t:ls,this.resourcePath=""}Object.assign(nu.prototype,{crossOrigin:"anonymous",load:function(t,e,n,r){var i=this,o=void 0===this.path?$s.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||o;var a=new hs(i.manager);a.setPath(this.path),a.load(t,function(n){var o=null;try{o=JSON.parse(n)}catch(e){return void 0!==r&&r(e),void console.error("THREE:ObjectLoader: Can't parse "+t+".",e.message)}var a=o.metadata;void 0!==a&&void 0!==a.type&&"geometry"!==a.type.toLowerCase()?i.parse(o,e):console.error("THREE.ObjectLoader: Can't load "+t)},n,r)},setPath:function(t){return this.path=t,this},setResourcePath:function(t){return this.resourcePath=t,this},setCrossOrigin:function(t){return this.crossOrigin=t,this},parse:function(t,e){var n=this.parseShape(t.shapes),r=this.parseGeometries(t.geometries,n),i=this.parseImages(t.images,function(){void 0!==e&&e(s)}),o=this.parseTextures(t.textures,i),a=this.parseMaterials(t.materials,o),s=this.parseObject(t.object,r,a);return t.animations&&(s.animations=this.parseAnimations(t.animations)),void 0!==t.images&&0!==t.images.length||void 0!==e&&e(s),s},parseShape:function(t){var e={};if(void 0!==t)for(var n=0,r=t.length;n<r;n++){var i=(new Bs).fromJSON(t[n]);e[i.uuid]=i}return e},parseGeometries:function(t,e){var n={};if(void 0!==t)for(var r=new tu,i=0,o=t.length;i<o;i++){var a,s=t[i];switch(s.type){case"PlaneGeometry":case"PlaneBufferGeometry":a=new Na[s.type](s.width,s.height,s.widthSegments,s.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":a=new Na[s.type](s.width,s.height,s.depth,s.widthSegments,s.heightSegments,s.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":a=new Na[s.type](s.radius,s.segments,s.thetaStart,s.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":a=new Na[s.type](s.radiusTop,s.radiusBottom,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":a=new Na[s.type](s.radius,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":a=new Na[s.type](s.radius,s.widthSegments,s.heightSegments,s.phiStart,s.phiLength,s.thetaStart,s.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":a=new Na[s.type](s.radius,s.detail);break;case"RingGeometry":case"RingBufferGeometry":a=new Na[s.type](s.innerRadius,s.outerRadius,s.thetaSegments,s.phiSegments,s.thetaStart,s.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":a=new Na[s.type](s.radius,s.tube,s.radialSegments,s.tubularSegments,s.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":a=new Na[s.type](s.radius,s.tube,s.tubularSegments,s.radialSegments,s.p,s.q);break;case"LatheGeometry":case"LatheBufferGeometry":a=new Na[s.type](s.points,s.segments,s.phiStart,s.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":a=new Na[s.type](s.vertices,s.indices,s.radius,s.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":for(var u=[],l=0,c=s.shapes.length;l<c;l++)u.push(e[s.shapes[l]]);a=new Na[s.type](u,s.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":for(u=[],l=0,c=s.shapes.length;l<c;l++)u.push(e[s.shapes[l]]);var h=s.options.extrudePath;void 0!==h&&(s.options.extrudePath=(new Fs[h.type]).fromJSON(h)),a=new Na[s.type](u,s.options);break;case"BufferGeometry":a=r.parse(s);break;case"Geometry":"THREE"in window&&"LegacyJSONLoader"in THREE?a=(new THREE.LegacyJSONLoader).parse(s,this.resourcePath).geometry:console.error('THREE.ObjectLoader: You have to import LegacyJSONLoader in order load geometry data of type "Geometry".');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+s.type+'"');continue}a.uuid=s.uuid,void 0!==s.name&&(a.name=s.name),!0===a.isBufferGeometry&&void 0!==s.userData&&(a.userData=s.userData),n[s.uuid]=a}return n},parseMaterials:function(t,e){var n={},r={};if(void 0!==t){var i=new Js;i.setTextures(e);for(var o=0,a=t.length;o<a;o++){var s=t[o];if("MultiMaterial"===s.type){for(var u=[],l=0;l<s.materials.length;l++){var c=s.materials[l];void 0===n[c.uuid]&&(n[c.uuid]=i.parse(c)),u.push(n[c.uuid])}r[s.uuid]=u}else r[s.uuid]=i.parse(s),n[s.uuid]=r[s.uuid]}}return r},parseAnimations:function(t){for(var e=[],n=0;n<t.length;n++){var r=t[n],i=os.parse(r);void 0!==r.uuid&&(i.uuid=r.uuid),e.push(i)}return e},parseImages:function(t,e){var n=this,r={};function i(t){return n.manager.itemStart(t),o.load(t,function(){n.manager.itemEnd(t)},void 0,function(){n.manager.itemError(t),n.manager.itemEnd(t)})}if(void 0!==t&&t.length>0){var o=new ms(new us(e));o.setCrossOrigin(this.crossOrigin);for(var a=0,s=t.length;a<s;a++){var u=t[a],l=u.url;if(Array.isArray(l)){r[u.uuid]=[];for(var c=0,h=l.length;c<h;c++){var d=l[c],p=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(d)?d:n.resourcePath+d;r[u.uuid].push(i(p))}}else p=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u.url)?u.url:n.resourcePath+u.url,r[u.uuid]=i(p)}}return r},parseTextures:function(t,e){function n(t,e){return"number"==typeof t?t:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",t),e[t])}var r={};if(void 0!==t)for(var i=0,o=t.length;i<o;i++){var a,s=t[i];void 0===s.image&&console.warn('THREE.ObjectLoader: No "image" specified for',s.uuid),void 0===e[s.image]&&console.warn("THREE.ObjectLoader: Undefined image",s.image),(a=Array.isArray(e[s.image])?new Or(e[s.image]):new hn(e[s.image])).needsUpdate=!0,a.uuid=s.uuid,void 0!==s.name&&(a.name=s.name),void 0!==s.mapping&&(a.mapping=n(s.mapping,uu)),void 0!==s.offset&&a.offset.fromArray(s.offset),void 0!==s.repeat&&a.repeat.fromArray(s.repeat),void 0!==s.center&&a.center.fromArray(s.center),void 0!==s.rotation&&(a.rotation=s.rotation),void 0!==s.wrap&&(a.wrapS=n(s.wrap[0],lu),a.wrapT=n(s.wrap[1],lu)),void 0!==s.format&&(a.format=s.format),void 0!==s.minFilter&&(a.minFilter=n(s.minFilter,cu)),void 0!==s.magFilter&&(a.magFilter=n(s.magFilter,cu)),void 0!==s.anisotropy&&(a.anisotropy=s.anisotropy),void 0!==s.flipY&&(a.flipY=s.flipY),r[s.uuid]=a}return r},parseObject:function(t,e,n){var r;function i(t){return void 0===e[t]&&console.warn("THREE.ObjectLoader: Undefined geometry",t),e[t]}function o(t){if(void 0!==t){if(Array.isArray(t)){for(var e=[],r=0,i=t.length;r<i;r++){var o=t[r];void 0===n[o]&&console.warn("THREE.ObjectLoader: Undefined material",o),e.push(n[o])}return e}return void 0===n[t]&&console.warn("THREE.ObjectLoader: Undefined material",t),n[t]}}switch(t.type){case"Scene":r=new ro,void 0!==t.background&&Number.isInteger(t.background)&&(r.background=new An(t.background)),void 0!==t.fog&&("Fog"===t.fog.type?r.fog=new no(t.fog.color,t.fog.near,t.fog.far):"FogExp2"===t.fog.type&&(r.fog=new eo(t.fog.color,t.fog.density)));break;case"PerspectiveCamera":r=new Vi(t.fov,t.aspect,t.near,t.far),void 0!==t.focus&&(r.focus=t.focus),void 0!==t.zoom&&(r.zoom=t.zoom),void 0!==t.filmGauge&&(r.filmGauge=t.filmGauge),void 0!==t.filmOffset&&(r.filmOffset=t.filmOffset),void 0!==t.view&&(r.view=Object.assign({},t.view));break;case"OrthographicCamera":r=new Xs(t.left,t.right,t.top,t.bottom,t.near,t.far),void 0!==t.zoom&&(r.zoom=t.zoom),void 0!==t.view&&(r.view=Object.assign({},t.view));break;case"AmbientLight":r=new Zs(t.color,t.intensity);break;case"DirectionalLight":r=new Ks(t.color,t.intensity);break;case"PointLight":r=new qs(t.color,t.intensity,t.distance,t.decay);break;case"RectAreaLight":r=new Qs(t.color,t.intensity,t.width,t.height);break;case"SpotLight":r=new Ws(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay);break;case"HemisphereLight":r=new Vs(t.color,t.groundColor,t.intensity);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":var a=i(t.geometry),s=o(t.material);r=a.bones&&a.bones.length>0?new lo(a,s):new Ar(a,s);break;case"LOD":r=new uo;break;case"Line":r=new fo(i(t.geometry),o(t.material),t.mode);break;case"LineLoop":r=new vo(i(t.geometry),o(t.material));break;case"LineSegments":r=new mo(i(t.geometry),o(t.material));break;case"PointCloud":case"Points":r=new yo(i(t.geometry),o(t.material));break;case"Sprite":r=new so(o(t.material));break;case"Group":r=new Bi;break;default:r=new Gn}if(r.uuid=t.uuid,void 0!==t.name&&(r.name=t.name),void 0!==t.matrix?(r.matrix.fromArray(t.matrix),void 0!==t.matrixAutoUpdate&&(r.matrixAutoUpdate=t.matrixAutoUpdate),r.matrixAutoUpdate&&r.matrix.decompose(r.position,r.quaternion,r.scale)):(void 0!==t.position&&r.position.fromArray(t.position),void 0!==t.rotation&&r.rotation.fromArray(t.rotation),void 0!==t.quaternion&&r.quaternion.fromArray(t.quaternion),void 0!==t.scale&&r.scale.fromArray(t.scale)),void 0!==t.castShadow&&(r.castShadow=t.castShadow),void 0!==t.receiveShadow&&(r.receiveShadow=t.receiveShadow),t.shadow&&(void 0!==t.shadow.bias&&(r.shadow.bias=t.shadow.bias),void 0!==t.shadow.radius&&(r.shadow.radius=t.shadow.radius),void 0!==t.shadow.mapSize&&r.shadow.mapSize.fromArray(t.shadow.mapSize),void 0!==t.shadow.camera&&(r.shadow.camera=this.parseObject(t.shadow.camera))),void 0!==t.visible&&(r.visible=t.visible),void 0!==t.frustumCulled&&(r.frustumCulled=t.frustumCulled),void 0!==t.renderOrder&&(r.renderOrder=t.renderOrder),void 0!==t.userData&&(r.userData=t.userData),void 0!==t.layers&&(r.layers.mask=t.layers),void 0!==t.children)for(var u=t.children,l=0;l<u.length;l++)r.add(this.parseObject(u[l],e,n));if("LOD"===t.type)for(var c=t.levels,h=0;h<c.length;h++){var d=c[h],p=r.getObjectByProperty("uuid",d.object);void 0!==p&&r.addLevel(p,d.distance)}return r}});var ru,iu,ou,au,su,uu={UVMapping:bt,CubeReflectionMapping:wt,CubeRefractionMapping:xt,EquirectangularReflectionMapping:Et,EquirectangularRefractionMapping:St,SphericalReflectionMapping:Tt,CubeUVReflectionMapping:Mt,CubeUVRefractionMapping:Ct},lu={RepeatWrapping:At,ClampToEdgeWrapping:Pt,MirroredRepeatWrapping:Ot},cu={NearestFilter:Rt,NearestMipMapNearestFilter:Lt,NearestMipMapLinearFilter:It,LinearFilter:Nt,LinearMipMapNearestFilter:Dt,LinearMipMapLinearFilter:kt};function hu(t){"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.manager=void 0!==t?t:ls,this.options=void 0}function du(){this.type="ShapePath",this.color=new An,this.subPaths=[],this.currentPath=null}function pu(t){this.type="Font",this.data=t}function fu(t,e,n,r,i){var o=i.glyphs[t]||i.glyphs["?"];if(o){var a,s,u,l,c,h,d,p,f=new du;if(o.o)for(var m=o._cachedOutline||(o._cachedOutline=o.o.split(" ")),v=0,g=m.length;v<g;)switch(m[v++]){case"m":a=m[v++]*e+n,s=m[v++]*e+r,f.moveTo(a,s);break;case"l":a=m[v++]*e+n,s=m[v++]*e+r,f.lineTo(a,s);break;case"q":u=m[v++]*e+n,l=m[v++]*e+r,c=m[v++]*e+n,h=m[v++]*e+r,f.quadraticCurveTo(c,h,u,l);break;case"b":u=m[v++]*e+n,l=m[v++]*e+r,c=m[v++]*e+n,h=m[v++]*e+r,d=m[v++]*e+n,p=m[v++]*e+r,f.bezierCurveTo(c,h,d,p,u,l)}return{offsetX:o.ha*e,path:f}}}function mu(t){this.manager=void 0!==t?t:ls}function vu(){}hu.prototype={constructor:hu,setOptions:function(t){return this.options=t,this},load:function(t,e,n,r){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var i=this,o=ss.get(t);if(void 0!==o)return i.manager.itemStart(t),setTimeout(function(){e&&e(o),i.manager.itemEnd(t)},0),o;fetch(t).then(function(t){return t.blob()}).then(function(t){return createImageBitmap(t,i.options)}).then(function(n){ss.add(t,n),e&&e(n),i.manager.itemEnd(t)}).catch(function(e){r&&r(e),i.manager.itemError(t),i.manager.itemEnd(t)})},setCrossOrigin:function(){return this},setPath:function(t){return this.path=t,this}},Object.assign(du.prototype,{moveTo:function(t,e){this.currentPath=new Us,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e)},lineTo:function(t,e){this.currentPath.lineTo(t,e)},quadraticCurveTo:function(t,e,n,r){this.currentPath.quadraticCurveTo(t,e,n,r)},bezierCurveTo:function(t,e,n,r,i,o){this.currentPath.bezierCurveTo(t,e,n,r,i,o)},splineThru:function(t){this.currentPath.splineThru(t)},toShapes:function(t,e){function n(t){for(var e=[],n=0,r=t.length;n<r;n++){var i=t[n],o=new Bs;o.curves=i.curves,e.push(o)}return e}function r(t,e){for(var n=e.length,r=!1,i=n-1,o=0;o<n;i=o++){var a=e[i],s=e[o],u=s.x-a.x,l=s.y-a.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(a=e[o],u=-u,s=e[i],l=-l),t.y<a.y||t.y>s.y)continue;if(t.y===a.y){if(t.x===a.x)return!0}else{var c=l*(t.x-a.x)-u*(t.y-a.y);if(0===c)return!0;if(c<0)continue;r=!r}}else{if(t.y!==a.y)continue;if(s.x<=t.x&&t.x<=a.x||a.x<=t.x&&t.x<=s.x)return!0}}return r}var i=la.isClockWise,o=this.subPaths;if(0===o.length)return[];if(!0===e)return n(o);var a,s,u,l=[];if(1===o.length)return s=o[0],(u=new Bs).curves=s.curves,l.push(u),l;var c=!i(o[0].getPoints());c=t?!c:c;var h,d,p=[],f=[],m=[],v=0;f[v]=void 0,m[v]=[];for(var g=0,y=o.length;g<y;g++)a=i(h=(s=o[g]).getPoints()),(a=t?!a:a)?(!c&&f[v]&&v++,f[v]={s:new Bs,p:h},f[v].s.curves=s.curves,c&&v++,m[v]=[]):m[v].push({h:s,p:h[0]});if(!f[0])return n(o);if(f.length>1){for(var _=!1,b=[],w=0,x=f.length;w<x;w++)p[w]=[];for(w=0,x=f.length;w<x;w++)for(var E=m[w],S=0;S<E.length;S++){for(var T=E[S],M=!0,C=0;C<f.length;C++)r(T.p,f[C].p)&&(w!==C&&b.push({froms:w,tos:C,hole:S}),M?(M=!1,p[C].push(T)):_=!0);M&&p[w].push(T)}b.length>0&&(_||(m=p))}g=0;for(var A=f.length;g<A;g++){l.push(u=f[g].s);for(var P=0,O=(d=m[g]).length;P<O;P++)u.holes.push(d[P].h)}return l}}),Object.assign(pu.prototype,{isFont:!0,generateShapes:function(t,e){void 0===e&&(e=100);for(var n=[],r=function(t,e,n){for(var r=Array.from?Array.from(t):String(t).split(""),i=e/n.resolution,o=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*i,a=[],s=0,u=0,l=0;l<r.length;l++){var c=r[l];if("\n"===c)s=0,u-=o;else{var h=fu(c,i,s,u,n);s+=h.offsetX,a.push(h.path)}}return a}(t,e,this.data),i=0,o=r.length;i<o;i++)Array.prototype.push.apply(n,r[i].toShapes());return n}}),Object.assign(mu.prototype,{load:function(t,e,n,r){var i=this,o=new hs(this.manager);o.setPath(this.path),o.load(t,function(t){var n;try{n=JSON.parse(t)}catch(e){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),n=JSON.parse(t.substring(65,t.length-2))}var r=i.parse(n);e&&e(r)},n,r)},parse:function(t){return new pu(t)},setPath:function(t){return this.path=t,this}}),vu.Handlers={handlers:[],add:function(t,e){this.handlers.push(t,e)},get:function(t){for(var e=this.handlers,n=0,r=e.length;n<r;n+=2){var i=e[n+1];if(e[n].test(t))return i}return null}},Object.assign(vu.prototype,{crossOrigin:"anonymous",onLoadStart:function(){},onLoadProgress:function(){},onLoadComplete:function(){},initMaterials:function(t,e,n){for(var r=[],i=0;i<t.length;++i)r[i]=this.createMaterial(t[i],e,n);return r},createMaterial:(ru={NoBlending:D,NormalBlending:k,AdditiveBlending:F,SubtractiveBlending:j,MultiplyBlending:U,CustomBlending:B},iu=new An,ou=new gs,au=new Js,function(t,e,n){var r={};function i(t,i,o,a,s){var u,l=e+t,c=vu.Handlers.get(l);null!==c?u=c.load(l):(ou.setCrossOrigin(n),u=ou.load(l)),void 0!==i&&(u.repeat.fromArray(i),1!==i[0]&&(u.wrapS=At),1!==i[1]&&(u.wrapT=At)),void 0!==o&&u.offset.fromArray(o),void 0!==a&&("repeat"===a[0]&&(u.wrapS=At),"mirror"===a[0]&&(u.wrapS=Ot),"repeat"===a[1]&&(u.wrapT=At),"mirror"===a[1]&&(u.wrapT=Ot)),void 0!==s&&(u.anisotropy=s);var h=Qe.generateUUID();return r[h]=u,h}var o={uuid:Qe.generateUUID(),type:"MeshLambertMaterial"};for(var a in t){var s=t[a];switch(a){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":break;case"DbgName":o.name=s;break;case"blending":o.blending=ru[s];break;case"colorAmbient":case"mapAmbient":console.warn("THREE.Loader.createMaterial:",a,"is no longer supported.");break;case"colorDiffuse":o.color=iu.fromArray(s).getHex();break;case"colorSpecular":o.specular=iu.fromArray(s).getHex();break;case"colorEmissive":o.emissive=iu.fromArray(s).getHex();break;case"specularCoef":o.shininess=s;break;case"shading":"basic"===s.toLowerCase()&&(o.type="MeshBasicMaterial"),"phong"===s.toLowerCase()&&(o.type="MeshPhongMaterial"),"standard"===s.toLowerCase()&&(o.type="MeshStandardMaterial");break;case"mapDiffuse":o.map=i(s,t.mapDiffuseRepeat,t.mapDiffuseOffset,t.mapDiffuseWrap,t.mapDiffuseAnisotropy);break;case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":break;case"mapEmissive":o.emissiveMap=i(s,t.mapEmissiveRepeat,t.mapEmissiveOffset,t.mapEmissiveWrap,t.mapEmissiveAnisotropy);break;case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":break;case"mapLight":o.lightMap=i(s,t.mapLightRepeat,t.mapLightOffset,t.mapLightWrap,t.mapLightAnisotropy);break;case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":break;case"mapAO":o.aoMap=i(s,t.mapAORepeat,t.mapAOOffset,t.mapAOWrap,t.mapAOAnisotropy);break;case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":break;case"mapBump":o.bumpMap=i(s,t.mapBumpRepeat,t.mapBumpOffset,t.mapBumpWrap,t.mapBumpAnisotropy);break;case"mapBumpScale":o.bumpScale=s;break;case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":break;case"mapNormal":o.normalMap=i(s,t.mapNormalRepeat,t.mapNormalOffset,t.mapNormalWrap,t.mapNormalAnisotropy);break;case"mapNormalFactor":o.normalScale=s;break;case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":break;case"mapSpecular":o.specularMap=i(s,t.mapSpecularRepeat,t.mapSpecularOffset,t.mapSpecularWrap,t.mapSpecularAnisotropy);break;case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":break;case"mapMetalness":o.metalnessMap=i(s,t.mapMetalnessRepeat,t.mapMetalnessOffset,t.mapMetalnessWrap,t.mapMetalnessAnisotropy);break;case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":break;case"mapRoughness":o.roughnessMap=i(s,t.mapRoughnessRepeat,t.mapRoughnessOffset,t.mapRoughnessWrap,t.mapRoughnessAnisotropy);break;case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":break;case"mapAlpha":o.alphaMap=i(s,t.mapAlphaRepeat,t.mapAlphaOffset,t.mapAlphaWrap,t.mapAlphaAnisotropy);break;case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"flipSided":o.side=A;break;case"doubleSided":o.side=P;break;case"transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity"),o.opacity=s;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":o[a]=s;break;case"vertexColors":!0===s&&(o.vertexColors=N),"face"===s&&(o.vertexColors=I);break;default:console.error("THREE.Loader.createMaterial: Unsupported",a,s)}}return"MeshBasicMaterial"===o.type&&delete o.emissive,"MeshPhongMaterial"!==o.type&&delete o.specular,o.opacity<1&&(o.transparent=!0),au.setTextures(r),au.parse(o)})});var gu,yu,_u,bu,wu,xu,Eu,Su,Tu,Mu,Cu,Au,Pu,Ou,Ru,Lu,Iu,Nu,Du,ku,Fu,ju,Uu,Bu,Gu,Vu={getContext:function(){return void 0===su&&(su=new(window.AudioContext||window.webkitAudioContext)),su},setContext:function(t){su=t}};function zu(t){this.manager=void 0!==t?t:ls}function Hu(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Vi,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Vi,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1}function Wu(t,e,n,r){Gn.call(this),this.type="CubeCamera";var i=new Vi(90,1,t,e);i.up.set(0,-1,0),i.lookAt(new en(1,0,0)),this.add(i);var o=new Vi(90,1,t,e);o.up.set(0,-1,0),o.lookAt(new en(-1,0,0)),this.add(o);var a=new Vi(90,1,t,e);a.up.set(0,0,1),a.lookAt(new en(0,1,0)),this.add(a);var s=new Vi(90,1,t,e);s.up.set(0,0,-1),s.lookAt(new en(0,-1,0)),this.add(s);var u=new Vi(90,1,t,e);u.up.set(0,-1,0),u.lookAt(new en(0,0,1)),this.add(u);var l=new Vi(90,1,t,e);l.up.set(0,-1,0),l.lookAt(new en(0,0,-1)),this.add(l),this.renderTarget=new fn(n,n,r=r||{format:Zt,magFilter:Nt,minFilter:Nt}),this.renderTarget.texture.name="CubeCamera",this.update=function(t,e){null===this.parent&&this.updateMatrixWorld();var n=this.renderTarget,r=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,n.activeCubeFace=0,t.render(e,i,n),n.activeCubeFace=1,t.render(e,o,n),n.activeCubeFace=2,t.render(e,a,n),n.activeCubeFace=3,t.render(e,s,n),n.activeCubeFace=4,t.render(e,u,n),n.texture.generateMipmaps=r,n.activeCubeFace=5,t.render(e,l,n),t.setRenderTarget(null)},this.clear=function(t,e,n,r){for(var i=this.renderTarget,o=0;o<6;o++)i.activeCubeFace=o,t.setRenderTarget(i),t.clear(e,n,r);t.setRenderTarget(null)}}function qu(t){this.autoStart=void 0===t||t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}function Xu(){Gn.call(this),this.type="AudioListener",this.context=Vu.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0}function Yu(t){Gn.call(this),this.type="Audio",this.listener=t,this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.startTime=0,this.offset=0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filters=[]}function Ku(t){Yu.call(this,t),this.panner=this.context.createPanner(),this.panner.connect(this.gain)}function Zu(t,e){this.analyser=t.context.createAnalyser(),this.analyser.fftSize=void 0!==e?e:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}function Qu(t,e,n){this.binding=t,this.valueSize=n;var r,i=Float64Array;switch(e){case"quaternion":r=this._slerp;break;case"string":case"bool":i=Array,r=this._select;break;default:r=this._lerp}this.buffer=new i(4*n),this._mixBufferRegion=r,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0}function Ju(t,e,n){var r=n||$u.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,r)}function $u(t,e,n){this.path=e,this.parsedPath=n||$u.parseTrackName(e),this.node=$u.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t}function tl(){this.uuid=Qe.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var t={};this._indicesByUUID=t;for(var e=0,n=arguments.length;e!==n;++e)t[arguments[e].uuid]=e;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var r=this;this.stats={objects:{get total(){return r._objects.length},get inUse(){return this.total-r.nCachedObjects_}},get bindingsPerObject(){return r._bindings.length}}}function el(t,e,n){this._mixer=t,this._clip=e,this._localRoot=n||null;for(var r=e.tracks,i=r.length,o=new Array(i),a={endingStart:Ie,endingEnd:Ie},s=0;s!==i;++s){var u=r[s].createInterpolant(null);o[s]=u,u.settings=a}this._interpolantSettings=a,this._interpolants=o,this._propertyBindings=new Array(i),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Ae,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}function nl(t){this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}function rl(t){"string"==typeof t&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),t=arguments[1]),this.value=t}function il(){or.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function ol(t,e,n){io.call(this,t,e),this.meshPerAttribute=n||1}function al(t,e,n,r){"number"==typeof n&&(r=n,n=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),qn.call(this,t,e,n),this.meshPerAttribute=r||1}function sl(t,e,n,r){this.ray=new Tr(t,e),this.near=n||0,this.far=r||1/0,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function ul(t,e){return t.distance-e.distance}function ll(t,e,n,r){if(!1!==t.visible&&(t.raycast(e,n),!0===r))for(var i=t.children,o=0,a=i.length;o<a;o++)ll(i[o],e,n,!0)}function cl(t,e,n){return this.radius=void 0!==t?t:1,this.phi=void 0!==e?e:0,this.theta=void 0!==n?n:0,this}function hl(t,e,n){return this.radius=void 0!==t?t:1,this.theta=void 0!==e?e:0,this.y=void 0!==n?n:0,this}function dl(t,e){this.min=void 0!==t?t:new Je(1/0,1/0),this.max=void 0!==e?e:new Je(-1/0,-1/0)}function pl(t,e){this.start=void 0!==t?t:new en,this.end=void 0!==e?e:new en}function fl(t){Gn.call(this),this.material=t,this.render=function(){}}function ml(t,e,n,r){this.object=t,this.size=void 0!==e?e:1;var i=void 0!==n?n:16711680,o=void 0!==r?r:1,a=0,s=this.object.geometry;s&&s.isGeometry?a=3*s.faces.length:s&&s.isBufferGeometry&&(a=s.attributes.normal.count);var u=new or,l=new tr(2*a*3,3);u.addAttribute("position",l),mo.call(this,u,new po({color:i,linewidth:o})),this.matrixAutoUpdate=!1,this.update()}function vl(t,e){Gn.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=e;for(var n=new or,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],i=0,o=1;i<32;i++,o++){var a=i/32*Math.PI*2,s=o/32*Math.PI*2;r.push(Math.cos(a),Math.sin(a),1,Math.cos(s),Math.sin(s),1)}n.addAttribute("position",new tr(r,3));var u=new po({fog:!1});this.cone=new mo(n,u),this.add(this.cone),this.update()}function gl(t){for(var e=function t(e){var n=[];e&&e.isBone&&n.push(e);for(var r=0;r<e.children.length;r++)n.push.apply(n,t(e.children[r]));return n}(t),n=new or,r=[],i=[],o=new An(0,0,1),a=new An(0,1,0),s=0;s<e.length;s++){var u=e[s];u.parent&&u.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),i.push(o.r,o.g,o.b),i.push(a.r,a.g,a.b))}n.addAttribute("position",new tr(r,3)),n.addAttribute("color",new tr(i,3));var l=new po({vertexColors:N,depthTest:!1,depthWrite:!1,transparent:!0});mo.call(this,n,l),this.root=t,this.bones=e,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1}function yl(t,e,n){this.light=t,this.light.updateMatrixWorld(),this.color=n;var r=new _a(e,4,2),i=new Cr({wireframe:!0,fog:!1});Ar.call(this,r,i),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function _l(t,e){Gn.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=e;var n=new po({fog:!1}),r=new or;r.addAttribute("position",new qn(new Float32Array(15),3)),this.line=new fo(r,n),this.add(this.line),this.update()}function bl(t,e,n){Gn.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n;var r=new Ro(e);r.rotateY(.5*Math.PI),this.material=new Cr({wireframe:!0,fog:!1}),void 0===this.color&&(this.material.vertexColors=N);var i=r.getAttribute("position"),o=new Float32Array(3*i.count);r.addAttribute("color",new qn(o,3)),this.add(new Ar(r,this.material)),this.update()}function wl(t,e,n,r){t=t||10,e=e||10,n=new An(void 0!==n?n:4473924),r=new An(void 0!==r?r:8947848);for(var i=e/2,o=t/e,a=t/2,s=[],u=[],l=0,c=0,h=-a;l<=e;l++,h+=o){s.push(-a,0,h,a,0,h),s.push(h,0,-a,h,0,a);var d=l===i?n:r;d.toArray(u,c),d.toArray(u,c+=3),d.toArray(u,c+=3),d.toArray(u,c+=3),c+=3}var p=new or;p.addAttribute("position",new tr(s,3)),p.addAttribute("color",new tr(u,3));var f=new po({vertexColors:N});mo.call(this,p,f)}function xl(t,e,n,r,i,o){t=t||10,e=e||16,n=n||8,r=r||64,i=new An(void 0!==i?i:4473924),o=new An(void 0!==o?o:8947848);var a,s,u,l,c,h,d,p=[],f=[];for(l=0;l<=e;l++)u=l/e*(2*Math.PI),a=Math.sin(u)*t,s=Math.cos(u)*t,p.push(0,0,0),p.push(a,0,s),f.push((d=1&l?i:o).r,d.g,d.b),f.push(d.r,d.g,d.b);for(l=0;l<=n;l++)for(d=1&l?i:o,h=t-t/n*l,c=0;c<r;c++)u=c/r*(2*Math.PI),a=Math.sin(u)*h,s=Math.cos(u)*h,p.push(a,0,s),f.push(d.r,d.g,d.b),u=(c+1)/r*(2*Math.PI),a=Math.sin(u)*h,s=Math.cos(u)*h,p.push(a,0,s),f.push(d.r,d.g,d.b);var m=new or;m.addAttribute("position",new tr(p,3)),m.addAttribute("color",new tr(f,3));var v=new po({vertexColors:N});mo.call(this,m,v)}function El(t,e,n,r){this.object=t,this.size=void 0!==e?e:1;var i=void 0!==n?n:16776960,o=void 0!==r?r:1,a=0,s=this.object.geometry;s&&s.isGeometry?a=s.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");var u=new or,l=new tr(2*a*3,3);u.addAttribute("position",l),mo.call(this,u,new po({color:i,linewidth:o})),this.matrixAutoUpdate=!1,this.update()}function Sl(t,e,n){Gn.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,void 0===e&&(e=1);var r=new or;r.addAttribute("position",new tr([-e,e,0,e,e,0,e,-e,0,-e,-e,0,-e,e,0],3));var i=new po({fog:!1});this.lightPlane=new fo(r,i),this.add(this.lightPlane),(r=new or).addAttribute("position",new tr([0,0,0,0,0,1],3)),this.targetLine=new fo(r,i),this.add(this.targetLine),this.update()}function Tl(t){var e=new or,n=new po({color:16777215,vertexColors:I}),r=[],i=[],o={},a=new An(16755200),s=new An(16711680),u=new An(43775),l=new An(16777215),c=new An(3355443);function h(t,e,n){d(t,n),d(e,n)}function d(t,e){r.push(0,0,0),i.push(e.r,e.g,e.b),void 0===o[t]&&(o[t]=[]),o[t].push(r.length/3-1)}h("n1","n2",a),h("n2","n4",a),h("n4","n3",a),h("n3","n1",a),h("f1","f2",a),h("f2","f4",a),h("f4","f3",a),h("f3","f1",a),h("n1","f1",a),h("n2","f2",a),h("n3","f3",a),h("n4","f4",a),h("p","n1",s),h("p","n2",s),h("p","n3",s),h("p","n4",s),h("u1","u2",u),h("u2","u3",u),h("u3","u1",u),h("c","t",l),h("p","c",c),h("cn1","cn2",c),h("cn3","cn4",c),h("cf1","cf2",c),h("cf3","cf4",c),e.addAttribute("position",new tr(r,3)),e.addAttribute("color",new tr(i,3)),mo.call(this,e,n),this.camera=t,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update()}function Ml(t,e){this.object=t,void 0===e&&(e=16776960);var n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),i=new or;i.setIndex(new qn(n,1)),i.addAttribute("position",new qn(r,3)),mo.call(this,i,new po({color:e})),this.matrixAutoUpdate=!1,this.update()}function Cl(t,e){this.type="Box3Helper",this.box=t;var n=void 0!==e?e:16776960,r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new or;i.setIndex(new qn(r,1)),i.addAttribute("position",new tr([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),mo.call(this,i,new po({color:n})),this.geometry.computeBoundingSphere()}function Al(t,e,n){this.type="PlaneHelper",this.plane=t,this.size=void 0===e?1:e;var r=void 0!==n?n:16776960,i=new or;i.addAttribute("position",new tr([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),i.computeBoundingSphere(),fo.call(this,i,new po({color:r}));var o=new or;o.addAttribute("position",new tr([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),o.computeBoundingSphere(),this.add(new Ar(o,new Cr({color:r,opacity:.2,transparent:!0,depthWrite:!1})))}function Pl(t,e,n,r,i,o){Gn.call(this),void 0===t&&(t=new THREE.Vector3(0,0,1)),void 0===e&&(e=new THREE.Vector3(0,0,0)),void 0===n&&(n=1),void 0===r&&(r=16776960),void 0===i&&(i=.2*n),void 0===o&&(o=.2*i),void 0===ju&&((ju=new or).addAttribute("position",new tr([0,0,0,0,1,0],3)),(Uu=new Pa(0,.5,1,5,1)).translate(0,-.5,0)),this.position.copy(e),this.line=new fo(ju,new po({color:r})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Ar(Uu,new Cr({color:r})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(t),this.setLength(n,i,o)}function Ol(t){var e=[0,0,0,t=t||1,0,0,0,0,0,0,t,0,0,0,0,0,0,t],n=new or;n.addAttribute("position",new tr(e,3)),n.addAttribute("color",new tr([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));var r=new po({vertexColors:N});mo.call(this,n,r)}function Rl(t,e,n,r,i,o,a){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new In(t,e,n,i,o,a)}Object.assign(zu.prototype,{load:function(t,e,n,r){var i=new hs(this.manager);i.setResponseType("arraybuffer"),i.setPath(this.path),i.load(t,function(t){var n=t.slice(0);Vu.getContext().decodeAudioData(n,function(t){e(t)})},n,r)},setPath:function(t){return this.path=t,this}}),Object.assign(Hu.prototype,{update:(Tu=new $e,Mu=new $e,function(t){if(gu!==this||yu!==t.focus||_u!==t.fov||bu!==t.aspect*this.aspect||wu!==t.near||xu!==t.far||Eu!==t.zoom||Su!==this.eyeSep){gu=this,yu=t.focus,_u=t.fov,bu=t.aspect*this.aspect,wu=t.near,xu=t.far,Eu=t.zoom;var e,n,r=t.projectionMatrix.clone(),i=(Su=this.eyeSep/2)*wu/yu,o=wu*Math.tan(Qe.DEG2RAD*_u*.5)/Eu;Mu.elements[12]=-Su,Tu.elements[12]=Su,r.elements[0]=2*wu/((n=o*bu+i)-(e=-o*bu+i)),r.elements[8]=(n+e)/(n-e),this.cameraL.projectionMatrix.copy(r),r.elements[0]=2*wu/((n=o*bu-i)-(e=-o*bu-i)),r.elements[8]=(n+e)/(n-e),this.cameraR.projectionMatrix.copy(r)}this.cameraL.matrixWorld.copy(t.matrixWorld).multiply(Mu),this.cameraR.matrixWorld.copy(t.matrixWorld).multiply(Tu)})}),(Wu.prototype=Object.create(Gn.prototype)).constructor=Wu,Object.assign(qu.prototype,{start:function(){this.startTime=("undefined"==typeof performance?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var e=("undefined"==typeof performance?Date:performance).now();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}}),Xu.prototype=Object.assign(Object.create(Gn.prototype),{constructor:Xu,getInput:function(){return this.gain},removeFilter:function(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this},getFilter:function(){return this.filter},setFilter:function(t){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this},updateMatrixWorld:function(){var t=new en,e=new tn,n=new en,r=new en,i=new qu;return function(o){Gn.prototype.updateMatrixWorld.call(this,o);var a=this.context.listener,s=this.up;if(this.timeDelta=i.getDelta(),this.matrixWorld.decompose(t,e,n),r.set(0,0,-1).applyQuaternion(e),a.positionX){var u=this.context.currentTime+this.timeDelta;a.positionX.linearRampToValueAtTime(t.x,u),a.positionY.linearRampToValueAtTime(t.y,u),a.positionZ.linearRampToValueAtTime(t.z,u),a.forwardX.linearRampToValueAtTime(r.x,u),a.forwardY.linearRampToValueAtTime(r.y,u),a.forwardZ.linearRampToValueAtTime(r.z,u),a.upX.linearRampToValueAtTime(s.x,u),a.upY.linearRampToValueAtTime(s.y,u),a.upZ.linearRampToValueAtTime(s.z,u)}else a.setPosition(t.x,t.y,t.z),a.setOrientation(r.x,r.y,r.z,s.x,s.y,s.z)}}()}),Yu.prototype=Object.assign(Object.create(Gn.prototype),{constructor:Yu,getOutput:function(){return this.gain},setNodeSource:function(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this},setMediaElementSource:function(t){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(t),this.connect(),this},setBuffer:function(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(){if(!0!==this.isPlaying){if(!1!==this.hasPlaybackControl){var t=this.context.createBufferSource();return t.buffer=this.buffer,t.detune.value=this.detune,t.loop=this.loop,t.onended=this.onEnded.bind(this),t.playbackRate.setValueAtTime(this.playbackRate,this.startTime),this.startTime=this.context.currentTime,t.start(this.startTime,this.offset),this.isPlaying=!0,this.source=t,this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}else console.warn("THREE.Audio: Audio is already playing.")},pause:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this.source.stop(),this.source.onended=null,this.offset+=(this.context.currentTime-this.startTime)*this.playbackRate,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")},stop:function(){if(!1!==this.hasPlaybackControl)return this.source.stop(),this.source.onended=null,this.offset=0,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(t){return t||(t=[]),!0===this.isPlaying?(this.disconnect(),this.filters=t,this.connect()):this.filters=t,this},setDetune:function(t){return this.detune=t,!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this},getDetune:function(){return this.detune},getFilter:function(){return this.getFilters()[0]},setFilter:function(t){return this.setFilters(t?[t]:[])},setPlaybackRate:function(t){if(!1!==this.hasPlaybackControl)return this.playbackRate=t,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(t){if(!1!==this.hasPlaybackControl)return this.loop=t,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")},getVolume:function(){return this.gain.gain.value},setVolume:function(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}}),Ku.prototype=Object.assign(Object.create(Yu.prototype),{constructor:Ku,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(t){return this.panner.refDistance=t,this},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(t){return this.panner.rolloffFactor=t,this},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(t){return this.panner.distanceModel=t,this},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(t){return this.panner.maxDistance=t,this},setDirectionalCone:function(t,e,n){return this.panner.coneInnerAngle=t,this.panner.coneOuterAngle=e,this.panner.coneOuterGain=n,this},updateMatrixWorld:function(){var t=new en,e=new tn,n=new en,r=new en;return function(i){Gn.prototype.updateMatrixWorld.call(this,i);var o=this.panner;if(this.matrixWorld.decompose(t,e,n),r.set(0,0,1).applyQuaternion(e),o.positionX){var a=this.context.currentTime+this.listener.timeDelta;o.positionX.linearRampToValueAtTime(t.x,a),o.positionY.linearRampToValueAtTime(t.y,a),o.positionZ.linearRampToValueAtTime(t.z,a),o.orientationX.linearRampToValueAtTime(r.x,a),o.orientationY.linearRampToValueAtTime(r.y,a),o.orientationZ.linearRampToValueAtTime(r.z,a)}else o.setPosition(t.x,t.y,t.z),o.setOrientation(r.x,r.y,r.z)}}()}),Object.assign(Zu.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var t=0,e=this.getFrequencyData(),n=0;n<e.length;n++)t+=e[n];return t/e.length}}),Object.assign(Qu.prototype,{accumulate:function(t,e){var n=this.buffer,r=this.valueSize,i=t*r+r,o=this.cumulativeWeight;if(0===o){for(var a=0;a!==r;++a)n[i+a]=n[a];o=e}else this._mixBufferRegion(n,i,0,e/(o+=e),r);this.cumulativeWeight=o},apply:function(t){var e=this.valueSize,n=this.buffer,r=t*e+e,i=this.cumulativeWeight,o=this.binding;this.cumulativeWeight=0,i<1&&this._mixBufferRegion(n,r,3*e,1-i,e);for(var a=e,s=e+e;a!==s;++a)if(n[a]!==n[a+e]){o.setValue(n,r);break}},saveOriginalState:function(){var t=this.buffer,e=this.valueSize,n=3*e;this.binding.getValue(t,n);for(var r=e,i=n;r!==i;++r)t[r]=t[n+r%e];this.cumulativeWeight=0},restoreOriginalState:function(){this.binding.setValue(this.buffer,3*this.valueSize)},_select:function(t,e,n,r,i){if(r>=.5)for(var o=0;o!==i;++o)t[e+o]=t[n+o]},_slerp:function(t,e,n,r){tn.slerpFlat(t,e,t,e,t,n,r)},_lerp:function(t,e,n,r,i){for(var o=1-r,a=0;a!==i;++a){var s=e+a;t[s]=t[s]*o+t[n+a]*r}}}),Object.assign(Ju.prototype,{getValue:function(t,e){this.bind();var n=this._bindings[this._targetGroup.nCachedObjects_];void 0!==n&&n.getValue(t,e)},setValue:function(t,e){for(var n=this._bindings,r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(t,e)},bind:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].bind()},unbind:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].unbind()}}),Object.assign($u,{Composite:Ju,create:function(t,e,n){return t&&t.isAnimationObjectGroup?new $u.Composite(t,e,n):new $u(t,e,n)},sanitizeNodeName:(Du=new RegExp("[\\[\\]\\.:\\/]","g"),function(t){return t.replace(/\s/g,"_").replace(Du,"")}),parseTrackName:(Cu="[^\\[\\]\\.:\\/]",Au="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",Pu=/((?:WC+[\/:])*)/.source.replace("WC",Cu),Ou=/(WCOD+)?/.source.replace("WCOD",Au),Ru=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Cu),Lu=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Cu),Iu=new RegExp("^"+Pu+Ou+Ru+Lu+"$"),Nu=["material","materials","bones"],function(t){var e=Iu.exec(t);if(!e)throw new Error("PropertyBinding: Cannot parse trackName: "+t);var n={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){var i=n.nodeName.substring(r+1);-1!==Nu.indexOf(i)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=i)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return n}),findNode:function(t,e){if(!e||""===e||"root"===e||"."===e||-1===e||e===t.name||e===t.uuid)return t;if(t.skeleton){var n=t.skeleton.getBoneByName(e);if(void 0!==n)return n}if(t.children){var r=function(t){for(var n=0;n<t.length;n++){var i=t[n];if(i.name===e||i.uuid===e)return i;var o=r(i.children);if(o)return o}return null},i=r(t.children);if(i)return i}return null}}),Object.assign($u.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(t,e){t[e]=this.node[this.propertyName]},function(t,e){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)t[e++]=n[r]},function(t,e){t[e]=this.resolvedProperty[this.propertyIndex]},function(t,e){this.resolvedProperty.toArray(t,e)}],SetterByBindingTypeAndVersioning:[[function(t,e){this.targetObject[this.propertyName]=t[e]},function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=t[e++]},function(t,e){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=t[e++];this.targetObject.needsUpdate=!0},function(t,e){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty[this.propertyIndex]=t[e]},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty.fromArray(t,e)},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(t,e){this.bind(),this.getValue(t,e)},setValue:function(t,e){this.bind(),this.setValue(t,e)},bind:function(){var t=this.node,e=this.parsedPath,n=e.objectName,r=e.propertyName,i=e.propertyIndex;if(t||(t=$u.findNode(this.rootNode,e.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,t){if(n){var o=e.objectIndex;switch(n){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(var a=0;a<t.length;a++)if(t[a].name===o){o=a;break}break;default:if(void 0===t[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[n]}if(void 0!==o){if(void 0===t[o])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[o]}}var s=t[r];if(void 0!==s){var u=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?u=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(u=this.Versioning.MatrixWorldNeedsUpdate);var l=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===r){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(t.geometry.isBufferGeometry){if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);for(a=0;a<this.node.geometry.morphAttributes.position.length;a++)if(t.geometry.morphAttributes.position[a].name===i){i=a;break}}else{if(!t.geometry.morphTargets)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.",this);for(a=0;a<this.node.geometry.morphTargets.length;a++)if(t.geometry.morphTargets[a].name===i){i=a;break}}}l=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=i}else void 0!==s.fromArray&&void 0!==s.toArray?(l=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(l=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=r;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][u]}else console.error("THREE.PropertyBinding: Trying to update property for track: "+e.nodeName+"."+r+" but it wasn't found.",t)}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign($u.prototype,{_getValue_unbound:$u.prototype.getValue,_setValue_unbound:$u.prototype.setValue}),Object.assign(tl.prototype,{isAnimationObjectGroup:!0,add:function(){for(var t=this._objects,e=t.length,n=this.nCachedObjects_,r=this._indicesByUUID,i=this._paths,o=this._parsedPaths,a=this._bindings,s=a.length,u=void 0,l=0,c=arguments.length;l!==c;++l){var h=arguments[l],d=h.uuid,p=r[d];if(void 0===p){p=e++,r[d]=p,t.push(h);for(var f=0,m=s;f!==m;++f)a[f].push(new $u(h,i[f],o[f]))}else if(p<n){u=t[p];var v=--n,g=t[v];for(r[g.uuid]=p,t[p]=g,r[d]=v,t[v]=h,f=0,m=s;f!==m;++f){var y=a[f],_=y[p];y[p]=y[v],void 0===_&&(_=new $u(h,i[f],o[f])),y[v]=_}}else t[p]!==u&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=n},remove:function(){for(var t=this._objects,e=this.nCachedObjects_,n=this._indicesByUUID,r=this._bindings,i=r.length,o=0,a=arguments.length;o!==a;++o){var s=arguments[o],u=s.uuid,l=n[u];if(void 0!==l&&l>=e){var c=e++,h=t[c];n[h.uuid]=l,t[l]=h,n[u]=c,t[c]=s;for(var d=0,p=i;d!==p;++d){var f=r[d],m=f[l];f[l]=f[c],f[c]=m}}}this.nCachedObjects_=e},uncache:function(){for(var t=this._objects,e=t.length,n=this.nCachedObjects_,r=this._indicesByUUID,i=this._bindings,o=i.length,a=0,s=arguments.length;a!==s;++a){var u=arguments[a].uuid,l=r[u];if(void 0!==l)if(delete r[u],l<n){var c=--n,h=t[c],d=t[v=--e];r[h.uuid]=l,t[l]=h,r[d.uuid]=c,t[c]=d,t.pop();for(var p=0,f=o;p!==f;++p){var m=(g=i[p])[v];g[l]=g[c],g[c]=m,g.pop()}}else{var v;for(r[(d=t[v=--e]).uuid]=l,t[l]=d,t.pop(),p=0,f=o;p!==f;++p){var g;(g=i[p])[l]=g[v],g.pop()}}}this.nCachedObjects_=n},subscribe_:function(t,e){var n=this._bindingsIndicesByPath,r=n[t],i=this._bindings;if(void 0!==r)return i[r];var o=this._paths,a=this._parsedPaths,s=this._objects,u=this.nCachedObjects_,l=new Array(s.length);n[t]=r=i.length,o.push(t),a.push(e),i.push(l);for(var c=u,h=s.length;c!==h;++c)l[c]=new $u(s[c],t,e);return l},unsubscribe_:function(t){var e=this._bindingsIndicesByPath,n=e[t];if(void 0!==n){var r=this._paths,i=this._parsedPaths,o=this._bindings,a=o.length-1,s=o[a];e[t[a]]=n,o[n]=s,o.pop(),i[n]=i[a],i.pop(),r[n]=r[a],r.pop()}}}),Object.assign(el.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(t){return this._startTime=t,this},setLoop:function(t,e){return this.loop=t,this.repetitions=e,this},setEffectiveWeight:function(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(t){return this._scheduleFading(t,0,1)},fadeOut:function(t){return this._scheduleFading(t,1,0)},crossFadeFrom:function(t,e,n){if(t.fadeOut(e),this.fadeIn(e),n){var r=this._clip.duration,i=t._clip.duration,o=r/i;t.warp(1,i/r,e),this.warp(o,1,e)}return this},crossFadeTo:function(t,e,n){return t.crossFadeFrom(this,e,n)},stopFading:function(){var t=this._weightInterpolant;return null!==t&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},setEffectiveTimeScale:function(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(t){return this.timeScale=this._clip.duration/t,this.stopWarping()},syncWith:function(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()},halt:function(t){return this.warp(this._effectiveTimeScale,0,t)},warp:function(t,e,n){var r=this._mixer,i=r.time,o=this._timeScaleInterpolant,a=this.timeScale;null===o&&(o=r._lendControlInterpolant(),this._timeScaleInterpolant=o);var s=o.parameterPositions,u=o.sampleValues;return s[0]=i,s[1]=i+n,u[0]=t/a,u[1]=e/a,this},stopWarping:function(){var t=this._timeScaleInterpolant;return null!==t&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(t,e,n,r){if(this.enabled){var i=this._startTime;if(null!==i){var o=(t-i)*n;if(o<0||0===n)return;this._startTime=null,e=n*o}e*=this._updateTimeScale(t);var a=this._updateTime(e),s=this._updateWeight(t);if(s>0)for(var u=this._interpolants,l=this._propertyBindings,c=0,h=u.length;c!==h;++c)u[c].evaluate(a),l[c].accumulate(r,s)}else this._updateWeight(t)},_updateWeight:function(t){var e=0;if(this.enabled){e=this.weight;var n=this._weightInterpolant;if(null!==n){var r=n.evaluate(t)[0];e*=r,t>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=e,e},_updateTimeScale:function(t){var e=0;if(!this.paused){e=this.timeScale;var n=this._timeScaleInterpolant;null!==n&&(e*=n.evaluate(t)[0],t>n.parameterPositions[1]&&(this.stopWarping(),0===e?this.paused=!0:this.timeScale=e))}return this._effectiveTimeScale=e,e},_updateTime:function(t){var e=this.time+t,n=this._clip.duration,r=this.loop,i=this._loopCount,o=r===Pe;if(0===t)return-1===i?e:o&&1==(1&i)?n-e:e;if(r===Ce){-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1));t:{if(e>=n)e=n;else{if(!(e<0))break t;e=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(-1===i&&(t>=0?(i=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),e>=n||e<0){var a=Math.floor(e/n);e-=n*a,i+=Math.abs(a);var s=this.repetitions-i;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,e=t>0?n:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(1===s){var u=t<0;this._setEndings(u,!u,o)}else this._setEndings(!1,!1,o);this._loopCount=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}if(o&&1==(1&i))return this.time=e,n-e}return this.time=e,e},_setEndings:function(t,e,n){var r=this._interpolantSettings;n?(r.endingStart=Ne,r.endingEnd=Ne):(r.endingStart=t?this.zeroSlopeAtStart?Ne:Ie:De,r.endingEnd=e?this.zeroSlopeAtEnd?Ne:Ie:De)},_scheduleFading:function(t,e,n){var r=this._mixer,i=r.time,o=this._weightInterpolant;null===o&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);var a=o.parameterPositions,s=o.sampleValues;return a[0]=i,s[0]=e,a[1]=i+t,s[1]=n,this}}),nl.prototype=Object.assign(Object.create(r.prototype),{constructor:nl,_bindAction:function(t,e){var n=t._localRoot||this._root,r=t._clip.tracks,i=r.length,o=t._propertyBindings,a=t._interpolants,s=n.uuid,u=this._bindingsByRootAndName,l=u[s];void 0===l&&(u[s]=l={});for(var c=0;c!==i;++c){var h=r[c],d=h.name,p=l[d];if(void 0!==p)o[c]=p;else{if(void 0!==(p=o[c])){null===p._cacheIndex&&(++p.referenceCount,this._addInactiveBinding(p,s,d));continue}++(p=new Qu($u.create(n,d,e&&e._propertyBindings[c].binding.parsedPath),h.ValueTypeName,h.getValueSize())).referenceCount,this._addInactiveBinding(p,s,d),o[c]=p}a[c].resultBuffer=p.buffer}},_activateAction:function(t){if(!this._isActiveAction(t)){if(null===t._cacheIndex){var e=(t._localRoot||this._root).uuid,n=t._clip.uuid,r=this._actionsByClip[n];this._bindAction(t,r&&r.knownActions[0]),this._addInactiveAction(t,n,e)}for(var i=t._propertyBindings,o=0,a=i.length;o!==a;++o){var s=i[o];0==s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(t)}},_deactivateAction:function(t){if(this._isActiveAction(t)){for(var e=t._propertyBindings,n=0,r=e.length;n!==r;++n){var i=e[n];0==--i.useCount&&(i.restoreOriginalState(),this._takeBackBinding(i))}this._takeBackAction(t)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}},_isActiveAction:function(t){var e=t._cacheIndex;return null!==e&&e<this._nActiveActions},_addInactiveAction:function(t,e,n){var r=this._actions,i=this._actionsByClip,o=i[e];if(void 0===o)o={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,i[e]=o;else{var a=o.knownActions;t._byClipCacheIndex=a.length,a.push(t)}t._cacheIndex=r.length,r.push(t),o.actionByRoot[n]=t},_removeInactiveAction:function(t){var e=this._actions,n=e[e.length-1],r=t._cacheIndex;n._cacheIndex=r,e[r]=n,e.pop(),t._cacheIndex=null;var i=t._clip.uuid,o=this._actionsByClip,a=o[i],s=a.knownActions,u=s[s.length-1],l=t._byClipCacheIndex;u._byClipCacheIndex=l,s[l]=u,s.pop(),t._byClipCacheIndex=null,delete a.actionByRoot[(t._localRoot||this._root).uuid],0===s.length&&delete o[i],this._removeInactiveBindingsForAction(t)},_removeInactiveBindingsForAction:function(t){for(var e=t._propertyBindings,n=0,r=e.length;n!==r;++n){var i=e[n];0==--i.referenceCount&&this._removeInactiveBinding(i)}},_lendAction:function(t){var e=this._actions,n=t._cacheIndex,r=this._nActiveActions++,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=n,e[n]=i},_takeBackAction:function(t){var e=this._actions,n=t._cacheIndex,r=--this._nActiveActions,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=n,e[n]=i},_addInactiveBinding:function(t,e,n){var r=this._bindingsByRootAndName,i=r[e],o=this._bindings;void 0===i&&(r[e]=i={}),i[n]=t,t._cacheIndex=o.length,o.push(t)},_removeInactiveBinding:function(t){var e=this._bindings,n=t.binding,r=n.rootNode.uuid,i=n.path,o=this._bindingsByRootAndName,a=o[r],s=e[e.length-1],u=t._cacheIndex;s._cacheIndex=u,e[u]=s,e.pop(),delete a[i];t:{for(var l in a)break t;delete o[r]}},_lendBinding:function(t){var e=this._bindings,n=t._cacheIndex,r=this._nActiveBindings++,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=n,e[n]=i},_takeBackBinding:function(t){var e=this._bindings,n=t._cacheIndex,r=--this._nActiveBindings,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=n,e[n]=i},_lendControlInterpolant:function(){var t=this._controlInterpolants,e=this._nActiveControlInterpolants++,n=t[e];return void 0===n&&((n=new Ka(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=e,t[e]=n),n},_takeBackControlInterpolant:function(t){var e=this._controlInterpolants,n=t.__cacheIndex,r=--this._nActiveControlInterpolants,i=e[r];t.__cacheIndex=r,e[r]=t,i.__cacheIndex=n,e[n]=i},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(t,e){var n=e||this._root,r=n.uuid,i="string"==typeof t?os.findByName(n,t):t,o=null!==i?i.uuid:t,a=this._actionsByClip[o],s=null;if(void 0!==a){var u=a.actionByRoot[r];if(void 0!==u)return u;s=a.knownActions[0],null===i&&(i=s._clip)}if(null===i)return null;var l=new el(this,i,e);return this._bindAction(l,s),this._addInactiveAction(l,o,r),l},existingAction:function(t,e){var n=e||this._root,r=n.uuid,i="string"==typeof t?os.findByName(n,t):t,o=this._actionsByClip[i?i.uuid:t];return void 0!==o&&o.actionByRoot[r]||null},stopAllAction:function(){var t=this._actions,e=this._nActiveActions,n=this._bindings,r=this._nActiveBindings;this._nActiveActions=0,this._nActiveBindings=0;for(var i=0;i!==e;++i)t[i].reset();for(i=0;i!==r;++i)n[i].useCount=0;return this},update:function(t){for(var e=this._actions,n=this._nActiveActions,r=this.time+=t*=this.timeScale,i=Math.sign(t),o=this._accuIndex^=1,a=0;a!==n;++a)e[a]._update(r,t,i,o);var s=this._bindings,u=this._nActiveBindings;for(a=0;a!==u;++a)s[a].apply(o);return this},getRoot:function(){return this._root},uncacheClip:function(t){var e=this._actions,n=t.uuid,r=this._actionsByClip,i=r[n];if(void 0!==i){for(var o=i.knownActions,a=0,s=o.length;a!==s;++a){var u=o[a];this._deactivateAction(u);var l=u._cacheIndex,c=e[e.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,c._cacheIndex=l,e[l]=c,e.pop(),this._removeInactiveBindingsForAction(u)}delete r[n]}},uncacheRoot:function(t){var e=t.uuid,n=this._actionsByClip;for(var r in n){var i=n[r].actionByRoot[e];void 0!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}var o=this._bindingsByRootAndName[e];if(void 0!==o)for(var a in o){var s=o[a];s.restoreOriginalState(),this._removeInactiveBinding(s)}},uncacheAction:function(t,e){var n=this.existingAction(t,e);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}),rl.prototype.clone=function(){return new rl(void 0===this.value.clone?this.value:this.value.clone())},il.prototype=Object.assign(Object.create(or.prototype),{constructor:il,isInstancedBufferGeometry:!0,copy:function(t){return or.prototype.copy.call(this,t),this.maxInstancedCount=t.maxInstancedCount,this},clone:function(){return(new this.constructor).copy(this)}}),ol.prototype=Object.assign(Object.create(io.prototype),{constructor:ol,isInstancedInterleavedBuffer:!0,copy:function(t){return io.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this}}),al.prototype=Object.assign(Object.create(qn.prototype),{constructor:al,isInstancedBufferAttribute:!0,copy:function(t){return qn.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this}}),Object.assign(sl.prototype,{linePrecision:1,set:function(t,e){this.ray.set(t,e)},setFromCamera:function(t,e){e&&e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize()):e&&e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(t,e,n){var r=n||[];return ll(t,this,r,e),r.sort(ul),r},intersectObjects:function(t,e,n){var r=n||[];if(!1===Array.isArray(t))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),r;for(var i=0,o=t.length;i<o;i++)ll(t[i],this,r,e);return r.sort(ul),r}}),Object.assign(cl.prototype,{set:function(t,e,n){return this.radius=t,this.phi=e,this.theta=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this},makeSafe:function(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this},setFromVector3:function(t){return this.setFromCartesianCoords(t.x,t.y,t.z)},setFromCartesianCoords:function(t,e,n){return this.radius=Math.sqrt(t*t+e*e+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,n),this.phi=Math.acos(Qe.clamp(e/this.radius,-1,1))),this}}),Object.assign(hl.prototype,{set:function(t,e,n){return this.radius=t,this.theta=e,this.y=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.radius=t.radius,this.theta=t.theta,this.y=t.y,this},setFromVector3:function(t){return this.setFromCartesianCoords(t.x,t.y,t.z)},setFromCartesianCoords:function(t,e,n){return this.radius=Math.sqrt(t*t+n*n),this.theta=Math.atan2(t,n),this.y=e,this}}),Object.assign(dl.prototype,{set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(){var t=new Je;return function(e,n){var r=t.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(t){return void 0===t&&(console.warn("THREE.Box2: .getCenter() target is now required"),t=new Je),this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){return void 0===t&&(console.warn("THREE.Box2: .getSize() target is now required"),t=new Je),this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y},getParameter:function(t,e){return void 0===e&&(console.warn("THREE.Box2: .getParameter() target is now required"),e=new Je),e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)},clampPoint:function(t,e){return void 0===e&&(console.warn("THREE.Box2: .clampPoint() target is now required"),e=new Je),e.copy(t).clamp(this.min,this.max)},distanceToPoint:function(){var t=new Je;return function(e){return t.copy(e).clamp(this.min,this.max).sub(e).length()}}(),intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}),Object.assign(pl.prototype,{set:function(t,e){return this.start.copy(t),this.end.copy(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.start.copy(t.start),this.end.copy(t.end),this},getCenter:function(t){return void 0===t&&(console.warn("THREE.Line3: .getCenter() target is now required"),t=new en),t.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(t){return void 0===t&&(console.warn("THREE.Line3: .delta() target is now required"),t=new en),t.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(t,e){return void 0===e&&(console.warn("THREE.Line3: .at() target is now required"),e=new en),this.delta(e).multiplyScalar(t).add(this.start)},closestPointToPointParameter:(ku=new en,Fu=new en,function(t,e){ku.subVectors(t,this.start),Fu.subVectors(this.end,this.start);var n=Fu.dot(Fu),r=Fu.dot(ku)/n;return e&&(r=Qe.clamp(r,0,1)),r}),closestPointToPoint:function(t,e,n){var r=this.closestPointToPointParameter(t,e);return void 0===n&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),n=new en),this.delta(n).multiplyScalar(r).add(this.start)},applyMatrix4:function(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this},equals:function(t){return t.start.equals(this.start)&&t.end.equals(this.end)}}),(fl.prototype=Object.create(Gn.prototype)).constructor=fl,fl.prototype.isImmediateRenderObject=!0,(ml.prototype=Object.create(mo.prototype)).constructor=ml,ml.prototype.update=function(){var t=new en,e=new en,n=new nn;return function(){var r=["a","b","c"];this.object.updateMatrixWorld(!0),n.getNormalMatrix(this.object.matrixWorld);var i=this.object.matrixWorld,o=this.geometry.attributes.position,a=this.object.geometry;if(a&&a.isGeometry)for(var s=a.vertices,u=a.faces,l=0,c=0,h=u.length;c<h;c++)for(var d=u[c],p=0,f=d.vertexNormals.length;p<f;p++){var m=d.vertexNormals[p];t.copy(s[d[r[p]]]).applyMatrix4(i),e.copy(m).applyMatrix3(n).normalize().multiplyScalar(this.size).add(t),o.setXYZ(l,t.x,t.y,t.z),o.setXYZ(l+=1,e.x,e.y,e.z),l+=1}else if(a&&a.isBufferGeometry){var v=a.attributes.position,g=a.attributes.normal;for(l=0,p=0,f=v.count;p<f;p++)t.set(v.getX(p),v.getY(p),v.getZ(p)).applyMatrix4(i),e.set(g.getX(p),g.getY(p),g.getZ(p)),e.applyMatrix3(n).normalize().multiplyScalar(this.size).add(t),o.setXYZ(l,t.x,t.y,t.z),o.setXYZ(l+=1,e.x,e.y,e.z),l+=1}o.needsUpdate=!0}}(),(vl.prototype=Object.create(Gn.prototype)).constructor=vl,vl.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},vl.prototype.update=function(){var t=new en;return function(){this.light.updateMatrixWorld();var e=this.light.distance?this.light.distance:1e3,n=e*Math.tan(this.light.angle);this.cone.scale.set(n,n,e),t.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(t),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}(),(gl.prototype=Object.create(mo.prototype)).constructor=gl,gl.prototype.updateMatrixWorld=function(){var t=new en,e=new $e,n=new $e;return function(r){var i=this.bones,o=this.geometry,a=o.getAttribute("position");n.getInverse(this.root.matrixWorld);for(var s=0,u=0;s<i.length;s++){var l=i[s];l.parent&&l.parent.isBone&&(e.multiplyMatrices(n,l.matrixWorld),t.setFromMatrixPosition(e),a.setXYZ(u,t.x,t.y,t.z),e.multiplyMatrices(n,l.parent.matrixWorld),t.setFromMatrixPosition(e),a.setXYZ(u+1,t.x,t.y,t.z),u+=2)}o.getAttribute("position").needsUpdate=!0,Gn.prototype.updateMatrixWorld.call(this,r)}}(),(yl.prototype=Object.create(Ar.prototype)).constructor=yl,yl.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},yl.prototype.update=function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)},(_l.prototype=Object.create(Gn.prototype)).constructor=_l,_l.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},_l.prototype.update=function(){var t=.5*this.light.width,e=.5*this.light.height,n=this.line.geometry.attributes.position,r=n.array;r[0]=t,r[1]=-e,r[2]=0,r[3]=t,r[4]=e,r[5]=0,r[6]=-t,r[7]=e,r[8]=0,r[9]=-t,r[10]=-e,r[11]=0,r[12]=t,r[13]=-e,r[14]=0,n.needsUpdate=!0,void 0!==this.color?this.line.material.color.set(this.color):this.line.material.color.copy(this.light.color)},(bl.prototype=Object.create(Gn.prototype)).constructor=bl,bl.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},bl.prototype.update=function(){var t=new en,e=new An,n=new An;return function(){var r=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var i=r.geometry.getAttribute("color");e.copy(this.light.color),n.copy(this.light.groundColor);for(var o=0,a=i.count;o<a;o++){var s=o<a/2?e:n;i.setXYZ(o,s.r,s.g,s.b)}i.needsUpdate=!0}r.lookAt(t.setFromMatrixPosition(this.light.matrixWorld).negate())}}(),(wl.prototype=Object.create(mo.prototype)).constructor=wl,(xl.prototype=Object.create(mo.prototype)).constructor=xl,(El.prototype=Object.create(mo.prototype)).constructor=El,El.prototype.update=function(){var t=new en,e=new en,n=new nn;return function(){this.object.updateMatrixWorld(!0),n.getNormalMatrix(this.object.matrixWorld);for(var r=this.object.matrixWorld,i=this.geometry.attributes.position,o=this.object.geometry,a=o.vertices,s=o.faces,u=0,l=0,c=s.length;l<c;l++){var h=s[l],d=h.normal;t.copy(a[h.a]).add(a[h.b]).add(a[h.c]).divideScalar(3).applyMatrix4(r),e.copy(d).applyMatrix3(n).normalize().multiplyScalar(this.size).add(t),i.setXYZ(u,t.x,t.y,t.z),i.setXYZ(u+=1,e.x,e.y,e.z),u+=1}i.needsUpdate=!0}}(),(Sl.prototype=Object.create(Gn.prototype)).constructor=Sl,Sl.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},Sl.prototype.update=function(){var t=new en,e=new en,n=new en;return function(){t.setFromMatrixPosition(this.light.matrixWorld),e.setFromMatrixPosition(this.light.target.matrixWorld),n.subVectors(e,t),this.lightPlane.lookAt(e),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(e),this.targetLine.scale.z=n.length()}}(),(Tl.prototype=Object.create(mo.prototype)).constructor=Tl,Tl.prototype.update=function(){var t,e,n=new en,r=new Gi;function i(i,o,a,s){n.set(o,a,s).unproject(r);var u=e[i];if(void 0!==u)for(var l=t.getAttribute("position"),c=0,h=u.length;c<h;c++)l.setXYZ(u[c],n.x,n.y,n.z)}return function(){t=this.geometry,e=this.pointMap,r.projectionMatrix.copy(this.camera.projectionMatrix),i("c",0,0,-1),i("t",0,0,1),i("n1",-1,-1,-1),i("n2",1,-1,-1),i("n3",-1,1,-1),i("n4",1,1,-1),i("f1",-1,-1,1),i("f2",1,-1,1),i("f3",-1,1,1),i("f4",1,1,1),i("u1",.7,1.1,-1),i("u2",-.7,1.1,-1),i("u3",0,2,-1),i("cf1",-1,0,1),i("cf2",1,0,1),i("cf3",0,-1,1),i("cf4",0,1,1),i("cn1",-1,0,-1),i("cn2",1,0,-1),i("cn3",0,-1,-1),i("cn4",0,1,-1),t.getAttribute("position").needsUpdate=!0}}(),(Ml.prototype=Object.create(mo.prototype)).constructor=Ml,Ml.prototype.update=function(){var t=new vn;return function(e){if(void 0!==e&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&t.setFromObject(this.object),!t.isEmpty()){var n=t.min,r=t.max,i=this.geometry.attributes.position,o=i.array;o[0]=r.x,o[1]=r.y,o[2]=r.z,o[3]=n.x,o[4]=r.y,o[5]=r.z,o[6]=n.x,o[7]=n.y,o[8]=r.z,o[9]=r.x,o[10]=n.y,o[11]=r.z,o[12]=r.x,o[13]=r.y,o[14]=n.z,o[15]=n.x,o[16]=r.y,o[17]=n.z,o[18]=n.x,o[19]=n.y,o[20]=n.z,o[21]=r.x,o[22]=n.y,o[23]=n.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}}}(),Ml.prototype.setFromObject=function(t){return this.object=t,this.update(),this},Ml.prototype.copy=function(t){return mo.prototype.copy.call(this,t),this.object=t.object,this},Ml.prototype.clone=function(){return(new this.constructor).copy(this)},(Cl.prototype=Object.create(mo.prototype)).constructor=Cl,Cl.prototype.updateMatrixWorld=function(t){var e=this.box;e.isEmpty()||(e.getCenter(this.position),e.getSize(this.scale),this.scale.multiplyScalar(.5),Gn.prototype.updateMatrixWorld.call(this,t))},(Al.prototype=Object.create(fo.prototype)).constructor=Al,Al.prototype.updateMatrixWorld=function(t){var e=-this.plane.constant;Math.abs(e)<1e-8&&(e=1e-8),this.scale.set(.5*this.size,.5*this.size,e),this.children[0].material.side=e<0?A:C,this.lookAt(this.plane.normal),Gn.prototype.updateMatrixWorld.call(this,t)},(Pl.prototype=Object.create(Gn.prototype)).constructor=Pl,Pl.prototype.setDirection=(Gu=new en,function(t){t.y>.99999?this.quaternion.set(0,0,0,1):t.y<-.99999?this.quaternion.set(1,0,0,0):(Gu.set(t.z,0,-t.x).normalize(),Bu=Math.acos(t.y),this.quaternion.setFromAxisAngle(Gu,Bu))}),Pl.prototype.setLength=function(t,e,n){void 0===e&&(e=.2*t),void 0===n&&(n=.2*e),this.line.scale.set(1,Math.max(0,t-e),1),this.line.updateMatrix(),this.cone.scale.set(n,e,n),this.cone.position.y=t,this.cone.updateMatrix()},Pl.prototype.setColor=function(t){this.line.material.color.copy(t),this.cone.material.color.copy(t)},Pl.prototype.copy=function(t){return Gn.prototype.copy.call(this,t,!1),this.line.copy(t.line),this.cone.copy(t.cone),this},Pl.prototype.clone=function(){return(new this.constructor).copy(this)},(Ol.prototype=Object.create(mo.prototype)).constructor=Ol;var Ll=0,Il=1;function Nl(t){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),t}function Dl(t){return void 0===t&&(t=[]),console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),t.isMultiMaterial=!0,t.materials=t,t.clone=function(){return t.slice()},t}function kl(t,e){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new yo(t,e)}function Fl(t){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new so(t)}function jl(t,e){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new yo(t,e)}function Ul(t){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new go(t)}function Bl(t){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new go(t)}function Gl(t){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new go(t)}function Vl(t,e,n){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new en(t,e,n)}function zl(t,e){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead."),new qn(t,e).setDynamic(!0)}function Hl(t,e){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new Xn(t,e)}function Wl(t,e){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new Yn(t,e)}function ql(t,e){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new Kn(t,e)}function Xl(t,e){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new Zn(t,e)}function Yl(t,e){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new Qn(t,e)}function Kl(t,e){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new Jn(t,e)}function Zl(t,e){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new $n(t,e)}function Ql(t,e){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new tr(t,e)}function Jl(t,e){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new er(t,e)}function $l(t){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),Ms.call(this,t),this.type="catmullrom",this.closed=!0}function tc(t){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),Ms.call(this,t),this.type="catmullrom"}function ec(t){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),Ms.call(this,t),this.type="catmullrom"}function nc(t){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new Ol(t)}function rc(t,e){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new Ml(t,e)}function ic(t,e){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new mo(new Ca(t.geometry),new po({color:void 0!==e?e:16777215}))}function oc(t,e){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new mo(new Eo(t.geometry),new po({color:void 0!==e?e:16777215}))}function ac(t){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new hs(t)}function sc(t){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new fs(t)}ys.create=function(t,e){return console.log("THREE.Curve.create() has been deprecated"),t.prototype=Object.create(ys.prototype),t.prototype.constructor=t,t.prototype.getPoint=e,t},Object.assign(js.prototype,{createPointsGeometry:function(t){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var e=this.getPoints(t);return this.createGeometry(e)},createSpacedPointsGeometry:function(t){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var e=this.getSpacedPoints(t);return this.createGeometry(e)},createGeometry:function(t){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var e=new Wn,n=0,r=t.length;n<r;n++){var i=t[n];e.vertices.push(new en(i.x,i.y,i.z||0))}return e}}),Object.assign(Us.prototype,{fromPoints:function(t){console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(t)}}),$l.prototype=Object.create(Ms.prototype),tc.prototype=Object.create(Ms.prototype),ec.prototype=Object.create(Ms.prototype),Object.assign(ec.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),wl.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},gl.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Object.assign(vu.prototype,{extractUrlBase:function(t){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),$s.extractUrlBase(t)}}),Object.assign(nu.prototype,{setTexturePath:function(t){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(t)}}),Object.assign(dl.prototype,{center:function(t){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},size:function(t){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(t)}}),Object.assign(vn.prototype,{center:function(t){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionSphere:function(t){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)},size:function(t){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(t)}}),pl.prototype.center=function(t){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(t)},Object.assign(Qe,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(t){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),Qe.floorPowerOfTwo(t)},nextPowerOfTwo:function(t){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),Qe.ceilPowerOfTwo(t)}}),Object.assign(nn.prototype,{flattenToArrayOffset:function(t,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},multiplyVector3:function(t){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBuffer:function(t){return console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(t)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Object.assign($e.prototype,{extractPosition:function(t){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(t)},flattenToArrayOffset:function(t,e){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},getPosition:function(){var t;return function(){return void 0===t&&(t=new en),console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),t.setFromMatrixColumn(this,3)}}(),setRotationFromQuaternion:function(t){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(t)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(t){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector4:function(t){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(t){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),t.transformDirection(this)},crossVector:function(t){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(t){return console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(t)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(t,e,n,r,i,o){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(t,e,r,n,i,o)}}),yn.prototype.isIntersectionLine=function(t){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(t)},tn.prototype.multiplyVector3=function(t){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),t.applyQuaternion(this)},Object.assign(Tr.prototype,{isIntersectionBox:function(t){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionPlane:function(t){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(t)},isIntersectionSphere:function(t){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)}}),Object.assign(Mr.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(t,e){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(t,e)},midpoint:function(t){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(t)},normal:function(t){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(t)},plane:function(t){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(t)}}),Object.assign(Mr,{barycoordFromPoint:function(t,e,n,r,i){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),Mr.getBarycoord(t,e,n,r,i)},normal:function(t,e,n,r){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),Mr.getNormal(t,e,n,r)}}),Object.assign(Bs.prototype,{extractAllPoints:function(t){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(t)},extrude:function(t){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new da(this,t)},makeGeometry:function(t){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new Sa(this,t)}}),Object.assign(Je.prototype,{fromAttribute:function(t,e,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},distanceToManhattan:function(t){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(en.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(t){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(t)},getScaleFromMatrix:function(t){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(t)},getColumnFromMatrix:function(t,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,t)},applyProjection:function(t){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(t)},fromAttribute:function(t,e,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},distanceToManhattan:function(t){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(dn.prototype,{fromAttribute:function(t,e,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Wn.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}}),Object.assign(Gn.prototype,{getChildByName:function(t){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(t)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(t,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,t)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")}}),Object.defineProperties(Gn.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(t){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=t}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.defineProperties(uo.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(co.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),lo.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Object.defineProperty(ys.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(t){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=t}}),Vi.prototype.setLens=function(t,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==e&&(this.filmGauge=e),this.setFocalLength(t)},Object.defineProperties(Gs.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(t){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=t}},shadowCameraLeft:{set:function(t){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=t}},shadowCameraRight:{set:function(t){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=t}},shadowCameraTop:{set:function(t){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=t}},shadowCameraBottom:{set:function(t){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=t}},shadowCameraNear:{set:function(t){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=t}},shadowCameraFar:{set:function(t){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=t}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(t){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=t}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(t){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=t}},shadowMapHeight:{set:function(t){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=t}}}),Object.defineProperties(qn.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")}}),Object.assign(or.prototype,{addIndex:function(t){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(t)},addDrawCall:function(t,e,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(t,e)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}}),Object.defineProperties(or.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.assign(pa.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}}),Object.defineProperties(rl.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(Er.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new An}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=t===O}}}),Object.defineProperties(Ua.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(Sr.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(t){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=t}}}),Object.assign(to.prototype,{clearTarget:function(t,e,n,r){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(t),this.clear(e,n,r)},animate:function(t){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(t)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(t){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(t)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")}}),Object.defineProperties(to.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=t}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=t}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(ji.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(pn.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=t}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=t}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=t}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=t}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(t){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=t}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(t){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=t}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(t){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=t}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(t){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=t}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(t){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=t}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(t){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=t}}}),Object.defineProperties($i.prototype,{standing:{set:function(){console.warn("THREE.WebVRManager: .standing has been removed.")}},userHeight:{set:function(){console.warn("THREE.WebVRManager: .userHeight has been removed.")}}}),Yu.prototype.load=function(t){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var e=this;return(new zu).load(t,function(t){e.setBuffer(t)}),this},Zu.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},Wu.prototype.updateCubeMap=function(t,e){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(t,e)};var uc={merge:function(t,e,n){var r;console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead."),e.isMesh&&(e.matrixAutoUpdate&&e.updateMatrix(),r=e.matrix,e=e.geometry),t.merge(e,r,n)},center:function(t){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),t.center()}};function lc(){console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js."),this.projectVector=function(t,e){console.warn("THREE.Projector: .projectVector() is now vector.project()."),t.project(e)},this.unprojectVector=function(t,e){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."),t.unproject(e)},this.pickingRay=function(){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}}function cc(){console.error("THREE.CanvasRenderer has been removed")}function hc(){console.error("THREE.JSONLoader has been removed.")}ln.crossOrigin=void 0,ln.loadTexture=function(t,e,n,r){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var i=new gs;i.setCrossOrigin(this.crossOrigin);var o=i.load(t,n,void 0,r);return e&&(o.mapping=e),o},ln.loadTextureCube=function(t,e,n,r){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var i=new vs;i.setCrossOrigin(this.crossOrigin);var o=i.load(t,n,void 0,r);return e&&(o.mapping=e),o},ln.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},ln.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};var dc={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")}};function pc(){console.error("THREE.LensFlare has been moved to /examples/js/objects/Lensflare.js")}},XJaP:function(t,e,n){"use strict";function r(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}return t+" failed: "+r+" argument "}Object.defineProperty(e,"__esModule",{value:!0}),e.validateArgCount=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")},e.errorPrefix=r,e.validateNamespace=function(t,e,n,i){if((!i||n)&&"string"!=typeof n)throw new Error(r(t,e,i)+"must be a valid firebase namespace.")},e.validateCallback=function(t,e,n,i){if((!i||n)&&"function"!=typeof n)throw new Error(r(t,e,i)+"must be a valid function.")},e.validateContextObject=function(t,e,n,i){if((!i||n)&&("object"!=typeof n||null===n))throw new Error(r(t,e,i)+"must be a valid context object.")}},XLUM:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("hOVL"),i=n("q1Ft"),o=n("0kFh"),a=n("+e0l"),s=n("Mom/"),u=n("0kFh");e.CompoundWrite=function(){function t(t){this.writeTree_=t}return t.prototype.addWrite=function(e,n){if(e.isEmpty())return new t(new r.ImmutableTree(n));var o=this.writeTree_.findRootMostValueAndPath(e);if(null!=o){var a=o.path,s=o.value,u=i.Path.relativePath(a,e);return s=s.updateChild(u,n),new t(this.writeTree_.set(a,s))}var l=new r.ImmutableTree(n);return new t(this.writeTree_.setTree(e,l))},t.prototype.addWrites=function(t,e){var n=this;return o.forEach(e,function(e,r){n=n.addWrite(t.child(e),r)}),n},t.prototype.removeWrite=function(e){return e.isEmpty()?t.Empty:new t(this.writeTree_.setTree(e,r.ImmutableTree.Empty))},t.prototype.hasCompleteWrite=function(t){return null!=this.getCompleteNode(t)},t.prototype.getCompleteNode=function(t){var e=this.writeTree_.findRootMostValueAndPath(t);return null!=e?this.writeTree_.get(e.path).getChild(i.Path.relativePath(e.path,t)):null},t.prototype.getCompleteChildren=function(){var t=[],e=this.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild(s.PRIORITY_INDEX,function(e,n){t.push(new a.NamedNode(e,n))}):this.writeTree_.children.inorderTraversal(function(e,n){null!=n.value&&t.push(new a.NamedNode(e,n.value))}),t},t.prototype.childCompoundWrite=function(e){if(e.isEmpty())return this;var n=this.getCompleteNode(e);return new t(null!=n?new r.ImmutableTree(n):this.writeTree_.subtree(e))},t.prototype.isEmpty=function(){return this.writeTree_.isEmpty()},t.prototype.apply=function(e){return t.applySubtreeWrite_(i.Path.Empty,this.writeTree_,e)},t.Empty=new t(new r.ImmutableTree(null)),t.applySubtreeWrite_=function(e,n,r){if(null!=n.value)return r.updateChild(e,n.value);var i=null;return n.children.inorderTraversal(function(n,o){".priority"===n?(u.assert(null!==o.value,"Priority writes must always be leaf nodes"),i=o.value):r=t.applySubtreeWrite_(e.child(n),o,r)}),r.getChild(e).isEmpty()||null===i||(r=r.updateChild(e.child(".priority"),i)),r},t}()},Xdxe:function(t,e,n){t.exports=n("YfeO")},XlPw:function(t,e,n){"use strict";n.r(e),n.d(e,"throwError",function(){return i});var r=n("6blF");function i(t,e){return new r.a(e?function(n){return e.schedule(o,0,{error:t,subscriber:n})}:function(e){return e.error(t)})}function o(t){t.subscriber.error(t.error)}},"YNF/":function(t,e,n){n("7eb7")},YYhT:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Hash=function(){this.blockSize=-1}},YfeO:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("geFX"),i=n("icDE");e.Database=i.Database;var o=n("gWF3");e.Query=o.Query;var a=n("nheu");e.Reference=a.Reference;var s=n("W1I6");e.enableLogging=s.enableLogging;var u=n("rkrO"),l=n("ynW9"),c=n("zzGN"),h=n("0kFh"),d=i.Database.ServerValue;function p(e){var n=e.INTERNAL.registerService("database",function(t,e,n){return u.RepoManager.getInstance().databaseFromApp(t,n)},{Reference:a.Reference,Query:o.Query,Database:i.Database,enableLogging:s.enableLogging,INTERNAL:l,ServerValue:d,TEST_ACCESS:c},null,!0);h.isNodeSdk()&&(t.exports=n)}e.ServerValue=d,e.registerDatabase=p,p(r.default);var f=n("3RyD");e.DataSnapshot=f.DataSnapshot;var m=n("pqom");e.OnDisconnect=m.OnDisconnect},ZYCi:function(t,e,n){"use strict";var r=n("mrSG"),i=n("CcnG"),o=n("F/XL"),a=n("0/uQ"),s=n("K9Ia"),u=n("6blF"),l=n("3fWJ"),c=n("26FU"),h=n("psW0"),d=n("67Y/"),p=n("Phjn"),f=n("VnD/"),m=n("FFOo"),v=n("b7mW"),g=n("G5J1");function y(t){return function(e){return 0===t?Object(g.b)():e.lift(new _(t))}}var _=function(){function t(t){if(this.total=t,this.total<0)throw new v.a}return t.prototype.call=function(t,e){return e.subscribe(new b(t,this.total))},t}(),b=function(t){function e(e,n){var r=t.call(this,e)||this;return r.total=n,r.ring=new Array,r.count=0,r}return r.__extends(e,t),e.prototype._next=function(t){var e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t},e.prototype._complete=function(){var t=this.destination,e=this.count;if(e>0)for(var n=this.count>=this.total?this.total:this.count,r=this.ring,i=0;i<n;i++){var o=e++%n;t.next(r[o])}t.complete()},e}(m.a),w=n("+umK"),x=n("2Bdj"),E=function(){function t(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}return t.prototype.call=function(t,e){return e.subscribe(new S(t,this.nextOrObserver,this.error,this.complete))},t}(),S=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;return o._tapNext=w.a,o._tapError=w.a,o._tapComplete=w.a,o._tapError=r||w.a,o._tapComplete=i||w.a,Object(x.a)(n)?(o._context=o,o._tapNext=n):n&&(o._context=n,o._tapNext=n.next||w.a,o._tapError=n.error||w.a,o._tapComplete=n.complete||w.a),o}return r.__extends(e,t),e.prototype._next=function(t){try{this._tapNext.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.next(t)},e.prototype._error=function(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)},e.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()},e}(m.a),T=function(t){return void 0===t&&(t=M),e={hasValue:!1,next:function(){this.hasValue=!0},complete:function(){if(!this.hasValue)throw t()}},function(t){return t.lift(new E(e,void 0,void 0))};var e};function M(){return new l.a}function C(t){return void 0===t&&(t=null),function(e){return e.lift(new A(t))}}var A=function(){function t(t){this.defaultValue=t}return t.prototype.call=function(t,e){return e.subscribe(new P(t,this.defaultValue))},t}(),P=function(t){function e(e,n){var r=t.call(this,e)||this;return r.defaultValue=n,r.isEmpty=!0,r}return r.__extends(e,t),e.prototype._next=function(t){this.isEmpty=!1,this.destination.next(t)},e.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},e}(m.a),O=n("mChF");function R(t,e){var n=arguments.length>=2;return function(r){return r.pipe(t?Object(f.a)(function(e,n){return t(e,n,r)}):O.a,y(1),n?C(e):T(function(){return new l.a}))}}var L=n("MGBS"),I=n("rPjj"),N=n("zotm");function D(t){return function(e){var n=new k(t),r=e.lift(n);return n.caught=r}}var k=function(){function t(t){this.selector=t}return t.prototype.call=function(t,e){return e.subscribe(new F(t,this.selector,this.caught))},t}(),F=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.selector=n,i.caught=r,i}return r.__extends(e,t),e.prototype.error=function(e){if(!this.isStopped){var n=void 0;try{n=this.selector(e,this.caught)}catch(e){return void t.prototype.error.call(this,e)}this._unsubscribeAndRecycle();var r=new I.a(this,void 0,void 0);this.add(r),Object(N.a)(this,n,void 0,void 0,r)}},e}(L.a),j=n("Zn8D");function U(t,e){return function(n){return n.lift(new B(t,e,n))}}var B=function(){function t(t,e,n){this.predicate=t,this.thisArg=e,this.source=n}return t.prototype.call=function(t,e){return e.subscribe(new G(t,this.predicate,this.thisArg,this.source))},t}(),G=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;return o.predicate=n,o.thisArg=r,o.source=i,o.index=0,o.thisArg=r||o,o}return r.__extends(e,t),e.prototype.notifyComplete=function(t){this.destination.next(t),this.destination.complete()},e.prototype._next=function(t){var e=!1;try{e=this.predicate.call(this.thisArg,t,this.index++,this.source)}catch(t){return void this.destination.error(t)}e||this.notifyComplete(!1)},e.prototype._complete=function(){this.notifyComplete(!0)},e}(m.a),V=function(){function t(t){if(this.total=t,this.total<0)throw new v.a}return t.prototype.call=function(t,e){return e.subscribe(new z(t,this.total))},t}(),z=function(t){function e(e,n){var r=t.call(this,e)||this;return r.total=n,r.count=0,r}return r.__extends(e,t),e.prototype._next=function(t){var e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))},e}(m.a);function H(t,e){var n=arguments.length>=2;return function(r){return r.pipe(t?Object(f.a)(function(e,n){return t(e,n,r)}):O.a,function(t){return t.lift(new V(1))},n?C(e):T(function(){return new l.a}))}}function W(){return Object(j.a)(1)}function q(t,e){var n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new X(t,e,n))}}var X=function(){function t(t,e,n){void 0===n&&(n=!1),this.accumulator=t,this.seed=e,this.hasSeed=n}return t.prototype.call=function(t,e){return e.subscribe(new Y(t,this.accumulator,this.seed,this.hasSeed))},t}(),Y=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;return o.accumulator=n,o._seed=r,o.hasSeed=i,o.index=0,o}return r.__extends(e,t),Object.defineProperty(e.prototype,"seed",{get:function(){return this._seed},set:function(t){this.hasSeed=!0,this._seed=t},enumerable:!0,configurable:!0}),e.prototype._next=function(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)},e.prototype._tryNext=function(t){var e,n=this.index++;try{e=this.accumulator(this.seed,t,n)}catch(t){this.destination.error(t)}this.seed=e,this.destination.next(e)},e}(m.a),K=n("y3By"),Z=n("Ip0R"),Q=n("ZYjt");n.d(e,"t",function(){return yn}),n.d(e,"A",function(){return An}),n.d(e,"v",function(){return xn}),n.d(e,"B",function(){return Pn}),n.d(e,"C",function(){return On}),n.d(e,"x",function(){return Sn}),n.d(e,"w",function(){return En}),n.d(e,"z",function(){return Cn}),n.d(e,"u",function(){return bn}),n.d(e,"y",function(){return Mn}),n.d(e,"D",function(){return vn}),n.d(e,"m",function(){return on}),n.d(e,"l",function(){return sn}),n.d(e,"o",function(){return cn}),n.d(e,"j",function(){return qe}),n.d(e,"k",function(){return en}),n.d(e,"i",function(){return Ye}),n.d(e,"g",function(){return gn}),n.d(e,"h",function(){return Rn}),n.d(e,"n",function(){return wn}),n.d(e,"b",function(){return ln}),n.d(e,"d",function(){return fn}),n.d(e,"e",function(){return pn}),n.d(e,"f",function(){return dn}),n.d(e,"p",function(){return mn}),n.d(e,"a",function(){return me}),n.d(e,"q",function(){return Ze}),n.d(e,"c",function(){return jt}),n.d(e,"r",function(){return Ft}),n.d(e,"s",function(){return mt});var J=function(t,e){this.id=t,this.url=e},$=function(t){function e(e,n,r,i){void 0===r&&(r="imperative"),void 0===i&&(i=null);var o=t.call(this,e,n)||this;return o.navigationTrigger=r,o.restoredState=i,o}return Object(r.__extends)(e,t),e.prototype.toString=function(){return"NavigationStart(id: "+this.id+", url: '"+this.url+"')"},e}(J),tt=function(t){function e(e,n,r){var i=t.call(this,e,n)||this;return i.urlAfterRedirects=r,i}return Object(r.__extends)(e,t),e.prototype.toString=function(){return"NavigationEnd(id: "+this.id+", url: '"+this.url+"', urlAfterRedirects: '"+this.urlAfterRedirects+"')"},e}(J),et=function(t){function e(e,n,r){var i=t.call(this,e,n)||this;return i.reason=r,i}return Object(r.__extends)(e,t),e.prototype.toString=function(){return"NavigationCancel(id: "+this.id+", url: '"+this.url+"')"},e}(J),nt=function(t){function e(e,n,r){var i=t.call(this,e,n)||this;return i.error=r,i}return Object(r.__extends)(e,t),e.prototype.toString=function(){return"NavigationError(id: "+this.id+", url: '"+this.url+"', error: "+this.error+")"},e}(J),rt=function(t){function e(e,n,r,i){var o=t.call(this,e,n)||this;return o.urlAfterRedirects=r,o.state=i,o}return Object(r.__extends)(e,t),e.prototype.toString=function(){return"RoutesRecognized(id: "+this.id+", url: '"+this.url+"', urlAfterRedirects: '"+this.urlAfterRedirects+"', state: "+this.state+")"},e}(J),it=function(t){function e(e,n,r,i){var o=t.call(this,e,n)||this;return o.urlAfterRedirects=r,o.state=i,o}return Object(r.__extends)(e,t),e.prototype.toString=function(){return"GuardsCheckStart(id: "+this.id+", url: '"+this.url+"', urlAfterRedirects: '"+this.urlAfterRedirects+"', state: "+this.state+")"},e}(J),ot=function(t){function e(e,n,r,i,o){var a=t.call(this,e,n)||this;return a.urlAfterRedirects=r,a.state=i,a.shouldActivate=o,a}return Object(r.__extends)(e,t),e.prototype.toString=function(){return"GuardsCheckEnd(id: "+this.id+", url: '"+this.url+"', urlAfterRedirects: '"+this.urlAfterRedirects+"', state: "+this.state+", shouldActivate: "+this.shouldActivate+")"},e}(J),at=function(t){function e(e,n,r,i){var o=t.call(this,e,n)||this;return o.urlAfterRedirects=r,o.state=i,o}return Object(r.__extends)(e,t),e.prototype.toString=function(){return"ResolveStart(id: "+this.id+", url: '"+this.url+"', urlAfterRedirects: '"+this.urlAfterRedirects+"', state: "+this.state+")"},e}(J),st=function(t){function e(e,n,r,i){var o=t.call(this,e,n)||this;return o.urlAfterRedirects=r,o.state=i,o}return Object(r.__extends)(e,t),e.prototype.toString=function(){return"ResolveEnd(id: "+this.id+", url: '"+this.url+"', urlAfterRedirects: '"+this.urlAfterRedirects+"', state: "+this.state+")"},e}(J),ut=function(){function t(t){this.route=t}return t.prototype.toString=function(){return"RouteConfigLoadStart(path: "+this.route.path+")"},t}(),lt=function(){function t(t){this.route=t}return t.prototype.toString=function(){return"RouteConfigLoadEnd(path: "+this.route.path+")"},t}(),ct=function(){function t(t){this.snapshot=t}return t.prototype.toString=function(){return"ChildActivationStart(path: '"+(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"")+"')"},t}(),ht=function(){function t(t){this.snapshot=t}return t.prototype.toString=function(){return"ChildActivationEnd(path: '"+(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"")+"')"},t}(),dt=function(){function t(t){this.snapshot=t}return t.prototype.toString=function(){return"ActivationStart(path: '"+(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"")+"')"},t}(),pt=function(){function t(t){this.snapshot=t}return t.prototype.toString=function(){return"ActivationEnd(path: '"+(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"")+"')"},t}(),ft=function(){function t(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}return t.prototype.toString=function(){return"Scroll(anchor: '"+this.anchor+"', position: '"+(this.position?this.position[0]+", "+this.position[1]:null)+"')"},t}(),mt=function(){},vt="primary",gt=function(){function t(t){this.params=t||{}}return t.prototype.has=function(t){return this.params.hasOwnProperty(t)},t.prototype.get=function(t){if(this.has(t)){var e=this.params[t];return Array.isArray(e)?e[0]:e}return null},t.prototype.getAll=function(t){if(this.has(t)){var e=this.params[t];return Array.isArray(e)?e:[e]}return[]},Object.defineProperty(t.prototype,"keys",{get:function(){return Object.keys(this.params)},enumerable:!0,configurable:!0}),t}();function yt(t){return new gt(t)}function _t(t,e,n){var r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;for(var i={},o=0;o<r.length;o++){var a=r[o],s=t[o];if(a.startsWith(":"))i[a.substring(1)]=s;else if(a!==s.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}var bt=function(t,e){this.routes=t,this.module=e};function wt(t,e){void 0===e&&(e="");for(var n=0;n<t.length;n++){var r=t[n];xt(r,Et(e,r))}}function xt(t,e){if(!t)throw new Error("\n      Invalid configuration of route '"+e+"': Encountered undefined route.\n      The reason might be an extra comma.\n\n      Example:\n      const routes: Routes = [\n        { path: '', redirectTo: '/dashboard', pathMatch: 'full' },\n        { path: 'dashboard',  component: DashboardComponent },, << two commas\n        { path: 'detail/:id', component: HeroDetailComponent }\n      ];\n    ");if(Array.isArray(t))throw new Error("Invalid configuration of route '"+e+"': Array cannot be specified");if(!t.component&&!t.children&&!t.loadChildren&&t.outlet&&t.outlet!==vt)throw new Error("Invalid configuration of route '"+e+"': a componentless route without children or loadChildren cannot have a named outlet set");if(t.redirectTo&&t.children)throw new Error("Invalid configuration of route '"+e+"': redirectTo and children cannot be used together");if(t.redirectTo&&t.loadChildren)throw new Error("Invalid configuration of route '"+e+"': redirectTo and loadChildren cannot be used together");if(t.children&&t.loadChildren)throw new Error("Invalid configuration of route '"+e+"': children and loadChildren cannot be used together");if(t.redirectTo&&t.component)throw new Error("Invalid configuration of route '"+e+"': redirectTo and component cannot be used together");if(t.path&&t.matcher)throw new Error("Invalid configuration of route '"+e+"': path and matcher cannot be used together");if(void 0===t.redirectTo&&!t.component&&!t.children&&!t.loadChildren)throw new Error("Invalid configuration of route '"+e+"'. One of the following must be provided: component, redirectTo, children or loadChildren");if(void 0===t.path&&void 0===t.matcher)throw new Error("Invalid configuration of route '"+e+"': routes must have either a path or a matcher specified");if("string"==typeof t.path&&"/"===t.path.charAt(0))throw new Error("Invalid configuration of route '"+e+"': path cannot start with a slash");if(""===t.path&&void 0!==t.redirectTo&&void 0===t.pathMatch)throw new Error("Invalid configuration of route '{path: \""+e+'", redirectTo: "'+t.redirectTo+"\"}': please provide 'pathMatch'. The default value of 'pathMatch' is 'prefix', but often the intent is to use 'full'.");if(void 0!==t.pathMatch&&"full"!==t.pathMatch&&"prefix"!==t.pathMatch)throw new Error("Invalid configuration of route '"+e+"': pathMatch can only be set to 'prefix' or 'full'");t.children&&wt(t.children,e)}function Et(t,e){return e?t||e.path?t&&!e.path?t+"/":!t&&e.path?e.path:t+"/"+e.path:"":t}function St(t){var e=t.children&&t.children.map(St),n=e?Object(r.__assign)({},t,{children:e}):Object(r.__assign)({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&n.outlet!==vt&&(n.component=mt),n}function Tt(t,e){var n,r=Object.keys(t),i=Object.keys(e);if(r.length!=i.length)return!1;for(var o=0;o<r.length;o++)if(t[n=r[o]]!==e[n])return!1;return!0}function Mt(t){return Array.prototype.concat.apply([],t)}function Ct(t){return t.length>0?t[t.length-1]:null}function At(t,e){for(var n in t)t.hasOwnProperty(n)&&e(t[n],n)}function Pt(t){return t.pipe(Object(j.a)(),U(function(t){return!0===t}))}function Ot(t){return Object(i.Xa)(t)?t:Object(i.Ya)(t)?Object(a.a)(Promise.resolve(t)):Object(o.a)(t)}function Rt(t,e,n){return n?function(t,e){return Tt(t,e)}(t.queryParams,e.queryParams)&&function t(e,n){if(!Dt(e.segments,n.segments))return!1;if(e.numberOfChildren!==n.numberOfChildren)return!1;for(var r in n.children){if(!e.children[r])return!1;if(!t(e.children[r],n.children[r]))return!1}return!0}(t.root,e.root):function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(function(n){return e[n]===t[n]})}(t.queryParams,e.queryParams)&&function t(e,n){return function e(n,r,i){if(n.segments.length>i.length)return!!Dt(a=n.segments.slice(0,i.length),i)&&!r.hasChildren();if(n.segments.length===i.length){if(!Dt(n.segments,i))return!1;for(var o in r.children){if(!n.children[o])return!1;if(!t(n.children[o],r.children[o]))return!1}return!0}var a=i.slice(0,n.segments.length),s=i.slice(n.segments.length);return!!Dt(n.segments,a)&&!!n.children[vt]&&e(n.children[vt],r,s)}(e,n,n.segments)}(t.root,e.root)}var Lt=function(){function t(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}return Object.defineProperty(t.prototype,"queryParamMap",{get:function(){return this._queryParamMap||(this._queryParamMap=yt(this.queryParams)),this._queryParamMap},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return Ut.serialize(this)},t}(),It=function(){function t(t,e){var n=this;this.segments=t,this.children=e,this.parent=null,At(e,function(t,e){return t.parent=n})}return t.prototype.hasChildren=function(){return this.numberOfChildren>0},Object.defineProperty(t.prototype,"numberOfChildren",{get:function(){return Object.keys(this.children).length},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return Bt(this)},t}(),Nt=function(){function t(t,e){this.path=t,this.parameters=e}return Object.defineProperty(t.prototype,"parameterMap",{get:function(){return this._parameterMap||(this._parameterMap=yt(this.parameters)),this._parameterMap},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return qt(this)},t}();function Dt(t,e){return t.length===e.length&&t.every(function(t,n){return t.path===e[n].path})}function kt(t,e){var n=[];return At(t.children,function(t,r){r===vt&&(n=n.concat(e(t,r)))}),At(t.children,function(t,r){r!==vt&&(n=n.concat(e(t,r)))}),n}var Ft=function(){},jt=function(){function t(){}return t.prototype.parse=function(t){var e=new Qt(t);return new Lt(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())},t.prototype.serialize=function(t){var e,n;return"/"+function t(e,n){if(!e.hasChildren())return Bt(e);if(n){var r=e.children[vt]?t(e.children[vt],!1):"",i=[];return At(e.children,function(e,n){n!==vt&&i.push(n+":"+t(e,!1))}),i.length>0?r+"("+i.join("//")+")":r}var o=kt(e,function(n,r){return r===vt?[t(e.children[vt],!1)]:[r+":"+t(n,!1)]});return Bt(e)+"/("+o.join("//")+")"}(t.root,!0)+(e=t.queryParams,(n=Object.keys(e).map(function(t){var n=e[t];return Array.isArray(n)?n.map(function(e){return Vt(t)+"="+Vt(e)}).join("&"):Vt(t)+"="+Vt(n)})).length?"?"+n.join("&"):"")+("string"==typeof t.fragment?"#"+encodeURI(t.fragment):"")},t}(),Ut=new jt;function Bt(t){return t.segments.map(function(t){return qt(t)}).join("/")}function Gt(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Vt(t){return Gt(t).replace(/%3B/gi,";")}function zt(t){return Gt(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ht(t){return decodeURIComponent(t)}function Wt(t){return Ht(t.replace(/\+/g,"%20"))}function qt(t){return""+zt(t.path)+(e=t.parameters,Object.keys(e).map(function(t){return";"+zt(t)+"="+zt(e[t])}).join(""));var e}var Xt=/^[^\/()?;=#]+/;function Yt(t){var e=t.match(Xt);return e?e[0]:""}var Kt=/^[^=?&#]+/,Zt=/^[^?&#]+/,Qt=function(){function t(t){this.url=t,this.remaining=t}return t.prototype.parseRootSegment=function(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new It([],{}):new It([],this.parseChildren())},t.prototype.parseQueryParams=function(){var t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t},t.prototype.parseFragment=function(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null},t.prototype.parseChildren=function(){if(""===this.remaining)return{};this.consumeOptional("/");var t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());var e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));var n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n[vt]=new It(t,e)),n},t.prototype.parseSegment=function(){var t=Yt(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error("Empty path url segment cannot have parameters: '"+this.remaining+"'.");return this.capture(t),new Nt(Ht(t),this.parseMatrixParams())},t.prototype.parseMatrixParams=function(){for(var t={};this.consumeOptional(";");)this.parseParam(t);return t},t.prototype.parseParam=function(t){var e=Yt(this.remaining);if(e){this.capture(e);var n="";if(this.consumeOptional("=")){var r=Yt(this.remaining);r&&this.capture(n=r)}t[Ht(e)]=Ht(n)}},t.prototype.parseQueryParam=function(t){var e,n=(e=this.remaining.match(Kt))?e[0]:"";if(n){this.capture(n);var r="";if(this.consumeOptional("=")){var i=function(t){var e=t.match(Zt);return e?e[0]:""}(this.remaining);i&&this.capture(r=i)}var o=Wt(n),a=Wt(r);if(t.hasOwnProperty(o)){var s=t[o];Array.isArray(s)||(t[o]=s=[s]),s.push(a)}else t[o]=a}},t.prototype.parseParens=function(t){var e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){var n=Yt(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error("Cannot parse url '"+this.url+"'");var i=void 0;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i=vt);var o=this.parseChildren();e[i]=1===Object.keys(o).length?o[vt]:new It([],o),this.consumeOptional("//")}return e},t.prototype.peekStartsWith=function(t){return this.remaining.startsWith(t)},t.prototype.consumeOptional=function(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)},t.prototype.capture=function(t){if(!this.consumeOptional(t))throw new Error('Expected "'+t+'".')},t}(),Jt=function(t){this.segmentGroup=t||null},$t=function(t){this.urlTree=t};function te(t){return new u.a(function(e){return e.error(new Jt(t))})}function ee(t){return new u.a(function(e){return e.error(new $t(t))})}function ne(t){return new u.a(function(e){return e.error(new Error("Only absolute redirects can have named outlets. redirectTo: '"+t+"'"))})}var re=function(){function t(t,e,n,r,o){this.configLoader=e,this.urlSerializer=n,this.urlTree=r,this.config=o,this.allowRedirects=!0,this.ngModule=t.get(i.A)}return t.prototype.apply=function(){var t=this;return this.expandSegmentGroup(this.ngModule,this.config,this.urlTree.root,vt).pipe(Object(d.a)(function(e){return t.createUrlTree(e,t.urlTree.queryParams,t.urlTree.fragment)})).pipe(D(function(e){if(e instanceof $t)return t.allowRedirects=!1,t.match(e.urlTree);if(e instanceof Jt)throw t.noMatchError(e);throw e}))},t.prototype.match=function(t){var e=this;return this.expandSegmentGroup(this.ngModule,this.config,t.root,vt).pipe(Object(d.a)(function(n){return e.createUrlTree(n,t.queryParams,t.fragment)})).pipe(D(function(t){if(t instanceof Jt)throw e.noMatchError(t);throw t}))},t.prototype.noMatchError=function(t){return new Error("Cannot match any routes. URL Segment: '"+t.segmentGroup+"'")},t.prototype.createUrlTree=function(t,e,n){var r,i=t.segments.length>0?new It([],((r={})[vt]=t,r)):t;return new Lt(i,e,n)},t.prototype.expandSegmentGroup=function(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(Object(d.a)(function(t){return new It([],t)})):this.expandSegment(t,n,e,n.segments,r,!0)},t.prototype.expandChildren=function(t,e,n){var r=this;return function(n,i){if(0===Object.keys(n).length)return Object(o.a)({});var a=[],s=[],u={};return At(n,function(n,i){var o,l,c=(o=i,l=n,r.expandSegmentGroup(t,e,l,o)).pipe(Object(d.a)(function(t){return u[i]=t}));i===vt?a.push(c):s.push(c)}),o.a.apply(null,a.concat(s)).pipe(W(),R(),Object(d.a)(function(){return u}))}(n.children)},t.prototype.expandSegment=function(t,e,n,i,a,s){var u=this;return o.a.apply(void 0,Object(r.__spread)(n)).pipe(Object(d.a)(function(r){return u.expandSegmentAgainstRoute(t,e,n,r,i,a,s).pipe(D(function(t){if(t instanceof Jt)return Object(o.a)(null);throw t}))}),W(),H(function(t){return!!t}),D(function(t,n){if(t instanceof l.a||"EmptyError"===t.name){if(u.noLeftoversInUrl(e,i,a))return Object(o.a)(new It([],{}));throw new Jt(e)}throw t}))},t.prototype.noLeftoversInUrl=function(t,e,n){return 0===e.length&&!t.children[n]},t.prototype.expandSegmentAgainstRoute=function(t,e,n,r,i,o,a){return se(r)!==o?te(e):void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o):te(e)},t.prototype.expandSegmentAgainstRouteUsingRedirect=function(t,e,n,r,i,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o)},t.prototype.expandWildCardWithParamsAgainstRouteUsingRedirect=function(t,e,n,r){var i=this,o=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?ee(o):this.lineralizeSegments(n,o).pipe(Object(h.a)(function(n){var o=new It(n,{});return i.expandSegment(t,o,e,n,r,!1)}))},t.prototype.expandRegularSegmentAgainstRouteUsingRedirect=function(t,e,n,r,i,o){var a=this,s=ie(e,r,i),u=s.consumedSegments,l=s.lastChild,c=s.positionalParamSegments;if(!s.matched)return te(e);var d=this.applyRedirectCommands(u,r.redirectTo,c);return r.redirectTo.startsWith("/")?ee(d):this.lineralizeSegments(r,d).pipe(Object(h.a)(function(r){return a.expandSegment(t,e,n,r.concat(i.slice(l)),o,!1)}))},t.prototype.matchSegmentAgainstRoute=function(t,e,n,i){var a=this;if("**"===n.path)return n.loadChildren?this.configLoader.load(t.injector,n).pipe(Object(d.a)(function(t){return n._loadedConfig=t,new It(i,{})})):Object(o.a)(new It(i,{}));var s=ie(e,n,i),u=s.consumedSegments,l=s.lastChild;if(!s.matched)return te(e);var c=i.slice(l);return this.getChildConfig(t,n).pipe(Object(h.a)(function(t){var n=t.module,i=t.routes,s=function(t,e,n,i){return n.length>0&&function(t,e,n){return i.some(function(n){return ae(t,e,n)&&se(n)!==vt})}(t,n)?{segmentGroup:oe(new It(e,function(t,e){var n,i,o={};o[vt]=e;try{for(var a=Object(r.__values)(t),s=a.next();!s.done;s=a.next()){var u=s.value;""===u.path&&se(u)!==vt&&(o[se(u)]=new It([],{}))}}catch(t){n={error:t}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}return o}(i,new It(n,t.children)))),slicedSegments:[]}:0===n.length&&function(t,e,n){return i.some(function(n){return ae(t,e,n)})}(t,n)?{segmentGroup:oe(new It(t.segments,function(t,e,n,i){var o,a,s={};try{for(var u=Object(r.__values)(n),l=u.next();!l.done;l=u.next()){var c=l.value;ae(t,e,c)&&!i[se(c)]&&(s[se(c)]=new It([],{}))}}catch(t){o={error:t}}finally{try{l&&!l.done&&(a=u.return)&&a.call(u)}finally{if(o)throw o.error}}return Object(r.__assign)({},i,s)}(t,n,i,t.children))),slicedSegments:n}:{segmentGroup:t,slicedSegments:n}}(e,u,c,i),l=s.segmentGroup,h=s.slicedSegments;return 0===h.length&&l.hasChildren()?a.expandChildren(n,i,l).pipe(Object(d.a)(function(t){return new It(u,t)})):0===i.length&&0===h.length?Object(o.a)(new It(u,{})):a.expandSegment(n,l,i,h,vt,!0).pipe(Object(d.a)(function(t){return new It(u.concat(t.segments),t.children)}))}))},t.prototype.getChildConfig=function(t,e){var n=this;return e.children?Object(o.a)(new bt(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?Object(o.a)(e._loadedConfig):function(t,e){var n=e.canLoad;return n&&0!==n.length?Pt(Object(a.a)(n).pipe(Object(d.a)(function(n){var r=t.get(n);return Ot(r.canLoad?r.canLoad(e):r(e))}))):Object(o.a)(!0)}(t.injector,e).pipe(Object(h.a)(function(r){return r?n.configLoader.load(t.injector,e).pipe(Object(d.a)(function(t){return e._loadedConfig=t,t})):function(t){return new u.a(function(e){return e.error(((n=Error("NavigationCancelingError: Cannot load children because the guard of the route \"path: '"+t.path+"'\" returned false")).ngNavigationCancelingError=!0,n));var n})}(e)})):Object(o.a)(new bt([],t))},t.prototype.lineralizeSegments=function(t,e){for(var n=[],r=e.root;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return Object(o.a)(n);if(r.numberOfChildren>1||!r.children[vt])return ne(t.redirectTo);r=r.children[vt]}},t.prototype.applyRedirectCommands=function(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)},t.prototype.applyRedirectCreatreUrlTree=function(t,e,n,r){var i=this.createSegmentGroup(t,e.root,n,r);return new Lt(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)},t.prototype.createQueryParams=function(t,e){var n={};return At(t,function(t,r){if("string"==typeof t&&t.startsWith(":")){var i=t.substring(1);n[r]=e[i]}else n[r]=t}),n},t.prototype.createSegmentGroup=function(t,e,n,r){var i=this,o=this.createSegments(t,e.segments,n,r),a={};return At(e.children,function(e,o){a[o]=i.createSegmentGroup(t,e,n,r)}),new It(o,a)},t.prototype.createSegments=function(t,e,n,r){var i=this;return e.map(function(e){return e.path.startsWith(":")?i.findPosParam(t,e,r):i.findOrReturn(e,n)})},t.prototype.findPosParam=function(t,e,n){var r=n[e.path.substring(1)];if(!r)throw new Error("Cannot redirect to '"+t+"'. Cannot find '"+e.path+"'.");return r},t.prototype.findOrReturn=function(t,e){var n,i,o=0;try{for(var a=Object(r.__values)(e),s=a.next();!s.done;s=a.next()){var u=s.value;if(u.path===t.path)return e.splice(o),u;o++}}catch(t){n={error:t}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}return t},t}();function ie(t,e,n){if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}:{matched:!0,consumedSegments:[],lastChild:0,positionalParamSegments:{}};var r=(e.matcher||_t)(n,t,e);return r?{matched:!0,consumedSegments:r.consumed,lastChild:r.consumed.length,positionalParamSegments:r.posParams}:{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}}function oe(t){if(1===t.numberOfChildren&&t.children[vt]){var e=t.children[vt];return new It(t.segments.concat(e.segments),e.children)}return t}function ae(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0!==n.redirectTo}function se(t){return t.outlet||vt}var ue=function(){function t(t){this._root=t}return Object.defineProperty(t.prototype,"root",{get:function(){return this._root.value},enumerable:!0,configurable:!0}),t.prototype.parent=function(t){var e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null},t.prototype.children=function(t){var e=le(t,this._root);return e?e.children.map(function(t){return t.value}):[]},t.prototype.firstChild=function(t){var e=le(t,this._root);return e&&e.children.length>0?e.children[0].value:null},t.prototype.siblings=function(t){var e=ce(t,this._root);return e.length<2?[]:e[e.length-2].children.map(function(t){return t.value}).filter(function(e){return e!==t})},t.prototype.pathFromRoot=function(t){return ce(t,this._root).map(function(t){return t.value})},t}();function le(t,e){var n,i;if(t===e.value)return e;try{for(var o=Object(r.__values)(e.children),a=o.next();!a.done;a=o.next()){var s=le(t,a.value);if(s)return s}}catch(t){n={error:t}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return null}function ce(t,e){var n,i;if(t===e.value)return[e];try{for(var o=Object(r.__values)(e.children),a=o.next();!a.done;a=o.next()){var s=ce(t,a.value);if(s.length)return s.unshift(e),s}}catch(t){n={error:t}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return[]}var he=function(){function t(t,e){this.value=t,this.children=e}return t.prototype.toString=function(){return"TreeNode("+this.value+")"},t}();function de(t){var e={};return t&&t.children.forEach(function(t){return e[t.value.outlet]=t}),e}var pe=function(t){function e(e,n){var r=t.call(this,e)||this;return r.snapshot=n,_e(r,e),r}return Object(r.__extends)(e,t),e.prototype.toString=function(){return this.snapshot.toString()},e}(ue);function fe(t,e){var n=function(t,e){var n=new ge([],{},{},"",{},vt,e,null,t.root,-1,{});return new ye("",new he(n,[]))}(t,e),r=new c.a([new Nt("",{})]),i=new c.a({}),o=new c.a({}),a=new c.a({}),s=new c.a(""),u=new me(r,i,a,s,o,vt,e,n.root);return u.snapshot=n.root,new pe(new he(u,[]),n)}var me=function(){function t(t,e,n,r,i,o,a,s){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=a,this._futureSnapshot=s}return Object.defineProperty(t.prototype,"routeConfig",{get:function(){return this._futureSnapshot.routeConfig},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){return this._routerState.root},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return this._routerState.parent(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"firstChild",{get:function(){return this._routerState.firstChild(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"children",{get:function(){return this._routerState.children(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pathFromRoot",{get:function(){return this._routerState.pathFromRoot(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paramMap",{get:function(){return this._paramMap||(this._paramMap=this.params.pipe(Object(d.a)(function(t){return yt(t)}))),this._paramMap},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"queryParamMap",{get:function(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Object(d.a)(function(t){return yt(t)}))),this._queryParamMap},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return this.snapshot?this.snapshot.toString():"Future("+this._futureSnapshot+")"},t}();function ve(t,e){void 0===e&&(e="emptyOnly");var n=t.pathFromRoot,i=0;if("always"!==e)for(i=n.length-1;i>=1;){var o=n[i],a=n[i-1];if(o.routeConfig&&""===o.routeConfig.path)i--;else{if(a.component)break;i--}}return function(t){return t.reduce(function(t,e){return{params:Object(r.__assign)({},t.params,e.params),data:Object(r.__assign)({},t.data,e.data),resolve:Object(r.__assign)({},t.resolve,e._resolvedData)}},{params:{},data:{},resolve:{}})}(n.slice(i))}var ge=function(){function t(t,e,n,r,i,o,a,s,u,l,c){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=a,this.routeConfig=s,this._urlSegment=u,this._lastPathIndex=l,this._resolve=c}return Object.defineProperty(t.prototype,"root",{get:function(){return this._routerState.root},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return this._routerState.parent(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"firstChild",{get:function(){return this._routerState.firstChild(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"children",{get:function(){return this._routerState.children(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pathFromRoot",{get:function(){return this._routerState.pathFromRoot(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paramMap",{get:function(){return this._paramMap||(this._paramMap=yt(this.params)),this._paramMap},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"queryParamMap",{get:function(){return this._queryParamMap||(this._queryParamMap=yt(this.queryParams)),this._queryParamMap},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return"Route(url:'"+this.url.map(function(t){return t.toString()}).join("/")+"', path:'"+(this.routeConfig?this.routeConfig.path:"")+"')"},t}(),ye=function(t){function e(e,n){var r=t.call(this,n)||this;return r.url=e,_e(r,n),r}return Object(r.__extends)(e,t),e.prototype.toString=function(){return be(this._root)},e}(ue);function _e(t,e){e.value._routerState=t,e.children.forEach(function(e){return _e(t,e)})}function be(t){var e=t.children.length>0?" { "+t.children.map(be).join(", ")+" } ":"";return""+t.value+e}function we(t){if(t.snapshot){var e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Tt(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),Tt(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;++n)if(!Tt(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),Tt(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function xe(t,e){var n,r;return Tt(t.params,e.params)&&Dt(n=t.url,r=e.url)&&n.every(function(t,e){return Tt(t.parameters,r[e].parameters)})&&!(!t.parent!=!e.parent)&&(!t.parent||xe(t.parent,e.parent))}function Ee(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Se(t,e,n,r,i){var o={};return r&&At(r,function(t,e){o[e]=Array.isArray(t)?t.map(function(t){return""+t}):""+t}),new Lt(n.root===t?e:function t(e,n,r){var i={};return At(e.children,function(e,o){i[o]=e===n?r:t(e,n,r)}),new It(e.segments,i)}(n.root,t,e),o,i)}var Te=function(){function t(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&Ee(n[0]))throw new Error("Root segment cannot have matrix parameters");var r=n.find(function(t){return"object"==typeof t&&null!=t&&t.outlets});if(r&&r!==Ct(n))throw new Error("{outlets:{}} has to be the last command")}return t.prototype.toRoot=function(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]},t}(),Me=function(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n};function Ce(t){return"object"==typeof t&&null!=t&&t.outlets?t.outlets[vt]:""+t}function Ae(t,e,n){if(t||(t=new It([],{})),0===t.segments.length&&t.hasChildren())return Pe(t,e,n);var r=function(t,e,n){for(var r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};i<t.segments.length;){if(r>=n.length)return o;var a=t.segments[i],s=Ce(n[r]),u=r<n.length-1?n[r+1]:null;if(i>0&&void 0===s)break;if(s&&u&&"object"==typeof u&&void 0===u.outlets){if(!Ie(s,u,a))return o;r+=2}else{if(!Ie(s,{},a))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){var o=new It(t.segments.slice(0,r.pathIndex),{});return o.children[vt]=new It(t.segments.slice(r.pathIndex),t.children),Pe(o,0,i)}return r.match&&0===i.length?new It(t.segments,{}):r.match&&!t.hasChildren()?Oe(t,e,n):r.match?Pe(t,0,i):Oe(t,e,n)}function Pe(t,e,n){if(0===n.length)return new It(t.segments,{});var r=function(t){var e,n;return"object"!=typeof t[0]?((e={})[vt]=t,e):void 0===t[0].outlets?((n={})[vt]=t,n):t[0].outlets}(n),i={};return At(r,function(n,r){null!==n&&(i[r]=Ae(t.children[r],e,n))}),At(t.children,function(t,e){void 0===r[e]&&(i[e]=t)}),new It(t.segments,i)}function Oe(t,e,n){for(var r=t.segments.slice(0,e),i=0;i<n.length;){if("object"==typeof n[i]&&void 0!==n[i].outlets){var o=Re(n[i].outlets);return new It(r,o)}if(0===i&&Ee(n[0]))r.push(new Nt(t.segments[e].path,n[0])),i++;else{var a=Ce(n[i]),s=i<n.length-1?n[i+1]:null;a&&s&&Ee(s)?(r.push(new Nt(a,Le(s))),i+=2):(r.push(new Nt(a,{})),i++)}}return new It(r,{})}function Re(t){var e={};return At(t,function(t,n){null!==t&&(e[n]=Oe(new It([],{}),0,t))}),e}function Le(t){var e={};return At(t,function(t,n){return e[n]=""+t}),e}function Ie(t,e,n){return t==n.path&&Tt(e,n.parameters)}var Ne=function(t){this.path=t,this.route=this.path[this.path.length-1]},De=function(t,e){this.component=t,this.route=e},ke=function(){function t(t,e,n,r){this.future=t,this.curr=e,this.moduleInjector=n,this.forwardEvent=r,this.canActivateChecks=[],this.canDeactivateChecks=[]}return t.prototype.initialize=function(t){var e=this.future._root;this.setupChildRouteGuards(e,this.curr?this.curr._root:null,t,[e.value])},t.prototype.checkGuards=function(){var t=this;return this.isDeactivating()||this.isActivating()?this.runCanDeactivateChecks().pipe(Object(h.a)(function(e){return e?t.runCanActivateChecks():Object(o.a)(!1)})):Object(o.a)(!0)},t.prototype.resolveData=function(t){var e=this;return this.isActivating()?Object(a.a)(this.canActivateChecks).pipe(Object(p.a)(function(n){return e.runResolve(n.route,t)}),function(t,e){return arguments.length>=2?function(n){return Object(K.a)(q(t,e),y(1),C(e))(n)}:function(e){return Object(K.a)(q(function(e,n,r){return t(e,n,r+1)}),y(1))(e)}}(function(t,e){return t})):Object(o.a)(null)},t.prototype.isDeactivating=function(){return 0!==this.canDeactivateChecks.length},t.prototype.isActivating=function(){return 0!==this.canActivateChecks.length},t.prototype.setupChildRouteGuards=function(t,e,n,r){var i=this,o=de(e);t.children.forEach(function(t){i.setupRouteGuards(t,o[t.value.outlet],n,r.concat([t.value])),delete o[t.value.outlet]}),At(o,function(t,e){return i.deactivateRouteAndItsChildren(t,n.getContext(e))})},t.prototype.setupRouteGuards=function(t,e,n,r){var i=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&i.routeConfig===o.routeConfig){var s=this.shouldRunGuardsAndResolvers(o,i,i.routeConfig.runGuardsAndResolvers);s?this.canActivateChecks.push(new Ne(r)):(i.data=o.data,i._resolvedData=o._resolvedData),this.setupChildRouteGuards(t,e,i.component?a?a.children:null:n,r),s&&this.canDeactivateChecks.push(new De(a.outlet.component,o))}else o&&this.deactivateRouteAndItsChildren(e,a),this.canActivateChecks.push(new Ne(r)),this.setupChildRouteGuards(t,null,i.component?a?a.children:null:n,r)},t.prototype.shouldRunGuardsAndResolvers=function(t,e,n){switch(n){case"always":return!0;case"paramsOrQueryParamsChange":return!xe(t,e)||!Tt(t.queryParams,e.queryParams);case"paramsChange":default:return!xe(t,e)}},t.prototype.deactivateRouteAndItsChildren=function(t,e){var n=this,r=de(t),i=t.value;At(r,function(t,r){n.deactivateRouteAndItsChildren(t,i.component?e?e.children.getContext(r):null:e)}),this.canDeactivateChecks.push(new De(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))},t.prototype.runCanDeactivateChecks=function(){var t=this;return Object(a.a)(this.canDeactivateChecks).pipe(Object(h.a)(function(e){return t.runCanDeactivate(e.component,e.route)}),U(function(t){return!0===t}))},t.prototype.runCanActivateChecks=function(){var t=this;return Object(a.a)(this.canActivateChecks).pipe(Object(p.a)(function(e){return Pt(Object(a.a)([t.fireChildActivationStart(e.route.parent),t.fireActivationStart(e.route),t.runCanActivateChild(e.path),t.runCanActivate(e.route)]))}),U(function(t){return!0===t}))},t.prototype.fireActivationStart=function(t){return null!==t&&this.forwardEvent&&this.forwardEvent(new dt(t)),Object(o.a)(!0)},t.prototype.fireChildActivationStart=function(t){return null!==t&&this.forwardEvent&&this.forwardEvent(new ct(t)),Object(o.a)(!0)},t.prototype.runCanActivate=function(t){var e=this,n=t.routeConfig?t.routeConfig.canActivate:null;return n&&0!==n.length?Pt(Object(a.a)(n).pipe(Object(d.a)(function(n){var r=e.getToken(n,t);return Ot(r.canActivate?r.canActivate(t,e.future):r(t,e.future)).pipe(H())}))):Object(o.a)(!0)},t.prototype.runCanActivateChild=function(t){var e=this,n=t[t.length-1],r=t.slice(0,t.length-1).reverse().map(function(t){return e.extractCanActivateChild(t)}).filter(function(t){return null!==t});return Pt(Object(a.a)(r).pipe(Object(d.a)(function(t){return Pt(Object(a.a)(t.guards).pipe(Object(d.a)(function(r){var i=e.getToken(r,t.node);return Ot(i.canActivateChild?i.canActivateChild(n,e.future):i(n,e.future)).pipe(H())})))})))},t.prototype.extractCanActivateChild=function(t){var e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null},t.prototype.runCanDeactivate=function(t,e){var n=this,r=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return r&&0!==r.length?Object(a.a)(r).pipe(Object(h.a)(function(r){var i=n.getToken(r,e);return Ot(i.canDeactivate?i.canDeactivate(t,e,n.curr,n.future):i(t,e,n.curr,n.future)).pipe(H())})).pipe(U(function(t){return!0===t})):Object(o.a)(!0)},t.prototype.runResolve=function(t,e){return this.resolveNode(t._resolve,t).pipe(Object(d.a)(function(n){return t._resolvedData=n,t.data=Object(r.__assign)({},t.data,ve(t,e).resolve),null}))},t.prototype.resolveNode=function(t,e){var n=this,r=Object.keys(t);if(0===r.length)return Object(o.a)({});if(1===r.length){var i=r[0];return this.getResolver(t[i],e).pipe(Object(d.a)(function(t){var e;return(e={})[i]=t,e}))}var s={};return Object(a.a)(r).pipe(Object(h.a)(function(r){return n.getResolver(t[r],e).pipe(Object(d.a)(function(t){return s[r]=t,t}))})).pipe(R(),Object(d.a)(function(){return s}))},t.prototype.getResolver=function(t,e){var n=this.getToken(t,e);return Ot(n.resolve?n.resolve(e,this.future):n(e,this.future))},t.prototype.getToken=function(t,e){var n=function(t){if(!t)return null;for(var e=t.parent;e;e=e.parent){var n=e.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig}return null}(e);return(n?n.module.injector:this.moduleInjector).get(t)},t}(),Fe=function(){},je=function(){function t(t,e,n,r,i,o){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=o}return t.prototype.recognize=function(){try{var t=Ge(this.urlTree.root,[],[],this.config,this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,vt),n=new ge([],Object.freeze({}),Object.freeze(Object(r.__assign)({},this.urlTree.queryParams)),this.urlTree.fragment,{},vt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new he(n,e),a=new ye(this.url,i);return this.inheritParamsAndData(a._root),Object(o.a)(a)}catch(t){return new u.a(function(e){return e.error(t)})}},t.prototype.inheritParamsAndData=function(t){var e=this,n=t.value,r=ve(n,this.paramsInheritanceStrategy);n.params=Object.freeze(r.params),n.data=Object.freeze(r.data),t.children.forEach(function(t){return e.inheritParamsAndData(t)})},t.prototype.processSegmentGroup=function(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)},t.prototype.processChildren=function(t,e){var n,r=this,i=kt(e,function(e,n){return r.processSegmentGroup(t,e,n)});return n={},i.forEach(function(t){var e=n[t.value.outlet];if(e){var r=e.url.map(function(t){return t.toString()}).join("/"),i=t.value.url.map(function(t){return t.toString()}).join("/");throw new Error("Two segments cannot have the same outlet name: '"+r+"' and '"+i+"'.")}n[t.value.outlet]=t.value}),i.sort(function(t,e){return t.value.outlet===vt?-1:e.value.outlet===vt?1:t.value.outlet.localeCompare(e.value.outlet)}),i},t.prototype.processSegment=function(t,e,n,i){var o,a;try{for(var s=Object(r.__values)(t),u=s.next();!u.done;u=s.next()){var l=u.value;try{return this.processSegmentAgainstRoute(l,e,n,i)}catch(t){if(!(t instanceof Fe))throw t}}}catch(t){o={error:t}}finally{try{u&&!u.done&&(a=s.return)&&a.call(s)}finally{if(o)throw o.error}}if(this.noLeftoversInUrl(e,n,i))return[];throw new Fe},t.prototype.noLeftoversInUrl=function(t,e,n){return 0===e.length&&!t.children[n]},t.prototype.processSegmentAgainstRoute=function(t,e,n,i){if(t.redirectTo)throw new Fe;if((t.outlet||vt)!==i)throw new Fe;var o,a=[],s=[];if("**"===t.path){var u=n.length>0?Ct(n).parameters:{};o=new ge(n,u,Object.freeze(Object(r.__assign)({},this.urlTree.queryParams)),this.urlTree.fragment,He(t),i,t.component,t,Ue(e),Be(e)+n.length,We(t))}else{var l=function(t,e,n){if(""===e.path){if("full"===e.pathMatch&&(t.hasChildren()||n.length>0))throw new Fe;return{consumedSegments:[],lastChild:0,parameters:{}}}var i=(e.matcher||_t)(n,t,e);if(!i)throw new Fe;var o={};At(i.posParams,function(t,e){o[e]=t.path});var a=i.consumed.length>0?Object(r.__assign)({},o,i.consumed[i.consumed.length-1].parameters):o;return{consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:a}}(e,t,n);a=l.consumedSegments,s=n.slice(l.lastChild),o=new ge(a,l.parameters,Object.freeze(Object(r.__assign)({},this.urlTree.queryParams)),this.urlTree.fragment,He(t),i,t.component,t,Ue(e),Be(e)+a.length,We(t))}var c=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),h=Ge(e,a,s,c,this.relativeLinkResolution),d=h.segmentGroup,p=h.slicedSegments;if(0===p.length&&d.hasChildren()){var f=this.processChildren(c,d);return[new he(o,f)]}if(0===c.length&&0===p.length)return[new he(o,[])];var m=this.processSegment(c,d,p,vt);return[new he(o,m)]},t}();function Ue(t){for(var e=t;e._sourceSegment;)e=e._sourceSegment;return e}function Be(t){for(var e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;e._sourceSegment;)n+=(e=e._sourceSegment)._segmentIndexShift?e._segmentIndexShift:0;return n-1}function Ge(t,e,n,i,o){if(n.length>0&&function(t,e,n){return i.some(function(n){return Ve(t,e,n)&&ze(n)!==vt})}(t,n)){var a=new It(e,function(t,e,n,i){var o,a,s={};s[vt]=i,i._sourceSegment=t,i._segmentIndexShift=e.length;try{for(var u=Object(r.__values)(n),l=u.next();!l.done;l=u.next()){var c=l.value;if(""===c.path&&ze(c)!==vt){var h=new It([],{});h._sourceSegment=t,h._segmentIndexShift=e.length,s[ze(c)]=h}}}catch(t){o={error:t}}finally{try{l&&!l.done&&(a=u.return)&&a.call(u)}finally{if(o)throw o.error}}return s}(t,e,i,new It(n,t.children)));return a._sourceSegment=t,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return i.some(function(n){return Ve(t,e,n)})}(t,n)){var s=new It(t.segments,function(t,e,n,i,o,a){var s,u,l={};try{for(var c=Object(r.__values)(i),h=c.next();!h.done;h=c.next()){var d=h.value;if(Ve(t,n,d)&&!o[ze(d)]){var p=new It([],{});p._sourceSegment=t,p._segmentIndexShift="legacy"===a?t.segments.length:e.length,l[ze(d)]=p}}}catch(t){s={error:t}}finally{try{h&&!h.done&&(u=c.return)&&u.call(c)}finally{if(s)throw s.error}}return Object(r.__assign)({},o,l)}(t,e,n,i,t.children,o));return s._sourceSegment=t,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:n}}var u=new It(t.segments,t.children);return u._sourceSegment=t,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:n}}function Ve(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0===n.redirectTo}function ze(t){return t.outlet||vt}function He(t){return t.data||{}}function We(t){return t.resolve||{}}var qe=function(){},Xe=function(){function t(){}return t.prototype.shouldDetach=function(t){return!1},t.prototype.store=function(t,e){},t.prototype.shouldAttach=function(t){return!1},t.prototype.retrieve=function(t){return null},t.prototype.shouldReuseRoute=function(t,e){return t.routeConfig===e.routeConfig},t}(),Ye=new i.s("ROUTES"),Ke=function(){function t(t,e,n,r){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}return t.prototype.load=function(t,e){var n=this;return this.onLoadStartListener&&this.onLoadStartListener(e),this.loadModuleFactory(e.loadChildren).pipe(Object(d.a)(function(r){n.onLoadEndListener&&n.onLoadEndListener(e);var i=r.create(t);return new bt(Mt(i.injector.get(Ye)).map(St),i)}))},t.prototype.loadModuleFactory=function(t){var e=this;return"string"==typeof t?Object(a.a)(this.loader.load(t)):Ot(t()).pipe(Object(h.a)(function(t){return t instanceof i.y?Object(o.a)(t):Object(a.a)(e.compiler.compileModuleAsync(t))}))},t}(),Ze=function(){},Qe=function(){function t(){}return t.prototype.shouldProcessUrl=function(t){return!0},t.prototype.extract=function(t){return t},t.prototype.merge=function(t,e){return t},t}();function Je(t){throw t}function $e(t,e,n){return e.parse("/")}function tn(t,e){return Object(o.a)(null)}var en=function(){function t(t,e,n,r,o,a,u,l){var h=this;this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=r,this.config=l,this.navigations=new c.a(null),this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new s.a,this.errorHandler=Je,this.malformedUriErrorHandler=$e,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:tn,afterPreactivation:tn},this.urlHandlingStrategy=new Qe,this.routeReuseStrategy=new Xe,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="legacy",this.ngModule=o.get(i.A),this.console=o.get(i.Ga);var d=o.get(i.C);this.isNgZoneEnabled=d instanceof i.C,this.resetConfig(l),this.currentUrlTree=new Lt(new It([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.configLoader=new Ke(a,u,function(t){return h.triggerEvent(new ut(t))},function(t){return h.triggerEvent(new lt(t))}),this.routerState=fe(this.currentUrlTree,this.rootComponentType),this.processNavigations()}return t.prototype.resetRootComponentType=function(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType},t.prototype.initialNavigation=function(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})},t.prototype.setUpLocationChangeListener=function(){var t=this;this.locationSubscription||(this.locationSubscription=this.location.subscribe(function(e){var n=t.parseUrl(e.url),r="popstate"===e.type?"popstate":"hashchange",i=e.state&&e.state.navigationId?{navigationId:e.state.navigationId}:null;setTimeout(function(){t.scheduleNavigation(n,r,i,{replaceUrl:!0})},0)}))},Object.defineProperty(t.prototype,"url",{get:function(){return this.serializeUrl(this.currentUrlTree)},enumerable:!0,configurable:!0}),t.prototype.triggerEvent=function(t){this.events.next(t)},t.prototype.resetConfig=function(t){wt(t),this.config=t.map(St),this.navigated=!1,this.lastSuccessfulId=-1},t.prototype.ngOnDestroy=function(){this.dispose()},t.prototype.dispose=function(){this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=null)},t.prototype.createUrlTree=function(t,e){void 0===e&&(e={});var n=e.relativeTo,o=e.queryParams,a=e.fragment,s=e.preserveQueryParams,u=e.queryParamsHandling,l=e.preserveFragment;Object(i.Ba)()&&s&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead.");var c=n||this.routerState.root,h=l?this.currentUrlTree.fragment:a,d=null;if(u)switch(u){case"merge":d=Object(r.__assign)({},this.currentUrlTree.queryParams,o);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}else d=s?this.currentUrlTree.queryParams:o||null;return null!==d&&(d=this.removeEmptyProps(d)),function(t,e,n,i,o){if(0===n.length)return Se(e.root,e.root,e,i,o);var a=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new Te(!0,0,t);var e=0,n=!1,i=t.reduce(function(t,i,o){if("object"==typeof i&&null!=i){if(i.outlets){var a={};return At(i.outlets,function(t,e){a[e]="string"==typeof t?t.split("/"):t}),Object(r.__spread)(t,[{outlets:a}])}if(i.segmentPath)return Object(r.__spread)(t,[i.segmentPath])}return"string"!=typeof i?Object(r.__spread)(t,[i]):0===o?(i.split("/").forEach(function(r,i){0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):Object(r.__spread)(t,[i])},[]);return new Te(n,e,i)}(n);if(a.toRoot())return Se(e.root,new It([],{}),e,i,o);var s=function(t,n,r){if(t.isAbsolute)return new Me(e.root,!0,0);if(-1===r.snapshot._lastPathIndex)return new Me(r.snapshot._urlSegment,!0,0);var i=Ee(t.commands[0])?0:1;return function(e,n,o){for(var a=r.snapshot._urlSegment,s=r.snapshot._lastPathIndex+i,u=t.numberOfDoubleDots;u>s;){if(u-=s,!(a=a.parent))throw new Error("Invalid number of '../'");s=a.segments.length}return new Me(a,!1,s-u)}()}(a,0,t),u=s.processChildren?Pe(s.segmentGroup,s.index,a.commands):Ae(s.segmentGroup,s.index,a.commands);return Se(s.segmentGroup,u,e,i,o)}(c,this.currentUrlTree,t,d,h)},t.prototype.navigateByUrl=function(t,e){void 0===e&&(e={skipLocationChange:!1}),Object(i.Ba)()&&this.isNgZoneEnabled&&!i.C.isInAngularZone()&&this.console.warn("Navigation triggered outside Angular zone, did you forget to call 'ngZone.run()'?");var n=t instanceof Lt?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,e)},t.prototype.navigate=function(t,e){return void 0===e&&(e={skipLocationChange:!1}),function(t){for(var e=0;e<t.length;e++){var n=t[e];if(null==n)throw new Error("The requested path contains "+n+" segment at index "+e)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)},t.prototype.serializeUrl=function(t){return this.urlSerializer.serialize(t)},t.prototype.parseUrl=function(t){var e;try{e=this.urlSerializer.parse(t)}catch(n){e=this.malformedUriErrorHandler(n,this.urlSerializer,t)}return e},t.prototype.isActive=function(t,e){if(t instanceof Lt)return Rt(this.currentUrlTree,t,e);var n=this.parseUrl(t);return Rt(this.currentUrlTree,n,e)},t.prototype.removeEmptyProps=function(t){return Object.keys(t).reduce(function(e,n){var r=t[n];return null!==r&&void 0!==r&&(e[n]=r),e},{})},t.prototype.processNavigations=function(){var t=this;this.navigations.pipe(Object(p.a)(function(e){return e?(t.executeScheduledNavigation(e),e.promise.catch(function(){})):Object(o.a)(null)})).subscribe(function(){})},t.prototype.scheduleNavigation=function(t,e,n,r){var i=this.navigations.value;if(i&&"imperative"!==e&&"imperative"===i.source&&i.rawUrl.toString()===t.toString())return Promise.resolve(!0);if(i&&"hashchange"==e&&"popstate"===i.source&&i.rawUrl.toString()===t.toString())return Promise.resolve(!0);if(i&&"popstate"==e&&"hashchange"===i.source&&i.rawUrl.toString()===t.toString())return Promise.resolve(!0);var o=null,a=null,s=new Promise(function(t,e){o=t,a=e}),u=++this.navigationId;return this.navigations.next({id:u,source:e,state:n,rawUrl:t,extras:r,resolve:o,reject:a,promise:s}),s.catch(function(t){return Promise.reject(t)})},t.prototype.executeScheduledNavigation=function(t){var e=this,n=t.id,r=t.rawUrl,i=t.extras,o=t.resolve,a=t.reject,s=t.source,u=t.state,l=this.urlHandlingStrategy.extract(r),c=!this.navigated||l.toString()!==this.currentUrlTree.toString();("reload"===this.onSameUrlNavigation||c)&&this.urlHandlingStrategy.shouldProcessUrl(r)?("eager"!==this.urlUpdateStrategy||i.skipLocationChange||this.setBrowserUrl(r,!!i.replaceUrl,n),this.events.next(new $(n,this.serializeUrl(l),s,u)),Promise.resolve().then(function(t){return e.runNavigate(l,r,!!i.skipLocationChange,!!i.replaceUrl,n,null)}).then(o,a)):c&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)?(this.events.next(new $(n,this.serializeUrl(l),s,u)),Promise.resolve().then(function(t){return e.runNavigate(l,r,!1,!1,n,fe(l,e.rootComponentType).snapshot)}).then(o,a)):(this.rawUrlTree=r,o(null))},t.prototype.runNavigate=function(t,e,n,i,a,s){var u=this;return a!==this.navigationId?(this.events.next(new et(a,this.serializeUrl(t),"Navigation ID "+a+" is not equal to the current navigation id "+this.navigationId)),Promise.resolve(!1)):new Promise(function(l,p){var f,m=(s?Object(o.a)({appliedUrl:t,snapshot:s}):new re(u.ngModule.injector,u.configLoader,u.urlSerializer,t,u.config).apply().pipe(Object(h.a)(function(e){return function(t,e,n,r,i,o){return void 0===i&&(i="emptyOnly"),void 0===o&&(o="legacy"),new je(t,e,n,r,i,o).recognize()}(u.rootComponentType,u.config,e,u.serializeUrl(e),u.paramsInheritanceStrategy,u.relativeLinkResolution).pipe(Object(d.a)(function(n){return u.events.next(new rt(a,u.serializeUrl(t),u.serializeUrl(e),n)),{appliedUrl:e,snapshot:n}}))}))).pipe(Object(h.a)(function(r){return"boolean"==typeof r?Object(o.a)(r):u.hooks.beforePreactivation(r.snapshot,{navigationId:a,appliedUrlTree:t,rawUrlTree:e,skipLocationChange:n,replaceUrl:i}).pipe(Object(d.a)(function(){return r}))})).pipe(Object(d.a)(function(t){if("boolean"==typeof t)return t;var e=t.appliedUrl,n=t.snapshot;return(f=new ke(n,u.routerState.snapshot,u.ngModule.injector,function(t){return u.triggerEvent(t)})).initialize(u.rootContexts),{appliedUrl:e,snapshot:n}})).pipe(Object(h.a)(function(e){if("boolean"==typeof e||u.navigationId!==a)return Object(o.a)(!1);var n=e.appliedUrl,r=e.snapshot;return u.triggerEvent(new it(a,u.serializeUrl(t),u.serializeUrl(n),r)),f.checkGuards().pipe(Object(d.a)(function(e){return u.triggerEvent(new ot(a,u.serializeUrl(t),u.serializeUrl(n),r,e)),{appliedUrl:n,snapshot:r,shouldActivate:e}}))})).pipe(Object(h.a)(function(e){return"boolean"==typeof e||u.navigationId!==a?Object(o.a)(!1):e.shouldActivate&&f.isActivating()?(u.triggerEvent(new at(a,u.serializeUrl(t),u.serializeUrl(e.appliedUrl),e.snapshot)),f.resolveData(u.paramsInheritanceStrategy).pipe(Object(d.a)(function(){return u.triggerEvent(new st(a,u.serializeUrl(t),u.serializeUrl(e.appliedUrl),e.snapshot)),e}))):Object(o.a)(e)})).pipe(Object(h.a)(function(r){return"boolean"==typeof r||u.navigationId!==a?Object(o.a)(!1):u.hooks.afterPreactivation(r.snapshot,{navigationId:a,appliedUrlTree:t,rawUrlTree:e,skipLocationChange:n,replaceUrl:i}).pipe(Object(d.a)(function(){return r}))})).pipe(Object(d.a)(function(t){if("boolean"==typeof t||u.navigationId!==a)return!1;var e,n,i,o=t.appliedUrl,s=t.shouldActivate;return s?{appliedUrl:o,state:(i=function t(e,n,i){if(i&&e.shouldReuseRoute(n.value,i.value.snapshot)){(l=i.value)._futureSnapshot=n.value;var o=function(e,n,i){return n.children.map(function(n){var o,a;try{for(var s=Object(r.__values)(i.children),u=s.next();!u.done;u=s.next()){var l=u.value;if(e.shouldReuseRoute(l.value.snapshot,n.value))return t(e,n,l)}}catch(t){o={error:t}}finally{try{u&&!u.done&&(a=s.return)&&a.call(s)}finally{if(o)throw o.error}}return t(e,n)})}(e,n,i);return new he(l,o)}var a=e.retrieve(n.value);if(a){var s=a.route;return function t(e,n){if(e.value.routeConfig!==n.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(e.children.length!==n.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");n.value._futureSnapshot=e.value;for(var r=0;r<e.children.length;++r)t(e.children[r],n.children[r])}(n,s),s}var u,l=new me(new c.a((u=n.value).url),new c.a(u.params),new c.a(u.queryParams),new c.a(u.fragment),new c.a(u.data),u.outlet,u.component,u);return o=n.children.map(function(n){return t(e,n)}),new he(l,o)}(u.routeReuseStrategy,(e=t.snapshot)._root,(n=u.routerState)?n._root:void 0),new pe(i,e)),shouldActivate:s}:{appliedUrl:o,state:null,shouldActivate:s}}));u.activateRoutes(m,u.routerState,u.currentUrlTree,a,t,e,n,i,l,p)})},t.prototype.activateRoutes=function(t,e,n,r,i,o,a,s,u,l){var c,h=this;t.forEach(function(t){if("boolean"!=typeof t&&t.shouldActivate&&r===h.navigationId&&t.state){var n=t.state;h.currentUrlTree=t.appliedUrl,h.rawUrlTree=h.urlHandlingStrategy.merge(h.currentUrlTree,o),h.routerState=n,"deferred"!==h.urlUpdateStrategy||a||h.setBrowserUrl(h.rawUrlTree,s,r),new nn(h.routeReuseStrategy,n,e,function(t){return h.triggerEvent(t)}).activate(h.rootContexts),c=!0}else c=!1}).then(function(){c?(h.navigated=!0,h.lastSuccessfulId=r,h.events.next(new tt(r,h.serializeUrl(i),h.serializeUrl(h.currentUrlTree))),u(!0)):(h.resetUrlToCurrentUrlTree(),h.events.next(new et(r,h.serializeUrl(i),"")),u(!1))},function(t){if((a=t)&&a.ngNavigationCancelingError)h.navigated=!0,h.resetStateAndUrl(e,n,o),h.events.next(new et(r,h.serializeUrl(i),t.message)),u(!1);else{h.resetStateAndUrl(e,n,o),h.events.next(new nt(r,h.serializeUrl(i),t));try{u(h.errorHandler(t))}catch(t){l(t)}}var a})},t.prototype.setBrowserUrl=function(t,e,n){var r=this.urlSerializer.serialize(t);this.location.isCurrentPathEqualTo(r)||e?this.location.replaceState(r,"",{navigationId:n}):this.location.go(r,"",{navigationId:n})},t.prototype.resetStateAndUrl=function(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()},t.prototype.resetUrlToCurrentUrlTree=function(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})},t}(),nn=function(){function t(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}return t.prototype.activate=function(t){var e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),we(this.futureState.root),this.activateChildRoutes(e,n,t)},t.prototype.deactivateChildRoutes=function(t,e,n){var r=this,i=de(e);t.children.forEach(function(t){var e=t.value.outlet;r.deactivateRoutes(t,i[e],n),delete i[e]}),At(i,function(t,e){r.deactivateRouteAndItsChildren(t,n)})},t.prototype.deactivateRoutes=function(t,e,n){var r=t.value,i=e?e.value:null;if(r===i)if(r.component){var o=n.getContext(r.outlet);o&&this.deactivateChildRoutes(t,e,o.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)},t.prototype.deactivateRouteAndItsChildren=function(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)},t.prototype.detachAndStoreRouteSubtree=function(t,e){var n=e.getContext(t.value.outlet);if(n&&n.outlet){var r=n.outlet.detach(),i=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:r,route:t,contexts:i})}},t.prototype.deactivateRouteAndOutlet=function(t,e){var n=this,r=e.getContext(t.value.outlet);if(r){var i=de(t),o=t.value.component?r.children:e;At(i,function(t,e){return n.deactivateRouteAndItsChildren(t,o)}),r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated())}},t.prototype.activateChildRoutes=function(t,e,n){var r=this,i=de(e);t.children.forEach(function(t){r.activateRoutes(t,i[t.value.outlet],n),r.forwardEvent(new pt(t.value.snapshot))}),t.children.length&&this.forwardEvent(new ht(t.value.snapshot))},t.prototype.activateRoutes=function(t,e,n){var r=t.value,i=e?e.value:null;if(we(r),r===i)if(r.component){var o=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,o.children)}else this.activateChildRoutes(t,e,n);else if(r.component)if(o=n.getOrCreateContext(r.outlet),this.routeReuseStrategy.shouldAttach(r.snapshot)){var a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),rn(a.route)}else{var s=function(t){for(var e=r.snapshot.parent;e;e=e.parent){var n=e.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig;if(n&&n.component)return null}return null}(),u=s?s.module.componentFactoryResolver:null;o.attachRef=null,o.route=r,o.resolver=u,o.outlet&&o.outlet.activateWith(r,u),this.activateChildRoutes(t,null,o.children)}else this.activateChildRoutes(t,null,n)},t}();function rn(t){we(t.value),t.children.forEach(rn)}var on=function(){function t(t,e,n){var r=this;this.router=t,this.route=e,this.locationStrategy=n,this.commands=[],this.subscription=t.events.subscribe(function(t){t instanceof tt&&r.updateTargetUrlAndHref()})}return Object.defineProperty(t.prototype,"routerLink",{set:function(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"preserveQueryParams",{set:function(t){Object(i.Ba)()&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead."),this.preserve=t},enumerable:!0,configurable:!0}),t.prototype.ngOnChanges=function(t){this.updateTargetUrlAndHref()},t.prototype.ngOnDestroy=function(){this.subscription.unsubscribe()},t.prototype.onClick=function(t,e,n,r){if(0!==t||e||n||r)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;var i={skipLocationChange:an(this.skipLocationChange),replaceUrl:an(this.replaceUrl)};return this.router.navigateByUrl(this.urlTree,i),!1},t.prototype.updateTargetUrlAndHref=function(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))},Object.defineProperty(t.prototype,"urlTree",{get:function(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,preserveQueryParams:an(this.preserve),queryParamsHandling:this.queryParamsHandling,preserveFragment:an(this.preserveFragment)})},enumerable:!0,configurable:!0}),Object(r.__decorate)([Object(i.p)("attr.target"),Object(i.u)(),Object(r.__metadata)("design:type",String)],t.prototype,"target",void 0),t}();function an(t){return""===t||!!t}var sn=function(){function t(t,e,n,r){var i=this;this.router=t,this.element=e,this.renderer=n,this.cdr=r,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.subscription=t.events.subscribe(function(t){t instanceof tt&&i.update()})}return t.prototype.ngAfterContentInit=function(){var t=this;this.links.changes.subscribe(function(e){return t.update()}),this.linksWithHrefs.changes.subscribe(function(e){return t.update()}),this.update()},Object.defineProperty(t.prototype,"routerLinkActive",{set:function(t){var e=Array.isArray(t)?t:t.split(" ");this.classes=e.filter(function(t){return!!t})},enumerable:!0,configurable:!0}),t.prototype.ngOnChanges=function(t){this.update()},t.prototype.ngOnDestroy=function(){this.subscription.unsubscribe()},t.prototype.update=function(){var t=this;this.links&&this.linksWithHrefs&&this.router.navigated&&Promise.resolve().then(function(){var e=t.hasActiveLinks();t.isActive!==e&&(t.isActive=e,t.classes.forEach(function(n){e?t.renderer.addClass(t.element.nativeElement,n):t.renderer.removeClass(t.element.nativeElement,n)}))})},t.prototype.isLinkActive=function(t){var e=this;return function(n){return t.isActive(n.urlTree,e.routerLinkActiveOptions.exact)}},t.prototype.hasActiveLinks=function(){return this.links.some(this.isLinkActive(this.router))||this.linksWithHrefs.some(this.isLinkActive(this.router))},t}(),un=function(){return function(){this.outlet=null,this.route=null,this.resolver=null,this.children=new ln,this.attachRef=null}}(),ln=function(){function t(){this.contexts=new Map}return t.prototype.onChildOutletCreated=function(t,e){var n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)},t.prototype.onChildOutletDestroyed=function(t){var e=this.getContext(t);e&&(e.outlet=null)},t.prototype.onOutletDeactivated=function(){var t=this.contexts;return this.contexts=new Map,t},t.prototype.onOutletReAttached=function(t){this.contexts=t},t.prototype.getOrCreateContext=function(t){var e=this.getContext(t);return e||(e=new un,this.contexts.set(t,e)),e},t.prototype.getContext=function(t){return this.contexts.get(t)||null},t}(),cn=function(){function t(t,e,n,r,o){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new i.n,this.deactivateEvents=new i.n,this.name=r||vt,t.onChildOutletCreated(this.name,this)}return t.prototype.ngOnDestroy=function(){this.parentContexts.onChildOutletDestroyed(this.name)},t.prototype.ngOnInit=function(){if(!this.activated){var t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}},Object.defineProperty(t.prototype,"isActivated",{get:function(){return!!this.activated},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"component",{get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"activatedRoute",{get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"activatedRouteData",{get:function(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}},enumerable:!0,configurable:!0}),t.prototype.detach=function(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();var t=this.activated;return this.activated=null,this._activatedRoute=null,t},t.prototype.attach=function(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)},t.prototype.deactivate=function(){if(this.activated){var t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}},t.prototype.activateWith=function(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;var n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new hn(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)},Object(r.__decorate)([Object(r.__param)(3,Object(i.h)("name"))],t)}(),hn=function(){function t(t,e,n){this.route=t,this.childContexts=e,this.parent=n}return t.prototype.get=function(t,e){return t===me?this.route:t===ln?this.childContexts:this.parent.get(t,e)},t}(),dn=function(){},pn=function(){function t(){}return t.prototype.preload=function(t,e){return e().pipe(D(function(){return Object(o.a)(null)}))},t}(),fn=function(){function t(){}return t.prototype.preload=function(t,e){return Object(o.a)(null)},t}(),mn=function(){function t(t,e,n,r,i){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=new Ke(e,n,function(e){return t.triggerEvent(new ut(e))},function(e){return t.triggerEvent(new lt(e))})}return t.prototype.setUpPreloading=function(){var t=this;this.subscription=this.router.events.pipe(Object(f.a)(function(t){return t instanceof tt}),Object(p.a)(function(){return t.preload()})).subscribe(function(){})},t.prototype.preload=function(){var t=this.injector.get(i.A);return this.processRoutes(t,this.router.config)},t.prototype.ngOnDestroy=function(){this.subscription.unsubscribe()},t.prototype.processRoutes=function(t,e){var n,i,o=[];try{for(var s=Object(r.__values)(e),u=s.next();!u.done;u=s.next()){var l=u.value;if(l.loadChildren&&!l.canLoad&&l._loadedConfig){var c=l._loadedConfig;o.push(this.processRoutes(c.module,c.routes))}else l.loadChildren&&!l.canLoad?o.push(this.preloadConfig(t,l)):l.children&&o.push(this.processRoutes(t,l.children))}}catch(t){n={error:t}}finally{try{u&&!u.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}return Object(a.a)(o).pipe(Object(j.a)(),Object(d.a)(function(t){}))},t.prototype.preloadConfig=function(t,e){var n=this;return this.preloadingStrategy.preload(e,function(){return n.loader.load(t.injector,e).pipe(Object(h.a)(function(t){return e._loadedConfig=t,n.processRoutes(t.module,t.routes)}))})},t}(),vn=function(){function t(t,e,n){void 0===n&&(n={}),this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}return t.prototype.init=function(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()},t.prototype.createScrollEvents=function(){var t=this;return this.router.events.subscribe(function(e){e instanceof $?(t.store[t.lastId]=t.viewportScroller.getScrollPosition(),t.lastSource=e.navigationTrigger,t.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof tt&&(t.lastId=e.id,t.scheduleScrollEvent(e,t.router.parseUrl(e.urlAfterRedirects).fragment))})},t.prototype.consumeScrollEvents=function(){var t=this;return this.router.events.subscribe(function(e){e instanceof ft&&(e.position?"top"===t.options.scrollPositionRestoration?t.viewportScroller.scrollToPosition([0,0]):"enabled"===t.options.scrollPositionRestoration&&t.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===t.options.anchorScrolling?t.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==t.options.scrollPositionRestoration&&t.viewportScroller.scrollToPosition([0,0]))})},t.prototype.scheduleScrollEvent=function(t,e){this.router.triggerEvent(new ft(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))},t.prototype.ngOnDestroy=function(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()},t}(),gn=new i.s("ROUTER_CONFIGURATION"),yn=new i.s("ROUTER_FORROOT_GUARD"),_n=[Z.f,{provide:Ft,useClass:jt},{provide:en,useFactory:Mn,deps:[i.g,Ft,ln,Z.f,i.t,i.z,i.j,Ye,gn,[Ze,new i.D],[qe,new i.D]]},ln,{provide:me,useFactory:Cn,deps:[en]},{provide:i.z,useClass:i.N},mn,fn,pn,{provide:gn,useValue:{enableTracing:!1}}];function bn(){return new i.B("Router",en)}var wn=function(){function t(t,e){}var e;return e=t,t.forRoot=function(t,n){return{ngModule:e,providers:[_n,Tn(t),{provide:yn,useFactory:Sn,deps:[[en,new i.D,new i.M]]},{provide:gn,useValue:n||{}},{provide:Z.g,useFactory:En,deps:[Z.m,[new i.r(Z.a),new i.D],gn]},{provide:vn,useFactory:xn,deps:[en,Z.o,gn]},{provide:dn,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:fn},{provide:i.B,multi:!0,useFactory:bn},[An,{provide:i.d,multi:!0,useFactory:Pn,deps:[An]},{provide:Rn,useFactory:On,deps:[An]},{provide:i.b,multi:!0,useExisting:Rn}]]}},t.forChild=function(t){return{ngModule:e,providers:[Tn(t)]}},e=Object(r.__decorate)([Object(r.__param)(0,Object(i.D)()),Object(r.__param)(0,Object(i.r)(yn)),Object(r.__param)(1,Object(i.D)())],t)}();function xn(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new vn(t,e,n)}function En(t,e,n){return void 0===n&&(n={}),n.useHash?new Z.d(t,e):new Z.l(t,e)}function Sn(t){if(t)throw new Error("RouterModule.forRoot() called twice. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function Tn(t){return[{provide:i.a,multi:!0,useValue:t},{provide:Ye,multi:!0,useValue:t}]}function Mn(t,e,n,r,i,o,a,s,u,l,c){void 0===u&&(u={});var h=new en(null,e,n,r,i,o,a,Mt(s));if(l&&(h.urlHandlingStrategy=l),c&&(h.routeReuseStrategy=c),u.errorHandler&&(h.errorHandler=u.errorHandler),u.malformedUriErrorHandler&&(h.malformedUriErrorHandler=u.malformedUriErrorHandler),u.enableTracing){var d=Object(Q.s)();h.events.subscribe(function(t){d.logGroup("Router Event: "+t.constructor.name),d.log(t.toString()),d.log(t),d.logGroupEnd()})}return u.onSameUrlNavigation&&(h.onSameUrlNavigation=u.onSameUrlNavigation),u.paramsInheritanceStrategy&&(h.paramsInheritanceStrategy=u.paramsInheritanceStrategy),u.urlUpdateStrategy&&(h.urlUpdateStrategy=u.urlUpdateStrategy),u.relativeLinkResolution&&(h.relativeLinkResolution=u.relativeLinkResolution),h}function Cn(t){return t.routerState.root}var An=function(){function t(t){this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new s.a}return t.prototype.appInitializer=function(){var t=this;return this.injector.get(Z.e,Promise.resolve(null)).then(function(){var e=null,n=new Promise(function(t){return e=t}),r=t.injector.get(en),i=t.injector.get(gn);if(t.isLegacyDisabled(i)||t.isLegacyEnabled(i))e(!0);else if("disabled"===i.initialNavigation)r.setUpLocationChangeListener(),e(!0);else{if("enabled"!==i.initialNavigation)throw new Error("Invalid initialNavigation options: '"+i.initialNavigation+"'");r.hooks.afterPreactivation=function(){return t.initNavigation?Object(o.a)(null):(t.initNavigation=!0,e(!0),t.resultOfPreactivationDone)},r.initialNavigation()}return n})},t.prototype.bootstrapListener=function(t){var e=this.injector.get(gn),n=this.injector.get(mn),r=this.injector.get(vn),o=this.injector.get(en),a=this.injector.get(i.g);t===a.components[0]&&(this.isLegacyEnabled(e)?o.initialNavigation():this.isLegacyDisabled(e)&&o.setUpLocationChangeListener(),n.setUpPreloading(),r.init(),o.resetRootComponentType(a.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())},t.prototype.isLegacyEnabled=function(t){return"legacy_enabled"===t.initialNavigation||!0===t.initialNavigation||void 0===t.initialNavigation},t.prototype.isLegacyDisabled=function(t){return"legacy_disabled"===t.initialNavigation||!1===t.initialNavigation},t}();function Pn(t){return t.appInitializer.bind(t)}function On(t){return t.bootstrapListener.bind(t)}var Rn=new i.s("Router Initializer")},ZYjt:function(t,e,n){"use strict";n.d(e,"q",function(){return gt}),n.d(e,"r",function(){return M}),n.d(e,"a",function(){return yt}),n.d(e,"i",function(){return vt}),n.d(e,"b",function(){return m}),n.d(e,"d",function(){return C}),n.d(e,"e",function(){return A}),n.d(e,"f",function(){return tt}),n.d(e,"g",function(){return et}),n.d(e,"h",function(){return nt}),n.d(e,"c",function(){return st}),n.d(e,"s",function(){return s}),n.d(e,"k",function(){return j}),n.d(e,"j",function(){return J}),n.d(e,"n",function(){return rt}),n.d(e,"o",function(){return at}),n.d(e,"m",function(){return R}),n.d(e,"p",function(){return O}),n.d(e,"l",function(){return ut});var r=n("mrSG"),i=n("Ip0R"),o=n("CcnG"),a=null;function s(){return a}var u,l={class:"className",innerHtml:"innerHTML",readonly:"readOnly",tabindex:"tabIndex"},c={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},h={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"};o.Ua.Node&&(u=o.Ua.Node.prototype.contains||function(t){return!!(16&this.compareDocumentPosition(t))});var d,p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.__extends)(e,t),e.prototype.parse=function(t){throw new Error("parse not implemented")},e.makeCurrent=function(){var t;t=new e,a||(a=t)},e.prototype.hasProperty=function(t,e){return e in t},e.prototype.setProperty=function(t,e,n){t[e]=n},e.prototype.getProperty=function(t,e){return t[e]},e.prototype.invoke=function(t,e,n){var i;(i=t)[e].apply(i,Object(r.__spread)(n))},e.prototype.logError=function(t){window.console&&(console.error?console.error(t):console.log(t))},e.prototype.log=function(t){window.console&&window.console.log&&window.console.log(t)},e.prototype.logGroup=function(t){window.console&&window.console.group&&window.console.group(t)},e.prototype.logGroupEnd=function(){window.console&&window.console.groupEnd&&window.console.groupEnd()},Object.defineProperty(e.prototype,"attrToPropMap",{get:function(){return l},enumerable:!0,configurable:!0}),e.prototype.contains=function(t,e){return u.call(t,e)},e.prototype.querySelector=function(t,e){return t.querySelector(e)},e.prototype.querySelectorAll=function(t,e){return t.querySelectorAll(e)},e.prototype.on=function(t,e,n){t.addEventListener(e,n,!1)},e.prototype.onAndCancel=function(t,e,n){return t.addEventListener(e,n,!1),function(){t.removeEventListener(e,n,!1)}},e.prototype.dispatchEvent=function(t,e){t.dispatchEvent(e)},e.prototype.createMouseEvent=function(t){var e=this.getDefaultDocument().createEvent("MouseEvent");return e.initEvent(t,!0,!0),e},e.prototype.createEvent=function(t){var e=this.getDefaultDocument().createEvent("Event");return e.initEvent(t,!0,!0),e},e.prototype.preventDefault=function(t){t.preventDefault(),t.returnValue=!1},e.prototype.isPrevented=function(t){return t.defaultPrevented||null!=t.returnValue&&!t.returnValue},e.prototype.getInnerHTML=function(t){return t.innerHTML},e.prototype.getTemplateContent=function(t){return"content"in t&&this.isTemplateElement(t)?t.content:null},e.prototype.getOuterHTML=function(t){return t.outerHTML},e.prototype.nodeName=function(t){return t.nodeName},e.prototype.nodeValue=function(t){return t.nodeValue},e.prototype.type=function(t){return t.type},e.prototype.content=function(t){return this.hasProperty(t,"content")?t.content:t},e.prototype.firstChild=function(t){return t.firstChild},e.prototype.nextSibling=function(t){return t.nextSibling},e.prototype.parentElement=function(t){return t.parentNode},e.prototype.childNodes=function(t){return t.childNodes},e.prototype.childNodesAsList=function(t){for(var e=t.childNodes,n=new Array(e.length),r=0;r<e.length;r++)n[r]=e[r];return n},e.prototype.clearNodes=function(t){for(;t.firstChild;)t.removeChild(t.firstChild)},e.prototype.appendChild=function(t,e){t.appendChild(e)},e.prototype.removeChild=function(t,e){t.removeChild(e)},e.prototype.replaceChild=function(t,e,n){t.replaceChild(e,n)},e.prototype.remove=function(t){return t.parentNode&&t.parentNode.removeChild(t),t},e.prototype.insertBefore=function(t,e,n){t.insertBefore(n,e)},e.prototype.insertAllBefore=function(t,e,n){n.forEach(function(n){return t.insertBefore(n,e)})},e.prototype.insertAfter=function(t,e,n){t.insertBefore(n,e.nextSibling)},e.prototype.setInnerHTML=function(t,e){t.innerHTML=e},e.prototype.getText=function(t){return t.textContent},e.prototype.setText=function(t,e){t.textContent=e},e.prototype.getValue=function(t){return t.value},e.prototype.setValue=function(t,e){t.value=e},e.prototype.getChecked=function(t){return t.checked},e.prototype.setChecked=function(t,e){t.checked=e},e.prototype.createComment=function(t){return this.getDefaultDocument().createComment(t)},e.prototype.createTemplate=function(t){var e=this.getDefaultDocument().createElement("template");return e.innerHTML=t,e},e.prototype.createElement=function(t,e){return(e=e||this.getDefaultDocument()).createElement(t)},e.prototype.createElementNS=function(t,e,n){return(n=n||this.getDefaultDocument()).createElementNS(t,e)},e.prototype.createTextNode=function(t,e){return(e=e||this.getDefaultDocument()).createTextNode(t)},e.prototype.createScriptTag=function(t,e,n){var r=(n=n||this.getDefaultDocument()).createElement("SCRIPT");return r.setAttribute(t,e),r},e.prototype.createStyleElement=function(t,e){var n=(e=e||this.getDefaultDocument()).createElement("style");return this.appendChild(n,this.createTextNode(t,e)),n},e.prototype.createShadowRoot=function(t){return t.createShadowRoot()},e.prototype.getShadowRoot=function(t){return t.shadowRoot},e.prototype.getHost=function(t){return t.host},e.prototype.clone=function(t){return t.cloneNode(!0)},e.prototype.getElementsByClassName=function(t,e){return t.getElementsByClassName(e)},e.prototype.getElementsByTagName=function(t,e){return t.getElementsByTagName(e)},e.prototype.classList=function(t){return Array.prototype.slice.call(t.classList,0)},e.prototype.addClass=function(t,e){t.classList.add(e)},e.prototype.removeClass=function(t,e){t.classList.remove(e)},e.prototype.hasClass=function(t,e){return t.classList.contains(e)},e.prototype.setStyle=function(t,e,n){t.style[e]=n},e.prototype.removeStyle=function(t,e){t.style[e]=""},e.prototype.getStyle=function(t,e){return t.style[e]},e.prototype.hasStyle=function(t,e,n){var r=this.getStyle(t,e)||"";return n?r==n:r.length>0},e.prototype.tagName=function(t){return t.tagName},e.prototype.attributeMap=function(t){for(var e=new Map,n=t.attributes,r=0;r<n.length;r++){var i=n.item(r);e.set(i.name,i.value)}return e},e.prototype.hasAttribute=function(t,e){return t.hasAttribute(e)},e.prototype.hasAttributeNS=function(t,e,n){return t.hasAttributeNS(e,n)},e.prototype.getAttribute=function(t,e){return t.getAttribute(e)},e.prototype.getAttributeNS=function(t,e,n){return t.getAttributeNS(e,n)},e.prototype.setAttribute=function(t,e,n){t.setAttribute(e,n)},e.prototype.setAttributeNS=function(t,e,n,r){t.setAttributeNS(e,n,r)},e.prototype.removeAttribute=function(t,e){t.removeAttribute(e)},e.prototype.removeAttributeNS=function(t,e,n){t.removeAttributeNS(e,n)},e.prototype.templateAwareRoot=function(t){return this.isTemplateElement(t)?this.content(t):t},e.prototype.createHtmlDocument=function(){return document.implementation.createHTMLDocument("fakeTitle")},e.prototype.getDefaultDocument=function(){return document},e.prototype.getBoundingClientRect=function(t){try{return t.getBoundingClientRect()}catch(t){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}},e.prototype.getTitle=function(t){return t.title},e.prototype.setTitle=function(t,e){t.title=e||""},e.prototype.elementMatches=function(t,e){return!!this.isElementNode(t)&&(t.matches&&t.matches(e)||t.msMatchesSelector&&t.msMatchesSelector(e)||t.webkitMatchesSelector&&t.webkitMatchesSelector(e))},e.prototype.isTemplateElement=function(t){return this.isElementNode(t)&&"TEMPLATE"===t.nodeName},e.prototype.isTextNode=function(t){return t.nodeType===Node.TEXT_NODE},e.prototype.isCommentNode=function(t){return t.nodeType===Node.COMMENT_NODE},e.prototype.isElementNode=function(t){return t.nodeType===Node.ELEMENT_NODE},e.prototype.hasShadowRoot=function(t){return null!=t.shadowRoot&&t instanceof HTMLElement},e.prototype.isShadowRoot=function(t){return t instanceof DocumentFragment},e.prototype.importIntoDoc=function(t){return document.importNode(this.templateAwareRoot(t),!0)},e.prototype.adoptNode=function(t){return document.adoptNode(t)},e.prototype.getHref=function(t){return t.getAttribute("href")},e.prototype.getEventKey=function(t){var e=t.key;if(null==e){if(null==(e=t.keyIdentifier))return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&h.hasOwnProperty(e)&&(e=h[e]))}return c[e]||e},e.prototype.getGlobalEventTarget=function(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null},e.prototype.getHistory=function(){return window.history},e.prototype.getLocation=function(){return window.location},e.prototype.getBaseHref=function(t){var e,n=f||(f=document.querySelector("base"))?f.getAttribute("href"):null;return null==n?null:(e=n,d||(d=document.createElement("a")),d.setAttribute("href",e),"/"===d.pathname.charAt(0)?d.pathname:"/"+d.pathname)},e.prototype.resetBaseElement=function(){f=null},e.prototype.getUserAgent=function(){return window.navigator.userAgent},e.prototype.setData=function(t,e,n){this.setAttribute(t,"data-"+e,n)},e.prototype.getData=function(t,e){return this.getAttribute(t,"data-"+e)},e.prototype.getComputedStyle=function(t){return getComputedStyle(t)},e.prototype.supportsWebAnimation=function(){return"function"==typeof Element.prototype.animate},e.prototype.performanceNow=function(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()},e.prototype.supportsCookies=function(){return!0},e.prototype.getCookie=function(t){return Object(i.s)(document.cookie,t)},e.prototype.setCookie=function(t,e){document.cookie=encodeURIComponent(t)+"="+encodeURIComponent(e)},e}(function(t){function e(){var e=t.call(this)||this;e._animationPrefix=null,e._transitionEnd=null;try{var n=e.createElement("div",document);if(null!=e.getStyle(n,"animationName"))e._animationPrefix="";else for(var r=["Webkit","Moz","O","ms"],i=0;i<r.length;i++)if(null!=e.getStyle(n,r[i]+"AnimationName")){e._animationPrefix="-"+r[i].toLowerCase()+"-";break}var o={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};Object.keys(o).forEach(function(t){null!=e.getStyle(n,t)&&(e._transitionEnd=o[t])})}catch(t){e._animationPrefix=null,e._transitionEnd=null}return e}return Object(r.__extends)(e,t),e.prototype.getDistributedNodes=function(t){return t.getDistributedNodes()},e.prototype.resolveAndSetHref=function(t,e,n){t.href=null==n?e:e+"/../"+n},e.prototype.supportsDOMEvents=function(){return!0},e.prototype.supportsNativeShadowDOM=function(){return"function"==typeof document.body.createShadowRoot},e.prototype.getAnimationPrefix=function(){return this._animationPrefix?this._animationPrefix:""},e.prototype.getTransitionEnd=function(){return this._transitionEnd?this._transitionEnd:""},e.prototype.supportsAnimation=function(){return null!=this._animationPrefix&&null!=this._transitionEnd},e}(function(){function t(){this.resourceLoaderType=null}return Object.defineProperty(t.prototype,"attrToPropMap",{get:function(){return this._attrToPropMap},set:function(t){this._attrToPropMap=t},enumerable:!0,configurable:!0}),t}())),f=null,m=i.c;function v(){return!!window.history.pushState}var g=function(t){function e(e){var n=t.call(this)||this;return n._doc=e,n._init(),n}return Object(r.__extends)(e,t),e.prototype._init=function(){this.location=s().getLocation(),this._history=s().getHistory()},e.prototype.getBaseHrefFromDOM=function(){return s().getBaseHref(this._doc)},e.prototype.onPopState=function(t){s().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)},e.prototype.onHashChange=function(t){s().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)},Object.defineProperty(e.prototype,"pathname",{get:function(){return this.location.pathname},set:function(t){this.location.pathname=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"search",{get:function(){return this.location.search},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hash",{get:function(){return this.location.hash},enumerable:!0,configurable:!0}),e.prototype.pushState=function(t,e,n){v()?this._history.pushState(t,e,n):this.location.hash=n},e.prototype.replaceState=function(t,e,n){v()?this._history.replaceState(t,e,n):this.location.hash=n},e.prototype.forward=function(){this._history.forward()},e.prototype.back=function(){this._history.back()},Object(r.__decorate)([Object(r.__param)(0,Object(o.r)(m)),Object(r.__metadata)("design:paramtypes",[Object])],e)}(i.m),y=new o.s("TRANSITION_ID"),_=[{provide:o.d,useFactory:function(t,e,n){return function(){n.get(o.e).donePromise.then(function(){var n=s();Array.prototype.slice.apply(n.querySelectorAll(e,"style[ng-transition]")).filter(function(e){return n.getAttribute(e,"ng-transition")===t}).forEach(function(t){return n.remove(t)})})}},deps:[y,m,o.t],multi:!0}],b=function(){function t(){}return t.init=function(){Object(o.Da)(new t)},t.prototype.addToWindow=function(t){o.Ua.getAngularTestability=function(e,n){void 0===n&&(n=!0);var r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},o.Ua.getAllAngularTestabilities=function(){return t.getAllTestabilities()},o.Ua.getAllAngularRootElements=function(){return t.getAllRootElements()},o.Ua.frameworkStabilizers||(o.Ua.frameworkStabilizers=[]),o.Ua.frameworkStabilizers.push(function(t){var e=o.Ua.getAllAngularTestabilities(),n=e.length,r=!1,i=function(e){r=r||e,0==--n&&t(r)};e.forEach(function(t){t.whenStable(i)})})},t.prototype.findTestabilityInTree=function(t,e,n){if(null==e)return null;var r=t.getTestability(e);return null!=r?r:n?s().isShadowRoot(e)?this.findTestabilityInTree(t,s().getHost(e),!0):this.findTestabilityInTree(t,s().parentElement(e),!0):null},t}();function w(t,e){"undefined"!=typeof COMPILED&&COMPILED||((o.Ua.ng=o.Ua.ng||{})[t]=e)}var x={ApplicationRef:o.g,NgZone:o.C},E="probe",S="coreTokens";function T(t){return Object(o.Z)(t)}function M(t){return w(E,T),w(S,Object(r.__assign)({},x,(t||[]).reduce(function(t,e){return t[e.name]=e.token,t},{}))),function(){return T}}var C=new o.s("EventManagerPlugins"),A=function(){function t(t,e){var n=this;this._zone=e,this._eventNameToPlugin=new Map,t.forEach(function(t){return t.manager=n}),this._plugins=t.slice().reverse()}return t.prototype.addEventListener=function(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)},t.prototype.addGlobalEventListener=function(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)},t.prototype.getZone=function(){return this._zone},t.prototype._findPluginFor=function(t){var e=this._eventNameToPlugin.get(t);if(e)return e;for(var n=this._plugins,r=0;r<n.length;r++){var i=n[r];if(i.supports(t))return this._eventNameToPlugin.set(t,i),i}throw new Error("No event manager plugin found for event "+t)},Object(r.__decorate)([Object(r.__param)(0,Object(o.r)(C))],t)}(),P=function(){function t(t){this._doc=t}return t.prototype.addGlobalEventListener=function(t,e,n){var r=s().getGlobalEventTarget(this._doc,t);if(!r)throw new Error("Unsupported event target "+r+" for event "+e);return this.addEventListener(r,e,n)},t}(),O=function(){function t(){this._stylesSet=new Set}return t.prototype.addStyles=function(t){var e=this,n=new Set;t.forEach(function(t){e._stylesSet.has(t)||(e._stylesSet.add(t),n.add(t))}),this.onStylesAdded(n)},t.prototype.onStylesAdded=function(t){},t.prototype.getAllStyles=function(){return Array.from(this._stylesSet)},t}(),R=function(t){function e(e){var n=t.call(this)||this;return n._doc=e,n._hostNodes=new Set,n._styleNodes=new Set,n._hostNodes.add(e.head),n}return Object(r.__extends)(e,t),e.prototype._addStylesToHost=function(t,e){var n=this;t.forEach(function(t){var r=n._doc.createElement("style");r.textContent=t,n._styleNodes.add(e.appendChild(r))})},e.prototype.addHost=function(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)},e.prototype.removeHost=function(t){this._hostNodes.delete(t)},e.prototype.onStylesAdded=function(t){var e=this;this._hostNodes.forEach(function(n){return e._addStylesToHost(t,n)})},e.prototype.ngOnDestroy=function(){this._styleNodes.forEach(function(t){return s().remove(t)})},Object(r.__decorate)([Object(r.__param)(0,Object(o.r)(m))],e)}(O),L={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},I=/%COMP%/g,N="_nghost-%COMP%",D="_ngcontent-%COMP%";function k(t,e,n){for(var r=0;r<e.length;r++){var i=e[r];Array.isArray(i)?k(t,i,n):(i=i.replace(I,t),n.push(i))}return n}function F(t){return function(e){!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}var j=function(){function t(t,e){this.eventManager=t,this.sharedStylesHost=e,this.rendererByCompId=new Map,this.defaultRenderer=new U(t)}return t.prototype.createRenderer=function(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case o.T.Emulated:var n=this.rendererByCompId.get(e.id);return n||(n=new z(this.eventManager,this.sharedStylesHost,e),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n;case o.T.Native:case o.T.ShadowDom:return new H(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){var r=k(e.id,e.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}},t.prototype.begin=function(){},t.prototype.end=function(){},t}(),U=function(){function t(t){this.eventManager=t,this.data=Object.create(null)}return t.prototype.destroy=function(){},t.prototype.createElement=function(t,e){return e?document.createElementNS(L[e],t):document.createElement(t)},t.prototype.createComment=function(t){return document.createComment(t)},t.prototype.createText=function(t){return document.createTextNode(t)},t.prototype.appendChild=function(t,e){t.appendChild(e)},t.prototype.insertBefore=function(t,e,n){t&&t.insertBefore(e,n)},t.prototype.removeChild=function(t,e){t&&t.removeChild(e)},t.prototype.selectRootElement=function(t){var e="string"==typeof t?document.querySelector(t):t;if(!e)throw new Error('The selector "'+t+'" did not match any elements');return e.textContent="",e},t.prototype.parentNode=function(t){return t.parentNode},t.prototype.nextSibling=function(t){return t.nextSibling},t.prototype.setAttribute=function(t,e,n,r){if(r){e=r+":"+e;var i=L[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)},t.prototype.removeAttribute=function(t,e,n){if(n){var r=L[n];r?t.removeAttributeNS(r,e):t.removeAttribute(n+":"+e)}else t.removeAttribute(e)},t.prototype.addClass=function(t,e){t.classList.add(e)},t.prototype.removeClass=function(t,e){t.classList.remove(e)},t.prototype.setStyle=function(t,e,n,r){r&o.I.DashCase?t.style.setProperty(e,n,r&o.I.Important?"important":""):t.style[e]=n},t.prototype.removeStyle=function(t,e,n){n&o.I.DashCase?t.style.removeProperty(e):t.style[e]=""},t.prototype.setProperty=function(t,e,n){G(e,"property"),t[e]=n},t.prototype.setValue=function(t,e){t.nodeValue=e},t.prototype.listen=function(t,e,n){return G(e,"listener"),"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,F(n)):this.eventManager.addEventListener(t,e,F(n))},t}(),B="@".charCodeAt(0);function G(t,e){if(t.charCodeAt(0)===B)throw new Error("Found the synthetic "+e+" "+t+'. Please include either "BrowserAnimationsModule" or "NoopAnimationsModule" in your application.')}var V,z=function(t){function e(e,n,r){var i=t.call(this,e)||this;i.component=r;var o=k(r.id,r.styles,[]);return n.addStyles(o),i.contentAttr=D.replace(I,r.id),i.hostAttr=N.replace(I,r.id),i}return Object(r.__extends)(e,t),e.prototype.applyToHost=function(e){t.prototype.setAttribute.call(this,e,this.hostAttr,"")},e.prototype.createElement=function(e,n){var r=t.prototype.createElement.call(this,e,n);return t.prototype.setAttribute.call(this,r,this.contentAttr,""),r},e}(U),H=function(t){function e(e,n,r,i){var a=t.call(this,e)||this;a.sharedStylesHost=n,a.hostEl=r,a.component=i,a.shadowRoot=i.encapsulation===o.T.ShadowDom?r.attachShadow({mode:"open"}):r.createShadowRoot(),a.sharedStylesHost.addHost(a.shadowRoot);for(var s=k(i.id,i.styles,[]),u=0;u<s.length;u++){var l=document.createElement("style");l.textContent=s[u],a.shadowRoot.appendChild(l)}return a}return Object(r.__extends)(e,t),e.prototype.nodeOrShadowRoot=function(t){return t===this.hostEl?this.shadowRoot:t},e.prototype.destroy=function(){this.sharedStylesHost.removeHost(this.shadowRoot)},e.prototype.appendChild=function(e,n){return t.prototype.appendChild.call(this,this.nodeOrShadowRoot(e),n)},e.prototype.insertBefore=function(e,n,r){return t.prototype.insertBefore.call(this,this.nodeOrShadowRoot(e),n,r)},e.prototype.removeChild=function(e,n){return t.prototype.removeChild.call(this,this.nodeOrShadowRoot(e),n)},e.prototype.parentNode=function(e){return this.nodeOrShadowRoot(t.prototype.parentNode.call(this,this.nodeOrShadowRoot(e)))},e}(U),W="undefined"!=typeof Zone&&Zone.__symbol__||function(t){return"__zone_symbol__"+t},q=W("addEventListener"),X=W("removeEventListener"),Y={},K="__zone_symbol__propagationStopped";"undefined"!=typeof Zone&&Zone[W("BLACK_LISTED_EVENTS")]&&(V={});var Z=function(t){return!!V&&V.hasOwnProperty(t)},Q=function(t){var e=Y[t.type];if(e){var n=this[e];if(n){var r=[t];if(1===n.length)return(a=n[0]).zone!==Zone.current?a.zone.run(a.handler,this,r):a.handler.apply(this,r);for(var i=n.slice(),o=0;o<i.length&&!0!==t[K];o++){var a;(a=i[o]).zone!==Zone.current?a.zone.run(a.handler,this,r):a.handler.apply(this,r)}}}},J=function(t){function e(e,n,r){var o=t.call(this,e)||this;return o.ngZone=n,r&&Object(i.p)(r)||o.patchEvent(),o}return Object(r.__extends)(e,t),e.prototype.patchEvent=function(){if("undefined"!=typeof Event&&Event&&Event.prototype&&!Event.prototype.__zone_symbol__stopImmediatePropagation){var t=Event.prototype.__zone_symbol__stopImmediatePropagation=Event.prototype.stopImmediatePropagation;Event.prototype.stopImmediatePropagation=function(){this&&(this[K]=!0),t&&t.apply(this,arguments)}}},e.prototype.supports=function(t){return!0},e.prototype.addEventListener=function(t,e,n){var r=this,i=n;if(!t[q]||o.C.isInAngularZone()&&!Z(e))t.addEventListener(e,i,!1);else{var a=Y[e];a||(a=Y[e]=W("ANGULAR"+e+"FALSE"));var s=t[a],u=s&&s.length>0;s||(s=t[a]=[]);var l=Z(e)?Zone.root:Zone.current;if(0===s.length)s.push({zone:l,handler:i});else{for(var c=!1,h=0;h<s.length;h++)if(s[h].handler===i){c=!0;break}c||s.push({zone:l,handler:i})}u||t[q](e,Q,!1)}return function(){return r.removeEventListener(t,e,i)}},e.prototype.removeEventListener=function(t,e,n){var r=t[X];if(!r)return t.removeEventListener.apply(t,[e,n,!1]);var i=Y[e],o=i&&t[i];if(!o)return t.removeEventListener.apply(t,[e,n,!1]);for(var a=!1,s=0;s<o.length;s++)if(o[s].handler===n){a=!0,o.splice(s,1);break}a?0===o.length&&r.apply(t,[e,Q,!1]):t.removeEventListener.apply(t,[e,n,!1])},Object(r.__decorate)([Object(r.__param)(0,Object(o.r)(m)),Object(r.__param)(2,Object(o.D)()),Object(r.__param)(2,Object(o.r)(o.E))],e)}(P),$={pan:!0,panstart:!0,panmove:!0,panend:!0,pancancel:!0,panleft:!0,panright:!0,panup:!0,pandown:!0,pinch:!0,pinchstart:!0,pinchmove:!0,pinchend:!0,pinchcancel:!0,pinchin:!0,pinchout:!0,press:!0,pressup:!0,rotate:!0,rotatestart:!0,rotatemove:!0,rotateend:!0,rotatecancel:!0,swipe:!0,swipeleft:!0,swiperight:!0,swipeup:!0,swipedown:!0,tap:!0},tt=new o.s("HammerGestureConfig"),et=new o.s("HammerLoader"),nt=function(){function t(){this.events=[],this.overrides={}}return t.prototype.buildHammer=function(t){var e=new Hammer(t,this.options);for(var n in e.get("pinch").set({enable:!0}),e.get("rotate").set({enable:!0}),this.overrides)e.get(n).set(this.overrides[n]);return e},t}(),rt=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;return o._config=n,o.console=r,o.loader=i,o}return Object(r.__extends)(e,t),e.prototype.supports=function(t){return!(!$.hasOwnProperty(t.toLowerCase())&&!this.isCustomEvent(t)||!window.Hammer&&!this.loader&&(this.console.warn('The "'+t+'" event cannot be bound because Hammer.JS is not loaded and no custom loader has been specified.'),1))},e.prototype.addEventListener=function(t,e,n){var r=this,i=this.manager.getZone();if(e=e.toLowerCase(),!window.Hammer&&this.loader){var o=!1,a=function(){o=!0};return this.loader().then(function(){if(!window.Hammer)return r.console.warn("The custom HAMMER_LOADER completed, but Hammer.JS is not present."),void(a=function(){});o||(a=r.addEventListener(t,e,n))}).catch(function(){r.console.warn('The "'+e+'" event cannot be bound because the custom Hammer.JS loader failed.'),a=function(){}}),function(){a()}}return i.runOutsideAngular(function(){var o=r._config.buildHammer(t),a=function(t){i.runGuarded(function(){n(t)})};return o.on(e,a),function(){o.off(e,a),"function"==typeof o.destroy&&o.destroy()}})},e.prototype.isCustomEvent=function(t){return this._config.events.indexOf(t)>-1},Object(r.__decorate)([Object(r.__param)(0,Object(o.r)(m)),Object(r.__param)(1,Object(o.r)(tt)),Object(r.__param)(3,Object(o.D)()),Object(r.__param)(3,Object(o.r)(et))],e)}(P),it=["alt","control","meta","shift"],ot={alt:function(t){return t.altKey},control:function(t){return t.ctrlKey},meta:function(t){return t.metaKey},shift:function(t){return t.shiftKey}},at=function(t){function e(e){return t.call(this,e)||this}var n;return Object(r.__extends)(e,t),n=e,e.prototype.supports=function(t){return null!=n.parseEventName(t)},e.prototype.addEventListener=function(t,e,r){var i=n.parseEventName(e),o=n.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(function(){return s().onAndCancel(t,i.domEventName,o)})},e.parseEventName=function(t){var e=t.toLowerCase().split("."),r=e.shift();if(0===e.length||"keydown"!==r&&"keyup"!==r)return null;var i=n._normalizeKey(e.pop()),o="";if(it.forEach(function(t){var n=e.indexOf(t);n>-1&&(e.splice(n,1),o+=t+".")}),o+=i,0!=e.length||0===i.length)return null;var a={};return a.domEventName=r,a.fullKey=o,a},e.getEventFullKey=function(t){var e="",n=s().getEventKey(t);return" "===(n=n.toLowerCase())?n="space":"."===n&&(n="dot"),it.forEach(function(r){r!=n&&(0,ot[r])(t)&&(e+=r+".")}),e+=n},e.eventCallback=function(t,e,r){return function(i){n.getEventFullKey(i)===t&&r.runGuarded(function(){return e(i)})}},e._normalizeKey=function(t){switch(t){case"esc":return"escape";default:return t}},n=Object(r.__decorate)([Object(r.__param)(0,Object(o.r)(m))],e)}(P),st=function(){},ut=function(t){function e(e){var n=t.call(this)||this;return n._doc=e,n}return Object(r.__extends)(e,t),e.prototype.sanitize=function(t,e){if(null==e)return null;switch(t){case o.K.NONE:return e;case o.K.HTML:return e instanceof ct?e.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(e,"HTML"),Object(o.Ha)(this._doc,String(e)));case o.K.STYLE:return e instanceof ht?e.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(e,"Style"),Object(o.Ia)(e));case o.K.SCRIPT:if(e instanceof dt)return e.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(e,"Script"),new Error("unsafe value used in a script context");case o.K.URL:return e instanceof ft||e instanceof pt?e.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(e,"URL"),Object(o.Ja)(String(e)));case o.K.RESOURCE_URL:if(e instanceof ft)return e.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(e,"ResourceURL"),new Error("unsafe value used in a resource URL context (see http://g.co/ng/security#xss)");default:throw new Error("Unexpected SecurityContext "+t+" (see http://g.co/ng/security#xss)")}},e.prototype.checkNotSafeValue=function(t,e){if(t instanceof lt)throw new Error("Required a safe "+e+", got a "+t.getTypeName()+" (see http://g.co/ng/security#xss)")},e.prototype.bypassSecurityTrustHtml=function(t){return new ct(t)},e.prototype.bypassSecurityTrustStyle=function(t){return new ht(t)},e.prototype.bypassSecurityTrustScript=function(t){return new dt(t)},e.prototype.bypassSecurityTrustUrl=function(t){return new pt(t)},e.prototype.bypassSecurityTrustResourceUrl=function(t){return new ft(t)},Object(r.__decorate)([Object(r.__param)(0,Object(o.r)(m))],e)}(st),lt=function(){function t(t){this.changingThisBreaksApplicationSecurity=t}return t.prototype.toString=function(){return"SafeValue must use [property]=binding: "+this.changingThisBreaksApplicationSecurity+" (see http://g.co/ng/security#xss)"},t}(),ct=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.__extends)(e,t),e.prototype.getTypeName=function(){return"HTML"},e}(lt),ht=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.__extends)(e,t),e.prototype.getTypeName=function(){return"Style"},e}(lt),dt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.__extends)(e,t),e.prototype.getTypeName=function(){return"Script"},e}(lt),pt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.__extends)(e,t),e.prototype.getTypeName=function(){return"URL"},e}(lt),ft=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.__extends)(e,t),e.prototype.getTypeName=function(){return"ResourceURL"},e}(lt),mt=[{provide:o.E,useValue:i.q},{provide:o.F,useValue:function(){p.makeCurrent(),b.init()},multi:!0},{provide:i.m,useClass:g,deps:[m]},{provide:m,useFactory:function(){return document},deps:[]}],vt=Object(o.V)(o.Ca,"browser",mt);function gt(){return new o.m}var yt=function(){function t(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}var e;return e=t,t.withServerTransition=function(t){return{ngModule:e,providers:[{provide:o.c,useValue:t.appId},{provide:y,useExisting:o.c},_]}},e=Object(r.__decorate)([Object(r.__param)(0,Object(o.D)()),Object(r.__param)(0,Object(o.M)()),Object(r.__param)(0,Object(o.r)(e))],t)}();"undefined"!=typeof window&&window},Zn8D:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("psW0"),i=n("mChF");function o(t){return void 0===t&&(t=Number.POSITIVE_INFINITY),Object(r.a)(i.a,t)}},ZyYn:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("geFX"),i=n("0kFh"),o=n("W1I6"),a=n("8LTN"),s=n("N1zr"),u=n("0kFh"),l=n("xHNN"),c=n("0kFh"),h=n("0kFh"),d=null;"undefined"!=typeof MozWebSocket?d=MozWebSocket:"undefined"!=typeof WebSocket&&(d=WebSocket),e.setWebSocketImpl=function(t){d=t},e.WebSocketConnection=function(){function t(e,n,r,i){this.connId=e,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=o.logWrapper(this.connId),this.stats_=a.StatsManager.getCollection(n),this.connURL=t.connectionURL_(n,r,i)}return t.connectionURL_=function(t,e,n){var r={};return r[s.VERSION_PARAM]=s.PROTOCOL_VERSION,!h.isNodeSdk()&&"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf(s.FORGE_DOMAIN)&&(r[s.REFERER_PARAM]=s.FORGE_REF),e&&(r[s.TRANSPORT_SESSION_PARAM]=e),n&&(r[s.LAST_SESSION_PARAM]=n),t.connectionURL(s.WEBSOCKET,r)},t.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,l.PersistentStorage.set("previous_websocket_failure",!0);try{if(h.isNodeSdk()){var i={headers:{"User-Agent":"Firebase/"+s.PROTOCOL_VERSION+"/"+r.default.SDK_VERSION+"/"+process.platform+"/"+(u.CONSTANTS.NODE_ADMIN?"AdminNode":"Node")}},o=process.env,a=0==this.connURL.indexOf("wss://")?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(i.proxy={origin:a}),this.mySock=new d(this.connURL,[],i)}else this.mySock=new d(this.connURL)}catch(t){this.log_("Error instantiating WebSocket.");var c=t.message||t.data;return c&&this.log_(c),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==d&&!t.forceDisallow_},t.previouslyFailed=function(){return l.PersistentStorage.isInMemoryStorage||!0===l.PersistentStorage.get("previous_websocket_failure")},t.prototype.markConnectionHealthy=function(){l.PersistentStorage.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length==this.totalFrames){var e=this.frames.join("");this.frames=null;var n=c.jsonEval(e);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},t.prototype.extractFrameCount_=function(t){if(i.assert(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},t.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(t){this.resetKeepAlive();var e=c.stringify(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=o.splitStringBySize(e,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()},Math.floor(45e3))},t.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}()},aScZ:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("mrSG"),i=n("0kFh"),o=n("W1I6"),a=n("dsTq"),s=n("h6Fy"),u=n("+e0l"),l=n("FKYu");e.PathIndex=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,i.assert(!e.isEmpty()&&".priority"!==e.getFront(),"Can't create PathIndex with empty path or .priority key"),n}return r.__extends(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?o.nameCompare(t.name,e.name):i},e.prototype.makePost=function(t,e){var n=l.nodeFromJSON(t),r=s.ChildrenNode.EMPTY_NODE.updateChild(this.indexPath_,n);return new u.NamedNode(e,r)},e.prototype.maxPost=function(){var t=s.ChildrenNode.EMPTY_NODE.updateChild(this.indexPath_,s.MAX_NODE);return new u.NamedNode(o.MAX_NAME,t)},e.prototype.toString=function(){return this.indexPath_.slice().join("/")},e}(a.Index)},awvh:function(t,e,n){"use strict";function r(t){return Error.call(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map(function(t,e){return e+1+") "+t.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t,this}n.d(e,"a",function(){return i}),r.prototype=Object.create(Error.prototype);var i=r},b7mW:function(t,e,n){"use strict";function r(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}n.d(e,"a",function(){return i}),r.prototype=Object.create(Error.prototype);var i=r},bFeb:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("5Xge"),i=n("3qh3");e.decode=function(t){var e={},n={},o={},a="";try{var s=t.split(".");e=i.jsonEval(r.base64Decode(s[0])||""),n=i.jsonEval(r.base64Decode(s[1])||""),a=s[2],o=n.d||{},delete n.d}catch(t){}return{header:e,claims:n,data:o,signature:a}},e.isValidTimestamp=function(t){var n,r,i=e.decode(t).claims,o=Math.floor((new Date).getTime()/1e3);return"object"==typeof i&&(i.hasOwnProperty("nbf")?n=i.nbf:i.hasOwnProperty("iat")&&(n=i.iat),r=i.hasOwnProperty("exp")?i.exp:n+86400),o&&n&&r&&o>=n&&o<=r},e.issuedAtTime=function(t){var n=e.decode(t).claims;return"object"==typeof n&&n.hasOwnProperty("iat")?n.iat:null},e.isValidFormat=function(t){var n=e.decode(t),r=n.claims;return!!n.signature&&!!r&&"object"==typeof r&&r.hasOwnProperty("iat")},e.isAdmin=function(t){var n=e.decode(t).claims;return"object"==typeof n&&!0===n.admin}},bhsf:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("W2ca");e.querystring=function(t){var e=[];return r.forEach(t,function(t,n){Array.isArray(n)?n.forEach(function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}),e.length?"&"+e.join("&"):""},e.querystringDecode=function(t){var e={};return t.replace(/^\?/,"").split("&").forEach(function(t){if(t){var n=t.split("=");e[n[0]]=n[1]}}),e}},bne5:function(t,e,n){"use strict";n.r(e),n.d(e,"fromEvent",function(){return s});var r=n("6blF"),i=n("isby"),o=n("2Bdj"),a=n("67Y/");function s(t,e,n,u){return Object(o.a)(n)&&(u=n,n=void 0),u?s(t,e,n).pipe(Object(a.a)(function(t){return Object(i.a)(t)?u.apply(void 0,t):u(t)})):new r.a(function(r){!function t(e,n,r,i,o){var a;if(function(t){return t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}(e)){var s=e;e.addEventListener(n,r,o),a=function(){return s.removeEventListener(n,r,o)}}else if(function(t){return t&&"function"==typeof t.on&&"function"==typeof t.off}(e)){var u=e;e.on(n,r),a=function(){return u.off(n,r)}}else if(function(t){return t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}(e)){var l=e;e.addListener(n,r),a=function(){return l.removeListener(n,r)}}else{if(!e||!e.length)throw new TypeError("Invalid event target");for(var c=0,h=e.length;c<h;c++)t(e[c],n,r,i,o)}i.add(a)}(t,e,function(t){r.next(arguments.length>1?Array.prototype.slice.call(arguments):t)},r,n)})}Object},buEt:function(t,e,n){"use strict";var r=n("K9Ia");n.d(e,"a",function(){return r.a})},cNkO:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("0kFh");e.DOMStorageWrapper=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),r.stringify(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:r.jsonEval(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}()},cbsn:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("w7gh"),i=n("w7gh"),o=Math.log(2),a=function(){function t(t){this.count=parseInt(Math.log(t+1)/o,10),this.current_=this.count-1;var e=parseInt(Array(this.count+1).join("1"),2);this.bits_=t+1&e}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}();e.buildChildSet=function(t,e,n,o){t.sort(e);var s=function(e,i){var o,a,u=i-e;if(0==u)return null;if(1==u)return o=t[e],a=n?n(o):o,new r.LLRBNode(a,o.node,r.LLRBNode.BLACK,null,null);var l=parseInt(u/2,10)+e,c=s(e,l),h=s(l+1,i);return o=t[l],a=n?n(o):o,new r.LLRBNode(a,o.node,r.LLRBNode.BLACK,c,h)},u=function(e){for(var i=null,o=null,a=t.length,u=function(e,i){var o=a-e,u=a;a-=e;var c=s(o+1,u),h=t[o],d=n?n(h):h;l(new r.LLRBNode(d,h.node,i,null,c))},l=function(t){i?(i.left=t,i=t):(o=t,i=t)},c=0;c<e.count;++c){var h=e.nextBitIsOne(),d=Math.pow(2,e.count-(c+1));h?u(d,r.LLRBNode.BLACK):(u(d,r.LLRBNode.BLACK),u(d,r.LLRBNode.RED))}return o}(new a(t.length));return new i.SortedMap(o||e,u)}},crnd:function(t,e,n){var r={"./products/products.module.ngfactory":["G8AK",0]};function i(t){var e=r[t];return e?n.e(e[1]).then(function(){return n(e[0])}):Promise.resolve().then(function(){var e=new Error('Cannot find module "'+t+'".');throw e.code="MODULE_NOT_FOUND",e})}i.keys=function(){return Object.keys(r)},i.id="crnd",t.exports=i},cywi:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("q1Ft"),i=n("RzhA");e.ListenComplete=function(){function t(t,e){this.source=t,this.path=e,this.type=i.OperationType.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,r.Path.Empty):new t(this.source,this.path.popFront())},t}()},dEwP:function(t,e,n){"use strict";n.r(e),n.d(e,"concat",function(){return s});var r=n("nkY7"),i=n("F/XL"),o=n("0/uQ"),a=n(null);function s(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 1===t.length||2===t.length&&Object(r.a)(t[1])?Object(o.a)(t[0]):Object(a.a)()(i.a.apply(void 0,t))}},dHOi:function(t,e,n){"use strict";n.r(e);var r=[],i=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}({}),o=i.INFO,a=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var o=(new Date).toISOString();switch(e){case i.DEBUG:case i.VERBOSE:console.log.apply(console,["["+o+"]  "+t.name+":"].concat(n));break;case i.INFO:console.info.apply(console,["["+o+"]  "+t.name+":"].concat(n));break;case i.WARN:console.warn.apply(console,["["+o+"]  "+t.name+":"].concat(n));break;case i.ERROR:console.error.apply(console,["["+o+"]  "+t.name+":"].concat(n));break;default:throw new Error("Attempted to log a message with an invalid logType (value: "+e+")")}}},s=function(){function t(t){this.name=t,this._logLevel=o,this._logHandler=a,r.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in i))throw new TypeError("Invalid value assigned to `logLevel`");this._logLevel=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!0,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,i.DEBUG].concat(t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,i.VERBOSE].concat(t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,i.INFO].concat(t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,i.WARN].concat(t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,i.ERROR].concat(t))},t}();function u(t){r.forEach(function(e){e.logLevel=t})}n.d(e,"setLogLevel",function(){return u}),n.d(e,"Logger",function(){return s}),n.d(e,"LogLevel",function(){return i})},dejr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=Error.captureStackTrace;e.patchCapture=function(t){var e=r;return r=t,e};var i=function(){return function(t,e){if(this.code=t,this.message=e,r)r(this,o.prototype.create);else{var n=Error.apply(this,arguments);this.name="FirebaseError",Object.defineProperty(this,"stack",{get:function(){return n.stack}})}}}();e.FirebaseError=i,i.prototype=Object.create(Error.prototype),i.prototype.constructor=i,i.prototype.name="FirebaseError";var o=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n,this.pattern=/\{\$([^}]+)}/g}return t.prototype.create=function(t,e){void 0===e&&(e={});var n,r=this.errors[t],o=this.service+"/"+t;n=void 0===r?"Error":r.replace(this.pattern,function(t,n){var r=e[n];return void 0!==r?r.toString():"<"+n+"?>"});var a=new i(o,n=this.serviceName+": "+n+" ("+o+").");for(var s in e)e.hasOwnProperty(s)&&"_"!==s.slice(-1)&&(a[s]=e[s]);return a},t}();e.ErrorFactory=o},dsTq:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("+e0l"),i=n("W1I6");e.Index=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new r.NamedNode(i.MIN_NAME,t),o=new r.NamedNode(i.MIN_NAME,e);return 0!==this.compare(n,o)},t.prototype.minPost=function(){return r.NamedNode.MIN},t}()},dzgT:function(t,e,n){"use strict";n.r(e),n.d(e,"combineLatest",function(){return c}),n.d(e,"CombineLatestOperator",function(){return h}),n.d(e,"CombineLatestSubscriber",function(){return d});var r=n("mrSG"),i=n("nkY7"),o=n("isby"),a=n("MGBS"),s=n("zotm"),u=n("IUTb"),l={};function c(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=null,r=null;return Object(i.a)(t[t.length-1])&&(r=t.pop()),"function"==typeof t[t.length-1]&&(n=t.pop()),1===t.length&&Object(o.a)(t[0])&&(t=t[0]),Object(u.a)(t,r).lift(new h(n))}var h=function(){function t(t){this.resultSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new d(t,this.resultSelector))},t}(),d=function(t){function e(e,n){var r=t.call(this,e)||this;return r.resultSelector=n,r.active=0,r.values=[],r.observables=[],r}return r.__extends(e,t),e.prototype._next=function(t){this.values.push(l),this.observables.push(t)},e.prototype._complete=function(){var t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(var n=0;n<e;n++){var r=t[n];this.add(Object(s.a)(this,r,r,n))}}},e.prototype.notifyComplete=function(t){0==(this.active-=1)&&this.destination.complete()},e.prototype.notifyNext=function(t,e,n,r,i){var o=this.values,a=this.toRespond?o[n]===l?--this.toRespond:this.toRespond:0;o[n]=e,0===a&&(this.resultSelector?this._tryResultSelector(o):this.destination.next(o.slice()))},e.prototype._tryResultSelector=function(t){var e;try{e=this.resultSelector.apply(this,t)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(a.a)},e5ZR:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("W1I6");e.PacketReceiver=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var i=function(){var t=o.pendingResponses[o.currentResponseNum];delete o.pendingResponses[o.currentResponseNum];for(var e=function(e){t[e]&&r.exceptionGuard(function(){n.onMessage_(t[e])})},i=0;i<t.length;++i)e(i);if(o.currentResponseNum===o.closeAfterResponse)return o.onClose&&(o.onClose(),o.onClose=null),"break";o.currentResponseNum++},o=this;this.pendingResponses[this.currentResponseNum]&&"break"!==i(););},t}()},eB1k:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("RzhA"),i=n("q1Ft");e.Overwrite=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=r.OperationType.OVERWRITE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,i.Path.Empty,this.snap.getImmediateChild(e)):new t(this.source,this.path.popFront(),this.snap)},t}()},emHa:function(t,e,n){"use strict";n.r(e),n.d(e,"bindNodeCallback",function(){return l});var r=n("6blF"),i=n("svcd"),o=n("67Y/"),a=n(null),s=n("nkY7"),u=n("isby");function l(t,e,n){if(e){if(!Object(s.a)(e))return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return l(t,n).apply(void 0,r).pipe(Object(o.a)(function(t){return Object(u.a)(t)?e.apply(void 0,t):e(t)}))};n=e}return function(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];var s={subject:void 0,args:e,callbackFunc:t,scheduler:n,context:this};return new r.a(function(r){var o=s.context,u=s.subject;if(n)return n.schedule(c,0,{params:s,subscriber:r,context:o});if(!u){u=s.subject=new i.AsyncSubject;try{t.apply(o,e.concat([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t.shift();n?u.error(n):(u.next(t.length<=1?t[0]:t),u.complete())}]))}catch(t){Object(a.a)(u)?u.error(t):console.warn(t)}}return u.subscribe(r)})}}function c(t){var e=this,n=t.params,r=t.subscriber,o=t.context,a=n.callbackFunc,s=n.args,u=n.scheduler,l=n.subject;if(!l){l=n.subject=new i.AsyncSubject;try{a.apply(o,s.concat([function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=t.shift();e.add(r?u.schedule(d,0,{err:r,subject:l}):u.schedule(h,0,{value:t.length<=1?t[0]:t,subject:l}))}]))}catch(t){this.add(u.schedule(d,0,{err:t,subject:l}))}}this.add(l.subscribe(r))}function h(t){var e=t.subject;e.next(t.value),e.complete()}function d(t){t.subject.error(t.err)}},fneD:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("mrSG"),i=n("YYhT");e.Sha1=function(t){function e(){var e=t.call(this)||this;e.chain_=[],e.buf_=[],e.W_=[],e.pad_=[],e.inbuf_=0,e.total_=0,e.blockSize=64,e.pad_[0]=128;for(var n=1;n<e.blockSize;++n)e.pad_[n]=0;return e.reset(),e}return r.__extends(e,t),e.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},e.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++)n[r]=4294967295&((h=n[r-3]^n[r-8]^n[r-14]^n[r-16])<<1|h>>>31);var i,o,a=this.chain_[0],s=this.chain_[1],u=this.chain_[2],l=this.chain_[3],c=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(i=l^s&(u^l),o=1518500249):(i=s^u^l,o=1859775393):r<60?(i=s&u|l&(s|u),o=2400959708):(i=s^u^l,o=3395469782);var h=(a<<5|a>>>27)+i+c+o+n[r]&4294967295;c=l,l=u,u=4294967295&(s<<30|s>>>2),s=a,a=h}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295},e.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0==o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o==this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o==this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},e.prototype.digest=function(){var t=[],e=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},e}(i.Hash)},gI3B:function(t,e,n){"use strict";var r=n("6blF"),i=n("T1DM"),o=n("isby");function a(t){return!Object(o.a)(t)&&t-parseFloat(t)+1>=0}var s=n("nkY7");function u(t,e,n){void 0===t&&(t=0);var o=-1;return a(e)?o=Number(e)<1?1:Number(e):Object(s.a)(e)&&(n=e),Object(s.a)(n)||(n=i.async),new r.a(function(e){var r=a(t)?t:+t-n.now();return n.schedule(l,r,{index:0,period:o,subscriber:e})})}function l(t){var e=t.index,n=t.period,r=t.subscriber;if(r.next(e),!r.closed){if(-1===n)return r.complete();t.index=e+1,this.schedule(t,n)}}n.d(e,"timer",function(){return u})},gIcY:function(t,e,n){"use strict";n.d(e,"v",function(){return Mt}),n.d(e,"x",function(){return Tt}),n.d(e,"y",function(){return A}),n.d(e,"w",function(){return O}),n.d(e,"z",function(){return gt}),n.d(e,"A",function(){return B}),n.d(e,"b",function(){return c}),n.d(e,"k",function(){return _}),n.d(e,"a",function(){return w}),n.d(e,"c",function(){return x}),n.d(e,"l",function(){return C}),n.d(e,"m",function(){return nt}),n.d(e,"n",function(){return rt}),n.d(e,"o",function(){return dt}),n.d(e,"p",function(){return vt}),n.d(e,"f",function(){return xt}),n.d(e,"h",function(){return yt}),n.d(e,"q",function(){return F}),n.d(e,"t",function(){return k}),n.d(e,"s",function(){return Et}),n.d(e,"d",function(){return St}),n.d(e,"e",function(){return ut}),n.d(e,"g",function(){return lt}),n.d(e,"j",function(){return d}),n.d(e,"u",function(){return m}),n.d(e,"i",function(){return Ct}),n.d(e,"r",function(){return At});var r=n("mrSG"),i=n("CcnG"),o=n("VNr4"),a=n("0/uQ"),s=n("67Y/"),u=n("ZYjt"),l=function(){function t(){}return Object.defineProperty(t.prototype,"value",{get:function(){return this.control?this.control.value:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"valid",{get:function(){return this.control?this.control.valid:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"invalid",{get:function(){return this.control?this.control.invalid:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pending",{get:function(){return this.control?this.control.pending:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"disabled",{get:function(){return this.control?this.control.disabled:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"enabled",{get:function(){return this.control?this.control.enabled:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"errors",{get:function(){return this.control?this.control.errors:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pristine",{get:function(){return this.control?this.control.pristine:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dirty",{get:function(){return this.control?this.control.dirty:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"touched",{get:function(){return this.control?this.control.touched:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"status",{get:function(){return this.control?this.control.status:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"untouched",{get:function(){return this.control?this.control.untouched:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"statusChanges",{get:function(){return this.control?this.control.statusChanges:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"valueChanges",{get:function(){return this.control?this.control.valueChanges:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return null},enumerable:!0,configurable:!0}),t.prototype.reset=function(t){void 0===t&&(t=void 0),this.control&&this.control.reset(t)},t.prototype.hasError=function(t,e){return!!this.control&&this.control.hasError(t,e)},t.prototype.getError=function(t,e){return this.control?this.control.getError(t,e):null},t}(),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.__extends)(e,t),Object.defineProperty(e.prototype,"formDirective",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return null},enumerable:!0,configurable:!0}),e}(l);function h(t){return null==t||0===t.length}var d=new i.s("NgValidators"),p=new i.s("NgAsyncValidators"),f=/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/,m=function(){function t(){}return t.min=function(t){return function(e){if(h(e.value)||h(t))return null;var n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}},t.max=function(t){return function(e){if(h(e.value)||h(t))return null;var n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}},t.required=function(t){return h(t.value)?{required:!0}:null},t.requiredTrue=function(t){return!0===t.value?null:{required:!0}},t.email=function(t){return h(t.value)?null:f.test(t.value)?null:{email:!0}},t.minLength=function(t){return function(e){if(h(e.value))return null;var n=e.value?e.value.length:0;return n<t?{minlength:{requiredLength:t,actualLength:n}}:null}},t.maxLength=function(t){return function(e){var n=e.value?e.value.length:0;return n>t?{maxlength:{requiredLength:t,actualLength:n}}:null}},t.pattern=function(e){return e?("string"==typeof e?(r="","^"!==e.charAt(0)&&(r+="^"),r+=e,"$"!==e.charAt(e.length-1)&&(r+="$"),n=new RegExp(r)):(r=e.toString(),n=e),function(t){if(h(t.value))return null;var e=t.value;return n.test(e)?null:{pattern:{requiredPattern:r,actualValue:e}}}):t.nullValidator;var n,r},t.nullValidator=function(t){return null},t.compose=function(t){if(!t)return null;var e=t.filter(v);return 0==e.length?null:function(t){return y(function(t,n){return e.map(function(e){return e(t)})}(t))}},t.composeAsync=function(t){if(!t)return null;var e=t.filter(v);return 0==e.length?null:function(t){var n=function(t,n){return e.map(function(e){return e(t)})}(t).map(g);return Object(o.a)(n).pipe(Object(s.a)(y))}},t}();function v(t){return null!=t}function g(t){var e=Object(i.Ya)(t)?Object(a.a)(t):t;if(!Object(i.Xa)(e))throw new Error("Expected validator to return Promise or Observable.");return e}function y(t){var e=t.reduce(function(t,e){return null!=e?Object(r.__assign)({},t,e):t},{});return 0===Object.keys(e).length?null:e}var _=new i.s("NgValueAccessor"),b=function(){function t(t,e){this._renderer=t,this._elementRef=e,this.onChange=function(t){},this.onTouched=function(){}}return t.prototype.writeValue=function(t){this._renderer.setProperty(this._elementRef.nativeElement,"checked",t)},t.prototype.registerOnChange=function(t){this.onChange=t},t.prototype.registerOnTouched=function(t){this.onTouched=t},t.prototype.setDisabledState=function(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)},t}(),w=new i.s("CompositionEventMode"),x=function(){function t(t,e,n){var r;this._renderer=t,this._elementRef=e,this._compositionMode=n,this.onChange=function(t){},this.onTouched=function(){},this._composing=!1,null==this._compositionMode&&(this._compositionMode=(r=Object(u.s)()?Object(u.s)().getUserAgent():"",!/android (\d+)/.test(r.toLowerCase())))}return t.prototype.writeValue=function(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)},t.prototype.registerOnChange=function(t){this.onChange=t},t.prototype.registerOnTouched=function(t){this.onTouched=t},t.prototype.setDisabledState=function(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)},t.prototype._handleInput=function(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)},t.prototype._compositionStart=function(){this._composing=!0},t.prototype._compositionEnd=function(t){this._composing=!1,this._compositionMode&&this.onChange(t)},Object(r.__decorate)([Object(r.__param)(2,Object(i.D)()),Object(r.__param)(2,Object(i.r)(w))],t)}();function E(t){return t.validate?function(e){return t.validate(e)}:t}function S(t){return t.validate?function(e){return t.validate(e)}:t}var T=function(){function t(t,e){this._renderer=t,this._elementRef=e,this.onChange=function(t){},this.onTouched=function(){}}return t.prototype.writeValue=function(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)},t.prototype.registerOnChange=function(t){this.onChange=function(e){t(""==e?null:parseFloat(e))}},t.prototype.registerOnTouched=function(t){this.onTouched=t},t.prototype.setDisabledState=function(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)},t}();function M(){throw new Error("unimplemented")}var C=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._parent=null,e.name=null,e.valueAccessor=null,e._rawValidators=[],e._rawAsyncValidators=[],e}return Object(r.__extends)(e,t),Object.defineProperty(e.prototype,"validator",{get:function(){return M()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"asyncValidator",{get:function(){return M()},enumerable:!0,configurable:!0}),e}(l),A=function(){function t(){this._accessors=[]}return t.prototype.add=function(t,e){this._accessors.push([t,e])},t.prototype.remove=function(t){for(var e=this._accessors.length-1;e>=0;--e)if(this._accessors[e][1]===t)return void this._accessors.splice(e,1)},t.prototype.select=function(t){var e=this;this._accessors.forEach(function(n){e._isSameGroup(n,t)&&n[1]!==t&&n[1].fireUncheck(t.value)})},t.prototype._isSameGroup=function(t,e){return!!t[0].control&&t[0]._parent===e._control._parent&&t[1].name===e.name},t}(),P=function(){function t(t,e,n,r){this._renderer=t,this._elementRef=e,this._registry=n,this._injector=r,this.onChange=function(){},this.onTouched=function(){}}return t.prototype.ngOnInit=function(){this._control=this._injector.get(C),this._checkName(),this._registry.add(this._control,this)},t.prototype.ngOnDestroy=function(){this._registry.remove(this)},t.prototype.writeValue=function(t){this._state=t===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)},t.prototype.registerOnChange=function(t){var e=this;this._fn=t,this.onChange=function(){t(e.value),e._registry.select(e)}},t.prototype.fireUncheck=function(t){this.writeValue(t)},t.prototype.registerOnTouched=function(t){this.onTouched=t},t.prototype.setDisabledState=function(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)},t.prototype._checkName=function(){this.name&&this.formControlName&&this.name!==this.formControlName&&this._throwNameError(),!this.name&&this.formControlName&&(this.name=this.formControlName)},t.prototype._throwNameError=function(){throw new Error('\n      If you define both a name and a formControlName attribute on your radio button, their values\n      must match. Ex: <input type="radio" formControlName="food" name="food">\n    ')},t}(),O=function(){function t(t,e){this._renderer=t,this._elementRef=e,this.onChange=function(t){},this.onTouched=function(){}}return t.prototype.writeValue=function(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",parseFloat(t))},t.prototype.registerOnChange=function(t){this.onChange=function(e){t(""==e?null:parseFloat(e))}},t.prototype.registerOnTouched=function(t){this.onTouched=t},t.prototype.setDisabledState=function(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)},t}(),R='\n    <div [formGroup]="myGroup">\n      <input formControlName="firstName">\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       firstName: new FormControl()\n    });',L='\n    <div [formGroup]="myGroup">\n       <div formGroupName="person">\n          <input formControlName="firstName">\n       </div>\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       person: new FormGroup({ firstName: new FormControl() })\n    });',I='\n    <form>\n       <div ngModelGroup="person">\n          <input [(ngModel)]="person.name" name="firstName">\n       </div>\n    </form>',N=function(){function t(){}return t.controlParentException=function(){throw new Error("formControlName must be used with a parent formGroup directive.  You'll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      "+R)},t.ngModelGroupException=function(){throw new Error('formControlName cannot be used with an ngModelGroup parent. It is only compatible with parents\n       that also have a "form" prefix: formGroupName, formArrayName, or formGroup.\n\n       Option 1:  Update the parent to be formGroupName (reactive form strategy)\n\n        '+L+"\n\n        Option 2: Use ngModel instead of formControlName (template-driven strategy)\n\n        "+I)},t.missingFormException=function(){throw new Error("formGroup expects a FormGroup instance. Please pass one in.\n\n       Example:\n\n       "+R)},t.groupParentException=function(){throw new Error("formGroupName must be used with a parent formGroup directive.  You'll want to add a formGroup\n      directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      "+L)},t.arrayParentException=function(){throw new Error('formArrayName must be used with a parent formGroup directive.  You\'ll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n        Example:\n\n        \n    <div [formGroup]="myGroup">\n      <div formArrayName="cities">\n        <div *ngFor="let city of cityArray.controls; index as i">\n          <input [formControlName]="i">\n        </div>\n      </div>\n    </div>\n\n    In your class:\n\n    this.cityArray = new FormArray([new FormControl(\'SF\')]);\n    this.myGroup = new FormGroup({\n      cities: this.cityArray\n    });')},t.disabledAttrWarning=function(){console.warn("\n      It looks like you're using the disabled attribute with a reactive form directive. If you set disabled to true\n      when you set up this control in your component class, the disabled attribute will actually be set in the DOM for\n      you. We recommend using this approach to avoid 'changed after checked' errors.\n       \n      Example: \n      form = new FormGroup({\n        first: new FormControl({value: 'Nancy', disabled: true}, Validators.required),\n        last: new FormControl('Drew', Validators.required)\n      });\n    ")},t.ngModelWarning=function(t){console.warn("\n    It looks like you're using ngModel on the same form field as "+t+". \n    Support for using the ngModel input property and ngModelChange event with \n    reactive form directives has been deprecated in Angular v6 and will be removed \n    in Angular v7.\n    \n    For more information on this, see our API docs here:\n    https://angular.io/api/forms/"+("formControl"===t?"FormControlDirective":"FormControlName")+"#use-with-ngmodel\n    ")},t}();function D(t,e){return null==t?""+e:(e&&"object"==typeof e&&(e="Object"),(t+": "+e).slice(0,50))}var k=function(){function t(t,e){this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=function(t){},this.onTouched=function(){},this._compareWith=i.Za}return Object.defineProperty(t.prototype,"compareWith",{set:function(t){if("function"!=typeof t)throw new Error("compareWith must be a function, but received "+JSON.stringify(t));this._compareWith=t},enumerable:!0,configurable:!0}),t.prototype.writeValue=function(t){this.value=t;var e=this._getOptionId(t);null==e&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);var n=D(e,t);this._renderer.setProperty(this._elementRef.nativeElement,"value",n)},t.prototype.registerOnChange=function(t){var e=this;this.onChange=function(n){e.value=e._getOptionValue(n),t(e.value)}},t.prototype.registerOnTouched=function(t){this.onTouched=t},t.prototype.setDisabledState=function(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)},t.prototype._registerOption=function(){return(this._idCounter++).toString()},t.prototype._getOptionId=function(t){var e,n;try{for(var i=Object(r.__values)(Array.from(this._optionMap.keys())),o=i.next();!o.done;o=i.next()){var a=o.value;if(this._compareWith(this._optionMap.get(a),t))return a}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return null},t.prototype._getOptionValue=function(t){var e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e):t},t}(),F=function(){function t(t,e,n){this._element=t,this._renderer=e,this._select=n,this._select&&(this.id=this._select._registerOption())}return Object.defineProperty(t.prototype,"ngValue",{set:function(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(D(this.id,t)),this._select.writeValue(this._select.value))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{set:function(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)},enumerable:!0,configurable:!0}),t.prototype._setElementValue=function(t){this._renderer.setProperty(this._element.nativeElement,"value",t)},t.prototype.ngOnDestroy=function(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))},Object(r.__decorate)([Object(r.__param)(2,Object(i.D)()),Object(r.__param)(2,Object(i.o)())],t)}();function j(t,e){return null==t?""+e:("string"==typeof e&&(e="'"+e+"'"),e&&"object"==typeof e&&(e="Object"),(t+": "+e).slice(0,50))}var U=function(){function t(t,e){this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=function(t){},this.onTouched=function(){},this._compareWith=i.Za}return Object.defineProperty(t.prototype,"compareWith",{set:function(t){if("function"!=typeof t)throw new Error("compareWith must be a function, but received "+JSON.stringify(t));this._compareWith=t},enumerable:!0,configurable:!0}),t.prototype.writeValue=function(t){var e,n=this;if(this.value=t,Array.isArray(t)){var r=t.map(function(t){return n._getOptionId(t)});e=function(t,e){t._setSelected(r.indexOf(e.toString())>-1)}}else e=function(t,e){t._setSelected(!1)};this._optionMap.forEach(e)},t.prototype.registerOnChange=function(t){var e=this;this.onChange=function(n){var r=[];if(n.hasOwnProperty("selectedOptions"))for(var i=n.selectedOptions,o=0;o<i.length;o++){var a=i.item(o),s=e._getOptionValue(a.value);r.push(s)}else for(i=n.options,o=0;o<i.length;o++)(a=i.item(o)).selected&&(s=e._getOptionValue(a.value),r.push(s));e.value=r,t(r)}},t.prototype.registerOnTouched=function(t){this.onTouched=t},t.prototype.setDisabledState=function(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)},t.prototype._registerOption=function(t){var e=(this._idCounter++).toString();return this._optionMap.set(e,t),e},t.prototype._getOptionId=function(t){var e,n;try{for(var i=Object(r.__values)(Array.from(this._optionMap.keys())),o=i.next();!o.done;o=i.next()){var a=o.value;if(this._compareWith(this._optionMap.get(a)._value,t))return a}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return null},t.prototype._getOptionValue=function(t){var e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e)._value:t},t}(),B=function(){function t(t,e,n){this._element=t,this._renderer=e,this._select=n,this._select&&(this.id=this._select._registerOption(this))}return Object.defineProperty(t.prototype,"ngValue",{set:function(t){null!=this._select&&(this._value=t,this._setElementValue(j(this.id,t)),this._select.writeValue(this._select.value))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{set:function(t){this._select?(this._value=t,this._setElementValue(j(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)},enumerable:!0,configurable:!0}),t.prototype._setElementValue=function(t){this._renderer.setProperty(this._element.nativeElement,"value",t)},t.prototype._setSelected=function(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)},t.prototype.ngOnDestroy=function(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))},Object(r.__decorate)([Object(r.__param)(2,Object(i.D)()),Object(r.__param)(2,Object(i.o)())],t)}();function G(t,e){return Object(r.__spread)(e.path,[t])}function V(t,e){t||q(e,"Cannot find control with"),e.valueAccessor||q(e,"No value accessor for form control with"),t.validator=m.compose([t.validator,e.validator]),t.asyncValidator=m.composeAsync([t.asyncValidator,e.asyncValidator]),e.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange(function(n){t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&z(t,e)})}(t,e),function(t,e){t.registerOnChange(function(t,n){e.valueAccessor.writeValue(t),n&&e.viewToModelUpdate(t)})}(t,e),function(t,e){e.valueAccessor.registerOnTouched(function(){t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&z(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),e.valueAccessor.setDisabledState&&t.registerOnDisabledChange(function(t){e.valueAccessor.setDisabledState(t)}),e._rawValidators.forEach(function(e){e.registerOnValidatorChange&&e.registerOnValidatorChange(function(){return t.updateValueAndValidity()})}),e._rawAsyncValidators.forEach(function(e){e.registerOnValidatorChange&&e.registerOnValidatorChange(function(){return t.updateValueAndValidity()})})}function z(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function H(t,e){null==t&&q(e,"Cannot find control with"),t.validator=m.compose([t.validator,e.validator]),t.asyncValidator=m.composeAsync([t.asyncValidator,e.asyncValidator])}function W(t){return q(t,"There is no FormControl instance attached to form control element with")}function q(t,e){var n;throw n=t.path.length>1?"path: '"+t.path.join(" -> ")+"'":t.path[0]?"name: '"+t.path+"'":"unspecified name attribute",new Error(e+" "+n)}function X(t){return null!=t?m.compose(t.map(E)):null}function Y(t){return null!=t?m.composeAsync(t.map(S)):null}function K(t,e){if(!t.hasOwnProperty("model"))return!1;var n=t.model;return!!n.isFirstChange()||!Object(i.Za)(e,n.currentValue)}var Z=[b,O,T,k,U,P];function Q(t,e){t._syncPendingControls(),e.forEach(function(t){var e=t.control;"submit"===e.updateOn&&e._pendingChange&&(t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1)})}function J(t,e){if(!e)return null;Array.isArray(e)||q(t,"Value accessor was not provided as an array for form control with");var n=void 0,r=void 0,i=void 0;return e.forEach(function(e){var o;e.constructor===x?n=e:(o=e,Z.some(function(t){return o.constructor===t})?(r&&q(t,"More than one built-in value accessor matches form control with"),r=e):(i&&q(t,"More than one custom value accessor matches form control with"),i=e))}),i||r||n||(q(t,"No valid value accessor for form control with"),null)}function $(t,e){var n=t.indexOf(e);n>-1&&t.splice(n,1)}var tt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.__extends)(e,t),e.prototype.ngOnInit=function(){this._checkParentType(),this.formDirective.addFormGroup(this)},e.prototype.ngOnDestroy=function(){this.formDirective&&this.formDirective.removeFormGroup(this)},Object.defineProperty(e.prototype,"control",{get:function(){return this.formDirective.getFormGroup(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return G(this.name,this._parent)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"formDirective",{get:function(){return this._parent?this._parent.formDirective:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"validator",{get:function(){return X(this._validators)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"asyncValidator",{get:function(){return Y(this._asyncValidators)},enumerable:!0,configurable:!0}),e.prototype._checkParentType=function(){},e}(c),et=function(){function t(t){this._cd=t}return Object.defineProperty(t.prototype,"ngClassUntouched",{get:function(){return!!this._cd.control&&this._cd.control.untouched},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ngClassTouched",{get:function(){return!!this._cd.control&&this._cd.control.touched},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ngClassPristine",{get:function(){return!!this._cd.control&&this._cd.control.pristine},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ngClassDirty",{get:function(){return!!this._cd.control&&this._cd.control.dirty},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ngClassValid",{get:function(){return!!this._cd.control&&this._cd.control.valid},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ngClassInvalid",{get:function(){return!!this._cd.control&&this._cd.control.invalid},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ngClassPending",{get:function(){return!!this._cd.control&&this._cd.control.pending},enumerable:!0,configurable:!0}),t}(),nt=function(t){function e(e){return t.call(this,e)||this}return Object(r.__extends)(e,t),Object(r.__decorate)([Object(r.__param)(0,Object(i.L)())],e)}(et),rt=function(t){function e(e){return t.call(this,e)||this}return Object(r.__extends)(e,t),Object(r.__decorate)([Object(r.__param)(0,Object(i.L)())],e)}(et);function it(t){var e=at(t)?t.validators:t;return Array.isArray(e)?X(e):e||null}function ot(t,e){var n=at(e)?e.asyncValidators:t;return Array.isArray(n)?Y(n):n||null}function at(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}var st=function(){function t(t,e){this.validator=t,this.asyncValidator=e,this._onCollectionChange=function(){},this.pristine=!0,this.touched=!1,this._onDisabledChange=[]}return Object.defineProperty(t.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"valid",{get:function(){return"VALID"===this.status},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"invalid",{get:function(){return"INVALID"===this.status},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pending",{get:function(){return"PENDING"==this.status},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"disabled",{get:function(){return"DISABLED"===this.status},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"enabled",{get:function(){return"DISABLED"!==this.status},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dirty",{get:function(){return!this.pristine},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"untouched",{get:function(){return!this.touched},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"updateOn",{get:function(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"},enumerable:!0,configurable:!0}),t.prototype.setValidators=function(t){this.validator=it(t)},t.prototype.setAsyncValidators=function(t){this.asyncValidator=ot(t)},t.prototype.clearValidators=function(){this.validator=null},t.prototype.clearAsyncValidators=function(){this.asyncValidator=null},t.prototype.markAsTouched=function(t){void 0===t&&(t={}),this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)},t.prototype.markAsUntouched=function(t){void 0===t&&(t={}),this.touched=!1,this._pendingTouched=!1,this._forEachChild(function(t){t.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)},t.prototype.markAsDirty=function(t){void 0===t&&(t={}),this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)},t.prototype.markAsPristine=function(t){void 0===t&&(t={}),this.pristine=!0,this._pendingDirty=!1,this._forEachChild(function(t){t.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)},t.prototype.markAsPending=function(t){void 0===t&&(t={}),this.status="PENDING",!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)},t.prototype.disable=function(t){void 0===t&&(t={}),this.status="DISABLED",this.errors=null,this._forEachChild(function(e){e.disable(Object(r.__assign)({},t,{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(t),this._onDisabledChange.forEach(function(t){return t(!0)})},t.prototype.enable=function(t){void 0===t&&(t={}),this.status="VALID",this._forEachChild(function(e){e.enable(Object(r.__assign)({},t,{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(t),this._onDisabledChange.forEach(function(t){return t(!1)})},t.prototype._updateAncestors=function(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),this._parent._updatePristine(),this._parent._updateTouched())},t.prototype.setParent=function(t){this._parent=t},t.prototype.updateValueAndValidity=function(t){void 0===t&&(t={}),this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),"VALID"!==this.status&&"PENDING"!==this.status||this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)},t.prototype._updateTreeValidity=function(t){void 0===t&&(t={emitEvent:!0}),this._forEachChild(function(e){return e._updateTreeValidity(t)}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})},t.prototype._setInitialStatus=function(){this.status=this._allControlsDisabled()?"DISABLED":"VALID"},t.prototype._runValidator=function(){return this.validator?this.validator(this):null},t.prototype._runAsyncValidator=function(t){var e=this;if(this.asyncValidator){this.status="PENDING";var n=g(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(function(n){return e.setErrors(n,{emitEvent:t})})}},t.prototype._cancelExistingSubscription=function(){this._asyncValidationSubscription&&this._asyncValidationSubscription.unsubscribe()},t.prototype.setErrors=function(t,e){void 0===e&&(e={}),this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)},t.prototype.get=function(t){return function(t,e,n){return null==e?null:(e instanceof Array||(e=e.split(".")),e instanceof Array&&0===e.length?null:e.reduce(function(t,e){return t instanceof lt?t.controls.hasOwnProperty(e)?t.controls[e]:null:t instanceof ct&&t.at(e)||null},t))}(this,t)},t.prototype.getError=function(t,e){var n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null},t.prototype.hasError=function(t,e){return!!this.getError(t,e)},Object.defineProperty(t.prototype,"root",{get:function(){for(var t=this;t._parent;)t=t._parent;return t},enumerable:!0,configurable:!0}),t.prototype._updateControlsErrors=function(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)},t.prototype._initObservables=function(){this.valueChanges=new i.n,this.statusChanges=new i.n},t.prototype._calculateStatus=function(){return this._allControlsDisabled()?"DISABLED":this.errors?"INVALID":this._anyControlsHaveStatus("PENDING")?"PENDING":this._anyControlsHaveStatus("INVALID")?"INVALID":"VALID"},t.prototype._anyControlsHaveStatus=function(t){return this._anyControls(function(e){return e.status===t})},t.prototype._anyControlsDirty=function(){return this._anyControls(function(t){return t.dirty})},t.prototype._anyControlsTouched=function(){return this._anyControls(function(t){return t.touched})},t.prototype._updatePristine=function(t){void 0===t&&(t={}),this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)},t.prototype._updateTouched=function(t){void 0===t&&(t={}),this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)},t.prototype._isBoxedValue=function(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t},t.prototype._registerOnCollectionChange=function(t){this._onCollectionChange=t},t.prototype._setUpdateStrategy=function(t){at(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)},t}(),ut=function(t){function e(e,n,r){void 0===e&&(e=null);var i=t.call(this,it(n),ot(r,n))||this;return i._onChange=[],i._applyFormState(e),i._setUpdateStrategy(n),i.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),i._initObservables(),i}return Object(r.__extends)(e,t),e.prototype.setValue=function(t,e){var n=this;void 0===e&&(e={}),this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(function(t){return t(n.value,!1!==e.emitViewToModelChange)}),this.updateValueAndValidity(e)},e.prototype.patchValue=function(t,e){void 0===e&&(e={}),this.setValue(t,e)},e.prototype.reset=function(t,e){void 0===t&&(t=null),void 0===e&&(e={}),this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1},e.prototype._updateValue=function(){},e.prototype._anyControls=function(t){return!1},e.prototype._allControlsDisabled=function(){return this.disabled},e.prototype.registerOnChange=function(t){this._onChange.push(t)},e.prototype._clearChangeFns=function(){this._onChange=[],this._onDisabledChange=[],this._onCollectionChange=function(){}},e.prototype.registerOnDisabledChange=function(t){this._onDisabledChange.push(t)},e.prototype._forEachChild=function(t){},e.prototype._syncPendingControls=function(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))},e.prototype._applyFormState=function(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t},e}(st),lt=function(t){function e(e,n,r){var i=t.call(this,it(n),ot(r,n))||this;return i.controls=e,i._initObservables(),i._setUpdateStrategy(n),i._setUpControls(),i.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),i}return Object(r.__extends)(e,t),e.prototype.registerControl=function(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)},e.prototype.addControl=function(t,e){this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()},e.prototype.removeControl=function(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(function(){}),delete this.controls[t],this.updateValueAndValidity(),this._onCollectionChange()},e.prototype.setControl=function(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(function(){}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()},e.prototype.contains=function(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled},e.prototype.setValue=function(t,e){var n=this;void 0===e&&(e={}),this._checkAllValuesPresent(t),Object.keys(t).forEach(function(r){n._throwIfControlMissing(r),n.controls[r].setValue(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)},e.prototype.patchValue=function(t,e){var n=this;void 0===e&&(e={}),Object.keys(t).forEach(function(r){n.controls[r]&&n.controls[r].patchValue(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)},e.prototype.reset=function(t,e){void 0===t&&(t={}),void 0===e&&(e={}),this._forEachChild(function(n,r){n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e),this._updatePristine(e),this._updateTouched(e)},e.prototype.getRawValue=function(){return this._reduceChildren({},function(t,e,n){return t[n]=e instanceof ut?e.value:e.getRawValue(),t})},e.prototype._syncPendingControls=function(){var t=this._reduceChildren(!1,function(t,e){return!!e._syncPendingControls()||t});return t&&this.updateValueAndValidity({onlySelf:!0}),t},e.prototype._throwIfControlMissing=function(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error("Cannot find form control with name: "+t+".")},e.prototype._forEachChild=function(t){var e=this;Object.keys(this.controls).forEach(function(n){return t(e.controls[n],n)})},e.prototype._setUpControls=function(){var t=this;this._forEachChild(function(e){e.setParent(t),e._registerOnCollectionChange(t._onCollectionChange)})},e.prototype._updateValue=function(){this.value=this._reduceValue()},e.prototype._anyControls=function(t){var e=this,n=!1;return this._forEachChild(function(r,i){n=n||e.contains(i)&&t(r)}),n},e.prototype._reduceValue=function(){var t=this;return this._reduceChildren({},function(e,n,r){return(n.enabled||t.disabled)&&(e[r]=n.value),e})},e.prototype._reduceChildren=function(t,e){var n=t;return this._forEachChild(function(t,r){n=e(n,t,r)}),n},e.prototype._allControlsDisabled=function(){var t,e;try{for(var n=Object(r.__values)(Object.keys(this.controls)),i=n.next();!i.done;i=n.next())if(this.controls[i.value].enabled)return!1}catch(e){t={error:e}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return Object.keys(this.controls).length>0||this.disabled},e.prototype._checkAllValuesPresent=function(t){this._forEachChild(function(e,n){if(void 0===t[n])throw new Error("Must supply a value for form control with name: '"+n+"'.")})},e}(st),ct=function(t){function e(e,n,r){var i=t.call(this,it(n),ot(r,n))||this;return i.controls=e,i._initObservables(),i._setUpdateStrategy(n),i._setUpControls(),i.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),i}return Object(r.__extends)(e,t),e.prototype.at=function(t){return this.controls[t]},e.prototype.push=function(t){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity(),this._onCollectionChange()},e.prototype.insert=function(t,e){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity()},e.prototype.removeAt=function(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(function(){}),this.controls.splice(t,1),this.updateValueAndValidity()},e.prototype.setControl=function(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(function(){}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity(),this._onCollectionChange()},Object.defineProperty(e.prototype,"length",{get:function(){return this.controls.length},enumerable:!0,configurable:!0}),e.prototype.setValue=function(t,e){var n=this;void 0===e&&(e={}),this._checkAllValuesPresent(t),t.forEach(function(t,r){n._throwIfControlMissing(r),n.at(r).setValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)},e.prototype.patchValue=function(t,e){var n=this;void 0===e&&(e={}),t.forEach(function(t,r){n.at(r)&&n.at(r).patchValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)},e.prototype.reset=function(t,e){void 0===t&&(t=[]),void 0===e&&(e={}),this._forEachChild(function(n,r){n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e),this._updatePristine(e),this._updateTouched(e)},e.prototype.getRawValue=function(){return this.controls.map(function(t){return t instanceof ut?t.value:t.getRawValue()})},e.prototype._syncPendingControls=function(){var t=this.controls.reduce(function(t,e){return!!e._syncPendingControls()||t},!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t},e.prototype._throwIfControlMissing=function(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error("Cannot find form control at index "+t)},e.prototype._forEachChild=function(t){this.controls.forEach(function(e,n){t(e,n)})},e.prototype._updateValue=function(){var t=this;this.value=this.controls.filter(function(e){return e.enabled||t.disabled}).map(function(t){return t.value})},e.prototype._anyControls=function(t){return this.controls.some(function(e){return e.enabled&&t(e)})},e.prototype._setUpControls=function(){var t=this;this._forEachChild(function(e){return t._registerControl(e)})},e.prototype._checkAllValuesPresent=function(t){this._forEachChild(function(e,n){if(void 0===t[n])throw new Error("Must supply a value for form control at index: "+n+".")})},e.prototype._allControlsDisabled=function(){var t,e;try{for(var n=Object(r.__values)(this.controls),i=n.next();!i.done;i=n.next())if(i.value.enabled)return!1}catch(e){t={error:e}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return this.controls.length>0||this.disabled},e.prototype._registerControl=function(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)},e}(st),ht=Promise.resolve(null),dt=function(t){function e(e,n){var r=t.call(this)||this;return r.submitted=!1,r._directives=[],r.ngSubmit=new i.n,r.form=new lt({},X(e),Y(n)),r}return Object(r.__extends)(e,t),e.prototype.ngAfterViewInit=function(){this._setUpdateStrategy()},Object.defineProperty(e.prototype,"formDirective",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"control",{get:function(){return this.form},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return[]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"controls",{get:function(){return this.form.controls},enumerable:!0,configurable:!0}),e.prototype.addControl=function(t){var e=this;ht.then(function(){var n=e._findContainer(t.path);t.control=n.registerControl(t.name,t.control),V(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),e._directives.push(t)})},e.prototype.getControl=function(t){return this.form.get(t.path)},e.prototype.removeControl=function(t){var e=this;ht.then(function(){var n=e._findContainer(t.path);n&&n.removeControl(t.name),$(e._directives,t)})},e.prototype.addFormGroup=function(t){var e=this;ht.then(function(){var n=e._findContainer(t.path),r=new lt({});H(r,t),n.registerControl(t.name,r),r.updateValueAndValidity({emitEvent:!1})})},e.prototype.removeFormGroup=function(t){var e=this;ht.then(function(){var n=e._findContainer(t.path);n&&n.removeControl(t.name)})},e.prototype.getFormGroup=function(t){return this.form.get(t.path)},e.prototype.updateModel=function(t,e){var n=this;ht.then(function(){n.form.get(t.path).setValue(e)})},e.prototype.setValue=function(t){this.control.setValue(t)},e.prototype.onSubmit=function(t){return this.submitted=!0,Q(this.form,this._directives),this.ngSubmit.emit(t),!1},e.prototype.onReset=function(){this.resetForm()},e.prototype.resetForm=function(t){void 0===t&&(t=void 0),this.form.reset(t),this.submitted=!1},e.prototype._setUpdateStrategy=function(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)},e.prototype._findContainer=function(t){return t.pop(),t.length?this.form.get(t):this.form},Object(r.__decorate)([Object(r.__param)(0,Object(i.D)()),Object(r.__param)(0,Object(i.L)()),Object(r.__param)(0,Object(i.r)(d)),Object(r.__param)(1,Object(i.D)()),Object(r.__param)(1,Object(i.L)()),Object(r.__param)(1,Object(i.r)(p))],e)}(c),pt=function(){function t(){}return t.modelParentException=function(){throw new Error('\n      ngModel cannot be used to register form controls with a parent formGroup directive.  Try using\n      formGroup\'s partner directive "formControlName" instead.  Example:\n\n      '+R+'\n\n      Or, if you\'d like to avoid registering this form control, indicate that it\'s standalone in ngModelOptions:\n\n      Example:\n\n      \n    <div [formGroup]="myGroup">\n       <input formControlName="firstName">\n       <input [(ngModel)]="showMoreControls" [ngModelOptions]="{standalone: true}">\n    </div>\n  ')},t.formGroupNameException=function(){throw new Error("\n      ngModel cannot be used to register form controls with a parent formGroupName or formArrayName directive.\n\n      Option 1: Use formControlName instead of ngModel (reactive strategy):\n\n      "+L+"\n\n      Option 2:  Update ngModel's parent be ngModelGroup (template-driven strategy):\n\n      "+I)},t.missingNameException=function(){throw new Error('If ngModel is used within a form tag, either the name attribute must be set or the form\n      control must be defined as \'standalone\' in ngModelOptions.\n\n      Example 1: <input [(ngModel)]="person.firstName" name="first">\n      Example 2: <input [(ngModel)]="person.firstName" [ngModelOptions]="{standalone: true}">')},t.modelGroupParentException=function(){throw new Error("\n      ngModelGroup cannot be used with a parent formGroup directive.\n\n      Option 1: Use formGroupName instead of ngModelGroup (reactive strategy):\n\n      "+L+"\n\n      Option 2:  Use a regular form tag instead of the formGroup directive (template-driven strategy):\n\n      "+I)},t}(),ft=function(t){function e(e,n,r){var i=t.call(this)||this;return i._parent=e,i._validators=n,i._asyncValidators=r,i}var n;return Object(r.__extends)(e,t),n=e,e.prototype._checkParentType=function(){this._parent instanceof n||this._parent instanceof dt||pt.modelGroupParentException()},n=Object(r.__decorate)([Object(r.__param)(0,Object(i.o)()),Object(r.__param)(0,Object(i.M)()),Object(r.__param)(1,Object(i.D)()),Object(r.__param)(1,Object(i.L)()),Object(r.__param)(1,Object(i.r)(d)),Object(r.__param)(2,Object(i.D)()),Object(r.__param)(2,Object(i.L)()),Object(r.__param)(2,Object(i.r)(p))],e)}(tt),mt=Promise.resolve(null),vt=function(t){function e(e,n,r,o){var a=t.call(this)||this;return a.control=new ut,a._registered=!1,a.update=new i.n,a._parent=e,a._rawValidators=n||[],a._rawAsyncValidators=r||[],a.valueAccessor=J(a,o),a}return Object(r.__extends)(e,t),e.prototype.ngOnChanges=function(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),K(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)},e.prototype.ngOnDestroy=function(){this.formDirective&&this.formDirective.removeControl(this)},Object.defineProperty(e.prototype,"path",{get:function(){return this._parent?G(this.name,this._parent):[this.name]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"formDirective",{get:function(){return this._parent?this._parent.formDirective:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"validator",{get:function(){return X(this._rawValidators)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"asyncValidator",{get:function(){return Y(this._rawAsyncValidators)},enumerable:!0,configurable:!0}),e.prototype.viewToModelUpdate=function(t){this.viewModel=t,this.update.emit(t)},e.prototype._setUpControl=function(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0},e.prototype._setUpdateStrategy=function(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)},e.prototype._isStandalone=function(){return!this._parent||!(!this.options||!this.options.standalone)},e.prototype._setUpStandalone=function(){V(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})},e.prototype._checkForErrors=function(){this._isStandalone()||this._checkParentType(),this._checkName()},e.prototype._checkParentType=function(){!(this._parent instanceof ft)&&this._parent instanceof tt?pt.formGroupNameException():this._parent instanceof ft||this._parent instanceof dt||pt.modelParentException()},e.prototype._checkName=function(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()||this.name||pt.missingNameException()},e.prototype._updateValue=function(t){var e=this;mt.then(function(){e.control.setValue(t,{emitViewToModelChange:!1})})},e.prototype._updateDisabled=function(t){var e=this,n=t.isDisabled.currentValue,r=""===n||n&&"false"!==n;mt.then(function(){r&&!e.control.disabled?e.control.disable():!r&&e.control.disabled&&e.control.enable()})},Object(r.__decorate)([Object(r.__param)(0,Object(i.D)()),Object(r.__param)(0,Object(i.o)()),Object(r.__param)(1,Object(i.D)()),Object(r.__param)(1,Object(i.L)()),Object(r.__param)(1,Object(i.r)(d)),Object(r.__param)(2,Object(i.D)()),Object(r.__param)(2,Object(i.L)()),Object(r.__param)(2,Object(i.r)(p)),Object(r.__param)(3,Object(i.D)()),Object(r.__param)(3,Object(i.L)()),Object(r.__param)(3,Object(i.r)(_))],e)}(C),gt=new i.s("NgModelWithFormControlWarning"),yt=function(t){function e(e,n){var r=t.call(this)||this;return r._validators=e,r._asyncValidators=n,r.submitted=!1,r.directives=[],r.form=null,r.ngSubmit=new i.n,r}return Object(r.__extends)(e,t),e.prototype.ngOnChanges=function(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations())},Object.defineProperty(e.prototype,"formDirective",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"control",{get:function(){return this.form},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return[]},enumerable:!0,configurable:!0}),e.prototype.addControl=function(t){var e=this.form.get(t.path);return V(e,t),e.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),e},e.prototype.getControl=function(t){return this.form.get(t.path)},e.prototype.removeControl=function(t){$(this.directives,t)},e.prototype.addFormGroup=function(t){var e=this.form.get(t.path);H(e,t),e.updateValueAndValidity({emitEvent:!1})},e.prototype.removeFormGroup=function(t){},e.prototype.getFormGroup=function(t){return this.form.get(t.path)},e.prototype.addFormArray=function(t){var e=this.form.get(t.path);H(e,t),e.updateValueAndValidity({emitEvent:!1})},e.prototype.removeFormArray=function(t){},e.prototype.getFormArray=function(t){return this.form.get(t.path)},e.prototype.updateModel=function(t,e){this.form.get(t.path).setValue(e)},e.prototype.onSubmit=function(t){return this.submitted=!0,Q(this.form,this.directives),this.ngSubmit.emit(t),!1},e.prototype.onReset=function(){this.resetForm()},e.prototype.resetForm=function(t){void 0===t&&(t=void 0),this.form.reset(t),this.submitted=!1},e.prototype._updateDomValue=function(){var t=this;this.directives.forEach(function(e){var n=t.form.get(e.path);e.control!==n&&(function(t,e){e.valueAccessor.registerOnChange(function(){return W(e)}),e.valueAccessor.registerOnTouched(function(){return W(e)}),e._rawValidators.forEach(function(t){t.registerOnValidatorChange&&t.registerOnValidatorChange(null)}),e._rawAsyncValidators.forEach(function(t){t.registerOnValidatorChange&&t.registerOnValidatorChange(null)}),t&&t._clearChangeFns()}(e.control,e),n&&V(n,e),e.control=n)}),this.form._updateTreeValidity({emitEvent:!1})},e.prototype._updateRegistrations=function(){var t=this;this.form._registerOnCollectionChange(function(){return t._updateDomValue()}),this._oldForm&&this._oldForm._registerOnCollectionChange(function(){}),this._oldForm=this.form},e.prototype._updateValidators=function(){var t=X(this._validators);this.form.validator=m.compose([this.form.validator,t]);var e=Y(this._asyncValidators);this.form.asyncValidator=m.composeAsync([this.form.asyncValidator,e])},e.prototype._checkFormPresent=function(){this.form||N.missingFormException()},Object(r.__decorate)([Object(r.__param)(0,Object(i.D)()),Object(r.__param)(0,Object(i.L)()),Object(r.__param)(0,Object(i.r)(d)),Object(r.__param)(1,Object(i.D)()),Object(r.__param)(1,Object(i.L)()),Object(r.__param)(1,Object(i.r)(p))],e)}(c),_t=function(t){function e(e,n,r){var i=t.call(this)||this;return i._parent=e,i._validators=n,i._asyncValidators=r,i}return Object(r.__extends)(e,t),e.prototype._checkParentType=function(){wt(this._parent)&&N.groupParentException()},Object(r.__decorate)([Object(r.__param)(0,Object(i.D)()),Object(r.__param)(0,Object(i.o)()),Object(r.__param)(0,Object(i.M)()),Object(r.__param)(1,Object(i.D)()),Object(r.__param)(1,Object(i.L)()),Object(r.__param)(1,Object(i.r)(d)),Object(r.__param)(2,Object(i.D)()),Object(r.__param)(2,Object(i.L)()),Object(r.__param)(2,Object(i.r)(p))],e)}(tt),bt=function(t){function e(e,n,r){var i=t.call(this)||this;return i._parent=e,i._validators=n,i._asyncValidators=r,i}return Object(r.__extends)(e,t),e.prototype.ngOnInit=function(){this._checkParentType(),this.formDirective.addFormArray(this)},e.prototype.ngOnDestroy=function(){this.formDirective&&this.formDirective.removeFormArray(this)},Object.defineProperty(e.prototype,"control",{get:function(){return this.formDirective.getFormArray(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"formDirective",{get:function(){return this._parent?this._parent.formDirective:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return G(this.name,this._parent)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"validator",{get:function(){return X(this._validators)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"asyncValidator",{get:function(){return Y(this._asyncValidators)},enumerable:!0,configurable:!0}),e.prototype._checkParentType=function(){wt(this._parent)&&N.arrayParentException()},Object(r.__decorate)([Object(r.__param)(0,Object(i.D)()),Object(r.__param)(0,Object(i.o)()),Object(r.__param)(0,Object(i.M)()),Object(r.__param)(1,Object(i.D)()),Object(r.__param)(1,Object(i.L)()),Object(r.__param)(1,Object(i.r)(d)),Object(r.__param)(2,Object(i.D)()),Object(r.__param)(2,Object(i.L)()),Object(r.__param)(2,Object(i.r)(p))],e)}(c);function wt(t){return!(t instanceof _t||t instanceof yt||t instanceof bt)}var xt=function(t){function e(e,n,r,o,a){var s=t.call(this)||this;return s._ngModelWarningConfig=a,s._added=!1,s.update=new i.n,s._ngModelWarningSent=!1,s._parent=e,s._rawValidators=n||[],s._rawAsyncValidators=r||[],s.valueAccessor=J(s,o),s}var n;return Object(r.__extends)(e,t),n=e,Object.defineProperty(e.prototype,"isDisabled",{set:function(t){N.disabledAttrWarning()},enumerable:!0,configurable:!0}),e.prototype.ngOnChanges=function(t){var e,r,o,a;this._added||this._setUpControl(),K(t,this.viewModel)&&(e="formControlName",r=n,o=this,a=this._ngModelWarningConfig,Object(i.Ba)()&&"never"!==a&&((null!==a&&"once"!==a||r._ngModelWarningSentOnce)&&("always"!==a||o._ngModelWarningSent)||(N.ngModelWarning(e),r._ngModelWarningSentOnce=!0,o._ngModelWarningSent=!0)),this.viewModel=this.model,this.formDirective.updateModel(this,this.model))},e.prototype.ngOnDestroy=function(){this.formDirective&&this.formDirective.removeControl(this)},e.prototype.viewToModelUpdate=function(t){this.viewModel=t,this.update.emit(t)},Object.defineProperty(e.prototype,"path",{get:function(){return G(this.name,this._parent)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"formDirective",{get:function(){return this._parent?this._parent.formDirective:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"validator",{get:function(){return X(this._rawValidators)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"asyncValidator",{get:function(){return Y(this._rawAsyncValidators)},enumerable:!0,configurable:!0}),e.prototype._checkParentType=function(){!(this._parent instanceof _t)&&this._parent instanceof tt?N.ngModelGroupException():this._parent instanceof _t||this._parent instanceof yt||this._parent instanceof bt||N.controlParentException()},e.prototype._setUpControl=function(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0},e._ngModelWarningSentOnce=!1,n=Object(r.__decorate)([Object(r.__param)(0,Object(i.D)()),Object(r.__param)(0,Object(i.o)()),Object(r.__param)(0,Object(i.M)()),Object(r.__param)(1,Object(i.D)()),Object(r.__param)(1,Object(i.L)()),Object(r.__param)(1,Object(i.r)(d)),Object(r.__param)(2,Object(i.D)()),Object(r.__param)(2,Object(i.L)()),Object(r.__param)(2,Object(i.r)(p)),Object(r.__param)(3,Object(i.D)()),Object(r.__param)(3,Object(i.L)()),Object(r.__param)(3,Object(i.r)(_)),Object(r.__param)(4,Object(i.D)()),Object(r.__param)(4,Object(i.r)(gt))],e)}(C),Et=function(){function t(){}return Object.defineProperty(t.prototype,"required",{get:function(){return this._required},set:function(t){this._required=null!=t&&!1!==t&&""+t!="false",this._onChange&&this._onChange()},enumerable:!0,configurable:!0}),t.prototype.validate=function(t){return this.required?m.required(t):null},t.prototype.registerOnValidatorChange=function(t){this._onChange=t},t}(),St=function(){function t(){}return t.prototype.group=function(t,e){void 0===e&&(e=null);var n=this._reduceControls(t);return new lt(n,null!=e?e.validator:null,null!=e?e.asyncValidator:null)},t.prototype.control=function(t,e,n){return new ut(t,e,n)},t.prototype.array=function(t,e,n){var r=this,i=t.map(function(t){return r._createControl(t)});return new ct(i,e,n)},t.prototype._reduceControls=function(t){var e=this,n={};return Object.keys(t).forEach(function(r){n[r]=e._createControl(t[r])}),n},t.prototype._createControl=function(t){return t instanceof ut||t instanceof lt||t instanceof ct?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)},t}(),Tt=function(){},Mt=function(){},Ct=function(){},At=function(){function t(){}var e;return e=t,t.withConfig=function(t){return{ngModule:e,providers:[{provide:gt,useValue:t.warnOnNgModelWithFormControl}]}},t}()},gWF3:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n("0kFh"),o=n("scCI"),a=n("Mom/"),s=n("A1ZE"),u=n("aScZ"),l=n("W1I6"),c=n("q1Ft"),h=n("SyT/"),d=n("0kFh"),p=n("9sPh"),f=n("0kFh");e.Query=function(){function t(t,e,n,r){this.repo=t,this.path=e,this.queryParams_=n,this.orderByCalled_=r}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return i.assert(r,"Reference.ts has not been loaded"),r},set:function(t){r=t},enumerable:!0,configurable:!0}),t.validateQueryEndpoints_=function(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===o.KEY_INDEX){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",c="Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!=l.MIN_NAME)throw new Error(r);if("string"!=typeof e)throw new Error(c)}if(t.hasEnd()){if(t.getIndexEndName()!=l.MAX_NAME)throw new Error(r);if("string"!=typeof n)throw new Error(c)}}else if(t.getIndex()===a.PRIORITY_INDEX){if(null!=e&&!h.isValidPriority(e)||null!=n&&!h.isValidPriority(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(i.assert(t.getIndex()instanceof u.PathIndex||t.getIndex()===s.VALUE_INDEX,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.")},t.validateLimit_=function(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.")},t.prototype.validateNoPreviousOrderByCall_=function(t){if(!0===this.orderByCalled_)throw new Error(t+": You can't combine multiple orderBy calls.")},t.prototype.getQueryParams=function(){return this.queryParams_},t.prototype.getRef=function(){return d.validateArgCount("Query.ref",0,0,arguments.length),new t.__referenceConstructor(this.repo,this.path)},t.prototype.on=function(e,n,r,i){d.validateArgCount("Query.on",2,4,arguments.length),h.validateEventType("Query.on",1,e,!1),d.validateCallback("Query.on",2,n,!1);var o=t.getCancelAndContextArgs_("Query.on",r,i);if("value"===e)this.onValueEvent(n,o.cancel,o.context);else{var a={};a[e]=n,this.onChildEvent(a,o.cancel,o.context)}return n},t.prototype.onValueEvent=function(t,e,n){var r=new p.ValueEventRegistration(t,e||null,n||null);this.repo.addEventCallbackForQuery(this,r)},t.prototype.onChildEvent=function(t,e,n){var r=new p.ChildEventRegistration(t,e,n);this.repo.addEventCallbackForQuery(this,r)},t.prototype.off=function(t,e,n){d.validateArgCount("Query.off",0,3,arguments.length),h.validateEventType("Query.off",1,t,!0),d.validateCallback("Query.off",2,e,!0),d.validateContextObject("Query.off",3,n,!0);var r=null,i=null;"value"===t?r=new p.ValueEventRegistration(e||null,null,n||null):t&&(e&&((i={})[t]=e),r=new p.ChildEventRegistration(i,null,n||null)),this.repo.removeEventCallbackForQuery(this,r)},t.prototype.once=function(e,n,r,i){var o=this;d.validateArgCount("Query.once",1,4,arguments.length),h.validateEventType("Query.once",1,e,!1),d.validateCallback("Query.once",2,n,!0);var a=t.getCancelAndContextArgs_("Query.once",r,i),s=!0,u=new f.Deferred;u.promise.catch(function(){});var l=function(t){s&&(s=!1,o.off(e,l),n&&n.bind(a.context)(t),u.resolve(t))};return this.on(e,l,function(t){o.off(e,l),a.cancel&&a.cancel.bind(a.context)(t),u.reject(t)}),u.promise},t.prototype.limitToFirst=function(e){if(d.validateArgCount("Query.limitToFirst",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,this.queryParams_.limitToFirst(e),this.orderByCalled_)},t.prototype.limitToLast=function(e){if(d.validateArgCount("Query.limitToLast",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,this.queryParams_.limitToLast(e),this.orderByCalled_)},t.prototype.orderByChild=function(e){if(d.validateArgCount("Query.orderByChild",1,1,arguments.length),"$key"===e)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===e)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===e)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');h.validatePathString("Query.orderByChild",1,e,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var n=new c.Path(e);if(n.isEmpty())throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var r=new u.PathIndex(n),i=this.queryParams_.orderBy(r);return t.validateQueryEndpoints_(i),new t(this.repo,this.path,i,!0)},t.prototype.orderByKey=function(){d.validateArgCount("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var e=this.queryParams_.orderBy(o.KEY_INDEX);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByPriority=function(){d.validateArgCount("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var e=this.queryParams_.orderBy(a.PRIORITY_INDEX);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByValue=function(){d.validateArgCount("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var e=this.queryParams_.orderBy(s.VALUE_INDEX);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.startAt=function(e,n){void 0===e&&(e=null),d.validateArgCount("Query.startAt",0,2,arguments.length),h.validateFirebaseDataArg("Query.startAt",1,e,this.path,!0),h.validateKey("Query.startAt",2,n,!0);var r=this.queryParams_.startAt(e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===e&&(e=null,n=null),new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.endAt=function(e,n){void 0===e&&(e=null),d.validateArgCount("Query.endAt",0,2,arguments.length),h.validateFirebaseDataArg("Query.endAt",1,e,this.path,!0),h.validateKey("Query.endAt",2,n,!0);var r=this.queryParams_.endAt(e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.equalTo=function(t,e){if(d.validateArgCount("Query.equalTo",1,2,arguments.length),h.validateFirebaseDataArg("Query.equalTo",1,t,this.path,!1),h.validateKey("Query.equalTo",2,e,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.startAt(t,e).endAt(t,e)},t.prototype.toString=function(){return d.validateArgCount("Query.toString",0,0,arguments.length),this.repo.toString()+this.path.toUrlEncodedString()},t.prototype.toJSON=function(){return d.validateArgCount("Query.toJSON",0,1,arguments.length),this.toString()},t.prototype.queryObject=function(){return this.queryParams_.getQueryObject()},t.prototype.queryIdentifier=function(){var t=this.queryObject(),e=l.ObjectToUniqueKey(t);return"{}"===e?"default":e},t.prototype.isEqual=function(e){if(d.validateArgCount("Query.isEqual",1,1,arguments.length),!(e instanceof t))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");var n=this.repo===e.repo,r=this.path.equals(e.path),i=this.queryIdentifier()===e.queryIdentifier();return n&&r&&i},t.getCancelAndContextArgs_=function(t,e,n){var r={cancel:null,context:null};if(e&&n)r.cancel=e,d.validateCallback(t,3,r.cancel,!0),r.context=n,d.validateContextObject(t,4,r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(d.errorPrefix(t,3,!0)+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!0,configurable:!0}),t}()},geFX:function(t,e,n){"use strict";n.r(e);var r=n("0kFh"),i=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o="[DEFAULT]",a=[],s=function(){function t(t,e,n){this.firebase_=n,this.isDeleted_=!1,this.services_={},this.name_=e,this.options_=Object(r.deepCopy)(t),this.INTERNAL={getUid:function(){return null},getToken:function(){return Promise.resolve(null)},addAuthTokenListener:function(t){a.push(t),setTimeout(function(){return t(null)},0)},removeAuthTokenListener:function(t){a=a.filter(function(e){return e!==t})}}}return Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!0,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise(function(e){t.checkDestroyed_(),e()}).then(function(){t.firebase_.INTERNAL.removeApp(t.name_);var e=[];return Object.keys(t.services_).forEach(function(n){Object.keys(t.services_[n]).forEach(function(r){e.push(t.services_[n][r])})}),Promise.all(e.map(function(t){return t.INTERNAL.delete()}))}).then(function(){t.isDeleted_=!0,t.services_={}})},t.prototype._getService=function(t,e){if(void 0===e&&(e=o),this.checkDestroyed_(),this.services_[t]||(this.services_[t]={}),!this.services_[t][e]){var n=e!==o?e:void 0,r=this.firebase_.INTERNAL.factories[t](this,this.extendApp.bind(this),n);this.services_[t][e]=r}return this.services_[t][e]},t.prototype.extendApp=function(t){var e=this;Object(r.deepExtend)(this,t),t.INTERNAL&&t.INTERNAL.addAuthTokenListener&&(a.forEach(function(t){e.INTERNAL.addAuthTokenListener(t)}),a=[])},t.prototype.checkDestroyed_=function(){this.isDeleted_&&u("app-deleted",{name:this.name_})},t}();function u(t,e){throw l.create(t,e)}s.prototype.name&&s.prototype.options||s.prototype.delete||console.log("dc");var l=new r.ErrorFactory("app","Firebase",{"no-app":"No Firebase App '{$name}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$name}","duplicate-app":"Firebase App named '{$name}' already exists","app-deleted":"Firebase App named '{$name}' already deleted","duplicate-service":"Firebase service named '{$name}' already registered","sa-not-supported":"Initializing the Firebase SDK with a service account is only allowed in a Node.js environment. On client devices, you should instead initialize the SDK with an api key and auth domain","invalid-app-argument":"firebase.{$name}() takes either no argument or a Firebase App instance."});n.d(e,"firebase",function(){return c});var c=function t(){var e={},n={},a={},l={__esModule:!0,initializeApp:function(t,n){void 0===n?n=o:"string"==typeof n&&""!==n||u("bad-app-name",{name:n+""}),i(e,n)&&u("duplicate-app",{name:n});var r=new s(t,n,l);return e[n]=r,d(r,"create"),r},app:c,apps:null,Promise:Promise,SDK_VERSION:"4.10.1",INTERNAL:{registerService:function(t,e,i,o,d){n[t]&&u("duplicate-service",{name:t}),n[t]=e,o&&(a[t]=o,h().forEach(function(t){o("create",t)}));var p=function(e){return void 0===e&&(e=c()),"function"!=typeof e[t]&&u("invalid-app-argument",{name:t}),e[t]()};return void 0!==i&&Object(r.deepExtend)(p,i),l[t]=p,s.prototype[t]=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return this._getService.bind(this,t).apply(this,d?e:[])},p},createFirebaseNamespace:t,extendNamespace:function(t){Object(r.deepExtend)(l,t)},createSubscribe:r.createSubscribe,ErrorFactory:r.ErrorFactory,removeApp:function(t){d(e[t],"delete"),delete e[t]},factories:n,useAsService:p,Promise:Promise,deepExtend:r.deepExtend}};function c(t){return i(e,t=t||o)||u("no-app",{name:t}),e[t]}function h(){return Object.keys(e).map(function(t){return e[t]})}function d(t,e){Object.keys(n).forEach(function(n){var r=p(0,n);null!==r&&a[r]&&a[r](e,t)})}function p(t,e){return"serverAuth"===e?null:e}return Object(r.patchProperty)(l,"default",l),Object.defineProperty(l,"apps",{get:h}),Object(r.patchProperty)(c,"App",s),l}();e.default=c},h6Fy:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n("mrSG"),o=n("0kFh"),a=n("W1I6"),s=n("w7gh"),u=n("+e0l"),l=n("mZUT"),c=n("Mom/"),h=n("scCI"),d=n("7WVx"),p=n("Ix30"),f=n("Twyb"),m=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&l.validatePriorityNode(this.priorityNode_),this.children_.isEmpty()&&o.assert(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return r||(r=new t(new s.SortedMap(f.NAME_COMPARATOR),null,d.IndexMap.Default))},enumerable:!0,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||r},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?r:e},t.prototype.getChild=function(t){var e=t.getFront();return null===e?this:this.getImmediateChild(e).getChild(t.popFront())},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if(o.assert(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var i=new u.NamedNode(e,n),a=void 0,s=void 0;return n.isEmpty()?(a=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(i,this.children_)):(a=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(i,this.children_)),new t(a,a.isEmpty()?r:this.priorityNode_,s)},t.prototype.updateChild=function(t,e){var n=t.getFront();if(null===n)return e;o.assert(".priority"!==t.getFront()||1===t.getLength(),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(t.popFront(),e);return this.updateImmediateChild(n,r)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(c.PRIORITY_INDEX,function(a,s){n[a]=s.val(e),r++,o&&t.INTEGER_REGEXP_.test(a)?i=Math.max(i,Number(a)):o=!1}),!e&&o&&i<2*r){var a=[];for(var s in n)a[s]=n[s];return a}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+l.priorityHashText(this.getPriority().val())+":"),this.forEachChild(c.PRIORITY_INDEX,function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)}),this.lazyHash_=""===t?"":a.sha1(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new u.NamedNode(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new u.NamedNode(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new u.NamedNode(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal(function(t){return e(t.name,t.node)}):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,function(t){return t});for(var r=this.children_.getIteratorFrom(t.name,u.NamedNode.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,function(t){return t});for(var r=this.children_.getReverseIteratorFrom(t.name,u.NamedNode.Wrap),i=r.peek();null!=i&&e.compare(i,t)>0;)r.getNext(),i=r.peek();return r},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===e.MAX_NODE?-1:0},t.prototype.withIndex=function(e){if(e===h.KEY_INDEX||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===h.KEY_INDEX||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){for(var n=this.getIterator(c.PRIORITY_INDEX),r=e.getIterator(c.PRIORITY_INDEX),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===h.KEY_INDEX?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}();e.ChildrenNode=m;var v=function(t){function e(){return t.call(this,new s.SortedMap(f.NAME_COMPARATOR),m.EMPTY_NODE,d.IndexMap.Default)||this}return i.__extends(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return m.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(m);e.MaxNode=v,e.MAX_NODE=new v,Object.defineProperties(u.NamedNode,{MIN:{value:new u.NamedNode(a.MIN_NAME,m.EMPTY_NODE)},MAX:{value:new u.NamedNode(a.MAX_NAME,e.MAX_NODE)}}),h.KeyIndex.__EMPTY_NODE=m.EMPTY_NODE,p.LeafNode.__childrenNodeConstructor=m,l.setMaxNode(e.MAX_NODE),c.setMaxNode(e.MAX_NODE)},hMCQ:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("0kFh"),i=n("G6nc"),o=n("0kFh");e.ChildChangeAccumulator=function(){function t(){this.changeMap_={}}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;o.assert(e==i.Change.CHILD_ADDED||e==i.Change.CHILD_CHANGED||e==i.Change.CHILD_REMOVED,"Only child changes supported for tracking"),o.assert(".priority"!==n,"Only non-priority child changes can be tracked.");var a=r.safeGet(this.changeMap_,n);if(a){var s=a.type;if(e==i.Change.CHILD_ADDED&&s==i.Change.CHILD_REMOVED)this.changeMap_[n]=i.Change.childChangedChange(n,t.snapshotNode,a.snapshotNode);else if(e==i.Change.CHILD_REMOVED&&s==i.Change.CHILD_ADDED)delete this.changeMap_[n];else if(e==i.Change.CHILD_REMOVED&&s==i.Change.CHILD_CHANGED)this.changeMap_[n]=i.Change.childRemovedChange(n,a.oldSnap);else if(e==i.Change.CHILD_CHANGED&&s==i.Change.CHILD_ADDED)this.changeMap_[n]=i.Change.childAddedChange(n,t.snapshotNode);else{if(e!=i.Change.CHILD_CHANGED||s!=i.Change.CHILD_CHANGED)throw o.assertionError("Illegal combination of changes: "+t+" occurred after "+a);this.changeMap_[n]=i.Change.childChangedChange(n,t.snapshotNode,a.oldSnap)}}else this.changeMap_[n]=t},t.prototype.getChanges=function(){return r.getValues(this.changeMap_)},t}()},hOVL:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n("w7gh"),o=n("q1Ft"),a=n("W1I6"),s=n("0kFh"),u=function(){return r||(r=new i.SortedMap(a.stringCompare)),r};e.ImmutableTree=function(){function t(t,e){void 0===e&&(e=u()),this.value=t,this.children=e}return t.fromObject=function(e){var n=t.Empty;return s.forEach(e,function(t,e){n=n.set(new o.Path(t),e)}),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:o.Path.Empty,value:this.value};if(t.isEmpty())return null;var n=t.getFront(),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(t.popFront(),e);return null!=i?{path:new o.Path(n).child(i.path),value:i.value}:null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,function(){return!0})},t.prototype.subtree=function(e){if(e.isEmpty())return this;var n=e.getFront(),r=this.children.get(n);return null!==r?r.subtree(e.popFront()):t.Empty},t.prototype.set=function(e,n){if(e.isEmpty())return new t(n,this.children);var r=e.getFront(),i=(this.children.get(r)||t.Empty).set(e.popFront(),n),o=this.children.insert(r,i);return new t(this.value,o)},t.prototype.remove=function(e){if(e.isEmpty())return this.children.isEmpty()?t.Empty:new t(null,this.children);var n=e.getFront(),r=this.children.get(n);if(r){var i=r.remove(e.popFront()),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?t.Empty:new t(this.value,o)}return this},t.prototype.get=function(t){if(t.isEmpty())return this.value;var e=t.getFront(),n=this.children.get(e);return n?n.get(t.popFront()):null},t.prototype.setTree=function(e,n){if(e.isEmpty())return n;var r,i=e.getFront(),o=(this.children.get(i)||t.Empty).setTree(e.popFront(),n);return r=o.isEmpty()?this.children.remove(i):this.children.insert(i,o),new t(this.value,r)},t.prototype.fold=function(t){return this.fold_(o.Path.Empty,t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal(function(r,i){n[r]=i.fold_(t.child(r),e)}),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,o.Path.Empty,e)},t.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(t.isEmpty())return null;var i=t.getFront(),o=this.children.get(i);return o?o.findOnPath_(t.popFront(),e.child(i),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,o.Path.Empty,e)},t.prototype.foreachOnPath_=function(e,n,r){if(e.isEmpty())return this;this.value&&r(n,this.value);var i=e.getFront(),o=this.children.get(i);return o?o.foreachOnPath_(e.popFront(),n.child(i),r):t.Empty},t.prototype.foreach=function(t){this.foreach_(o.Path.Empty,t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal(function(n,r){r.foreach_(t.child(n),e)}),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal(function(e,n){n.value&&t(e,n.value)})},t.Empty=new t(null),t}()},iDIO:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("mrSG"),i=n("mPkq"),o=n("0kFh");e.VisibilityMonitor=function(t){function e(){var e,n,r=t.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",e="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",e="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,function(){var t=!document[e];t!==r.visible_&&(r.visible_=t,r.trigger("visible",t))},!1),r}return r.__extends(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return o.assert("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(i.EventEmitter)},iLxQ:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=!1,i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},icDE:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("mrSG"),i=n("W1I6"),o=n("S4uM"),a=n("q1Ft"),s=n("nheu"),u=n("0iAU"),l=n("rkrO"),c=n("0kFh"),h=n("SyT/");e.Database=function(){function t(t){this.repo_=t,t instanceof u.Repo||i.fatal("Don't call new Database() directly - please use firebase.database()."),this.root_=new s.Reference(t,a.Path.Empty),this.INTERNAL=new d(this)}return Object.defineProperty(t.prototype,"app",{get:function(){return this.repo_.app},enumerable:!0,configurable:!0}),t.prototype.ref=function(t){return this.checkDeleted_("ref"),c.validateArgCount("database.ref",0,1,arguments.length),t instanceof s.Reference?this.refFromURL(t.toString()):void 0!==t?this.root_.child(t):this.root_},t.prototype.refFromURL=function(t){var e="database.refFromURL";this.checkDeleted_(e),c.validateArgCount(e,1,1,arguments.length);var n=o.parseRepoInfo(t);h.validateUrl(e,1,n);var r=n.repoInfo;return r.host!==this.repo_.repoInfo_.host&&i.fatal(e+": Host name does not match the current database: (found "+r.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},t.prototype.checkDeleted_=function(t){null===this.repo_&&i.fatal("Cannot call "+t+" on a deleted database.")},t.prototype.goOffline=function(){c.validateArgCount("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},t.prototype.goOnline=function(){c.validateArgCount("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},t.ServerValue={TIMESTAMP:{".sv":"timestamp"}},t}();var d=function(){function t(t){this.database=t}return t.prototype.delete=function(){return r.__awaiter(this,void 0,void 0,function(){return r.__generator(this,function(t){return this.database.checkDeleted_("delete"),l.RepoManager.getInstance().deleteRepo(this.database.repo_),this.database.repo_=null,this.database.root_=null,this.database.INTERNAL=null,this.database=null,[2]})})},t}();e.DatabaseInternals=d},isby:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=Array.isArray||function(t){return t&&"number"==typeof t.length}},jKXO:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("+e0l"),i=n("G6nc"),o=n("0kFh");e.EventGenerator=function(){function t(t){this.query_=t,this.index_=this.query_.getQueryParams().getIndex()}return t.prototype.generateEventsForChanges=function(t,e,n){var r=this,o=[],a=[];return t.forEach(function(t){t.type===i.Change.CHILD_CHANGED&&r.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&a.push(i.Change.childMovedChange(t.childName,t.snapshotNode))}),this.generateEventsForType_(o,i.Change.CHILD_REMOVED,t,n,e),this.generateEventsForType_(o,i.Change.CHILD_ADDED,t,n,e),this.generateEventsForType_(o,i.Change.CHILD_MOVED,a,n,e),this.generateEventsForType_(o,i.Change.CHILD_CHANGED,t,n,e),this.generateEventsForType_(o,i.Change.VALUE,t,n,e),o},t.prototype.generateEventsForType_=function(t,e,n,r,i){var o=this,a=n.filter(function(t){return t.type===e});a.sort(this.compareChanges_.bind(this)),a.forEach(function(e){var n=o.materializeSingleChange_(e,i);r.forEach(function(r){r.respondsTo(e.type)&&t.push(r.createEvent(n,o.query_))})})},t.prototype.materializeSingleChange_=function(t,e){return"value"===t.type||"child_removed"===t.type?t:(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,this.index_),t)},t.prototype.compareChanges_=function(t,e){if(null==t.childName||null==e.childName)throw o.assertionError("Should only compare child_ events.");var n=new r.NamedNode(t.childName,t.snapshotNode),i=new r.NamedNode(e.childName,e.snapshotNode);return this.index_.compare(n,i)},t}()},kERW:function(t,e,n){"use strict";n.r(e),n.d(e,"fromEventPattern",function(){return s});var r=n("6blF"),i=n("isby"),o=n("2Bdj"),a=n("67Y/");function s(t,e,n){return n?s(t,e).pipe(Object(a.a)(function(t){return Object(i.a)(t)?n.apply(void 0,t):n(t)})):new r.a(function(n){var r,i=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return n.next(1===t.length?t[0]:t)};try{r=t(i)}catch(t){return void n.error(t)}if(Object(o.a)(e))return function(){return e(i,r)}})}},kYWE:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("0kFh"),i=n("nheu"),o=n("3RyD"),a=n("q1Ft"),s=n("+dao"),u=n("Mom/"),l=n("W1I6"),c=n("SoC1"),h=n("SyT/"),d=n("0kFh"),p=n("FKYu"),f=n("h6Fy"),m=n("0iAU"),v=e.TransactionStatus=function(t){return t[t.RUN=0]="RUN",t[t.SENT=1]="SENT",t[t.COMPLETED=2]="COMPLETED",t[t.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT",t[t.NEEDS_ABORT=4]="NEEDS_ABORT",t}(e.TransactionStatus||{});m.Repo.MAX_TRANSACTION_RETRIES_=25,m.Repo.prototype.transactions_init_=function(){this.transactionQueueTree_=new s.Tree},m.Repo.prototype.startTransaction=function(t,e,n,a){this.log_("transaction on "+t);var s=function(){},m=new i.Reference(this,t);m.on("value",s);var g={path:t,update:e,onComplete:n,status:null,order:l.LUIDGenerator(),applyLocally:a,retryCount:0,unwatcher:function(){m.off("value",s)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},y=this.getLatestState_(t);g.currentInputSnapshot=y;var _=g.update(y.val());if(void 0===_){if(g.unwatcher(),g.currentOutputSnapshotRaw=null,g.currentOutputSnapshotResolved=null,g.onComplete){var b=new o.DataSnapshot(g.currentInputSnapshot,new i.Reference(this,g.path),u.PRIORITY_INDEX);g.onComplete(null,!1,b)}}else{h.validateFirebaseData("transaction failed: Data returned ",_,g.path),g.status=v.RUN;var w=this.transactionQueueTree_.subTree(t),x=w.getValue()||[];x.push(g),w.setValue(x);var E=void 0;"object"==typeof _&&null!==_&&d.contains(_,".priority")?(E=d.safeGet(_,".priority"),r.assert(h.isValidPriority(E),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):E=(this.serverSyncTree_.calcCompleteEventCache(t)||f.ChildrenNode.EMPTY_NODE).getPriority().val(),E=E;var S=this.generateServerValues(),T=p.nodeFromJSON(_,E),M=c.resolveDeferredValueSnapshot(T,S);g.currentOutputSnapshotRaw=T,g.currentOutputSnapshotResolved=M,g.currentWriteId=this.getNextWriteId_();var C=this.serverSyncTree_.applyUserOverwrite(t,M,g.currentWriteId,g.applyLocally);this.eventQueue_.raiseEventsForChangedPath(t,C),this.sendReadyTransactions_()}},m.Repo.prototype.getLatestState_=function(t,e){return this.serverSyncTree_.calcCompleteEventCache(t,e)||f.ChildrenNode.EMPTY_NODE},m.Repo.prototype.sendReadyTransactions_=function(t){var e=this;if(void 0===t&&(t=this.transactionQueueTree_),t||this.pruneCompletedTransactionsBelowNode_(t),null!==t.getValue()){var n=this.buildTransactionQueue_(t);r.assert(n.length>0,"Sending zero length transaction queue"),n.every(function(t){return t.status===v.RUN})&&this.sendTransactionQueue_(t.path(),n)}else t.hasChildren()&&t.forEachChild(function(t){e.sendReadyTransactions_(t)})},m.Repo.prototype.sendTransactionQueue_=function(t,e){for(var n=this,s=e.map(function(t){return t.currentWriteId}),c=this.getLatestState_(t,s),h=c,d=c.hash(),p=0;p<e.length;p++){var f=e[p];r.assert(f.status===v.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),f.status=v.SENT,f.retryCount++;var m=a.Path.relativePath(t,f.path);h=h.updateChild(m,f.currentOutputSnapshotRaw)}var g=h.val(!0),y=t;this.server_.put(y.toString(),g,function(r){n.log_("transaction put response",{path:y.toString(),status:r});var a=[];if("ok"===r){for(var s=[],c=0;c<e.length;c++){if(e[c].status=v.COMPLETED,a=a.concat(n.serverSyncTree_.ackUserWrite(e[c].currentWriteId)),e[c].onComplete){var h=e[c].currentOutputSnapshotResolved,d=new i.Reference(n,e[c].path),p=new o.DataSnapshot(h,d,u.PRIORITY_INDEX);s.push(e[c].onComplete.bind(null,null,!0,p))}e[c].unwatcher()}for(n.pruneCompletedTransactionsBelowNode_(n.transactionQueueTree_.subTree(t)),n.sendReadyTransactions_(),n.eventQueue_.raiseEventsForChangedPath(t,a),c=0;c<s.length;c++)l.exceptionGuard(s[c])}else{if("datastale"===r)for(c=0;c<e.length;c++)e[c].status=e[c].status===v.SENT_NEEDS_ABORT?v.NEEDS_ABORT:v.RUN;else for(l.warn("transaction at "+y.toString()+" failed: "+r),c=0;c<e.length;c++)e[c].status=v.NEEDS_ABORT,e[c].abortReason=r;n.rerunTransactions_(t)}},d)},m.Repo.prototype.rerunTransactions_=function(t){var e=this.getAncestorTransactionNode_(t),n=e.path(),r=this.buildTransactionQueue_(e);return this.rerunTransactionQueue_(r,n),n},m.Repo.prototype.rerunTransactionQueue_=function(t,e){if(0!==t.length){for(var n=[],s=[],f=t.filter(function(t){return t.status===v.RUN}).map(function(t){return t.currentWriteId}),g=0;g<t.length;g++){var y=t[g],_=a.Path.relativePath(e,y.path),b=!1,w=void 0;if(r.assert(null!==_,"rerunTransactionsUnderNode_: relativePath should not be null."),y.status===v.NEEDS_ABORT)b=!0,w=y.abortReason,s=s.concat(this.serverSyncTree_.ackUserWrite(y.currentWriteId,!0));else if(y.status===v.RUN)if(y.retryCount>=m.Repo.MAX_TRANSACTION_RETRIES_)b=!0,w="maxretry",s=s.concat(this.serverSyncTree_.ackUserWrite(y.currentWriteId,!0));else{var x=this.getLatestState_(y.path,f);y.currentInputSnapshot=x;var E=t[g].update(x.val());if(void 0!==E){h.validateFirebaseData("transaction failed: Data returned ",E,y.path);var S=p.nodeFromJSON(E);"object"==typeof E&&null!=E&&d.contains(E,".priority")||(S=S.updatePriority(x.getPriority()));var T=y.currentWriteId,M=this.generateServerValues(),C=c.resolveDeferredValueSnapshot(S,M);y.currentOutputSnapshotRaw=S,y.currentOutputSnapshotResolved=C,y.currentWriteId=this.getNextWriteId_(),f.splice(f.indexOf(T),1),s=(s=s.concat(this.serverSyncTree_.applyUserOverwrite(y.path,C,y.currentWriteId,y.applyLocally))).concat(this.serverSyncTree_.ackUserWrite(T,!0))}else b=!0,w="nodata",s=s.concat(this.serverSyncTree_.ackUserWrite(y.currentWriteId,!0))}if(this.eventQueue_.raiseEventsForChangedPath(e,s),s=[],b&&(t[g].status=v.COMPLETED,setTimeout(t[g].unwatcher,Math.floor(0)),t[g].onComplete))if("nodata"===w){var A=new i.Reference(this,t[g].path),P=new o.DataSnapshot(t[g].currentInputSnapshot,A,u.PRIORITY_INDEX);n.push(t[g].onComplete.bind(null,null,!1,P))}else n.push(t[g].onComplete.bind(null,new Error(w),!1,null))}for(this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_),g=0;g<n.length;g++)l.exceptionGuard(n[g]);this.sendReadyTransactions_()}},m.Repo.prototype.getAncestorTransactionNode_=function(t){for(var e,n=this.transactionQueueTree_;null!==(e=t.getFront())&&null===n.getValue();)n=n.subTree(e),t=t.popFront();return n},m.Repo.prototype.buildTransactionQueue_=function(t){var e=[];return this.aggregateTransactionQueuesForNode_(t,e),e.sort(function(t,e){return t.order-e.order}),e},m.Repo.prototype.aggregateTransactionQueuesForNode_=function(t,e){var n=this,r=t.getValue();if(null!==r)for(var i=0;i<r.length;i++)e.push(r[i]);t.forEachChild(function(t){n.aggregateTransactionQueuesForNode_(t,e)})},m.Repo.prototype.pruneCompletedTransactionsBelowNode_=function(t){var e=this,n=t.getValue();if(n){for(var r=0,i=0;i<n.length;i++)n[i].status!==v.COMPLETED&&(n[r]=n[i],r++);n.length=r,t.setValue(n.length>0?n:null)}t.forEachChild(function(t){e.pruneCompletedTransactionsBelowNode_(t)})},m.Repo.prototype.abortTransactions_=function(t){var e=this,n=this.getAncestorTransactionNode_(t).path(),r=this.transactionQueueTree_.subTree(t);return r.forEachAncestor(function(t){e.abortTransactionsOnNode_(t)}),this.abortTransactionsOnNode_(r),r.forEachDescendant(function(t){e.abortTransactionsOnNode_(t)}),n},m.Repo.prototype.abortTransactionsOnNode_=function(t){var e=t.getValue();if(null!==e){for(var n=[],i=[],o=-1,a=0;a<e.length;a++)e[a].status===v.SENT_NEEDS_ABORT||(e[a].status===v.SENT?(r.assert(o===a-1,"All SENT items should be at beginning of queue."),o=a,e[a].status=v.SENT_NEEDS_ABORT,e[a].abortReason="set"):(r.assert(e[a].status===v.RUN,"Unexpected transaction status in abort"),e[a].unwatcher(),i=i.concat(this.serverSyncTree_.ackUserWrite(e[a].currentWriteId,!0)),e[a].onComplete&&n.push(e[a].onComplete.bind(null,new Error("set"),!1,null))));for(-1===o?t.setValue(null):e.length=o+1,this.eventQueue_.raiseEventsForChangedPath(t.path(),i),a=0;a<n.length;a++)l.exceptionGuard(n[a])}}},lQFt:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("POCr"),i=n("ZyYn"),o=n("W1I6");e.TransportManager=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[r.BrowserPollConnection,i.WebSocketConnection]},enumerable:!0,configurable:!0}),t.prototype.initTransports_=function(e){var n=i.WebSocketConnection&&i.WebSocketConnection.isAvailable(),r=n&&!i.WebSocketConnection.previouslyFailed();if(e.webSocketOnly&&(n||o.warn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[i.WebSocketConnection];else{var a=this.transports_=[];o.each(t.ALL_TRANSPORTS,function(t,e){e&&e.isAvailable()&&a.push(e)})}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}()},lYZG:function(t,e,n){"use strict";n.r(e),n.d(e,"defer",function(){return a});var r=n("6blF"),i=n("0/uQ"),o=n("G5J1");function a(t){return new r.a(function(e){var n;try{n=t()}catch(t){return void e.error(t)}return(n?Object(i.a)(n):Object(o.b)()).subscribe(e)})}},m925:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("mrSG"),i=n("0kFh"),o=n("mPkq"),a=n("0kFh");e.OnlineMonitor=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||a.isMobileCordova()||(window.addEventListener("online",function(){e.online_||(e.online_=!0,e.trigger("online",!0))},!1),window.addEventListener("offline",function(){e.online_&&(e.online_=!1,e.trigger("online",!1))},!1)),e}return r.__extends(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return i.assert("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(o.EventEmitter)},mChF:function(t,e,n){"use strict";function r(t){return t}n.d(e,"a",function(){return r})},mEZQ:function(t,e,n){"use strict";n.r(e),n.d(e,"iif",function(){return o});var r=n("lYZG"),i=n("G5J1");function o(t,e,n){return void 0===e&&(e=i.a),void 0===n&&(n=i.a),Object(r.defer)(function(){return t()?e:n})}},mG1e:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ServerActions=function(){function t(){}return t.prototype.put=function(t,e,n,r){},t.prototype.merge=function(t,e,n,r){},t.prototype.refreshAuthToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}()},mPkq:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("0kFh");e.EventEmitter=function(){function t(t){this.allowedEvents_=t,this.listeners_={},r.assert(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=this.listeners_[t].slice(),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},t.prototype.validateEventType_=function(t){r.assert(this.allowedEvents_.find(function(e){return e===t}),"Unknown event: "+t)},t}()},mZUT:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n("0kFh"),o=n("W1I6"),a=n("0kFh");e.setMaxNode=function(t){r=t},e.priorityHashText=function(t){return"number"==typeof t?"number:"+o.doubleToIEEE754String(t):"string:"+t},e.validatePriorityNode=function(t){if(t.isLeafNode()){var e=t.val();i.assert("string"==typeof e||"number"==typeof e||"object"==typeof e&&a.contains(e,".sv"),"Priority must be a string or number.")}else i.assert(t===r||t.isEmpty(),"priority of unexpected type.");i.assert(t===r||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")}},"ma/Z":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("0kFh");e.CountedSet=function(){function t(){this.set={}}return t.prototype.add=function(t,e){this.set[t]=null===e||e},t.prototype.contains=function(t){return r.contains(this.set,t)},t.prototype.get=function(t){return this.contains(t)?this.set[t]:void 0},t.prototype.remove=function(t){delete this.set[t]},t.prototype.clear=function(){this.set={}},t.prototype.isEmpty=function(){return r.isEmpty(this.set)},t.prototype.count=function(){return r.getCount(this.set)},t.prototype.each=function(t){r.forEach(this.set,function(e,n){return t(e,n)})},t.prototype.keys=function(){var t=[];return r.forEach(this.set,function(e){t.push(e)}),t},t}()},mrSG:function(t,e,n){"use strict";n.r(e),n.d(e,"__extends",function(){return i}),n.d(e,"__assign",function(){return o}),n.d(e,"__rest",function(){return a}),n.d(e,"__decorate",function(){return s}),n.d(e,"__param",function(){return u}),n.d(e,"__metadata",function(){return l}),n.d(e,"__awaiter",function(){return c}),n.d(e,"__generator",function(){return h}),n.d(e,"__exportStar",function(){return d}),n.d(e,"__values",function(){return p}),n.d(e,"__read",function(){return f}),n.d(e,"__spread",function(){return m}),n.d(e,"__await",function(){return v}),n.d(e,"__asyncGenerator",function(){return g}),n.d(e,"__asyncDelegator",function(){return y}),n.d(e,"__asyncValues",function(){return _}),n.d(e,"__makeTemplateObject",function(){return b}),n.d(e,"__importStar",function(){return w}),n.d(e,"__importDefault",function(){return x});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function a(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&(n[r[i]]=t[r[i]])}return n}function s(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a}function u(t,e){return function(n,r){e(n,r,t)}}function l(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function c(t,e,n,r){return new(n||(n=Promise))(function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(a,s)}u((r=r.apply(t,e||[])).next())})}function h(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function d(t,e){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}function p(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}function f(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function m(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(f(arguments[e]));return t}function v(t){return this instanceof v?(this.v=t,this):new v(t)}function g(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(t,e||[]),o=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(t){i[t]&&(r[t]=function(e){return new Promise(function(n,r){o.push([t,e,n,r])>1||s(t,e)})})}function s(t,e){try{(n=i[t](e)).value instanceof v?Promise.resolve(n.value.v).then(u,l):c(o[0][2],n)}catch(t){c(o[0][3],t)}var n}function u(t){s("next",t)}function l(t){s("throw",t)}function c(t,e){t(e),o.shift(),o.length&&s(o[0][0],o[0][1])}}function y(t){var e,n;return e={},r("next"),r("throw",function(t){throw t}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(r,i){e[r]=t[r]?function(e){return(n=!n)?{value:v(t[r](e)),done:"return"===r}:i?i(e):e}:i}}function _(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=p(t),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(n){e[n]=t[n]&&function(e){return new Promise(function(r,i){!function(t,e,n,r){Promise.resolve(r).then(function(e){t({value:e,done:n})},e)}(r,i,(e=t[n](e)).done,e.value)})}}}function b(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function w(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function x(t){return t&&t.__esModule?t:{default:t}}},nPuz:function(t,e,n){t.exports=function(t){"use strict";function e(t){return(e=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function n(t,e){return(n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function r(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}return function(i){function o(n,i){var a,s,u,l,c,h,d;!function(t,e){if(!(t instanceof o))throw new TypeError("Cannot call a class as a function")}(this),(d=e(o).call(this),a=!d||"object"!=typeof d&&"function"!=typeof d?r(this):d).object=n,a.domElement=void 0!==i?i:document,a.enabled=!0,a.target=new t.Vector3,a.minDistance=0,a.maxDistance=1/0,a.minZoom=0,a.maxZoom=1/0,a.minPolarAngle=0,a.maxPolarAngle=Math.PI,a.minAzimuthAngle=-1/0,a.maxAzimuthAngle=1/0,a.enableDamping=!1,a.dampingFactor=.25,a.enableZoom=!0,a.zoomSpeed=1,a.enableRotate=!0,a.rotateSpeed=1,a.enablePan=!0,a.keyPanSpeed=7,a.autoRotate=!1,a.autoRotateSpeed=2,a.enableKeys=!0,a.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},a.mouseButtons={ORBIT:t.MOUSE.LEFT,ZOOM:t.MOUSE.MIDDLE,PAN:t.MOUSE.RIGHT},a.target0=a.target.clone(),a.position0=a.object.position.clone(),a.zoom0=a.object.zoom,a.getPolarAngle=function(){return b.phi},a.getAzimuthalAngle=function(){return b.theta},a.reset=function(){p.target.copy(p.target0),p.object.position.copy(p.position0),p.object.zoom=p.zoom0,p.object.updateProjectionMatrix(),p.dispatchEvent(f),p.update(),y=g.NONE},a.update=(s=new t.Vector3,u=(new t.Quaternion).setFromUnitVectors(n.up,new t.Vector3(0,1,0)),l=u.clone().inverse(),c=new t.Vector3,h=new t.Quaternion,function(){var t=p.object.position;return s.copy(t).sub(p.target),s.applyQuaternion(u),b.setFromVector3(s),p.autoRotate&&y===g.NONE&&D(2*Math.PI/60/60*p.autoRotateSpeed),b.theta+=w.theta,b.phi+=w.phi,b.theta=Math.max(p.minAzimuthAngle,Math.min(p.maxAzimuthAngle,b.theta)),b.phi=Math.max(p.minPolarAngle,Math.min(p.maxPolarAngle,b.phi)),b.makeSafe(),b.radius*=x,b.radius=Math.max(p.minDistance,Math.min(p.maxDistance,b.radius)),p.target.add(E),s.setFromSpherical(b),s.applyQuaternion(l),t.copy(p.target).add(s),p.object.lookAt(p.target),!0===p.enableDamping?(w.theta*=1-p.dampingFactor,w.phi*=1-p.dampingFactor):w.set(0,0,0),x=1,E.set(0,0,0),!!(S||c.distanceToSquared(p.object.position)>_||8*(1-h.dot(p.object.quaternion))>_)&&(p.dispatchEvent(f),c.copy(p.object.position),h.copy(p.object.quaternion),S=!1,!0)}),a.dispose=function(){p.domElement.removeEventListener("contextmenu",Q,!1),p.domElement.removeEventListener("mousedown",z,!1),p.domElement.removeEventListener("wheel",q,!1),p.domElement.removeEventListener("touchstart",Y,!1),p.domElement.removeEventListener("touchend",Z,!1),p.domElement.removeEventListener("touchmove",K,!1),document.removeEventListener("mousemove",H,!1),document.removeEventListener("mouseup",W,!1),window.removeEventListener("keydown",X,!1)};var p=r(r(a)),f={type:"change"},m={type:"start"},v={type:"end"},g={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5},y=g.NONE,_=1e-6,b=new t.Spherical,w=new t.Spherical,x=1,E=new t.Vector3,S=!1,T=new t.Vector2,M=new t.Vector2,C=new t.Vector2,A=new t.Vector2,P=new t.Vector2,O=new t.Vector2,R=new t.Vector2,L=new t.Vector2,I=new t.Vector2;function N(){return Math.pow(.95,p.zoomSpeed)}function D(t){w.theta-=t}function k(t){w.phi-=t}var F,j=(F=new t.Vector3,function(t,e){F.setFromMatrixColumn(e,0),F.multiplyScalar(-t),E.add(F)}),U=function(){var e=new t.Vector3;return function(t,n){e.setFromMatrixColumn(n,1),e.multiplyScalar(t),E.add(e)}}(),B=function(){var e=new t.Vector3;return function(t,n){var r=p.domElement===document?p.domElement.body:p.domElement;if(Object.getPrototypeOf(p.object).isPerspectiveCamera){e.copy(p.object.position).sub(p.target);var i=e.length();i*=Math.tan(p.object.fov/2*Math.PI/180),j(2*t*i/r.clientHeight,p.object.matrix),U(2*n*i/r.clientHeight,p.object.matrix)}else Object.getPrototypeOf(p.object).isOrthographicCamera?(j(t*(p.object.right-p.object.left)/p.object.zoom/r.clientWidth,p.object.matrix),U(n*(p.object.top-p.object.bottom)/p.object.zoom/r.clientHeight,p.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),p.enablePan=!1)}}();function G(t){Object.getPrototypeOf(p.object).isPerspectiveCamera?x/=t:Object.getPrototypeOf(p.object).isOrthographicCamera?(p.object.zoom=Math.max(p.minZoom,Math.min(p.maxZoom,p.object.zoom*t)),p.object.updateProjectionMatrix(),S=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),p.enableZoom=!1)}function V(t){Object.getPrototypeOf(p.object).isPerspectiveCamera?x*=t:Object.getPrototypeOf(p.object).isOrthographicCamera?(p.object.zoom=Math.max(p.minZoom,Math.min(p.maxZoom,p.object.zoom/t)),p.object.updateProjectionMatrix(),S=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),p.enableZoom=!1)}function z(t){if(!1!==p.enabled){if(t.preventDefault(),t.button===p.mouseButtons.ORBIT){if(!1===p.enableRotate)return;!function(t){T.set(t.clientX,t.clientY)}(t),y=g.ROTATE}else if(t.button===p.mouseButtons.ZOOM){if(!1===p.enableZoom)return;!function(t){R.set(t.clientX,t.clientY)}(t),y=g.DOLLY}else if(t.button===p.mouseButtons.PAN){if(!1===p.enablePan)return;!function(t){A.set(t.clientX,t.clientY)}(t),y=g.PAN}y!==g.NONE&&(document.addEventListener("mousemove",H,!1),document.addEventListener("mouseup",W,!1),p.dispatchEvent(m))}}function H(t){if(!1!==p.enabled)if(t.preventDefault(),y===g.ROTATE){if(!1===p.enableRotate)return;!function(t){M.set(t.clientX,t.clientY),C.subVectors(M,T);var e=p.domElement===document?p.domElement.body:p.domElement;D(2*Math.PI*C.x/e.clientWidth*p.rotateSpeed),k(2*Math.PI*C.y/e.clientHeight*p.rotateSpeed),T.copy(M),p.update()}(t)}else if(y===g.DOLLY){if(!1===p.enableZoom)return;!function(t){L.set(t.clientX,t.clientY),I.subVectors(L,R),I.y>0?G(N()):I.y<0&&V(N()),R.copy(L),p.update()}(t)}else if(y===g.PAN){if(!1===p.enablePan)return;!function(t){P.set(t.clientX,t.clientY),O.subVectors(P,A),B(O.x,O.y),A.copy(P),p.update()}(t)}}function W(t){!1!==p.enabled&&(document.removeEventListener("mousemove",H,!1),document.removeEventListener("mouseup",W,!1),p.dispatchEvent(v),y=g.NONE)}function q(t){!1===p.enabled||!1===p.enableZoom||y!==g.NONE&&y!==g.ROTATE||(t.preventDefault(),t.stopPropagation(),function(t){t.deltaY<0?V(N()):t.deltaY>0&&G(N()),p.update()}(t),p.dispatchEvent(m),p.dispatchEvent(v))}function X(t){!1!==p.enabled&&!1!==p.enableKeys&&!1!==p.enablePan&&function(t){switch(t.keyCode){case p.keys.UP:B(0,p.keyPanSpeed),p.update();break;case p.keys.BOTTOM:B(0,-p.keyPanSpeed),p.update();break;case p.keys.LEFT:B(p.keyPanSpeed,0),p.update();break;case p.keys.RIGHT:B(-p.keyPanSpeed,0),p.update()}}(t)}function Y(t){if(!1!==p.enabled){switch(t.touches.length){case 1:if(!1===p.enableRotate)return;!function(t){T.set(t.touches[0].pageX,t.touches[0].pageY)}(t),y=g.TOUCH_ROTATE;break;case 2:if(!1===p.enableZoom)return;!function(t){var e=t.touches[0].pageX-t.touches[1].pageX,n=t.touches[0].pageY-t.touches[1].pageY,r=Math.sqrt(e*e+n*n);R.set(0,r)}(t),y=g.TOUCH_DOLLY;break;case 3:if(!1===p.enablePan)return;!function(t){A.set(t.touches[0].pageX,t.touches[0].pageY)}(t),y=g.TOUCH_PAN;break;default:y=g.NONE}y!==g.NONE&&p.dispatchEvent(m)}}function K(t){if(!1!==p.enabled)switch(t.preventDefault(),t.stopPropagation(),t.touches.length){case 1:if(!1===p.enableRotate)return;if(y!==g.TOUCH_ROTATE)return;!function(t){M.set(t.touches[0].pageX,t.touches[0].pageY),C.subVectors(M,T);var e=p.domElement===document?p.domElement.body:p.domElement;D(2*Math.PI*C.x/e.clientWidth*p.rotateSpeed),k(2*Math.PI*C.y/e.clientHeight*p.rotateSpeed),T.copy(M),p.update()}(t);break;case 2:if(!1===p.enableZoom)return;if(y!==g.TOUCH_DOLLY)return;!function(t){var e=t.touches[0].pageX-t.touches[1].pageX,n=t.touches[0].pageY-t.touches[1].pageY,r=Math.sqrt(e*e+n*n);L.set(0,r),I.subVectors(L,R),I.y>0?V(N()):I.y<0&&G(N()),R.copy(L),p.update()}(t);break;case 3:if(!1===p.enablePan)return;if(y!==g.TOUCH_PAN)return;!function(t){P.set(t.touches[0].pageX,t.touches[0].pageY),O.subVectors(P,A),B(O.x,O.y),A.copy(P),p.update()}(t);break;default:y=g.NONE}}function Z(t){!1!==p.enabled&&(p.dispatchEvent(v),y=g.NONE)}function Q(t){t.preventDefault()}return p.domElement.addEventListener("contextmenu",Q,!1),p.domElement.addEventListener("mousedown",z,!1),p.domElement.addEventListener("wheel",q,!1),p.domElement.addEventListener("touchstart",Y,!1),p.domElement.addEventListener("touchend",Z,!1),p.domElement.addEventListener("touchmove",K,!1),window.addEventListener("keydown",X,!1),a.update(),a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&n(t,e)}(o,t.EventDispatcher),(a=[{key:"center",get:function(){return console.warn("OrbitControls: .center has been renamed to .target"),this.target}},{key:"noZoom",get:function(){return console.warn("OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},set:function(t){console.warn("OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),this.enableZoom=!t}},{key:"noRotate",get:function(){return console.warn("OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),!this.enableRotate},set:function(t){console.warn("OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),this.enableRotate=!t}},{key:"noPan",get:function(){return console.warn("OrbitControls: .noPan has been deprecated. Use .enablePan instead."),!this.enablePan},set:function(t){console.warn("OrbitControls: .noPan has been deprecated. Use .enablePan instead."),this.enablePan=!t}},{key:"noKeys",get:function(){return console.warn("OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),!this.enableKeys},set:function(t){console.warn("OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),this.enableKeys=!t}},{key:"staticMoving",get:function(){return console.warn("OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),!this.enableDamping},set:function(t){console.warn("OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),this.enableDamping=!t}},{key:"dynamicDampingFactor",get:function(){return console.warn("OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor},set:function(t){console.warn("OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor=t}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(o.prototype,a),o;var a}()}(n("Rm8y"))},nheu:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("mrSG"),i=n("pqom"),o=n("HThc"),a=n("W1I6"),s=n("BbUi"),u=n("gWF3"),l=n("0iAU"),c=n("q1Ft"),h=n("tHwi"),d=n("SyT/"),p=n("0kFh"),f=n("0kFh"),m=n("KcsV"),v=function(t){function e(e,n){if(!(e instanceof l.Repo))throw new Error("new Reference() no longer supported - use app.database().");return t.call(this,e,n,h.QueryParams.DEFAULT,!1)||this}return r.__extends(e,t),e.prototype.getKey=function(){return p.validateArgCount("Reference.key",0,0,arguments.length),this.path.isEmpty()?null:this.path.getBack()},e.prototype.child=function(t){return p.validateArgCount("Reference.child",1,1,arguments.length),"number"==typeof t?t=String(t):t instanceof c.Path||(null===this.path.getFront()?d.validateRootPathString("Reference.child",1,t,!1):d.validatePathString("Reference.child",1,t,!1)),new e(this.repo,this.path.child(t))},e.prototype.getParent=function(){p.validateArgCount("Reference.parent",0,0,arguments.length);var t=this.path.parent();return null===t?null:new e(this.repo,t)},e.prototype.getRoot=function(){p.validateArgCount("Reference.root",0,0,arguments.length);for(var t=this;null!==t.getParent();)t=t.getParent();return t},e.prototype.databaseProp=function(){return this.repo.database},e.prototype.set=function(t,e){p.validateArgCount("Reference.set",1,2,arguments.length),d.validateWritablePath("Reference.set",this.path),d.validateFirebaseDataArg("Reference.set",1,t,this.path,!1),p.validateCallback("Reference.set",2,e,!0);var n=new f.Deferred;return this.repo.setWithPriority(this.path,t,null,n.wrapCallback(e)),n.promise},e.prototype.update=function(t,e){if(p.validateArgCount("Reference.update",1,2,arguments.length),d.validateWritablePath("Reference.update",this.path),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,a.warn("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}d.validateFirebaseMergeDataArg("Reference.update",1,t,this.path,!1),p.validateCallback("Reference.update",2,e,!0);var i=new f.Deferred;return this.repo.update(this.path,t,i.wrapCallback(e)),i.promise},e.prototype.setWithPriority=function(t,e,n){if(p.validateArgCount("Reference.setWithPriority",2,3,arguments.length),d.validateWritablePath("Reference.setWithPriority",this.path),d.validateFirebaseDataArg("Reference.setWithPriority",1,t,this.path,!1),d.validatePriority("Reference.setWithPriority",2,e,!1),p.validateCallback("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new f.Deferred;return this.repo.setWithPriority(this.path,t,e,r.wrapCallback(n)),r.promise},e.prototype.remove=function(t){return p.validateArgCount("Reference.remove",0,1,arguments.length),d.validateWritablePath("Reference.remove",this.path),p.validateCallback("Reference.remove",1,t,!0),this.set(null,t)},e.prototype.transaction=function(t,e,n){if(p.validateArgCount("Reference.transaction",1,3,arguments.length),d.validateWritablePath("Reference.transaction",this.path),p.validateCallback("Reference.transaction",1,t,!1),p.validateCallback("Reference.transaction",2,e,!0),d.validateBoolean("Reference.transaction",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===n&&(n=!0);var r=new f.Deferred;return"function"==typeof e&&r.promise.catch(function(){}),this.repo.startTransaction(this.path,t,function(t,n,i){t?r.reject(t):r.resolve(new o.TransactionResult(n,i)),"function"==typeof e&&e(t,n,i)},n),r.promise},e.prototype.setPriority=function(t,e){p.validateArgCount("Reference.setPriority",1,2,arguments.length),d.validateWritablePath("Reference.setPriority",this.path),d.validatePriority("Reference.setPriority",1,t,!1),p.validateCallback("Reference.setPriority",2,e,!0);var n=new f.Deferred;return this.repo.setWithPriority(this.path.child(".priority"),t,null,n.wrapCallback(e)),n.promise},e.prototype.push=function(t,e){p.validateArgCount("Reference.push",0,2,arguments.length),d.validateWritablePath("Reference.push",this.path),d.validateFirebaseDataArg("Reference.push",1,t,this.path,!0),p.validateCallback("Reference.push",2,e,!0);var n,r=this.repo.serverTime(),i=s.nextPushId(r),o=this.child(i),a=this.child(i);return n=null!=t?o.set(t,e).then(function(){return a}):Promise.resolve(a),o.then=n.then.bind(n),o.catch=n.then.bind(n,void 0),"function"==typeof e&&n.catch(function(){}),o},e.prototype.onDisconnect=function(){return d.validateWritablePath("Reference.onDisconnect",this.path),new i.OnDisconnect(this.repo,this.path)},Object.defineProperty(e.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!0,configurable:!0}),e}(u.Query);e.Reference=v,u.Query.__referenceConstructor=v,m.SyncPoint.__referenceConstructor=v},nkY7:function(t,e,n){"use strict";function r(t){return t&&"function"==typeof t.schedule}n.d(e,"a",function(){return r})},o07R:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Deferred=function(){function t(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch(function(){}),1===t.length?t(n):t(n,r))}},t}()},oUad:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CacheNode=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if(t.isEmpty())return this.isFullyInitialized()&&!this.filtered_;var e=t.getFront();return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}()},ohiI:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("oUad"),i=function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}();e.NoCompleteChildSource_=i,e.NO_COMPLETE_CHILD_SOURCE=new i,e.WriteTreeCompleteChildSource=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.getEventCache();if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new r.CacheNode(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(t,n)},t.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),i=this.writes_.calcIndexedSlice(r,e,1,n,t);return 0===i.length?null:i[0]},t}()},ozzT:function(t,e,n){"use strict";var r=n("buEt"),i=function(){this.state="SUBMITTED"},o=n("t/Na");n("qXBG"),n.d(e,"a",function(){return a});var a=function(){function t(t,e,n){this.http=t,this.toastr=e,this.authService=n,this.productsChanged=new r.a,this.startedEditing=new r.a,this.products=[],this.order=new i}return t.prototype.getProducts=function(){return this.products.slice()},t.prototype.getProduct=function(t){return console.log("looooooool:"+this.products[t].productId),this.products[t]},t.prototype.addProduct=function(t){this.products.push(t),this.productsChanged.next(this.products.slice())},t.prototype.addProducts=function(t){for(var e,n=0,r=t;n<r.length;n++)this.addProduct(r[n]);(e=this.products).push.apply(e,t),this.productsChanged.next(this.products.slice())},t.prototype.updateProduct=function(t,e){this.products[t]=e,this.productsChanged.next(this.products.slice())},t.prototype.deleteProduct=function(t){this.products.splice(t,1),this.productsChanged.next(this.products.slice())},t.prototype.onOrder=function(t){var e=this.authService.getToken(),n={headers:new o.g({"Content-Type":"application/json","Access-Control-Allow-Origin":"*",Authorization:"Bearer "+e,Accept:"application/json"})};console.log("Cheguei2!!!!!!!!"),console.log("Cheguei3!!!!!!!!"+t.value);var r=new function(t,e){this.latitude=t,this.longitude=e}(t.controls.latitude.value,t.controls.longitude.value),i=new function(t){this.city=t}(new function(t,e){this.name=t,this.location=e}(t.controls.city.value,r));console.log(this.order),this.order.deliveryAddress=i,this.order.orderItems=this.getProducts().slice();var a=this.authService.getCurrentUserUid;console.log("USERUID:"+a),this.order.customer=a(),console.log(this.order.orderItems),this.order.orderItems.length>0?(this.http.post("https://sic-e.herokuapp.com/orders",this.order,n).toPromise().catch(),this.showSuccess()):this.showFailure()},t.prototype.showSuccess=function(){this.toastr.success("Order Created!!!")},t.prototype.showFailure=function(){this.toastr.success("Order needs to have Products!!!")},t}()},p0ib:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("6blF"),i=n("nkY7"),o=n("Zn8D"),a=n("IUTb");function s(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Number.POSITIVE_INFINITY,s=null,u=t[t.length-1];return Object(i.a)(u)?(s=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(n=t.pop())):"number"==typeof u&&(n=t.pop()),null===s&&1===t.length&&t[0]instanceof r.a?t[0]:Object(o.a)(n)(Object(a.a)(t,s))}},pH6c:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("W1I6");e.AuthTokenProvider=function(){function t(t){this.app_=t}return t.prototype.getToken=function(t){return this.app_.INTERNAL.getToken(t).then(null,function(t){return t&&"auth/token-not-initialized"===t.code?(r.log("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)})},t.prototype.addTokenChangeListener=function(t){this.app_.INTERNAL.addAuthTokenListener(t)},t.prototype.removeTokenChangeListener=function(t){this.app_.INTERNAL.removeAuthTokenListener(t)},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';r.warn(t+="credential"in this.app_.options?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.')},t}()},pMnS:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("CcnG"),i=n("ZYCi"),o=r.Ra({encapsulation:2,styles:[],data:{}});function a(t){return r.lb(0,[(t()(),r.Ta(0,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),r.Sa(1,212992,null,0,i.o,[i.b,r.S,r.k,[8,null],r.i],null,null)],function(t,e){t(e,1,0)},null)}var s=r.Pa("ng-component",i.s,function(t){return r.lb(0,[(t()(),r.Ta(0,0,null,null,1,"ng-component",[],null,null,null,a,o)),r.Sa(1,49152,null,0,i.s,[],null,null)],null,null)},{},{},[])},pWZ8:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("RzhA"),i=n("0kFh"),o=n("hMCQ"),a=n("G6nc"),s=n("h6Fy"),u=n("scCI"),l=n("hOVL"),c=n("q1Ft"),h=n("ohiI"),d=function(t,e){this.viewCache=t,this.changes=e};e.ProcessorResult=d,e.ViewProcessor=function(){function t(t){this.filter_=t}return t.prototype.assertIndexed=function(t){i.assert(t.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),i.assert(t.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},t.prototype.applyOperation=function(e,n,a,s){var u,l,c=new o.ChildChangeAccumulator;if(n.type===r.OperationType.OVERWRITE){var h=n;h.source.fromUser?u=this.applyUserOverwrite_(e,h.path,h.snap,a,s,c):(i.assert(h.source.fromServer,"Unknown source."),l=h.source.tagged||e.getServerCache().isFiltered()&&!h.path.isEmpty(),u=this.applyServerOverwrite_(e,h.path,h.snap,a,s,l,c))}else if(n.type===r.OperationType.MERGE){var p=n;p.source.fromUser?u=this.applyUserMerge_(e,p.path,p.children,a,s,c):(i.assert(p.source.fromServer,"Unknown source."),l=p.source.tagged||e.getServerCache().isFiltered(),u=this.applyServerMerge_(e,p.path,p.children,a,s,l,c))}else if(n.type===r.OperationType.ACK_USER_WRITE){var f=n;u=f.revert?this.revertUserWrite_(e,f.path,a,s,c):this.ackUserWrite_(e,f.path,f.affectedTree,a,s,c)}else{if(n.type!==r.OperationType.LISTEN_COMPLETE)throw i.assertionError("Unknown operation type: "+n.type);u=this.listenComplete_(e,n.path,a,c)}var m=c.getChanges();return t.maybeAddValueEvent_(e,u,m),new d(u,m)},t.maybeAddValueEvent_=function(t,e,n){var r=e.getEventCache();if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=t.getCompleteEventSnap();(n.length>0||!t.getEventCache().isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(a.Change.valueChange(e.getCompleteEventSnap()))}},t.prototype.generateEventCacheAfterServerEvent_=function(t,e,n,r,o){var a=t.getEventCache();if(null!=n.shadowingWrite(e))return t;var u=void 0,l=void 0;if(e.isEmpty())if(i.assert(t.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),t.getServerCache().isFiltered()){var c=t.getCompleteServerSnap(),h=n.calcCompleteEventChildren(c instanceof s.ChildrenNode?c:s.ChildrenNode.EMPTY_NODE);u=this.filter_.updateFullNode(t.getEventCache().getNode(),h,o)}else{var d=n.calcCompleteEventCache(t.getCompleteServerSnap());u=this.filter_.updateFullNode(t.getEventCache().getNode(),d,o)}else{var p=e.getFront();if(".priority"==p){i.assert(1==e.getLength(),"Can't have a priority with additional path components");var f=a.getNode();l=t.getServerCache().getNode();var m=n.calcEventCacheAfterServerOverwrite(e,f,l);u=null!=m?this.filter_.updatePriority(f,m):a.getNode()}else{var v=e.popFront(),g=void 0;if(a.isCompleteForChild(p)){l=t.getServerCache().getNode();var y=n.calcEventCacheAfterServerOverwrite(e,a.getNode(),l);g=null!=y?a.getNode().getImmediateChild(p).updateChild(v,y):a.getNode().getImmediateChild(p)}else g=n.calcCompleteChild(p,t.getServerCache());u=null!=g?this.filter_.updateChild(a.getNode(),p,g,v,r,o):a.getNode()}}return t.updateEventSnap(u,a.isFullyInitialized()||e.isEmpty(),this.filter_.filtersNodes())},t.prototype.applyServerOverwrite_=function(t,e,n,r,i,o,a){var s,u=t.getServerCache(),l=o?this.filter_:this.filter_.getIndexedFilter();if(e.isEmpty())s=l.updateFullNode(u.getNode(),n,null);else if(l.filtersNodes()&&!u.isFiltered()){var c=u.getNode().updateChild(e,n);s=l.updateFullNode(u.getNode(),c,null)}else{var d=e.getFront();if(!u.isCompleteForPath(e)&&e.getLength()>1)return t;var p=e.popFront(),f=u.getNode().getImmediateChild(d).updateChild(p,n);s=".priority"==d?l.updatePriority(u.getNode(),f):l.updateChild(u.getNode(),d,f,p,h.NO_COMPLETE_CHILD_SOURCE,null)}var m=t.updateServerSnap(s,u.isFullyInitialized()||e.isEmpty(),l.filtersNodes()),v=new h.WriteTreeCompleteChildSource(r,m,i);return this.generateEventCacheAfterServerEvent_(m,e,r,v,a)},t.prototype.applyUserOverwrite_=function(t,e,n,r,i,o){var a,u,l=t.getEventCache(),c=new h.WriteTreeCompleteChildSource(r,t,i);if(e.isEmpty())u=this.filter_.updateFullNode(t.getEventCache().getNode(),n,o),a=t.updateEventSnap(u,!0,this.filter_.filtersNodes());else{var d=e.getFront();if(".priority"===d)u=this.filter_.updatePriority(t.getEventCache().getNode(),n),a=t.updateEventSnap(u,l.isFullyInitialized(),l.isFiltered());else{var p=e.popFront(),f=l.getNode().getImmediateChild(d),m=void 0;if(p.isEmpty())m=n;else{var v=c.getCompleteChild(d);m=null!=v?".priority"===p.getBack()&&v.getChild(p.parent()).isEmpty()?v:v.updateChild(p,n):s.ChildrenNode.EMPTY_NODE}if(f.equals(m))a=t;else{var g=this.filter_.updateChild(l.getNode(),d,m,p,c,o);a=t.updateEventSnap(g,l.isFullyInitialized(),this.filter_.filtersNodes())}}}return a},t.cacheHasChild_=function(t,e){return t.getEventCache().isCompleteForChild(e)},t.prototype.applyUserMerge_=function(e,n,r,i,o,a){var s=this,u=e;return r.foreach(function(r,l){var c=n.child(r);t.cacheHasChild_(e,c.getFront())&&(u=s.applyUserOverwrite_(u,c,l,i,o,a))}),r.foreach(function(r,l){var c=n.child(r);t.cacheHasChild_(e,c.getFront())||(u=s.applyUserOverwrite_(u,c,l,i,o,a))}),u},t.prototype.applyMerge_=function(t,e){return e.foreach(function(e,n){t=t.updateChild(e,n)}),t},t.prototype.applyServerMerge_=function(t,e,n,r,i,o,a){var s=this;if(t.getServerCache().getNode().isEmpty()&&!t.getServerCache().isFullyInitialized())return t;var u,h=t;u=e.isEmpty()?n:l.ImmutableTree.Empty.setTree(e,n);var d=t.getServerCache().getNode();return u.children.inorderTraversal(function(e,n){if(d.hasChild(e)){var u=t.getServerCache().getNode().getImmediateChild(e),l=s.applyMerge_(u,n);h=s.applyServerOverwrite_(h,new c.Path(e),l,r,i,o,a)}}),u.children.inorderTraversal(function(e,n){var u=!t.getServerCache().isCompleteForChild(e)&&null==n.value;if(!d.hasChild(e)&&!u){var l=t.getServerCache().getNode().getImmediateChild(e),p=s.applyMerge_(l,n);h=s.applyServerOverwrite_(h,new c.Path(e),p,r,i,o,a)}}),h},t.prototype.ackUserWrite_=function(t,e,n,r,i,o){if(null!=r.shadowingWrite(e))return t;var a=t.getServerCache().isFiltered(),s=t.getServerCache();if(null!=n.value){if(e.isEmpty()&&s.isFullyInitialized()||s.isCompleteForPath(e))return this.applyServerOverwrite_(t,e,s.getNode().getChild(e),r,i,a,o);if(e.isEmpty()){var h=l.ImmutableTree.Empty;return s.getNode().forEachChild(u.KEY_INDEX,function(t,e){h=h.set(new c.Path(t),e)}),this.applyServerMerge_(t,e,h,r,i,a,o)}return t}var d=l.ImmutableTree.Empty;return n.foreach(function(t,n){var r=e.child(t);s.isCompleteForPath(r)&&(d=d.set(t,s.getNode().getChild(r)))}),this.applyServerMerge_(t,e,d,r,i,a,o)},t.prototype.listenComplete_=function(t,e,n,r){var i=t.getServerCache(),o=t.updateServerSnap(i.getNode(),i.isFullyInitialized()||e.isEmpty(),i.isFiltered());return this.generateEventCacheAfterServerEvent_(o,e,n,h.NO_COMPLETE_CHILD_SOURCE,r)},t.prototype.revertUserWrite_=function(t,e,n,r,o){var a;if(null!=n.shadowingWrite(e))return t;var u=new h.WriteTreeCompleteChildSource(n,t,r),l=t.getEventCache().getNode(),d=void 0;if(e.isEmpty()||".priority"===e.getFront()){var p=void 0;if(t.getServerCache().isFullyInitialized())p=n.calcCompleteEventCache(t.getCompleteServerSnap());else{var f=t.getServerCache().getNode();i.assert(f instanceof s.ChildrenNode,"serverChildren would be complete if leaf node"),p=n.calcCompleteEventChildren(f)}d=this.filter_.updateFullNode(l,p=p,o)}else{var m=e.getFront(),v=n.calcCompleteChild(m,t.getServerCache());null==v&&t.getServerCache().isCompleteForChild(m)&&(v=l.getImmediateChild(m)),(d=null!=v?this.filter_.updateChild(l,m,v,e.popFront(),u,o):t.getEventCache().getNode().hasChild(m)?this.filter_.updateChild(l,m,s.ChildrenNode.EMPTY_NODE,e.popFront(),u,o):l).isEmpty()&&t.getServerCache().isFullyInitialized()&&(a=n.calcCompleteEventCache(t.getCompleteServerSnap())).isLeafNode()&&(d=this.filter_.updateFullNode(d,a,o))}return a=t.getServerCache().isFullyInitialized()||null!=n.shadowingWrite(c.Path.Empty),t.updateEventSnap(d,a,this.filter_.filtersNodes())},t}()},pbg4:function(t,e,n){"use strict";n.r(e),n.d(e,"bindCallback",function(){return l});var r=n("6blF"),i=n("svcd"),o=n("67Y/"),a=n(null),s=n("isby"),u=n("nkY7");function l(t,e,n){if(e){if(!Object(u.a)(e))return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return l(t,n).apply(void 0,r).pipe(Object(o.a)(function(t){return Object(s.a)(t)?e.apply(void 0,t):e(t)}))};n=e}return function(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];var s,u=this,l={context:u,subject:s,callbackFunc:t,scheduler:n};return new r.a(function(r){if(n)return n.schedule(c,0,{args:e,subscriber:r,params:l});if(!s){s=new i.AsyncSubject;try{t.apply(u,e.concat([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.next(t.length<=1?t[0]:t),s.complete()}]))}catch(t){Object(a.a)(s)?s.error(t):console.warn(t)}}return s.subscribe(r)})}}function c(t){var e=this,n=t.args,r=t.subscriber,o=t.params,a=o.callbackFunc,s=o.context,u=o.scheduler,l=o.subject;if(!l){l=o.subject=new i.AsyncSubject;try{a.apply(s,n.concat([function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e.add(u.schedule(h,0,{value:t.length<=1?t[0]:t,subject:l}))}]))}catch(t){l.error(t)}}this.add(l.subscribe(r))}function h(t){var e=t.subject;e.next(t.value),e.complete()}},pqom:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("0kFh"),i=n("SyT/"),o=n("W1I6"),a=n("0kFh");e.OnDisconnect=function(){function t(t,e){this.repo_=t,this.path_=e}return t.prototype.cancel=function(t){r.validateArgCount("OnDisconnect.cancel",0,1,arguments.length),r.validateCallback("OnDisconnect.cancel",1,t,!0);var e=new a.Deferred;return this.repo_.onDisconnectCancel(this.path_,e.wrapCallback(t)),e.promise},t.prototype.remove=function(t){r.validateArgCount("OnDisconnect.remove",0,1,arguments.length),i.validateWritablePath("OnDisconnect.remove",this.path_),r.validateCallback("OnDisconnect.remove",1,t,!0);var e=new a.Deferred;return this.repo_.onDisconnectSet(this.path_,null,e.wrapCallback(t)),e.promise},t.prototype.set=function(t,e){r.validateArgCount("OnDisconnect.set",1,2,arguments.length),i.validateWritablePath("OnDisconnect.set",this.path_),i.validateFirebaseDataArg("OnDisconnect.set",1,t,this.path_,!1),r.validateCallback("OnDisconnect.set",2,e,!0);var n=new a.Deferred;return this.repo_.onDisconnectSet(this.path_,t,n.wrapCallback(e)),n.promise},t.prototype.setWithPriority=function(t,e,n){r.validateArgCount("OnDisconnect.setWithPriority",2,3,arguments.length),i.validateWritablePath("OnDisconnect.setWithPriority",this.path_),i.validateFirebaseDataArg("OnDisconnect.setWithPriority",1,t,this.path_,!1),i.validatePriority("OnDisconnect.setWithPriority",2,e,!1),r.validateCallback("OnDisconnect.setWithPriority",3,n,!0);var o=new a.Deferred;return this.repo_.onDisconnectSetWithPriority(this.path_,t,e,o.wrapCallback(n)),o.promise},t.prototype.update=function(t,e){if(r.validateArgCount("OnDisconnect.update",1,2,arguments.length),i.validateWritablePath("OnDisconnect.update",this.path_),Array.isArray(t)){for(var n={},s=0;s<t.length;++s)n[""+s]=t[s];t=n,o.warn("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}i.validateFirebaseMergeDataArg("OnDisconnect.update",1,t,this.path_,!1),r.validateCallback("OnDisconnect.update",2,e,!0);var u=new a.Deferred;return this.repo_.onDisconnectUpdate(this.path_,t,u.wrapCallback(e)),u.promise},t}()},psW0:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n("mrSG"),i=n("zotm"),o=n("MGBS"),a=n("rPjj"),s=n("67Y/"),u=n("0/uQ");function l(t,e,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),"function"==typeof e?function(r){return r.pipe(l(function(n,r){return Object(u.a)(t(n,r)).pipe(Object(s.a)(function(t,i){return e(n,t,r,i)}))},n))}:("number"==typeof e&&(n=e),function(e){return e.lift(new c(t,n))})}var c=function(){function t(t,e){void 0===e&&(e=Number.POSITIVE_INFINITY),this.project=t,this.concurrent=e}return t.prototype.call=function(t,e){return e.subscribe(new h(t,this.project,this.concurrent))},t}(),h=function(t){function e(e,n,r){void 0===r&&(r=Number.POSITIVE_INFINITY);var i=t.call(this,e)||this;return i.project=n,i.concurrent=r,i.hasCompleted=!1,i.buffer=[],i.active=0,i.index=0,i}return r.__extends(e,t),e.prototype._next=function(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)},e.prototype._tryNext=function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(t){return void this.destination.error(t)}this.active++,this._innerSub(e,t,n)},e.prototype._innerSub=function(t,e,n){var r=new a.a(this,void 0,void 0);this.destination.add(r),Object(i.a)(this,t,e,n,r)},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},e.prototype.notifyNext=function(t,e,n,r,i){this.destination.next(e)},e.prototype.notifyComplete=function(t){var e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},e}(o.a)},pugT:function(t,e,n){"use strict";var r,i=n("isby"),o=n("McSo"),a=n("2Bdj"),s={e:{}};function u(){try{return r.apply(this,arguments)}catch(t){return s.e=t,s}}function l(t){return r=t,u}var c=n("awvh");n.d(e,"a",function(){return h});var h=function(){function t(t){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}var e;return t.prototype.unsubscribe=function(){var t,e=!1;if(!this.closed){var n=this._parent,r=this._parents,u=this._unsubscribe,h=this._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var p=-1,f=r?r.length:0;n;)n.remove(this),n=++p<f&&r[p]||null;if(Object(a.a)(u)&&l(u).call(this)===s&&(e=!0,t=t||(s.e instanceof c.a?d(s.e.errors):[s.e])),Object(i.a)(h))for(p=-1,f=h.length;++p<f;){var m=h[p];if(Object(o.a)(m)&&l(m.unsubscribe).call(m)===s){e=!0,t=t||[];var v=s.e;v instanceof c.a?t=t.concat(d(v.errors)):t.push(v)}}if(e)throw new c.a(t)}},t.prototype.add=function(e){if(!e||e===t.EMPTY)return t.EMPTY;if(e===this)return this;var n=e;switch(typeof e){case"function":n=new t(e);case"object":if(n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if("function"!=typeof n._addParent){var r=n;(n=new t)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}return(this._subscriptions||(this._subscriptions=[])).push(n),n._addParent(this),n},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}},t.prototype._addParent=function(t){var e=this._parent,n=this._parents;e&&e!==t?n?-1===n.indexOf(t)&&n.push(t):this._parents=[t]:this._parent=t},t.EMPTY=((e=new t).closed=!0,e),t}();function d(t){return t.reduce(function(t,e){return t.concat(e instanceof c.a?e.errors:e)},[])}},q1Ft:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("W1I6"),i=n("0kFh");e.Path=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return Object.defineProperty(t,"Empty",{get:function(){return new t("")},enumerable:!0,configurable:!0}),t.prototype.getFront=function(){return this.pieceNum_>=this.pieces_.length?null:this.pieces_[this.pieceNum_]},t.prototype.getLength=function(){return this.pieces_.length-this.pieceNum_},t.prototype.popFront=function(){var e=this.pieceNum_;return e<this.pieces_.length&&e++,new t(this.pieces_,e)},t.prototype.getBack=function(){return this.pieceNum_<this.pieces_.length?this.pieces_[this.pieces_.length-1]:null},t.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},t.prototype.toUrlEncodedString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+encodeURIComponent(String(this.pieces_[e])));return t||"/"},t.prototype.slice=function(t){return void 0===t&&(t=0),this.pieces_.slice(this.pieceNum_+t)},t.prototype.parent=function(){if(this.pieceNum_>=this.pieces_.length)return null;for(var e=[],n=this.pieceNum_;n<this.pieces_.length-1;n++)e.push(this.pieces_[n]);return new t(e,0)},t.prototype.child=function(e){for(var n=[],r=this.pieceNum_;r<this.pieces_.length;r++)n.push(this.pieces_[r]);if(e instanceof t)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{var i=e.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new t(n,0)},t.prototype.isEmpty=function(){return this.pieceNum_>=this.pieces_.length},t.relativePath=function(e,n){var r=e.getFront(),i=n.getFront();if(null===r)return n;if(r===i)return t.relativePath(e.popFront(),n.popFront());throw new Error("INTERNAL ERROR: innerPath ("+n+") is not within outerPath ("+e+")")},t.comparePaths=function(t,e){for(var n=t.slice(),i=e.slice(),o=0;o<n.length&&o<i.length;o++){var a=r.nameCompare(n[o],i[o]);if(0!==a)return a}return n.length===i.length?0:n.length<i.length?-1:1},t.prototype.equals=function(t){if(this.getLength()!==t.getLength())return!1;for(var e=this.pieceNum_,n=t.pieceNum_;e<=this.pieces_.length;e++,n++)if(this.pieces_[e]!==t.pieces_[n])return!1;return!0},t.prototype.contains=function(t){var e=this.pieceNum_,n=t.pieceNum_;if(this.getLength()>t.getLength())return!1;for(;e<this.pieces_.length;){if(this.pieces_[e]!==t.pieces_[n])return!1;++e,++n}return!0},t}(),e.ValidationPath=function(){function t(t,e){this.errorPrefix_=e,this.parts_=t.slice(),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=i.stringLength(this.parts_[n]);this.checkValid_()}return Object.defineProperty(t,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!0,configurable:!0}),Object.defineProperty(t,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!0,configurable:!0}),t.prototype.push=function(t){this.parts_.length>0&&(this.byteLength_+=1),this.parts_.push(t),this.byteLength_+=i.stringLength(t),this.checkValid_()},t.prototype.pop=function(){var t=this.parts_.pop();this.byteLength_-=i.stringLength(t),this.parts_.length>0&&(this.byteLength_-=1)},t.prototype.checkValid_=function(){if(this.byteLength_>t.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+t.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>t.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+t.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},t.prototype.toErrorString=function(){return 0==this.parts_.length?"":"in property '"+this.parts_.join(".")+"'"},t}()},qXBG:function(t,e,n){"use strict";var r=n("JR7u");n.d(e,"a",function(){return i});var i=function(){function t(t){this.router=t}return t.prototype.signupUser=function(t,e,n){var i=this;r.auth().createUserWithEmailAndPassword(t,e).then(function(r){i.writeUserData(r.uid,t,!0,!1,!1,!1,n),i.signinUser(t,e),i.router.navigate(["/"])}).catch(function(t){return console.log(t)})},t.prototype.getCurrentUserUid=function(){return r.auth().currentUser.uid},t.prototype.signinUser=function(t,e){var n=this;r.auth().signInWithEmailAndPassword(t,e).then(function(t){n.router.navigate(["/"]),r.auth().currentUser.getIdToken().then(function(t){return n.token=t});var e=(new Date).toTimeString();n.log(r.auth().currentUser.uid,"logged in",e)}).catch(function(t){return console.log(t)}),this.getCurrentUserRoles()},t.prototype.logout=function(){r.auth().signOut(),this.token=null;var t=(new Date).toString();this.log(r.auth().currentUser.uid,"logged out",t)},t.prototype.getToken=function(){var t=this;return r.auth().currentUser.getIdToken().then(function(e){return t.token=e}),this.token},t.prototype.isAuthenticated=function(){return null!=this.token},t.prototype.writeUserData=function(t,e,n,i,o,a,s){r.database().ref("users/"+t).set({nome:s,email:e}),r.database().ref("users/"+t+"/roles").set({customer:n,contentManager:i,orderManager:o,clericalWorker:a})},t.prototype.getCurrentUser=function(){var t=r.auth().currentUser.uid;return r.database().ref("/users/"+t).once("value").then(function(t){return new function(t,e,n){this.email=t,this.roles=e,this.nome=n}(t.value().email,t.value().roles,t.value().nome)}),null},t.prototype.log=function(t,e,n){r.database().ref("log/abcd").set({user:t,date:n,whatIsUsed:e})},t.prototype.deleteUser=function(){r.auth().currentUser.delete(),r.database().ref("users/".concat(r.auth().currentUser.uid,"/")).remove(),this.logout()},t.prototype.getCurrentUserRoles=function(){var t=this,e=r.auth().currentUser.uid,n=r.database().ref("users/"+e).orderByChild("roles");new Promise(function(t,e){n.on("value",function(e){var n=JSON.parse(JSON.stringify(e.val().roles));t(n)})}).then(function(e){1==e.clericalWorker?t.isClericalWorker():1==e.contentManager?t.isContentManager():1==e.orderManager?t.isOrderManager():t.isCustomer(),console.log(t.currentuserrole)})},t.prototype.isContentManager=function(){this.currentuserrole="contentManager"},t.prototype.isClericalWorker=function(){this.currentuserrole="clericalWorker"},t.prototype.isOrderManager=function(){this.currentuserrole="orderManager"},t.prototype.isCustomer=function(){this.currentuserrole="customer"},t.prototype.getRole=function(){return this.currentuserrole},t}()},rPjj:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("mrSG"),i=function(t){function e(e,n,r){var i=t.call(this)||this;return i.parent=e,i.outerValue=n,i.outerIndex=r,i.index=0,i}return r.__extends(e,t),e.prototype._next=function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)},e.prototype._error=function(t){this.parent.notifyError(t,this),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},e}(n("FFOo").a)},rWOq:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("q1Ft"),i=n("Mom/"),o=n("ma/Z");e.SparseSnapshotTree=function(){function t(){this.value_=null,this.children_=null}return t.prototype.find=function(t){if(null!=this.value_)return this.value_.getChild(t);if(t.isEmpty()||null==this.children_)return null;var e=t.getFront();return t=t.popFront(),this.children_.contains(e)?this.children_.get(e).find(t):null},t.prototype.remember=function(e,n){if(e.isEmpty())this.value_=n,this.children_=null;else if(null!==this.value_)this.value_=this.value_.updateChild(e,n);else{null==this.children_&&(this.children_=new o.CountedSet);var r=e.getFront();this.children_.contains(r)||this.children_.add(r,new t);var i=this.children_.get(r);e=e.popFront(),i.remember(e,n)}},t.prototype.forget=function(t){if(t.isEmpty())return this.value_=null,this.children_=null,!0;if(null!==this.value_){if(this.value_.isLeafNode())return!1;var e=this.value_;this.value_=null;var n=this;return e.forEachChild(i.PRIORITY_INDEX,function(t,e){n.remember(new r.Path(t),e)}),this.forget(t)}if(null!==this.children_){var o=t.getFront();return t=t.popFront(),this.children_.contains(o)&&this.children_.get(o).forget(t)&&this.children_.remove(o),!!this.children_.isEmpty()&&(this.children_=null,!0)}return!0},t.prototype.forEachTree=function(t,e){null!==this.value_?e(t,this.value_):this.forEachChild(function(n,i){var o=new r.Path(t.toString()+"/"+n);i.forEachTree(o,e)})},t.prototype.forEachChild=function(t){null!==this.children_&&this.children_.each(function(e,n){t(e,n)})},t}()},rkrO:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n("0kFh"),o=n("0iAU"),a=n("W1I6"),s=n("S4uM"),u=n("SyT/");n("kYWE"),e.RepoManager=function(){function t(){this.repos_={},this.useRestClient_=!1}return t.getInstance=function(){return r||(r=new t),r},t.prototype.interrupt=function(){for(var t in this.repos_)for(var e in this.repos_[t])this.repos_[t][e].interrupt()},t.prototype.resume=function(){for(var t in this.repos_)for(var e in this.repos_[t])this.repos_[t][e].resume()},t.prototype.databaseFromApp=function(t,e){var n=e||t.options.databaseURL;void 0===n&&a.fatal("Can't determine Firebase Database URL.  Be sure to include databaseURL option when calling firebase.initializeApp().");var r=s.parseRepoInfo(n),i=r.repoInfo;return u.validateUrl("Invalid Firebase Database URL",1,r),r.path.isEmpty()||a.fatal("Database URL must point to the root of a Firebase Database (not including a child path)."),this.createRepo(i,t).database},t.prototype.deleteRepo=function(t){var e=i.safeGet(this.repos_,t.app.name);e&&i.safeGet(e,t.repoInfo_.toURLString())===t||a.fatal("Database "+t.app.name+"("+t.repoInfo_+") has already been deleted."),t.interrupt(),delete e[t.repoInfo_.toURLString()]},t.prototype.createRepo=function(t,e){var n=i.safeGet(this.repos_,e.name);n||(this.repos_[e.name]=n={});var r=i.safeGet(n,t.toURLString());return r&&a.fatal("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),r=new o.Repo(t,this.useRestClient_,e),n[t.toURLString()]=r,r},t.prototype.forceRestClient=function(t){this.useRestClient_=t},t}()},scCI:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n("mrSG"),o=n("dsTq"),a=n("+e0l"),s=n("W1I6"),u=n("0kFh"),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i.__extends(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return r},set:function(t){r=t},enumerable:!0,configurable:!0}),e.prototype.compare=function(t,e){return s.nameCompare(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw u.assertionError("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return a.NamedNode.MIN},e.prototype.maxPost=function(){return new a.NamedNode(s.MAX_NAME,r)},e.prototype.makePost=function(t,e){return u.assert("string"==typeof t,"KeyIndex indexValue must always be a string."),new a.NamedNode(t,r)},e.prototype.toString=function(){return".key"},e}(o.Index);e.KeyIndex=l,e.KEY_INDEX=new l},siIJ:function(t,e,n){"use strict";n.r(e),n.d(e,"Scheduler",function(){return r});var r=function(){function t(e,n){void 0===n&&(n=t.now),this.SchedulerAction=e,this.now=n}return t.prototype.schedule=function(t,e,n){return void 0===e&&(e=0),new this.SchedulerAction(this,t).schedule(n,e)},t.now=function(){return Date.now()},t}()},svcd:function(t,e,n){"use strict";n.r(e),n.d(e,"AsyncSubject",function(){return a});var r=n("mrSG"),i=n("K9Ia"),o=n("pugT"),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.value=null,e.hasNext=!1,e.hasCompleted=!1,e}return r.__extends(e,t),e.prototype._subscribe=function(e){return this.hasError?(e.error(this.thrownError),o.a.EMPTY):this.hasCompleted&&this.hasNext?(e.next(this.value),e.complete(),o.a.EMPTY):t.prototype._subscribe.call(this,e)},e.prototype.next=function(t){this.hasCompleted||(this.value=t,this.hasNext=!0)},e.prototype.error=function(e){this.hasCompleted||t.prototype.error.call(this,e)},e.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&t.prototype.next.call(this,this.value),t.prototype.complete.call(this)},e}(i.a)},"t/Na":function(t,e,n){"use strict";n.d(e,"l",function(){return I}),n.d(e,"o",function(){return j}),n.d(e,"p",function(){return U}),n.d(e,"m",function(){return D}),n.d(e,"n",function(){return k}),n.d(e,"b",function(){return d}),n.d(e,"f",function(){return h}),n.d(e,"c",function(){return C}),n.d(e,"g",function(){return p}),n.d(e,"a",function(){return P}),n.d(e,"d",function(){return V}),n.d(e,"e",function(){return G}),n.d(e,"k",function(){return B}),n.d(e,"h",function(){return N}),n.d(e,"j",function(){return L}),n.d(e,"i",function(){return F});var r=n("mrSG"),i=n("CcnG"),o=n("F/XL"),a=n("6blF"),s=n("Phjn"),u=n("VnD/"),l=n("67Y/"),c=n("Ip0R"),h=function(){},d=function(){},p=function(){function t(t){var e=this;this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?function(){e.headers=new Map,t.split("\n").forEach(function(t){var n=t.indexOf(":");if(n>0){var r=t.slice(0,n),i=r.toLowerCase(),o=t.slice(n+1).trim();e.maybeSetNormalizedName(r,i),e.headers.has(i)?e.headers.get(i).push(o):e.headers.set(i,[o])}})}:function(){e.headers=new Map,Object.keys(t).forEach(function(n){var r=t[n],i=n.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(e.headers.set(i,r),e.maybeSetNormalizedName(n,i))})}:this.headers=new Map}return t.prototype.has=function(t){return this.init(),this.headers.has(t.toLowerCase())},t.prototype.get=function(t){this.init();var e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null},t.prototype.keys=function(){return this.init(),Array.from(this.normalizedNames.values())},t.prototype.getAll=function(t){return this.init(),this.headers.get(t.toLowerCase())||null},t.prototype.append=function(t,e){return this.clone({name:t,value:e,op:"a"})},t.prototype.set=function(t,e){return this.clone({name:t,value:e,op:"s"})},t.prototype.delete=function(t,e){return this.clone({name:t,value:e,op:"d"})},t.prototype.maybeSetNormalizedName=function(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)},t.prototype.init=function(){var e=this;this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(function(t){return e.applyUpdate(t)}),this.lazyUpdate=null))},t.prototype.copyFrom=function(t){var e=this;t.init(),Array.from(t.headers.keys()).forEach(function(n){e.headers.set(n,t.headers.get(n)),e.normalizedNames.set(n,t.normalizedNames.get(n))})},t.prototype.clone=function(e){var n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n},t.prototype.applyUpdate=function(t){var e=t.name.toLowerCase();switch(t.op){case"a":case"s":var n=t.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(t.name,e);var i=("a"===t.op?this.headers.get(e):void 0)||[];i.push.apply(i,Object(r.__spread)(n)),this.headers.set(e,i);break;case"d":var o=t.value;if(o){var a=this.headers.get(e);if(!a)return;0===(a=a.filter(function(t){return-1===o.indexOf(t)})).length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,a)}else this.headers.delete(e),this.normalizedNames.delete(e)}},t.prototype.forEach=function(t){var e=this;this.init(),Array.from(this.normalizedNames.keys()).forEach(function(n){return t(e.normalizedNames.get(n),e.headers.get(n))})},t}(),f=function(){function t(){}return t.prototype.encodeKey=function(t){return m(t)},t.prototype.encodeValue=function(t){return m(t)},t.prototype.decodeKey=function(t){return decodeURIComponent(t)},t.prototype.decodeValue=function(t){return decodeURIComponent(t)},t}();function m(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}var v=function(){function t(t){void 0===t&&(t={});var e,n,i,o=this;if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new f,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=(e=t.fromString,n=this.encoder,i=new Map,e.length>0&&e.split("&").forEach(function(t){var e=t.indexOf("="),o=Object(r.__read)(-1==e?[n.decodeKey(t),""]:[n.decodeKey(t.slice(0,e)),n.decodeValue(t.slice(e+1))],2),a=o[0],s=o[1],u=i.get(a)||[];u.push(s),i.set(a,u)}),i)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(function(e){var n=t.fromObject[e];o.map.set(e,Array.isArray(n)?n:[n])})):this.map=null}return t.prototype.has=function(t){return this.init(),this.map.has(t)},t.prototype.get=function(t){this.init();var e=this.map.get(t);return e?e[0]:null},t.prototype.getAll=function(t){return this.init(),this.map.get(t)||null},t.prototype.keys=function(){return this.init(),Array.from(this.map.keys())},t.prototype.append=function(t,e){return this.clone({param:t,value:e,op:"a"})},t.prototype.set=function(t,e){return this.clone({param:t,value:e,op:"s"})},t.prototype.delete=function(t,e){return this.clone({param:t,value:e,op:"d"})},t.prototype.toString=function(){var t=this;return this.init(),this.keys().map(function(e){var n=t.encoder.encodeKey(e);return t.map.get(e).map(function(e){return n+"="+t.encoder.encodeValue(e)}).join("&")}).join("&")},t.prototype.clone=function(e){var n=new t({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat([e]),n},t.prototype.init=function(){var t=this;null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(function(e){return t.map.set(e,t.cloneFrom.map.get(e))}),this.updates.forEach(function(e){switch(e.op){case"a":case"s":var n=("a"===e.op?t.map.get(e.param):void 0)||[];n.push(e.value),t.map.set(e.param,n);break;case"d":if(void 0===e.value){t.map.delete(e.param);break}var r=t.map.get(e.param)||[],i=r.indexOf(e.value);-1!==i&&r.splice(i,1),r.length>0?t.map.set(e.param,r):t.map.delete(e.param)}}),this.cloneFrom=null)},t}();function g(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer}function y(t){return"undefined"!=typeof Blob&&t instanceof Blob}function _(t){return"undefined"!=typeof FormData&&t instanceof FormData}var b=function(){function t(t,e,n,r){var i;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==n?n:null,i=r):i=n,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.params&&(this.params=i.params)),this.headers||(this.headers=new p),this.params){var o=this.params.toString();if(0===o.length)this.urlWithParams=e;else{var a=e.indexOf("?");this.urlWithParams=e+(-1===a?"?":a<e.length-1?"&":"")+o}}else this.params=new v,this.urlWithParams=e}return t.prototype.serializeBody=function(){return null===this.body?null:g(this.body)||y(this.body)||_(this.body)||"string"==typeof this.body?this.body:this.body instanceof v?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()},t.prototype.detectContentTypeHeader=function(){return null===this.body?null:_(this.body)?null:y(this.body)?this.body.type||null:g(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof v?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||Array.isArray(this.body)?"application/json":null},t.prototype.clone=function(e){void 0===e&&(e={});var n=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=void 0!==e.body?e.body:this.body,a=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,s=void 0!==e.reportProgress?e.reportProgress:this.reportProgress,u=e.headers||this.headers,l=e.params||this.params;return void 0!==e.setHeaders&&(u=Object.keys(e.setHeaders).reduce(function(t,n){return t.set(n,e.setHeaders[n])},u)),e.setParams&&(l=Object.keys(e.setParams).reduce(function(t,n){return t.set(n,e.setParams[n])},l)),new t(n,r,o,{params:l,headers:u,reportProgress:s,responseType:i,withCredentials:a})},t}(),w=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}({}),x=function(){return function(t,e,n){void 0===e&&(e=200),void 0===n&&(n="OK"),this.headers=t.headers||new p,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||n,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}(),E=function(t){function e(e){void 0===e&&(e={});var n=t.call(this,e)||this;return n.type=w.ResponseHeader,n}return Object(r.__extends)(e,t),e.prototype.clone=function(t){return void 0===t&&(t={}),new e({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})},e}(x),S=function(t){function e(e){void 0===e&&(e={});var n=t.call(this,e)||this;return n.type=w.Response,n.body=void 0!==e.body?e.body:null,n}return Object(r.__extends)(e,t),e.prototype.clone=function(t){return void 0===t&&(t={}),new e({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})},e}(x),T=function(t){function e(e){var n=t.call(this,e,0,"Unknown Error")||this;return n.name="HttpErrorResponse",n.ok=!1,n.message=n.status>=200&&n.status<300?"Http failure during parsing for "+(e.url||"(unknown url)"):"Http failure response for "+(e.url||"(unknown url)")+": "+e.status+" "+e.statusText,n.error=e.error||null,n}return Object(r.__extends)(e,t),e}(x);function M(t,e){return{body:e,headers:t.headers,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}var C=function(){function t(t){this.handler=t}return t.prototype.request=function(t,e,n){var r,i=this;if(void 0===n&&(n={}),t instanceof b)r=t;else{var a;a=n.headers instanceof p?n.headers:new p(n.headers);var c=void 0;n.params&&(c=n.params instanceof v?n.params:new v({fromObject:n.params})),r=new b(t,e,void 0!==n.body?n.body:null,{headers:a,params:c,reportProgress:n.reportProgress,responseType:n.responseType||"json",withCredentials:n.withCredentials})}var h=Object(o.a)(r).pipe(Object(s.a)(function(t){return i.handler.handle(t)}));if(t instanceof b||"events"===n.observe)return h;var d=h.pipe(Object(u.a)(function(t){return t instanceof S}));switch(n.observe||"body"){case"body":switch(r.responseType){case"arraybuffer":return d.pipe(Object(l.a)(function(t){if(null!==t.body&&!(t.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return t.body}));case"blob":return d.pipe(Object(l.a)(function(t){if(null!==t.body&&!(t.body instanceof Blob))throw new Error("Response is not a Blob.");return t.body}));case"text":return d.pipe(Object(l.a)(function(t){if(null!==t.body&&"string"!=typeof t.body)throw new Error("Response is not a string.");return t.body}));case"json":default:return d.pipe(Object(l.a)(function(t){return t.body}))}case"response":return d;default:throw new Error("Unreachable: unhandled observe type "+n.observe+"}")}},t.prototype.delete=function(t,e){return void 0===e&&(e={}),this.request("DELETE",t,e)},t.prototype.get=function(t,e){return void 0===e&&(e={}),this.request("GET",t,e)},t.prototype.head=function(t,e){return void 0===e&&(e={}),this.request("HEAD",t,e)},t.prototype.jsonp=function(t,e){return this.request("JSONP",t,{params:(new v).append(e,"JSONP_CALLBACK"),observe:"body",responseType:"json"})},t.prototype.options=function(t,e){return void 0===e&&(e={}),this.request("OPTIONS",t,e)},t.prototype.patch=function(t,e,n){return void 0===n&&(n={}),this.request("PATCH",t,M(n,e))},t.prototype.post=function(t,e,n){return void 0===n&&(n={}),this.request("POST",t,M(n,e))},t.prototype.put=function(t,e,n){return void 0===n&&(n={}),this.request("PUT",t,M(n,e))},t}(),A=function(){function t(t,e){this.next=t,this.interceptor=e}return t.prototype.handle=function(t){return this.interceptor.intercept(t,this.next)},t}(),P=new i.s("HTTP_INTERCEPTORS"),O=function(){function t(){}return t.prototype.intercept=function(t,e){return e.handle(t)},t}(),R=/^\)\]\}',?\n/,L=function(){},I=function(){function t(){}return t.prototype.build=function(){return new XMLHttpRequest},t}(),N=function(){function t(t){this.xhrFactory=t}return t.prototype.handle=function(t){var e=this;if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without JsonpClientModule installed.");return new a.a(function(n){var r=e.xhrFactory.build();if(r.open(t.method,t.urlWithParams),t.withCredentials&&(r.withCredentials=!0),t.headers.forEach(function(t,e){return r.setRequestHeader(t,e.join(","))}),t.headers.has("Accept")||r.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){var i=t.detectContentTypeHeader();null!==i&&r.setRequestHeader("Content-Type",i)}if(t.responseType){var o=t.responseType.toLowerCase();r.responseType="json"!==o?o:"text"}var a=t.serializeBody(),s=null,u=function(){if(null!==s)return s;var e=1223===r.status?204:r.status,n=r.statusText||"OK",i=new p(r.getAllResponseHeaders()),o=function(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(r)||t.url;return s=new E({headers:i,status:e,statusText:n,url:o})},l=function(){var e=u(),i=e.headers,o=e.status,a=e.statusText,s=e.url,l=null;204!==o&&(l=void 0===r.response?r.responseText:r.response),0===o&&(o=l?200:0);var c=o>=200&&o<300;if("json"===t.responseType&&"string"==typeof l){var h=l;l=l.replace(R,"");try{l=""!==l?JSON.parse(l):null}catch(t){l=h,c&&(c=!1,l={error:t,text:l})}}c?(n.next(new S({body:l,headers:i,status:o,statusText:a,url:s||void 0})),n.complete()):n.error(new T({error:l,headers:i,status:o,statusText:a,url:s||void 0}))},c=function(t){var e=new T({error:t,status:r.status||0,statusText:r.statusText||"Unknown Error"});n.error(e)},h=!1,d=function(e){h||(n.next(u()),h=!0);var i={type:w.DownloadProgress,loaded:e.loaded};e.lengthComputable&&(i.total=e.total),"text"===t.responseType&&r.responseText&&(i.partialText=r.responseText),n.next(i)},f=function(t){var e={type:w.UploadProgress,loaded:t.loaded};t.lengthComputable&&(e.total=t.total),n.next(e)};return r.addEventListener("load",l),r.addEventListener("error",c),t.reportProgress&&(r.addEventListener("progress",d),null!==a&&r.upload&&r.upload.addEventListener("progress",f)),r.send(a),n.next({type:w.Sent}),function(){r.removeEventListener("error",c),r.removeEventListener("load",l),t.reportProgress&&(r.removeEventListener("progress",d),null!==a&&r.upload&&r.upload.removeEventListener("progress",f)),r.abort()}})},t}(),D=new i.s("XSRF_COOKIE_NAME"),k=new i.s("XSRF_HEADER_NAME"),F=function(){},j=function(){function t(t,e,n){this.doc=t,this.platform=e,this.cookieName=n,this.lastCookieString="",this.lastToken=null,this.parseCount=0}return t.prototype.getToken=function(){if("server"===this.platform)return null;var t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Object(c.s)(t,this.cookieName),this.lastCookieString=t),this.lastToken},Object(r.__decorate)([Object(r.__param)(0,Object(i.r)(c.c)),Object(r.__param)(1,Object(i.r)(i.E)),Object(r.__param)(2,Object(i.r)(D))],t)}(),U=function(){function t(t,e){this.tokenService=t,this.headerName=e}return t.prototype.intercept=function(t,e){var n=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||n.startsWith("http://")||n.startsWith("https://"))return e.handle(t);var r=this.tokenService.getToken();return null===r||t.headers.has(this.headerName)||(t=t.clone({headers:t.headers.set(this.headerName,r)})),e.handle(t)},Object(r.__decorate)([Object(r.__param)(1,Object(i.r)(k))],t)}(),B=function(){function t(t,e){this.backend=t,this.injector=e,this.chain=null}return t.prototype.handle=function(t){if(null===this.chain){var e=this.injector.get(P,[]);this.chain=e.reduceRight(function(t,e){return new A(t,e)},this.backend)}return this.chain.handle(t)},t}(),G=function(){function t(){}var e;return e=t,t.disable=function(){return{ngModule:e,providers:[{provide:U,useClass:O}]}},t.withOptions=function(t){return void 0===t&&(t={}),{ngModule:e,providers:[t.cookieName?{provide:D,useValue:t.cookieName}:[],t.headerName?{provide:k,useValue:t.headerName}:[]]}},t}(),V=function(){}},tHPV:function(t,e,n){"use strict";var r=n("mrSG"),i=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r}return r.__extends(e,t),e.prototype.requestAsyncId=function(e,n,r){return void 0===r&&(r=0),null!==r&&r>0?t.prototype.requestAsyncId.call(this,e,n,r):(e.actions.push(this),e.scheduled||(e.scheduled=requestAnimationFrame(function(){return e.flush(null)})))},e.prototype.recycleAsyncId=function(e,n,r){if(void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0)return t.prototype.recycleAsyncId.call(this,e,n,r);0===e.actions.length&&(cancelAnimationFrame(n),e.scheduled=void 0)},e}(function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r.pending=!1,r}return r.__extends(e,t),e.prototype.schedule=function(t,e){if(void 0===e&&(e=0),this.closed)return this;this.state=t;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this},e.prototype.requestAsyncId=function(t,e,n){return void 0===n&&(n=0),setInterval(t.flush.bind(t,this),n)},e.prototype.recycleAsyncId=function(t,e,n){if(void 0===n&&(n=0),null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)},e.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,e){var n=!1,r=void 0;try{this.work(t)}catch(t){n=!0,r=!!t&&t||new Error(t)}if(n)return this.unsubscribe(),r},e.prototype._unsubscribe=function(){var t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null},e}(function(t){function e(e,n){return t.call(this)||this}return r.__extends(e,t),e.prototype.schedule=function(t,e){return void 0===e&&(e=0),this},e}(n("pugT").a))),o=n("siIJ"),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.__extends(e,t),e.prototype.flush=function(t){this.active=!0,this.scheduled=void 0;var e,n=this.actions,r=-1,i=n.length;t=t||n.shift();do{if(e=t.execute(t.state,t.delay))break}while(++r<i&&(t=n.shift()));if(this.active=!1,e){for(;++r<i&&(t=n.shift());)t.unsubscribe();throw e}},e}(function(t){function e(n,r){void 0===r&&(r=o.Scheduler.now);var i=t.call(this,n,function(){return e.delegate&&e.delegate!==i?e.delegate.now():r()})||this;return i.actions=[],i.active=!1,i.scheduled=void 0,i}return r.__extends(e,t),e.prototype.schedule=function(n,r,i){return void 0===r&&(r=0),e.delegate&&e.delegate!==this?e.delegate.schedule(n,r,i):t.prototype.schedule.call(this,n,r,i)},e.prototype.flush=function(t){var e=this.actions;if(this.active)e.push(t);else{var n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}},e}(o.Scheduler));n.d(e,"animationFrame",function(){return s});var s=new a(i)},tHwi:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("0kFh"),i=n("W1I6"),o=n("scCI"),a=n("Mom/"),s=n("A1ZE"),u=n("aScZ"),l=n("FcJQ"),c=n("J686"),h=n("JyJq"),d=n("0kFh");e.QueryParams=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=a.PRIORITY_INDEX}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:this.viewFrom_===t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT},t.prototype.getIndexStartValue=function(){return r.assert(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return r.assert(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:i.MIN_NAME},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return r.assert(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return r.assert(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:i.MAX_NAME},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return r.assert(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.copy_=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t.prototype.limit=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="",e},t.prototype.limitToFirst=function(e){var n=this.copy_();return n.limitSet_=!0,n.limit_=e,n.viewFrom_=t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT,n},t.prototype.limitToLast=function(e){var n=this.copy_();return n.limitSet_=!0,n.limit_=e,n.viewFrom_=t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT,n},t.prototype.startAt=function(t,e){var n=this.copy_();return n.startSet_=!0,void 0===t&&(t=null),n.indexStartValue_=t,null!=e?(n.startNameSet_=!0,n.indexStartName_=e):(n.startNameSet_=!1,n.indexStartName_=""),n},t.prototype.endAt=function(t,e){var n=this.copy_();return n.endSet_=!0,void 0===t&&(t=null),n.indexEndValue_=t,void 0!==e?(n.endNameSet_=!0,n.indexEndName_=e):(n.endNameSet_=!1,n.indexEndName_=""),n},t.prototype.orderBy=function(t){var e=this.copy_();return e.index_=t,e},t.prototype.getQueryObject=function(){var e=t.WIRE_PROTOCOL_CONSTANTS_,n={};if(this.startSet_&&(n[e.INDEX_START_VALUE]=this.indexStartValue_,this.startNameSet_&&(n[e.INDEX_START_NAME]=this.indexStartName_)),this.endSet_&&(n[e.INDEX_END_VALUE]=this.indexEndValue_,this.endNameSet_&&(n[e.INDEX_END_NAME]=this.indexEndName_)),this.limitSet_){n[e.LIMIT]=this.limit_;var r=this.viewFrom_;""===r&&(r=this.isViewFromLeft()?e.VIEW_FROM_LEFT:e.VIEW_FROM_RIGHT),n[e.VIEW_FROM]=r}return this.index_!==a.PRIORITY_INDEX&&(n[e.INDEX]=this.index_.toString()),n},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_==a.PRIORITY_INDEX},t.prototype.getNodeFilter=function(){return this.loadsAllData()?new l.IndexedFilter(this.getIndex()):this.hasLimit()?new c.LimitedFilter(this):new h.RangedFilter(this)},t.prototype.toRestQueryStringParameters=function(){var e,n=t.REST_QUERY_CONSTANTS_,i={};return this.isDefault()?i:(this.index_===a.PRIORITY_INDEX?e=n.PRIORITY_INDEX:this.index_===s.VALUE_INDEX?e=n.VALUE_INDEX:this.index_===o.KEY_INDEX?e=n.KEY_INDEX:(r.assert(this.index_ instanceof u.PathIndex,"Unrecognized index type!"),e=this.index_.toString()),i[n.ORDER_BY]=d.stringify(e),this.startSet_&&(i[n.START_AT]=d.stringify(this.indexStartValue_),this.startNameSet_&&(i[n.START_AT]+=","+d.stringify(this.indexStartName_))),this.endSet_&&(i[n.END_AT]=d.stringify(this.indexEndValue_),this.endNameSet_&&(i[n.END_AT]+=","+d.stringify(this.indexEndName_))),this.limitSet_&&(this.isViewFromLeft()?i[n.LIMIT_TO_FIRST]=this.limit_:i[n.LIMIT_TO_LAST]=this.limit_),i)},t.WIRE_PROTOCOL_CONSTANTS_={INDEX_START_VALUE:"sp",INDEX_START_NAME:"sn",INDEX_END_VALUE:"ep",INDEX_END_NAME:"en",LIMIT:"l",VIEW_FROM:"vf",VIEW_FROM_LEFT:"l",VIEW_FROM_RIGHT:"r",INDEX:"i"},t.REST_QUERY_CONSTANTS_={ORDER_BY:"orderBy",PRIORITY_INDEX:"$priority",VALUE_INDEX:"$value",KEY_INDEX:"$key",START_AT:"startAt",END_AT:"endAt",LIMIT_TO_FIRST:"limitToFirst",LIMIT_TO_LAST:"limitToLast"},t.DEFAULT=new t,t}()},tazP:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("0kFh"),i=n("0kFh");e.StatsCollection=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),i.contains(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return r.deepCopy(this.counters_)},t}()},tlNg:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("RzhA"),i=n("eB1k"),o=n("q1Ft"),a=n("0kFh");e.Merge=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=r.OperationType.MERGE}return t.prototype.operationForChild=function(e){if(this.path.isEmpty()){var n=this.children.subtree(new o.Path(e));return n.isEmpty()?null:n.value?new i.Overwrite(this.source,o.Path.Empty,n.value):new t(this.source,o.Path.Empty,n)}return a.assert(this.path.getFront()===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,this.path.popFront(),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}()},u67D:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("En8+"),i=function(t){return function(e){for(var n=t[r.a]();;){var i=n.next();if(i.done){e.complete();break}if(e.next(i.value),e.closed)break}return"function"==typeof n.return&&e.add(function(){n.return&&n.return()}),e}}},umuC:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("W1I6");e.EventQueue=function(){function t(){this.eventLists_=[],this.recursionDepth_=0}return t.prototype.queueEvents=function(t){for(var e=null,n=0;n<t.length;n++){var r=t[n],o=r.getPath();null===e||o.equals(e.getPath())||(this.eventLists_.push(e),e=null),null===e&&(e=new i(o)),e.add(r)}e&&this.eventLists_.push(e)},t.prototype.raiseEventsAtPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_(function(e){return e.equals(t)})},t.prototype.raiseEventsForChangedPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_(function(e){return e.contains(t)||t.contains(e)})},t.prototype.raiseQueuedEventsMatchingPredicate_=function(t){this.recursionDepth_++;for(var e=!0,n=0;n<this.eventLists_.length;n++){var r=this.eventLists_[n];r&&(t(r.getPath())?(this.eventLists_[n].raise(),this.eventLists_[n]=null):e=!1)}e&&(this.eventLists_=[]),this.recursionDepth_--},t}();var i=function(){function t(t){this.path_=t,this.events_=[]}return t.prototype.add=function(t){this.events_.push(t)},t.prototype.raise=function(){for(var t=0;t<this.events_.length;t++){var e=this.events_[t];if(null!==e){this.events_[t]=null;var n=e.getEventRunner();r.logger&&r.log("event: "+e.toString()),r.exceptionGuard(n)}}},t.prototype.getPath=function(){return this.path_},t}();e.EventList=i},vAyL:function(t,e,n){"use strict";n.r(e),n.d(e,"range",function(){return i}),n.d(e,"dispatch",function(){return o});var r=n("6blF");function i(t,e,n){return void 0===t&&(t=0),void 0===e&&(e=0),new r.a(function(r){var i=0,a=t;if(n)return n.schedule(o,0,{index:i,count:e,start:t,subscriber:r});for(;;){if(i++>=e){r.complete();break}if(r.next(a++),r.closed)break}})}function o(t){var e=t.start,n=t.index,r=t.subscriber;n>=t.count?r.complete():(r.next(e),r.closed||(t.index=n+1,t.start=e+1,this.schedule(t)))}},vS4O:function(t,e,n){var r=n("Womt"),i=function(){function t(t){this.manager=void 0!==t?t:r.DefaultLoadingManager,this.dracoLoader=null}t.prototype={constructor:t,crossOrigin:"anonymous",load:function(t,e,n,i){var o,a=this;o=void 0!==this.resourcePath?this.resourcePath:void 0!==this.path?this.path:r.LoaderUtils.extractUrlBase(t),a.manager.itemStart(t);var s=function(e){i?i(e):console.error(e),a.manager.itemError(t),a.manager.itemEnd(t)},u=new r.FileLoader(a.manager);u.setPath(this.path),u.setResponseType("arraybuffer"),u.load(t,function(n){try{a.parse(n,o,function(n){e(n),a.manager.itemEnd(t)},s)}catch(t){s(t)}},n,s)},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this},setResourcePath:function(t){return this.resourcePath=t,this},setDRACOLoader:function(t){return this.dracoLoader=t,this},parse:function(t,d,p,f){var m,v={};if("string"==typeof t)m=t;else if(r.LoaderUtils.decodeText(new Uint8Array(t,0,4))===a){try{v[e.KHR_BINARY_GLTF]=new function(t){this.name=e.KHR_BINARY_GLTF,this.content=null,this.body=null;var n=new DataView(t,0,s);if(this.header={magic:r.LoaderUtils.decodeText(new Uint8Array(t.slice(0,4))),version:n.getUint32(4,!0),length:n.getUint32(8,!0)},this.header.magic!==a)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected. Use LegacyGLTFLoader instead.");for(var i=new DataView(t,s),o=0;o<i.byteLength;){var l=i.getUint32(o,!0),c=i.getUint32(o+=4,!0);if(o+=4,c===u.JSON){var h=new Uint8Array(t,s+o,l);this.content=r.LoaderUtils.decodeText(h)}else if(c===u.BIN){var d=s+o;this.body=t.slice(d,d+l)}o+=l}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}(t)}catch(t){return void(f&&f(t))}m=v[e.KHR_BINARY_GLTF].content}else m=r.LoaderUtils.decodeText(new Uint8Array(t));var g=JSON.parse(m);if(void 0===g.asset||g.asset.version[0]<2)f&&f(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported. Use LegacyGLTFLoader instead."));else{if(g.extensionsUsed)for(var y=0;y<g.extensionsUsed.length;++y){var _=g.extensionsUsed[y],b=g.extensionsRequired||[];switch(_){case e.KHR_LIGHTS_PUNCTUAL:v[_]=new i(g);break;case e.KHR_MATERIALS_UNLIT:v[_]=new o(g);break;case e.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:v[_]=new h(g);break;case e.KHR_DRACO_MESH_COMPRESSION:v[_]=new l(g,this.dracoLoader);break;case e.MSFT_TEXTURE_DDS:v[e.MSFT_TEXTURE_DDS]=new n(g);break;case e.KHR_TEXTURE_TRANSFORM:v[e.KHR_TEXTURE_TRANSFORM]=new c(g);break;default:b.indexOf(_)>=0&&console.warn('THREE.GLTFLoader: Unknown extension "'+_+'".')}}var w=new P(g,v,{path:d||this.resourcePath||"",crossOrigin:this.crossOrigin,manager:this.manager});w.parse(function(t,e,n,r,i){var o={scene:t,scenes:e,cameras:n,animations:r,asset:i.asset,parser:w,userData:{}};x(v,o,i),p(o)},f)}}};var e={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",MSFT_TEXTURE_DDS:"MSFT_texture_dds"};function n(){if(!r.DDSLoader)throw new Error("THREE.GLTFLoader: Attempting to load .dds texture without importing THREE.DDSLoader");this.name=e.MSFT_TEXTURE_DDS,this.ddsLoader=new r.DDSLoader}function i(t){this.name=e.KHR_LIGHTS_PUNCTUAL,this.lightDefs=(t.extensions&&t.extensions[e.KHR_LIGHTS_PUNCTUAL]||{}).lights||[]}function o(t){this.name=e.KHR_MATERIALS_UNLIT}i.prototype.loadLight=function(t){var e,n=this.lightDefs[t],i=new r.Color(16777215);void 0!==n.color&&i.fromArray(n.color);var o=void 0!==n.range?n.range:0;switch(n.type){case"directional":(e=new r.DirectionalLight(i)).target.position.set(0,0,-1),e.add(e.target);break;case"point":(e=new r.PointLight(i)).distance=o;break;case"spot":(e=new r.SpotLight(i)).distance=o,n.spot=n.spot||{},n.spot.innerConeAngle=void 0!==n.spot.innerConeAngle?n.spot.innerConeAngle:0,n.spot.outerConeAngle=void 0!==n.spot.outerConeAngle?n.spot.outerConeAngle:Math.PI/4,e.angle=n.spot.outerConeAngle,e.penumbra=1-n.spot.innerConeAngle/n.spot.outerConeAngle,e.target.position.set(0,0,-1),e.add(e.target);break;default:throw new Error('THREE.GLTFLoader: Unexpected light type, "'+n.type+'".')}return e.decay=2,void 0!==n.intensity&&(e.intensity=n.intensity),e.name=n.name||"light_"+t,Promise.resolve(e)},o.prototype.getMaterialType=function(t){return r.MeshBasicMaterial},o.prototype.extendParams=function(t,e,n){var i=[];t.color=new r.Color(1,1,1),t.opacity=1;var o=e.pbrMetallicRoughness;if(o){if(Array.isArray(o.baseColorFactor)){var a=o.baseColorFactor;t.color.fromArray(a),t.opacity=a[3]}void 0!==o.baseColorTexture&&i.push(n.assignTexture(t,"map",o.baseColorTexture))}return Promise.all(i)};var a="glTF",s=12,u={JSON:1313821514,BIN:5130562};function l(t,n){if(!n)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=e.KHR_DRACO_MESH_COMPRESSION,this.json=t,this.dracoLoader=n,r.DRACOLoader.getDecoderModule()}function c(t){this.name=e.KHR_TEXTURE_TRANSFORM}function h(){return{name:e.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,specularGlossinessParams:["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"],getMaterialType:function(){return r.ShaderMaterial},extendParams:function(t,e,n){var i=e.extensions[this.name],o=r.ShaderLib.standard,a=r.UniformsUtils.clone(o.uniforms),s=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),u=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),l=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\ttexelSpecular = sRGBToLinear( texelSpecular );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),c=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),h=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb;","material.specularRoughness = clamp( 1.0 - glossinessFactor, 0.04, 1.0 );","material.specularColor = specularFactor.rgb;"].join("\n"),d=o.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",s).replace("#include <metalnessmap_pars_fragment>",u).replace("#include <roughnessmap_fragment>",l).replace("#include <metalnessmap_fragment>",c).replace("#include <lights_physical_fragment>",h);delete a.roughness,delete a.metalness,delete a.roughnessMap,delete a.metalnessMap,a.specular={value:(new r.Color).setHex(1118481)},a.glossiness={value:.5},a.specularMap={value:null},a.glossinessMap={value:null},t.vertexShader=o.vertexShader,t.fragmentShader=d,t.uniforms=a,t.defines={STANDARD:""},t.color=new r.Color(1,1,1),t.opacity=1;var p=[];if(Array.isArray(i.diffuseFactor)){var f=i.diffuseFactor;t.color.fromArray(f),t.opacity=f[3]}if(void 0!==i.diffuseTexture&&p.push(n.assignTexture(t,"map",i.diffuseTexture)),t.emissive=new r.Color(0,0,0),t.glossiness=void 0!==i.glossinessFactor?i.glossinessFactor:1,t.specular=new r.Color(1,1,1),Array.isArray(i.specularFactor)&&t.specular.fromArray(i.specularFactor),void 0!==i.specularGlossinessTexture){var m=i.specularGlossinessTexture;p.push(n.assignTexture(t,"glossinessMap",m)),p.push(n.assignTexture(t,"specularMap",m))}return Promise.all(p)},createMaterial:function(t){var e=new r.ShaderMaterial({defines:t.defines,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader,uniforms:t.uniforms,fog:!0,lights:!0,opacity:t.opacity,transparent:t.transparent});return e.isGLTFSpecularGlossinessMaterial=!0,e.color=t.color,e.map=void 0===t.map?null:t.map,e.lightMap=null,e.lightMapIntensity=1,e.aoMap=void 0===t.aoMap?null:t.aoMap,e.aoMapIntensity=1,e.emissive=t.emissive,e.emissiveIntensity=1,e.emissiveMap=void 0===t.emissiveMap?null:t.emissiveMap,e.bumpMap=void 0===t.bumpMap?null:t.bumpMap,e.bumpScale=1,e.normalMap=void 0===t.normalMap?null:t.normalMap,t.normalScale&&(e.normalScale=t.normalScale),e.displacementMap=null,e.displacementScale=1,e.displacementBias=0,e.specularMap=void 0===t.specularMap?null:t.specularMap,e.specular=t.specular,e.glossinessMap=void 0===t.glossinessMap?null:t.glossinessMap,e.glossiness=t.glossiness,e.alphaMap=null,e.envMap=void 0===t.envMap?null:t.envMap,e.envMapIntensity=1,e.refractionRatio=.98,e.extensions.derivatives=!0,e},cloneMaterial:function(t){var e=t.clone();e.isGLTFSpecularGlossinessMaterial=!0;for(var n=this.specularGlossinessParams,r=0,i=n.length;r<i;r++)e[n[r]]=t[n[r]];return e},refreshUniforms:function(t,e,n,r,i,o){if(!0===i.isGLTFSpecularGlossinessMaterial){var a,s=i.uniforms,u=i.defines;s.opacity.value=i.opacity,s.diffuse.value.copy(i.color),s.emissive.value.copy(i.emissive).multiplyScalar(i.emissiveIntensity),s.map.value=i.map,s.specularMap.value=i.specularMap,s.alphaMap.value=i.alphaMap,s.lightMap.value=i.lightMap,s.lightMapIntensity.value=i.lightMapIntensity,s.aoMap.value=i.aoMap,s.aoMapIntensity.value=i.aoMapIntensity,i.map?a=i.map:i.specularMap?a=i.specularMap:i.displacementMap?a=i.displacementMap:i.normalMap?a=i.normalMap:i.bumpMap?a=i.bumpMap:i.glossinessMap?a=i.glossinessMap:i.alphaMap?a=i.alphaMap:i.emissiveMap&&(a=i.emissiveMap),void 0!==a&&(a.isWebGLRenderTarget&&(a=a.texture),!0===a.matrixAutoUpdate&&a.updateMatrix(),s.uvTransform.value.copy(a.matrix)),i.envMap&&(s.envMap.value=i.envMap,s.envMapIntensity.value=i.envMapIntensity,s.flipEnvMap.value=i.envMap.isCubeTexture?-1:1,s.reflectivity.value=i.reflectivity,s.refractionRatio.value=i.refractionRatio,s.maxMipLevel.value=t.properties.get(i.envMap).__maxMipLevel),s.specular.value.copy(i.specular),s.glossiness.value=i.glossiness,s.glossinessMap.value=i.glossinessMap,s.emissiveMap.value=i.emissiveMap,s.bumpMap.value=i.bumpMap,s.normalMap.value=i.normalMap,s.displacementMap.value=i.displacementMap,s.displacementScale.value=i.displacementScale,s.displacementBias.value=i.displacementBias,null!==s.glossinessMap.value&&void 0===u.USE_GLOSSINESSMAP&&(u.USE_GLOSSINESSMAP="",u.USE_ROUGHNESSMAP=""),null===s.glossinessMap.value&&void 0!==u.USE_GLOSSINESSMAP&&(delete u.USE_GLOSSINESSMAP,delete u.USE_ROUGHNESSMAP)}}}}function d(t,e,n,i){r.Interpolant.call(this,t,e,n,i)}l.prototype.decodePrimitive=function(t,e){var n=this.json,r=this.dracoLoader,i=t.extensions[this.name].bufferView,o=t.extensions[this.name].attributes,a={},s={},u={};for(var l in o)l in g&&(a[g[l]]=o[l]);for(l in t.attributes)if(void 0!==g[l]&&void 0!==o[l]){var c=n.accessors[t.attributes[l]];u[g[l]]=p[c.componentType],s[g[l]]=!0===c.normalized}return e.getDependency("bufferView",i).then(function(t){return new Promise(function(e){r.decodeDracoFile(t,function(t){for(var n in t.attributes){var r=s[n];void 0!==r&&(t.attributes[n].normalized=r)}e(t)},a,u)})})},c.prototype.extendTexture=function(t,e){return t=t.clone(),void 0!==e.offset&&t.offset.fromArray(e.offset),void 0!==e.rotation&&(t.rotation=e.rotation),void 0!==e.scale&&t.repeat.fromArray(e.scale),void 0!==e.texCoord&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),t.needsUpdate=!0,t},(d.prototype=Object.create(r.Interpolant.prototype)).constructor=d,d.prototype.beforeStart_=d.prototype.copySampleValue_=function(t){for(var e=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=t*r*3+r,o=0;o!==r;o++)e[o]=n[i+o];return e},d.prototype.afterEnd_=d.prototype.copySampleValue_,d.prototype.interpolate_=function(t,e,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=2*a,u=3*a,l=r-e,c=(n-e)/l,h=c*c,d=h*c,p=t*u,f=p-u,m=-2*d+3*h,v=d-h,g=1-m,y=v-h+c,_=0;_!==a;_++)i[_]=g*o[f+_+a]+y*(o[f+_+s]*l)+m*o[p+_+a]+v*(o[p+_]*l);return i};var p=(Number,{5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array}),f={9728:r.NearestFilter,9729:r.LinearFilter,9984:r.NearestMipMapNearestFilter,9985:r.LinearMipMapNearestFilter,9986:r.NearestMipMapLinearFilter,9987:r.LinearMipMapLinearFilter},m={33071:r.ClampToEdgeWrapping,33648:r.MirroredRepeatWrapping,10497:r.RepeatWrapping},v={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},g={POSITION:"position",NORMAL:"normal",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},y={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},_={CUBICSPLINE:r.InterpolateSmooth,LINEAR:r.InterpolateLinear,STEP:r.InterpolateDiscrete},b={"image/png":r.RGBAFormat,"image/jpeg":r.RGBFormat};function w(t,e){return"string"!=typeof t||""===t?"":/^(https?:)?\/\//i.test(t)?t:/^data:.*,.*$/i.test(t)?t:/^blob:.*$/i.test(t)?t:e+t}function x(t,e,n){for(var r in n.extensions)void 0===t[r]&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[r]=n.extensions[r])}function E(t,e){void 0!==e.extras&&("object"==typeof e.extras?t.userData=e.extras:console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function S(t,e){if(t.updateMorphTargets(),void 0!==e.weights)for(var n=0,r=e.weights.length;n<r;n++)t.morphTargetInfluences[n]=e.weights[n];if(e.extras&&Array.isArray(e.extras.targetNames)){var i=e.extras.targetNames;if(t.morphTargetInfluences.length===i.length)for(t.morphTargetDictionary={},n=0,r=i.length;n<r;n++)t.morphTargetDictionary[i[n]]=n;else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function T(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(var n in t)if(t[n]!==e[n])return!1;return!0}function M(t,e){if(t.length!==e.length)return!1;for(var n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!1;return!0}function C(t,n){for(var r=0,i=t.length;r<i;r++){var o=t[r];if(s=n,u=(a=o.primitive).extensions?a.extensions[e.KHR_DRACO_MESH_COMPRESSION]:void 0,l=s.extensions?s.extensions[e.KHR_DRACO_MESH_COMPRESSION]:void 0,u&&l?u.bufferView===l.bufferView&&T(u.attributes,l.attributes):a.indices===s.indices&&T(a.attributes,s.attributes))return o.promise}var a,s,u,l;return null}function A(t){if(t.isInterleavedBufferAttribute){for(var e=t.count,n=t.itemSize,i=t.array.slice(0,e*n),o=0;o<e;++o)i[o]=t.getX(o),n>=2&&(i[o+1]=t.getY(o)),n>=3&&(i[o+2]=t.getZ(o)),n>=4&&(i[o+3]=t.getW(o));return new r.BufferAttribute(i,n,t.normalized)}return t.clone()}function P(t,e,n){this.json=t||{},this.extensions=e||{},this.options=n||{},this.cache=new function(){var t={};return{get:function(e){return t[e]},add:function(e,n){t[e]=n},remove:function(e){delete t[e]},removeAll:function(){t={}}}},this.primitiveCache=[],this.multiplePrimitivesCache=[],this.multiPassGeometryCache=[],this.textureLoader=new r.TextureLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.fileLoader=new r.FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer")}function O(t,e,n){var r=e.attributes,i=[];function o(e,r){return n.getDependency("accessor",e).then(function(e){t.addAttribute(r,e)})}for(var a in r){var s=g[a];s&&(s in t.attributes||i.push(o(r[a],s)))}if(void 0!==e.indices&&!t.index){var u=n.getDependency("accessor",e.indices).then(function(e){t.setIndex(e)});i.push(u)}return E(t,e),Promise.all(i).then(function(){return void 0!==e.targets?function(t,e,n){for(var r=!1,i=!1,o=0,a=e.length;o<a&&(void 0!==(l=e[o]).POSITION&&(r=!0),void 0!==l.NORMAL&&(i=!0),!r||!i);o++);if(!r&&!i)return Promise.resolve(t);var s=[],u=[];for(o=0,a=e.length;o<a;o++){var l=e[o];if(r){var c=void 0!==l.POSITION?n.getDependency("accessor",l.POSITION).then(function(t){return A(t)}):t.attributes.position;s.push(c)}i&&(c=void 0!==l.NORMAL?n.getDependency("accessor",l.NORMAL).then(function(t){return A(t)}):t.attributes.normal,u.push(c))}return Promise.all([Promise.all(s),Promise.all(u)]).then(function(n){for(var o=n[0],a=n[1],s=0,u=e.length;s<u;s++){var l=e[s],c="morphTarget"+s;if(r&&void 0!==l.POSITION){var h=o[s];h.name=c;for(var d=t.attributes.position,p=0,f=h.count;p<f;p++)h.setXYZ(p,h.getX(p)+d.getX(p),h.getY(p)+d.getY(p),h.getZ(p)+d.getZ(p))}if(i&&void 0!==l.NORMAL){var m=a[s];m.name=c;var v=t.attributes.normal;for(p=0,f=m.count;p<f;p++)m.setXYZ(p,m.getX(p)+v.getX(p),m.getY(p)+v.getY(p),m.getZ(p)+v.getZ(p))}}return r&&(t.morphAttributes.position=o),i&&(t.morphAttributes.normal=a),t})}(t,e.targets,n):t})}return P.prototype.parse=function(t,e){var n=this.json;this.cache.removeAll(),this.markDefs(),this.getMultiDependencies(["scene","animation","camera"]).then(function(e){var r=e.scenes||[];t(r[n.scene||0],r,e.cameras||[],e.animations||[],n)}).catch(e)},P.prototype.markDefs=function(){for(var t=this.json.nodes||[],e=this.json.skins||[],n=this.json.meshes||[],r={},i={},o=0,a=e.length;o<a;o++)for(var s=e[o].joints,u=0,l=s.length;u<l;u++)t[s[u]].isBone=!0;for(var c=0,h=t.length;c<h;c++){var d=t[c];void 0!==d.mesh&&(void 0===r[d.mesh]&&(r[d.mesh]=i[d.mesh]=0),r[d.mesh]++,void 0!==d.skin&&(n[d.mesh].isSkinnedMesh=!0))}this.json.meshReferences=r,this.json.meshUses=i},P.prototype.getDependency=function(t,n){var r=t+":"+n,i=this.cache.get(r);if(!i){switch(t){case"scene":i=this.loadScene(n);break;case"node":i=this.loadNode(n);break;case"mesh":i=this.loadMesh(n);break;case"accessor":i=this.loadAccessor(n);break;case"bufferView":i=this.loadBufferView(n);break;case"buffer":i=this.loadBuffer(n);break;case"material":i=this.loadMaterial(n);break;case"texture":i=this.loadTexture(n);break;case"skin":i=this.loadSkin(n);break;case"animation":i=this.loadAnimation(n);break;case"camera":i=this.loadCamera(n);break;case"light":i=this.extensions[e.KHR_LIGHTS_PUNCTUAL].loadLight(n);break;default:throw new Error("Unknown type: "+t)}this.cache.add(r,i)}return i},P.prototype.getDependencies=function(t){var e=this.cache.get(t);if(!e){var n=this;e=Promise.all((this.json[t+("mesh"===t?"es":"s")]||[]).map(function(e,r){return n.getDependency(t,r)})),this.cache.add(t,e)}return e},P.prototype.getMultiDependencies=function(t){for(var e={},n=[],r=0,i=t.length;r<i;r++){var o=t[r],a=this.getDependencies(o);a=a.then((function(t,n){e[t]=n}).bind(this,o+("mesh"===o?"es":"s"))),n.push(a)}return Promise.all(n).then(function(){return e})},P.prototype.loadBuffer=function(t){var n=this.json.buffers[t],r=this.fileLoader;if(n.type&&"arraybuffer"!==n.type)throw new Error("THREE.GLTFLoader: "+n.type+" buffer type is not supported.");if(void 0===n.uri&&0===t)return Promise.resolve(this.extensions[e.KHR_BINARY_GLTF].body);var i=this.options;return new Promise(function(t,e){r.load(w(n.uri,i.path),t,void 0,function(){e(new Error('THREE.GLTFLoader: Failed to load buffer "'+n.uri+'".'))})})},P.prototype.loadBufferView=function(t){var e=this.json.bufferViews[t];return this.getDependency("buffer",e.buffer).then(function(t){var n=e.byteOffset||0;return t.slice(n,n+(e.byteLength||0))})},P.prototype.loadAccessor=function(t){var e=this,n=this.json,i=this.json.accessors[t];if(void 0===i.bufferView&&void 0===i.sparse)return Promise.resolve(null);var o=[];return o.push(void 0!==i.bufferView?this.getDependency("bufferView",i.bufferView):null),void 0!==i.sparse&&(o.push(this.getDependency("bufferView",i.sparse.indices.bufferView)),o.push(this.getDependency("bufferView",i.sparse.values.bufferView))),Promise.all(o).then(function(t){var o,a,s=t[0],u=v[i.type],l=p[i.componentType],c=l.BYTES_PER_ELEMENT,h=i.byteOffset||0,d=void 0!==i.bufferView?n.bufferViews[i.bufferView].byteStride:void 0,f=!0===i.normalized;if(d&&d!==c*u){var m="InterleavedBuffer:"+i.bufferView+":"+i.componentType,g=e.cache.get(m);g||(o=new l(s),g=new r.InterleavedBuffer(o,d/c),e.cache.add(m,g)),a=new r.InterleavedBufferAttribute(g,u,h/c,f)}else o=null===s?new l(i.count*u):new l(s,h,i.count*u),a=new r.BufferAttribute(o,u,f);if(void 0!==i.sparse){var y=i.sparse.values.byteOffset||0,_=new(0,p[i.sparse.indices.componentType])(t[1],i.sparse.indices.byteOffset||0,i.sparse.count*v.SCALAR),b=new l(t[2],y,i.sparse.count*u);null!==s&&a.setArray(a.array.slice());for(var w=0,x=_.length;w<x;w++){var E=_[w];if(a.setX(E,b[w*u]),u>=2&&a.setY(E,b[w*u+1]),u>=3&&a.setZ(E,b[w*u+2]),u>=4&&a.setW(E,b[w*u+3]),u>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return a})},P.prototype.loadTexture=function(t){var n,i=this,o=this.json,a=this.options,s=this.textureLoader,u=window.URL||window.webkitURL,l=o.textures[t],c=l.extensions||{},h=(n=c[e.MSFT_TEXTURE_DDS]?o.images[c[e.MSFT_TEXTURE_DDS].source]:o.images[l.source]).uri,d=!1;return void 0!==n.bufferView&&(h=i.getDependency("bufferView",n.bufferView).then(function(t){d=!0;var e=new Blob([t],{type:n.mimeType});return h=u.createObjectURL(e)})),Promise.resolve(h).then(function(t){var n=r.Loader.Handlers.get(t);return n||(n=c[e.MSFT_TEXTURE_DDS]?i.extensions[e.MSFT_TEXTURE_DDS].ddsLoader:s),new Promise(function(e,r){n.load(w(t,a.path),e,void 0,r)})}).then(function(t){!0===d&&u.revokeObjectURL(h),t.flipY=!1,void 0!==l.name&&(t.name=l.name),n.mimeType in b&&(t.format=b[n.mimeType]);var e=(o.samplers||{})[l.sampler]||{};return t.magFilter=f[e.magFilter]||r.LinearFilter,t.minFilter=f[e.minFilter]||r.LinearMipMapLinearFilter,t.wrapS=m[e.wrapS]||r.RepeatWrapping,t.wrapT=m[e.wrapT]||r.RepeatWrapping,t})},P.prototype.assignTexture=function(t,n,r){var i=this;return this.getDependency("texture",r.index).then(function(o){if(i.extensions[e.KHR_TEXTURE_TRANSFORM]){var a=void 0!==r.extensions?r.extensions[e.KHR_TEXTURE_TRANSFORM]:void 0;a&&(o=i.extensions[e.KHR_TEXTURE_TRANSFORM].extendTexture(o,a))}t[n]=o})},P.prototype.loadMaterial=function(t){var n,i=this.extensions,o=this.json.materials[t],a={},s=o.extensions||{},u=[];if(s[e.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){var l=i[e.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];n=l.getMaterialType(o),u.push(l.extendParams(a,o,this))}else if(s[e.KHR_MATERIALS_UNLIT]){var c=i[e.KHR_MATERIALS_UNLIT];n=c.getMaterialType(o),u.push(c.extendParams(a,o,this))}else{n=r.MeshStandardMaterial;var h=o.pbrMetallicRoughness||{};if(a.color=new r.Color(1,1,1),a.opacity=1,Array.isArray(h.baseColorFactor)){var d=h.baseColorFactor;a.color.fromArray(d),a.opacity=d[3]}void 0!==h.baseColorTexture&&u.push(this.assignTexture(a,"map",h.baseColorTexture)),a.metalness=void 0!==h.metallicFactor?h.metallicFactor:1,a.roughness=void 0!==h.roughnessFactor?h.roughnessFactor:1,void 0!==h.metallicRoughnessTexture&&(u.push(this.assignTexture(a,"metalnessMap",h.metallicRoughnessTexture)),u.push(this.assignTexture(a,"roughnessMap",h.metallicRoughnessTexture)))}!0===o.doubleSided&&(a.side=r.DoubleSide);var p=o.alphaMode||"OPAQUE";return"BLEND"===p?a.transparent=!0:(a.transparent=!1,"MASK"===p&&(a.alphaTest=void 0!==o.alphaCutoff?o.alphaCutoff:.5)),void 0!==o.normalTexture&&n!==r.MeshBasicMaterial&&(u.push(this.assignTexture(a,"normalMap",o.normalTexture)),a.normalScale=new r.Vector2(1,1),void 0!==o.normalTexture.scale&&a.normalScale.set(o.normalTexture.scale,o.normalTexture.scale)),void 0!==o.occlusionTexture&&n!==r.MeshBasicMaterial&&(u.push(this.assignTexture(a,"aoMap",o.occlusionTexture)),void 0!==o.occlusionTexture.strength&&(a.aoMapIntensity=o.occlusionTexture.strength)),void 0!==o.emissiveFactor&&n!==r.MeshBasicMaterial&&(a.emissive=(new r.Color).fromArray(o.emissiveFactor)),void 0!==o.emissiveTexture&&n!==r.MeshBasicMaterial&&u.push(this.assignTexture(a,"emissiveMap",o.emissiveTexture)),Promise.all(u).then(function(){var t;return t=n===r.ShaderMaterial?i[e.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(a):new n(a),void 0!==o.name&&(t.name=o.name),t.normalScale&&(t.normalScale.y=-t.normalScale.y),t.map&&(t.map.encoding=r.sRGBEncoding),t.emissiveMap&&(t.emissiveMap.encoding=r.sRGBEncoding),t.specularMap&&(t.specularMap.encoding=r.sRGBEncoding),E(t,o),o.extensions&&x(i,t,o),t})},P.prototype.loadGeometries=function(t){var n,i=this,o=this.extensions,a=this.primitiveCache,s=function(t){if(t.length<2)return!1;var n=t[0],r=n.targets||[];if(void 0===n.indices)return!1;for(var i=1,o=t.length;i<o;i++){var a=t[i];if(n.mode!==a.mode)return!1;if(void 0===a.indices)return!1;if(a.extensions&&a.extensions[e.KHR_DRACO_MESH_COMPRESSION])return!1;if(!T(n.attributes,a.attributes))return!1;var s=a.targets||[];if(r.length!==s.length)return!1;for(var u=0,l=r.length;u<l;u++)if(!T(r[u],s[u]))return!1}return!0}(t);function u(t){return o[e.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(t,i).then(function(e){return O(e,t,i)})}s&&(n=t,t=[t[0]]);for(var l=[],c=0,h=t.length;c<h;c++){var d,p=t[c],f=C(a,p);f?l.push(f):(d=p.extensions&&p.extensions[e.KHR_DRACO_MESH_COMPRESSION]?u(p):O(new r.BufferGeometry,p,i),a.push({primitive:p,promise:d}),l.push(d))}return Promise.all(l).then(function(e){if(s){var o=e[0];if(null!==(p=function(t,e,n){for(var r=0,i=t.length;r<i;r++){var o=t[r];if(e===o.baseGeometry&&M(n,o.primitives))return o.geometry}return null}(d=i.multiPassGeometryCache,o,n)))return[p.geometry];var a=new r.BufferGeometry;for(var u in a.name=o.name,a.userData=o.userData,o.attributes)a.addAttribute(u,o.attributes[u]);for(var u in o.morphAttributes)a.morphAttributes[u]=o.morphAttributes[u];for(var l=[],c=0,h=n.length;c<h;c++)l.push(i.getDependency("accessor",n[c].indices));return Promise.all(l).then(function(t){for(var e=[],r=0,i=0,s=n.length;i<s;i++){for(var u=t[i],l=0,c=u.count;l<c;l++)e.push(u.array[l]);a.addGroup(r,u.count,i),r+=u.count}return a.setIndex(e),d.push({geometry:a,baseGeometry:o,primitives:n}),[a]})}if(e.length>1&&void 0!==r.BufferGeometryUtils){for(c=1,h=t.length;c<h;c++)if(t[0].mode!==t[c].mode)return e;var d,p;if(p=function(t,e){for(var n=0,r=t.length;n<r;n++){var i=t[n];if(M(e,i.baseGeometries))return i.geometry}return null}(d=i.multiplePrimitivesCache,e)){if(null!==p.geometry)return[p.geometry]}else if(a=r.BufferGeometryUtils.mergeBufferGeometries(e,!0),d.push({geometry:a,baseGeometries:e}),null!==a)return[a]}return e})},P.prototype.loadMesh=function(t){for(var n=this,i=this.extensions,o=this.json.meshes[t],a=o.primitives,s=[],u=0,l=a.length;u<l;u++){var c=void 0===a[u].material?new r.MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:r.FrontSide}):this.getDependency("material",a[u].material);s.push(c)}return Promise.all(s).then(function(s){return n.loadGeometries(a).then(function(u){for(var l=1===u.length&&u[0].groups.length>0,c=[],h=0,d=u.length;h<d;h++){var p,f=u[h],m=a[h],v=l?s:s[h];if(4===m.mode||5===m.mode||6===m.mode||void 0===m.mode)!0===(p=!0===o.isSkinnedMesh?new r.SkinnedMesh(f,v):new r.Mesh(f,v)).isSkinnedMesh&&p.normalizeSkinWeights(),5===m.mode?p.drawMode=r.TriangleStripDrawMode:6===m.mode&&(p.drawMode=r.TriangleFanDrawMode);else if(1===m.mode)p=new r.LineSegments(f,v);else if(3===m.mode)p=new r.Line(f,v);else if(2===m.mode)p=new r.LineLoop(f,v);else{if(0!==m.mode)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+m.mode);p=new r.Points(f,v)}Object.keys(p.geometry.morphAttributes).length>0&&S(p,o),p.name=o.name||"mesh_"+t,u.length>1&&(p.name+="_"+h),E(p,o),c.push(p);for(var g=l?p.material:[p.material],y=void 0!==f.attributes.color,_=void 0===f.attributes.normal,b=!0===p.isSkinnedMesh,w=Object.keys(f.morphAttributes).length>0,x=w&&void 0!==f.morphAttributes.normal,T=0,M=g.length;T<M;T++){if(v=g[T],p.isPoints){var C=n.cache.get(P="PointsMaterial:"+v.uuid);C||(C=new r.PointsMaterial,r.Material.prototype.copy.call(C,v),C.color.copy(v.color),C.map=v.map,C.lights=!1,n.cache.add(P,C)),v=C}else if(p.isLine){var A=n.cache.get(P="LineBasicMaterial:"+v.uuid);A||(A=new r.LineBasicMaterial,r.Material.prototype.copy.call(A,v),A.color.copy(v.color),A.lights=!1,n.cache.add(P,A)),v=A}if(y||_||b||w){var P="ClonedMaterial:"+v.uuid+":";v.isGLTFSpecularGlossinessMaterial&&(P+="specular-glossiness:"),b&&(P+="skinning:"),y&&(P+="vertex-colors:"),_&&(P+="flat-shading:"),w&&(P+="morph-targets:"),x&&(P+="morph-normals:");var O=n.cache.get(P);O||(O=v.isGLTFSpecularGlossinessMaterial?i[e.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].cloneMaterial(v):v.clone(),b&&(O.skinning=!0),y&&(O.vertexColors=r.VertexColors),_&&(O.flatShading=!0),w&&(O.morphTargets=!0),x&&(O.morphNormals=!0),n.cache.add(P,O)),v=O}g[T]=v,v.aoMap&&void 0===f.attributes.uv2&&void 0!==f.attributes.uv&&(console.log("THREE.GLTFLoader: Duplicating UVs to support aoMap."),f.addAttribute("uv2",new r.BufferAttribute(f.attributes.uv.array,2))),v.isGLTFSpecularGlossinessMaterial&&(p.onBeforeRender=i[e.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].refreshUniforms)}p.material=l?g:g[0]}if(1===c.length)return c[0];var R=new r.Group;for(h=0,d=c.length;h<d;h++)R.add(c[h]);return R})})},P.prototype.loadCamera=function(t){var e,n=this.json.cameras[t],i=n[n.type];if(i)return"perspective"===n.type?e=new r.PerspectiveCamera(r.Math.radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):"orthographic"===n.type&&(e=new r.OrthographicCamera(i.xmag/-2,i.xmag/2,i.ymag/2,i.ymag/-2,i.znear,i.zfar)),void 0!==n.name&&(e.name=n.name),E(e,n),Promise.resolve(e);console.warn("THREE.GLTFLoader: Missing camera parameters.")},P.prototype.loadSkin=function(t){var e=this.json.skins[t],n={joints:e.joints};return void 0===e.inverseBindMatrices?Promise.resolve(n):this.getDependency("accessor",e.inverseBindMatrices).then(function(t){return n.inverseBindMatrices=t,n})},P.prototype.loadAnimation=function(t){for(var e=this.json.animations[t],n=[],i=[],o=[],a=[],s=[],u=0,l=e.channels.length;u<l;u++){var c=e.channels[u],h=e.samplers[c.sampler],p=c.target,f=void 0!==e.parameters?e.parameters[h.input]:h.input,m=void 0!==e.parameters?e.parameters[h.output]:h.output;n.push(this.getDependency("node",void 0!==p.node?p.node:p.id)),i.push(this.getDependency("accessor",f)),o.push(this.getDependency("accessor",m)),a.push(h),s.push(p)}return Promise.all([Promise.all(n),Promise.all(i),Promise.all(o),Promise.all(a),Promise.all(s)]).then(function(n){for(var i=n[0],o=n[1],a=n[2],s=n[3],u=n[4],l=[],c=0,h=i.length;c<h;c++){var p=i[c],f=o[c],m=a[c],v=s[c],g=u[c];if(void 0!==p){var b;switch(p.updateMatrix(),p.matrixAutoUpdate=!0,y[g.path]){case y.weights:b=r.NumberKeyframeTrack;break;case y.rotation:b=r.QuaternionKeyframeTrack;break;case y.position:case y.scale:default:b=r.VectorKeyframeTrack}var w=p.name?p.name:p.uuid,x=void 0!==v.interpolation?_[v.interpolation]:r.InterpolateLinear,E=[];y[g.path]===y.weights?p.traverse(function(t){!0===t.isMesh&&t.morphTargetInfluences&&E.push(t.name?t.name:t.uuid)}):E.push(w);for(var S=0,T=E.length;S<T;S++){var M=new b(E[S]+"."+y[g.path],r.AnimationUtils.arraySlice(f.array,0),r.AnimationUtils.arraySlice(m.array,0),x);"CUBICSPLINE"===v.interpolation&&(M.createInterpolant=function(t){return new d(this.times,this.values,this.getValueSize()/3,t)},M.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),l.push(M)}}}return new r.AnimationClip(void 0!==e.name?e.name:"animation_"+t,void 0,l)})},P.prototype.loadNode=function(t){var n=this.json,i=this.extensions,o=this,a=n.meshReferences,s=n.meshUses,u=n.nodes[t];return new Promise(function(t){!0===u.isBone?t(new r.Bone):void 0!==u.mesh?o.getDependency("mesh",u.mesh).then(function(e){var n;if(a[u.mesh]>1){var r=s[u.mesh]++;(n=e.clone()).name+="_instance_"+r,n.onBeforeRender=e.onBeforeRender;for(var i=0,o=n.children.length;i<o;i++)n.children[i].name+="_instance_"+r,n.children[i].onBeforeRender=e.children[i].onBeforeRender}else n=e;t(n)}):void 0!==u.camera?o.getDependency("camera",u.camera).then(t):u.extensions&&u.extensions[e.KHR_LIGHTS_PUNCTUAL]&&void 0!==u.extensions[e.KHR_LIGHTS_PUNCTUAL].light?o.getDependency("light",u.extensions[e.KHR_LIGHTS_PUNCTUAL].light).then(t):t(new r.Object3D)}).then(function(t){if(void 0!==u.name&&(t.name=r.PropertyBinding.sanitizeNodeName(u.name)),E(t,u),u.extensions&&x(i,t,u),void 0!==u.matrix){var e=new r.Matrix4;e.fromArray(u.matrix),t.applyMatrix(e)}else void 0!==u.translation&&t.position.fromArray(u.translation),void 0!==u.rotation&&t.quaternion.fromArray(u.rotation),void 0!==u.scale&&t.scale.fromArray(u.scale);return t})},P.prototype.loadScene=function(){function t(e,n,i,o){var a=i.nodes[e];return o.getDependency("node",e).then(function(t){return void 0===a.skin?t:o.getDependency("skin",a.skin).then(function(t){for(var n=[],r=0,i=(e=t).joints.length;r<i;r++)n.push(o.getDependency("node",e.joints[r]));return Promise.all(n)}).then(function(n){for(var i=!0===t.isGroup?t.children:[t],o=0,a=i.length;o<a;o++){for(var s=i[o],u=[],l=[],c=0,h=n.length;c<h;c++){var d=n[c];if(d){u.push(d);var p=new r.Matrix4;void 0!==e.inverseBindMatrices&&p.fromArray(e.inverseBindMatrices.array,16*c),l.push(p)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',e.joints[c])}s.bind(new r.Skeleton(u,l),s.matrixWorld)}return t});var e}).then(function(e){n.add(e);var r=[];if(a.children)for(var s=a.children,u=0,l=s.length;u<l;u++)r.push(t(s[u],e,i,o));return Promise.all(r)})}return function(e){var n=this.json,i=this.extensions,o=this.json.scenes[e],a=new r.Scene;void 0!==o.name&&(a.name=o.name),E(a,o),o.extensions&&x(i,a,o);for(var s=o.nodes||[],u=[],l=0,c=s.length;l<c;l++)u.push(t(s[l],a,n,this));return Promise.all(u).then(function(){return a})}}(),t}();t.exports=i},viW3:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("mrSG"),i=n("0kFh"),o=n("W1I6"),a=n("0kFh"),s=n("0kFh"),u=n("0kFh"),l=n("mG1e");e.ReadonlyRestClient=function(t){function e(e,n,r){var i=t.call(this)||this;return i.repoInfo_=e,i.onDataUpdate_=n,i.authTokenProvider_=r,i.log_=o.logWrapper("p:rest:"),i.listens_={},i}return r.__extends(e,t),e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(i.assert(t.getQueryParams().isDefault(),"should have a tag if it's not a default query."),t.path.toString())},e.prototype.listen=function(t,n,r,i){var o=this,a=t.path.toString();this.log_("Listen called for "+a+" "+t.queryIdentifier());var u=e.getListenId_(t,r),l={};this.listens_[u]=l;var c=t.getQueryParams().toRestQueryStringParameters();this.restRequest_(a+".json",c,function(t,e){var n=e;404===t&&(n=null,t=null),null===t&&o.onDataUpdate_(a,n,!1,r),s.safeGet(o.listens_,u)===l&&i(t?401==t?"permission_denied":"rest_error:"+t:"ok",null)})},e.prototype.unlisten=function(t,n){var r=e.getListenId_(t,n);delete this.listens_[r]},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var r=this;void 0===e&&(e={}),e.format="export",this.authTokenProvider_.getToken(!1).then(function(i){var s=i&&i.accessToken;s&&(e.auth=s);var l=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?"+u.querystring(e);r.log_("Sending REST request for "+l);var c=new XMLHttpRequest;c.onreadystatechange=function(){if(n&&4===c.readyState){r.log_("REST Response for "+l+" received. status:",c.status,"response:",c.responseText);var t=null;if(c.status>=200&&c.status<300){try{t=a.jsonEval(c.responseText)}catch(t){o.warn("Failed to parse JSON response for "+l+": "+c.responseText)}n(null,t)}else 401!==c.status&&404!==c.status&&o.warn("Got unsuccessful REST response for "+l+" Status: "+c.status),n(c.status);n=null}},c.open("GET",l,!0),c.send()})},e}(l.ServerActions)},w7gh:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}();e.SortedMapIterator=r;var i=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:a.EMPTY_NODE,this.right=null!=o?o:a.EMPTY_NODE}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r,i;return(i=(r=n(t,(i=this).key))<0?i.copy(null,null,null,i.left.insert(t,e,n),null):0===r?i.copy(null,e,null,null,null):i.copy(null,null,null,null,i.right.insert(t,e,n))).fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return a.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},t.prototype.remove=function(t,e){var n,r;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return a.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){var t;if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");if((t=this.left.check_())!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}();e.LLRBNode=i;var o=function(){function t(){}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new i(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}();e.LLRBEmptyNode=o;var a=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,i.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,i.BLACK,null,null))},t.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new r(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new r(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new r(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new r(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new o,t}();e.SortedMap=a},wXUz:function(t,e,n){"use strict";n.r(e);var r=n("geFX"),i="https://firebasestorage.googleapis.com",o="/v0",a="/v0",s=12e4,u=6e4,l=-9007199254740991,c=function(){function t(t,e){this.code_=d(t),this.message_="Firebase Storage: "+e,this.serverResponse_=null,this.name_="FirebaseError"}return t.prototype.codeProp=function(){return this.code},t.prototype.codeEquals=function(t){return d(t)===this.codeProp()},t.prototype.serverResponseProp=function(){return this.serverResponse_},t.prototype.setServerResponseProp=function(t){this.serverResponse_=t},Object.defineProperty(t.prototype,"name",{get:function(){return this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"code",{get:function(){return this.code_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"message",{get:function(){return this.message_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"serverResponse",{get:function(){return this.serverResponse_},enumerable:!0,configurable:!0}),t}(),h={UNKNOWN:"unknown",OBJECT_NOT_FOUND:"object-not-found",BUCKET_NOT_FOUND:"bucket-not-found",PROJECT_NOT_FOUND:"project-not-found",QUOTA_EXCEEDED:"quota-exceeded",UNAUTHENTICATED:"unauthenticated",UNAUTHORIZED:"unauthorized",RETRY_LIMIT_EXCEEDED:"retry-limit-exceeded",INVALID_CHECKSUM:"invalid-checksum",CANCELED:"canceled",INVALID_EVENT_NAME:"invalid-event-name",INVALID_URL:"invalid-url",INVALID_DEFAULT_BUCKET:"invalid-default-bucket",NO_DEFAULT_BUCKET:"no-default-bucket",CANNOT_SLICE_BLOB:"cannot-slice-blob",SERVER_FILE_WRONG_SIZE:"server-file-wrong-size",NO_DOWNLOAD_URL:"no-download-url",INVALID_ARGUMENT:"invalid-argument",INVALID_ARGUMENT_COUNT:"invalid-argument-count",APP_DELETED:"app-deleted",INVALID_ROOT_OPERATION:"invalid-root-operation",INVALID_FORMAT:"invalid-format",INTERNAL_ERROR:"internal-error"};function d(t){return"storage/"+t}function p(){return new c(h.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function f(){return new c(h.CANCELED,"User canceled the upload/download.")}function m(){return new c(h.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function v(t,e,n){return new c(h.INVALID_ARGUMENT,"Invalid argument in `"+e+"` at index "+t+": "+n)}function g(){return new c(h.APP_DELETED,"The Firebase app was deleted.")}function y(t,e){return new c(h.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function _(t){throw new c(h.INTERNAL_ERROR,"Internal error: "+t)}var b={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};function w(t){switch(t){case b.RAW:case b.BASE64:case b.BASE64URL:case b.DATA_URL:return;default:throw"Expected one of the event types: ["+b.RAW+", "+b.BASE64+", "+b.BASE64URL+", "+b.DATA_URL+"]."}}var x=function(t,e){this.data=t,this.contentType=e||null};function E(t,e){switch(t){case b.RAW:return new x(S(e));case b.BASE64:case b.BASE64URL:return new x(T(t,e));case b.DATA_URL:return new x(function(t){var e=new M(t);return e.base64?T(b.BASE64,e.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(t){throw y(b.DATA_URL,"Malformed data URL.")}return S(e)}(e.rest)}(e),function(t){return new M(t).contentType}(e))}throw p()}function S(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|63&r);else if(55296==(64512&r))if(n<t.length-1&&56320==(64512&t.charCodeAt(n+1))){var i=r,o=t.charCodeAt(++n);e.push(240|(r=65536|(1023&i)<<10|1023&o)>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else e.push(239,191,189);else 56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function T(t,e){switch(t){case b.BASE64:var n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r)throw y(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case b.BASE64URL:var i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw y(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/")}var a;try{a=atob(e)}catch(e){throw y(t,"Invalid character found")}for(var s=new Uint8Array(a.length),u=0;u<a.length;u++)s[u]=a.charCodeAt(u);return s}var M=function(){return function(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw y(b.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n,r,i=e[1]||null;null!=i&&(this.base64=(n=i).length>=(r=";base64").length&&n.substring(n.length-r.length)===r,this.contentType=this.base64?i.substring(0,i.length-";base64".length):i),this.rest=t.substring(t.indexOf(",")+1)}}(),C={STATE_CHANGED:"state_changed"},A={RUNNING:"running",PAUSING:"pausing",PAUSED:"paused",SUCCESS:"success",CANCELING:"canceling",CANCELED:"canceled",ERROR:"error"},P={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function O(t){switch(t){case A.RUNNING:case A.PAUSING:case A.CANCELING:return P.RUNNING;case A.PAUSED:return P.PAUSED;case A.SUCCESS:return P.SUCCESS;case A.CANCELED:return P.CANCELED;case A.ERROR:default:return P.ERROR}}function R(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function L(t,e){for(var n in t)R(t,n)&&e(n,t[n])}function I(t){if(null==t)return{};var e={};return L(t,function(t,n){e[t]=n}),e}function N(t){return new Promise(t)}function D(t){return Promise.resolve(t)}function k(t){return null!=t}function F(t){return void 0!==t}function j(t){return"function"==typeof t}function U(t){return"object"==typeof t}function B(t){return U(t)&&null!==t}function G(t){return"string"==typeof t||t instanceof String}function V(t){return z()&&t instanceof Blob}function z(){return"undefined"!=typeof Blob}var H=function(t){return t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",t}({}),W=function(){function t(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=H.NO_ERROR,this.sendPromise_=N(function(e,n){t.xhr_.addEventListener("abort",function(n){t.errorCode_=H.ABORT,e(t)}),t.xhr_.addEventListener("error",function(n){t.errorCode_=H.NETWORK_ERROR,e(t)}),t.xhr_.addEventListener("load",function(n){e(t)})})}return t.prototype.send=function(t,e,n,r){var i=this;if(this.sent_)throw _("cannot .send() more than once");return this.sent_=!0,this.xhr_.open(e,t,!0),k(r)&&L(r,function(t,e){i.xhr_.setRequestHeader(t,e.toString())}),k(n)?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},t.prototype.getErrorCode=function(){if(!this.sent_)throw _("cannot .getErrorCode() before sending");return this.errorCode_},t.prototype.getStatus=function(){if(!this.sent_)throw _("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return-1}},t.prototype.getResponseText=function(){if(!this.sent_)throw _("cannot .getResponseText() before sending");return this.xhr_.responseText},t.prototype.abort=function(){this.xhr_.abort()},t.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},t.prototype.addUploadProgressListener=function(t){k(this.xhr_.upload)&&this.xhr_.upload.addEventListener("progress",t)},t.prototype.removeUploadProgressListener=function(t){k(this.xhr_.upload)&&this.xhr_.upload.removeEventListener("progress",t)},t}(),q=function(){function t(){}return t.prototype.createXhrIo=function(){return new W},t}(),X=function(){function t(t,e){this.bucket=t,this.path_=e}return Object.defineProperty(t.prototype,"path",{get:function(){return this.path_},enumerable:!0,configurable:!0}),t.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},t.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},t.makeFromBucketSpec=function(e){var n;try{n=t.makeFromUrl(e)}catch(n){return new t(e,"")}if(""===n.path)return n;throw new c(h.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")},t.makeFromUrl=function(e){for(var n=null,r=[{regex:new RegExp("^gs://([A-Za-z0-9.\\-]+)(/(.*))?$","i"),indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://firebasestorage\\.googleapis\\.com/v[A-Za-z0-9_]+/b/([A-Za-z0-9.\\-]+)/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:function(t){t.path_=decodeURIComponent(t.path)}}],i=0;i<r.length;i++){var o=r[i],a=o.regex.exec(e);if(a){var s=a[o.indices.path];s||(s=""),n=new t(a[o.indices.bucket],s),o.postModify(n);break}}if(null==n)throw function(t){return new c(h.INVALID_URL,"Invalid URL '"+t+"'.")}(e);return n},t}();function Y(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function K(t){return i+o+t}function Z(t){return i+a+t}function Q(t){var e=encodeURIComponent,n="?";return L(t,function(t,r){var i=e(t)+"="+e(r);n=n+i+"&"}),n=n.slice(0,-1)}function J(t,e){return e}var $=function(){return function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||J}}(),tt=null;function et(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}function nt(t){if(!t||!U(t))throw"Expected Metadata object.";for(var e in t){var n=t[e];if("customMetadata"===e){if(!U(n))throw"Expected object for 'customMetadata' mapping."}else if(B(n))throw"Mapping for '"+e+"' cannot be an object."}}function rt(t,e,n){for(var r=e.length,i=e.length,o=0;o<e.length;o++)if(e[o].optional){r=o;break}var a,s,u,l;if(!(r<=n.length&&n.length<=i))throw(a=r)===(s=i)?(u=a,l=1===a?"argument":"arguments"):(u="between "+a+" and "+s,l="arguments"),new c(h.INVALID_ARGUMENT_COUNT,"Invalid argument count in `"+t+"`: Expected "+u+" "+l+", received "+n.length+".");for(o=0;o<n.length;o++)try{e[o].validator(n[o])}catch(e){throw e instanceof Error?v(o,t,e.message):v(o,t,e)}}var it=function(){return function(t,e){var n=this;this.validator=function(e){n.optional&&!F(e)||t(e)},this.optional=!!e}}();function ot(t,e){function n(t){if(!G(t))throw"Expected string."}var r,i,o;return t?(i=n,o=t,r=function(t){i(t),o(t)}):r=n,new it(r,e)}function at(t){return new it(nt,t)}function st(){return new it(function(t){if(!(function(t){return"number"==typeof t||t instanceof Number}(t)&&t>=0))throw"Expected a number 0 or greater."})}function ut(t,e){return new it(function(e){if(!(null===e||k(e)&&e instanceof Object))throw"Expected an Object.";void 0!==t&&null!==t&&t(e)},e)}function lt(t){return new it(function(t){if(null!==t&&!j(t))throw"Expected a Function."},t)}function ct(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}var ht=function(){function t(t,e){var n=0,r="";V(t)?(this.data_=t,n=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}return t.prototype.size=function(){return this.size_},t.prototype.type=function(){return this.type_},t.prototype.slice=function(e,n){if(V(this.data_)){var r=(o=e,a=n,(i=this.data_).webkitSlice?i.webkitSlice(o,a):i.mozSlice?i.mozSlice(o,a):i.slice?i.slice(o,a):null);return null===r?null:new t(r)}var i,o,a;return new t(new Uint8Array(this.data_.buffer,e,n-e),!0)},t.getBlob=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(z()){var r=e.map(function(e){return e instanceof t?e.data_:e});return new t((function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=ct();if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(z())return new Blob(t);throw Error("This browser doesn't seem to support creating Blobs")}).apply(null,r))}var i=e.map(function(t){return G(t)?E(b.RAW,t).data:t.data_}),o=0;i.forEach(function(t){o+=t.byteLength});var a=new Uint8Array(o),s=0;return i.forEach(function(t){for(var e=0;e<t.length;e++)a[s++]=t[e]}),new t(a,!0)},t.prototype.uploadData=function(){return this.data_},t}();function dt(t,e){return-1!==t.indexOf(e)}var pt=function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};function ft(t){if(!t)throw p()}function mt(t,e){return function(n,r){var i=function(t,e,n){var i=function(t){var e,n;try{e=JSON.parse(t)}catch(t){return null}return U(n=e)&&!Array.isArray(n)?e:null}(r);return null===i?null:function(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var a=n[o];r[a.local]=a.xform(r,e[a.server])}return function(t,e){Object.defineProperty(t,"ref",{get:function(){var n=new X(t.bucket,t.fullPath);return e.makeStorageReference(n)}})}(r,t),r}(t,i,n)}(t,0,e);return ft(null!==i),i}}function vt(t){return function(e,n){var r;return(r=401===e.getStatus()?new c(h.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?new c(h.QUOTA_EXCEEDED,"Quota for bucket '"+t.bucket+"' exceeded, please view quota on https://firebase.google.com/pricing/."):403===e.getStatus()?new c(h.UNAUTHORIZED,"User does not have permission to access '"+t.path+"'."):n).setServerResponseProp(n.serverResponseProp()),r}}function gt(t){var e=vt(t);return function(n,r){var i=e(n,r);return 404===n.getStatus()&&(i=new c(h.OBJECT_NOT_FOUND,"Object '"+t.path+"' does not exist.")),i.setServerResponseProp(r.serverResponseProp()),i}}function yt(t,e,n){var r=K(e.fullServerUrl()),i=t.maxOperationRetryTime(),o=new pt(r,"GET",mt(t,n),i);return o.errorHandler=gt(e),o}function _t(t,e,n){var r=I(n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function(t,e){return e&&e.type()||"application/octet-stream"}(0,e)),r}var bt=function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null};function wt(t,e){var n;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(t){ft(!1)}return ft(dt(e||["active"],n)),n}var xt=function(){return function(t,e,n){if(j(t)||k(e)||k(n))this.next=t,this.error=e||null,this.complete=n||null;else{var r=t;this.next=r.next||null,this.error=r.error||null,this.complete=r.complete||null}}}(),Et=function(){function t(t,e,n,r,i,o){this.bytesTransferred=t,this.totalBytes=e,this.state=n,this.metadata=r,this.task=i,this.ref=o}return Object.defineProperty(t.prototype,"downloadURL",{get:function(){if(null!==this.metadata){var t=this.metadata.downloadURLs;return null!=t&&null!=t[0]?t[0]:null}return null},enumerable:!0,configurable:!0}),t}();function St(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];D(!0).then(function(){t.apply(null,e)})}}var Tt=function(){function t(t,e,n,r,i,o){void 0===o&&(o=null);var a=this;this.transferred_=0,this.needToFetchStatus_=!1,this.needToFetchMetadata_=!1,this.observers_=[],this.error_=null,this.uploadUrl_=null,this.request_=null,this.chunkMultiplier_=1,this.resolve_=null,this.reject_=null,this.ref_=t,this.authWrapper_=e,this.location_=n,this.blob_=i,this.metadata_=o,this.mappings_=r,this.resumable_=this.shouldDoResumable_(this.blob_),this.state_=A.RUNNING,this.errorHandler_=function(t){a.request_=null,a.chunkMultiplier_=1,t.codeEquals(h.CANCELED)?(a.needToFetchStatus_=!0,a.completeTransitions_()):(a.error_=t,a.transition_(A.ERROR))},this.metadataErrorHandler_=function(t){a.request_=null,t.codeEquals(h.CANCELED)?a.completeTransitions_():(a.error_=t,a.transition_(A.ERROR))},this.promise_=N(function(t,e){a.resolve_=t,a.reject_=e,a.start_()}),this.promise_.then(null,function(){})}return t.prototype.makeProgressCallback_=function(){var t=this,e=this.transferred_;return function(n,r){t.updateProgress_(e+n)}},t.prototype.shouldDoResumable_=function(t){return t.size()>262144},t.prototype.start_=function(){this.state_===A.RUNNING&&null===this.request_&&(this.resumable_?null===this.uploadUrl_?this.createResumable_():this.needToFetchStatus_?this.fetchStatus_():this.needToFetchMetadata_?this.fetchMetadata_():this.continueUpload_():this.oneShotUpload_())},t.prototype.resolveToken_=function(t){var e=this;this.authWrapper_.getAuthToken().then(function(n){switch(e.state_){case A.RUNNING:t(n);break;case A.CANCELING:e.transition_(A.CANCELED);break;case A.PAUSING:e.transition_(A.PAUSED)}})},t.prototype.createResumable_=function(){var t=this;this.resolveToken_(function(e){var n=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),a=_t(e,r,i),s={name:a.fullPath},u=Z(o),l={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},c=et(a,n),h=t.maxUploadRetryTime(),d=new pt(u,"POST",function(t,e){var n;wt(t);try{n=t.getResponseHeader("X-Goog-Upload-URL")}catch(t){ft(!1)}return ft(G(n)),n},h);return d.urlParams=s,d.headers=l,d.body=c,d.errorHandler=vt(e),d}(t.authWrapper_,t.location_,t.mappings_,t.blob_,t.metadata_),r=t.authWrapper_.makeRequest(n,e);t.request_=r,r.getPromise().then(function(e){t.request_=null,t.uploadUrl_=e,t.needToFetchStatus_=!1,t.completeTransitions_()},t.errorHandler_)})},t.prototype.fetchStatus_=function(){var t=this,e=this.uploadUrl_;this.resolveToken_(function(n){var r=function(e,n,r,i){var o=t.authWrapper_.maxUploadRetryTime(),a=new pt(r,"POST",function(t,e){var n,r=wt(t,["active","final"]);try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(t){ft(!1)}var o=parseInt(n,10);return ft(!isNaN(o)),new bt(o,i.size(),"final"===r)},o);return a.headers={"X-Goog-Upload-Command":"query"},a.errorHandler=vt(n),a}(0,t.location_,e,t.blob_),i=t.authWrapper_.makeRequest(r,n);t.request_=i,i.getPromise().then(function(e){e=e,t.request_=null,t.updateProgress_(e.current),t.needToFetchStatus_=!1,e.finalized&&(t.needToFetchMetadata_=!0),t.completeTransitions_()},t.errorHandler_)})},t.prototype.continueUpload_=function(){var t=this,e=262144*this.chunkMultiplier_,n=new bt(this.transferred_,this.blob_.size()),r=this.uploadUrl_;this.resolveToken_(function(i){var o;try{o=function(t,e,n,r,i,o,a,s){var u=new bt(0,0);if(a?(u.current=a.current,u.total=a.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new c(h.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.");var l=u.total-u.current,d=l;i>0&&(d=Math.min(d,i));var p=u.current,f={"X-Goog-Upload-Command":d===l?"upload, finalize":"upload","X-Goog-Upload-Offset":u.current},v=r.slice(p,p+d);if(null===v)throw m();var g=e.maxUploadRetryTime(),y=new pt(n,"POST",function(t,n){var i,a=wt(t,["active","final"]),s=u.current+d,l=r.size();return i="final"===a?mt(e,o)(t,n):null,new bt(s,l,"final"===a,i)},g);return y.headers=f,y.body=v.uploadData(),y.progressCallback=s||null,y.errorHandler=vt(t),y}(t.location_,t.authWrapper_,r,t.blob_,e,t.mappings_,n,t.makeProgressCallback_())}catch(e){return t.error_=e,void t.transition_(A.ERROR)}var a=t.authWrapper_.makeRequest(o,i);t.request_=a,a.getPromise().then(function(e){t.increaseMultiplier_(),t.request_=null,t.updateProgress_(e.current),e.finalized?(t.metadata_=e.metadata,t.transition_(A.SUCCESS)):t.completeTransitions_()},t.errorHandler_)})},t.prototype.increaseMultiplier_=function(){262144*this.chunkMultiplier_<33554432&&(this.chunkMultiplier_*=2)},t.prototype.fetchMetadata_=function(){var t=this;this.resolveToken_(function(e){var n=yt(t.authWrapper_,t.location_,t.mappings_),r=t.authWrapper_.makeRequest(n,e);t.request_=r,r.getPromise().then(function(e){t.request_=null,t.metadata_=e,t.transition_(A.SUCCESS)},t.metadataErrorHandler_)})},t.prototype.oneShotUpload_=function(){var t=this;this.resolveToken_(function(e){var n=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"},s=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();a["Content-Type"]="multipart/related; boundary="+s;var u=_t(e,r,i),l=et(u,n),c=ht.getBlob("--"+s+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+l+"\r\n--"+s+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",r,"\r\n--"+s+"--");if(null===c)throw m();var h={name:u.fullPath},d=Z(o),p=t.maxUploadRetryTime(),f=new pt(d,"POST",mt(t,n),p);return f.urlParams=h,f.headers=a,f.body=c.uploadData(),f.errorHandler=vt(e),f}(t.authWrapper_,t.location_,t.mappings_,t.blob_,t.metadata_),r=t.authWrapper_.makeRequest(n,e);t.request_=r,r.getPromise().then(function(e){t.request_=null,t.metadata_=e,t.updateProgress_(t.blob_.size()),t.transition_(A.SUCCESS)},t.errorHandler_)})},t.prototype.updateProgress_=function(t){var e=this.transferred_;this.transferred_=t,this.transferred_!==e&&this.notifyObservers_()},t.prototype.transition_=function(t){if(this.state_!==t)switch(t){case A.CANCELING:case A.PAUSING:this.state_=t,null!==this.request_&&this.request_.cancel();break;case A.RUNNING:var e=this.state_===A.PAUSED;this.state_=t,e&&(this.notifyObservers_(),this.start_());break;case A.PAUSED:this.state_=t,this.notifyObservers_();break;case A.CANCELED:this.error_=f(),this.state_=t,this.notifyObservers_();break;case A.ERROR:case A.SUCCESS:this.state_=t,this.notifyObservers_()}},t.prototype.completeTransitions_=function(){switch(this.state_){case A.PAUSING:this.transition_(A.PAUSED);break;case A.CANCELING:this.transition_(A.CANCELED);break;case A.RUNNING:this.start_()}},Object.defineProperty(t.prototype,"snapshot",{get:function(){var t=O(this.state_);return new Et(this.transferred_,this.blob_.size(),t,this.metadata_,this,this.ref_)},enumerable:!0,configurable:!0}),t.prototype.on=function(t,e,n,r){void 0===e&&(e=void 0),void 0===n&&(n=void 0),void 0===r&&(r=void 0);var i="Expected a function or an Object with one of `next`, `error`, `complete` properties.",o=lt(!0).validator,a=ut(null,!0).validator;function s(t){try{return void o(t)}catch(t){}try{if(a(t),!(F(t.next)||F(t.error)||F(t.complete)))throw"";return}catch(t){throw i}}rt("on",[ot(function(e){if(t!==C.STATE_CHANGED)throw"Expected one of the event types: ["+C.STATE_CHANGED+"]."}),ut(s,!0),lt(!0),lt(!0)],arguments);var u=this;function l(t){return function(e,n,i){null!==t&&rt("on",t,arguments);var o=new xt(e,n,r);return u.addObserver_(o),function(){u.removeObserver_(o)}}}var c=[ut(function(t){if(null===t)throw i;s(t)}),lt(!0),lt(!0)];return F(e)||F(n)||F(r)?l(null)(e,n,r):l(c)},t.prototype.then=function(t,e){return this.promise_.then(t,e)},t.prototype.catch=function(t){return this.then(null,t)},t.prototype.addObserver_=function(t){this.observers_.push(t),this.notifyObserver_(t)},t.prototype.removeObserver_=function(t){var e,n;-1!==(n=(e=this.observers_).indexOf(t))&&e.splice(n,1)},t.prototype.notifyObservers_=function(){var t=this;this.finishPromise_(),Array.prototype.slice.call(this.observers_).forEach(function(e){t.notifyObserver_(e)})},t.prototype.finishPromise_=function(){if(null!==this.resolve_){var t=!0;switch(O(this.state_)){case P.SUCCESS:St(this.resolve_.bind(null,this.snapshot))();break;case P.CANCELED:case P.ERROR:St(this.reject_.bind(null,this.error_))();break;default:t=!1}t&&(this.resolve_=null,this.reject_=null)}},t.prototype.notifyObserver_=function(t){switch(O(this.state_)){case P.RUNNING:case P.PAUSED:null!==t.next&&St(t.next.bind(t,this.snapshot))();break;case P.SUCCESS:null!==t.complete&&St(t.complete.bind(t))();break;case P.CANCELED:case P.ERROR:null!==t.error&&St(t.error.bind(t,this.error_))();break;default:null!==t.error&&St(t.error.bind(t,this.error_))()}},t.prototype.resume=function(){rt("resume",[],arguments);var t=this.state_===A.PAUSED||this.state_===A.PAUSING;return t&&this.transition_(A.RUNNING),t},t.prototype.pause=function(){rt("pause",[],arguments);var t=this.state_===A.RUNNING;return t&&this.transition_(A.PAUSING),t},t.prototype.cancel=function(){rt("cancel",[],arguments);var t=this.state_===A.RUNNING||this.state_===A.PAUSING;return t&&this.transition_(A.CANCELING),t},t}(),Mt=function(){function t(t,e){this.authWrapper=t,this.location=e instanceof X?e:X.makeFromUrl(e)}return t.prototype.toString=function(){return rt("toString",[],arguments),"gs://"+this.location.bucket+"/"+this.location.path},t.prototype.newRef=function(e,n){return new t(e,n)},t.prototype.mappings=function(){return function(){if(tt)return tt;var t=[];t.push(new $("bucket")),t.push(new $("generation")),t.push(new $("metageneration")),t.push(new $("name","fullPath",!0));var e=new $("name");e.xform=function(t,e){return function(t){return!G(t)||t.length<2?t:Y(t=t)}(e)},t.push(e);var n=new $("size");return n.xform=function(t,e){return k(e)?+e:e},t.push(n),t.push(new $("timeCreated")),t.push(new $("updated")),t.push(new $("md5Hash",null,!0)),t.push(new $("cacheControl",null,!0)),t.push(new $("contentDisposition",null,!0)),t.push(new $("contentEncoding",null,!0)),t.push(new $("contentLanguage",null,!0)),t.push(new $("contentType",null,!0)),t.push(new $("metadata","customMetadata",!0)),t.push(new $("downloadTokens","downloadURLs",!1,function(t,e){if(!(G(e)&&e.length>0))return[];var n=encodeURIComponent;return e.split(",").map(function(e){var r,i=t.fullPath;return r="/b/"+n(t.bucket)+"/o/"+n(i),"https://firebasestorage.googleapis.com"+o+r+Q({alt:"media",token:e})})})),tt=t}()},t.prototype.child=function(t){rt("child",[ot()],arguments);var e=function(t,e){var n=e.split("/").filter(function(t){return t.length>0}).join("/");return 0===t.length?n:t+"/"+n}(this.location.path,t),n=new X(this.location.bucket,e);return this.newRef(this.authWrapper,n)},Object.defineProperty(t.prototype,"parent",{get:function(){var t=function(t){if(0==t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this.location.path);if(null===t)return null;var e=new X(this.location.bucket,t);return this.newRef(this.authWrapper,e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){var t=new X(this.location.bucket,"");return this.newRef(this.authWrapper,t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this.location.bucket},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this.location.path},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return Y(this.location.path)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"storage",{get:function(){return this.authWrapper.service()},enumerable:!0,configurable:!0}),t.prototype.put=function(t,e){return void 0===e&&(e=null),rt("put",[new it(function(t){if(!(t instanceof Uint8Array||t instanceof ArrayBuffer||z()&&t instanceof Blob))throw"Expected Blob or File."}),at(!0)],arguments),this.throwIfRoot_("put"),new Tt(this,this.authWrapper,this.location,this.mappings(),new ht(t),e)},t.prototype.putString=function(t,e,n){void 0===e&&(e=b.RAW),rt("putString",[ot(),ot(w,!0),at(!0)],arguments),this.throwIfRoot_("putString");var r=E(e,t),i=I(n);return!k(i.contentType)&&k(r.contentType)&&(i.contentType=r.contentType),new Tt(this,this.authWrapper,this.location,this.mappings(),new ht(r.data,!0),i)},t.prototype.delete=function(){rt("delete",[],arguments),this.throwIfRoot_("delete");var t=this;return this.authWrapper.getAuthToken().then(function(e){var n=function(t,e){var n=K(e.fullServerUrl()),r=t.maxOperationRetryTime(),i=new pt(n,"DELETE",function(t,e){},r);return i.successCodes=[200,204],i.errorHandler=gt(e),i}(t.authWrapper,t.location);return t.authWrapper.makeRequest(n,e).getPromise()})},t.prototype.getMetadata=function(){rt("getMetadata",[],arguments),this.throwIfRoot_("getMetadata");var t=this;return this.authWrapper.getAuthToken().then(function(e){var n=yt(t.authWrapper,t.location,t.mappings());return t.authWrapper.makeRequest(n,e).getPromise()})},t.prototype.updateMetadata=function(t){rt("updateMetadata",[at()],arguments),this.throwIfRoot_("updateMetadata");var e=this;return this.authWrapper.getAuthToken().then(function(n){var r=function(t,e,n,r){var i=K(e.fullServerUrl()),o=et(n,r),a=t.maxOperationRetryTime(),s=new pt(i,"PATCH",mt(t,r),a);return s.headers={"Content-Type":"application/json; charset=utf-8"},s.body=o,s.errorHandler=gt(e),s}(e.authWrapper,e.location,t,e.mappings());return e.authWrapper.makeRequest(r,n).getPromise()})},t.prototype.getDownloadURL=function(){return rt("getDownloadURL",[],arguments),this.throwIfRoot_("getDownloadURL"),this.getMetadata().then(function(t){var e=t.downloadURLs[0];if(k(e))return e;throw new c(h.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")})},t.prototype.throwIfRoot_=function(t){if(""===this.location.path)throw function(t){return new c(h.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(t)},t}(),Ct=function(){function t(t){this.promise_=function(t){return Promise.reject(t)}(t)}return t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){void 0===t&&(t=!1)},t}(),At=function(){function t(){this.map_={},this.id_=l}return t.prototype.addRequest=function(t){var e=this.id_;this.id_++,this.map_[e]=t;var n=this;function r(){delete n.map_[e]}t.getPromise().then(r,r)},t.prototype.clear=function(){L(this.map_,function(t,e){e&&e.cancel(!0)}),this.map_={}},t}(),Pt=function(){function t(e,n,r,i,o){if(this.bucket_=null,this.deleted_=!1,this.app_=e,null!==this.app_){var a=this.app_.options;k(a)&&(this.bucket_=t.extractBucket_(a))}this.storageRefMaker_=n,this.requestMaker_=r,this.pool_=o,this.service_=i,this.maxOperationRetryTime_=s,this.maxUploadRetryTime_=u,this.requestMap_=new At}return t.extractBucket_=function(t){var e=t.storageBucket||null;return null==e?null:X.makeFromBucketSpec(e).bucket},t.prototype.getAuthToken=function(){return null!==this.app_&&k(this.app_.INTERNAL)&&k(this.app_.INTERNAL.getToken)?this.app_.INTERNAL.getToken().then(function(t){return null!==t?t.accessToken:null},function(t){return null}):D(null)},t.prototype.bucket=function(){if(this.deleted_)throw g();return this.bucket_},t.prototype.service=function(){return this.service_},t.prototype.makeStorageReference=function(t){return this.storageRefMaker_(this,t)},t.prototype.makeRequest=function(t,e){if(this.deleted_)return new Ct(g());var n=this.requestMaker_(t,e,this.pool_);return this.requestMap_.addRequest(n),n},t.prototype.deleteApp=function(){this.deleted_=!0,this.app_=null,this.requestMap_.clear()},t.prototype.maxUploadRetryTime=function(){return this.maxUploadRetryTime_},t.prototype.setMaxUploadRetryTime=function(t){this.maxUploadRetryTime_=t},t.prototype.maxOperationRetryTime=function(){return this.maxOperationRetryTime_},t.prototype.setMaxOperationRetryTime=function(t){this.maxOperationRetryTime_=t},t}(),Ot=function(){function t(t,e,n,r,i,o,a,s,u,l,c){this.pendingXhr_=null,this.backoffId_=null,this.resolve_=null,this.reject_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=a,this.errorCallback_=s,this.progressCallback_=l,this.timeout_=u,this.pool_=c;var h=this;this.promise_=N(function(t,e){h.resolve_=t,h.reject_=e,h.start_()})}return t.prototype.start_=function(){var t=this;function e(e,n){var r,i=t.resolve_,o=t.reject_,a=n.xhr;if(n.wasSuccessCode)try{var s=t.callback_(a,a.getResponseText());F(s)?i(s):i()}catch(t){o(t)}else null!==a?((r=p()).setServerResponseProp(a.getResponseText()),o(t.errorCallback_?t.errorCallback_(a,r):r)):o(r=n.canceled?t.appDelete_?g():f():new c(h.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again."))}this.canceled_?e(0,new Rt(!1,null,!0)):this.backoffId_=function(t,e,n){var r=1,i=null,o=!1,a=0;function s(){return 2===a}var u=!1;function l(){u||(u=!0,e.apply(null,arguments))}function c(e){i=setTimeout(function(){i=null,t(h,s())},e)}function h(t){for(var e,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];u||(t?l.apply(null,arguments):s()||o?l.apply(null,arguments):(r<64&&(r*=2),1===a?(a=2,e=0):e=1e3*(r+Math.random()),c(e)))}var d=!1;function p(t){d||(d=!0,u||(null!==i?(t||(a=2),clearTimeout(i),c(0)):t||(a=1)))}return c(0),setTimeout(function(){o=!0,p(!0)},n),p}(function(e,n){if(n)e(!1,new Rt(!1,null,!0));else{var r=t.pool_.createXhrIo();t.pendingXhr_=r,null!==t.progressCallback_&&r.addUploadProgressListener(i),r.send(t.url_,t.method_,t.body_,t.headers_).then(function(n){null!==t.progressCallback_&&n.removeUploadProgressListener(i),t.pendingXhr_=null;var r=(n=n).getErrorCode()===H.NO_ERROR,o=n.getStatus();if(r&&!t.isRetryStatusCode_(o)){var a=dt(t.successCodes_,o);e(!0,new Rt(a,n))}else{var s=n.getErrorCode()===H.ABORT;e(!1,new Rt(!1,null,s))}})}function i(e){null!==t.progressCallback_&&t.progressCallback_(e.loaded,e.lengthComputable?e.total:-1)}},e,this.timeout_)},t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingXhr_&&this.pendingXhr_.abort()},t.prototype.isRetryStatusCode_=function(t){var e=t>=500&&t<600,n=dt([408,429],t),r=dt(this.additionalRetryCodes_,t);return e||n||r},t}(),Rt=function(t,e,n){this.wasSuccessCode=t,this.xhr=e,this.canceled=!!n};function Lt(t,e,n){var i=Q(t.urlParams),o=t.url+i,a=I(t.headers);return function(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(a,e),function(t){t["X-Firebase-Storage-Version"]="webjs/"+(void 0!==r.default?r.default.SDK_VERSION:"AppManager")}(a),new Ot(o,t.method,a,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,n)}var It=function(){function t(t,e,n){if(this.bucket_=null,this.authWrapper_=new Pt(t,function(t,e){return new Mt(t,e)},Lt,this,e),this.app_=t,null!=n)this.bucket_=X.makeFromBucketSpec(n);else{var r=this.authWrapper_.bucket();null!=r&&(this.bucket_=new X(r,""))}this.internals_=new Nt(this)}return t.prototype.ref=function(t){if(rt("ref",[ot(function(t){if(/^[A-Za-z]+:\/\//.test(t))throw"Expected child path but got a URL, use refFromURL instead."},!0)],arguments),null==this.bucket_)throw new Error("No Storage Bucket defined in Firebase Options.");var e=new Mt(this.authWrapper_,this.bucket_);return null!=t?e.child(t):e},t.prototype.refFromURL=function(t){return rt("refFromURL",[ot(function(t){if(!/^[A-Za-z]+:\/\//.test(t))throw"Expected full URL but got a child path, use ref instead.";try{X.makeFromUrl(t)}catch(t){throw"Expected valid full URL but got an invalid one."}},!1)],arguments),new Mt(this.authWrapper_,t)},Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this.authWrapper_.maxUploadRetryTime()},enumerable:!0,configurable:!0}),t.prototype.setMaxUploadRetryTime=function(t){rt("setMaxUploadRetryTime",[st()],arguments),this.authWrapper_.setMaxUploadRetryTime(t)},Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this.authWrapper_.maxOperationRetryTime()},enumerable:!0,configurable:!0}),t.prototype.setMaxOperationRetryTime=function(t){rt("setMaxOperationRetryTime",[st()],arguments),this.authWrapper_.setMaxOperationRetryTime(t)},Object.defineProperty(t.prototype,"app",{get:function(){return this.app_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"INTERNAL",{get:function(){return this.internals_},enumerable:!0,configurable:!0}),t}(),Nt=function(){function t(t){this.service_=t}return t.prototype.delete=function(){return this.service_.authWrapper_.deleteApp(),D(void 0)},t}();n.d(e,"registerStorage",function(){return Ft});var Dt="storage";function kt(t,e,n){return new It(t,new q,n)}function Ft(t){t.INTERNAL.registerService(Dt,kt,{TaskState:P,TaskEvent:C,StringFormat:b,Storage:It,Reference:Mt},void 0,!0)}Ft(r.default)},wtYO:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("0kFh");e.DataEvent=function(){function t(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return t.prototype.getPath=function(){var t=this.snapshot.getRef();return"value"===this.eventType?t.path:t.getParent().path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+r.stringify(this.snapshot.exportVal())},t}(),e.CancelEvent=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}()},xHNN:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("cNkO"),i=n("TDTO"),o=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new r.DOMStorageWrapper(e)}}catch(t){}return new i.MemoryStorage};e.PersistentStorage=o("localStorage"),e.SessionStorage=o("sessionStorage")},xTla:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r="function"==typeof Symbol&&Symbol.observable||"@@observable"},xXU7:function(t,e,n){"use strict";var r=n("6blF"),i=n("T1DM"),o=n("isby");function a(t,e){var n;return void 0===t&&(t=0),void 0===e&&(e=i.async),n=t,(Object(o.a)(n)||!(n-parseFloat(n)+1>=0)||t<0)&&(t=0),e&&"function"==typeof e.schedule||(e=i.async),new r.a(function(n){return n.add(e.schedule(s,t,{subscriber:n,counter:0,period:t})),n})}function s(t){var e=t.subscriber,n=t.counter,r=t.period;e.next(n),this.schedule({subscriber:e,counter:n+1,period:r},r)}n.d(e,"interval",function(){return a})},y3By:function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o});var r=n("+umK");function i(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return o(t)}function o(t){return t?1===t.length?t[0]:function(e){return t.reduce(function(t,e){return e(t)},e)}:r.a}},yGWI:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("mrSG"),i=n("FFOo");function o(){return function(t){return t.lift(new a(t))}}var a=function(){function t(t){this.connectable=t}return t.prototype.call=function(t,e){var n=this.connectable;n._refCount++;var r=new s(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i},t}(),s=function(t){function e(e,n){var r=t.call(this,e)||this;return r.connectable=n,r}return r.__extends(e,t),e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._refCount;if(e<=0)this.connection=null;else if(t._refCount=e-1,e>1)this.connection=null;else{var n=this.connection,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}else this.connection=null},e}(i.a)},ynW9:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("ZyYn"),i=n("POCr");e.forceLongPolling=function(){r.WebSocketConnection.forceDisallow(),i.BrowserPollConnection.forceAllow()},e.forceWebSockets=function(){i.BrowserPollConnection.forceDisallow()},e.isWebSocketsAvailable=function(){return r.WebSocketConnection.isAvailable()},e.setSecurityDebugCallback=function(t,e){t.repo.persistentConnection_.securityDebugCallback_=e},e.stats=function(t,e){t.repo.stats(e)},e.statsIncrementCounter=function(t,e){t.repo.statsIncrementCounter(e)},e.dataUpdateCount=function(t){return t.repo.dataUpdateCount},e.interceptServerData=function(t,e){return t.repo.interceptServerData_(e)}},"z/SJ":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("V9+g");e.assert=function(t,n){if(!t)throw e.assertionError(n)},e.assertionError=function(t){return new Error("Firebase Database ("+r.CONSTANTS.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)}},zUnb:function(t,e,n){"use strict";n.r(e);var r=n("CcnG"),o=function(){},a=n("JR7u"),s=function(){function t(){this.loadedFeature="product"}return t.prototype.ngOnInit=function(){a.initializeApp({apiKey:"AIzaSyBm55zsXJ3G2IR4mmUSWlwTmOD0AlxNeSo",authDomain:"lapr5-74597.firebaseapp.com",databaseURL:"https://lapr5-74597.firebaseio.com",projectId:"lapr5-74597",storageBucket:"lapr5-74597.appspot.com",messagingSenderId:"1051470391729"})},t.prototype.onNavigate=function(t){this.loadedFeature=t},t}(),u=n("pMnS"),l=n("K9Ia"),c=n("mrSG"),h=n("Ip0R"),d=n("ZYjt"),p=function(){function t(t,e,n,r,i,o){var a=this;this.toastId=t,this.config=e,this.message=n,this.title=r,this.toastType=i,this.toastRef=o,this._onTap=new l.a,this._onAction=new l.a,this.toastRef.afterClosed().subscribe(function(){a._onAction.complete(),a._onTap.complete()})}return t.prototype.triggerTap=function(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()},t.prototype.onTap=function(){return this._onTap.asObservable()},t.prototype.triggerAction=function(t){this._onAction.next(t)},t.prototype.onAction=function(){return this._onAction.asObservable()},t}(),f=new r.s("ToastConfig"),m=function(){function t(t,e){this.component=t,this.injector=e}return t.prototype.attach=function(t,e){return this._attachedHost=t,t.attach(this,e)},t.prototype.detach=function(){var t=this._attachedHost;if(t)return this._attachedHost=void 0,t.detach()},Object.defineProperty(t.prototype,"isAttached",{get:function(){return null!=this._attachedHost},enumerable:!0,configurable:!0}),t.prototype.setAttachedHost=function(t){this._attachedHost=t},t}(),v=function(t){function e(e,n,r){var i=t.call(this)||this;return i._hostDomElement=e,i._componentFactoryResolver=n,i._appRef=r,i}return Object(c.__extends)(e,t),e.prototype.attachComponentPortal=function(t,e){var n,r=this,i=this._componentFactoryResolver.resolveComponentFactory(t.component);return n=i.create(t.injector),this._appRef.attachView(n.hostView),this.setDisposeFn(function(){r._appRef.detachView(n.hostView),n.destroy()}),e?this._hostDomElement.insertBefore(this._getComponentRootNode(n),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(n)),n},e.prototype._getComponentRootNode=function(t){return t.hostView.rootNodes[0]},e}(function(){function t(){}return t.prototype.attach=function(t,e){return this._attachedPortal=t,this.attachComponentPortal(t,e)},t.prototype.detach=function(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)},t.prototype.setDisposeFn=function(t){this._disposeFn=t},t}()),g=function(){function t(t){this._document=t}return t.prototype.ngOnDestroy=function(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)},t.prototype.getContainerElement=function(){return this._containerElement||this._createContainer(),this._containerElement},t.prototype._createContainer=function(){var t=this._document.createElement("div");t.classList.add("overlay-container"),this._document.body.appendChild(t),this._containerElement=t},t.ngInjectableDef=Object(r.W)({factory:function(){return new t(Object(r.Aa)(h.c))},token:t,providedIn:"root"}),t}(),y=function(){function t(t){this._portalHost=t}return t.prototype.attach=function(t,e){return void 0===e&&(e=!0),this._portalHost.attach(t,e)},t.prototype.detach=function(){return this._portalHost.detach()},t}(),_=function(){function t(t,e,n,r){this._overlayContainer=t,this._componentFactoryResolver=e,this._appRef=n,this._document=r,this._paneElements=new Map}return t.prototype.create=function(t,e){return this._createOverlayRef(this.getPaneElement(t,e))},t.prototype.getPaneElement=function(t,e){return void 0===t&&(t=""),this._paneElements.get(e)||this._paneElements.set(e,{}),this._paneElements.get(e)[t]||(this._paneElements.get(e)[t]=this._createPaneElement(t,e)),this._paneElements.get(e)[t]},t.prototype._createPaneElement=function(t,e){var n=this._document.createElement("div");return n.id="toast-container",n.classList.add(t),n.classList.add("toast-container"),e?e.getContainerElement().appendChild(n):this._overlayContainer.getContainerElement().appendChild(n),n},t.prototype._createPortalHost=function(t){return new v(t,this._componentFactoryResolver,this._appRef)},t.prototype._createOverlayRef=function(t){return new y(this._createPortalHost(t))},t.ngInjectableDef=Object(r.W)({factory:function(){return new t(Object(r.Aa)(g),Object(r.Aa)(r.k),Object(r.Aa)(r.g),Object(r.Aa)(h.c))},token:t,providedIn:"root"}),t}(),b=function(){function t(t){this._overlayRef=t,this._afterClosed=new l.a,this._activate=new l.a,this._manualClose=new l.a,this._resetTimeout=new l.a}return t.prototype.manualClose=function(){this._manualClose.next(),this._manualClose.complete()},t.prototype.manualClosed=function(){return this._manualClose.asObservable()},t.prototype.timeoutReset=function(){return this._resetTimeout.asObservable()},t.prototype.close=function(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete()},t.prototype.afterClosed=function(){return this._afterClosed.asObservable()},t.prototype.isInactive=function(){return this._activate.isStopped},t.prototype.activate=function(){this._activate.next(),this._activate.complete()},t.prototype.afterActivate=function(){return this._activate.asObservable()},t.prototype.resetTimeout=function(){this._resetTimeout.next()},t}(),w=function(){function t(t,e){this._toastPackage=t,this._parentInjector=e}return t.prototype.get=function(t,e,n){return t===p?this._toastPackage:this._parentInjector.get(t,e,n)},t}(),x=function(){function t(t,e,n,r,i){this.overlay=e,this._injector=n,this.sanitizer=r,this.ngZone=i,this.currentlyActive=0,this.toasts=[],this.index=0,this.toastrConfig=Object(c.__assign)({},t.default,t.config),t.config.iconClasses&&(this.toastrConfig.iconClasses=Object(c.__assign)({},t.default.iconClasses,t.config.iconClasses))}return t.prototype.show=function(t,e,n,r){return void 0===n&&(n={}),void 0===r&&(r=""),this._preBuildNotification(r,t,e,this.applyConfig(n))},t.prototype.success=function(t,e,n){return void 0===n&&(n={}),this._preBuildNotification(this.toastrConfig.iconClasses.success||"",t,e,this.applyConfig(n))},t.prototype.error=function(t,e,n){return void 0===n&&(n={}),this._preBuildNotification(this.toastrConfig.iconClasses.error||"",t,e,this.applyConfig(n))},t.prototype.info=function(t,e,n){return void 0===n&&(n={}),this._preBuildNotification(this.toastrConfig.iconClasses.info||"",t,e,this.applyConfig(n))},t.prototype.warning=function(t,e,n){return void 0===n&&(n={}),this._preBuildNotification(this.toastrConfig.iconClasses.warning||"",t,e,this.applyConfig(n))},t.prototype.clear=function(t){var e,n;try{for(var r=Object(c.__values)(this.toasts),i=r.next();!i.done;i=r.next()){var o=i.value;if(void 0!==t){if(o.toastId===t)return void o.toastRef.manualClose()}else o.toastRef.manualClose()}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}},t.prototype.remove=function(t){var e=this._findToast(t);if(!e)return!1;if(e.activeToast.toastRef.close(),this.toasts.splice(e.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length)return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){var n=this.toasts[this.currentlyActive].toastRef;n.isInactive()||(this.currentlyActive=this.currentlyActive+1,n.activate())}return!0},t.prototype.findDuplicate=function(t,e){for(var n=0;n<this.toasts.length;n++){var r=this.toasts[n];if(r.message===t)return e&&r.toastRef.componentInstance.resetTimeout&&r.toastRef.resetTimeout(),r}return null},t.prototype.applyConfig=function(t){return void 0===t&&(t={}),Object(c.__assign)({},this.toastrConfig,t)},t.prototype._findToast=function(t){for(var e=0;e<this.toasts.length;e++)if(this.toasts[e].toastId===t)return{index:e,activeToast:this.toasts[e]};return null},t.prototype._preBuildNotification=function(t,e,n,r){var i=this;return r.onActivateTick?this.ngZone.run(function(){return i._buildNotification(t,e,n,r)}):this._buildNotification(t,e,n,r)},t.prototype._buildNotification=function(t,e,n,i){var o=this;if(!i.toastComponent)throw new Error("toastComponent required");if(e&&this.toastrConfig.preventDuplicates){var a=this.findDuplicate(e,this.toastrConfig.resetTimeoutOnDuplicate);if(null!==a)return a}this.previousToastMessage=e;var s=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(s=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));var u=this.overlay.create(i.positionClass,this.overlayContainer);this.index=this.index+1;var l=e;e&&i.enableHtml&&(l=this.sanitizer.sanitize(r.K.HTML,e));var c=new b(u),h=new p(this.index,i,l,n,t,c),d=new w(h,this._injector),f=new m(i.toastComponent,d),v=u.attach(f,this.toastrConfig.newestOnTop);c.componentInstance=v._component;var g={toastId:this.index,message:e||"",toastRef:c,onShown:c.afterActivate(),onHidden:c.afterClosed(),onTap:h.onTap(),onAction:h.onAction(),portal:v};return s||setTimeout(function(){g.toastRef.activate(),o.currentlyActive=o.currentlyActive+1}),this.toasts.push(g),g},t.ngInjectableDef=Object(r.W)({factory:function(){return new t(Object(r.Aa)(f),Object(r.Aa)(_),Object(r.Aa)(r.q),Object(r.Aa)(d.c),Object(r.Aa)(r.C))},token:t,providedIn:"root"}),t}(),E=function(){function t(t,e,n){var r=this;this.toastrService=t,this.toastPackage=e,this.ngZone=n,this.width=-1,this.toastClasses="",this.state={value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}},this.message=e.message,this.title=e.title,this.options=e.config,this.originalTimeout=e.config.timeOut,this.toastClasses=e.toastType+" "+e.config.toastClass,this.sub=e.toastRef.afterActivate().subscribe(function(){r.activateToast()}),this.sub1=e.toastRef.manualClosed().subscribe(function(){r.remove()}),this.sub2=e.toastRef.timeoutReset().subscribe(function(){r.resetTimeout()})}return t.prototype.ngOnDestroy=function(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)},t.prototype.activateToast=function(){var t=this;this.state=Object(c.__assign)({},this.state,{value:"active"}),!this.options.disableTimeOut&&this.options.timeOut&&(this.outsideTimeout(function(){return t.remove()},this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(function(){return t.updateProgress()},10))},t.prototype.updateProgress=function(){if(0!==this.width&&100!==this.width&&this.options.timeOut){var t=(new Date).getTime();this.width=(this.hideTime-t)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}},t.prototype.resetTimeout=function(){var t=this;clearTimeout(this.timeout),clearInterval(this.intervalId),this.state=Object(c.__assign)({},this.state,{value:"active"}),this.outsideTimeout(function(){return t.remove()},this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(function(){return t.updateProgress()},10)},t.prototype.remove=function(){var t=this;"removed"!==this.state.value&&(clearTimeout(this.timeout),this.state=Object(c.__assign)({},this.state,{value:"removed"}),this.outsideTimeout(function(){return t.toastrService.remove(t.toastPackage.toastId)},+this.toastPackage.config.easeTime))},t.prototype.tapToast=function(){"removed"!==this.state.value&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())},t.prototype.stickAround=function(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)},t.prototype.delayedHideToast=function(){var t=this;this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state.value||(this.outsideTimeout(function(){return t.remove()},this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(function(){return t.updateProgress()},10))},t.prototype.outsideTimeout=function(t,e){var n=this;this.ngZone?this.ngZone.runOutsideAngular(function(){return n.timeout=setTimeout(function(){return n.runInsideAngular(t)},e)}):this.timeout=setTimeout(function(){return t()},e)},t.prototype.outsideInterval=function(t,e){var n=this;this.ngZone?this.ngZone.runOutsideAngular(function(){return n.intervalId=setInterval(function(){return n.runInsideAngular(t)},e)}):this.intervalId=setInterval(function(){return t()},e)},t.prototype.runInsideAngular=function(t){this.ngZone?this.ngZone.run(function(){return t()}):t()},t}(),S=Object(c.__assign)({},{maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,resetTimeoutOnDuplicate:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"toast",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing"},{toastComponent:E}),T=function(){function t(){}return t.forRoot=function(e){return void 0===e&&(e={}),{ngModule:t,providers:[{provide:f,useValue:{default:S,config:e}}]}},t}(),M=r.Ra({encapsulation:2,styles:[],data:{animation:[{type:7,name:"flyInOut",definitions:[{type:0,name:"inactive",styles:{type:6,styles:{display:"none",opacity:0},offset:null},options:void 0},{type:0,name:"active",styles:{type:6,styles:{},offset:null},options:void 0},{type:0,name:"removed",styles:{type:6,styles:{opacity:0},offset:null},options:void 0},{type:1,expr:"inactive => active",animation:{type:4,styles:null,timings:"{{ easeTime }}ms {{ easing }}"},options:null},{type:1,expr:"active => removed",animation:{type:4,styles:null,timings:"{{ easeTime }}ms {{ easing }}"},options:null}],options:{}}]}});function C(t){return r.lb(0,[(t()(),r.Ta(0,0,null,null,2,"button",[["aria-label","Close"],["class","toast-close-button"]],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.remove()&&r),r},null,null)),(t()(),r.Ta(1,0,null,null,1,"span",[["aria-hidden","true"]],null,null,null,null,null)),(t()(),r.jb(-1,null,["\xd7"]))],null,null)}function A(t){return r.lb(0,[(t()(),r.Ta(0,0,null,null,1,"div",[],[[8,"className",0],[1,"aria-label",0]],null,null,null,null)),(t()(),r.jb(1,null,[" "," "]))],null,function(t,e){var n=e.component;t(e,0,0,n.options.titleClass,n.title),t(e,1,0,n.title)})}function P(t){return r.lb(0,[(t()(),r.Ta(0,0,null,null,0,"div",[["aria-live","polite"],["role","alertdialog"]],[[8,"className",0],[8,"innerHTML",1]],null,null,null,null))],null,function(t,e){var n=e.component;t(e,0,0,n.options.messageClass,n.message)})}function O(t){return r.lb(0,[(t()(),r.Ta(0,0,null,null,1,"div",[["aria-live","polite"],["role","alertdialog"]],[[8,"className",0],[1,"aria-label",0]],null,null,null,null)),(t()(),r.jb(1,null,[" "," "]))],null,function(t,e){var n=e.component;t(e,0,0,n.options.messageClass,n.message),t(e,1,0,n.message)})}function R(t){return r.lb(0,[(t()(),r.Ta(0,0,null,null,1,"div",[],null,null,null,null,null)),(t()(),r.Ta(1,0,null,null,0,"div",[["class","toast-progress"]],[[4,"width",null]],null,null,null,null))],null,function(t,e){t(e,1,0,e.component.width+"%")})}function L(t){return r.lb(0,[(t()(),r.Ka(16777216,null,null,1,null,C)),r.Sa(1,16384,null,0,h.i,[r.S,r.P],{ngIf:[0,"ngIf"]},null),(t()(),r.Ka(16777216,null,null,1,null,A)),r.Sa(3,16384,null,0,h.i,[r.S,r.P],{ngIf:[0,"ngIf"]},null),(t()(),r.Ka(16777216,null,null,1,null,P)),r.Sa(5,16384,null,0,h.i,[r.S,r.P],{ngIf:[0,"ngIf"]},null),(t()(),r.Ka(16777216,null,null,1,null,O)),r.Sa(7,16384,null,0,h.i,[r.S,r.P],{ngIf:[0,"ngIf"]},null),(t()(),r.Ka(16777216,null,null,1,null,R)),r.Sa(9,16384,null,0,h.i,[r.S,r.P],{ngIf:[0,"ngIf"]},null)],function(t,e){var n=e.component;t(e,1,0,n.options.closeButton),t(e,3,0,n.title),t(e,5,0,n.message&&n.options.enableHtml),t(e,7,0,n.message&&!n.options.enableHtml),t(e,9,0,n.options.progressBar)},null)}var I=r.Pa("[toast-component]",E,function(t){return r.lb(0,[(t()(),r.Ta(0,0,null,null,1,"div",[["toast-component",""]],[[8,"className",0],[40,"@flyInOut",0]],[[null,"click"],[null,"mouseenter"],[null,"mouseleave"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==r.cb(t,1).tapToast()&&i),"mouseenter"===e&&(i=!1!==r.cb(t,1).stickAround()&&i),"mouseleave"===e&&(i=!1!==r.cb(t,1).delayedHideToast()&&i),i},L,M)),r.Sa(1,180224,null,0,E,[x,p,r.C],null,null)],null,function(t,e){t(e,0,0,r.cb(e,1).toastClasses,r.cb(e,1).state)})},{},{},[]),N=function(){function t(){}return t.prototype.ngOnInit=function(){},t}(),D=r.Ra({encapsulation:0,styles:[[""]],data:{}});function k(t){return r.lb(0,[(t()(),r.Ta(0,0,null,null,1,"h2",[],null,null,null,null,null)),(t()(),r.jb(-1,null,["Welcome to SiCProductions"]))],null,null)}var F=r.Pa("app-home",N,function(t){return r.lb(0,[(t()(),r.Ta(0,0,null,null,1,"app-home",[],null,null,null,k,D)),r.Sa(1,114688,null,0,N,[],null,null)],function(t,e){t(e,1,0)},null)},{},{},[]),j=n("gIcY"),U=n("ozzT"),B=n("IA05"),G=n("QJ7G"),V=function(){function t(t,e,n,r){this.slService=t,this.productService=e,this.router=n,this.route=r,this.editMode=!1}return t.prototype.ngOnInit=function(){var t=this;this.route.params.subscribe(function(){t.productService.getProducts().then(function(e){t.products=e,console.log(t.products)})}),this.subscription=this.slService.startedEditing.subscribe(function(e){t.editedItemIndex=e,t.editMode=!0,t.editedItem=t.slService.getProduct(e),t.finalProduct=t.slService.getProduct(e),t.heightSliderVal=t.editedItem.dimensions.minHeight,t.depthSliderVal=t.editedItem.dimensions.minDepth,t.widthSliderVal=t.editedItem.dimensions.minWidth,t.slForm.setValue({name:t.editedItem.name})})},t.prototype.onSubmit=function(t){this.editedItem.dimensions.minHeight=this.heightSliderVal,this.editedItem.dimensions.minDepth=this.depthSliderVal,this.editedItem.dimensions.minWidth=this.widthSliderVal,this.editedItem.dimensions.maxHeight=this.heightSliderVal,this.editedItem.dimensions.maxDepth=this.depthSliderVal,this.editedItem.dimensions.maxWidth=this.widthSliderVal;var e=t.value;console.log("NAME:"+e.name);var n=new B.a(e.name,this.editedItem.productId,this.editedItem.possibleMaterialFinishes,this.editedItem.products,this.editedItem.dimensions,this.editedItem.category);console.log(n.name),this.editMode?this.slService.updateProduct(this.editedItemIndex,n):this.slService.addProduct(n),this.editMode=!1,t.reset(),this.widthSliderVal=0,this.ngOnInit()},t.prototype.onClear=function(){this.slForm.reset(),this.editMode=!1,this.ngOnInit()},t.prototype.onDelete=function(){this.slService.deleteProduct(this.editedItemIndex),this.editedItem.products.splice(0,this.editedItem.products.length),this.onClear()},t.prototype.onDeleteSubProduct=function(t){this.editedItem.products.splice(t,1)},t.prototype.onAddSubProduct=function(t){this.editedItem.products.push(this.products[t])},t.prototype.onHeightSliderChange=function(t){this.heightSliderVal=t},t.prototype.onDepthSliderChange=function(t){this.depthSliderVal=t},t.prototype.onWidthSliderChange=function(t){this.widthSliderVal=t},t.prototype.ngOnDestroy=function(){this.subscription.unsubscribe()},t}(),z=n("ZYCi"),H=r.Ra({encapsulation:0,styles:[[""]],data:{}});function W(t){return r.lb(0,[(t()(),r.Ta(0,0,null,null,8,"tr",[],null,null,null,null,null)),(t()(),r.Ta(1,0,null,null,1,"td",[],null,null,null,null,null)),(t()(),r.jb(2,null,["",""])),(t()(),r.Ta(3,0,null,null,1,"td",[],null,null,null,null,null)),(t()(),r.jb(4,null,["",""])),(t()(),r.Ta(5,0,null,null,3,"td",[],null,null,null,null,null)),(t()(),r.Ta(6,0,null,null,2,"div",[["class","col-xs-1"]],null,null,null,null,null)),(t()(),r.Ta(7,0,null,null,1,"button",[["class","btn btn-danger"],["type","button"]],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.onDeleteSubProduct(t.context.index)&&r),r},null,null)),(t()(),r.jb(-1,null,["x"]))],null,function(t,e){t(e,2,0,e.context.index+1),t(e,4,0,e.context.$implicit.name)})}function q(t){return r.lb(0,[(t()(),r.Ta(0,0,null,null,8,"tr",[],null,null,null,null,null)),(t()(),r.Ta(1,0,null,null,1,"td",[],null,null,null,null,null)),(t()(),r.jb(2,null,["",""])),(t()(),r.Ta(3,0,null,null,1,"td",[],null,null,null,null,null)),(t()(),r.jb(4,null,["",""])),(t()(),r.Ta(5,0,null,null,3,"td",[],null,null,null,null,null)),(t()(),r.Ta(6,0,null,null,2,"div",[["class","col-xs-1"]],null,null,null,null,null)),(t()(),r.Ta(7,0,null,null,1,"button",[["class","btn btn-success"],["type","button"]],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.onAddSubProduct(t.context.index)&&r),r},null,null)),(t()(),r.jb(-1,null,["v"]))],null,function(t,e){t(e,2,0,e.context.index+1),t(e,4,0,e.context.$implicit.name)})}function X(t){return r.lb(0,[(t()(),r.Ta(0,0,null,null,1,"button",[["class","btn btn-success"],["type","submit"]],null,null,null,null,null)),(t()(),r.jb(-1,null,["Update"]))],null,null)}function Y(t){return r.lb(0,[(t()(),r.Ta(0,0,null,null,1,"button",[["class","btn btn-danger"],["type","button"]],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.onDelete()&&r),r},null,null)),(t()(),r.jb(-1,null,["Delete"]))],null,null)}function K(t){return r.lb(0,[r.hb(402653184,1,{slForm:0}),(t()(),r.Ta(1,0,null,null,104,"div",[["class","row"]],null,null,null,null,null)),(t()(),r.Ta(2,0,null,null,103,"div",[["class","col-xs-12"]],null,null,null,null,null)),(t()(),r.Ta(3,0,null,null,102,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],function(t,e,n){var i=!0,o=t.component;return"submit"===e&&(i=!1!==r.cb(t,5).onSubmit(n)&&i),"reset"===e&&(i=!1!==r.cb(t,5).onReset()&&i),"ngSubmit"===e&&(i=!1!==o.onSubmit(r.cb(t,5))&&i),i},null,null)),r.Sa(4,16384,null,0,j.x,[],null,null),r.Sa(5,4210688,[[1,4],["f",4]],0,j.o,[[8,null],[8,null]],null,{ngSubmit:"ngSubmit"}),r.gb(2048,null,j.b,null,[j.o]),r.Sa(7,16384,null,0,j.n,[[4,j.b]],null,null),(t()(),r.Ta(8,0,null,null,11,"div",[["class","row"]],null,null,null,null,null)),(t()(),r.Ta(9,0,null,null,10,"div",[["class","col-sm-5 form-group"]],null,null,null,null,null)),(t()(),r.Ta(10,0,null,null,1,"label",[["for","name"]],null,null,null,null,null)),(t()(),r.jb(-1,null,["Name"])),(t()(),r.Ta(12,0,null,null,7,"input",[["class","form-control"],["id","name"],["name","name"],["ngModel",""],["required",""],["type","text"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(t,e,n){var i=!0;return"input"===e&&(i=!1!==r.cb(t,13)._handleInput(n.target.value)&&i),"blur"===e&&(i=!1!==r.cb(t,13).onTouched()&&i),"compositionstart"===e&&(i=!1!==r.cb(t,13)._compositionStart()&&i),"compositionend"===e&&(i=!1!==r.cb(t,13)._compositionEnd(n.target.value)&&i),i},null,null)),r.Sa(13,16384,null,0,j.c,[r.G,r.l,[2,j.a]],null,null),r.Sa(14,16384,null,0,j.s,[],{required:[0,"required"]},null),r.gb(1024,null,j.j,function(t){return[t]},[j.s]),r.gb(1024,null,j.k,function(t){return[t]},[j.c]),r.Sa(17,671744,null,0,j.p,[[2,j.b],[6,j.j],[8,null],[6,j.k]],{name:[0,"name"],model:[1,"model"]},null),r.gb(2048,null,j.l,null,[j.p]),r.Sa(19,16384,null,0,j.m,[[4,j.l]],null,null),(t()(),r.Ta(20,0,null,null,47,"div",[["class","row"]],null,null,null,null,null)),(t()(),r.Ta(21,0,null,null,46,"div",[["class","col-sm-5 form-group"]],null,null,null,null,null)),(t()(),r.Ta(22,0,null,null,1,"label",[["for","dimensions"]],null,null,null,null,null)),(t()(),r.jb(-1,null,["Dimensions"])),(t()(),r.Ta(24,0,null,null,43,"table",[["class","table"]],null,null,null,null,null)),(t()(),r.Ta(25,0,null,null,42,"tbody",[],null,null,null,null,null)),(t()(),r.Ta(26,0,null,null,6,"tr",[],null,null,null,null,null)),(t()(),r.Ta(27,0,null,null,1,"th",[],null,null,null,null,null)),(t()(),r.jb(-1,null,["Height"])),(t()(),r.Ta(29,0,null,null,1,"th",[],null,null,null,null,null)),(t()(),r.jb(-1,null,["Depth"])),(t()(),r.Ta(31,0,null,null,1,"th",[],null,null,null,null,null)),(t()(),r.jb(-1,null,["Width"])),(t()(),r.Ta(33,0,null,null,9,"tr",[],null,null,null,null,null)),(t()(),r.Ta(34,0,null,null,2,"td",[],null,null,null,null,null)),(t()(),r.Ta(35,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),r.jb(36,null,["",""])),(t()(),r.Ta(37,0,null,null,2,"td",[],null,null,null,null,null)),(t()(),r.Ta(38,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),r.jb(39,null,["",""])),(t()(),r.Ta(40,0,null,null,2,"td",[],null,null,null,null,null)),(t()(),r.Ta(41,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),r.jb(42,null,["",""])),(t()(),r.Ta(43,0,null,null,24,"tr",[],null,null,null,null,null)),(t()(),r.Ta(44,0,null,null,7,"td",[],null,null,null,null,null)),(t()(),r.Ta(45,0,[["slider1",1]],null,6,"input",[["class","slider"],["type","range"],["value","1"]],[[8,"min",0],[8,"max",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(t,e,n){var i=!0,o=t.component;return"input"===e&&(i=!1!==r.cb(t,46)._handleInput(n.target.value)&&i),"blur"===e&&(i=!1!==r.cb(t,46).onTouched()&&i),"compositionstart"===e&&(i=!1!==r.cb(t,46)._compositionStart()&&i),"compositionend"===e&&(i=!1!==r.cb(t,46)._compositionEnd(n.target.value)&&i),"change"===e&&(i=!1!==r.cb(t,47).onChange(n.target.value)&&i),"input"===e&&(i=!1!==r.cb(t,47).onChange(n.target.value)&&i),"blur"===e&&(i=!1!==r.cb(t,47).onTouched()&&i),"ngModelChange"===e&&(i=!1!==(o.heightSliderVal=n)&&i),"change"===e&&(i=!1!==o.onHeightSliderChange(r.cb(t,45).value)&&i),i},null,null)),r.Sa(46,16384,null,0,j.c,[r.G,r.l,[2,j.a]],null,null),r.Sa(47,16384,null,0,j.w,[r.G,r.l],null,null),r.gb(1024,null,j.k,function(t,e){return[t,e]},[j.c,j.w]),r.Sa(49,671744,null,0,j.p,[[2,j.b],[8,null],[8,null],[6,j.k]],{model:[0,"model"]},{update:"ngModelChange"}),r.gb(2048,null,j.l,null,[j.p]),r.Sa(51,16384,null,0,j.m,[[4,j.l]],null,null),(t()(),r.Ta(52,0,null,null,7,"td",[],null,null,null,null,null)),(t()(),r.Ta(53,0,[["slider2",1]],null,6,"input",[["class","slider"],["type","range"],["value","1"]],[[8,"min",0],[8,"max",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(t,e,n){var i=!0,o=t.component;return"input"===e&&(i=!1!==r.cb(t,54)._handleInput(n.target.value)&&i),"blur"===e&&(i=!1!==r.cb(t,54).onTouched()&&i),"compositionstart"===e&&(i=!1!==r.cb(t,54)._compositionStart()&&i),"compositionend"===e&&(i=!1!==r.cb(t,54)._compositionEnd(n.target.value)&&i),"change"===e&&(i=!1!==r.cb(t,55).onChange(n.target.value)&&i),"input"===e&&(i=!1!==r.cb(t,55).onChange(n.target.value)&&i),"blur"===e&&(i=!1!==r.cb(t,55).onTouched()&&i),"ngModelChange"===e&&(i=!1!==(o.depthSliderVal=n)&&i),"change"===e&&(i=!1!==o.onDepthSliderChange(r.cb(t,53).value)&&i),i},null,null)),r.Sa(54,16384,null,0,j.c,[r.G,r.l,[2,j.a]],null,null),r.Sa(55,16384,null,0,j.w,[r.G,r.l],null,null),r.gb(1024,null,j.k,function(t,e){return[t,e]},[j.c,j.w]),r.Sa(57,671744,null,0,j.p,[[2,j.b],[8,null],[8,null],[6,j.k]],{model:[0,"model"]},{update:"ngModelChange"}),r.gb(2048,null,j.l,null,[j.p]),r.Sa(59,16384,null,0,j.m,[[4,j.l]],null,null),(t()(),r.Ta(60,0,null,null,7,"td",[],null,null,null,null,null)),(t()(),r.Ta(61,0,[["slider3",1]],null,6,"input",[["class","slider"],["type","range"],["value","1"]],[[8,"min",0],[8,"max",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(t,e,n){var i=!0,o=t.component;return"input"===e&&(i=!1!==r.cb(t,62)._handleInput(n.target.value)&&i),"blur"===e&&(i=!1!==r.cb(t,62).onTouched()&&i),"compositionstart"===e&&(i=!1!==r.cb(t,62)._compositionStart()&&i),"compositionend"===e&&(i=!1!==r.cb(t,62)._compositionEnd(n.target.value)&&i),"change"===e&&(i=!1!==r.cb(t,63).onChange(n.target.value)&&i),"input"===e&&(i=!1!==r.cb(t,63).onChange(n.target.value)&&i),"blur"===e&&(i=!1!==r.cb(t,63).onTouched()&&i),"ngModelChange"===e&&(i=!1!==(o.widthSliderVal=n)&&i),"change"===e&&(i=!1!==o.onWidthSliderChange(r.cb(t,61).value)&&i),i},null,null)),r.Sa(62,16384,null,0,j.c,[r.G,r.l,[2,j.a]],null,null),r.Sa(63,16384,null,0,j.w,[r.G,r.l],null,null),r.gb(1024,null,j.k,function(t,e){return[t,e]},[j.c,j.w]),r.Sa(65,671744,null,0,j.p,[[2,j.b],[8,null],[8,null],[6,j.k]],{model:[0,"model"]},{update:"ngModelChange"}),r.gb(2048,null,j.l,null,[j.p]),r.Sa(67,16384,null,0,j.m,[[4,j.l]],null,null),(t()(),r.Ta(68,0,null,null,14,"div",[["class","row"]],null,null,null,null,null)),(t()(),r.Ta(69,0,null,null,13,"div",[["class","col-sm-5 form-group"]],null,null,null,null,null)),(t()(),r.Ta(70,0,null,null,1,"label",[],null,null,null,null,null)),(t()(),r.jb(-1,null,["Associated Products"])),(t()(),r.Ta(72,0,null,null,10,"table",[["class","table"]],null,null,null,null,null)),(t()(),r.Ta(73,0,null,null,9,"tbody",[],null,null,null,null,null)),(t()(),r.Ta(74,0,null,null,6,"tr",[],null,null,null,null,null)),(t()(),r.Ta(75,0,null,null,1,"th",[],null,null,null,null,null)),(t()(),r.jb(-1,null,["#"])),(t()(),r.Ta(77,0,null,null,1,"th",[],null,null,null,null,null)),(t()(),r.jb(-1,null,["Product"])),(t()(),r.Ta(79,0,null,null,1,"th",[],null,null,null,null,null)),(t()(),r.jb(-1,null,[" X "])),(t()(),r.Ka(16777216,null,null,1,null,W)),r.Sa(82,278528,null,0,h.h,[r.S,r.P,r.v],{ngForOf:[0,"ngForOf"]},null),(t()(),r.Ta(83,0,null,null,14,"div",[["class","row"]],null,null,null,null,null)),(t()(),r.Ta(84,0,null,null,13,"div",[["class","col-sm-5 form-group"]],null,null,null,null,null)),(t()(),r.Ta(85,0,null,null,1,"label",[],null,null,null,null,null)),(t()(),r.jb(-1,null,["Add Products"])),(t()(),r.Ta(87,0,null,null,10,"table",[["class","table"]],null,null,null,null,null)),(t()(),r.Ta(88,0,null,null,9,"tbody",[],null,null,null,null,null)),(t()(),r.Ta(89,0,null,null,6,"tr",[],null,null,null,null,null)),(t()(),r.Ta(90,0,null,null,1,"th",[],null,null,null,null,null)),(t()(),r.jb(-1,null,["#"])),(t()(),r.Ta(92,0,null,null,1,"th",[],null,null,null,null,null)),(t()(),r.jb(-1,null,["Product"])),(t()(),r.Ta(94,0,null,null,1,"th",[],null,null,null,null,null)),(t()(),r.jb(-1,null,[" V "])),(t()(),r.Ka(16777216,null,null,1,null,q)),r.Sa(97,278528,null,0,h.h,[r.S,r.P,r.v],{ngForOf:[0,"ngForOf"]},null),(t()(),r.Ta(98,0,null,null,7,"div",[["class","row"]],null,null,null,null,null)),(t()(),r.Ta(99,0,null,null,6,"div",[["class","col-xs-12"]],null,null,null,null,null)),(t()(),r.Ka(16777216,null,null,1,null,X)),r.Sa(101,16384,null,0,h.i,[r.S,r.P],{ngIf:[0,"ngIf"]},null),(t()(),r.Ka(16777216,null,null,1,null,Y)),r.Sa(103,16384,null,0,h.i,[r.S,r.P],{ngIf:[0,"ngIf"]},null),(t()(),r.Ta(104,0,null,null,1,"button",[["class","btn btn-primary"],["type","button"]],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.onClear()&&r),r},null,null)),(t()(),r.jb(-1,null,["Clear"]))],function(t,e){var n=e.component;t(e,14,0,""),t(e,17,0,"name",""),t(e,49,0,n.heightSliderVal),t(e,57,0,n.depthSliderVal),t(e,65,0,n.widthSliderVal),t(e,82,0,n.editedItem.products),t(e,97,0,n.products),t(e,101,0,n.editMode),t(e,103,0,n.editMode)},function(t,e){var n=e.component;t(e,3,0,r.cb(e,7).ngClassUntouched,r.cb(e,7).ngClassTouched,r.cb(e,7).ngClassPristine,r.cb(e,7).ngClassDirty,r.cb(e,7).ngClassValid,r.cb(e,7).ngClassInvalid,r.cb(e,7).ngClassPending),t(e,12,0,r.cb(e,14).required?"":null,r.cb(e,19).ngClassUntouched,r.cb(e,19).ngClassTouched,r.cb(e,19).ngClassPristine,r.cb(e,19).ngClassDirty,r.cb(e,19).ngClassValid,r.cb(e,19).ngClassInvalid,r.cb(e,19).ngClassPending),t(e,36,0,r.cb(e,45).value),t(e,39,0,r.cb(e,53).value),t(e,42,0,r.cb(e,61).value),t(e,45,0,r.Va(1,"",n.editedItem.dimensions.minHeight,""),r.Va(1,"",n.editedItem.dimensions.maxHeight,""),r.cb(e,51).ngClassUntouched,r.cb(e,51).ngClassTouched,r.cb(e,51).ngClassPristine,r.cb(e,51).ngClassDirty,r.cb(e,51).ngClassValid,r.cb(e,51).ngClassInvalid,r.cb(e,51).ngClassPending),t(e,53,0,r.Va(1,"",n.editedItem.dimensions.minDepth,""),r.Va(1,"",n.editedItem.dimensions.maxDepth,""),r.cb(e,59).ngClassUntouched,r.cb(e,59).ngClassTouched,r.cb(e,59).ngClassPristine,r.cb(e,59).ngClassDirty,r.cb(e,59).ngClassValid,r.cb(e,59).ngClassInvalid,r.cb(e,59).ngClassPending),t(e,61,0,r.Va(1,"",n.editedItem.dimensions.minWidth,""),r.Va(1,"",n.editedItem.dimensions.maxWidth,""),r.cb(e,67).ngClassUntouched,r.cb(e,67).ngClassTouched,r.cb(e,67).ngClassPristine,r.cb(e,67).ngClassDirty,r.cb(e,67).ngClassValid,r.cb(e,67).ngClassInvalid,r.cb(e,67).ngClassPending)})}var Z=function(){function t(t){this.slService=t}return t.prototype.ngOnInit=function(){var t=this;this.products=this.slService.getProducts(),this.subscription=this.slService.productsChanged.subscribe(function(e){t.products=e})},t.prototype.onEditItem=function(t){this.slService.startedEditing.next(t)},t.prototype.onOrder=function(){console.log("Cheguei!!!!!!!!!"),this.slService.onOrder(this.orderForm),this.ngOnInit()},t.prototype.ngOnDestroy=function(){this.subscription.unsubscribe()},t}(),Q=r.Ra({encapsulation:0,styles:[[""]],data:{}});function J(t){return r.lb(0,[(t()(),r.Ta(0,0,null,null,1,"a",[["class","list-group-item"],["style","cursor: pointer"]],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.onEditItem(t.context.index)&&r),r},null,null)),(t()(),r.jb(1,null,[" "," "]))],null,function(t,e){t(e,1,0,e.context.$implicit.name)})}function $(t){return r.lb(0,[(t()(),r.Ta(0,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),r.jb(-1,null,["The form is invalid!"]))],null,null)}function tt(t){return r.lb(0,[r.hb(402653184,1,{orderForm:0}),(t()(),r.Ta(1,0,null,null,7,"div",[["class","row"]],null,null,null,null,null)),(t()(),r.Ta(2,0,null,null,6,"div",[["class","col-xs-10"]],null,null,null,null,null)),(t()(),r.Ta(3,0,null,null,1,"app-shopping-edit",[],null,null,null,K,H)),r.Sa(4,245760,null,0,V,[U.a,G.a,z.k,z.a],null,null),(t()(),r.Ta(5,0,null,null,0,"hr",[],null,null,null,null,null)),(t()(),r.Ta(6,0,null,null,2,"ul",[["class","list-group"]],null,null,null,null,null)),(t()(),r.Ka(16777216,null,null,1,null,J)),r.Sa(8,278528,null,0,h.h,[r.S,r.P,r.v],{ngForOf:[0,"ngForOf"]},null),(t()(),r.Ta(9,0,null,null,46,"div",[["class","container"]],null,null,null,null,null)),(t()(),r.Ta(10,0,null,null,45,"div",[["class","row"]],null,null,null,null,null)),(t()(),r.Ta(11,0,null,null,44,"div",[["class","col-md-5"]],null,null,null,null,null)),(t()(),r.Ta(12,0,null,null,43,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(t,e,n){var i=!0;return"submit"===e&&(i=!1!==r.cb(t,14).onSubmit(n)&&i),"reset"===e&&(i=!1!==r.cb(t,14).onReset()&&i),i},null,null)),r.Sa(13,16384,null,0,j.x,[],null,null),r.Sa(14,4210688,[[1,4],["orderForm",4]],0,j.o,[[8,null],[8,null]],null,null),r.gb(2048,null,j.b,null,[j.o]),r.Sa(16,16384,null,0,j.n,[[4,j.b]],null,null),(t()(),r.Ta(17,0,null,null,1,"label",[["for","deliveryAddress"]],null,null,null,null,null)),(t()(),r.jb(-1,null,["Delivery Address"])),(t()(),r.Ta(19,0,null,null,10,"div",[["class","form-group"]],null,null,null,null,null)),(t()(),r.Ta(20,0,null,null,1,"label",[["for","city"]],null,null,null,null,null)),(t()(),r.jb(-1,null,["City"])),(t()(),r.Ta(22,0,null,null,7,"input",[["city",""],["class","form-control"],["id","city"],["name","city"],["ngModel",""],["required",""],["type","city"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(t,e,n){var i=!0;return"input"===e&&(i=!1!==r.cb(t,23)._handleInput(n.target.value)&&i),"blur"===e&&(i=!1!==r.cb(t,23).onTouched()&&i),"compositionstart"===e&&(i=!1!==r.cb(t,23)._compositionStart()&&i),"compositionend"===e&&(i=!1!==r.cb(t,23)._compositionEnd(n.target.value)&&i),i},null,null)),r.Sa(23,16384,null,0,j.c,[r.G,r.l,[2,j.a]],null,null),r.Sa(24,16384,null,0,j.s,[],{required:[0,"required"]},null),r.gb(1024,null,j.j,function(t){return[t]},[j.s]),r.gb(1024,null,j.k,function(t){return[t]},[j.c]),r.Sa(27,671744,[["city",4]],0,j.p,[[2,j.b],[6,j.j],[8,null],[6,j.k]],{name:[0,"name"],model:[1,"model"]},null),r.gb(2048,null,j.l,null,[j.p]),r.Sa(29,16384,null,0,j.m,[[4,j.l]],null,null),(t()(),r.Ta(30,0,null,null,10,"div",[["class","form-group"]],null,null,null,null,null)),(t()(),r.Ta(31,0,null,null,1,"label",[["for","latitude"]],null,null,null,null,null)),(t()(),r.jb(-1,null,["Latitude"])),(t()(),r.Ta(33,0,null,null,7,"input",[["class","form-control"],["id","latitude"],["latitude",""],["name","latitude"],["ngModel",""],["required",""],["type","latitude"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(t,e,n){var i=!0;return"input"===e&&(i=!1!==r.cb(t,34)._handleInput(n.target.value)&&i),"blur"===e&&(i=!1!==r.cb(t,34).onTouched()&&i),"compositionstart"===e&&(i=!1!==r.cb(t,34)._compositionStart()&&i),"compositionend"===e&&(i=!1!==r.cb(t,34)._compositionEnd(n.target.value)&&i),i},null,null)),r.Sa(34,16384,null,0,j.c,[r.G,r.l,[2,j.a]],null,null),r.Sa(35,16384,null,0,j.s,[],{required:[0,"required"]},null),r.gb(1024,null,j.j,function(t){return[t]},[j.s]),r.gb(1024,null,j.k,function(t){return[t]},[j.c]),r.Sa(38,671744,[["latitude",4]],0,j.p,[[2,j.b],[6,j.j],[8,null],[6,j.k]],{name:[0,"name"],model:[1,"model"]},null),r.gb(2048,null,j.l,null,[j.p]),r.Sa(40,16384,null,0,j.m,[[4,j.l]],null,null),(t()(),r.Ta(41,0,null,null,10,"div",[["class","form-group"]],null,null,null,null,null)),(t()(),r.Ta(42,0,null,null,1,"label",[["for","longitude"]],null,null,null,null,null)),(t()(),r.jb(-1,null,["Longitude"])),(t()(),r.Ta(44,0,null,null,7,"input",[["Longitude",""],["class","form-control"],["id","longitude"],["name","longitude"],["ngModel",""],["required",""],["type","longitude"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(t,e,n){var i=!0;return"input"===e&&(i=!1!==r.cb(t,45)._handleInput(n.target.value)&&i),"blur"===e&&(i=!1!==r.cb(t,45).onTouched()&&i),"compositionstart"===e&&(i=!1!==r.cb(t,45)._compositionStart()&&i),"compositionend"===e&&(i=!1!==r.cb(t,45)._compositionEnd(n.target.value)&&i),i},null,null)),r.Sa(45,16384,null,0,j.c,[r.G,r.l,[2,j.a]],null,null),r.Sa(46,16384,null,0,j.s,[],{required:[0,"required"]},null),r.gb(1024,null,j.j,function(t){return[t]},[j.s]),r.gb(1024,null,j.k,function(t){return[t]},[j.c]),r.Sa(49,671744,[["longitude",4]],0,j.p,[[2,j.b],[6,j.j],[8,null],[6,j.k]],{name:[0,"name"],model:[1,"model"]},null),r.gb(2048,null,j.l,null,[j.p]),r.Sa(51,16384,null,0,j.m,[[4,j.l]],null,null),(t()(),r.Ka(16777216,null,null,1,null,$)),r.Sa(53,16384,null,0,h.i,[r.S,r.P],{ngIf:[0,"ngIf"]},null),(t()(),r.Ta(54,0,null,null,1,"button",[["class","btn btn-success"],["type","button"]],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.onOrder()&&r),r},null,null)),(t()(),r.jb(-1,null,["Make Order"]))],function(t,e){var n=e.component;t(e,4,0),t(e,8,0,n.products),t(e,24,0,""),t(e,27,0,"city",""),t(e,35,0,""),t(e,38,0,"latitude",""),t(e,46,0,""),t(e,49,0,"longitude",""),t(e,53,0,!r.cb(e,14).valid&&r.cb(e,14).touched)},function(t,e){t(e,12,0,r.cb(e,16).ngClassUntouched,r.cb(e,16).ngClassTouched,r.cb(e,16).ngClassPristine,r.cb(e,16).ngClassDirty,r.cb(e,16).ngClassValid,r.cb(e,16).ngClassInvalid,r.cb(e,16).ngClassPending),t(e,22,0,r.cb(e,24).required?"":null,r.cb(e,29).ngClassUntouched,r.cb(e,29).ngClassTouched,r.cb(e,29).ngClassPristine,r.cb(e,29).ngClassDirty,r.cb(e,29).ngClassValid,r.cb(e,29).ngClassInvalid,r.cb(e,29).ngClassPending),t(e,33,0,r.cb(e,35).required?"":null,r.cb(e,40).ngClassUntouched,r.cb(e,40).ngClassTouched,r.cb(e,40).ngClassPristine,r.cb(e,40).ngClassDirty,r.cb(e,40).ngClassValid,r.cb(e,40).ngClassInvalid,r.cb(e,40).ngClassPending),t(e,44,0,r.cb(e,46).required?"":null,r.cb(e,51).ngClassUntouched,r.cb(e,51).ngClassTouched,r.cb(e,51).ngClassPristine,r.cb(e,51).ngClassDirty,r.cb(e,51).ngClassValid,r.cb(e,51).ngClassInvalid,r.cb(e,51).ngClassPending)})}var et=r.Pa("app-shopping-list",Z,function(t){return r.lb(0,[(t()(),r.Ta(0,0,null,null,1,"app-shopping-list",[],null,null,null,tt,Q)),r.Sa(1,245760,null,0,Z,[U.a],null,null)],function(t,e){t(e,1,0)},null)},{},{},[]),nt=n("Womt"),rt=function(){function t(){}return t.createRenderer=function(t){var e=new nt.WebGLRenderer({canvas:t,alpha:!0,antialias:!0});return e.setPixelRatio(window.devicePixelRatio),e.setSize(window.innerWidth,window.innerHeight),e.gammaInput=!0,e.gammaOutput=!0,e.shadowMap.enabled=!0,e},t}(),it=n("nPuz"),ot=n.n(it),at=function(){function t(){}return t.createCamera=function(){var t=new nt.PerspectiveCamera(30,window.innerWidth/window.innerHeight,1,1e4);return t.position.set(1e3,50,1500),t},t.createCameraControls=function(t,e,n){var r=new ot.a(t,e.domElement);return r.update(),r.addEventListener("change",n),r},t}(),st=function(){function t(){}return t.createScene=function(){var t=new nt.Scene;return t.background=new nt.Color(13426943),t.fog=new nt.Fog(13426943,500,1e4),t},t}(),ut=function(){function t(){}return t.createAmbientLight=function(){return new nt.AmbientLight(6710886)},t.createDirectionalLight=function(){var t=new nt.DirectionalLight(14674943,1);t.position.set(50,200,100),t.position.multiplyScalar(1.3),t.castShadow=!0,t.shadow.mapSize.width=2048,t.shadow.mapSize.height=2048;var e=2048;return t.shadow.camera.left=-e,t.shadow.camera.right=e,t.shadow.camera.top=e,t.shadow.camera.bottom=-e,t.shadow.camera.far=2048,t},t}(),lt=function(){function t(){}return t.createGround=function(t){var e=(new nt.TextureLoader).load(t);e.wrapS=e.wrapT=nt.RepeatWrapping,e.repeat.set(25,25),e.anisotropy=16;var n=new nt.MeshLambertMaterial({map:e}),r=new nt.Mesh(new nt.PlaneBufferGeometry(2e4,2e4),n);return r.position.y=-250,r.rotation.x=-Math.PI/2,r.receiveShadow=!0,r},t}(),ct=function(){function t(){}return t.createAudio=function(t,e){var n=new nt.AudioListener;e.add(n);var r=new nt.Audio(n);return(new nt.AudioLoader).load(t,function(t){r.setBuffer(t),r.setLoop(!0),r.setVolume(.5),r.play()},null,null),r},t}(),ht=n("6xh3");function dt(t,e,n,r){var i=new ht(e,n.domElement);i.addEventListener("change",render),i.addEventListener("dragging-changed",function(t){r.enabled=!t.value}),i.attach(t),window.addEventListener("keydown",function(t){switch(t.keyCode){case 81:i.setSpace("local"===i.space?"world":"local");break;case 17:i.setTranslationSnap(100),i.setRotationSnap(nt.Math.degToRad(15));break;case 84:i.setMode("translate");break;case 82:i.setMode("rotate");break;case 83:i.setMode("scale");break;case 187:case 107:i.setSize(i.size+.1);break;case 189:case 109:i.setSize(Math.max(i.size-.1,.1));break;case 88:i.showX=!i.showX;break;case 89:i.showY=!i.showY;break;case 90:i.showZ=!i.showZ;break;case 32:i.enabled=!i.enabled}}),this.control=i}var pt=function(){function t(t){var e=new nt.Group,n=(new nt.TextureLoader).load("../../../assets/textures/madeira.jpeg");n.wrapS=nt.RepeatWrapping,n.repeat.set(3,1),n.anisotropy=16;var r=new nt.BoxBufferGeometry(300,100,200),i=new nt.MeshLambertMaterial({map:n});this.mesh=new nt.Mesh(r,i),this.mesh.position.x=-125,this.mesh.position.y=-200,this.mesh.position.z=100,this.mesh.receiveShadow=!0,this.mesh.castShadow=!0,e.add(this.mesh);var o=new nt.CylinderGeometry(5,5,20,32),a=new nt.MeshBasicMaterial({color:16776960}),s=new nt.Mesh(o,a);s.position.x=-125,s.position.y=-200,s.position.z=200,s.receiveShadow=!0,s.castShadow=!0,e.add(s),this.controller=new dt(e,t.camera,t.cameraControls,t.renderer,t.render),t.scene.add(this.controller.control),this.content=e}return t.prototype.replaceTexture=function(t){this.mesh.material.map=nt.ImageUtils.loadTexture(t),this.mesh.material.needsUpdate=!0},t.prototype.toggleControls=function(){this.controller.control.enabled=!this.controller.control.enabled,this.controller.control.visible=!this.controller.control.visible},t}(),ft=function(){function t(t){var e=new nt.Group,n=new nt.BoxBufferGeometry(305,15,200),r=(new nt.TextureLoader).load("../../../assets/textures/madeira.jpeg");r.wrapS=nt.RepeatWrapping,r.repeat.set(3,1),r.anisotropy=16;var i=new nt.MeshLambertMaterial({map:r});this.mesh=new nt.Mesh(n,i),this.mesh.position.x=-125,this.mesh.position.y=1,this.mesh.position.z=100,this.mesh.receiveShadow=!0,this.mesh.castShadow=!0,this.controller=new dt(e,t.camera,t.cameraControls,t.renderer,t.render),t.scene.add(this.controller.control),this.content=e}return t.prototype.replaceTexture=function(t){this.mesh.material.map=nt.ImageUtils.loadTexture(t),this.mesh.material.needsUpdate=!0},t.prototype.toggleControls=function(){this.controller.control.enabled=!this.controller.control.enabled,this.controller.control.visible=!this.controller.control.visible},t}(),mt=function(){function t(t){var e=new nt.Group,n=new nt.BoxBufferGeometry(360,15,200),r=(new nt.TextureLoader).load("../../../assets/textures/madeira.jpeg");r.wrapS=nt.RepeatWrapping,r.repeat.set(3,1),r.anisotropy=16;var i=new nt.MeshLambertMaterial({map:r});this.mesh=new nt.Mesh(n,i),this.mesh.position.x=-125,this.mesh.position.y=-55,this.mesh.position.z=100,this.mesh.rotateZ(nt.Math.degToRad(90)),this.mesh.receiveShadow=!0,this.mesh.castShadow=!0,e.add(this.mesh),this.controller=new dt(e,t.camera,t.cameraControls,t.renderer,t.render),t.scene.add(this.controller.control),this.content=e}return t.prototype.replaceTexture=function(t){this.mesh.material.map=nt.ImageUtils.loadTexture(t),this.mesh.material.needsUpdate=!0},t.prototype.toggleControls=function(){this.controller.control.enabled=!this.controller.control.enabled,this.controller.control.visible=!this.controller.control.visible},t}();function vt(t,e,n,r,o,a){var s=new nt.Group,u=(new nt.TextureLoader).load("../../../assets/textures/madeira.jpeg");u.wrapS=nt.RepeatWrapping,u.repeat.set(3,1),u.anisotropy=16;var l=new nt.BoxBufferGeometry(300,375,15),c=new nt.MeshLambertMaterial({map:u});(g=new nt.Mesh(l,c)).position.x=-125,g.position.y=-62,g.receiveShadow=!0,g.castShadow=!0,s.add(g);var h=new nt.BoxBufferGeometry(15,375,200),d=new nt.MeshLambertMaterial({map:u});(g=new nt.Mesh(h,d)).position.x=25,g.position.y=-62,g.position.z=100,g.receiveShadow=!0,g.castShadow=!0,s.add(g);var p=new nt.BoxBufferGeometry(15,375,200),f=new nt.MeshLambertMaterial({map:u});(g=new nt.Mesh(p,f)).position.x=-275,g.position.y=-62,g.position.z=100,g.receiveShadow=!0,g.castShadow=!0,s.add(g);var m=new nt.BoxBufferGeometry(305,15,200),v=new nt.MeshLambertMaterial({map:u});(g=new nt.Mesh(m,v)).position.x=-125,g.position.y=-245,g.position.z=100,g.receiveShadow=!0,g.castShadow=!0,s.add(g);var g,y=new nt.BoxBufferGeometry(305,15,200),_=new nt.MeshLambertMaterial({map:u});(g=new nt.Mesh(y,_)).position.x=-125,g.position.y=124,g.position.z=100,g.receiveShadow=!0,g.castShadow=!0,s.add(g),this.content=s,this.drawerList=[],this.shelfList=[],this.wallList=[],this.replaceTexture=function(t){for(i=0;i<s.children.length;i++)if(s.children[i]instanceof nt.Mesh){var e=s.children[i];e.material.map=nt.ImageUtils.loadTexture(t),e.material.needsUpdate=!0}for(i=0;i<this.drawerList.length;i++)this.drawerList[i].replaceTexture(t);for(i=0;i<this.shelfList.length;i++)this.shelfList[i].replaceTexture(t);for(i=0;i<this.wallList.length;i++)this.wallList[i].replaceTexture(t)},this.toggleControls=function(){for(i=0;i<this.drawerList.length;i++)this.drawerList[i].toggleControls();for(i=0;i<this.shelfList.length;i++)this.shelfList[i].toggleControls();for(i=0;i<this.wallList.length;i++)this.wallList[i].toggleControls()},this.empty=function(){this.drawerList=[],this.shelfList=[],this.wallList=[]}}function gt(t,e){var n=t.__state.conversionName.toString(),r=Math.round(t.r),i=Math.round(t.g),o=Math.round(t.b),a=t.a,s=Math.round(t.h),u=t.s.toFixed(1),l=t.v.toFixed(1);if(e||"THREE_CHAR_HEX"===n||"SIX_CHAR_HEX"===n){for(var c=t.hex.toString(16);c.length<6;)c="0"+c;return"#"+c}return"CSS_RGB"===n?"rgb("+r+","+i+","+o+")":"CSS_RGBA"===n?"rgba("+r+","+i+","+o+","+a+")":"HEX"===n?"0x"+t.hex.toString(16):"RGB_ARRAY"===n?"["+r+","+i+","+o+"]":"RGBA_ARRAY"===n?"["+r+","+i+","+o+","+a+"]":"RGB_OBJ"===n?"{r:"+r+",g:"+i+",b:"+o+"}":"RGBA_OBJ"===n?"{r:"+r+",g:"+i+",b:"+o+",a:"+a+"}":"HSV_OBJ"===n?"{h:"+s+",s:"+u+",v:"+l+"}":"HSVA_OBJ"===n?"{h:"+s+",s:"+u+",v:"+l+",a:"+a+"}":"unknown format"}var yt=Array.prototype.forEach,_t=Array.prototype.slice,bt={BREAK:{},extend:function(t){return this.each(_t.call(arguments,1),function(e){(this.isObject(e)?Object.keys(e):[]).forEach((function(n){this.isUndefined(e[n])||(t[n]=e[n])}).bind(this))},this),t},defaults:function(t){return this.each(_t.call(arguments,1),function(e){(this.isObject(e)?Object.keys(e):[]).forEach((function(n){this.isUndefined(t[n])&&(t[n]=e[n])}).bind(this))},this),t},compose:function(){var t=_t.call(arguments);return function(){for(var e=_t.call(arguments),n=t.length-1;n>=0;n--)e=[t[n].apply(this,e)];return e[0]}},each:function(t,e,n){if(t)if(yt&&t.forEach&&t.forEach===yt)t.forEach(e,n);else if(t.length===t.length+0){var r,i=void 0;for(i=0,r=t.length;i<r;i++)if(i in t&&e.call(n,t[i],i)===this.BREAK)return}else for(var o in t)if(e.call(n,t[o],o)===this.BREAK)return},defer:function(t){setTimeout(t,0)},debounce:function(t,e,n){var r=void 0;return function(){var i=this,o=arguments,a=n||!r;clearTimeout(r),r=setTimeout(function(){r=null,n||t.apply(i,o)},e),a&&t.apply(i,o)}},toArray:function(t){return t.toArray?t.toArray():_t.call(t)},isUndefined:function(t){return void 0===t},isNull:function(t){return null===t},isNaN:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(t){return isNaN(t)}),isArray:Array.isArray||function(t){return t.constructor===Array},isObject:function(t){return t===Object(t)},isNumber:function(t){return t===t+0},isString:function(t){return t===t+""},isBoolean:function(t){return!1===t||!0===t},isFunction:function(t){return"[object Function]"===Object.prototype.toString.call(t)}},wt=[{litmus:bt.isString,conversions:{THREE_CHAR_HEX:{read:function(t){var e=t.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null!==e&&{space:"HEX",hex:parseInt("0x"+e[1].toString()+e[1].toString()+e[2].toString()+e[2].toString()+e[3].toString()+e[3].toString(),0)}},write:gt},SIX_CHAR_HEX:{read:function(t){var e=t.match(/^#([A-F0-9]{6})$/i);return null!==e&&{space:"HEX",hex:parseInt("0x"+e[1].toString(),0)}},write:gt},CSS_RGB:{read:function(t){var e=t.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==e&&{space:"RGB",r:parseFloat(e[1]),g:parseFloat(e[2]),b:parseFloat(e[3])}},write:gt},CSS_RGBA:{read:function(t){var e=t.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==e&&{space:"RGB",r:parseFloat(e[1]),g:parseFloat(e[2]),b:parseFloat(e[3]),a:parseFloat(e[4])}},write:gt}}},{litmus:bt.isNumber,conversions:{HEX:{read:function(t){return{space:"HEX",hex:t,conversionName:"HEX"}},write:function(t){return t.hex}}}},{litmus:bt.isArray,conversions:{RGB_ARRAY:{read:function(t){return 3===t.length&&{space:"RGB",r:t[0],g:t[1],b:t[2]}},write:function(t){return[t.r,t.g,t.b]}},RGBA_ARRAY:{read:function(t){return 4===t.length&&{space:"RGB",r:t[0],g:t[1],b:t[2],a:t[3]}},write:function(t){return[t.r,t.g,t.b,t.a]}}}},{litmus:bt.isObject,conversions:{RGBA_OBJ:{read:function(t){return!!(bt.isNumber(t.r)&&bt.isNumber(t.g)&&bt.isNumber(t.b)&&bt.isNumber(t.a))&&{space:"RGB",r:t.r,g:t.g,b:t.b,a:t.a}},write:function(t){return{r:t.r,g:t.g,b:t.b,a:t.a}}},RGB_OBJ:{read:function(t){return!!(bt.isNumber(t.r)&&bt.isNumber(t.g)&&bt.isNumber(t.b))&&{space:"RGB",r:t.r,g:t.g,b:t.b}},write:function(t){return{r:t.r,g:t.g,b:t.b}}},HSVA_OBJ:{read:function(t){return!!(bt.isNumber(t.h)&&bt.isNumber(t.s)&&bt.isNumber(t.v)&&bt.isNumber(t.a))&&{space:"HSV",h:t.h,s:t.s,v:t.v,a:t.a}},write:function(t){return{h:t.h,s:t.s,v:t.v,a:t.a}}},HSV_OBJ:{read:function(t){return!!(bt.isNumber(t.h)&&bt.isNumber(t.s)&&bt.isNumber(t.v))&&{space:"HSV",h:t.h,s:t.s,v:t.v}},write:function(t){return{h:t.h,s:t.s,v:t.v}}}}}],xt=void 0,Et=void 0,St=function(){Et=!1;var t=arguments.length>1?bt.toArray(arguments):arguments[0];return bt.each(wt,function(e){if(e.litmus(t))return bt.each(e.conversions,function(e,n){if(xt=e.read(t),!1===Et&&!1!==xt)return Et=xt,xt.conversionName=n,xt.conversion=e,bt.BREAK}),bt.BREAK}),Et},Tt=void 0,Mt={hsv_to_rgb:function(t,e,n){var r=Math.floor(t/60)%6,i=t/60-Math.floor(t/60),o=n*(1-e),a=n*(1-i*e),s=n*(1-(1-i)*e),u=[[n,s,o],[a,n,o],[o,n,s],[o,a,n],[s,o,n],[n,o,a]][r];return{r:255*u[0],g:255*u[1],b:255*u[2]}},rgb_to_hsv:function(t,e,n){var r=Math.min(t,e,n),i=Math.max(t,e,n),o=i-r,a=void 0;return 0===i?{h:NaN,s:0,v:0}:(a=t===i?(e-n)/o:e===i?2+(n-t)/o:4+(t-e)/o,(a/=6)<0&&(a+=1),{h:360*a,s:o/i,v:i/255})},rgb_to_hex:function(t,e,n){var r=this.hex_with_component(0,2,t);return r=this.hex_with_component(r,1,e),this.hex_with_component(r,0,n)},component_from_hex:function(t,e){return t>>8*e&255},hex_with_component:function(t,e,n){return n<<(Tt=8*e)|t&~(255<<Tt)}},Ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},At=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},Pt=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),Ot=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0},Rt=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},Lt=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},It=function(){function t(){if(At(this,t),this.__state=St.apply(this,arguments),!1===this.__state)throw new Error("Failed to interpret color arguments");this.__state.a=this.__state.a||1}return Pt(t,[{key:"toString",value:function(){return gt(this)}},{key:"toHexString",value:function(){return gt(this,!0)}},{key:"toOriginal",value:function(){return this.__state.conversion.write(this)}}]),t}();function Nt(t,e,n){Object.defineProperty(t,e,{get:function(){return"RGB"===this.__state.space?this.__state[e]:(It.recalculateRGB(this,e,n),this.__state[e])},set:function(t){"RGB"!==this.__state.space&&(It.recalculateRGB(this,e,n),this.__state.space="RGB"),this.__state[e]=t}})}function Dt(t,e){Object.defineProperty(t,e,{get:function(){return"HSV"===this.__state.space?this.__state[e]:(It.recalculateHSV(this),this.__state[e])},set:function(t){"HSV"!==this.__state.space&&(It.recalculateHSV(this),this.__state.space="HSV"),this.__state[e]=t}})}It.recalculateRGB=function(t,e,n){if("HEX"===t.__state.space)t.__state[e]=Mt.component_from_hex(t.__state.hex,n);else{if("HSV"!==t.__state.space)throw new Error("Corrupted color state");bt.extend(t.__state,Mt.hsv_to_rgb(t.__state.h,t.__state.s,t.__state.v))}},It.recalculateHSV=function(t){var e=Mt.rgb_to_hsv(t.r,t.g,t.b);bt.extend(t.__state,{s:e.s,v:e.v}),bt.isNaN(e.h)?bt.isUndefined(t.__state.h)&&(t.__state.h=0):t.__state.h=e.h},It.COMPONENTS=["r","g","b","h","s","v","hex","a"],Nt(It.prototype,"r",2),Nt(It.prototype,"g",1),Nt(It.prototype,"b",0),Dt(It.prototype,"h"),Dt(It.prototype,"s"),Dt(It.prototype,"v"),Object.defineProperty(It.prototype,"a",{get:function(){return this.__state.a},set:function(t){this.__state.a=t}}),Object.defineProperty(It.prototype,"hex",{get:function(){return"HEX"!==!this.__state.space&&(this.__state.hex=Mt.rgb_to_hex(this.r,this.g,this.b)),this.__state.hex},set:function(t){this.__state.space="HEX",this.__state.hex=t}});var kt=function(){function t(e,n){At(this,t),this.initialValue=e[n],this.domElement=document.createElement("div"),this.object=e,this.property=n,this.__onChange=void 0,this.__onFinishChange=void 0}return Pt(t,[{key:"onChange",value:function(t){return this.__onChange=t,this}},{key:"onFinishChange",value:function(t){return this.__onFinishChange=t,this}},{key:"setValue",value:function(t){return this.object[this.property]=t,this.__onChange&&this.__onChange.call(this,t),this.updateDisplay(),this}},{key:"getValue",value:function(){return this.object[this.property]}},{key:"updateDisplay",value:function(){return this}},{key:"isModified",value:function(){return this.initialValue!==this.getValue()}}]),t}(),Ft={};bt.each({HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},function(t,e){bt.each(t,function(t){Ft[t]=e})});var jt=/(\d+(\.\d+)?)px/;function Ut(t){if("0"===t||bt.isUndefined(t))return 0;var e=t.match(jt);return bt.isNull(e)?0:parseFloat(e[1])}var Bt={makeSelectable:function(t,e){void 0!==t&&void 0!==t.style&&(t.onselectstart=e?function(){return!1}:function(){},t.style.MozUserSelect=e?"auto":"none",t.style.KhtmlUserSelect=e?"auto":"none",t.unselectable=e?"on":"off")},makeFullscreen:function(t,e,n){var r=n,i=e;bt.isUndefined(i)&&(i=!0),bt.isUndefined(r)&&(r=!0),t.style.position="absolute",i&&(t.style.left=0,t.style.right=0),r&&(t.style.top=0,t.style.bottom=0)},fakeEvent:function(t,e,n,r){var i=n||{},o=Ft[e];if(!o)throw new Error("Event type "+e+" not supported.");var a=document.createEvent(o);switch(o){case"MouseEvents":a.initMouseEvent(e,i.bubbles||!1,i.cancelable||!0,window,i.clickCount||1,0,0,i.x||i.clientX||0,i.y||i.clientY||0,!1,!1,!1,!1,0,null);break;case"KeyboardEvents":var s=a.initKeyboardEvent||a.initKeyEvent;bt.defaults(i,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),s(e,i.bubbles||!1,i.cancelable,window,i.ctrlKey,i.altKey,i.shiftKey,i.metaKey,i.keyCode,i.charCode);break;default:a.initEvent(e,i.bubbles||!1,i.cancelable||!0)}bt.defaults(a,r),t.dispatchEvent(a)},bind:function(t,e,n,r){return t.addEventListener?t.addEventListener(e,n,r||!1):t.attachEvent&&t.attachEvent("on"+e,n),Bt},unbind:function(t,e,n,r){return t.removeEventListener?t.removeEventListener(e,n,r||!1):t.detachEvent&&t.detachEvent("on"+e,n),Bt},addClass:function(t,e){if(void 0===t.className)t.className=e;else if(t.className!==e){var n=t.className.split(/ +/);-1===n.indexOf(e)&&(n.push(e),t.className=n.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return Bt},removeClass:function(t,e){if(e)if(t.className===e)t.removeAttribute("class");else{var n=t.className.split(/ +/),r=n.indexOf(e);-1!==r&&(n.splice(r,1),t.className=n.join(" "))}else t.className=void 0;return Bt},hasClass:function(t,e){return new RegExp("(?:^|\\s+)"+e+"(?:\\s+|$)").test(t.className)||!1},getWidth:function(t){var e=getComputedStyle(t);return Ut(e["border-left-width"])+Ut(e["border-right-width"])+Ut(e["padding-left"])+Ut(e["padding-right"])+Ut(e.width)},getHeight:function(t){var e=getComputedStyle(t);return Ut(e["border-top-width"])+Ut(e["border-bottom-width"])+Ut(e["padding-top"])+Ut(e["padding-bottom"])+Ut(e.height)},getOffset:function(t){var e=t,n={left:0,top:0};if(e.offsetParent)do{n.left+=e.offsetLeft,n.top+=e.offsetTop,e=e.offsetParent}while(e);return n},isActive:function(t){return t===document.activeElement&&(t.type||t.href)}},Gt=function(t){function e(t,n){At(this,e);var r=Lt(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n)),i=r;return r.__prev=r.getValue(),r.__checkbox=document.createElement("input"),r.__checkbox.setAttribute("type","checkbox"),Bt.bind(r.__checkbox,"change",function(){i.setValue(!i.__prev)},!1),r.domElement.appendChild(r.__checkbox),r.updateDisplay(),r}return Rt(e,kt),Pt(e,[{key:"setValue",value:function(t){var n=Ot(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setValue",this).call(this,t);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),n}},{key:"updateDisplay",value:function(){return!0===this.getValue()?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0,this.__prev=!0):(this.__checkbox.checked=!1,this.__prev=!1),Ot(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this)}}]),e}(),Vt=function(t){function e(t,n,r){At(this,e);var i=Lt(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n)),o=r,a=i;if(i.__select=document.createElement("select"),bt.isArray(o)){var s={};bt.each(o,function(t){s[t]=t}),o=s}return bt.each(o,function(t,e){var n=document.createElement("option");n.innerHTML=e,n.setAttribute("value",t),a.__select.appendChild(n)}),i.updateDisplay(),Bt.bind(i.__select,"change",function(){a.setValue(this.options[this.selectedIndex].value)}),i.domElement.appendChild(i.__select),i}return Rt(e,kt),Pt(e,[{key:"setValue",value:function(t){var n=Ot(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setValue",this).call(this,t);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),n}},{key:"updateDisplay",value:function(){return Bt.isActive(this.__select)?this:(this.__select.value=this.getValue(),Ot(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this))}}]),e}(),zt=function(t){function e(t,n){At(this,e);var r=Lt(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n)),i=r;function o(){i.setValue(i.__input.value)}return r.__input=document.createElement("input"),r.__input.setAttribute("type","text"),Bt.bind(r.__input,"keyup",o),Bt.bind(r.__input,"change",o),Bt.bind(r.__input,"blur",function(){i.__onFinishChange&&i.__onFinishChange.call(i,i.getValue())}),Bt.bind(r.__input,"keydown",function(t){13===t.keyCode&&this.blur()}),r.updateDisplay(),r.domElement.appendChild(r.__input),r}return Rt(e,kt),Pt(e,[{key:"updateDisplay",value:function(){return Bt.isActive(this.__input)||(this.__input.value=this.getValue()),Ot(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this)}}]),e}();function Ht(t){var e=t.toString();return e.indexOf(".")>-1?e.length-e.indexOf(".")-1:0}var Wt=function(t){function e(t,n,r){At(this,e);var i=Lt(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n)),o=r||{};return i.__min=o.min,i.__max=o.max,i.__step=o.step,i.__impliedStep=bt.isUndefined(i.__step)?0===i.initialValue?1:Math.pow(10,Math.floor(Math.log(Math.abs(i.initialValue))/Math.LN10))/10:i.__step,i.__precision=Ht(i.__impliedStep),i}return Rt(e,kt),Pt(e,[{key:"setValue",value:function(t){var n=t;return void 0!==this.__min&&n<this.__min?n=this.__min:void 0!==this.__max&&n>this.__max&&(n=this.__max),void 0!==this.__step&&n%this.__step!=0&&(n=Math.round(n/this.__step)*this.__step),Ot(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setValue",this).call(this,n)}},{key:"min",value:function(t){return this.__min=t,this}},{key:"max",value:function(t){return this.__max=t,this}},{key:"step",value:function(t){return this.__step=t,this.__impliedStep=t,this.__precision=Ht(t),this}}]),e}(),qt=function(t){function e(t,n,r){At(this,e);var i=Lt(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,r));i.__truncationSuspended=!1;var o=i,a=void 0;function s(){o.__onFinishChange&&o.__onFinishChange.call(o,o.getValue())}function u(t){var e=a-t.clientY;o.setValue(o.getValue()+e*o.__impliedStep),a=t.clientY}function l(){Bt.unbind(window,"mousemove",u),Bt.unbind(window,"mouseup",l),s()}return i.__input=document.createElement("input"),i.__input.setAttribute("type","text"),Bt.bind(i.__input,"change",function(){var t=parseFloat(o.__input.value);bt.isNaN(t)||o.setValue(t)}),Bt.bind(i.__input,"blur",function(){s()}),Bt.bind(i.__input,"mousedown",function(t){Bt.bind(window,"mousemove",u),Bt.bind(window,"mouseup",l),a=t.clientY}),Bt.bind(i.__input,"keydown",function(t){13===t.keyCode&&(o.__truncationSuspended=!0,this.blur(),o.__truncationSuspended=!1,s())}),i.updateDisplay(),i.domElement.appendChild(i.__input),i}return Rt(e,Wt),Pt(e,[{key:"updateDisplay",value:function(){var t,n;return this.__input.value=this.__truncationSuspended?this.getValue():(t=this.getValue(),n=Math.pow(10,this.__precision),Math.round(t*n)/n),Ot(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this)}}]),e}();function Xt(t,e,n,r,i){return r+(t-e)/(n-e)*(i-r)}var Yt=function(t){function e(t,n,r,i,o){At(this,e);var a=Lt(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,{min:r,max:i,step:o})),s=a;function u(t){t.preventDefault();var e=s.__background.getBoundingClientRect();return s.setValue(Xt(t.clientX,e.left,e.right,s.__min,s.__max)),!1}function l(){Bt.unbind(window,"mousemove",u),Bt.unbind(window,"mouseup",l),s.__onFinishChange&&s.__onFinishChange.call(s,s.getValue())}function c(t){var e=t.touches[0].clientX,n=s.__background.getBoundingClientRect();s.setValue(Xt(e,n.left,n.right,s.__min,s.__max))}function h(){Bt.unbind(window,"touchmove",c),Bt.unbind(window,"touchend",h),s.__onFinishChange&&s.__onFinishChange.call(s,s.getValue())}return a.__background=document.createElement("div"),a.__foreground=document.createElement("div"),Bt.bind(a.__background,"mousedown",function(t){document.activeElement.blur(),Bt.bind(window,"mousemove",u),Bt.bind(window,"mouseup",l),u(t)}),Bt.bind(a.__background,"touchstart",function(t){1===t.touches.length&&(Bt.bind(window,"touchmove",c),Bt.bind(window,"touchend",h),c(t))}),Bt.addClass(a.__background,"slider"),Bt.addClass(a.__foreground,"slider-fg"),a.updateDisplay(),a.__background.appendChild(a.__foreground),a.domElement.appendChild(a.__background),a}return Rt(e,Wt),Pt(e,[{key:"updateDisplay",value:function(){var t=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=100*t+"%",Ot(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this)}}]),e}(),Kt=function(t){function e(t,n,r){At(this,e);var i=Lt(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n)),o=i;return i.__button=document.createElement("div"),i.__button.innerHTML=void 0===r?"Fire":r,Bt.bind(i.__button,"click",function(t){return t.preventDefault(),o.fire(),!1}),Bt.addClass(i.__button,"button"),i.domElement.appendChild(i.__button),i}return Rt(e,kt),Pt(e,[{key:"fire",value:function(){this.__onChange&&this.__onChange.call(this),this.getValue().call(this.object),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue())}}]),e}(),Zt=function(t){function e(t,n){At(this,e);var r=Lt(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));r.__color=new It(r.getValue()),r.__temp=new It(0);var i=r;r.domElement=document.createElement("div"),Bt.makeSelectable(r.domElement,!1),r.__selector=document.createElement("div"),r.__selector.className="selector",r.__saturation_field=document.createElement("div"),r.__saturation_field.className="saturation-field",r.__field_knob=document.createElement("div"),r.__field_knob.className="field-knob",r.__field_knob_border="2px solid ",r.__hue_knob=document.createElement("div"),r.__hue_knob.className="hue-knob",r.__hue_field=document.createElement("div"),r.__hue_field.className="hue-field",r.__input=document.createElement("input"),r.__input.type="text",r.__input_textShadow="0 1px 1px ",Bt.bind(r.__input,"keydown",function(t){13===t.keyCode&&h.call(this)}),Bt.bind(r.__input,"blur",h),Bt.bind(r.__selector,"mousedown",function(){Bt.addClass(this,"drag").bind(window,"mouseup",function(){Bt.removeClass(i.__selector,"drag")})}),Bt.bind(r.__selector,"touchstart",function(){Bt.addClass(this,"drag").bind(window,"touchend",function(){Bt.removeClass(i.__selector,"drag")})});var o,a=document.createElement("div");function s(t){p(t),Bt.bind(window,"mousemove",p),Bt.bind(window,"touchmove",p),Bt.bind(window,"mouseup",l),Bt.bind(window,"touchend",l)}function u(t){f(t),Bt.bind(window,"mousemove",f),Bt.bind(window,"touchmove",f),Bt.bind(window,"mouseup",c),Bt.bind(window,"touchend",c)}function l(){Bt.unbind(window,"mousemove",p),Bt.unbind(window,"touchmove",p),Bt.unbind(window,"mouseup",l),Bt.unbind(window,"touchend",l),d()}function c(){Bt.unbind(window,"mousemove",f),Bt.unbind(window,"touchmove",f),Bt.unbind(window,"mouseup",c),Bt.unbind(window,"touchend",c),d()}function h(){var t=St(this.value);!1!==t?(i.__color.__state=t,i.setValue(i.__color.toOriginal())):this.value=i.__color.toString()}function d(){i.__onFinishChange&&i.__onFinishChange.call(i,i.__color.toOriginal())}function p(t){-1===t.type.indexOf("touch")&&t.preventDefault();var e=i.__saturation_field.getBoundingClientRect(),n=t.touches&&t.touches[0]||t,r=(n.clientX-e.left)/(e.right-e.left),o=1-(n.clientY-e.top)/(e.bottom-e.top);return o>1?o=1:o<0&&(o=0),r>1?r=1:r<0&&(r=0),i.__color.v=o,i.__color.s=r,i.setValue(i.__color.toOriginal()),!1}function f(t){-1===t.type.indexOf("touch")&&t.preventDefault();var e=i.__hue_field.getBoundingClientRect(),n=1-((t.touches&&t.touches[0]||t).clientY-e.top)/(e.bottom-e.top);return n>1?n=1:n<0&&(n=0),i.__color.h=360*n,i.setValue(i.__color.toOriginal()),!1}return bt.extend(r.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),bt.extend(r.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:r.__field_knob_border+(r.__color.v<.5?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),bt.extend(r.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),bt.extend(r.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),bt.extend(a.style,{width:"100%",height:"100%",background:"none"}),Jt(a,"top","rgba(0,0,0,0)","#000"),bt.extend(r.__hue_field.style,{width:"15px",height:"100px",border:"1px solid #555",cursor:"ns-resize",position:"absolute",top:"3px",right:"3px"}),(o=r.__hue_field).style.background="",o.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",o.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",o.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",o.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",o.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",bt.extend(r.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:r.__input_textShadow+"rgba(0,0,0,0.7)"}),Bt.bind(r.__saturation_field,"mousedown",s),Bt.bind(r.__saturation_field,"touchstart",s),Bt.bind(r.__field_knob,"mousedown",s),Bt.bind(r.__field_knob,"touchstart",s),Bt.bind(r.__hue_field,"mousedown",u),Bt.bind(r.__hue_field,"touchstart",u),r.__saturation_field.appendChild(a),r.__selector.appendChild(r.__field_knob),r.__selector.appendChild(r.__saturation_field),r.__selector.appendChild(r.__hue_field),r.__hue_field.appendChild(r.__hue_knob),r.domElement.appendChild(r.__input),r.domElement.appendChild(r.__selector),r.updateDisplay(),r}return Rt(e,kt),Pt(e,[{key:"updateDisplay",value:function(){var t=St(this.getValue());if(!1!==t){var e=!1;bt.each(It.COMPONENTS,function(n){if(!bt.isUndefined(t[n])&&!bt.isUndefined(this.__color.__state[n])&&t[n]!==this.__color.__state[n])return e=!0,{}},this),e&&bt.extend(this.__color.__state,t)}bt.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var n=this.__color.v<.5||this.__color.s>.5?255:0,r=255-n;bt.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toHexString(),border:this.__field_knob_border+"rgb("+n+","+n+","+n+")"}),this.__hue_knob.style.marginTop=100*(1-this.__color.h/360)+"px",this.__temp.s=1,this.__temp.v=1,Jt(this.__saturation_field,"left","#fff",this.__temp.toHexString()),this.__input.value=this.__color.toString(),bt.extend(this.__input.style,{backgroundColor:this.__color.toHexString(),color:"rgb("+n+","+n+","+n+")",textShadow:this.__input_textShadow+"rgba("+r+","+r+","+r+",.7)"})}}]),e}(),Qt=["-moz-","-o-","-webkit-","-ms-",""];function Jt(t,e,n,r){t.style.background="",bt.each(Qt,function(i){t.style.cssText+="background: "+i+"linear-gradient("+e+", "+n+" 0%, "+r+" 100%); "})}var $t=function(t,e){var n=t[e];return bt.isArray(arguments[2])||bt.isObject(arguments[2])?new Vt(t,e,arguments[2]):bt.isNumber(n)?bt.isNumber(arguments[2])&&bt.isNumber(arguments[3])?bt.isNumber(arguments[4])?new Yt(t,e,arguments[2],arguments[3],arguments[4]):new Yt(t,e,arguments[2],arguments[3]):bt.isNumber(arguments[4])?new qt(t,e,{min:arguments[2],max:arguments[3],step:arguments[4]}):new qt(t,e,{min:arguments[2],max:arguments[3]}):bt.isString(n)?new zt(t,e):bt.isFunction(n)?new Kt(t,e,""):bt.isBoolean(n)?new Gt(t,e):null},te=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){setTimeout(t,1e3/60)},ee=function(){function t(){At(this,t),this.backgroundElement=document.createElement("div"),bt.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear",transition:"opacity 0.2s linear"}),Bt.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),bt.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear",transition:"transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var e=this;Bt.bind(this.backgroundElement,"click",function(){e.hide()})}return Pt(t,[{key:"show",value:function(){var t=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),bt.defer(function(){t.backgroundElement.style.opacity=1,t.domElement.style.opacity=1,t.domElement.style.webkitTransform="scale(1)"})}},{key:"hide",value:function(){var t=this,e=function e(){t.domElement.style.display="none",t.backgroundElement.style.display="none",Bt.unbind(t.domElement,"webkitTransitionEnd",e),Bt.unbind(t.domElement,"transitionend",e),Bt.unbind(t.domElement,"oTransitionEnd",e)};Bt.bind(this.domElement,"webkitTransitionEnd",e),Bt.bind(this.domElement,"transitionend",e),Bt.bind(this.domElement,"oTransitionEnd",e),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"}},{key:"layout",value:function(){this.domElement.style.left=window.innerWidth/2-Bt.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-Bt.getHeight(this.domElement)/2+"px"}}]),t}();!function(t,e){var n=document,r=document.createElement("style");r.type="text/css",r.innerHTML=t;var i=n.getElementsByTagName("head")[0];try{i.appendChild(r)}catch(t){}}(function(t){if("undefined"!=typeof window){var e=document.createElement("style");return e.setAttribute("type","text/css"),e.innerHTML=t,document.head.appendChild(e),t}}(".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear;border:0;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button.close-top{position:relative}.dg.main .close-button.close-bottom{position:absolute}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-y:visible}.dg.a.has-save>ul.close-top{margin-top:0}.dg.a.has-save>ul.close-bottom{margin-top:27px}.dg.a.has-save>ul.closed{margin-top:0}.dg.a .save-row{top:0;z-index:1002}.dg.a .save-row.close-top{position:relative}.dg.a .save-row.close-bottom{position:fixed}.dg li{-webkit-transition:height .1s ease-out;-o-transition:height .1s ease-out;-moz-transition:height .1s ease-out;transition:height .1s ease-out;-webkit-transition:overflow .1s linear;-o-transition:overflow .1s linear;-moz-transition:overflow .1s linear;transition:overflow .1s linear}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li>*{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px;overflow:hidden}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .c{float:left;width:60%;position:relative}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:7px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .cr.color{overflow:visible}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.color{border-left:3px solid}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2FA1D6}.dg .cr.number input[type=text]{color:#2FA1D6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2FA1D6;max-width:100%}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}\n"));var ne="Default",re=function(){try{return!!window.localStorage}catch(t){return!1}}(),ie=void 0,oe=!0,ae=void 0,se=!1,ue=[],le=function t(e){var n=this,r=e||{};this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),Bt.addClass(this.domElement,"dg"),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],r=bt.defaults(r,{closeOnTop:!1,autoPlace:!0,width:t.DEFAULT_WIDTH}),r=bt.defaults(r,{resizable:r.autoPlace,hideable:r.autoPlace}),bt.isUndefined(r.load)?r.load={preset:ne}:r.preset&&(r.load.preset=r.preset),bt.isUndefined(r.parent)&&r.hideable&&ue.push(this),r.resizable=bt.isUndefined(r.parent)&&r.resizable,r.autoPlace&&bt.isUndefined(r.scrollable)&&(r.scrollable=!0);var i,o=re&&"true"===localStorage.getItem(me(0,"isLocal")),a=void 0,s=void 0;if(Object.defineProperties(this,{parent:{get:function(){return r.parent}},scrollable:{get:function(){return r.scrollable}},autoPlace:{get:function(){return r.autoPlace}},closeOnTop:{get:function(){return r.closeOnTop}},preset:{get:function(){return n.parent?n.getRoot().preset:r.load.preset},set:function(t){n.parent?n.getRoot().preset=t:r.load.preset=t,function(t){for(var e=0;e<t.__preset_select.length;e++)t.__preset_select[e].value===t.preset&&(t.__preset_select.selectedIndex=e)}(this),n.revert()}},width:{get:function(){return r.width},set:function(t){r.width=t,ye(n,t)}},name:{get:function(){return r.name},set:function(t){r.name=t,s&&(s.innerHTML=r.name)}},closed:{get:function(){return r.closed},set:function(e){r.closed=e,r.closed?Bt.addClass(n.__ul,t.CLASS_CLOSED):Bt.removeClass(n.__ul,t.CLASS_CLOSED),this.onResize(),n.__closeButton&&(n.__closeButton.innerHTML=e?t.TEXT_OPEN:t.TEXT_CLOSED)}},load:{get:function(){return r.load}},useLocalStorage:{get:function(){return o},set:function(t){re&&(o=t,t?Bt.bind(window,"unload",a):Bt.unbind(window,"unload",a),localStorage.setItem(me(0,"isLocal"),t))}}}),bt.isUndefined(r.parent)){if(r.closed=!1,Bt.addClass(this.domElement,t.CLASS_MAIN),Bt.makeSelectable(this.domElement,!1),re&&o){n.useLocalStorage=!0;var u=localStorage.getItem(me(0,"gui"));u&&(r.load=JSON.parse(u))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=t.TEXT_CLOSED,Bt.addClass(this.__closeButton,t.CLASS_CLOSE_BUTTON),r.closeOnTop?(Bt.addClass(this.__closeButton,t.CLASS_CLOSE_TOP),this.domElement.insertBefore(this.__closeButton,this.domElement.childNodes[0])):(Bt.addClass(this.__closeButton,t.CLASS_CLOSE_BOTTOM),this.domElement.appendChild(this.__closeButton)),Bt.bind(this.__closeButton,"click",function(){n.closed=!n.closed})}else{void 0===r.closed&&(r.closed=!0);var l=document.createTextNode(r.name);Bt.addClass(l,"controller-name"),s=ce(n,l),Bt.addClass(this.__ul,t.CLASS_CLOSED),Bt.addClass(s,"title"),Bt.bind(s,"click",function(t){return t.preventDefault(),n.closed=!n.closed,!1}),r.closed||(this.closed=!1)}r.autoPlace&&(bt.isUndefined(r.parent)&&(oe&&(ae=document.createElement("div"),Bt.addClass(ae,"dg"),Bt.addClass(ae,t.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(ae),oe=!1),ae.appendChild(this.domElement),Bt.addClass(this.domElement,t.CLASS_AUTO_PLACE)),this.parent||ye(n,r.width)),this.__resizeHandler=function(){n.onResizeDebounced()},Bt.bind(window,"resize",this.__resizeHandler),Bt.bind(this.__ul,"webkitTransitionEnd",this.__resizeHandler),Bt.bind(this.__ul,"transitionend",this.__resizeHandler),Bt.bind(this.__ul,"oTransitionEnd",this.__resizeHandler),this.onResize(),r.resizable&&function(t){var e=void 0;function n(n){return n.preventDefault(),t.width+=e-n.clientX,t.onResize(),e=n.clientX,!1}function r(){Bt.removeClass(t.__closeButton,le.CLASS_DRAG),Bt.unbind(window,"mousemove",n),Bt.unbind(window,"mouseup",r)}function i(i){return i.preventDefault(),e=i.clientX,Bt.addClass(t.__closeButton,le.CLASS_DRAG),Bt.bind(window,"mousemove",n),Bt.bind(window,"mouseup",r),!1}t.__resize_handle=document.createElement("div"),bt.extend(t.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"}),Bt.bind(t.__resize_handle,"mousedown",i),Bt.bind(t.__closeButton,"mousedown",i),t.domElement.insertBefore(t.__resize_handle,t.domElement.firstElementChild)}(this),this.saveToLocalStorageIfPossible=a=function(){re&&"true"===localStorage.getItem(me(0,"isLocal"))&&localStorage.setItem(me(0,"gui"),JSON.stringify(n.getSaveObject()))},r.parent||((i=n.getRoot()).width+=1,bt.defer(function(){i.width-=1}))};function ce(t,e,n){var r=document.createElement("li");return e&&r.appendChild(e),n?t.__ul.insertBefore(r,n):t.__ul.appendChild(r),t.onResize(),r}function he(t){Bt.unbind(window,"resize",t.__resizeHandler),t.saveToLocalStorageIfPossible&&Bt.unbind(window,"unload",t.saveToLocalStorageIfPossible)}function de(t,e){var n=t.__preset_select[t.__preset_select.selectedIndex];n.innerHTML=e?n.value+"*":n.value}function pe(t,e){var n=t.getRoot(),r=n.__rememberedObjects.indexOf(e.object);if(-1!==r){var i=n.__rememberedObjectIndecesToControllers[r];if(void 0===i&&(n.__rememberedObjectIndecesToControllers[r]=i={}),i[e.property]=e,n.load&&n.load.remembered){var o=n.load.remembered,a=void 0;if(o[t.preset])a=o[t.preset];else{if(!o[ne])return;a=o[ne]}if(a[r]&&void 0!==a[r][e.property]){var s=a[r][e.property];e.initialValue=s,e.setValue(s)}}}}function fe(t,e,n,r){if(void 0===e[n])throw new Error('Object "'+e+'" has no property "'+n+'"');var i=void 0;if(r.color)i=new Zt(e,n);else{var o=[e,n].concat(r.factoryArgs);i=$t.apply(t,o)}r.before instanceof kt&&(r.before=r.before.__li),pe(t,i),Bt.addClass(i.domElement,"c");var a=document.createElement("span");Bt.addClass(a,"property-name"),a.innerHTML=i.property;var s=document.createElement("div");s.appendChild(a),s.appendChild(i.domElement);var u=ce(t,s,r.before);return Bt.addClass(u,le.CLASS_CONTROLLER_ROW),Bt.addClass(u,i instanceof Zt?"color":Ct(i.getValue())),function(t,e,n){if(n.__li=e,n.__gui=t,bt.extend(n,{options:function(e){if(arguments.length>1){var r=n.__li.nextElementSibling;return n.remove(),fe(t,n.object,n.property,{before:r,factoryArgs:[bt.toArray(arguments)]})}if(bt.isArray(e)||bt.isObject(e)){var i=n.__li.nextElementSibling;return n.remove(),fe(t,n.object,n.property,{before:i,factoryArgs:[e]})}},name:function(t){return n.__li.firstElementChild.firstElementChild.innerHTML=t,n},listen:function(){return n.__gui.listen(n),n},remove:function(){return n.__gui.remove(n),n}}),n instanceof Yt){var r=new qt(n.object,n.property,{min:n.__min,max:n.__max,step:n.__step});bt.each(["updateDisplay","onChange","onFinishChange","step"],function(t){var e=n[t],i=r[t];n[t]=r[t]=function(){var t=Array.prototype.slice.call(arguments);return i.apply(r,t),e.apply(n,t)}}),Bt.addClass(e,"has-slider"),n.domElement.insertBefore(r.domElement,n.domElement.firstElementChild)}else if(n instanceof qt){var i=function(e){if(bt.isNumber(n.__min)&&bt.isNumber(n.__max)){var r=n.__li.firstElementChild.firstElementChild.innerHTML,i=n.__gui.__listening.indexOf(n)>-1;n.remove();var o=fe(t,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[n.__min,n.__max,n.__step]});return o.name(r),i&&o.listen(),o}return e};n.min=bt.compose(i,n.min),n.max=bt.compose(i,n.max)}else n instanceof Gt?(Bt.bind(e,"click",function(){Bt.fakeEvent(n.__checkbox,"click")}),Bt.bind(n.__checkbox,"click",function(t){t.stopPropagation()})):n instanceof Kt?(Bt.bind(e,"click",function(){Bt.fakeEvent(n.__button,"click")}),Bt.bind(e,"mouseover",function(){Bt.addClass(n.__button,"hover")}),Bt.bind(e,"mouseout",function(){Bt.removeClass(n.__button,"hover")})):n instanceof Zt&&(Bt.addClass(e,"color"),n.updateDisplay=bt.compose(function(t){return e.style.borderLeftColor=n.__color.toString(),t},n.updateDisplay),n.updateDisplay());n.setValue=bt.compose(function(e){return t.getRoot().__preset_select&&n.isModified()&&de(t.getRoot(),!0),e},n.setValue)}(t,u,i),t.__controllers.push(i),i}function me(t,e){return document.location.href+"."+e}function ve(t,e,n){var r=document.createElement("option");r.innerHTML=e,r.value=e,t.__preset_select.appendChild(r),n&&(t.__preset_select.selectedIndex=t.__preset_select.length-1)}function ge(t,e){e.style.display=t.useLocalStorage?"block":"none"}function ye(t,e){t.domElement.style.width=e+"px",t.__save_row&&t.autoPlace&&(t.__save_row.style.width=e+"px"),t.__closeButton&&(t.__closeButton.style.width=e+"px")}function _e(t,e){var n={};return bt.each(t.__rememberedObjects,function(r,i){var o={};bt.each(t.__rememberedObjectIndecesToControllers[i],function(t,n){o[n]=e?t.initialValue:t.getValue()}),n[i]=o}),n}le.toggleHide=function(){se=!se,bt.each(ue,function(t){t.domElement.style.display=se?"none":""})},le.CLASS_AUTO_PLACE="a",le.CLASS_AUTO_PLACE_CONTAINER="ac",le.CLASS_MAIN="main",le.CLASS_CONTROLLER_ROW="cr",le.CLASS_TOO_TALL="taller-than-window",le.CLASS_CLOSED="closed",le.CLASS_CLOSE_BUTTON="close-button",le.CLASS_CLOSE_TOP="close-top",le.CLASS_CLOSE_BOTTOM="close-bottom",le.CLASS_DRAG="drag",le.DEFAULT_WIDTH=245,le.TEXT_CLOSED="Close Controls",le.TEXT_OPEN="Open Controls",le._keydownHandler=function(t){"text"===document.activeElement.type||72!==t.which&&72!==t.keyCode||le.toggleHide()},Bt.bind(window,"keydown",le._keydownHandler,!1),bt.extend(le.prototype,{add:function(t,e){return fe(this,t,e,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(t,e){return fe(this,t,e,{color:!0})},remove:function(t){this.__ul.removeChild(t.__li),this.__controllers.splice(this.__controllers.indexOf(t),1);var e=this;bt.defer(function(){e.onResize()})},destroy:function(){if(this.parent)throw new Error("Only the root GUI should be removed with .destroy(). For subfolders, use gui.removeFolder(folder) instead.");this.autoPlace&&ae.removeChild(this.domElement);var t=this;bt.each(this.__folders,function(e){t.removeFolder(e)}),Bt.unbind(window,"keydown",le._keydownHandler,!1),he(this)},addFolder:function(t){if(void 0!==this.__folders[t])throw new Error('You already have a folder in this GUI by the name "'+t+'"');var e={name:t,parent:this};e.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[t]&&(e.closed=this.load.folders[t].closed,e.load=this.load.folders[t]);var n=new le(e);this.__folders[t]=n;var r=ce(this,n.domElement);return Bt.addClass(r,"folder"),n},removeFolder:function(t){this.__ul.removeChild(t.domElement.parentElement),delete this.__folders[t.name],this.load&&this.load.folders&&this.load.folders[t.name]&&delete this.load.folders[t.name],he(t);var e=this;bt.each(t.__folders,function(e){t.removeFolder(e)}),bt.defer(function(){e.onResize()})},open:function(){this.closed=!1},close:function(){this.closed=!0},onResize:function(){var t=this.getRoot();if(t.scrollable){var e=Bt.getOffset(t.__ul).top,n=0;bt.each(t.__ul.childNodes,function(e){t.autoPlace&&e===t.__save_row||(n+=Bt.getHeight(e))}),window.innerHeight-e-20<n?(Bt.addClass(t.domElement,le.CLASS_TOO_TALL),t.__ul.style.height=window.innerHeight-e-20+"px"):(Bt.removeClass(t.domElement,le.CLASS_TOO_TALL),t.__ul.style.height="auto")}t.__resize_handle&&bt.defer(function(){t.__resize_handle.style.height=t.__ul.offsetHeight+"px"}),t.__closeButton&&(t.__closeButton.style.width=t.width+"px")},onResizeDebounced:bt.debounce(function(){this.onResize()},50),remember:function(){if(bt.isUndefined(ie)&&((ie=new ee).domElement.innerHTML='<div id="dg-save" class="dg dialogue">\n\n  Here\'s the new load parameter for your <code>GUI</code>\'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>\'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n\n    </div>\n\n  </div>\n\n</div>'),this.parent)throw new Error("You can only call remember on a top level GUI.");var t=this;bt.each(Array.prototype.slice.call(arguments),function(e){0===t.__rememberedObjects.length&&function(t){var e=t.__save_row=document.createElement("li");Bt.addClass(t.domElement,"has-save"),t.__ul.insertBefore(e,t.__ul.firstChild),Bt.addClass(e,"save-row");var n=document.createElement("span");n.innerHTML="&nbsp;",Bt.addClass(n,"button gears");var r=document.createElement("span");r.innerHTML="Save",Bt.addClass(r,"button"),Bt.addClass(r,"save");var i=document.createElement("span");i.innerHTML="New",Bt.addClass(i,"button"),Bt.addClass(i,"save-as");var o=document.createElement("span");o.innerHTML="Revert",Bt.addClass(o,"button"),Bt.addClass(o,"revert");var a=t.__preset_select=document.createElement("select");if(t.load&&t.load.remembered?bt.each(t.load.remembered,function(e,n){ve(t,n,n===t.preset)}):ve(t,ne,!1),Bt.bind(a,"change",function(){for(var e=0;e<t.__preset_select.length;e++)t.__preset_select[e].innerHTML=t.__preset_select[e].value;t.preset=this.value}),e.appendChild(a),e.appendChild(n),e.appendChild(r),e.appendChild(i),e.appendChild(o),re){var s=document.getElementById("dg-local-explain"),u=document.getElementById("dg-local-storage");document.getElementById("dg-save-locally").style.display="block","true"===localStorage.getItem(me(0,"isLocal"))&&u.setAttribute("checked","checked"),ge(t,s),Bt.bind(u,"change",function(){t.useLocalStorage=!t.useLocalStorage,ge(t,s)})}var l=document.getElementById("dg-new-constructor");Bt.bind(l,"keydown",function(t){!t.metaKey||67!==t.which&&67!==t.keyCode||ie.hide()}),Bt.bind(n,"click",function(){l.innerHTML=JSON.stringify(t.getSaveObject(),void 0,2),ie.show(),l.focus(),l.select()}),Bt.bind(r,"click",function(){t.save()}),Bt.bind(i,"click",function(){var e=prompt("Enter a new preset name.");e&&t.saveAs(e)}),Bt.bind(o,"click",function(){t.revert()})}(t),-1===t.__rememberedObjects.indexOf(e)&&t.__rememberedObjects.push(e)}),this.autoPlace&&ye(this,this.width)},getRoot:function(){for(var t=this;t.parent;)t=t.parent;return t},getSaveObject:function(){var t=this.load;return t.closed=this.closed,this.__rememberedObjects.length>0&&(t.preset=this.preset,t.remembered||(t.remembered={}),t.remembered[this.preset]=_e(this)),t.folders={},bt.each(this.__folders,function(e,n){t.folders[n]=e.getSaveObject()}),t},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=_e(this),de(this,!1),this.saveToLocalStorageIfPossible()},saveAs:function(t){this.load.remembered||(this.load.remembered={},this.load.remembered[ne]=_e(this,!0)),this.load.remembered[t]=_e(this),this.preset=t,ve(this,t,!0),this.saveToLocalStorageIfPossible()},revert:function(t){bt.each(this.__controllers,function(e){this.getRoot().load.remembered?pe(t||this.getRoot(),e):e.setValue(e.initialValue),e.__onFinishChange&&e.__onFinishChange.call(e,e.getValue())},this),bt.each(this.__folders,function(t){t.revert(t)}),t||de(this.getRoot(),!1)},listen:function(t){var e=0===this.__listening.length;this.__listening.push(t),e&&function t(e){0!==e.length&&te.call(window,function(){t(e)}),bt.each(e,function(t){t.updateDisplay()})}(this.__listening)},updateDisplay:function(){bt.each(this.__controllers,function(t){t.updateDisplay()}),bt.each(this.__folders,function(t){t.updateDisplay()})}});var be=le,we=function(){function t(t){var e=new nt.Group,n=new nt.CylinderGeometry(5,5,300,32),r=(new nt.TextureLoader).load("../../../assets/textures/plastico.jpg");r.wrapS=nt.RepeatWrapping,r.repeat.set(3,1),r.anisotropy=16;var i=new nt.MeshLambertMaterial({map:r});this.mesh=new nt.Mesh(n,i),this.mesh.position.x=-125,this.mesh.position.y=50,this.mesh.position.z=125,this.mesh.rotation.z=Math.PI/2,this.mesh.receiveShadow=!0,this.mesh.castShadow=!0,this.controller=new dt(e,t.camera,t.cameraControls,t.renderer,t.render),t.scene.add(this.controller.control),this.content=e}return t.prototype.replaceTexture=function(t){this.mesh.material.map=nt.ImageUtils.loadTexture(t),this.mesh.material.needsUpdate=!0},t.prototype.toggleControls=function(){this.controller.control.enabled=!this.controller.control.enabled,this.controller.control.visible=!this.controller.control.visible},t}(),xe=n("TczM");class Ee{static exportToJSON(t){var e=t.toJSON();try{e=(e=JSON.stringify(e,parseNumber,"\t")).replace(/[\n\t]+([\d\.e\-\[\]]+)/g,"$1")}catch(t){e=JSON.stringify(e)}Se(e,"scene.json")}static exportToGLTF(t){(new xe).parse(t,function(t){Se(JSON.stringify(t,null,2),"scene.gltf")},null)}}function Se(t,e){!function(t,e){var n=document.createElement("a");n.style.display="none",document.body.appendChild(n),n.href=URL.createObjectURL(t),n.download=e||"data.json",n.click()}(new Blob([t],{type:"text/plain"}),e)}var Te=n("vS4O"),Me=n.n(Te),Ce=function(){function t(){}return t.importGLTF=function(t,e){(new Me.a).load(t,function(t){e.add(t.scene)},function(t){console.log(t.loaded/t.total*100+"% loaded")},function(t){console.log("An error happened")})},t.importJSON=function(t){var e=new nt.ObjectLoader,n=new nt.Scene;return e.load(t,function(t){n.add(t)},function(t){console.log(t.loaded/t.total*100+"% loaded")},function(t){console.error("An error happened")}),n},t}(),Ae=function(){return function(t,e){var n=new be,r=n.addFolder("Lights & Shadows");r.add(t.light,"visible").name("Directional Light").listen(),r.add(t.ambientLight,"visible").name("Ambient Light").listen(),r.add(t.light,"castShadow").name("Shadows").listen(),r.add(t.light,"intensity",1,50).name("Directional Light Intensity").listen(),r.add(t.ambientLight,"intensity",1,50).name("Ambient Light Intensity").listen(),r.add(t.light.position,"x",-275,275).name("Pos. Light X").listen(),r.add(t.light.position,"y",-275,275).name("Pos. Light Y").listen(),r.add(t.light.position,"z",-275,275).name("Pos. Light Z").listen(),n.addFolder("Object Controls").add({Toggle:function(){e.toggleControls(),console.log("Controls toggled.")}},"Toggle");var i=e.content,o=n.addFolder("Closet Size");o.add(i.scale,"x",1,4).name("Closet Width").listen(),o.add(i.scale,"z",1,4).name("Closet Depth").listen();var a=n.addFolder("Material");a.add({Madeira1:function(){e.replaceTexture("../../../assets/textures/madeira.jpeg"),console.log("Madeira1 selected.")}},"Madeira1"),a.add({Madeira2:function(){e.replaceTexture("../../../assets/textures/madeira.jpg"),console.log("Madeira2 selected.")}},"Madeira2"),a.add({Mahogany:function(){e.replaceTexture("../../../assets/textures/mahogany.jpg"),console.log("Mahogany selected.")}},"Mahogany"),a.add({MahoganyGrey:function(){e.replaceTexture("../../../assets/textures/mahogany-cinza.jpg"),console.log("Mahogany grey selected.")}},"MahoganyGrey"),a.add({PineDark:function(){e.replaceTexture("../../../assets/textures/pine-dark-brown.jpg"),console.log("Mahogany grey selected.")}},"PineDark"),a.add({PineLight:function(){e.replaceTexture("../../../assets/textures/pine-light-brown.jpg"),console.log("Pine Light selected.")}},"PineLight");var s=n.addFolder("Finish");s.add({MadeiraPolida:function(){e.replaceTexture("../../../assets/textures/madeira1Polida.jpg"),console.log("Madeira Polida selected.")}},"MadeiraPolida"),s.add({Envernizado:function(){e.replaceTexture("../../../assets/textures/envernizado.jpg"),console.log("Envernizado selected.")}},"Envernizado"),s.add({Brilhante:function(){e.replaceTexture("../../../assets/textures/brilhante.jpg"),console.log("Brilhante selected.")}},"Brilhante");var u=n.addFolder("Music"),l={Pause:function(){t.music.pause()},Play:function(){t.music.play()},Stop:function(){t.music.stop()}};u.add(l,"Pause"),u.add(l,"Play"),u.add(l,"Stop");var c=t.scene,h=n.addFolder("Add Product"),d=e.shelfList,p=h.addFolder("Shelves"),f={add:function(){var e=new ft(t);d.push(e),c.add(d[d.length-1].content),console.log("Shelf created")},remove:function(){var t=d.pop();c.remove(t.controller.control),c.remove(t.content),console.log("Shelf removed")}};p.add(f,"add"),p.add(f,"remove");var m=e.wallList,v=h.addFolder("Walls"),g={add:function(){var e=new mt(t);m.push(e),c.add(m[m.length-1].content),console.log("Wall created")},remove:function(){var t=m.pop();c.remove(t.controller.control),c.remove(t.content),console.log("Wall removed")}};v.add(g,"add"),v.add(g,"remove");var y,_=e.drawerList,b=h.addFolder("Drawers"),w={add:function(){var e=new pt(t);_.push(e),c.add(_[_.length-1].content),console.log("Drawer created")},remove:function(){var t=_.pop();c.remove(t.controller.control),c.remove(t.content),console.log("Drawer removed")}};b.add(w,"add"),b.add(w,"remove");var x=h.addFolder("Crossheads"),E={add:function(){y=new we(t),c.add(y.content),console.log("Crosshead Stand created")},remove:function(){c.remove(y.controller.control),c.remove(y.content),console.log("Crosshead Stand removed")}};x.add(E,"add"),x.add(E,"remove");var S=n.addFolder("Import & Export"),T={ImportFromJSON:function(){c=Ce.importJSON("./scene.json"),console.log("Scene imported from JSON file")},ExportToJSON:function(){Ee.exportToJSON(c),console.log("Scene exported to JSON file")},ImportFromGLTF:function(){Pe(c),Ce.importGLTF("./scene.gltf",c),console.log("Scene exported to GLTF file")},ExportToGLTF:function(){Ee.exportToGLTF(c),console.log("Scene exported to GLTF file")},ResetScene:function(){!function(t){var e,n,r,i,o=t.scene,a=t.cameraControls;Pe(o),e=new rt,n=new at,(a=new it(n,e.domElement)).update(),a.addEventListener("change",t.render),o=new st,i=ut.createAmbientLight(),o.add(i),r=ut.createDirectionalLight(),o.add(r);var s=lt.createGround("../../../assets/textures/grasslight-big.jpg");o.add(s),ct.createAudio("../../../assets/sound/valkyries.mp3",n);var u=new vt(null,null,null,null,null,null);o.add(u.content)}(t),console.log("Scene reset")}};S.add(T,"ImportFromJSON"),S.add(T,"ExportToJSON"),S.add(T,"ImportFromGLTF"),S.add(T,"ExportToGLTF"),S.add(T,"ResetScene")}}();function Pe(t){for(;t.children.length>0;)Pe(t.children[0]),t.remove(t.children[0]);t.geometry&&t.geometry.dispose(),t.material&&t.material.dispose(),t.texture&&t.texture.dispose()}var Oe=function(){function t(){this.musicURL="../../assets/sound/valkyries-rock.mp3"}return t.prototype.createScene=function(t){this.canvas=document.getElementById(t),this.renderer=rt.createRenderer(this.canvas),this.camera=at.createCamera(),this.scene=st.createScene(),this.scene.add(this.camera),this.cameraControls=at.createCameraControls(this.camera,this.renderer,this.render),this.ambientLight=ut.createAmbientLight(),this.scene.add(this.ambientLight),this.light=ut.createDirectionalLight(),this.scene.add(this.light),this.ground=lt.createGround("../../assets/textures/grasslight-big.jpg"),this.scene.add(this.ground),this.music=ct.createAudio(this.musicURL,this.camera),this.closet=new vt(null,null,null,null,null,null),this.scene.add(this.closet.content),this.GUI=new Ae(this,this.closet)},t.prototype.animate=function(){var t=this;window.addEventListener("DOMContentLoaded",function(){t.render()}),window.addEventListener("resize",function(){t.resize()})},t.prototype.render=function(){var t=this;requestAnimationFrame(function(){t.render()}),this.renderer.render(this.scene,this.camera)},t.prototype.resize=function(){var t=window.innerWidth,e=window.innerHeight;this.camera.aspect=t/e,this.camera.updateProjectionMatrix(),this.renderer.setSize(t,e)},t.ngInjectableDef=r.W({factory:function(){return new t},token:t,providedIn:"root"}),t}(),Re=function(){function t(t){this.engServ=t,this.canEleId="renderCanvas"}return t.prototype.ngOnInit=function(){this.engServ.createScene(this.canEleId),this.engServ.animate()},t}(),Le=r.Ra({encapsulation:2,styles:[],data:{}});function Ie(t){return r.lb(0,[(t()(),r.Ta(0,0,null,null,1,"div",[["class","engine-wrapper"]],null,null,null,null,null)),(t()(),r.Ta(1,0,null,null,0,"canvas",[["id","renderCanvas"]],null,null,null,null,null))],null,null)}var Ne=r.Pa("app-engine",Re,function(t){return r.lb(0,[(t()(),r.Ta(0,0,null,null,1,"app-engine",[],null,null,null,Ie,Le)),r.Sa(1,114688,null,0,Re,[Oe],null,null)],function(t,e){t(e,1,0)},null)},{},{},[]),De=function(t,e,n,r,i,o,a,s,u,l){this.id=t,this.name=e,this.category=n,this.height=r,this.width=i,this.depht=o,this.material=a,this.finish=s,this.children=u,this.price=l},ke=function(){function t(){this.item=new De(1,"Armario","Armario de sala",10,20,30,"madeira","polido",[],2),this.item2=new De(2,"Gaveta","Gaveta de sala",10,20,30,"madeira","polido",[],200),this.list=[this.item,this.item2]}return t.prototype.ngOnInit=function(){},t.prototype.onSelect=function(t){this.selectedItem=t},t}(),Fe=r.Ra({encapsulation:0,styles:[[".selected[_ngcontent-%COMP%]{background-color:#cfd8dc!important;color:#fff}.list[_ngcontent-%COMP%]{margin:0 0 2em;list-style-type:none;padding:0;width:15em}.list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{cursor:pointer;position:relative;left:0;background-color:#eee;margin:.5em;padding:.3em 0;height:2.1em;border-radius:4px}.list[_ngcontent-%COMP%]   li.selected[_ngcontent-%COMP%]:hover{background-color:#bbd8dc!important;color:#fff}.list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{color:#607d8b;background-color:#ddd;left:.1em}.list[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{position:relative;top:-3px}.list[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{display:inline-block;font-size:small;color:#fff;padding:.8em .7em 0;background-color:#607d8b;line-height:1em;position:relative;left:-1px;top:-4px;height:2.2em;margin-right:.8em;border-radius:4px 0 0 4px}.b[_ngcontent-%COMP%]{margin-right:10px}"]],data:{}});function je(t){return r.lb(0,[(t()(),r.Ta(0,0,null,null,3,"li",[],[[2,"selected",null]],[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.onSelect(t.context.$implicit)&&r),r},null,null)),(t()(),r.Ta(1,0,null,null,1,"span",[["class","badge"]],null,null,null,null,null)),(t()(),r.jb(2,null,["",""])),(t()(),r.jb(3,null,[" "," "]))],null,function(t,e){t(e,0,0,e.context.$implicit===e.component.selectedItem),t(e,2,0,e.context.$implicit.id),t(e,3,0,e.context.$implicit.name)})}function Ue(t){return r.lb(0,[(t()(),r.Ta(0,0,null,null,54,"div",[],null,null,null,null,null)),(t()(),r.Ta(1,0,null,null,2,"h2",[],null,null,null,null,null)),(t()(),r.jb(2,null,[""," Details"])),r.fb(3,1),(t()(),r.Ta(4,0,null,null,3,"div",[],null,null,null,null,null)),(t()(),r.Ta(5,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),r.jb(-1,null,["Id: "])),(t()(),r.jb(7,null,[" "," "])),(t()(),r.Ta(8,0,null,null,3,"div",[],null,null,null,null,null)),(t()(),r.Ta(9,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),r.jb(-1,null,["Name: "])),(t()(),r.jb(11,null,[" "," "])),(t()(),r.Ta(12,0,null,null,3,"div",[],null,null,null,null,null)),(t()(),r.Ta(13,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),r.jb(-1,null,["Category: "])),(t()(),r.jb(15,null,[" "," "])),(t()(),r.Ta(16,0,null,null,7,"label",[],null,null,null,null,null)),(t()(),r.jb(-1,null,["Height: "])),(t()(),r.Ta(18,0,null,null,5,"input",[["placeholder","height"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(t,e,n){var i=!0,o=t.component;return"input"===e&&(i=!1!==r.cb(t,19)._handleInput(n.target.value)&&i),"blur"===e&&(i=!1!==r.cb(t,19).onTouched()&&i),"compositionstart"===e&&(i=!1!==r.cb(t,19)._compositionStart()&&i),"compositionend"===e&&(i=!1!==r.cb(t,19)._compositionEnd(n.target.value)&&i),"ngModelChange"===e&&(i=!1!==(o.selectedItem.height=n)&&i),i},null,null)),r.Sa(19,16384,null,0,j.c,[r.G,r.l,[2,j.a]],null,null),r.gb(1024,null,j.k,function(t){return[t]},[j.c]),r.Sa(21,671744,null,0,j.p,[[8,null],[8,null],[8,null],[6,j.k]],{model:[0,"model"]},{update:"ngModelChange"}),r.gb(2048,null,j.l,null,[j.p]),r.Sa(23,16384,null,0,j.m,[[4,j.l]],null,null),(t()(),r.Ta(24,0,null,null,7,"label",[],null,null,null,null,null)),(t()(),r.jb(-1,null,["Width: "])),(t()(),r.Ta(26,0,null,null,5,"input",[["placeholder","width"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(t,e,n){var i=!0,o=t.component;return"input"===e&&(i=!1!==r.cb(t,27)._handleInput(n.target.value)&&i),"blur"===e&&(i=!1!==r.cb(t,27).onTouched()&&i),"compositionstart"===e&&(i=!1!==r.cb(t,27)._compositionStart()&&i),"compositionend"===e&&(i=!1!==r.cb(t,27)._compositionEnd(n.target.value)&&i),"ngModelChange"===e&&(i=!1!==(o.selectedItem.width=n)&&i),i},null,null)),r.Sa(27,16384,null,0,j.c,[r.G,r.l,[2,j.a]],null,null),r.gb(1024,null,j.k,function(t){return[t]},[j.c]),r.Sa(29,671744,null,0,j.p,[[8,null],[8,null],[8,null],[6,j.k]],{model:[0,"model"]},{update:"ngModelChange"}),r.gb(2048,null,j.l,null,[j.p]),r.Sa(31,16384,null,0,j.m,[[4,j.l]],null,null),(t()(),r.Ta(32,0,null,null,7,"label",[],null,null,null,null,null)),(t()(),r.jb(-1,null,["Depht: "])),(t()(),r.Ta(34,0,null,null,5,"input",[["placeholder","depht"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(t,e,n){var i=!0,o=t.component;return"input"===e&&(i=!1!==r.cb(t,35)._handleInput(n.target.value)&&i),"blur"===e&&(i=!1!==r.cb(t,35).onTouched()&&i),"compositionstart"===e&&(i=!1!==r.cb(t,35)._compositionStart()&&i),"compositionend"===e&&(i=!1!==r.cb(t,35)._compositionEnd(n.target.value)&&i),"ngModelChange"===e&&(i=!1!==(o.selectedItem.depht=n)&&i),i},null,null)),r.Sa(35,16384,null,0,j.c,[r.G,r.l,[2,j.a]],null,null),r.gb(1024,null,j.k,function(t){return[t]},[j.c]),r.Sa(37,671744,null,0,j.p,[[8,null],[8,null],[8,null],[6,j.k]],{model:[0,"model"]},{update:"ngModelChange"}),r.gb(2048,null,j.l,null,[j.p]),r.Sa(39,16384,null,0,j.m,[[4,j.l]],null,null),(t()(),r.Ta(40,0,null,null,3,"div",[],null,null,null,null,null)),(t()(),r.Ta(41,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),r.jb(-1,null,["Material: "])),(t()(),r.jb(43,null,[" "," "])),(t()(),r.Ta(44,0,null,null,3,"div",[],null,null,null,null,null)),(t()(),r.Ta(45,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),r.jb(-1,null,["Finish: "])),(t()(),r.jb(47,null,[" "," "])),(t()(),r.Ta(48,0,null,null,3,"div",[],null,null,null,null,null)),(t()(),r.Ta(49,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),r.jb(-1,null,["Price: "])),(t()(),r.jb(51,null,[" "," "])),(t()(),r.Ta(52,0,null,null,1,"button",[["type","button"]],null,null,null,null,null)),(t()(),r.jb(-1,null,["Save Item"])),(t()(),r.Ta(54,0,null,null,0,"br",[],null,null,null,null,null))],function(t,e){var n=e.component;t(e,21,0,n.selectedItem.height),t(e,29,0,n.selectedItem.width),t(e,37,0,n.selectedItem.depht)},function(t,e){var n=e.component;t(e,2,0,r.kb(e,2,0,t(e,3,0,r.cb(e.parent,0),n.selectedItem.name))),t(e,7,0,n.selectedItem.id),t(e,11,0,n.selectedItem.name),t(e,15,0,n.selectedItem.category),t(e,18,0,r.cb(e,23).ngClassUntouched,r.cb(e,23).ngClassTouched,r.cb(e,23).ngClassPristine,r.cb(e,23).ngClassDirty,r.cb(e,23).ngClassValid,r.cb(e,23).ngClassInvalid,r.cb(e,23).ngClassPending),t(e,26,0,r.cb(e,31).ngClassUntouched,r.cb(e,31).ngClassTouched,r.cb(e,31).ngClassPristine,r.cb(e,31).ngClassDirty,r.cb(e,31).ngClassValid,r.cb(e,31).ngClassInvalid,r.cb(e,31).ngClassPending),t(e,34,0,r.cb(e,39).ngClassUntouched,r.cb(e,39).ngClassTouched,r.cb(e,39).ngClassPristine,r.cb(e,39).ngClassDirty,r.cb(e,39).ngClassValid,r.cb(e,39).ngClassInvalid,r.cb(e,39).ngClassPending),t(e,43,0,n.selectedItem.material),t(e,47,0,n.selectedItem.finish),t(e,51,0,n.selectedItem.price)})}function Be(t){return r.lb(0,[r.eb(0,h.n,[]),(t()(),r.Ta(1,0,null,null,1,"h2",[],null,null,null,null,null)),(t()(),r.jb(-1,null,["My ProductItem"])),(t()(),r.Ta(3,0,null,null,2,"ul",[["class","list"]],null,null,null,null,null)),(t()(),r.Ka(16777216,null,null,1,null,je)),r.Sa(5,278528,null,0,h.h,[r.S,r.P,r.v],{ngForOf:[0,"ngForOf"]},null),(t()(),r.Ka(16777216,null,null,1,null,Ue)),r.Sa(7,16384,null,0,h.i,[r.S,r.P],{ngIf:[0,"ngIf"]},null),(t()(),r.Ta(8,0,null,null,0,"br",[],null,null,null,null,null)),(t()(),r.Ta(9,0,null,null,1,"button",[["class","b"],["type","button"]],null,null,null,null,null)),(t()(),r.jb(-1,null,["Cancel"])),(t()(),r.Ta(11,0,null,null,1,"button",[["class","b"],["type","button"]],null,null,null,null,null)),(t()(),r.jb(-1,null,["Save"]))],function(t,e){var n=e.component;t(e,5,0,n.list),t(e,7,0,n.selectedItem)},null)}var Ge=r.Pa("app-order",ke,function(t){return r.lb(0,[(t()(),r.Ta(0,0,null,null,1,"app-order",[],null,null,null,Be,Fe)),r.Sa(1,114688,null,0,ke,[],null,null)],function(t,e){t(e,1,0)},null)},{},{},[]),Ve=n("t/Na"),ze=(new Ve.g({"Content-Type":"application/json"}),function(){function t(t){this.http=t,this.url="http://sic-e.herokuapp.com/orders/orderHistory/"}return t.prototype.getOrders=function(t){return this.http.get(this.url+t)},t.prototype.getOrdersbyDate=function(t,e,n){return this.http.get(this.url+t+"/"+e+"/"+n)},t.prototype.getOrderbyState=function(t,e){return this.http.get(this.url+t+"/"+e)},t.ngInjectableDef=r.W({factory:function(){return new t(r.Aa(Ve.c))},token:t,providedIn:"root"}),t}()),He=n("qXBG"),We=function(){function t(t,e){this.orderHistoryService=t,this.authService=e}return t.prototype.ngOnInit=function(){this.getOrders()},t.prototype.getOrders=function(){var t=this;1==this.authService.isAuthenticated()?this.orderHistoryService.getOrders(this.authService.getCurrentUserUid()).subscribe(function(e){return t.orders=e}):console.log("Utilizador n\xe3o logado!!")},t.prototype.getOrdersbyDate=function(t,e){var n=this;1==this.authService.isAuthenticated()?this.orderHistoryService.getOrdersbyDate(this.authService.getCurrentUserUid(),t,e).subscribe(function(t){return n.orders=t}):console.log("Utilizador n\xe3o logado!!")},t.prototype.getOrdersbyState=function(t){var e=this;1==this.authService.isAuthenticated()?this.orderHistoryService.getOrderbyState(this.authService.getCurrentUserUid(),t).subscribe(function(t){return e.orders=t}):console.log("Utilizador n\xe3o logado!!")},t}(),qe=r.Ra({encapsulation:0,styles:[[".b[_ngcontent-%COMP%]{margin-right:10px}"]],data:{}});function Xe(t){return r.lb(0,[(t()(),r.Ta(0,0,null,null,2,"li",[],null,null,null,null,null)),(t()(),r.Ta(1,0,null,null,1,"span",[["class","badge"]],null,null,null,null,null)),(t()(),r.jb(2,null,["","----","----",""]))],null,function(t,e){t(e,2,0,e.context.$implicit._id,e.context.$implicit.state,e.context.$implicit.datePlaced)})}function Ye(t){return r.lb(0,[(t()(),r.Ta(0,0,null,null,4,"div",[],null,null,null,null,null)),(t()(),r.jb(-1,null,[" Init Date : "])),(t()(),r.Ta(2,0,[["dt_init",1]],null,0,"input",[["class","b"],["id","dt_init"],["name","Init_Date"],["type","date"]],null,null,null,null,null)),(t()(),r.jb(-1,null,[" End Date : "])),(t()(),r.Ta(4,0,[["dt_end",1]],null,0,"input",[["class","b"],["id","dt_end"],["name","End_Date"],["type","date"]],null,null,null,null,null)),(t()(),r.Ta(5,0,null,null,4,"div",[],null,null,null,null,null)),(t()(),r.Ta(6,0,null,null,1,"button",[["class","b"],["type","button"]],null,null,null,null,null)),(t()(),r.jb(-1,null,["Cancel"])),(t()(),r.Ta(8,0,null,null,1,"button",[["class","b"],["type","button"]],null,[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.getOrdersbyDate(r.cb(t,2).value,r.cb(t,4).value)&&i),i},null,null)),(t()(),r.jb(-1,null,["OK"])),(t()(),r.Ta(10,0,null,null,0,"br",[],null,null,null,null,null)),(t()(),r.Ta(11,0,null,null,0,"br",[],null,null,null,null,null)),(t()(),r.Ta(12,0,null,null,41,"div",[],null,null,null,null,null)),(t()(),r.Ta(13,0,[["state_id",1]],null,40,"select",[["id","state_id"]],null,null,null,null,null)),(t()(),r.Ta(14,0,null,null,3,"option",[["value","0"]],null,null,null,null,null)),r.Sa(15,147456,null,0,j.q,[r.l,r.G,[8,null]],{value:[0,"value"]},null),r.Sa(16,147456,null,0,j.A,[r.l,r.G,[8,null]],{value:[0,"value"]},null),(t()(),r.jb(-1,null,["Select State:"])),(t()(),r.Ta(18,0,null,null,3,"option",[["value","SUBMITTED"]],null,null,null,null,null)),r.Sa(19,147456,null,0,j.q,[r.l,r.G,[8,null]],{value:[0,"value"]},null),r.Sa(20,147456,null,0,j.A,[r.l,r.G,[8,null]],{value:[0,"value"]},null),(t()(),r.jb(-1,null,["Submitted Order"])),(t()(),r.Ta(22,0,null,null,3,"option",[["value","VALIDATED"]],null,null,null,null,null)),r.Sa(23,147456,null,0,j.q,[r.l,r.G,[8,null]],{value:[0,"value"]},null),r.Sa(24,147456,null,0,j.A,[r.l,r.G,[8,null]],{value:[0,"value"]},null),(t()(),r.jb(-1,null,["Validated Order"])),(t()(),r.Ta(26,0,null,null,3,"option",[["value","ASSIGNED"]],null,null,null,null,null)),r.Sa(27,147456,null,0,j.q,[r.l,r.G,[8,null]],{value:[0,"value"]},null),r.Sa(28,147456,null,0,j.A,[r.l,r.G,[8,null]],{value:[0,"value"]},null),(t()(),r.jb(-1,null,["Assigned Order"])),(t()(),r.Ta(30,0,null,null,3,"option",[["value","IN_PRODUCTION"]],null,null,null,null,null)),r.Sa(31,147456,null,0,j.q,[r.l,r.G,[8,null]],{value:[0,"value"]},null),r.Sa(32,147456,null,0,j.A,[r.l,r.G,[8,null]],{value:[0,"value"]},null),(t()(),r.jb(-1,null,["In Production Order"])),(t()(),r.Ta(34,0,null,null,3,"option",[["value","PACKING"]],null,null,null,null,null)),r.Sa(35,147456,null,0,j.q,[r.l,r.G,[8,null]],{value:[0,"value"]},null),r.Sa(36,147456,null,0,j.A,[r.l,r.G,[8,null]],{value:[0,"value"]},null),(t()(),r.jb(-1,null,["Packing Order"])),(t()(),r.Ta(38,0,null,null,3,"option",[["value","READY_TO_SHIP"]],null,null,null,null,null)),r.Sa(39,147456,null,0,j.q,[r.l,r.G,[8,null]],{value:[0,"value"]},null),r.Sa(40,147456,null,0,j.A,[r.l,r.G,[8,null]],{value:[0,"value"]},null),(t()(),r.jb(-1,null,["Ready To Ship Order"])),(t()(),r.Ta(42,0,null,null,3,"option",[["value","SHIPPED"]],null,null,null,null,null)),r.Sa(43,147456,null,0,j.q,[r.l,r.G,[8,null]],{value:[0,"value"]},null),r.Sa(44,147456,null,0,j.A,[r.l,r.G,[8,null]],{value:[0,"value"]},null),(t()(),r.jb(-1,null,["Shipped Order"])),(t()(),r.Ta(46,0,null,null,3,"option",[["value","DELIVERED"]],null,null,null,null,null)),r.Sa(47,147456,null,0,j.q,[r.l,r.G,[8,null]],{value:[0,"value"]},null),r.Sa(48,147456,null,0,j.A,[r.l,r.G,[8,null]],{value:[0,"value"]},null),(t()(),r.jb(-1,null,["Delivered Order"])),(t()(),r.Ta(50,0,null,null,3,"option",[["value","RECEIVED"]],null,null,null,null,null)),r.Sa(51,147456,null,0,j.q,[r.l,r.G,[8,null]],{value:[0,"value"]},null),r.Sa(52,147456,null,0,j.A,[r.l,r.G,[8,null]],{value:[0,"value"]},null),(t()(),r.jb(-1,null,["Received Order"])),(t()(),r.Ta(54,0,null,null,4,"div",[],null,null,null,null,null)),(t()(),r.Ta(55,0,null,null,1,"button",[["class","b"],["type","button"]],null,null,null,null,null)),(t()(),r.jb(-1,null,["Cancel"])),(t()(),r.Ta(57,0,null,null,1,"button",[["class","b"],["type","button"]],null,[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.getOrdersbyState(r.cb(t,13).value)&&i),i},null,null)),(t()(),r.jb(-1,null,["OK"])),(t()(),r.Ka(16777216,null,null,1,null,Xe)),r.Sa(60,278528,null,0,h.h,[r.S,r.P,r.v],{ngForOf:[0,"ngForOf"]},null)],function(t,e){var n=e.component;t(e,15,0,"0"),t(e,16,0,"0"),t(e,19,0,"SUBMITTED"),t(e,20,0,"SUBMITTED"),t(e,23,0,"VALIDATED"),t(e,24,0,"VALIDATED"),t(e,27,0,"ASSIGNED"),t(e,28,0,"ASSIGNED"),t(e,31,0,"IN_PRODUCTION"),t(e,32,0,"IN_PRODUCTION"),t(e,35,0,"PACKING"),t(e,36,0,"PACKING"),t(e,39,0,"READY_TO_SHIP"),t(e,40,0,"READY_TO_SHIP"),t(e,43,0,"SHIPPED"),t(e,44,0,"SHIPPED"),t(e,47,0,"DELIVERED"),t(e,48,0,"DELIVERED"),t(e,51,0,"RECEIVED"),t(e,52,0,"RECEIVED"),t(e,60,0,n.orders)},null)}var Ke=r.Pa("app-order-history",We,function(t){return r.lb(0,[(t()(),r.Ta(0,0,null,null,1,"app-order-history",[],null,null,null,Ye,qe)),r.Sa(1,114688,null,0,We,[ze,He.a],null,null)],function(t,e){t(e,1,0)},null)},{},{},[]),Ze=function(){function t(t,e,n){this.productService=t,this.route=e,this.router=n,this.materialFinishings=[]}return t.prototype.ngOnInit=function(){this.getMaterialFinishes()},t.prototype.getMaterialFinishes=function(){var t=this;this.productService.getMaterialFinish().then(function(e){t.materialFinishings=e,console.log("lalalalal"+t.materialFinishings[1].MaterialFinishId)})},t.prototype.select=function(t){var e=this;this.id=t,this.productService.getMaterialFinishById(t).then(function(t){e.materialFinishing=t,console.log("lalalalal"+e.materialFinishing)})},t.prototype.addPrice=function(){var t=parseFloat(document.getElementById("ProductPrice").value),e=document.getElementById("dt_init").value,n=new Date(e),r=new function(t,e,n){this.value=t,this.item=e,this.applicableDate=n}(t,this.materialFinishing,n);this.productService.postMaterialFinishPrice(r)},t}(),Qe=r.Ra({encapsulation:0,styles:[[""]],data:{}});function Je(t){return r.lb(0,[(t()(),r.Ta(0,0,null,null,8,"div",[["class","row"]],null,null,null,null,null)),(t()(),r.Ta(1,0,null,null,7,"div",[["class","col-xs-12"]],null,null,null,null,null)),(t()(),r.Ta(2,0,null,null,6,"a",[["class","list-group-item clearfix"],["routerLinkActive","active"],["style","cursor: pointer;"]],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.select(t.context.index+1)&&r),r},null,null)),r.Sa(3,1720320,null,2,z.l,[z.k,r.l,r.G,r.i],{routerLinkActive:[0,"routerLinkActive"]},null),r.hb(603979776,1,{links:1}),r.hb(603979776,2,{linksWithHrefs:1}),(t()(),r.Ta(6,0,null,null,2,"div",[["class","pull-left"]],null,null,null,null,null)),(t()(),r.Ta(7,0,null,null,1,"h4",[["class","list-group-item-heading"]],null,null,null,null,null)),(t()(),r.jb(8,null,[""," - ",""]))],function(t,e){t(e,3,0,"active")},function(t,e){t(e,8,0,e.context.$implicit.material.name,e.context.$implicit.name)})}function $e(t){return r.lb(0,[(t()(),r.Ka(16777216,null,null,1,null,Je)),r.Sa(1,278528,null,0,h.h,[r.S,r.P,r.v],{ngForOf:[0,"ngForOf"]},null),(t()(),r.Ta(2,0,null,null,3,"div",[],null,null,null,null,null)),(t()(),r.Ta(3,0,null,null,1,"label",[],null,null,null,null,null)),(t()(),r.jb(-1,null,[" Material and Finish combined price "])),(t()(),r.Ta(5,0,null,null,0,"input",[["class","form-control"],["id","ProductPrice"],["type","text"]],null,null,null,null,null)),(t()(),r.Ta(6,0,null,null,4,"div",[],null,null,null,null,null)),(t()(),r.Ta(7,0,null,null,0,"br",[],null,null,null,null,null)),(t()(),r.Ta(8,0,null,null,1,"label",[],null,null,null,null,null)),(t()(),r.jb(-1,null,[" Material and Finish combined date "])),(t()(),r.Ta(10,0,null,null,0,"input",[["class","form-control"],["id","dt_init"],["type","date"]],null,null,null,null,null)),(t()(),r.Ta(11,0,null,null,3,"div",[],null,null,null,null,null)),(t()(),r.Ta(12,0,null,null,0,"br",[],null,null,null,null,null)),(t()(),r.Ta(13,0,null,null,1,"button",[["class","btn"],["type","button"]],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.addPrice()&&r),r},null,null)),(t()(),r.jb(-1,null,[" Ok "]))],function(t,e){t(e,1,0,e.component.materialFinishings)},null)}var tn=r.Pa("app-add-material-finishing-price",Ze,function(t){return r.lb(0,[(t()(),r.Ta(0,0,null,null,1,"app-add-material-finishing-price",[],null,null,null,$e,Qe)),r.Sa(1,114688,null,0,Ze,[G.a,z.a,z.k],null,null)],function(t,e){t(e,1,0)},null)},{},{},[]),en=(new Ve.g({"Content-Type":"application/json"}),function(){function t(t){this.http=t,this.url="http://sic-e.herokuapp.com/orderManager/calcCircuit"}return t.prototype.calcCircuit=function(){return this.http.get(this.url)},t.ngInjectableDef=r.W({factory:function(){return new t(r.Aa(Ve.c))},token:t,providedIn:"root"}),t}()),nn=function(){function t(t,e){this.calcCircuitService=t,this.authService=e,this.output={distance:-1,circuit:"[]"}}return t.prototype.ngOnInit=function(){var t=this;this.calcCircuitService.calcCircuit().subscribe(function(e){return t.output=e}),console.log(this.output)},t}(),rn=r.Ra({encapsulation:0,styles:[[""]],data:{}});function on(t){return r.lb(0,[(t()(),r.Ta(0,0,null,null,2,"div",[],null,null,null,null,null)),(t()(),r.Ta(1,0,null,null,1,"label",[],null,null,null,null,null)),(t()(),r.jb(2,null,["Distance: ",""])),(t()(),r.Ta(3,0,null,null,2,"div",[],null,null,null,null,null)),(t()(),r.Ta(4,0,null,null,1,"label",[],null,null,null,null,null)),(t()(),r.jb(5,null,["Circuit: ",""]))],null,function(t,e){var n=e.component;t(e,2,0,n.output.distance),t(e,5,0,n.output.circuit)})}var an=r.Pa("app-calc-circuit",nn,function(t){return r.lb(0,[(t()(),r.Ta(0,0,null,null,1,"app-calc-circuit",[],null,null,null,on,rn)),r.Sa(1,114688,null,0,nn,[en,He.a],null,null)],function(t,e){t(e,1,0)},null)},{},{},[]),sn=(new Ve.g({"Content-Type":"application/json"}),function(){function t(t){this.http=t,this.url="http://sic-e.herokuapp.com/orderManager/assignOrders"}return t.prototype.assignOrders=function(){return this.http.get(this.url).toPromise().then(function(t){return t}).then(function(t){return t})},t.ngInjectableDef=r.W({factory:function(){return new t(r.Aa(Ve.c))},token:t,providedIn:"root"}),t}()),un=function(){function t(t,e){this.assignOrdersService=t,this.authService=e,this.Assignments=[],this.output={Assignments:[]}}return t.prototype.ngOnInit=function(){this.assignOrdersToFactory(),console.log("onInit result"+JSON.stringify(this.Assignments))},t.prototype.assignOrdersToFactory=function(){var t=this;this.assignOrdersService.assignOrders().then(function(e){t.output=e,console.log("assignOrdersService.then() result: "+JSON.stringify(t.output))})},t}(),ln=r.Ra({encapsulation:0,styles:[[""]],data:{}});function cn(t){return r.lb(0,[(t()(),r.Ta(0,0,null,null,2,"li",[],null,null,null,null,null)),(t()(),r.Ta(1,0,null,null,1,"label",[],null,null,null,null,null)),(t()(),r.jb(2,null,["Order #"," -> "," Factory"]))],null,function(t,e){t(e,2,0,e.context.$implicit.Order,e.context.$implicit.Factory)})}function hn(t){return r.lb(0,[(t()(),r.Ta(0,0,null,null,4,"div",[],null,null,null,null,null)),(t()(),r.Ta(1,0,null,null,1,"label",[],null,null,null,null,null)),(t()(),r.jb(-1,null,['Here are the proposed "Order->Factory" Assignments:'])),(t()(),r.Ka(16777216,null,null,1,null,cn)),r.Sa(4,278528,null,0,h.h,[r.S,r.P,r.v],{ngForOf:[0,"ngForOf"]},null)],function(t,e){t(e,4,0,e.component.output.Assignments)},null)}var dn=r.Pa("app-assign-orders-factories",un,function(t){return r.lb(0,[(t()(),r.Ta(0,0,null,null,1,"app-assign-orders-factories",[],null,null,null,hn,ln)),r.Sa(1,114688,null,0,un,[sn,He.a],null,null)],function(t,e){t(e,1,0)},null)},{},{},[]),pn=function(){function t(){}return t.prototype.ngOnInit=function(){},t}(),fn=r.Ra({encapsulation:0,styles:[[""]],data:{}});function mn(t){return r.lb(0,[(t()(),r.Ta(0,0,null,null,1,"h1",[],null,null,null,null,null)),(t()(),r.jb(-1,null,["Privacy Policy"])),(t()(),r.Ta(2,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),r.jb(-1,null,[" All the information collected through this website is used only to improve the quality of your website usage.\n"])),(t()(),r.Ta(4,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),r.jb(-1,null,[" The ensurance of the website users privacy is important for SicBricolage.\n"])),(t()(),r.Ta(6,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),r.jb(-1,null,[" All the private information of our members is used acording the last GDPR article.\n"])),(t()(),r.Ta(8,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),r.jb(-1,null,[" The information that can be used may include your name, email , cellphone number , address and others.\n"])),(t()(),r.Ta(10,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),r.jb(-1,null,[" The users have the right to ask to see how their data was used since their registry on the website. Contact the support by email at support@sicbricolage.com\n"]))],null,null)}var vn=r.Pa("app-privacy-policy",pn,function(t){return r.lb(0,[(t()(),r.Ta(0,0,null,null,1,"app-privacy-policy",[],null,null,null,mn,fn)),r.Sa(1,114688,null,0,pn,[],null,null)],function(t,e){t(e,1,0)},null)},{},{},[]),gn=function(){function t(t,e){this.http=t,this.authService=e,this.products=[],this.catalogproducts=[]}return t.prototype.setProducts=function(t){this.products=t},t.prototype.getProducts=function(){var t=this.authService.getToken(),e={headers:new Ve.g({"Content-Type":"application/json","Access-Control-Allow-Origin":"*",Authorization:"Bearer "+t,Accept:"application/json"})};return this.http.get("https://sicgc.azurewebsites.net/api/Product",e).toPromise().then(function(t){return t}).then(function(t){return t})},t.prototype.postCatalog=function(t){var e=this.authService.getToken(),n={headers:new Ve.g({"Content-Type":"application/json",Authorization:"Bearer "+e,Accept:"application/json"})};return this.http.post("https://sicgc.azurewebsites.net/api/Catalog",JSON.stringify(t),n).subscribe(function(t){console.log(t)})},t.ngInjectableDef=r.W({factory:function(){return new t(r.Aa(Ve.c),r.Aa(He.a))},token:t,providedIn:"root"}),t}(),yn=function(){function t(t,e,n){this.route=t,this.catalogService=e,this.router=n,this.laddedProducts=[]}return t.prototype.ngOnInit=function(){this.route.params.subscribe(function(t){}),this.getProducts()},t.prototype.getProducts=function(){var t=this;this.catalogService.getProducts().then(function(e){t.lproducts=e,console.log(t.lproducts)})},t.prototype.onDeleteSubProduct=function(t){this.laddedProducts.splice(t,1)},t.prototype.onAddSubProduct=function(t){this.laddedProducts.push(this.lproducts[t])},t.prototype.onCancel=function(){this.router.navigate(["../"],{relativeTo:this.route})},t.prototype.onSubmit=function(t){console.log(t),console.log(this.laddedProducts),this.newCatalog=new function(t,e){this.name=t,this.products=e}(t,this.laddedProducts),this.catalogService.postCatalog(this.newCatalog)},t}(),_n=r.Ra({encapsulation:0,styles:[[""]],data:{}});function bn(t){return r.lb(0,[(t()(),r.Ta(0,0,null,null,8,"tr",[],null,null,null,null,null)),(t()(),r.Ta(1,0,null,null,1,"td",[],null,null,null,null,null)),(t()(),r.jb(2,null,["",""])),(t()(),r.Ta(3,0,null,null,1,"td",[],null,null,null,null,null)),(t()(),r.jb(4,null,["",""])),(t()(),r.Ta(5,0,null,null,3,"td",[],null,null,null,null,null)),(t()(),r.Ta(6,0,null,null,2,"div",[["class","col-xs-1"]],null,null,null,null,null)),(t()(),r.Ta(7,0,null,null,1,"button",[["class","btn btn-danger"],["type","button"]],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.onDeleteSubProduct(t.context.index)&&r),r},null,null)),(t()(),r.jb(-1,null,["x"]))],null,function(t,e){t(e,2,0,e.context.index+1),t(e,4,0,e.context.$implicit.name)})}function wn(t){return r.lb(0,[(t()(),r.Ta(0,0,null,null,8,"tr",[],null,null,null,null,null)),(t()(),r.Ta(1,0,null,null,1,"td",[],null,null,null,null,null)),(t()(),r.jb(2,null,["",""])),(t()(),r.Ta(3,0,null,null,1,"td",[],null,null,null,null,null)),(t()(),r.jb(4,null,["",""])),(t()(),r.Ta(5,0,null,null,3,"td",[],null,null,null,null,null)),(t()(),r.Ta(6,0,null,null,2,"div",[["class","col-xs-1"]],null,null,null,null,null)),(t()(),r.Ta(7,0,null,null,1,"button",[["class","btn btn-success"],["type","button"]],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.onAddSubProduct(t.context.index)&&r),r},null,null)),(t()(),r.jb(-1,null,["v"]))],null,function(t,e){t(e,2,0,e.context.index+1),t(e,4,0,e.context.$implicit.name)})}function xn(t){return r.lb(0,[(t()(),r.Ta(0,0,null,null,1,"h1",[],null,null,null,null,null)),(t()(),r.jb(-1,null,["Create Catalog"])),(t()(),r.Ta(2,0,null,null,7,"div",[],null,null,null,null,null)),(t()(),r.Ta(3,0,null,null,0,"br",[],null,null,null,null,null)),(t()(),r.Ta(4,0,null,null,1,"label",[["for","name"]],null,null,null,null,null)),(t()(),r.jb(-1,null,["Catalog Name"])),(t()(),r.Ta(6,0,null,null,0,"br",[],null,null,null,null,null)),(t()(),r.Ta(7,0,[["collectionName",1]],null,0,"input",[["id","collectionName"],["name","collectionName"],["type","text"]],null,null,null,null,null)),(t()(),r.Ta(8,0,null,null,0,"br",[],null,null,null,null,null)),(t()(),r.Ta(9,0,null,null,0,"br",[],null,null,null,null,null)),(t()(),r.Ta(10,0,null,null,14,"div",[["class","row"]],null,null,null,null,null)),(t()(),r.Ta(11,0,null,null,13,"div",[["class","col-sm-5 form-group"]],null,null,null,null,null)),(t()(),r.Ta(12,0,null,null,1,"label",[],null,null,null,null,null)),(t()(),r.jb(-1,null,["Associated Products"])),(t()(),r.Ta(14,0,null,null,10,"table",[["class","table"]],null,null,null,null,null)),(t()(),r.Ta(15,0,null,null,9,"tbody",[],null,null,null,null,null)),(t()(),r.Ta(16,0,null,null,6,"tr",[],null,null,null,null,null)),(t()(),r.Ta(17,0,null,null,1,"th",[],null,null,null,null,null)),(t()(),r.jb(-1,null,["#"])),(t()(),r.Ta(19,0,null,null,1,"th",[],null,null,null,null,null)),(t()(),r.jb(-1,null,["Product"])),(t()(),r.Ta(21,0,null,null,1,"th",[],null,null,null,null,null)),(t()(),r.jb(-1,null,[" X "])),(t()(),r.Ka(16777216,null,null,1,null,bn)),r.Sa(24,278528,null,0,h.h,[r.S,r.P,r.v],{ngForOf:[0,"ngForOf"]},null),(t()(),r.Ta(25,0,null,null,14,"div",[["class","row"]],null,null,null,null,null)),(t()(),r.Ta(26,0,null,null,13,"div",[["class","col-sm-5 form-group"]],null,null,null,null,null)),(t()(),r.Ta(27,0,null,null,1,"label",[],null,null,null,null,null)),(t()(),r.jb(-1,null,["Add Products"])),(t()(),r.Ta(29,0,null,null,10,"table",[["class","table"]],null,null,null,null,null)),(t()(),r.Ta(30,0,null,null,9,"tbody",[],null,null,null,null,null)),(t()(),r.Ta(31,0,null,null,6,"tr",[],null,null,null,null,null)),(t()(),r.Ta(32,0,null,null,1,"th",[],null,null,null,null,null)),(t()(),r.jb(-1,null,["#"])),(t()(),r.Ta(34,0,null,null,1,"th",[],null,null,null,null,null)),(t()(),r.jb(-1,null,["Product"])),(t()(),r.Ta(36,0,null,null,1,"th",[],null,null,null,null,null)),(t()(),r.jb(-1,null,[" V "])),(t()(),r.Ka(16777216,null,null,1,null,wn)),r.Sa(39,278528,null,0,h.h,[r.S,r.P,r.v],{ngForOf:[0,"ngForOf"]},null),(t()(),r.Ta(40,0,null,null,5,"div",[["class","row"]],null,null,null,null,null)),(t()(),r.Ta(41,0,null,null,4,"div",[["class","col-xs-12"]],null,null,null,null,null)),(t()(),r.Ta(42,0,null,null,1,"button",[["class","btn btn-success"],["type","button"]],null,[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.onSubmit(r.cb(t,7).value)&&i),i},null,null)),(t()(),r.jb(-1,null,["Save"])),(t()(),r.Ta(44,0,null,null,1,"button",[["class","btn btn-danger"],["type","button"]],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.onCancel()&&r),r},null,null)),(t()(),r.jb(-1,null,["Cancel"]))],function(t,e){var n=e.component;t(e,24,0,n.laddedProducts),t(e,39,0,n.lproducts)},null)}var En=r.Pa("app-catalog",yn,function(t){return r.lb(0,[(t()(),r.Ta(0,0,null,null,1,"app-catalog",[],null,null,null,xn,_n)),r.Sa(1,114688,null,0,yn,[z.a,gn,z.k],null,null)],function(t,e){t(e,1,0)},null)},{},{},[]),Sn=function(){function t(t,e){this.http=t,this.authService=e,this.products=[],this.collectionproducts=[]}return t.prototype.setProducts=function(t){this.products=t},t.prototype.getProducts=function(){var t=this.authService.getToken(),e={headers:new Ve.g({"Content-Type":"application/json","Access-Control-Allow-Origin":"*",Authorization:"Bearer "+t,Accept:"application/json"})};return this.http.get("https://sicgc.azurewebsites.net/api/Product",e).toPromise().then(function(t){return t}).then(function(t){return t})},t.prototype.getProduct=function(t){var e=this.authService.getToken(),n={headers:new Ve.g({"Content-Type":"application/json","Access-Control-Allow-Origin":"*",Authorization:"Bearer "+e,Accept:"application/json"})};return this.http.get("https://sicgc.azurewebsites.net/api/Product/"+t,n).toPromise().then(function(t){return t}).then(function(t){return t})},t.prototype.postCollection=function(t){var e=this.authService.getToken(),n={headers:new Ve.g({"Content-Type":"application/json","Access-Control-Allow-Origin":"*",Authorization:"Bearer "+e,Accept:"application/json"})};return this.http.post("https://sicgc.azurewebsites.net/api/Collection",JSON.stringify(t),n).subscribe(function(t){console.log(t)})},t.ngInjectableDef=r.W({factory:function(){return new t(r.Aa(Ve.c),r.Aa(He.a))},token:t,providedIn:"root"}),t}(),Tn=n("0fqx"),Mn=function(){function t(t,e,n){this.route=t,this.collectionService=e,this.router=n,this.laddedProducts=[]}return t.prototype.ngOnInit=function(){this.route.params.subscribe(function(t){}),this.getProducts()},t.prototype.getProducts=function(){var t=this;this.collectionService.getProducts().then(function(e){t.lproducts=e,console.log(t.lproducts)})},t.prototype.onDeleteSubProduct=function(t){this.laddedProducts.splice(t,1)},t.prototype.onAddSubProduct=function(t){this.laddedProducts.push(this.lproducts[t])},t.prototype.onCancel=function(){this.router.navigate(["../"],{relativeTo:this.route})},t.prototype.onSubmit=function(t){console.log(t),console.log(this.laddedProducts);for(var e=[],n=0,r=this.laddedProducts;n<r.length;n++){var i=new Tn.a(r[n].productId);e.push(i)}this.newCollection=new function(t,e){this.name=t,this.products=e}(t,e),this.collectionService.postCollection(this.newCollection)},t}(),Cn=r.Ra({encapsulation:0,styles:[[""]],data:{}});function An(t){return r.lb(0,[(t()(),r.Ta(0,0,null,null,8,"tr",[],null,null,null,null,null)),(t()(),r.Ta(1,0,null,null,1,"td",[],null,null,null,null,null)),(t()(),r.jb(2,null,["",""])),(t()(),r.Ta(3,0,null,null,1,"td",[],null,null,null,null,null)),(t()(),r.jb(4,null,["",""])),(t()(),r.Ta(5,0,null,null,3,"td",[],null,null,null,null,null)),(t()(),r.Ta(6,0,null,null,2,"div",[["class","col-xs-1"]],null,null,null,null,null)),(t()(),r.Ta(7,0,null,null,1,"button",[["class","btn btn-danger"],["type","button"]],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.onDeleteSubProduct(t.context.index)&&r),r},null,null)),(t()(),r.jb(-1,null,["x"]))],null,function(t,e){t(e,2,0,e.context.index+1),t(e,4,0,e.context.$implicit.name)})}function Pn(t){return r.lb(0,[(t()(),r.Ta(0,0,null,null,8,"tr",[],null,null,null,null,null)),(t()(),r.Ta(1,0,null,null,1,"td",[],null,null,null,null,null)),(t()(),r.jb(2,null,["",""])),(t()(),r.Ta(3,0,null,null,1,"td",[],null,null,null,null,null)),(t()(),r.jb(4,null,["",""])),(t()(),r.Ta(5,0,null,null,3,"td",[],null,null,null,null,null)),(t()(),r.Ta(6,0,null,null,2,"div",[["class","col-xs-1"]],null,null,null,null,null)),(t()(),r.Ta(7,0,null,null,1,"button",[["class","btn btn-success"],["type","button"]],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.onAddSubProduct(t.context.index)&&r),r},null,null)),(t()(),r.jb(-1,null,["v"]))],null,function(t,e){t(e,2,0,e.context.index+1),t(e,4,0,e.context.$implicit.name)})}function On(t){return r.lb(0,[(t()(),r.Ta(0,0,null,null,1,"h1",[],null,null,null,null,null)),(t()(),r.jb(-1,null,["Create Collection"])),(t()(),r.Ta(2,0,null,null,7,"div",[],null,null,null,null,null)),(t()(),r.Ta(3,0,null,null,0,"br",[],null,null,null,null,null)),(t()(),r.Ta(4,0,null,null,1,"label",[["for","name"]],null,null,null,null,null)),(t()(),r.jb(-1,null,["Collection Name"])),(t()(),r.Ta(6,0,null,null,0,"br",[],null,null,null,null,null)),(t()(),r.Ta(7,0,[["collectionName",1]],null,0,"input",[["id","collectionName"],["name","collectionName"],["type","text"]],null,null,null,null,null)),(t()(),r.Ta(8,0,null,null,0,"br",[],null,null,null,null,null)),(t()(),r.Ta(9,0,null,null,0,"br",[],null,null,null,null,null)),(t()(),r.Ta(10,0,null,null,14,"div",[["class","row"]],null,null,null,null,null)),(t()(),r.Ta(11,0,null,null,13,"div",[["class","col-sm-5 form-group"]],null,null,null,null,null)),(t()(),r.Ta(12,0,null,null,1,"label",[],null,null,null,null,null)),(t()(),r.jb(-1,null,["Associated Products"])),(t()(),r.Ta(14,0,null,null,10,"table",[["class","table"]],null,null,null,null,null)),(t()(),r.Ta(15,0,null,null,9,"tbody",[],null,null,null,null,null)),(t()(),r.Ta(16,0,null,null,6,"tr",[],null,null,null,null,null)),(t()(),r.Ta(17,0,null,null,1,"th",[],null,null,null,null,null)),(t()(),r.jb(-1,null,["#"])),(t()(),r.Ta(19,0,null,null,1,"th",[],null,null,null,null,null)),(t()(),r.jb(-1,null,["Product"])),(t()(),r.Ta(21,0,null,null,1,"th",[],null,null,null,null,null)),(t()(),r.jb(-1,null,[" X "])),(t()(),r.Ka(16777216,null,null,1,null,An)),r.Sa(24,278528,null,0,h.h,[r.S,r.P,r.v],{ngForOf:[0,"ngForOf"]},null),(t()(),r.Ta(25,0,null,null,14,"div",[["class","row"]],null,null,null,null,null)),(t()(),r.Ta(26,0,null,null,13,"div",[["class","col-sm-5 form-group"]],null,null,null,null,null)),(t()(),r.Ta(27,0,null,null,1,"label",[],null,null,null,null,null)),(t()(),r.jb(-1,null,["Add Products"])),(t()(),r.Ta(29,0,null,null,10,"table",[["class","table"]],null,null,null,null,null)),(t()(),r.Ta(30,0,null,null,9,"tbody",[],null,null,null,null,null)),(t()(),r.Ta(31,0,null,null,6,"tr",[],null,null,null,null,null)),(t()(),r.Ta(32,0,null,null,1,"th",[],null,null,null,null,null)),(t()(),r.jb(-1,null,["#"])),(t()(),r.Ta(34,0,null,null,1,"th",[],null,null,null,null,null)),(t()(),r.jb(-1,null,["Product"])),(t()(),r.Ta(36,0,null,null,1,"th",[],null,null,null,null,null)),(t()(),r.jb(-1,null,[" V "])),(t()(),r.Ka(16777216,null,null,1,null,Pn)),r.Sa(39,278528,null,0,h.h,[r.S,r.P,r.v],{ngForOf:[0,"ngForOf"]},null),(t()(),r.Ta(40,0,null,null,5,"div",[["class","row"]],null,null,null,null,null)),(t()(),r.Ta(41,0,null,null,4,"div",[["class","col-xs-12"]],null,null,null,null,null)),(t()(),r.Ta(42,0,null,null,1,"button",[["class","btn btn-success"],["type","button"]],null,[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.onSubmit(r.cb(t,7).value)&&i),i},null,null)),(t()(),r.jb(-1,null,["Save"])),(t()(),r.Ta(44,0,null,null,1,"button",[["class","btn btn-danger"],["type","button"]],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.onCancel()&&r),r},null,null)),(t()(),r.jb(-1,null,["Cancel"]))],function(t,e){var n=e.component;t(e,24,0,n.laddedProducts),t(e,39,0,n.lproducts)},null)}var Rn=r.Pa("app-collection",Mn,function(t){return r.lb(0,[(t()(),r.Ta(0,0,null,null,1,"app-collection",[],null,null,null,On,Cn)),r.Sa(1,114688,null,0,Mn,[z.a,Sn,z.k],null,null)],function(t,e){t(e,1,0)},null)},{},{},[]),Ln=function(){function t(t){this.authService=t}return t.prototype.ngOnInit=function(){this.checked=!1},t.prototype.onSignup=function(t){(this.checked=!0)?this.authService.signupUser(t.value.email,t.value.password,t.value.name):console.log("erro")},t}(),In=r.Ra({encapsulation:0,styles:[[""]],data:{}});function Nn(t){return r.lb(0,[(t()(),r.Ta(0,0,null,null,41,"div",[["class","row"]],null,null,null,null,null)),(t()(),r.Ta(1,0,null,null,40,"div",[["class","col-xs-12 col-sm-10 col-md-8 col-sm-offset-1 col-md-offset-2"]],null,null,null,null,null)),(t()(),r.Ta(2,0,null,null,39,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],function(t,e,n){var i=!0,o=t.component;return"submit"===e&&(i=!1!==r.cb(t,4).onSubmit(n)&&i),"reset"===e&&(i=!1!==r.cb(t,4).onReset()&&i),"ngSubmit"===e&&(i=!1!==o.onSignup(r.cb(t,4))&&i),i},null,null)),r.Sa(3,16384,null,0,j.x,[],null,null),r.Sa(4,4210688,[["f",4]],0,j.o,[[8,null],[8,null]],null,{ngSubmit:"ngSubmit"}),r.gb(2048,null,j.b,null,[j.o]),r.Sa(6,16384,null,0,j.n,[[4,j.b]],null,null),(t()(),r.Ta(7,0,null,null,8,"div",[["class","form-group"]],null,null,null,null,null)),(t()(),r.Ta(8,0,null,null,1,"label",[["for","name"]],null,null,null,null,null)),(t()(),r.jb(-1,null,["Name"])),(t()(),r.Ta(10,0,null,null,5,"input",[["class","form-control"],["id","name"],["name","name"],["ngModel",""],["type","name"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(t,e,n){var i=!0;return"input"===e&&(i=!1!==r.cb(t,11)._handleInput(n.target.value)&&i),"blur"===e&&(i=!1!==r.cb(t,11).onTouched()&&i),"compositionstart"===e&&(i=!1!==r.cb(t,11)._compositionStart()&&i),"compositionend"===e&&(i=!1!==r.cb(t,11)._compositionEnd(n.target.value)&&i),i},null,null)),r.Sa(11,16384,null,0,j.c,[r.G,r.l,[2,j.a]],null,null),r.gb(1024,null,j.k,function(t){return[t]},[j.c]),r.Sa(13,671744,null,0,j.p,[[2,j.b],[8,null],[8,null],[6,j.k]],{name:[0,"name"],model:[1,"model"]},null),r.gb(2048,null,j.l,null,[j.p]),r.Sa(15,16384,null,0,j.m,[[4,j.l]],null,null),(t()(),r.Ta(16,0,null,null,8,"div",[["class","form-group"]],null,null,null,null,null)),(t()(),r.Ta(17,0,null,null,1,"label",[["for","email"]],null,null,null,null,null)),(t()(),r.jb(-1,null,["Mail"])),(t()(),r.Ta(19,0,null,null,5,"input",[["class","form-control"],["id","email"],["name","email"],["ngModel",""],["type","email"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(t,e,n){var i=!0;return"input"===e&&(i=!1!==r.cb(t,20)._handleInput(n.target.value)&&i),"blur"===e&&(i=!1!==r.cb(t,20).onTouched()&&i),"compositionstart"===e&&(i=!1!==r.cb(t,20)._compositionStart()&&i),"compositionend"===e&&(i=!1!==r.cb(t,20)._compositionEnd(n.target.value)&&i),i},null,null)),r.Sa(20,16384,null,0,j.c,[r.G,r.l,[2,j.a]],null,null),r.gb(1024,null,j.k,function(t){return[t]},[j.c]),r.Sa(22,671744,null,0,j.p,[[2,j.b],[8,null],[8,null],[6,j.k]],{name:[0,"name"],model:[1,"model"]},null),r.gb(2048,null,j.l,null,[j.p]),r.Sa(24,16384,null,0,j.m,[[4,j.l]],null,null),(t()(),r.Ta(25,0,null,null,8,"div",[["class","form-group"]],null,null,null,null,null)),(t()(),r.Ta(26,0,null,null,1,"label",[["for","password"]],null,null,null,null,null)),(t()(),r.jb(-1,null,["Password"])),(t()(),r.Ta(28,0,null,null,5,"input",[["class","form-control"],["id","password"],["name","password"],["ngModel",""],["type","password"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(t,e,n){var i=!0;return"input"===e&&(i=!1!==r.cb(t,29)._handleInput(n.target.value)&&i),"blur"===e&&(i=!1!==r.cb(t,29).onTouched()&&i),"compositionstart"===e&&(i=!1!==r.cb(t,29)._compositionStart()&&i),"compositionend"===e&&(i=!1!==r.cb(t,29)._compositionEnd(n.target.value)&&i),i},null,null)),r.Sa(29,16384,null,0,j.c,[r.G,r.l,[2,j.a]],null,null),r.gb(1024,null,j.k,function(t){return[t]},[j.c]),r.Sa(31,671744,null,0,j.p,[[2,j.b],[8,null],[8,null],[6,j.k]],{name:[0,"name"],model:[1,"model"]},null),r.gb(2048,null,j.l,null,[j.p]),r.Sa(33,16384,null,0,j.m,[[4,j.l]],null,null),(t()(),r.Ta(34,0,null,null,5,"div",[["class","form-group"]],null,null,null,null,null)),(t()(),r.Ta(35,0,null,null,0,"input",[["id","checkbox"],["name","checkbox"],["type","checkbox"],["value","true"]],null,null,null,null,null)),(t()(),r.jb(-1,null,[" I accept the "])),(t()(),r.Ta(37,0,null,null,2,"a",[["routerLink","/signup/privacy"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==r.cb(t,38).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&i),i},null,null)),r.Sa(38,671744,null,0,z.m,[z.k,z.a,h.g],{routerLink:[0,"routerLink"]},null),(t()(),r.jb(-1,null,["privacy policy"])),(t()(),r.Ta(40,0,null,null,1,"button",[["class","btn btn-primary"],["type","submit"]],[[8,"disabled",0]],null,null,null,null)),(t()(),r.jb(-1,null,["Sign Up"]))],function(t,e){t(e,13,0,"name",""),t(e,22,0,"email",""),t(e,31,0,"password",""),t(e,38,0,"/signup/privacy")},function(t,e){t(e,2,0,r.cb(e,6).ngClassUntouched,r.cb(e,6).ngClassTouched,r.cb(e,6).ngClassPristine,r.cb(e,6).ngClassDirty,r.cb(e,6).ngClassValid,r.cb(e,6).ngClassInvalid,r.cb(e,6).ngClassPending),t(e,10,0,r.cb(e,15).ngClassUntouched,r.cb(e,15).ngClassTouched,r.cb(e,15).ngClassPristine,r.cb(e,15).ngClassDirty,r.cb(e,15).ngClassValid,r.cb(e,15).ngClassInvalid,r.cb(e,15).ngClassPending),t(e,19,0,r.cb(e,24).ngClassUntouched,r.cb(e,24).ngClassTouched,r.cb(e,24).ngClassPristine,r.cb(e,24).ngClassDirty,r.cb(e,24).ngClassValid,r.cb(e,24).ngClassInvalid,r.cb(e,24).ngClassPending),t(e,28,0,r.cb(e,33).ngClassUntouched,r.cb(e,33).ngClassTouched,r.cb(e,33).ngClassPristine,r.cb(e,33).ngClassDirty,r.cb(e,33).ngClassValid,r.cb(e,33).ngClassInvalid,r.cb(e,33).ngClassPending),t(e,37,0,r.cb(e,38).target,r.cb(e,38).href),t(e,40,0,!r.cb(e,4).valid)})}var Dn=r.Pa("app-signup",Ln,function(t){return r.lb(0,[(t()(),r.Ta(0,0,null,null,1,"app-signup",[],null,null,null,Nn,In)),r.Sa(1,114688,null,0,Ln,[He.a],null,null)],function(t,e){t(e,1,0)},null)},{},{},[]),kn=function(){function t(t){this.authService=t}return t.prototype.ngOnInit=function(){},t.prototype.onSignin=function(t){this.authService.signinUser(t.value.email,t.value.password)},t}(),Fn=r.Ra({encapsulation:0,styles:[[""]],data:{}});function jn(t){return r.lb(0,[(t()(),r.Ta(0,0,null,null,26,"div",[["class","row"]],null,null,null,null,null)),(t()(),r.Ta(1,0,null,null,25,"div",[["class","col-xs-12 col-sm-10 col-md-8 col-sm-offset-1 col-md-offset-2"]],null,null,null,null,null)),(t()(),r.Ta(2,0,null,null,24,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],function(t,e,n){var i=!0,o=t.component;return"submit"===e&&(i=!1!==r.cb(t,4).onSubmit(n)&&i),"reset"===e&&(i=!1!==r.cb(t,4).onReset()&&i),"ngSubmit"===e&&(i=!1!==o.onSignin(r.cb(t,4))&&i),i},null,null)),r.Sa(3,16384,null,0,j.x,[],null,null),r.Sa(4,4210688,[["f",4]],0,j.o,[[8,null],[8,null]],null,{ngSubmit:"ngSubmit"}),r.gb(2048,null,j.b,null,[j.o]),r.Sa(6,16384,null,0,j.n,[[4,j.b]],null,null),(t()(),r.Ta(7,0,null,null,8,"div",[["class","form-group"]],null,null,null,null,null)),(t()(),r.Ta(8,0,null,null,1,"label",[["for","email"]],null,null,null,null,null)),(t()(),r.jb(-1,null,["Mail"])),(t()(),r.Ta(10,0,null,null,5,"input",[["class","form-control"],["id","email"],["name","email"],["ngModel",""],["type","email"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(t,e,n){var i=!0;return"input"===e&&(i=!1!==r.cb(t,11)._handleInput(n.target.value)&&i),"blur"===e&&(i=!1!==r.cb(t,11).onTouched()&&i),"compositionstart"===e&&(i=!1!==r.cb(t,11)._compositionStart()&&i),"compositionend"===e&&(i=!1!==r.cb(t,11)._compositionEnd(n.target.value)&&i),i},null,null)),r.Sa(11,16384,null,0,j.c,[r.G,r.l,[2,j.a]],null,null),r.gb(1024,null,j.k,function(t){return[t]},[j.c]),r.Sa(13,671744,null,0,j.p,[[2,j.b],[8,null],[8,null],[6,j.k]],{name:[0,"name"],model:[1,"model"]},null),r.gb(2048,null,j.l,null,[j.p]),r.Sa(15,16384,null,0,j.m,[[4,j.l]],null,null),(t()(),r.Ta(16,0,null,null,8,"div",[["class","form-group"]],null,null,null,null,null)),(t()(),r.Ta(17,0,null,null,1,"label",[["for","password"]],null,null,null,null,null)),(t()(),r.jb(-1,null,["Password"])),(t()(),r.Ta(19,0,null,null,5,"input",[["class","form-control"],["id","password"],["name","password"],["ngModel",""],["type","password"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(t,e,n){var i=!0;return"input"===e&&(i=!1!==r.cb(t,20)._handleInput(n.target.value)&&i),"blur"===e&&(i=!1!==r.cb(t,20).onTouched()&&i),"compositionstart"===e&&(i=!1!==r.cb(t,20)._compositionStart()&&i),"compositionend"===e&&(i=!1!==r.cb(t,20)._compositionEnd(n.target.value)&&i),i},null,null)),r.Sa(20,16384,null,0,j.c,[r.G,r.l,[2,j.a]],null,null),r.gb(1024,null,j.k,function(t){return[t]},[j.c]),r.Sa(22,671744,null,0,j.p,[[2,j.b],[8,null],[8,null],[6,j.k]],{name:[0,"name"],model:[1,"model"]},null),r.gb(2048,null,j.l,null,[j.p]),r.Sa(24,16384,null,0,j.m,[[4,j.l]],null,null),(t()(),r.Ta(25,0,null,null,1,"button",[["class","btn btn-primary"],["type","submit"]],[[8,"disabled",0]],null,null,null,null)),(t()(),r.jb(-1,null,["Sign In"]))],function(t,e){t(e,13,0,"email",""),t(e,22,0,"password","")},function(t,e){t(e,2,0,r.cb(e,6).ngClassUntouched,r.cb(e,6).ngClassTouched,r.cb(e,6).ngClassPristine,r.cb(e,6).ngClassDirty,r.cb(e,6).ngClassValid,r.cb(e,6).ngClassInvalid,r.cb(e,6).ngClassPending),t(e,10,0,r.cb(e,15).ngClassUntouched,r.cb(e,15).ngClassTouched,r.cb(e,15).ngClassPristine,r.cb(e,15).ngClassDirty,r.cb(e,15).ngClassValid,r.cb(e,15).ngClassInvalid,r.cb(e,15).ngClassPending),t(e,19,0,r.cb(e,24).ngClassUntouched,r.cb(e,24).ngClassTouched,r.cb(e,24).ngClassPristine,r.cb(e,24).ngClassDirty,r.cb(e,24).ngClassValid,r.cb(e,24).ngClassInvalid,r.cb(e,24).ngClassPending),t(e,25,0,!r.cb(e,4).valid)})}var Un=r.Pa("app-signin",kn,function(t){return r.lb(0,[(t()(),r.Ta(0,0,null,null,1,"app-signin",[],null,null,null,jn,Fn)),r.Sa(1,114688,null,0,kn,[He.a],null,null)],function(t,e){t(e,1,0)},null)},{},{},[]),Bn=n("3V6w"),Gn=function(){function t(t){this.authService=t}return t.prototype.onLogout=function(){this.authService.logout()},t.prototype.isAuthenticated=function(){return this.authService.isAuthenticated()},t.prototype.getRole=function(){this.role=this.authService.getRole()},t.prototype.onDeleteData=function(){this.authService.deleteUser()},t}(),Vn=r.Ra({encapsulation:2,styles:[],data:{}});function zn(t){return r.lb(0,[(t()(),r.Ta(0,0,null,null,6,"li",[["routerLinkActive","active"]],null,null,null,null,null)),r.Sa(1,1720320,null,2,z.l,[z.k,r.l,r.G,r.i],{routerLinkActive:[0,"routerLinkActive"]},null),r.hb(603979776,17,{links:1}),r.hb(603979776,18,{linksWithHrefs:1}),(t()(),r.Ta(4,0,null,null,2,"a",[["routerLink","/order-history"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==r.cb(t,5).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&i),i},null,null)),r.Sa(5,671744,[[18,4]],0,z.m,[z.k,z.a,h.g],{routerLink:[0,"routerLink"]},null),(t()(),r.jb(-1,null,["Order History"]))],function(t,e){t(e,1,0,"active"),t(e,5,0,"/order-history")},function(t,e){t(e,4,0,r.cb(e,5).target,r.cb(e,5).href)})}function Hn(t){return r.lb(0,[(t()(),r.Ta(0,0,null,null,3,"li",[],null,null,null,null,null)),(t()(),r.Ta(1,0,null,null,2,"a",[["routerLink","/signup"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==r.cb(t,2).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&i),i},null,null)),r.Sa(2,671744,null,0,z.m,[z.k,z.a,h.g],{routerLink:[0,"routerLink"]},null),(t()(),r.jb(-1,null,["Register"])),(t()(),r.Ta(4,0,null,null,3,"li",[],null,null,null,null,null)),(t()(),r.Ta(5,0,null,null,2,"a",[["routerLink","/signin"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==r.cb(t,6).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&i),i},null,null)),r.Sa(6,671744,null,0,z.m,[z.k,z.a,h.g],{routerLink:[0,"routerLink"]},null),(t()(),r.jb(-1,null,["Login"]))],function(t,e){t(e,2,0,"/signup"),t(e,6,0,"/signin")},function(t,e){t(e,1,0,r.cb(e,2).target,r.cb(e,2).href),t(e,5,0,r.cb(e,6).target,r.cb(e,6).href)})}function Wn(t){return r.lb(0,[(t()(),r.Ta(0,0,null,null,1,"a",[["style","cursor: pointer;"]],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.onLogout()&&r),r},null,null)),(t()(),r.jb(-1,null,["Logout"]))],null,null)}function qn(t){return r.lb(0,[(t()(),r.Ta(0,0,null,null,14,"li",[["appDropdown",""],["class","dropdown"]],[[2,"open",null]],[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==r.cb(t,1).toggleOpen()&&i),i},null,null)),r.Sa(1,16384,null,0,Bn.a,[],null,null),(t()(),r.Ta(2,0,null,null,2,"a",[["class","dropdown-toggle"],["role","button"],["style","cursor: pointer;"]],null,null,null,null,null)),(t()(),r.jb(-1,null,["Manage "])),(t()(),r.Ta(4,0,null,null,0,"span",[["class","caret"]],null,null,null,null,null)),(t()(),r.Ta(5,0,null,null,9,"ul",[["class","dropdown-menu"]],null,null,null,null,null)),(t()(),r.Ta(6,0,null,null,2,"li",[],null,null,null,null,null)),(t()(),r.Ta(7,0,null,null,1,"a",[["style","cursor: pointer;"]],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.onSaveData()&&r),r},null,null)),(t()(),r.jb(-1,null,["Save Data"])),(t()(),r.Ta(9,0,null,null,2,"li",[],null,null,null,null,null)),(t()(),r.Ta(10,0,null,null,1,"a",[["style","cursor: pointer;"]],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.onFetchData()&&r),r},null,null)),(t()(),r.jb(-1,null,["Fetch Data"])),(t()(),r.Ta(12,0,null,null,2,"li",[],null,null,null,null,null)),(t()(),r.Ta(13,0,null,null,1,"a",[["style","cursor: pointer;"]],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.onDeleteData()&&r),r},null,null)),(t()(),r.jb(-1,null,["Delete User"]))],null,function(t,e){t(e,0,0,r.cb(e,1).isOpen)})}function Xn(t){return r.lb(0,[(t()(),r.Ta(0,0,null,null,73,"nav",[["class","navbar navbar-default"]],null,null,null,null,null)),(t()(),r.Ta(1,0,null,null,72,"div",[["class","container-fluid"]],null,null,null,null,null)),(t()(),r.Ta(2,0,null,null,3,"div",[["class","navbar-header"]],null,null,null,null,null)),(t()(),r.Ta(3,0,null,null,2,"a",[["class","navbar-brand"],["routerLink","/"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==r.cb(t,4).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&i),i},null,null)),r.Sa(4,671744,null,0,z.m,[z.k,z.a,h.g],{routerLink:[0,"routerLink"]},null),(t()(),r.jb(-1,null,["SiCProductions"])),(t()(),r.Ta(6,0,null,null,67,"div",[["class","collapse navbar-collapse"]],null,null,null,null,null)),(t()(),r.Ta(7,0,null,null,58,"ul",[["class","nav navbar-nav"]],null,null,null,null,null)),(t()(),r.Ta(8,0,null,null,6,"li",[["routerLinkActive","active"]],null,null,null,null,null)),r.Sa(9,1720320,null,2,z.l,[z.k,r.l,r.G,r.i],{routerLinkActive:[0,"routerLinkActive"]},null),r.hb(603979776,1,{links:1}),r.hb(603979776,2,{linksWithHrefs:1}),(t()(),r.Ta(12,0,null,null,2,"a",[["routerLink","/products"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==r.cb(t,13).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&i),i},null,null)),r.Sa(13,671744,[[2,4]],0,z.m,[z.k,z.a,h.g],{routerLink:[0,"routerLink"]},null),(t()(),r.jb(-1,null,["Products"])),(t()(),r.Ta(15,0,null,null,6,"li",[["routerLinkActive","active"]],null,null,null,null,null)),r.Sa(16,1720320,null,2,z.l,[z.k,r.l,r.G,r.i],{routerLinkActive:[0,"routerLinkActive"]},null),r.hb(603979776,3,{links:1}),r.hb(603979776,4,{linksWithHrefs:1}),(t()(),r.Ta(19,0,null,null,2,"a",[["routerLink","/shopping-list"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==r.cb(t,20).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&i),i},null,null)),r.Sa(20,671744,[[4,4]],0,z.m,[z.k,z.a,h.g],{routerLink:[0,"routerLink"]},null),(t()(),r.jb(-1,null,["Shopping List"])),(t()(),r.Ta(22,0,null,null,6,"li",[["routerLinkActive","active"]],null,null,null,null,null)),r.Sa(23,1720320,null,2,z.l,[z.k,r.l,r.G,r.i],{routerLinkActive:[0,"routerLinkActive"]},null),r.hb(603979776,5,{links:1}),r.hb(603979776,6,{linksWithHrefs:1}),(t()(),r.Ta(26,0,null,null,2,"a",[["routerLink","/engine"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==r.cb(t,27).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&i),i},null,null)),r.Sa(27,671744,[[6,4]],0,z.m,[z.k,z.a,h.g],{routerLink:[0,"routerLink"]},null),(t()(),r.jb(-1,null,["Preview Your Product"])),(t()(),r.Ta(29,0,null,null,6,"li",[["routerLinkActive","active"]],null,null,null,null,null)),r.Sa(30,1720320,null,2,z.l,[z.k,r.l,r.G,r.i],{routerLinkActive:[0,"routerLinkActive"]},null),r.hb(603979776,7,{links:1}),r.hb(603979776,8,{linksWithHrefs:1}),(t()(),r.Ta(33,0,null,null,2,"a",[["routerLink","/calc-circuit"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==r.cb(t,34).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&i),i},null,null)),r.Sa(34,671744,[[8,4]],0,z.m,[z.k,z.a,h.g],{routerLink:[0,"routerLink"]},null),(t()(),r.jb(-1,null,["Calc Circuit"])),(t()(),r.Ta(36,0,null,null,6,"li",[["routerLinkActive","active"]],null,null,null,null,null)),r.Sa(37,1720320,null,2,z.l,[z.k,r.l,r.G,r.i],{routerLinkActive:[0,"routerLinkActive"]},null),r.hb(603979776,9,{links:1}),r.hb(603979776,10,{linksWithHrefs:1}),(t()(),r.Ta(40,0,null,null,2,"a",[["routerLink","/assign-orders-factories"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==r.cb(t,41).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&i),i},null,null)),r.Sa(41,671744,[[10,4]],0,z.m,[z.k,z.a,h.g],{routerLink:[0,"routerLink"]},null),(t()(),r.jb(-1,null,["Assign Orders"])),(t()(),r.Ta(43,0,null,null,6,"li",[["routerLinkActive","active"]],null,null,null,null,null)),r.Sa(44,1720320,null,2,z.l,[z.k,r.l,r.G,r.i],{routerLinkActive:[0,"routerLinkActive"]},null),r.hb(603979776,11,{links:1}),r.hb(603979776,12,{linksWithHrefs:1}),(t()(),r.Ta(47,0,null,null,2,"a",[["routerLink","/catalog"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==r.cb(t,48).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&i),i},null,null)),r.Sa(48,671744,[[12,4]],0,z.m,[z.k,z.a,h.g],{routerLink:[0,"routerLink"]},null),(t()(),r.jb(-1,null,["Catalog"])),(t()(),r.Ta(50,0,null,null,6,"li",[["routerLinkActive","active"]],null,null,null,null,null)),r.Sa(51,1720320,null,2,z.l,[z.k,r.l,r.G,r.i],{routerLinkActive:[0,"routerLinkActive"]},null),r.hb(603979776,13,{links:1}),r.hb(603979776,14,{linksWithHrefs:1}),(t()(),r.Ta(54,0,null,null,2,"a",[["routerLink","/collection"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==r.cb(t,55).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&i),i},null,null)),r.Sa(55,671744,[[14,4]],0,z.m,[z.k,z.a,h.g],{routerLink:[0,"routerLink"]},null),(t()(),r.jb(-1,null,["Collection"])),(t()(),r.Ta(57,0,null,null,6,"li",[["routerLinkActive","active"]],null,null,null,null,null)),r.Sa(58,1720320,null,2,z.l,[z.k,r.l,r.G,r.i],{routerLinkActive:[0,"routerLinkActive"]},null),r.hb(603979776,15,{links:1}),r.hb(603979776,16,{linksWithHrefs:1}),(t()(),r.Ta(61,0,null,null,2,"a",[["routerLink","/materialFinish"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==r.cb(t,62).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&i),i},null,null)),r.Sa(62,671744,[[16,4]],0,z.m,[z.k,z.a,h.g],{routerLink:[0,"routerLink"]},null),(t()(),r.jb(-1,null,["Materials And Finishes"])),(t()(),r.Ka(16777216,null,null,1,null,zn)),r.Sa(65,16384,null,0,h.i,[r.S,r.P],{ngIf:[0,"ngIf"]},null),(t()(),r.Ta(66,0,null,null,7,"ul",[["class","nav navbar-nav navbar-right"]],null,null,null,null,null)),(t()(),r.Ka(16777216,null,null,1,null,Hn)),r.Sa(68,16384,null,0,h.i,[r.S,r.P],{ngIf:[0,"ngIf"]},null),(t()(),r.Ta(69,0,null,null,2,"li",[],null,null,null,null,null)),(t()(),r.Ka(16777216,null,null,1,null,Wn)),r.Sa(71,16384,null,0,h.i,[r.S,r.P],{ngIf:[0,"ngIf"]},null),(t()(),r.Ka(16777216,null,null,1,null,qn)),r.Sa(73,16384,null,0,h.i,[r.S,r.P],{ngIf:[0,"ngIf"]},null)],function(t,e){var n=e.component;t(e,4,0,"/"),t(e,9,0,"active"),t(e,13,0,"/products"),t(e,16,0,"active"),t(e,20,0,"/shopping-list"),t(e,23,0,"active"),t(e,27,0,"/engine"),t(e,30,0,"active"),t(e,34,0,"/calc-circuit"),t(e,37,0,"active"),t(e,41,0,"/assign-orders-factories"),t(e,44,0,"active"),t(e,48,0,"/catalog"),t(e,51,0,"active"),t(e,55,0,"/collection"),t(e,58,0,"active"),t(e,62,0,"/materialFinish"),t(e,65,0,n.isAuthenticated()),t(e,68,0,!n.isAuthenticated()),t(e,71,0,n.isAuthenticated()),t(e,73,0,n.isAuthenticated())},function(t,e){t(e,3,0,r.cb(e,4).target,r.cb(e,4).href),t(e,12,0,r.cb(e,13).target,r.cb(e,13).href),t(e,19,0,r.cb(e,20).target,r.cb(e,20).href),t(e,26,0,r.cb(e,27).target,r.cb(e,27).href),t(e,33,0,r.cb(e,34).target,r.cb(e,34).href),t(e,40,0,r.cb(e,41).target,r.cb(e,41).href),t(e,47,0,r.cb(e,48).target,r.cb(e,48).href),t(e,54,0,r.cb(e,55).target,r.cb(e,55).href),t(e,61,0,r.cb(e,62).target,r.cb(e,62).href)})}var Yn=r.Ra({encapsulation:0,styles:[[""]],data:{}});function Kn(t){return r.lb(0,[(t()(),r.Ta(0,0,null,null,1,"app-header",[],null,null,null,Xn,Vn)),r.Sa(1,49152,null,0,Gn,[He.a],null,null),(t()(),r.Ta(2,0,null,null,4,"div",[["class","container"]],null,null,null,null,null)),(t()(),r.Ta(3,0,null,null,3,"div",[["class","row"]],null,null,null,null,null)),(t()(),r.Ta(4,0,null,null,2,"div",[["class","col-md-12"]],null,null,null,null,null)),(t()(),r.Ta(5,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),r.Sa(6,212992,null,0,z.o,[z.b,r.S,r.k,[8,null],r.i],null,null)],function(t,e){t(e,6,0)},null)}var Zn=r.Pa("app-root",s,function(t){return r.lb(0,[(t()(),r.Ta(0,0,null,null,1,"app-root",[],null,null,null,Kn,Yn)),r.Sa(1,114688,null,0,s,[],null,null)],function(t,e){t(e,1,0)},null)},{},{},[]),Qn=function(){},Jn="*";function $n(t,e){return void 0===e&&(e=null),{type:2,steps:t,options:e}}function tr(t){return{type:6,styles:t,offset:null}}function er(t){Promise.resolve(null).then(t)}var nr=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this.parentPlayer=null,this.totalTime=t+e}return t.prototype._onFinish=function(){this._finished||(this._finished=!0,this._onDoneFns.forEach(function(t){return t()}),this._onDoneFns=[])},t.prototype.onStart=function(t){this._onStartFns.push(t)},t.prototype.onDone=function(t){this._onDoneFns.push(t)},t.prototype.onDestroy=function(t){this._onDestroyFns.push(t)},t.prototype.hasStarted=function(){return this._started},t.prototype.init=function(){},t.prototype.play=function(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0},t.prototype.triggerMicrotask=function(){var t=this;er(function(){return t._onFinish()})},t.prototype._onStart=function(){this._onStartFns.forEach(function(t){return t()}),this._onStartFns=[]},t.prototype.pause=function(){},t.prototype.restart=function(){},t.prototype.finish=function(){this._onFinish()},t.prototype.destroy=function(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(function(t){return t()}),this._onDestroyFns=[])},t.prototype.reset=function(){},t.prototype.setPosition=function(t){},t.prototype.getPosition=function(){return 0},t.prototype.triggerCallback=function(t){var e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(function(t){return t()}),e.length=0},t}(),rr=function(){function t(t){var e=this;this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;var n=0,r=0,i=0,o=this.players.length;0==o?er(function(){return e._onFinish()}):this.players.forEach(function(t){t.onDone(function(){++n==o&&e._onFinish()}),t.onDestroy(function(){++r==o&&e._onDestroy()}),t.onStart(function(){++i==o&&e._onStart()})}),this.totalTime=this.players.reduce(function(t,e){return Math.max(t,e.totalTime)},0)}return t.prototype._onFinish=function(){this._finished||(this._finished=!0,this._onDoneFns.forEach(function(t){return t()}),this._onDoneFns=[])},t.prototype.init=function(){this.players.forEach(function(t){return t.init()})},t.prototype.onStart=function(t){this._onStartFns.push(t)},t.prototype._onStart=function(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(function(t){return t()}),this._onStartFns=[])},t.prototype.onDone=function(t){this._onDoneFns.push(t)},t.prototype.onDestroy=function(t){this._onDestroyFns.push(t)},t.prototype.hasStarted=function(){return this._started},t.prototype.play=function(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(function(t){return t.play()})},t.prototype.pause=function(){this.players.forEach(function(t){return t.pause()})},t.prototype.restart=function(){this.players.forEach(function(t){return t.restart()})},t.prototype.finish=function(){this._onFinish(),this.players.forEach(function(t){return t.finish()})},t.prototype.destroy=function(){this._onDestroy()},t.prototype._onDestroy=function(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(function(t){return t.destroy()}),this._onDestroyFns.forEach(function(t){return t()}),this._onDestroyFns=[])},t.prototype.reset=function(){this.players.forEach(function(t){return t.reset()}),this._destroyed=!1,this._finished=!1,this._started=!1},t.prototype.setPosition=function(t){var e=t*this.totalTime;this.players.forEach(function(t){var n=t.totalTime?Math.min(1,e/t.totalTime):1;t.setPosition(n)})},t.prototype.getPosition=function(){var t=0;return this.players.forEach(function(e){var n=e.getPosition();t=Math.min(n,t)}),t},t.prototype.beforeDestroy=function(){this.players.forEach(function(t){t.beforeDestroy&&t.beforeDestroy()})},t.prototype.triggerCallback=function(t){var e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(function(t){return t()}),e.length=0},t}(),ir="!";function or(){return"undefined"!=typeof process}function ar(t){switch(t.length){case 0:return new nr;case 1:return t[0];default:return new rr(t)}}function sr(t,e,n,r,i,o){void 0===i&&(i={}),void 0===o&&(o={});var a=[],s=[],u=-1,l=null;if(r.forEach(function(t){var n=t.offset,r=n==u,c=r&&l||{};Object.keys(t).forEach(function(n){var r=n,s=t[n];if("offset"!==n)switch(r=e.normalizePropertyName(r,a),s){case ir:s=i[n];break;case Jn:s=o[n];break;default:s=e.normalizeStyleValue(n,r,s,a)}c[r]=s}),r||s.push(c),l=c,u=n}),a.length)throw new Error("Unable to animate due to the following errors:\n - "+a.join("\n - "));return s}function ur(t,e,n,r){switch(e){case"start":t.onStart(function(){return r(n&&lr(n,"start",t))});break;case"done":t.onDone(function(){return r(n&&lr(n,"done",t))});break;case"destroy":t.onDestroy(function(){return r(n&&lr(n,"destroy",t))})}}function lr(t,e,n){var r=n.totalTime,i=cr(t.element,t.triggerName,t.fromState,t.toState,e||t.phaseName,void 0==r?t.totalTime:r,!!n.disabled),o=t._data;return null!=o&&(i._data=o),i}function cr(t,e,n,r,i,o,a){return void 0===i&&(i=""),void 0===o&&(o=0),{element:t,triggerName:e,fromState:n,toState:r,phaseName:i,totalTime:o,disabled:!!a}}function hr(t,e,n){var r;return t instanceof Map?(r=t.get(e))||t.set(e,r=n):(r=t[e])||(r=t[e]=n),r}function dr(t){var e=t.indexOf(":");return[t.substring(1,e),t.substr(e+1)]}var pr=function(t,e){return!1},fr=function(t,e){return!1},mr=function(t,e,n){return[]},vr=or();if(vr||"undefined"!=typeof Element){if(pr=function(t,e){return t.contains(e)},vr||Element.prototype.matches)fr=function(t,e){return t.matches(e)};else{var gr=Element.prototype,yr=gr.matchesSelector||gr.mozMatchesSelector||gr.msMatchesSelector||gr.oMatchesSelector||gr.webkitMatchesSelector;yr&&(fr=function(t,e){return yr.apply(t,[e])})}mr=function(t,e,n){var r=[];if(n)r.push.apply(r,Object(c.__spread)(t.querySelectorAll(e)));else{var i=t.querySelector(e);i&&r.push(i)}return r}}var _r=null,br=!1;function wr(t){_r||(_r=("undefined"!=typeof document?document.body:null)||{},br=!!_r.style&&"WebkitAppearance"in _r.style);var e=!0;return _r.style&&!function(t){return"ebkit"==t.substring(1,6)}(t)&&!(e=t in _r.style)&&br&&(e="Webkit"+t.charAt(0).toUpperCase()+t.substr(1)in _r.style),e}var xr=fr,Er=pr,Sr=mr;function Tr(t){var e={};return Object.keys(t).forEach(function(n){var r=n.replace(/([a-z])([A-Z])/g,"$1-$2");e[r]=t[n]}),e}var Mr=function(){function t(){}return t.prototype.validateStyleProperty=function(t){return wr(t)},t.prototype.matchesElement=function(t,e){return xr(t,e)},t.prototype.containsElement=function(t,e){return Er(t,e)},t.prototype.query=function(t,e,n){return Sr(t,e,n)},t.prototype.computeStyle=function(t,e,n){return n||""},t.prototype.animate=function(t,e,n,r,i,o,a){return void 0===o&&(o=[]),new nr(n,r)},t}(),Cr=function(){function t(){}return t.NOOP=new Mr,t}(),Ar=1e3;function Pr(t){if("number"==typeof t)return t;var e=t.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:Or(parseFloat(e[1]),e[2])}function Or(t,e){switch(e){case"s":return t*Ar;default:return t}}function Rr(t,e,n){return t.hasOwnProperty("duration")?t:function(t,e,n){var r,i=0,o="";if("string"==typeof t){var a=t.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return e.push('The provided timing value "'+t+'" is invalid.'),{duration:0,delay:0,easing:""};r=Or(parseFloat(a[1]),a[2]);var s=a[3];null!=s&&(i=Or(Math.floor(parseFloat(s)),a[4]));var u=a[5];u&&(o=u)}else r=t;if(!n){var l=!1,c=e.length;r<0&&(e.push("Duration values below 0 are not allowed for this animation step."),l=!0),i<0&&(e.push("Delay values below 0 are not allowed for this animation step."),l=!0),l&&e.splice(c,0,'The provided timing value "'+t+'" is invalid.')}return{duration:r,delay:i,easing:o}}(t,e,n)}function Lr(t,e){return void 0===e&&(e={}),Object.keys(t).forEach(function(n){e[n]=t[n]}),e}function Ir(t,e,n){if(void 0===n&&(n={}),e)for(var r in t)n[r]=t[r];else Lr(t,n);return n}function Nr(t,e,n){return n?e+":"+n+";":""}function Dr(t){for(var e="",n=0;n<t.style.length;n++)e+=Nr(0,r=t.style.item(n),t.style.getPropertyValue(r));for(var r in t.style)t.style.hasOwnProperty(r)&&!r.startsWith("_")&&(e+=Nr(0,r.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),t.style[r]));t.setAttribute("style",e)}function kr(t,e){t.style&&(Object.keys(e).forEach(function(n){var r=Hr(n);t.style[r]=e[n]}),or()&&Dr(t))}function Fr(t,e){t.style&&(Object.keys(e).forEach(function(e){var n=Hr(e);t.style[n]=""}),or()&&Dr(t))}function jr(t){return Array.isArray(t)?1==t.length?t[0]:$n(t):t}var Ur=new RegExp("{{\\s*(.+?)\\s*}}","g");function Br(t){var e=[];if("string"==typeof t){for(var n=t.toString(),r=void 0;r=Ur.exec(n);)e.push(r[1]);Ur.lastIndex=0}return e}function Gr(t,e,n){var r=t.toString(),i=r.replace(Ur,function(t,r){var i=e[r];return e.hasOwnProperty(r)||(n.push("Please provide a value for the animation param "+r),i=""),i.toString()});return i==r?t:i}function Vr(t){for(var e=[],n=t.next();!n.done;)e.push(n.value),n=t.next();return e}var zr=/-+([a-z0-9])/g;function Hr(t){return t.replace(zr,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t[1].toUpperCase()})}function Wr(t,e){return 0===t||0===e}function qr(t,e,n){var r=Object.keys(n);if(r.length&&e.length){var i=e[0],o=[];if(r.forEach(function(t){i.hasOwnProperty(t)||o.push(t),i[t]=n[t]}),o.length)for(var a=function(){var n=e[s];o.forEach(function(e){n[e]=Yr(t,e)})},s=1;s<e.length;s++)a()}return e}function Xr(t,e,n){switch(e.type){case 7:return t.visitTrigger(e,n);case 0:return t.visitState(e,n);case 1:return t.visitTransition(e,n);case 2:return t.visitSequence(e,n);case 3:return t.visitGroup(e,n);case 4:return t.visitAnimate(e,n);case 5:return t.visitKeyframes(e,n);case 6:return t.visitStyle(e,n);case 8:return t.visitReference(e,n);case 9:return t.visitAnimateChild(e,n);case 10:return t.visitAnimateRef(e,n);case 11:return t.visitQuery(e,n);case 12:return t.visitStagger(e,n);default:throw new Error("Unable to resolve animation metadata node #"+e.type)}}function Yr(t,e){return window.getComputedStyle(t)[e]}var Kr="*",Zr=new Set(["true","1"]),Qr=new Set(["false","0"]);function Jr(t,e){var n=Zr.has(t)||Qr.has(t),r=Zr.has(e)||Qr.has(e);return function(i,o){var a=t==Kr||t==i,s=e==Kr||e==o;return!a&&n&&"boolean"==typeof i&&(a=i?Zr.has(t):Qr.has(t)),!s&&r&&"boolean"==typeof o&&(s=o?Zr.has(e):Qr.has(e)),a&&s}}var $r=new RegExp("s*:selfs*,?","g");function ti(t,e,n){return new ei(t).build(e,n)}var ei=function(){function t(t){this._driver=t}return t.prototype.build=function(t,e){var n=new ni(e);return this._resetContextStyleTimingState(n),Xr(this,jr(t),n)},t.prototype._resetContextStyleTimingState=function(t){t.currentQuerySelector="",t.collectedStyles={},t.collectedStyles[""]={},t.currentTime=0},t.prototype.visitTrigger=function(t,e){var n=this,r=e.queryCount=0,i=e.depCount=0,o=[],a=[];return"@"==t.name.charAt(0)&&e.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),t.definitions.forEach(function(t){if(n._resetContextStyleTimingState(e),0==t.type){var s=t,u=s.name;u.toString().split(/\s*,\s*/).forEach(function(t){s.name=t,o.push(n.visitState(s,e))}),s.name=u}else if(1==t.type){var l=n.visitTransition(t,e);r+=l.queryCount,i+=l.depCount,a.push(l)}else e.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:t.name,states:o,transitions:a,queryCount:r,depCount:i,options:null}},t.prototype.visitState=function(t,e){var n=this.visitStyle(t.styles,e),r=t.options&&t.options.params||null;if(n.containsDynamicStyles){var i=new Set,o=r||{};if(n.styles.forEach(function(t){if(ri(t)){var e=t;Object.keys(e).forEach(function(t){Br(e[t]).forEach(function(t){o.hasOwnProperty(t)||i.add(t)})})}}),i.size){var a=Vr(i.values());e.errors.push('state("'+t.name+'", ...) must define default values for all the following style substitutions: '+a.join(", "))}}return{type:0,name:t.name,style:n,options:r?{params:r}:null}},t.prototype.visitTransition=function(t,e){e.queryCount=0,e.depCount=0;var n,r,i,o=Xr(this,jr(t.animation),e);return{type:1,matchers:(n=t.expr,r=e.errors,i=[],"string"==typeof n?n.split(/\s*,\s*/).forEach(function(t){return function(t,e,n){if(":"==t[0]){var r=function(t,e){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return function(t,e){return parseFloat(e)>parseFloat(t)};case":decrement":return function(t,e){return parseFloat(e)<parseFloat(t)};default:return e.push('The transition alias value "'+t+'" is not supported'),"* => *"}}(t,n);if("function"==typeof r)return void e.push(r);t=r}var i=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return n.push('The provided transition expression "'+t+'" is not supported'),e;var o=i[1],a=i[2],s=i[3];e.push(Jr(o,s)),"<"!=a[0]||o==Kr&&s==Kr||e.push(Jr(s,o))}(t,i,r)}):i.push(n),i),animation:o,queryCount:e.queryCount,depCount:e.depCount,options:ii(t.options)}},t.prototype.visitSequence=function(t,e){var n=this;return{type:2,steps:t.steps.map(function(t){return Xr(n,t,e)}),options:ii(t.options)}},t.prototype.visitGroup=function(t,e){var n=this,r=e.currentTime,i=0,o=t.steps.map(function(t){e.currentTime=r;var o=Xr(n,t,e);return i=Math.max(i,e.currentTime),o});return e.currentTime=i,{type:3,steps:o,options:ii(t.options)}},t.prototype.visitAnimate=function(t,e){var n,r=function(t,e){var n=null;if(t.hasOwnProperty("duration"))n=t;else if("number"==typeof t)return oi(Rr(t,e).duration,0,"");var r=t;if(r.split(/\s+/).some(function(t){return"{"==t.charAt(0)&&"{"==t.charAt(1)})){var i=oi(0,0,"");return i.dynamic=!0,i.strValue=r,i}return oi((n=n||Rr(r,e)).duration,n.delay,n.easing)}(t.timings,e.errors);e.currentAnimateTimings=r;var i=t.styles?t.styles:tr({});if(5==i.type)n=this.visitKeyframes(i,e);else{var o=t.styles,a=!1;if(!o){a=!0;var s={};r.easing&&(s.easing=r.easing),o=tr(s)}e.currentTime+=r.duration+r.delay;var u=this.visitStyle(o,e);u.isEmptyStep=a,n=u}return e.currentAnimateTimings=null,{type:4,timings:r,style:n,options:null}},t.prototype.visitStyle=function(t,e){var n=this._makeStyleAst(t,e);return this._validateStyleAst(n,e),n},t.prototype._makeStyleAst=function(t,e){var n=[];Array.isArray(t.styles)?t.styles.forEach(function(t){"string"==typeof t?t==Jn?n.push(t):e.errors.push("The provided style string value "+t+" is not allowed."):n.push(t)}):n.push(t.styles);var r=!1,i=null;return n.forEach(function(t){if(ri(t)){var e=t,n=e.easing;if(n&&(i=n,delete e.easing),!r)for(var o in e)if(e[o].toString().indexOf("{{")>=0){r=!0;break}}}),{type:6,styles:n,easing:i,offset:t.offset,containsDynamicStyles:r,options:null}},t.prototype._validateStyleAst=function(t,e){var n=this,r=e.currentAnimateTimings,i=e.currentTime,o=e.currentTime;r&&o>0&&(o-=r.duration+r.delay),t.styles.forEach(function(t){"string"!=typeof t&&Object.keys(t).forEach(function(r){if(n._driver.validateStyleProperty(r)){var a,s,u,l=e.collectedStyles[e.currentQuerySelector],c=l[r],h=!0;c&&(o!=i&&o>=c.startTime&&i<=c.endTime&&(e.errors.push('The CSS property "'+r+'" that exists between the times of "'+c.startTime+'ms" and "'+c.endTime+'ms" is also being animated in a parallel animation between the times of "'+o+'ms" and "'+i+'ms"'),h=!1),o=c.startTime),h&&(l[r]={startTime:o,endTime:i}),e.options&&(a=e.errors,s=e.options.params||{},(u=Br(t[r])).length&&u.forEach(function(t){s.hasOwnProperty(t)||a.push("Unable to resolve the local animation param "+t+" in the given list of values")}))}else e.errors.push('The provided animation property "'+r+'" is not a supported CSS property for animations')})})},t.prototype.visitKeyframes=function(t,e){var n=this,r={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push("keyframes() must be placed inside of a call to animate()"),r;var i=0,o=[],a=!1,s=!1,u=0,l=t.steps.map(function(t){var r=n._makeStyleAst(t,e),l=null!=r.offset?r.offset:function(t){if("string"==typeof t)return null;var e=null;if(Array.isArray(t))t.forEach(function(t){if(ri(t)&&t.hasOwnProperty("offset")){var n=t;e=parseFloat(n.offset),delete n.offset}});else if(ri(t)&&t.hasOwnProperty("offset")){var n=t;e=parseFloat(n.offset),delete n.offset}return e}(r.styles),c=0;return null!=l&&(i++,c=r.offset=l),s=s||c<0||c>1,a=a||c<u,u=c,o.push(c),r});s&&e.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),a&&e.errors.push("Please ensure that all keyframe offsets are in order");var c=t.steps.length,h=0;i>0&&i<c?e.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==i&&(h=1/(c-1));var d=c-1,p=e.currentTime,f=e.currentAnimateTimings,m=f.duration;return l.forEach(function(t,i){var a=h>0?i==d?1:h*i:o[i],s=a*m;e.currentTime=p+f.delay+s,f.duration=s,n._validateStyleAst(t,e),t.offset=a,r.styles.push(t)}),r},t.prototype.visitReference=function(t,e){return{type:8,animation:Xr(this,jr(t.animation),e),options:ii(t.options)}},t.prototype.visitAnimateChild=function(t,e){return e.depCount++,{type:9,options:ii(t.options)}},t.prototype.visitAnimateRef=function(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:ii(t.options)}},t.prototype.visitQuery=function(t,e){var n=e.currentQuerySelector,r=t.options||{};e.queryCount++,e.currentQuery=t;var i=Object(c.__read)(function(t){var e=!!t.split(/\s*,\s*/).find(function(t){return":self"==t});return e&&(t=t.replace($r,"")),[t=t.replace(/@\*/g,".ng-trigger").replace(/@\w+/g,function(t){return".ng-trigger-"+t.substr(1)}).replace(/:animating/g,".ng-animating"),e]}(t.selector),2),o=i[0],a=i[1];e.currentQuerySelector=n.length?n+" "+o:o,hr(e.collectedStyles,e.currentQuerySelector,{});var s=Xr(this,jr(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=n,{type:11,selector:o,limit:r.limit||0,optional:!!r.optional,includeSelf:a,animation:s,originalSelector:t.selector,options:ii(t.options)}},t.prototype.visitStagger=function(t,e){e.currentQuery||e.errors.push("stagger() can only be used inside of query()");var n="full"===t.timings?{duration:0,delay:0,easing:"full"}:Rr(t.timings,e.errors,!0);return{type:12,animation:Xr(this,jr(t.animation),e),timings:n,options:null}},t}(),ni=function(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null};function ri(t){return!Array.isArray(t)&&"object"==typeof t}function ii(t){var e;return t?(t=Lr(t)).params&&(t.params=(e=t.params)?Lr(e):null):t={},t}function oi(t,e,n){return{duration:t,delay:e,easing:n}}function ai(t,e,n,r,i,o,a,s){return void 0===a&&(a=null),void 0===s&&(s=!1),{type:1,element:t,keyframes:e,preStyleProps:n,postStyleProps:r,duration:i,delay:o,totalTime:i+o,easing:a,subTimeline:s}}var si=function(){function t(){this._map=new Map}return t.prototype.consume=function(t){var e=this._map.get(t);return e?this._map.delete(t):e=[],e},t.prototype.append=function(t,e){var n=this._map.get(t);n||this._map.set(t,n=[]),n.push.apply(n,Object(c.__spread)(e))},t.prototype.has=function(t){return this._map.has(t)},t.prototype.clear=function(){this._map.clear()},t}(),ui=new RegExp(":enter","g"),li=new RegExp(":leave","g");function ci(t,e,n,r,i,o,a,s,u,l){return void 0===o&&(o={}),void 0===a&&(a={}),void 0===l&&(l=[]),(new hi).buildKeyframes(t,e,n,r,i,o,a,s,u,l)}var hi=function(){function t(){}return t.prototype.buildKeyframes=function(t,e,n,r,i,o,a,s,u,l){void 0===l&&(l=[]),u=u||new si;var c=new pi(t,e,u,r,i,l,[]);c.options=s,c.currentTimeline.setStyles([o],null,c.errors,s),Xr(this,n,c);var h=c.timelines.filter(function(t){return t.containsAnimation()});if(h.length&&Object.keys(a).length){var d=h[h.length-1];d.allowOnlyTimelineStyles()||d.setStyles([a],null,c.errors,s)}return h.length?h.map(function(t){return t.buildKeyframes()}):[ai(e,[],[],[],0,0,"",!1)]},t.prototype.visitTrigger=function(t,e){},t.prototype.visitState=function(t,e){},t.prototype.visitTransition=function(t,e){},t.prototype.visitAnimateChild=function(t,e){var n=e.subInstructions.consume(e.element);if(n){var r=e.createSubContext(t.options),i=e.currentTimeline.currentTime,o=this._visitSubInstructions(n,r,r.options);i!=o&&e.transformIntoNewTimeline(o)}e.previousNode=t},t.prototype.visitAnimateRef=function(t,e){var n=e.createSubContext(t.options);n.transformIntoNewTimeline(),this.visitReference(t.animation,n),e.transformIntoNewTimeline(n.currentTimeline.currentTime),e.previousNode=t},t.prototype._visitSubInstructions=function(t,e,n){var r=e.currentTimeline.currentTime,i=null!=n.duration?Pr(n.duration):null,o=null!=n.delay?Pr(n.delay):null;return 0!==i&&t.forEach(function(t){var n=e.appendInstructionToTimeline(t,i,o);r=Math.max(r,n.duration+n.delay)}),r},t.prototype.visitReference=function(t,e){e.updateOptions(t.options,!0),Xr(this,t.animation,e),e.previousNode=t},t.prototype.visitSequence=function(t,e){var n=this,r=e.subContextCount,i=e,o=t.options;if(o&&(o.params||o.delay)&&((i=e.createSubContext(o)).transformIntoNewTimeline(),null!=o.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=di);var a=Pr(o.delay);i.delayNextStep(a)}t.steps.length&&(t.steps.forEach(function(t){return Xr(n,t,i)}),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),e.previousNode=t},t.prototype.visitGroup=function(t,e){var n=this,r=[],i=e.currentTimeline.currentTime,o=t.options&&t.options.delay?Pr(t.options.delay):0;t.steps.forEach(function(a){var s=e.createSubContext(t.options);o&&s.delayNextStep(o),Xr(n,a,s),i=Math.max(i,s.currentTimeline.currentTime),r.push(s.currentTimeline)}),r.forEach(function(t){return e.currentTimeline.mergeTimelineCollectedStyles(t)}),e.transformIntoNewTimeline(i),e.previousNode=t},t.prototype._visitTiming=function(t,e){if(t.dynamic){var n=t.strValue;return Rr(e.params?Gr(n,e.params,e.errors):n,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}},t.prototype.visitAnimate=function(t,e){var n=e.currentAnimateTimings=this._visitTiming(t.timings,e),r=e.currentTimeline;n.delay&&(e.incrementTime(n.delay),r.snapshotCurrentStyles());var i=t.style;5==i.type?this.visitKeyframes(i,e):(e.incrementTime(n.duration),this.visitStyle(i,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t},t.prototype.visitStyle=function(t,e){var n=e.currentTimeline,r=e.currentAnimateTimings;!r&&n.getCurrentStyleProperties().length&&n.forwardFrame();var i=r&&r.easing||t.easing;t.isEmptyStep?n.applyEmptyStep(i):n.setStyles(t.styles,i,e.errors,e.options),e.previousNode=t},t.prototype.visitKeyframes=function(t,e){var n=e.currentAnimateTimings,r=e.currentTimeline.duration,i=n.duration,o=e.createSubContext().currentTimeline;o.easing=n.easing,t.styles.forEach(function(t){o.forwardTime((t.offset||0)*i),o.setStyles(t.styles,t.easing,e.errors,e.options),o.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(o),e.transformIntoNewTimeline(r+i),e.previousNode=t},t.prototype.visitQuery=function(t,e){var n=this,r=e.currentTimeline.currentTime,i=t.options||{},o=i.delay?Pr(i.delay):0;o&&(6===e.previousNode.type||0==r&&e.currentTimeline.getCurrentStyleProperties().length)&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=di);var a=r,s=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!i.optional,e.errors);e.currentQueryTotal=s.length;var u=null;s.forEach(function(r,i){e.currentQueryIndex=i;var s=e.createSubContext(t.options,r);o&&s.delayNextStep(o),r===e.element&&(u=s.currentTimeline),Xr(n,t.animation,s),s.currentTimeline.applyStylesToKeyframe(),a=Math.max(a,s.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(a),u&&(e.currentTimeline.mergeTimelineCollectedStyles(u),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t},t.prototype.visitStagger=function(t,e){var n=e.parentContext,r=e.currentTimeline,i=t.timings,o=Math.abs(i.duration),a=o*(e.currentQueryTotal-1),s=o*e.currentQueryIndex;switch(i.duration<0?"reverse":i.easing){case"reverse":s=a-s;break;case"full":s=n.currentStaggerTime}var u=e.currentTimeline;s&&u.delayNextStep(s);var l=u.currentTime;Xr(this,t.animation,e),e.previousNode=t,n.currentStaggerTime=r.currentTime-l+(r.startTime-n.currentTimeline.startTime)},t}(),di={},pi=function(){function t(t,e,n,r,i,o,a,s){this._driver=t,this.element=e,this.subInstructions=n,this._enterClassName=r,this._leaveClassName=i,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=di,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=s||new fi(this._driver,e,0),a.push(this.currentTimeline)}return Object.defineProperty(t.prototype,"params",{get:function(){return this.options.params},enumerable:!0,configurable:!0}),t.prototype.updateOptions=function(t,e){var n=this;if(t){var r=t,i=this.options;null!=r.duration&&(i.duration=Pr(r.duration)),null!=r.delay&&(i.delay=Pr(r.delay));var o=r.params;if(o){var a=i.params;a||(a=this.options.params={}),Object.keys(o).forEach(function(t){e&&a.hasOwnProperty(t)||(a[t]=Gr(o[t],a,n.errors))})}}},t.prototype._copyOptions=function(){var t={};if(this.options){var e=this.options.params;if(e){var n=t.params={};Object.keys(e).forEach(function(t){n[t]=e[t]})}}return t},t.prototype.createSubContext=function(e,n,r){void 0===e&&(e=null);var i=n||this.element,o=new t(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(e),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o},t.prototype.transformIntoNewTimeline=function(t){return this.previousNode=di,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline},t.prototype.appendInstructionToTimeline=function(t,e,n){var r={duration:null!=e?e:t.duration,delay:this.currentTimeline.currentTime+(null!=n?n:0)+t.delay,easing:""},i=new mi(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(i),r},t.prototype.incrementTime=function(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)},t.prototype.delayNextStep=function(t){t>0&&this.currentTimeline.delayNextStep(t)},t.prototype.invokeQuery=function(t,e,n,r,i,o){var a=[];if(r&&a.push(this.element),t.length>0){t=(t=t.replace(ui,"."+this._enterClassName)).replace(li,"."+this._leaveClassName);var s=this._driver.query(this.element,t,1!=n);0!==n&&(s=n<0?s.slice(s.length+n,s.length):s.slice(0,n)),a.push.apply(a,Object(c.__spread)(s))}return i||0!=a.length||o.push('`query("'+e+'")` returned zero elements. (Use `query("'+e+'", { optional: true })` if you wish to allow this.)'),a},t}(),fi=function(){function t(t,e,n,r){this._driver=t,this.element=e,this.startTime=n,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}return t.prototype.containsAnimation=function(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}},t.prototype.getCurrentStyleProperties=function(){return Object.keys(this._currentKeyframe)},Object.defineProperty(t.prototype,"currentTime",{get:function(){return this.startTime+this.duration},enumerable:!0,configurable:!0}),t.prototype.delayNextStep=function(t){var e=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t},t.prototype.fork=function(e,n){return this.applyStylesToKeyframe(),new t(this._driver,e,n||this.currentTime,this._elementTimelineStylesLookup)},t.prototype._loadKeyframe=function(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))},t.prototype.forwardFrame=function(){this.duration+=1,this._loadKeyframe()},t.prototype.forwardTime=function(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()},t.prototype._updateStyle=function(t,e){this._localTimelineStyles[t]=e,this._globalTimelineStyles[t]=e,this._styleSummary[t]={time:this.currentTime,value:e}},t.prototype.allowOnlyTimelineStyles=function(){return this._currentEmptyStepKeyframe!==this._currentKeyframe},t.prototype.applyEmptyStep=function(t){var e=this;t&&(this._previousKeyframe.easing=t),Object.keys(this._globalTimelineStyles).forEach(function(t){e._backFill[t]=e._globalTimelineStyles[t]||Jn,e._currentKeyframe[t]=Jn}),this._currentEmptyStepKeyframe=this._currentKeyframe},t.prototype.setStyles=function(t,e,n,r){var i=this;e&&(this._previousKeyframe.easing=e);var o=r&&r.params||{},a=function(t,e){var n,r={};return t.forEach(function(t){"*"===t?(n=n||Object.keys(e)).forEach(function(t){r[t]=Jn}):Ir(t,!1,r)}),r}(t,this._globalTimelineStyles);Object.keys(a).forEach(function(t){var e=Gr(a[t],o,n);i._pendingStyles[t]=e,i._localTimelineStyles.hasOwnProperty(t)||(i._backFill[t]=i._globalTimelineStyles.hasOwnProperty(t)?i._globalTimelineStyles[t]:Jn),i._updateStyle(t,e)})},t.prototype.applyStylesToKeyframe=function(){var t=this,e=this._pendingStyles,n=Object.keys(e);0!=n.length&&(this._pendingStyles={},n.forEach(function(n){t._currentKeyframe[n]=e[n]}),Object.keys(this._localTimelineStyles).forEach(function(e){t._currentKeyframe.hasOwnProperty(e)||(t._currentKeyframe[e]=t._localTimelineStyles[e])}))},t.prototype.snapshotCurrentStyles=function(){var t=this;Object.keys(this._localTimelineStyles).forEach(function(e){var n=t._localTimelineStyles[e];t._pendingStyles[e]=n,t._updateStyle(e,n)})},t.prototype.getFinalKeyframe=function(){return this._keyframes.get(this.duration)},Object.defineProperty(t.prototype,"properties",{get:function(){var t=[];for(var e in this._currentKeyframe)t.push(e);return t},enumerable:!0,configurable:!0}),t.prototype.mergeTimelineCollectedStyles=function(t){var e=this;Object.keys(t._styleSummary).forEach(function(n){var r=e._styleSummary[n],i=t._styleSummary[n];(!r||i.time>r.time)&&e._updateStyle(n,i.value)})},t.prototype.buildKeyframes=function(){var t=this;this.applyStylesToKeyframe();var e=new Set,n=new Set,r=1===this._keyframes.size&&0===this.duration,i=[];this._keyframes.forEach(function(o,a){var s=Ir(o,!0);Object.keys(s).forEach(function(t){var r=s[t];r==ir?e.add(t):r==Jn&&n.add(t)}),r||(s.offset=a/t.duration),i.push(s)});var o=e.size?Vr(e.values()):[],a=n.size?Vr(n.values()):[];if(r){var s=i[0],u=Lr(s);s.offset=0,u.offset=1,i=[s,u]}return ai(this.element,i,o,a,this.duration,this.startTime,this.easing,!1)},t}(),mi=function(t){function e(e,n,r,i,o,a,s){void 0===s&&(s=!1);var u=t.call(this,e,n,a.delay)||this;return u.element=n,u.keyframes=r,u.preStyleProps=i,u.postStyleProps=o,u._stretchStartingKeyframe=s,u.timings={duration:a.duration,delay:a.delay,easing:a.easing},u}return Object(c.__extends)(e,t),e.prototype.containsAnimation=function(){return this.keyframes.length>1},e.prototype.buildKeyframes=function(){var t=this.keyframes,e=this.timings,n=e.delay,r=e.duration,i=e.easing;if(this._stretchStartingKeyframe&&n){var o=[],a=r+n,s=n/a,u=Ir(t[0],!1);u.offset=0,o.push(u);var l=Ir(t[0],!1);l.offset=vi(s),o.push(l);for(var c=t.length-1,h=1;h<=c;h++){var d=Ir(t[h],!1);d.offset=vi((n+d.offset*r)/a),o.push(d)}r=a,n=0,i="",t=o}return ai(this.element,t,this.preStyleProps,this.postStyleProps,r,n,i,!0)},e}(fi);function vi(t,e){void 0===e&&(e=3);var n=Math.pow(10,e-1);return Math.round(t*n)/n}var gi=function(){},yi=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(c.__extends)(e,t),e.prototype.normalizePropertyName=function(t,e){return Hr(t)},e.prototype.normalizeStyleValue=function(t,e,n,r){var i="",o=n.toString().trim();if(_i[e]&&0!==n&&"0"!==n)if("number"==typeof n)i="px";else{var a=n.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&r.push("Please provide a CSS unit value for "+t+":"+n)}return o+i},e}(gi),_i=function(t){var e={};return"width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",").forEach(function(t){return e[t]=!0}),e}();function bi(t,e,n,r,i,o,a,s,u,l,c,h,d){return{type:0,element:t,triggerName:e,isRemovalTransition:i,fromState:n,fromStyles:o,toState:r,toStyles:a,timelines:s,queriedElements:u,preStyleProps:l,postStyleProps:c,totalTime:h,errors:d}}var wi={},xi=function(){function t(t,e,n){this._triggerName=t,this.ast=e,this._stateStyles=n}return t.prototype.match=function(t,e,n,r){return function(t,e,n,r,i){return t.some(function(t){return t(e,n,r,i)})}(this.ast.matchers,t,e,n,r)},t.prototype.buildStyles=function(t,e,n){var r=this._stateStyles["*"],i=this._stateStyles[t],o=r?r.buildStyles(e,n):{};return i?i.buildStyles(e,n):o},t.prototype.build=function(t,e,n,r,i,o,a,s,u,l){var h=[],d=this.ast.options&&this.ast.options.params||wi,p=this.buildStyles(n,a&&a.params||wi,h),f=s&&s.params||wi,m=this.buildStyles(r,f,h),v=new Set,g=new Map,y=new Map,_="void"===r,b={params:Object(c.__assign)({},d,f)},w=l?[]:ci(t,e,this.ast.animation,i,o,p,m,b,u,h),x=0;if(w.forEach(function(t){x=Math.max(t.duration+t.delay,x)}),h.length)return bi(e,this._triggerName,n,r,_,p,m,[],[],g,y,x,h);w.forEach(function(t){var n=t.element,r=hr(g,n,{});t.preStyleProps.forEach(function(t){return r[t]=!0});var i=hr(y,n,{});t.postStyleProps.forEach(function(t){return i[t]=!0}),n!==e&&v.add(n)});var E=Vr(v.values());return bi(e,this._triggerName,n,r,_,p,m,w,E,g,y,x)},t}(),Ei=function(){function t(t,e){this.styles=t,this.defaultParams=e}return t.prototype.buildStyles=function(t,e){var n={},r=Lr(this.defaultParams);return Object.keys(t).forEach(function(e){var n=t[e];null!=n&&(r[e]=n)}),this.styles.styles.forEach(function(t){if("string"!=typeof t){var i=t;Object.keys(i).forEach(function(t){var o=i[t];o.length>1&&(o=Gr(o,r,e)),n[t]=o})}}),n},t}(),Si=function(){function t(t,e){var n=this;this.name=t,this.ast=e,this.transitionFactories=[],this.states={},e.states.forEach(function(t){n.states[t.name]=new Ei(t.style,t.options&&t.options.params||{})}),Ti(this.states,"true","1"),Ti(this.states,"false","0"),e.transitions.forEach(function(e){n.transitionFactories.push(new xi(t,e,n.states))}),this.fallbackTransition=new xi(t,{type:1,animation:{type:2,steps:[],options:null},matchers:[function(t,e){return!0}],options:null,queryCount:0,depCount:0},this.states)}return Object.defineProperty(t.prototype,"containsQueries",{get:function(){return this.ast.queryCount>0},enumerable:!0,configurable:!0}),t.prototype.matchTransition=function(t,e,n,r){return this.transitionFactories.find(function(i){return i.match(t,e,n,r)})||null},t.prototype.matchStyles=function(t,e,n){return this.fallbackTransition.buildStyles(t,e,n)},t}();function Ti(t,e,n){t.hasOwnProperty(e)?t.hasOwnProperty(n)||(t[n]=t[e]):t.hasOwnProperty(n)&&(t[e]=t[n])}var Mi=new si,Ci=function(){function t(t,e,n){this.bodyNode=t,this._driver=e,this._normalizer=n,this._animations={},this._playersById={},this.players=[]}return t.prototype.register=function(t,e){var n=[],r=ti(this._driver,e,n);if(n.length)throw new Error("Unable to build the animation due to the following errors: "+n.join("\n"));this._animations[t]=r},t.prototype._buildPlayer=function(t,e,n){var r=t.element,i=sr(0,this._normalizer,0,t.keyframes,e,n);return this._driver.animate(r,i,t.duration,t.delay,t.easing,[],!0)},t.prototype.create=function(t,e,n){var r=this;void 0===n&&(n={});var i,o=[],a=this._animations[t],s=new Map;if(a?(i=ci(this._driver,e,a,"ng-enter","ng-leave",{},{},n,Mi,o)).forEach(function(t){var e=hr(s,t.element,{});t.postStyleProps.forEach(function(t){return e[t]=null})}):(o.push("The requested animation doesn't exist or has already been destroyed"),i=[]),o.length)throw new Error("Unable to create the animation due to the following errors: "+o.join("\n"));s.forEach(function(t,e){Object.keys(t).forEach(function(n){t[n]=r._driver.computeStyle(e,n,Jn)})});var u=ar(i.map(function(t){var e=s.get(t.element);return r._buildPlayer(t,{},e)}));return this._playersById[t]=u,u.onDestroy(function(){return r.destroy(t)}),this.players.push(u),u},t.prototype.destroy=function(t){var e=this._getPlayer(t);e.destroy(),delete this._playersById[t];var n=this.players.indexOf(e);n>=0&&this.players.splice(n,1)},t.prototype._getPlayer=function(t){var e=this._playersById[t];if(!e)throw new Error("Unable to find the timeline player referenced by "+t);return e},t.prototype.listen=function(t,e,n,r){var i=cr(e,"","","");return ur(this._getPlayer(t),n,i,r),function(){}},t.prototype.command=function(t,e,n,r){if("register"!=n)if("create"!=n){var i=this._getPlayer(t);switch(n){case"play":i.play();break;case"pause":i.pause();break;case"reset":i.reset();break;case"restart":i.restart();break;case"finish":i.finish();break;case"init":i.init();break;case"setPosition":i.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t)}}else this.create(t,e,r[0]||{});else this.register(t,r[0])},t}(),Ai=[],Pi={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Oi={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Ri="__ng_removed",Li=function(){function t(t,e){void 0===e&&(e=""),this.namespaceId=e;var n=t&&t.hasOwnProperty("value");if(this.value=function(t){return null!=t?t:null}(n?t.value:t),n){var r=Lr(t);delete r.value,this.options=r}else this.options={};this.options.params||(this.options.params={})}return Object.defineProperty(t.prototype,"params",{get:function(){return this.options.params},enumerable:!0,configurable:!0}),t.prototype.absorbOptions=function(t){var e=t.params;if(e){var n=this.options.params;Object.keys(e).forEach(function(t){null==n[t]&&(n[t]=e[t])})}},t}(),Ii=new Li("void"),Ni=function(){function t(t,e,n){this.id=t,this.hostElement=e,this._engine=n,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,Vi(e,this._hostClassName)}return t.prototype.listen=function(t,e,n,r){var i,o=this;if(!this._triggers.hasOwnProperty(e))throw new Error('Unable to listen on the animation trigger event "'+n+'" because the animation trigger "'+e+"\" doesn't exist!");if(null==n||0==n.length)throw new Error('Unable to listen on the animation trigger "'+e+'" because the provided event is undefined!');if("start"!=(i=n)&&"done"!=i)throw new Error('The provided animation trigger event "'+n+'" for the animation trigger "'+e+'" is not supported!');var a=hr(this._elementListeners,t,[]),s={name:e,phase:n,callback:r};a.push(s);var u=hr(this._engine.statesByElement,t,{});return u.hasOwnProperty(e)||(Vi(t,"ng-trigger"),Vi(t,"ng-trigger-"+e),u[e]=Ii),function(){o._engine.afterFlush(function(){var t=a.indexOf(s);t>=0&&a.splice(t,1),o._triggers[e]||delete u[e]})}},t.prototype.register=function(t,e){return!this._triggers[t]&&(this._triggers[t]=e,!0)},t.prototype._getTrigger=function(t){var e=this._triggers[t];if(!e)throw new Error('The provided animation trigger "'+t+'" has not been registered!');return e},t.prototype.trigger=function(t,e,n,r){var i=this;void 0===r&&(r=!0);var o=this._getTrigger(e),a=new ki(this.id,e,t),s=this._engine.statesByElement.get(t);s||(Vi(t,"ng-trigger"),Vi(t,"ng-trigger-"+e),this._engine.statesByElement.set(t,s={}));var u=s[e],l=new Li(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&u&&l.absorbOptions(u.options),s[e]=l,u||(u=Ii),"void"===l.value||u.value!==l.value){var c=hr(this._engine.playersByElement,t,[]);c.forEach(function(t){t.namespaceId==i.id&&t.triggerName==e&&t.queued&&t.destroy()});var h=o.matchTransition(u.value,l.value,t,l.params),d=!1;if(!h){if(!r)return;h=o.fallbackTransition,d=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:h,fromState:u,toState:l,player:a,isFallbackTransition:d}),d||(Vi(t,"ng-animate-queued"),a.onStart(function(){zi(t,"ng-animate-queued")})),a.onDone(function(){var e=i.players.indexOf(a);e>=0&&i.players.splice(e,1);var n=i._engine.playersByElement.get(t);if(n){var r=n.indexOf(a);r>=0&&n.splice(r,1)}}),this.players.push(a),c.push(a),a}if(!function(t,e){var n=Object.keys(t),r=Object.keys(e);if(n.length!=r.length)return!1;for(var i=0;i<n.length;i++){var o=n[i];if(!e.hasOwnProperty(o)||t[o]!==e[o])return!1}return!0}(u.params,l.params)){var p=[],f=o.matchStyles(u.value,u.params,p),m=o.matchStyles(l.value,l.params,p);p.length?this._engine.reportError(p):this._engine.afterFlush(function(){Fr(t,f),kr(t,m)})}},t.prototype.deregister=function(t){var e=this;delete this._triggers[t],this._engine.statesByElement.forEach(function(e,n){delete e[t]}),this._elementListeners.forEach(function(n,r){e._elementListeners.set(r,n.filter(function(e){return e.name!=t}))})},t.prototype.clearElementCache=function(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);var e=this._engine.playersByElement.get(t);e&&(e.forEach(function(t){return t.destroy()}),this._engine.playersByElement.delete(t))},t.prototype._signalRemovalForInnerTriggers=function(t,e,n){var r=this;void 0===n&&(n=!1),this._engine.driver.query(t,".ng-trigger",!0).forEach(function(t){if(!t[Ri]){var n=r._engine.fetchNamespacesByElement(t);n.size?n.forEach(function(n){return n.triggerLeaveAnimation(t,e,!1,!0)}):r.clearElementCache(t)}})},t.prototype.triggerLeaveAnimation=function(t,e,n,r){var i=this,o=this._engine.statesByElement.get(t);if(o){var a=[];if(Object.keys(o).forEach(function(e){if(i._triggers[e]){var n=i.trigger(t,e,"void",r);n&&a.push(n)}}),a.length)return this._engine.markElementAsRemoved(this.id,t,!0,e),n&&ar(a).onDone(function(){return i._engine.processLeaveNode(t)}),!0}return!1},t.prototype.prepareLeaveAnimationListeners=function(t){var e=this,n=this._elementListeners.get(t);if(n){var r=new Set;n.forEach(function(n){var i=n.name;if(!r.has(i)){r.add(i);var o=e._triggers[i].fallbackTransition,a=e._engine.statesByElement.get(t)[i]||Ii,s=new Li("void"),u=new ki(e.id,i,t);e._engine.totalQueuedPlayers++,e._queue.push({element:t,triggerName:i,transition:o,fromState:a,toState:s,player:u,isFallbackTransition:!0})}})}},t.prototype.removeNode=function(t,e){var n=this,r=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e,!0),!this.triggerLeaveAnimation(t,e,!0)){var i=!1;if(r.totalAnimations){var o=r.players.length?r.playersByQueriedElement.get(t):[];if(o&&o.length)i=!0;else for(var a=t;a=a.parentNode;)if(r.statesByElement.get(a)){i=!0;break}}this.prepareLeaveAnimationListeners(t),i?r.markElementAsRemoved(this.id,t,!1,e):(r.afterFlush(function(){return n.clearElementCache(t)}),r.destroyInnerAnimations(t),r._onRemovalComplete(t,e))}},t.prototype.insertNode=function(t,e){Vi(t,this._hostClassName)},t.prototype.drainQueuedTransitions=function(t){var e=this,n=[];return this._queue.forEach(function(r){var i=r.player;if(!i.destroyed){var o=r.element,a=e._elementListeners.get(o);a&&a.forEach(function(e){if(e.name==r.triggerName){var n=cr(o,r.triggerName,r.fromState.value,r.toState.value);n._data=t,ur(r.player,e.phase,n,e.callback)}}),i.markedForDestroy?e._engine.afterFlush(function(){i.destroy()}):n.push(r)}}),this._queue=[],n.sort(function(t,n){var r=t.transition.ast.depCount,i=n.transition.ast.depCount;return 0==r||0==i?r-i:e._engine.driver.containsElement(t.element,n.element)?1:-1})},t.prototype.destroy=function(t){this.players.forEach(function(t){return t.destroy()}),this._signalRemovalForInnerTriggers(this.hostElement,t)},t.prototype.elementContainsData=function(t){var e=!1;return this._elementListeners.has(t)&&(e=!0),!!this._queue.find(function(e){return e.element===t})||e},t}(),Di=function(){function t(t,e,n){this.bodyNode=t,this.driver=e,this._normalizer=n,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=function(t,e){}}return t.prototype._onRemovalComplete=function(t,e){this.onRemovalComplete(t,e)},Object.defineProperty(t.prototype,"queuedPlayers",{get:function(){var t=[];return this._namespaceList.forEach(function(e){e.players.forEach(function(e){e.queued&&t.push(e)})}),t},enumerable:!0,configurable:!0}),t.prototype.createNamespace=function(t,e){var n=new Ni(t,e,this);return e.parentNode?this._balanceNamespaceList(n,e):(this.newHostElements.set(e,n),this.collectEnterElement(e)),this._namespaceLookup[t]=n},t.prototype._balanceNamespaceList=function(t,e){var n=this._namespaceList.length-1;if(n>=0){for(var r=!1,i=n;i>=0;i--)if(this.driver.containsElement(this._namespaceList[i].hostElement,e)){this._namespaceList.splice(i+1,0,t),r=!0;break}r||this._namespaceList.splice(0,0,t)}else this._namespaceList.push(t);return this.namespacesByHostElement.set(e,t),t},t.prototype.register=function(t,e){var n=this._namespaceLookup[t];return n||(n=this.createNamespace(t,e)),n},t.prototype.registerTrigger=function(t,e,n){var r=this._namespaceLookup[t];r&&r.register(e,n)&&this.totalAnimations++},t.prototype.destroy=function(t,e){var n=this;if(t){var r=this._fetchNamespace(t);this.afterFlush(function(){n.namespacesByHostElement.delete(r.hostElement),delete n._namespaceLookup[t];var e=n._namespaceList.indexOf(r);e>=0&&n._namespaceList.splice(e,1)}),this.afterFlushAnimationsDone(function(){return r.destroy(e)})}},t.prototype._fetchNamespace=function(t){return this._namespaceLookup[t]},t.prototype.fetchNamespacesByElement=function(t){var e=new Set,n=this.statesByElement.get(t);if(n)for(var r=Object.keys(n),i=0;i<r.length;i++){var o=n[r[i]].namespaceId;if(o){var a=this._fetchNamespace(o);a&&e.add(a)}}return e},t.prototype.trigger=function(t,e,n,r){if(Fi(e)){var i=this._fetchNamespace(t);if(i)return i.trigger(e,n,r),!0}return!1},t.prototype.insertNode=function(t,e,n,r){if(Fi(e)){var i=e[Ri];if(i&&i.setForRemoval){i.setForRemoval=!1,i.setForMove=!0;var o=this.collectedLeaveElements.indexOf(e);o>=0&&this.collectedLeaveElements.splice(o,1)}if(t){var a=this._fetchNamespace(t);a&&a.insertNode(e,n)}r&&this.collectEnterElement(e)}},t.prototype.collectEnterElement=function(t){this.collectedEnterElements.push(t)},t.prototype.markElementAsDisabled=function(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),Vi(t,"ng-animate-disabled")):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),zi(t,"ng-animate-disabled"))},t.prototype.removeNode=function(t,e,n){if(Fi(e)){var r=t?this._fetchNamespace(t):null;r?r.removeNode(e,n):this.markElementAsRemoved(t,e,!1,n)}else this._onRemovalComplete(e,n)},t.prototype.markElementAsRemoved=function(t,e,n,r){this.collectedLeaveElements.push(e),e[Ri]={namespaceId:t,setForRemoval:r,hasAnimation:n,removedBeforeQueried:!1}},t.prototype.listen=function(t,e,n,r,i){return Fi(e)?this._fetchNamespace(t).listen(e,n,r,i):function(){}},t.prototype._buildInstruction=function(t,e,n,r,i){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,n,r,t.fromState.options,t.toState.options,e,i)},t.prototype.destroyInnerAnimations=function(t){var e=this,n=this.driver.query(t,".ng-trigger",!0);n.forEach(function(t){return e.destroyActiveAnimationsForElement(t)}),0!=this.playersByQueriedElement.size&&(n=this.driver.query(t,".ng-animating",!0)).forEach(function(t){return e.finishActiveQueriedAnimationOnElement(t)})},t.prototype.destroyActiveAnimationsForElement=function(t){var e=this.playersByElement.get(t);e&&e.forEach(function(t){t.queued?t.markedForDestroy=!0:t.destroy()})},t.prototype.finishActiveQueriedAnimationOnElement=function(t){var e=this.playersByQueriedElement.get(t);e&&e.forEach(function(t){return t.finish()})},t.prototype.whenRenderingDone=function(){var t=this;return new Promise(function(e){if(t.players.length)return ar(t.players).onDone(function(){return e()});e()})},t.prototype.processLeaveNode=function(t){var e=this,n=t[Ri];if(n&&n.setForRemoval){if(t[Ri]=Pi,n.namespaceId){this.destroyInnerAnimations(t);var r=this._fetchNamespace(n.namespaceId);r&&r.clearElementCache(t)}this._onRemovalComplete(t,n.setForRemoval)}this.driver.matchesElement(t,".ng-animate-disabled")&&this.markElementAsDisabled(t,!1),this.driver.query(t,".ng-animate-disabled",!0).forEach(function(n){e.markElementAsDisabled(t,!1)})},t.prototype.flush=function(t){var e=this;void 0===t&&(t=-1);var n=[];if(this.newHostElements.size&&(this.newHostElements.forEach(function(t,n){return e._balanceNamespaceList(t,n)}),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(var r=0;r<this.collectedEnterElements.length;r++)Vi(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){var i=[];try{n=this._flushAnimations(i,t)}finally{for(r=0;r<i.length;r++)i[r]()}}else for(r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(function(t){return t()}),this._flushFns=[],this._whenQuietFns.length){var o=this._whenQuietFns;this._whenQuietFns=[],n.length?ar(n).onDone(function(){o.forEach(function(t){return t()})}):o.forEach(function(t){return t()})}},t.prototype.reportError=function(t){throw new Error("Unable to process animations due to the following failed trigger transitions\n "+t.join("\n"))},t.prototype._flushAnimations=function(t,e){var n=this,r=new si,i=[],o=new Map,a=[],s=new Map,u=new Map,l=new Map,h=new Set;this.disabledNodes.forEach(function(t){h.add(t);for(var e=n.driver.query(t,".ng-animate-queued",!0),r=0;r<e.length;r++)h.add(e[r])});var d=this.bodyNode,p=Array.from(this.statesByElement.keys()),f=Bi(p,this.collectedEnterElements),m=new Map,v=0;f.forEach(function(t,e){var n="ng-enter"+v++;m.set(e,n),t.forEach(function(t){return Vi(t,n)})});for(var g=[],y=new Set,_=new Set,b=0;b<this.collectedLeaveElements.length;b++)(F=(k=this.collectedLeaveElements[b])[Ri])&&F.setForRemoval&&(g.push(k),y.add(k),F.hasAnimation?this.driver.query(k,".ng-star-inserted",!0).forEach(function(t){return y.add(t)}):_.add(k));var w=new Map,x=Bi(p,Array.from(y));x.forEach(function(t,e){var n="ng-leave"+v++;w.set(e,n),t.forEach(function(t){return Vi(t,n)})}),t.push(function(){f.forEach(function(t,e){var n=m.get(e);t.forEach(function(t){return zi(t,n)})}),x.forEach(function(t,e){var n=w.get(e);t.forEach(function(t){return zi(t,n)})}),g.forEach(function(t){n.processLeaveNode(t)})});for(var E=[],S=[],T=this._namespaceList.length-1;T>=0;T--)this._namespaceList[T].drainQueuedTransitions(e).forEach(function(t){var e=t.player,o=t.element;if(E.push(e),n.collectedEnterElements.length){var c=o[Ri];if(c&&c.setForMove)return void e.destroy()}var h=!d||!n.driver.containsElement(d,o),p=w.get(o),f=m.get(o),v=n._buildInstruction(t,r,f,p,h);if(v.errors&&v.errors.length)S.push(v);else{if(h)return e.onStart(function(){return Fr(o,v.fromStyles)}),e.onDestroy(function(){return kr(o,v.toStyles)}),void i.push(e);if(t.isFallbackTransition)return e.onStart(function(){return Fr(o,v.fromStyles)}),e.onDestroy(function(){return kr(o,v.toStyles)}),void i.push(e);v.timelines.forEach(function(t){return t.stretchStartingKeyframe=!0}),r.append(o,v.timelines),a.push({instruction:v,player:e,element:o}),v.queriedElements.forEach(function(t){return hr(s,t,[]).push(e)}),v.preStyleProps.forEach(function(t,e){var n=Object.keys(t);if(n.length){var r=u.get(e);r||u.set(e,r=new Set),n.forEach(function(t){return r.add(t)})}}),v.postStyleProps.forEach(function(t,e){var n=Object.keys(t),r=l.get(e);r||l.set(e,r=new Set),n.forEach(function(t){return r.add(t)})})}});if(S.length){var M=[];S.forEach(function(t){M.push("@"+t.triggerName+" has failed due to:\n"),t.errors.forEach(function(t){return M.push("- "+t+"\n")})}),E.forEach(function(t){return t.destroy()}),this.reportError(M)}var C=new Map,A=new Map;a.forEach(function(t){var e=t.element;r.has(e)&&(A.set(e,e),n._beforeAnimationBuild(t.player.namespaceId,t.instruction,C))}),i.forEach(function(t){var e=t.element;n._getPreviousPlayers(e,!1,t.namespaceId,t.triggerName,null).forEach(function(t){hr(C,e,[]).push(t),t.destroy()})});var P=g.filter(function(t){return Wi(t,u,l)}),O=new Map;Ui(O,this.driver,_,l,Jn).forEach(function(t){Wi(t,u,l)&&P.push(t)});var R=new Map;f.forEach(function(t,e){Ui(R,n.driver,new Set(t),u,ir)}),P.forEach(function(t){var e=O.get(t),n=R.get(t);O.set(t,Object(c.__assign)({},e,n))});var L=[],I=[],N={};a.forEach(function(t){var e=t.element,a=t.player,s=t.instruction;if(r.has(e)){if(h.has(e))return a.onDestroy(function(){return kr(e,s.toStyles)}),a.disabled=!0,a.overrideTotalTime(s.totalTime),void i.push(a);var u=N;if(A.size>1){for(var l=e,c=[];l=l.parentNode;){var d=A.get(l);if(d){u=d;break}c.push(l)}c.forEach(function(t){return A.set(t,u)})}var p=n._buildAnimation(a.namespaceId,s,C,o,R,O);if(a.setRealPlayer(p),u===N)L.push(a);else{var f=n.playersByElement.get(u);f&&f.length&&(a.parentPlayer=ar(f)),i.push(a)}}else Fr(e,s.fromStyles),a.onDestroy(function(){return kr(e,s.toStyles)}),I.push(a),h.has(e)&&i.push(a)}),I.forEach(function(t){var e=o.get(t.element);if(e&&e.length){var n=ar(e);t.setRealPlayer(n)}}),i.forEach(function(t){t.parentPlayer?t.syncPlayerEvents(t.parentPlayer):t.destroy()});for(var D=0;D<g.length;D++){var k,F=(k=g[D])[Ri];if(zi(k,"ng-leave"),!F||!F.hasAnimation){var j=[];if(s.size){var U=s.get(k);U&&U.length&&j.push.apply(j,Object(c.__spread)(U));for(var B=this.driver.query(k,".ng-animating",!0),G=0;G<B.length;G++){var V=s.get(B[G]);V&&V.length&&j.push.apply(j,Object(c.__spread)(V))}}var z=j.filter(function(t){return!t.destroyed});z.length?Hi(this,k,z):this.processLeaveNode(k)}}return g.length=0,L.forEach(function(t){n.players.push(t),t.onDone(function(){t.destroy();var e=n.players.indexOf(t);n.players.splice(e,1)}),t.play()}),L},t.prototype.elementContainsData=function(t,e){var n=!1,r=e[Ri];return r&&r.setForRemoval&&(n=!0),this.playersByElement.has(e)&&(n=!0),this.playersByQueriedElement.has(e)&&(n=!0),this.statesByElement.has(e)&&(n=!0),this._fetchNamespace(t).elementContainsData(e)||n},t.prototype.afterFlush=function(t){this._flushFns.push(t)},t.prototype.afterFlushAnimationsDone=function(t){this._whenQuietFns.push(t)},t.prototype._getPreviousPlayers=function(t,e,n,r,i){var o=[];if(e){var a=this.playersByQueriedElement.get(t);a&&(o=a)}else{var s=this.playersByElement.get(t);if(s){var u=!i||"void"==i;s.forEach(function(t){t.queued||(u||t.triggerName==r)&&o.push(t)})}}return(n||r)&&(o=o.filter(function(t){return!(n&&n!=t.namespaceId||r&&r!=t.triggerName)})),o},t.prototype._beforeAnimationBuild=function(t,e,n){var r,i,o=e.element,a=e.isRemovalTransition?void 0:t,s=e.isRemovalTransition?void 0:e.triggerName,u=function(t){var r=t.element,i=r!==o,u=hr(n,r,[]);l._getPreviousPlayers(r,i,a,s,e.toState).forEach(function(t){var e=t.getRealPlayer();e.beforeDestroy&&e.beforeDestroy(),t.destroy(),u.push(t)})},l=this;try{for(var h=Object(c.__values)(e.timelines),d=h.next();!d.done;d=h.next())u(d.value)}catch(t){r={error:t}}finally{try{d&&!d.done&&(i=h.return)&&i.call(h)}finally{if(r)throw r.error}}Fr(o,e.fromStyles)},t.prototype._buildAnimation=function(t,e,n,r,i,o){var a=this,s=e.triggerName,u=e.element,l=[],c=new Set,h=new Set,d=e.timelines.map(function(e){var d=e.element;c.add(d);var p=d[Ri];if(p&&p.removedBeforeQueried)return new nr(e.duration,e.delay);var f,m,v=d!==u,g=(f=(n.get(d)||Ai).map(function(t){return t.getRealPlayer()}),m=[],function t(e,n){for(var r=0;r<e.length;r++){var i=e[r];i instanceof rr?t(i.players,n):n.push(i)}}(f,m),m).filter(function(t){return!!t.element&&t.element===d}),y=i.get(d),_=o.get(d),b=sr(0,a._normalizer,0,e.keyframes,y,_),w=a._buildPlayer(e,b,g);if(e.subTimeline&&r&&h.add(d),v){var x=new ki(t,s,d);x.setRealPlayer(w),l.push(x)}return w});l.forEach(function(t){hr(a.playersByQueriedElement,t.element,[]).push(t),t.onDone(function(){return function(t,e,n){var r;if(t instanceof Map){if(r=t.get(e)){if(r.length){var i=r.indexOf(n);r.splice(i,1)}0==r.length&&t.delete(e)}}else(r=t[e])&&(r.length&&(i=r.indexOf(n),r.splice(i,1)),0==r.length&&delete t[e]);return r}(a.playersByQueriedElement,t.element,t)})}),c.forEach(function(t){return Vi(t,"ng-animating")});var p=ar(d);return p.onDestroy(function(){c.forEach(function(t){return zi(t,"ng-animating")}),kr(u,e.toStyles)}),h.forEach(function(t){hr(r,t,[]).push(p)}),p},t.prototype._buildPlayer=function(t,e,n){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,n):new nr(t.duration,t.delay)},t}(),ki=function(){function t(t,e,n){this.namespaceId=t,this.triggerName=e,this.element=n,this._player=new nr,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}return t.prototype.setRealPlayer=function(t){var e=this;this._containsRealPlayer||(this._player=t,Object.keys(this._queuedCallbacks).forEach(function(n){e._queuedCallbacks[n].forEach(function(e){return ur(t,n,void 0,e)})}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)},t.prototype.getRealPlayer=function(){return this._player},t.prototype.overrideTotalTime=function(t){this.totalTime=t},t.prototype.syncPlayerEvents=function(t){var e=this,n=this._player;n.triggerCallback&&t.onStart(function(){return n.triggerCallback("start")}),t.onDone(function(){return e.finish()}),t.onDestroy(function(){return e.destroy()})},t.prototype._queueEvent=function(t,e){hr(this._queuedCallbacks,t,[]).push(e)},t.prototype.onDone=function(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)},t.prototype.onStart=function(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)},t.prototype.onDestroy=function(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)},t.prototype.init=function(){this._player.init()},t.prototype.hasStarted=function(){return!this.queued&&this._player.hasStarted()},t.prototype.play=function(){!this.queued&&this._player.play()},t.prototype.pause=function(){!this.queued&&this._player.pause()},t.prototype.restart=function(){!this.queued&&this._player.restart()},t.prototype.finish=function(){this._player.finish()},t.prototype.destroy=function(){this.destroyed=!0,this._player.destroy()},t.prototype.reset=function(){!this.queued&&this._player.reset()},t.prototype.setPosition=function(t){this.queued||this._player.setPosition(t)},t.prototype.getPosition=function(){return this.queued?0:this._player.getPosition()},t.prototype.triggerCallback=function(t){var e=this._player;e.triggerCallback&&e.triggerCallback(t)},t}();function Fi(t){return t&&1===t.nodeType}function ji(t,e){var n=t.style.display;return t.style.display=null!=e?e:"none",n}function Ui(t,e,n,r,i){var o=[];n.forEach(function(t){return o.push(ji(t))});var a=[];r.forEach(function(n,r){var o={};n.forEach(function(t){var n=o[t]=e.computeStyle(r,t,i);n&&0!=n.length||(r[Ri]=Oi,a.push(r))}),t.set(r,o)});var s=0;return n.forEach(function(t){return ji(t,o[s++])}),a}function Bi(t,e){var n=new Map;if(t.forEach(function(t){return n.set(t,[])}),0==e.length)return n;var r=new Set(e),i=new Map;return e.forEach(function(t){var e=function t(e){if(!e)return 1;var o=i.get(e);if(o)return o;var a=e.parentNode;return o=n.has(a)?a:r.has(a)?1:t(a),i.set(e,o),o}(t);1!==e&&n.get(e).push(t)}),n}var Gi="$$classes";function Vi(t,e){if(t.classList)t.classList.add(e);else{var n=t[Gi];n||(n=t[Gi]={}),n[e]=!0}}function zi(t,e){if(t.classList)t.classList.remove(e);else{var n=t[Gi];n&&delete n[e]}}function Hi(t,e,n){ar(n).onDone(function(){return t.processLeaveNode(e)})}function Wi(t,e,n){var r=n.get(t);if(!r)return!1;var i=e.get(t);return i?r.forEach(function(t){return i.add(t)}):e.set(t,r),n.delete(t),!0}var qi=function(){function t(t,e,n){var r=this;this.bodyNode=t,this._driver=e,this._triggerCache={},this.onRemovalComplete=function(t,e){},this._transitionEngine=new Di(t,e,n),this._timelineEngine=new Ci(t,e,n),this._transitionEngine.onRemovalComplete=function(t,e){return r.onRemovalComplete(t,e)}}return t.prototype.registerTrigger=function(t,e,n,r,i){var o=t+"-"+r,a=this._triggerCache[o];if(!a){var s=[],u=ti(this._driver,i,s);if(s.length)throw new Error('The animation trigger "'+r+'" has failed to build due to the following errors:\n - '+s.join("\n - "));a=function(t,e){return new Si(t,e)}(r,u),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(e,r,a)},t.prototype.register=function(t,e){this._transitionEngine.register(t,e)},t.prototype.destroy=function(t,e){this._transitionEngine.destroy(t,e)},t.prototype.onInsert=function(t,e,n,r){this._transitionEngine.insertNode(t,e,n,r)},t.prototype.onRemove=function(t,e,n){this._transitionEngine.removeNode(t,e,n)},t.prototype.disableAnimations=function(t,e){this._transitionEngine.markElementAsDisabled(t,e)},t.prototype.process=function(t,e,n,r){if("@"==n.charAt(0)){var i=Object(c.__read)(dr(n),2);this._timelineEngine.command(i[0],e,i[1],r)}else this._transitionEngine.trigger(t,e,n,r)},t.prototype.listen=function(t,e,n,r,i){if("@"==n.charAt(0)){var o=Object(c.__read)(dr(n),2);return this._timelineEngine.listen(o[0],e,o[1],i)}return this._transitionEngine.listen(t,e,n,r,i)},t.prototype.flush=function(t){void 0===t&&(t=-1),this._transitionEngine.flush(t)},Object.defineProperty(t.prototype,"players",{get:function(){return this._transitionEngine.players.concat(this._timelineEngine.players)},enumerable:!0,configurable:!0}),t.prototype.whenRenderingDone=function(){return this._transitionEngine.whenRenderingDone()},t}(),Xi="animation",Yi="animationend",Ki=function(){function t(t,e,n,r,i,o,a){var s=this;this._element=t,this._name=e,this._duration=n,this._delay=r,this._easing=i,this._fillMode=o,this._onDoneFn=a,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=function(t){return s._handleCallback(t)}}return t.prototype.apply=function(){var t,e,n;e=this._duration+"ms "+this._easing+" "+this._delay+"ms 1 normal "+this._fillMode+" "+this._name,(n=eo(t=this._element,"").trim()).length&&(function(t,e){for(var n=0;n<t.length;n++)","===t.charAt(n)&&0}(n),e=n+", "+e),to(t,"",e),$i(this._element,this._eventFn,!1),this._startTime=Date.now()},t.prototype.pause=function(){Zi(this._element,this._name,"paused")},t.prototype.resume=function(){Zi(this._element,this._name,"running")},t.prototype.setPosition=function(t){var e=Qi(this._element,this._name);this._position=t*this._duration,to(this._element,"Delay","-"+this._position+"ms",e)},t.prototype.getPosition=function(){return this._position},t.prototype._handleCallback=function(t){var e=t._ngTestManualTimestamp||Date.now(),n=1e3*parseFloat(t.elapsedTime.toFixed(3));t.animationName==this._name&&Math.max(e-this._startTime,0)>=this._delay&&n>=this._duration&&this.finish()},t.prototype.finish=function(){this._finished||(this._finished=!0,this._onDoneFn(),$i(this._element,this._eventFn,!0))},t.prototype.destroy=function(){var t,e,n,r;this._destroyed||(this._destroyed=!0,this.finish(),e=this._name,(r=Ji(n=eo(t=this._element,"").split(","),e))>=0&&(n.splice(r,1),to(t,"",n.join(","))))},t}();function Zi(t,e,n){to(t,"PlayState",n,Qi(t,e))}function Qi(t,e){var n=eo(t,"");return n.indexOf(",")>0?Ji(n.split(","),e):Ji([n],e)}function Ji(t,e){for(var n=0;n<t.length;n++)if(t[n].indexOf(e)>=0)return n;return-1}function $i(t,e,n){n?t.removeEventListener(Yi,e):t.addEventListener(Yi,e)}function to(t,e,n,r){var i=Xi+e;if(null!=r){var o=t.style[i];if(o.length){var a=o.split(",");a[r]=n,n=a.join(",")}}t.style[i]=n}function eo(t,e){return t.style[Xi+e]}var no="linear",ro=function(){function t(t,e,n,r,i,o,a){this.element=t,this.keyframes=e,this.animationName=n,this._duration=r,this._delay=i,this._finalStyles=a,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this.currentSnapshot={},this._state=0,this.easing=o||no,this.totalTime=r+i,this._buildStyler()}return t.prototype.onStart=function(t){this._onStartFns.push(t)},t.prototype.onDone=function(t){this._onDoneFns.push(t)},t.prototype.onDestroy=function(t){this._onDestroyFns.push(t)},t.prototype.destroy=function(){this.init(),this._state>=4||(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._onDestroyFns.forEach(function(t){return t()}),this._onDestroyFns=[])},t.prototype._flushDoneFns=function(){this._onDoneFns.forEach(function(t){return t()}),this._onDoneFns=[]},t.prototype._flushStartFns=function(){this._onStartFns.forEach(function(t){return t()}),this._onStartFns=[]},t.prototype.finish=function(){this.init(),this._state>=3||(this._state=3,this._styler.finish(),this._flushStartFns(),this._flushDoneFns())},t.prototype.setPosition=function(t){this._styler.setPosition(t)},t.prototype.getPosition=function(){return this._styler.getPosition()},t.prototype.hasStarted=function(){return this._state>=2},t.prototype.init=function(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())},t.prototype.play=function(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2),this._styler.resume()},t.prototype.pause=function(){this.init(),this._styler.pause()},t.prototype.restart=function(){this.reset(),this.play()},t.prototype.reset=function(){this._styler.destroy(),this._buildStyler(),this._styler.apply()},t.prototype._buildStyler=function(){var t=this;this._styler=new Ki(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",function(){return t.finish()})},t.prototype.triggerCallback=function(t){var e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(function(t){return t()}),e.length=0},t.prototype.beforeDestroy=function(){var t=this;this.init();var e={};if(this.hasStarted()){var n=this._state>=3;Object.keys(this._finalStyles).forEach(function(r){"offset"!=r&&(e[r]=n?t._finalStyles[r]:Yr(t.element,r))})}this.currentSnapshot=e},t}(),io=function(t){function e(e,n){var r=t.call(this)||this;return r.element=e,r._startingStyles={},r.__initialized=!1,r._styles=Tr(n),r}return Object(c.__extends)(e,t),e.prototype.init=function(){var e=this;!this.__initialized&&this._startingStyles&&(this.__initialized=!0,Object.keys(this._styles).forEach(function(t){e._startingStyles[t]=e.element.style[t]}),t.prototype.init.call(this))},e.prototype.play=function(){var e=this;this._startingStyles&&(this.init(),Object.keys(this._styles).forEach(function(t){return e.element.style.setProperty(t,e._styles[t])}),t.prototype.play.call(this))},e.prototype.destroy=function(){var e=this;this._startingStyles&&(Object.keys(this._startingStyles).forEach(function(t){var n=e._startingStyles[t];n?e.element.style.setProperty(t,n):e.element.style.removeProperty(t)}),this._startingStyles=null,t.prototype.destroy.call(this))},e}(nr),oo=function(){function t(){this._count=0,this._head=document.querySelector("head"),this._warningIssued=!1}return t.prototype.validateStyleProperty=function(t){return wr(t)},t.prototype.matchesElement=function(t,e){return xr(t,e)},t.prototype.containsElement=function(t,e){return Er(t,e)},t.prototype.query=function(t,e,n){return Sr(t,e,n)},t.prototype.computeStyle=function(t,e,n){return window.getComputedStyle(t)[e]},t.prototype.buildKeyframeElement=function(t,e,n){var r="@keyframes "+e+" {\n",i="";(n=n.map(function(t){return Tr(t)})).forEach(function(t){i=" ";var e=parseFloat(t.offset);r+=""+i+100*e+"% {\n",i+=" ",Object.keys(t).forEach(function(e){var n=t[e];switch(e){case"offset":return;case"easing":return void(n&&(r+=i+"animation-timing-function: "+n+";\n"));default:return void(r+=""+i+e+": "+n+";\n")}}),r+=i+"}\n"}),r+="}\n";var o=document.createElement("style");return o.innerHTML=r,o},t.prototype.animate=function(t,e,n,r,i,o,a){void 0===o&&(o=[]),a&&this._notifyFaultyScrubber();var s=o.filter(function(t){return t instanceof ro}),u={};Wr(n,r)&&s.forEach(function(t){var e=t.currentSnapshot;Object.keys(e).forEach(function(t){return u[t]=e[t]})});var l=function(t){var e={};return t&&(Array.isArray(t)?t:[t]).forEach(function(t){Object.keys(t).forEach(function(n){"offset"!=n&&"easing"!=n&&(e[n]=t[n])})}),e}(e=qr(t,e,u));if(0==n)return new io(t,l);var c="gen_css_kf_"+this._count++,h=this.buildKeyframeElement(t,c,e);document.querySelector("head").appendChild(h);var d=new ro(t,e,c,n,r,i,l);return d.onDestroy(function(){var t;(t=h).parentNode.removeChild(t)}),d},t.prototype._notifyFaultyScrubber=function(){this._warningIssued||(console.warn("@angular/animations: please load the web-animations.js polyfill to allow programmatic access...\n","  visit http://bit.ly/IWukam to learn more about using the web-animation-js polyfill."),this._warningIssued=!0)},t}(),ao=function(){function t(t,e,n){this.element=t,this.keyframes=e,this.options=n,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}return t.prototype._onFinish=function(){this._finished||(this._finished=!0,this._onDoneFns.forEach(function(t){return t()}),this._onDoneFns=[])},t.prototype.init=function(){this._buildPlayer(),this._preparePlayerBeforeStart()},t.prototype._buildPlayer=function(){var t=this;if(!this._initialized){this._initialized=!0;var e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",function(){return t._onFinish()})}},t.prototype._preparePlayerBeforeStart=function(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()},t.prototype._triggerWebAnimation=function(t,e,n){return t.animate(e,n)},t.prototype.onStart=function(t){this._onStartFns.push(t)},t.prototype.onDone=function(t){this._onDoneFns.push(t)},t.prototype.onDestroy=function(t){this._onDestroyFns.push(t)},t.prototype.play=function(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(function(t){return t()}),this._onStartFns=[],this._started=!0),this.domPlayer.play()},t.prototype.pause=function(){this.init(),this.domPlayer.pause()},t.prototype.finish=function(){this.init(),this._onFinish(),this.domPlayer.finish()},t.prototype.reset=function(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1},t.prototype._resetDomPlayerState=function(){this.domPlayer&&this.domPlayer.cancel()},t.prototype.restart=function(){this.reset(),this.play()},t.prototype.hasStarted=function(){return this._started},t.prototype.destroy=function(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._onDestroyFns.forEach(function(t){return t()}),this._onDestroyFns=[])},t.prototype.setPosition=function(t){this.domPlayer.currentTime=t*this.time},t.prototype.getPosition=function(){return this.domPlayer.currentTime/this.time},Object.defineProperty(t.prototype,"totalTime",{get:function(){return this._delay+this._duration},enumerable:!0,configurable:!0}),t.prototype.beforeDestroy=function(){var t=this,e={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(function(n){"offset"!=n&&(e[n]=t._finished?t._finalKeyframe[n]:Yr(t.element,n))}),this.currentSnapshot=e},t.prototype.triggerCallback=function(t){var e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(function(t){return t()}),e.length=0},t}(),so=function(){function t(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(uo().toString()),this._cssKeyframesDriver=new oo}return t.prototype.validateStyleProperty=function(t){return wr(t)},t.prototype.matchesElement=function(t,e){return xr(t,e)},t.prototype.containsElement=function(t,e){return Er(t,e)},t.prototype.query=function(t,e,n){return Sr(t,e,n)},t.prototype.computeStyle=function(t,e,n){return window.getComputedStyle(t)[e]},t.prototype.overrideWebAnimationsSupport=function(t){this._isNativeImpl=t},t.prototype.animate=function(t,e,n,r,i,o,a){if(void 0===o&&(o=[]),!a&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(t,e,n,r,i,o);var s={duration:n,delay:r,fill:0==r?"both":"forwards"};i&&(s.easing=i);var u={},l=o.filter(function(t){return t instanceof ao});return Wr(n,r)&&l.forEach(function(t){var e=t.currentSnapshot;Object.keys(e).forEach(function(t){return u[t]=e[t]})}),e=qr(t,e=e.map(function(t){return Ir(t,!1)}),u),new ao(t,e,s)},t}();function uo(){return"undefined"!=typeof window&&void 0!==window.document&&Element.prototype.animate||{}}var lo=function(t){function e(e,n){var i=t.call(this)||this;return i._nextAnimationId=0,i._renderer=e.createRenderer(n.body,{id:"0",encapsulation:r.T.None,styles:[],data:{animation:[]}}),i}return Object(c.__extends)(e,t),e.prototype.build=function(t){var e=this._nextAnimationId.toString();this._nextAnimationId++;var n=Array.isArray(t)?$n(t):t;return po(this._renderer,null,e,"register",[n]),new co(e,this._renderer)},Object(c.__decorate)([Object(c.__param)(1,Object(r.r)(d.b))],e)}(Qn),co=function(t){function e(e,n){var r=t.call(this)||this;return r._id=e,r._renderer=n,r}return Object(c.__extends)(e,t),e.prototype.create=function(t,e){return new ho(this._id,t,e||{},this._renderer)},e}(function(){}),ho=function(){function t(t,e,n,r){this.id=t,this.element=e,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",n)}return t.prototype._listen=function(t,e){return this._renderer.listen(this.element,"@@"+this.id+":"+t,e)},t.prototype._command=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return po(this._renderer,this.element,this.id,t,e)},t.prototype.onDone=function(t){this._listen("done",t)},t.prototype.onStart=function(t){this._listen("start",t)},t.prototype.onDestroy=function(t){this._listen("destroy",t)},t.prototype.init=function(){this._command("init")},t.prototype.hasStarted=function(){return this._started},t.prototype.play=function(){this._command("play"),this._started=!0},t.prototype.pause=function(){this._command("pause")},t.prototype.restart=function(){this._command("restart")},t.prototype.finish=function(){this._command("finish")},t.prototype.destroy=function(){this._command("destroy")},t.prototype.reset=function(){this._command("reset")},t.prototype.setPosition=function(t){this._command("setPosition",t)},t.prototype.getPosition=function(){return 0},t}();function po(t,e,n,r,i){return t.setProperty(e,"@@"+n+":"+r,i)}var fo=function(){function t(t,e,n){this.delegate=t,this.engine=e,this._zone=n,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),e.onRemovalComplete=function(t,e){e&&e.parentNode(t)&&e.removeChild(t.parentNode,t)}}return t.prototype.createRenderer=function(t,e){var n=this,r=this.delegate.createRenderer(t,e);if(!(t&&e&&e.data&&e.data.animation)){var i=this._rendererCache.get(r);return i||(i=new mo("",r,this.engine),this._rendererCache.set(r,i)),i}var o=e.id,a=e.id+"-"+this._currentId;return this._currentId++,this.engine.register(a,t),e.data.animation.forEach(function(e){return n.engine.registerTrigger(o,a,t,e.name,e)}),new vo(this,a,r,this.engine)},t.prototype.begin=function(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()},t.prototype._scheduleCountTask=function(){var t=this;this.promise.then(function(){t._microtaskId++})},t.prototype.scheduleListenerCallback=function(t,e,n){var r=this;t>=0&&t<this._microtaskId?this._zone.run(function(){return e(n)}):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(function(){r._zone.run(function(){r._animationCallbacksBuffer.forEach(function(t){var e=Object(c.__read)(t,2);(0,e[0])(e[1])}),r._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([e,n]))},t.prototype.end=function(){var t=this;this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(function(){t._scheduleCountTask(),t.engine.flush(t._microtaskId)}),this.delegate.end&&this.delegate.end()},t.prototype.whenRenderingDone=function(){return this.engine.whenRenderingDone()},t}(),mo=function(){function t(t,e,n){this.namespaceId=t,this.delegate=e,this.engine=n,this.destroyNode=this.delegate.destroyNode?function(t){return e.destroyNode(t)}:null}return Object.defineProperty(t.prototype,"data",{get:function(){return this.delegate.data},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()},t.prototype.createElement=function(t,e){return this.delegate.createElement(t,e)},t.prototype.createComment=function(t){return this.delegate.createComment(t)},t.prototype.createText=function(t){return this.delegate.createText(t)},t.prototype.appendChild=function(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)},t.prototype.insertBefore=function(t,e,n){this.delegate.insertBefore(t,e,n),this.engine.onInsert(this.namespaceId,e,t,!0)},t.prototype.removeChild=function(t,e){this.engine.onRemove(this.namespaceId,e,this.delegate)},t.prototype.selectRootElement=function(t){return this.delegate.selectRootElement(t)},t.prototype.parentNode=function(t){return this.delegate.parentNode(t)},t.prototype.nextSibling=function(t){return this.delegate.nextSibling(t)},t.prototype.setAttribute=function(t,e,n,r){this.delegate.setAttribute(t,e,n,r)},t.prototype.removeAttribute=function(t,e,n){this.delegate.removeAttribute(t,e,n)},t.prototype.addClass=function(t,e){this.delegate.addClass(t,e)},t.prototype.removeClass=function(t,e){this.delegate.removeClass(t,e)},t.prototype.setStyle=function(t,e,n,r){this.delegate.setStyle(t,e,n,r)},t.prototype.removeStyle=function(t,e,n){this.delegate.removeStyle(t,e,n)},t.prototype.setProperty=function(t,e,n){"@"==e.charAt(0)&&"@.disabled"==e?this.disableAnimations(t,!!n):this.delegate.setProperty(t,e,n)},t.prototype.setValue=function(t,e){this.delegate.setValue(t,e)},t.prototype.listen=function(t,e,n){return this.delegate.listen(t,e,n)},t.prototype.disableAnimations=function(t,e){this.engine.disableAnimations(t,e)},t}(),vo=function(t){function e(e,n,r,i){var o=t.call(this,n,r,i)||this;return o.factory=e,o.namespaceId=n,o}return Object(c.__extends)(e,t),e.prototype.setProperty=function(t,e,n){"@"==e.charAt(0)?"."==e.charAt(1)&&"@.disabled"==e?this.disableAnimations(t,n=void 0===n||!!n):this.engine.process(this.namespaceId,t,e.substr(1),n):this.delegate.setProperty(t,e,n)},e.prototype.listen=function(t,e,n){var r,i,o,a=this;if("@"==e.charAt(0)){var s=function(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}(t),u=e.substr(1),l="";return"@"!=u.charAt(0)&&(u=(r=Object(c.__read)((i=u,o=i.indexOf("."),[i.substring(0,o),i.substr(o+1)]),2))[0],l=r[1]),this.engine.listen(this.namespaceId,s,u,l,function(t){a.factory.scheduleListenerCallback(t._data||-1,n,t)})}return this.delegate.listen(t,e,n)},e}(mo),go=function(t){function e(e,n,r){return t.call(this,e.body,n,r)||this}return Object(c.__extends)(e,t),Object(c.__decorate)([Object(c.__param)(0,Object(r.r)(h.c))],e)}(qi);function yo(){return"function"==typeof uo()?new so:new oo}function _o(){return new yi}function bo(t,e,n){return new fo(t,e,n)}var wo=new r.s("AnimationModuleType"),xo=function(){},Eo=n("OTVi"),So=function(){},To=function(){},Mo=function(){},Co=function(){},Ao=n("PCNd"),Po=function(){},Oo=r.Qa(o,[s],function(t){return r.ab([r.bb(512,r.k,r.Fa,[[8,[u.a,I,F,et,Ne,Ge,Ke,tn,an,dn,vn,En,Rn,Dn,Un,Zn]],[3,r.k],r.A]),r.bb(5120,r.x,r.Oa,[[3,r.x]]),r.bb(4608,h.k,h.j,[r.x,[2,h.r]]),r.bb(5120,r.c,r.La,[]),r.bb(5120,r.v,r.Ma,[]),r.bb(5120,r.w,r.Na,[]),r.bb(4608,d.c,d.l,[h.c]),r.bb(6144,r.J,null,[d.c]),r.bb(4608,d.f,d.h,[]),r.bb(5120,d.d,function(t,e,n,r,i,o,a,s){return[new d.j(t,e,n),new d.o(r),new d.n(i,o,a,s)]},[h.c,r.C,r.E,h.c,h.c,d.f,r.Ga,[2,d.g]]),r.bb(4608,d.e,d.e,[d.d,r.C]),r.bb(135680,d.m,d.m,[h.c]),r.bb(4608,d.k,d.k,[d.e,d.m]),r.bb(5120,Cr,yo,[]),r.bb(5120,gi,_o,[]),r.bb(4608,qi,go,[h.c,Cr,gi]),r.bb(5120,r.H,bo,[d.k,qi,r.C]),r.bb(6144,d.p,null,[d.m]),r.bb(4608,r.Q,r.Q,[r.C]),r.bb(4608,Ve.i,Ve.o,[h.c,r.E,Ve.m]),r.bb(4608,Ve.p,Ve.p,[Ve.i,Ve.n]),r.bb(5120,Ve.a,function(t){return[t]},[Ve.p]),r.bb(4608,Ve.l,Ve.l,[]),r.bb(6144,Ve.j,null,[Ve.l]),r.bb(4608,Ve.h,Ve.h,[Ve.j]),r.bb(6144,Ve.b,null,[Ve.h]),r.bb(4608,Ve.f,Ve.k,[Ve.b,r.t]),r.bb(4608,Ve.c,Ve.c,[Ve.f]),r.bb(4608,Qn,lo,[r.H,d.b]),r.bb(5120,z.a,z.z,[z.k]),r.bb(4608,z.e,z.e,[]),r.bb(6144,z.f,null,[z.e]),r.bb(135680,z.p,z.p,[z.k,r.z,r.j,r.t,z.f]),r.bb(4608,z.d,z.d,[]),r.bb(5120,z.D,z.v,[z.k,h.o,z.g]),r.bb(5120,z.h,z.C,[z.A]),r.bb(5120,r.b,function(t){return[t]},[z.h]),r.bb(4608,He.a,He.a,[z.k]),r.bb(4608,Eo.a,Eo.a,[He.a]),r.bb(4608,j.y,j.y,[]),r.bb(4608,U.a,U.a,[Ve.c,x,He.a]),r.bb(4608,G.a,G.a,[U.a,Ve.c,He.a]),r.bb(1073742336,h.b,h.b,[]),r.bb(1024,r.m,d.q,[]),r.bb(1024,r.B,function(){return[z.u()]},[]),r.bb(512,z.A,z.A,[r.t]),r.bb(1024,r.d,function(t,e){return[d.r(t),z.B(e)]},[[2,r.B],z.A]),r.bb(512,r.e,r.e,[[2,r.d]]),r.bb(131584,r.g,r.g,[r.C,r.Ga,r.t,r.m,r.k,r.e]),r.bb(1073742336,r.f,r.f,[r.g]),r.bb(1073742336,d.a,d.a,[[3,d.a]]),r.bb(1073742336,Ve.e,Ve.e,[]),r.bb(1073742336,Ve.d,Ve.d,[]),r.bb(1024,z.t,z.x,[[3,z.k]]),r.bb(512,z.r,z.c,[]),r.bb(512,z.b,z.b,[]),r.bb(256,z.g,{preloadingStrategy:z.e},[]),r.bb(1024,h.g,z.w,[h.m,[2,h.a],z.g]),r.bb(512,h.f,h.f,[h.g]),r.bb(512,r.j,r.j,[]),r.bb(512,r.z,r.N,[r.j,[2,r.O]]),r.bb(1024,z.i,function(){return[[{path:"",component:N},{path:"products",loadChildren:"./products/products.module#ProductsModule"},{path:"shopping-list",component:Z,canActivate:[Eo.a]},{path:"engine",component:Re},{path:"order",component:ke},{path:"order-history",component:We},{path:"materialFinish",component:Ze},{path:"calc-circuit",component:nn},{path:"assign-orders-factories",component:un},{path:"signup/privacy",component:pn},{path:"catalog",component:yn},{path:"collection",component:Mn}],[{path:"signup",component:Ln},{path:"signin",component:kn}]]},[]),r.bb(1024,z.k,z.y,[r.g,z.r,z.b,h.f,r.t,r.z,r.j,z.i,z.g,[2,z.q],[2,z.j]]),r.bb(1073742336,z.n,z.n,[[2,z.t],[2,z.k]]),r.bb(1073742336,T,T,[]),r.bb(1073742336,xo,xo,[]),r.bb(1073742336,So,So,[]),r.bb(1073742336,j.v,j.v,[]),r.bb(1073742336,j.i,j.i,[]),r.bb(1073742336,To,To,[]),r.bb(1073742336,Mo,Mo,[]),r.bb(1073742336,Co,Co,[]),r.bb(1073742336,Ao.a,Ao.a,[]),r.bb(1073742336,Po,Po,[]),r.bb(1073742336,o,o,[]),r.bb(256,r.Ea,!0,[]),r.bb(256,Ve.m,"XSRF-TOKEN",[]),r.bb(256,Ve.n,"X-XSRF-TOKEN",[]),r.bb(256,wo,"BrowserAnimations",[]),r.bb(256,f,{default:S,config:{}},[])])});Object(r.X)(),d.i().bootstrapModuleFactory(Oo).catch(function(t){return console.log(t)})},zo3G:function(t,e,n){"use strict";var r=n("mrSG"),i=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r}return r.__extends(e,t),e.prototype.schedule=function(e,n){return void 0===n&&(n=0),n>0?t.prototype.schedule.call(this,e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)},e.prototype.execute=function(e,n){return n>0||this.closed?t.prototype.execute.call(this,e,n):this._execute(e,n)},e.prototype.requestAsyncId=function(e,n,r){return void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0?t.prototype.requestAsyncId.call(this,e,n,r):e.flush(this)},e}(function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r.pending=!1,r}return r.__extends(e,t),e.prototype.schedule=function(t,e){if(void 0===e&&(e=0),this.closed)return this;this.state=t;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this},e.prototype.requestAsyncId=function(t,e,n){return void 0===n&&(n=0),setInterval(t.flush.bind(t,this),n)},e.prototype.recycleAsyncId=function(t,e,n){if(void 0===n&&(n=0),null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)},e.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,e){var n=!1,r=void 0;try{this.work(t)}catch(t){n=!0,r=!!t&&t||new Error(t)}if(n)return this.unsubscribe(),r},e.prototype._unsubscribe=function(){var t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null},e}(function(t){function e(e,n){return t.call(this)||this}return r.__extends(e,t),e.prototype.schedule=function(t,e){return void 0===e&&(e=0),this},e}(n("pugT").a))),o=n("siIJ"),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.__extends(e,t),e}(function(t){function e(n,r){void 0===r&&(r=o.Scheduler.now);var i=t.call(this,n,function(){return e.delegate&&e.delegate!==i?e.delegate.now():r()})||this;return i.actions=[],i.active=!1,i.scheduled=void 0,i}return r.__extends(e,t),e.prototype.schedule=function(n,r,i){return void 0===r&&(r=0),e.delegate&&e.delegate!==this?e.delegate.schedule(n,r,i):t.prototype.schedule.call(this,n,r,i)},e.prototype.flush=function(t){var e=this.actions;if(this.active)e.push(t);else{var n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}},e}(o.Scheduler));n.d(e,"queue",function(){return s});var s=new a(i)},zotm:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("rPjj"),i=n("Fxb1");function o(t,e,n,o,a){if(void 0===a&&(a=new r.a(t,n,o)),!a.closed)return Object(i.a)(e)(a)}},"zrt+":function(t,e,n){"use strict";n.r(e),n.d(e,"isObservable",function(){return i});var r=n("6blF");function i(t){return!!t&&(t instanceof r.a||"function"==typeof t.lift&&"function"==typeof t.subscribe)}},zzGN:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("73GG"),i=n("QLcj"),o=n("rkrO"),a=n("LlK3");e.DataConnection=i.PersistentConnection,i.PersistentConnection.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},i.PersistentConnection.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)},e.RealTimeConnection=a.Connection,e.hijackHash=function(t){var e=i.PersistentConnection.prototype.put;return i.PersistentConnection.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){i.PersistentConnection.prototype.put=e}},e.ConnectionTarget=r.RepoInfo,e.queryIdentifier=function(t){return t.queryIdentifier()},e.listens=function(t){return t.repo.persistentConnection_.listens_},e.forceRestClient=function(t){o.RepoManager.getInstance().forceRestClient(t)}}},[[2,1]]]);